"use strict";var $rt=Object.create;var H4=Object.defineProperty;var Mde=Object.getOwnPropertyDescriptor;var Krt=Object.getOwnPropertyNames;var Urt=Object.getPrototypeOf,Vrt=Object.prototype.hasOwnProperty;var ce=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),da=(t,e)=>{for(var r in e)H4(t,r,{get:e[r],enumerable:!0})},Pde=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Krt(e))!Vrt.call(t,i)&&i!==r&&H4(t,i,{get:()=>e[i],enumerable:!(n=Mde(e,i))||n.enumerable});return t};var Ct=(t,e,r)=>(r=t!=null?$rt(Urt(t)):{},Pde(e||!t||!t.__esModule?H4(r,"default",{value:t,enumerable:!0}):r,t)),Jt=t=>Pde(H4({},"__esModule",{value:!0}),t),E1=(t,e,r,n)=>{for(var i=n>1?void 0:n?Mde(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&H4(e,r,i),i},Nde=(t,e)=>(r,n)=>e(r,n,t);var Bde=m(()=>{var Fde;(function(t){(function(e){var r=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:a(),n=i(t);typeof r.Reflect<"u"&&(n=i(r.Reflect,n)),e(n,r),typeof r.Reflect>"u"&&(r.Reflect=t);function i(u,c){return function(l,d){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:d}),c&&c(l,d)}}function s(){try{return Function("return this;")()}catch{}}function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}function a(){return s()||o()}})(function(e,r){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",a=typeof Object.create=="function",u={__proto__:[]}instanceof Array,c=!a&&!u,l={create:a?function(){return ju(Object.create(null))}:u?function(){return ju({__proto__:null})}:function(){return ju({})},has:c?function(Z,oe){return n.call(Z,oe)}:function(Z,oe){return oe in Z},get:c?function(Z,oe){return n.call(Z,oe)?Z[oe]:void 0}:function(Z,oe){return Z[oe]}},d=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ur(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Pn(),h=typeof WeakMap=="function"?WeakMap:Qc(),g=i?Symbol.for("@reflect-metadata:registry"):void 0,_=zt(),S=Nr(_);function w(Z,oe,D,N){if(Me(D)){if(!G(Z))throw new TypeError;if(!Y(oe))throw new TypeError;return U(Z,oe)}else{if(!G(Z))throw new TypeError;if(!_t(oe))throw new TypeError;if(!_t(N)&&!Me(N)&&!Ce(N))throw new TypeError;return Ce(N)&&(N=void 0),D=$(D),k(Z,oe,D,N)}}e("decorate",w);function C(Z,oe){function D(N,K){if(!_t(N))throw new TypeError;if(!Me(K)&&!te(K))throw new TypeError;Ee(Z,oe,N,K)}return D}e("metadata",C);function A(Z,oe,D,N){if(!_t(D))throw new TypeError;return Me(N)||(N=$(N)),Ee(Z,oe,D,N)}e("defineMetadata",A);function O(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),H(Z,oe,D)}e("hasMetadata",O);function x(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),ie(Z,oe,D)}e("hasOwnMetadata",x);function R(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),j(Z,oe,D)}e("getMetadata",R);function M(Z,oe,D){if(!_t(oe))throw new TypeError;return Me(D)||(D=$(D)),V(Z,oe,D)}e("getOwnMetadata",M);function I(Z,oe){if(!_t(Z))throw new TypeError;return Me(oe)||(oe=$(oe)),Re(Z,oe)}e("getMetadataKeys",I);function F(Z,oe){if(!_t(Z))throw new TypeError;return Me(oe)||(oe=$(oe)),fe(Z,oe)}e("getOwnMetadataKeys",F);function B(Z,oe,D){if(!_t(oe))throw new TypeError;if(Me(D)||(D=$(D)),!_t(oe))throw new TypeError;Me(D)||(D=$(D));var N=Dt(oe,D,!1);return Me(N)?!1:N.OrdinaryDeleteMetadata(Z,oe,D)}e("deleteMetadata",B);function U(Z,oe){for(var D=Z.length-1;D>=0;--D){var N=Z[D],K=N(oe);if(!Me(K)&&!Ce(K)){if(!Y(K))throw new TypeError;oe=K}}return oe}function k(Z,oe,D,N){for(var K=Z.length-1;K>=0;--K){var Q=Z[K],Oe=Q(oe,D,N);if(!Me(Oe)&&!Ce(Oe)){if(!_t(Oe))throw new TypeError;N=Oe}}return N}function H(Z,oe,D){var N=ie(Z,oe,D);if(N)return!0;var K=He(oe);return Ce(K)?!1:H(Z,K,D)}function ie(Z,oe,D){var N=Dt(oe,D,!1);return Me(N)?!1:tr(N.OrdinaryHasOwnMetadata(Z,oe,D))}function j(Z,oe,D){var N=ie(Z,oe,D);if(N)return V(Z,oe,D);var K=He(oe);if(!Ce(K))return j(Z,K,D)}function V(Z,oe,D){var N=Dt(oe,D,!1);if(!Me(N))return N.OrdinaryGetOwnMetadata(Z,oe,D)}function Ee(Z,oe,D,N){var K=Dt(D,N,!0);K.OrdinaryDefineOwnMetadata(Z,oe,D,N)}function Re(Z,oe){var D=fe(Z,oe),N=He(Z);if(N===null)return D;var K=Re(N,oe);if(K.length<=0)return D;if(D.length<=0)return K;for(var Q=new f,Oe=[],Ie=0,be=D;Ie<be.length;Ie++){var xe=be[Ie],Fe=Q.has(xe);Fe||(Q.add(xe),Oe.push(xe))}for(var $e=0,ft=K;$e<ft.length;$e++){var xe=ft[$e],Fe=Q.has(xe);Fe||(Q.add(xe),Oe.push(xe))}return Oe}function fe(Z,oe){var D=Dt(Z,oe,!1);return D?D.OrdinaryOwnMetadataKeys(Z,oe):[]}function Ge(Z){if(Z===null)return 1;switch(typeof Z){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Z===null?1:6;default:return 6}}function Me(Z){return Z===void 0}function Ce(Z){return Z===null}function Rr(Z){return typeof Z=="symbol"}function _t(Z){return typeof Z=="object"?Z!==null:typeof Z=="function"}function ca(Z,oe){switch(Ge(Z)){case 0:return Z;case 1:return Z;case 2:return Z;case 3:return Z;case 4:return Z;case 5:return Z}var D=oe===3?"string":oe===5?"number":"default",N=z(Z,s);if(N!==void 0){var K=N.call(Z,D);if(_t(K))throw new TypeError;return K}return Ei(Z,D==="default"?"number":D)}function Ei(Z,oe){if(oe==="string"){var D=Z.toString;if(ne(D)){var N=D.call(Z);if(!_t(N))return N}var K=Z.valueOf;if(ne(K)){var N=K.call(Z);if(!_t(N))return N}}else{var K=Z.valueOf;if(ne(K)){var N=K.call(Z);if(!_t(N))return N}var Q=Z.toString;if(ne(Q)){var N=Q.call(Z);if(!_t(N))return N}}throw new TypeError}function tr(Z){return!!Z}function P(Z){return""+Z}function $(Z){var oe=ca(Z,3);return Rr(oe)?oe:P(oe)}function G(Z){return Array.isArray?Array.isArray(Z):Z instanceof Object?Z instanceof Array:Object.prototype.toString.call(Z)==="[object Array]"}function ne(Z){return typeof Z=="function"}function Y(Z){return typeof Z=="function"}function te(Z){switch(Ge(Z)){case 3:return!0;case 4:return!0;default:return!1}}function de(Z,oe){return Z===oe||Z!==Z&&oe!==oe}function z(Z,oe){var D=Z[oe];if(D!=null){if(!ne(D))throw new TypeError;return D}}function X(Z){var oe=z(Z,o);if(!ne(oe))throw new TypeError;var D=oe.call(Z);if(!_t(D))throw new TypeError;return D}function ue(Z){return Z.value}function se(Z){var oe=Z.next();return oe.done?!1:oe}function Se(Z){var oe=Z.return;oe&&oe.call(Z)}function He(Z){var oe=Object.getPrototypeOf(Z);if(typeof Z!="function"||Z===d||oe!==d)return oe;var D=Z.prototype,N=D&&Object.getPrototypeOf(D);if(N==null||N===Object.prototype)return oe;var K=N.constructor;return typeof K!="function"||K===Z?oe:K}function tt(){var Z;!Me(g)&&typeof r.Reflect<"u"&&!(g in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(Z=Lr(r.Reflect));var oe,D,N,K=new h,Q={registerProvider:Oe,getProvider:be,setProvider:Fe};return Q;function Oe($e){if(!Object.isExtensible(Q))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case Z===$e:break;case Me(oe):oe=$e;break;case oe===$e:break;case Me(D):D=$e;break;case D===$e:break;default:N===void 0&&(N=new f),N.add($e);break}}function Ie($e,ft){if(!Me(oe)){if(oe.isProviderFor($e,ft))return oe;if(!Me(D)){if(D.isProviderFor($e,ft))return oe;if(!Me(N))for(var cr=X(N);;){var Sn=se(cr);if(!Sn)return;var Ja=ue(Sn);if(Ja.isProviderFor($e,ft))return Se(cr),Ja}}}if(!Me(Z)&&Z.isProviderFor($e,ft))return Z}function be($e,ft){var cr=K.get($e),Sn;return Me(cr)||(Sn=cr.get(ft)),Me(Sn)&&(Sn=Ie($e,ft),Me(Sn)||(Me(cr)&&(cr=new p,K.set($e,cr)),cr.set(ft,Sn))),Sn}function xe($e){if(Me($e))throw new TypeError;return oe===$e||D===$e||!Me(N)&&N.has($e)}function Fe($e,ft,cr){if(!xe(cr))throw new Error("Metadata provider not registered.");var Sn=be($e,ft);if(Sn!==cr){if(!Me(Sn))return!1;var Ja=K.get($e);Me(Ja)&&(Ja=new p,K.set($e,Ja)),Ja.set(ft,cr)}return!0}}function zt(){var Z;return!Me(g)&&_t(r.Reflect)&&Object.isExtensible(r.Reflect)&&(Z=r.Reflect[g]),Me(Z)&&(Z=tt()),!Me(g)&&_t(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,g,{enumerable:!1,configurable:!1,writable:!1,value:Z}),Z}function Nr(Z){var oe=new h,D={isProviderFor:function(xe,Fe){var $e=oe.get(xe);return Me($e)?!1:$e.has(Fe)},OrdinaryDefineOwnMetadata:Oe,OrdinaryHasOwnMetadata:K,OrdinaryGetOwnMetadata:Q,OrdinaryOwnMetadataKeys:Ie,OrdinaryDeleteMetadata:be};return _.registerProvider(D),D;function N(xe,Fe,$e){var ft=oe.get(xe),cr=!1;if(Me(ft)){if(!$e)return;ft=new p,oe.set(xe,ft),cr=!0}var Sn=ft.get(Fe);if(Me(Sn)){if(!$e)return;if(Sn=new p,ft.set(Fe,Sn),!Z.setProvider(xe,Fe,D))throw ft.delete(Fe),cr&&oe.delete(xe),new Error("Wrong provider for target.")}return Sn}function K(xe,Fe,$e){var ft=N(Fe,$e,!1);return Me(ft)?!1:tr(ft.has(xe))}function Q(xe,Fe,$e){var ft=N(Fe,$e,!1);if(!Me(ft))return ft.get(xe)}function Oe(xe,Fe,$e,ft){var cr=N($e,ft,!0);cr.set(xe,Fe)}function Ie(xe,Fe){var $e=[],ft=N(xe,Fe,!1);if(Me(ft))return $e;for(var cr=ft.keys(),Sn=X(cr),Ja=0;;){var D8=se(Sn);if(!D8)return $e.length=Ja,$e;var Xq=ue(D8);try{$e[Ja]=Xq}catch(k8){try{Se(Sn)}finally{throw k8}}Ja++}}function be(xe,Fe,$e){var ft=N(Fe,$e,!1);if(Me(ft)||!ft.delete(xe))return!1;if(ft.size===0){var cr=oe.get(Fe);Me(cr)||(cr.delete($e),cr.size===0&&oe.delete(cr))}return!0}}function Lr(Z){var oe=Z.defineMetadata,D=Z.hasOwnMetadata,N=Z.getOwnMetadata,K=Z.getOwnMetadataKeys,Q=Z.deleteMetadata,Oe=new h,Ie={isProviderFor:function(be,xe){var Fe=Oe.get(be);return!Me(Fe)&&Fe.has(xe)?!0:K(be,xe).length?(Me(Fe)&&(Fe=new f,Oe.set(be,Fe)),Fe.add(xe),!0):!1},OrdinaryDefineOwnMetadata:oe,OrdinaryHasOwnMetadata:D,OrdinaryGetOwnMetadata:N,OrdinaryOwnMetadataKeys:K,OrdinaryDeleteMetadata:Q};return Ie}function Dt(Z,oe,D){var N=_.getProvider(Z,oe);if(!Me(N))return N;if(D){if(_.setProvider(Z,oe,S))return S;throw new Error("Illegal state.")}}function ur(){var Z={},oe=[],D=(function(){function Ie(be,xe,Fe){this._index=0,this._keys=be,this._values=xe,this._selector=Fe}return Ie.prototype["@@iterator"]=function(){return this},Ie.prototype[o]=function(){return this},Ie.prototype.next=function(){var be=this._index;if(be>=0&&be<this._keys.length){var xe=this._selector(this._keys[be],this._values[be]);return be+1>=this._keys.length?(this._index=-1,this._keys=oe,this._values=oe):this._index++,{value:xe,done:!1}}return{value:void 0,done:!0}},Ie.prototype.throw=function(be){throw this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),be},Ie.prototype.return=function(be){return this._index>=0&&(this._index=-1,this._keys=oe,this._values=oe),{value:be,done:!0}},Ie})(),N=(function(){function Ie(){this._keys=[],this._values=[],this._cacheKey=Z,this._cacheIndex=-2}return Object.defineProperty(Ie.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ie.prototype.has=function(be){return this._find(be,!1)>=0},Ie.prototype.get=function(be){var xe=this._find(be,!1);return xe>=0?this._values[xe]:void 0},Ie.prototype.set=function(be,xe){var Fe=this._find(be,!0);return this._values[Fe]=xe,this},Ie.prototype.delete=function(be){var xe=this._find(be,!1);if(xe>=0){for(var Fe=this._keys.length,$e=xe+1;$e<Fe;$e++)this._keys[$e-1]=this._keys[$e],this._values[$e-1]=this._values[$e];return this._keys.length--,this._values.length--,de(be,this._cacheKey)&&(this._cacheKey=Z,this._cacheIndex=-2),!0}return!1},Ie.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Z,this._cacheIndex=-2},Ie.prototype.keys=function(){return new D(this._keys,this._values,K)},Ie.prototype.values=function(){return new D(this._keys,this._values,Q)},Ie.prototype.entries=function(){return new D(this._keys,this._values,Oe)},Ie.prototype["@@iterator"]=function(){return this.entries()},Ie.prototype[o]=function(){return this.entries()},Ie.prototype._find=function(be,xe){if(!de(this._cacheKey,be)){this._cacheIndex=-1;for(var Fe=0;Fe<this._keys.length;Fe++)if(de(this._keys[Fe],be)){this._cacheIndex=Fe;break}}return this._cacheIndex<0&&xe&&(this._cacheIndex=this._keys.length,this._keys.push(be),this._values.push(void 0)),this._cacheIndex},Ie})();return N;function K(Ie,be){return Ie}function Q(Ie,be){return be}function Oe(Ie,be){return[Ie,be]}}function Pn(){var Z=(function(){function oe(){this._map=new p}return Object.defineProperty(oe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),oe.prototype.has=function(D){return this._map.has(D)},oe.prototype.add=function(D){return this._map.set(D,D),this},oe.prototype.delete=function(D){return this._map.delete(D)},oe.prototype.clear=function(){this._map.clear()},oe.prototype.keys=function(){return this._map.keys()},oe.prototype.values=function(){return this._map.keys()},oe.prototype.entries=function(){return this._map.entries()},oe.prototype["@@iterator"]=function(){return this.keys()},oe.prototype[o]=function(){return this.keys()},oe})();return Z}function Qc(){var Z=16,oe=l.create(),D=N();return(function(){function be(){this._key=N()}return be.prototype.has=function(xe){var Fe=K(xe,!1);return Fe!==void 0?l.has(Fe,this._key):!1},be.prototype.get=function(xe){var Fe=K(xe,!1);return Fe!==void 0?l.get(Fe,this._key):void 0},be.prototype.set=function(xe,Fe){var $e=K(xe,!0);return $e[this._key]=Fe,this},be.prototype.delete=function(xe){var Fe=K(xe,!1);return Fe!==void 0?delete Fe[this._key]:!1},be.prototype.clear=function(){this._key=N()},be})();function N(){var be;do be="@@WeakMap@@"+Ie();while(l.has(oe,be));return oe[be]=!0,be}function K(be,xe){if(!n.call(be,D)){if(!xe)return;Object.defineProperty(be,D,{value:l.create()})}return be[D]}function Q(be,xe){for(var Fe=0;Fe<xe;++Fe)be[Fe]=Math.random()*255|0;return be}function Oe(be){if(typeof Uint8Array=="function"){var xe=new Uint8Array(be);return typeof crypto<"u"?crypto.getRandomValues(xe):typeof msCrypto<"u"?msCrypto.getRandomValues(xe):Q(xe,be),xe}return Q(new Array(be),be)}function Ie(){var be=Oe(Z);be[6]=be[6]&79|64,be[8]=be[8]&191|128;for(var xe="",Fe=0;Fe<Z;++Fe){var $e=be[Fe];(Fe===4||Fe===6||Fe===8)&&(xe+="-"),$e<16&&(xe+="0"),xe+=$e.toString(16).toLowerCase()}return xe}}function ju(Z){return Z.__=void 0,delete Z.__,Z}})})(Fde||(Fde={}))});var s5={};da(s5,{__assign:()=>TL,__asyncDelegator:()=>nnt,__asyncGenerator:()=>rnt,__asyncValues:()=>int,__await:()=>z4,__awaiter:()=>Yrt,__classPrivateFieldGet:()=>unt,__classPrivateFieldSet:()=>cnt,__createBinding:()=>Xrt,__decorate:()=>zrt,__exportStar:()=>Zrt,__extends:()=>Grt,__generator:()=>Qrt,__importDefault:()=>ant,__importStar:()=>ont,__makeTemplateObject:()=>snt,__metadata:()=>Jrt,__param:()=>Wrt,__read:()=>qde,__rest:()=>Hrt,__spread:()=>ent,__spreadArrays:()=>tnt,__values:()=>OL});function Grt(t,e){CL(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Hrt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function zrt(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Wrt(t,e){return function(r,n){e(r,n,t)}}function Jrt(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Yrt(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function Qrt(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xrt(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function Zrt(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function OL(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qde(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function ent(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qde(arguments[e]));return t}function tnt(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function z4(t){return this instanceof z4?(this.v=t,this):new z4(t)}function rnt(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(f){return new Promise(function(h,g){s.push([p,f,h,g])>1||a(p,f)})})}function a(p,f){try{u(n[p](f))}catch(h){d(s[0][3],h)}}function u(p){p.value instanceof z4?Promise.resolve(p.value.v).then(c,l):d(s[0][2],p)}function c(p){a("next",p)}function l(p){a("throw",p)}function d(p,f){p(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function nnt(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:z4(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function int(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof OL=="function"?OL(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function snt(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ont(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function ant(t){return t&&t.__esModule?t:{default:t}}function unt(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function cnt(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var CL,TL,o5=ce(()=>{CL=function(t,e){return CL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},CL(t,e)};TL=function(){return TL=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},TL.apply(this,arguments)}});var RL=m(IL=>{"use strict";Object.defineProperty(IL,"__esModule",{value:!0});var xL;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(xL||(xL={}));IL.default=xL});var Lde=m(DL=>{"use strict";Object.defineProperty(DL,"__esModule",{value:!0});var lnt=RL();Object.defineProperty(DL,"Lifecycle",{enumerable:!0,get:function(){return lnt.default}})});var Zm=m(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.defineInjectionTokenMetadata=tl.getParamInfo=tl.INJECTION_TOKEN_METADATA_KEY=void 0;tl.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function dnt(t){let e=Reflect.getMetadata("design:paramtypes",t)||[],r=Reflect.getOwnMetadata(tl.INJECTION_TOKEN_METADATA_KEY,t)||{};return Object.keys(r).forEach(n=>{e[+n]=r[n]}),e}tl.getParamInfo=dnt;function pnt(t,e){return function(r,n,i){let s=Reflect.getOwnMetadata(tl.INJECTION_TOKEN_METADATA_KEY,r)||{};s[i]=e?{token:t,transform:e.transformToken,transformArgs:e.args||[]}:t,Reflect.defineMetadata(tl.INJECTION_TOKEN_METADATA_KEY,s,r)}}tl.defineInjectionTokenMetadata=pnt});var kL=m(a5=>{"use strict";Object.defineProperty(a5,"__esModule",{value:!0});a5.isClassProvider=void 0;function fnt(t){return!!t.useClass}a5.isClassProvider=fnt});var ML=m(u5=>{"use strict";Object.defineProperty(u5,"__esModule",{value:!0});u5.isFactoryProvider=void 0;function hnt(t){return!!t.useFactory}u5.isFactoryProvider=hnt});var l5=m(P2=>{"use strict";Object.defineProperty(P2,"__esModule",{value:!0});P2.delay=P2.DelayedConstructor=void 0;var c5=class{constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let r={},n=!1,i,s=()=>(n||(i=e(this.wrap()),n=!0),i);return new Proxy(r,this.createHandler(s))}createHandler(e){let r={},n=i=>{r[i]=(...s)=>{s[0]=e();let o=Reflect[i];return o(...s)}};return this.reflectMethods.forEach(n),r}};P2.DelayedConstructor=c5;function mnt(t){if(typeof t>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new c5(t)}P2.delay=mnt});var d5=m(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.isConstructorToken=hd.isTransformDescriptor=hd.isTokenDescriptor=hd.isNormalToken=void 0;var ynt=l5();function gnt(t){return typeof t=="string"||typeof t=="symbol"}hd.isNormalToken=gnt;function Ent(t){return typeof t=="object"&&"token"in t&&"multiple"in t}hd.isTokenDescriptor=Ent;function bnt(t){return typeof t=="object"&&"token"in t&&"transform"in t}hd.isTransformDescriptor=bnt;function _nt(t){return typeof t=="function"||t instanceof ynt.DelayedConstructor}hd.isConstructorToken=_nt});var PL=m(p5=>{"use strict";Object.defineProperty(p5,"__esModule",{value:!0});p5.isTokenProvider=void 0;function vnt(t){return!!t.useToken}p5.isTokenProvider=vnt});var NL=m(f5=>{"use strict";Object.defineProperty(f5,"__esModule",{value:!0});f5.isValueProvider=void 0;function Snt(t){return t.useValue!=null}f5.isValueProvider=Snt});var FL=m(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});var wnt=kL();Object.defineProperty(e0,"isClassProvider",{enumerable:!0,get:function(){return wnt.isClassProvider}});var Ant=ML();Object.defineProperty(e0,"isFactoryProvider",{enumerable:!0,get:function(){return Ant.isFactoryProvider}});var Cnt=d5();Object.defineProperty(e0,"isNormalToken",{enumerable:!0,get:function(){return Cnt.isNormalToken}});var Tnt=PL();Object.defineProperty(e0,"isTokenProvider",{enumerable:!0,get:function(){return Tnt.isTokenProvider}});var Ont=NL();Object.defineProperty(e0,"isValueProvider",{enumerable:!0,get:function(){return Ont.isValueProvider}})});var jde=m(h5=>{"use strict";Object.defineProperty(h5,"__esModule",{value:!0});h5.isProvider=void 0;var xnt=kL(),Int=NL(),Rnt=PL(),Dnt=ML();function knt(t){return xnt.isClassProvider(t)||Int.isValueProvider(t)||Rnt.isTokenProvider(t)||Dnt.isFactoryProvider(t)}h5.isProvider=knt});var LL=m(qL=>{"use strict";Object.defineProperty(qL,"__esModule",{value:!0});var BL=class{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let r=this._registryMap.get(e);return r[r.length-1]||null}set(e,r){this.ensure(e),this._registryMap.get(e).push(r)}setAll(e,r){this._registryMap.set(e,r)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};qL.default=BL});var $de=m($L=>{"use strict";Object.defineProperty($L,"__esModule",{value:!0});var Mnt=LL(),jL=class extends Mnt.default{};$L.default=jL});var Kde=m(UL=>{"use strict";Object.defineProperty(UL,"__esModule",{value:!0});var KL=class{constructor(){this.scopedResolutions=new Map}};UL.default=KL});var VL=m(m5=>{"use strict";Object.defineProperty(m5,"__esModule",{value:!0});m5.formatErrorCtor=void 0;function Pnt(t,e){return t===null?`at position #${e}`:`"${t.split(",")[e].trim()}" at position #${e}`}function Nnt(t,e,r="    "){return[t,...e.message.split(`
`).map(n=>r+n)].join(`
`)}function Fnt(t,e,r){let[,n=null]=t.toString().match(/constructor\(([\w, ]+)\)/)||[],i=Pnt(n,e);return Nnt(`Cannot inject the dependency ${i} of "${t.name}" constructor. Reason:`,r)}m5.formatErrorCtor=Fnt});var Ude=m(y5=>{"use strict";Object.defineProperty(y5,"__esModule",{value:!0});y5.isDisposable=void 0;function Bnt(t){return!(typeof t.dispose!="function"||t.dispose.length>0)}y5.isDisposable=Bnt});var Gde=m(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});t0.PostResolutionInterceptors=t0.PreResolutionInterceptors=void 0;var Vde=LL(),g5=class extends Vde.default{};t0.PreResolutionInterceptors=g5;var E5=class extends Vde.default{};t0.PostResolutionInterceptors=E5;var GL=class{constructor(){this.preResolution=new g5,this.postResolution=new E5}};t0.default=GL});var b1=m(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.instance=vp.typeInfo=void 0;var qnt=(o5(),Jt(s5)),ko=FL(),Lnt=jde(),b5=d5(),jnt=$de(),pa=RL(),_5=Kde(),$nt=VL(),Knt=l5(),Unt=Ude(),Vnt=Gde();vp.typeInfo=new Map;var HL=class t{constructor(e){this.parent=e,this._registry=new jnt.default,this.interceptors=new Vnt.default,this.disposed=!1,this.disposables=new Set}register(e,r,n={lifecycle:pa.default.Transient}){this.ensureNotDisposed();let i;if(Lnt.isProvider(r)?i=r:i={useClass:r},ko.isTokenProvider(i)){let s=[e],o=i;for(;o!=null;){let a=o.useToken;if(s.includes(a))throw new Error(`Token registration cycle detected! ${[...s,a].join(" -> ")}`);s.push(a);let u=this._registry.get(a);u&&ko.isTokenProvider(u.provider)?o=u.provider:o=null}}if((n.lifecycle===pa.default.Singleton||n.lifecycle==pa.default.ContainerScoped||n.lifecycle==pa.default.ResolutionScoped)&&(ko.isValueProvider(i)||ko.isFactoryProvider(i)))throw new Error(`Cannot use lifecycle "${pa.default[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:i,options:n}),this}registerType(e,r){return this.ensureNotDisposed(),ko.isNormalToken(r)?this.register(e,{useToken:r}):this.register(e,{useClass:r})}registerInstance(e,r){return this.ensureNotDisposed(),this.register(e,{useValue:r})}registerSingleton(e,r){if(this.ensureNotDisposed(),ko.isNormalToken(e)){if(ko.isNormalToken(r))return this.register(e,{useToken:r},{lifecycle:pa.default.Singleton});if(r)return this.register(e,{useClass:r},{lifecycle:pa.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=e;return r&&!ko.isNormalToken(r)&&(n=r),this.register(e,{useClass:n},{lifecycle:pa.default.Singleton})}resolve(e,r=new _5.default,n=!1){this.ensureNotDisposed();let i=this.getRegistration(e);if(!i&&ko.isNormalToken(e)){if(n)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),i){let s=this.resolveRegistration(i,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(b5.isConstructorToken(e)){let s=this.construct(e,r);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,r){if(this.interceptors.preResolution.has(e)){let n=[];for(let i of this.interceptors.preResolution.getAll(e))i.options.frequency!="Once"&&n.push(i),i.callback(e,r);this.interceptors.preResolution.setAll(e,n)}}executePostResolutionInterceptor(e,r,n){if(this.interceptors.postResolution.has(e)){let i=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&i.push(s),s.callback(e,r,n);this.interceptors.postResolution.setAll(e,i)}}resolveRegistration(e,r){if(this.ensureNotDisposed(),e.options.lifecycle===pa.default.ResolutionScoped&&r.scopedResolutions.has(e))return r.scopedResolutions.get(e);let n=e.options.lifecycle===pa.default.Singleton,i=e.options.lifecycle===pa.default.ContainerScoped,s=n||i,o;return ko.isValueProvider(e.provider)?o=e.provider.useValue:ko.isTokenProvider(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,r)):this.resolve(e.provider.useToken,r):ko.isClassProvider(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,r)):this.construct(e.provider.useClass,r):ko.isFactoryProvider(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,r),e.options.lifecycle===pa.default.ResolutionScoped&&r.scopedResolutions.set(e,o),o}resolveAll(e,r=new _5.default,n=!1){this.ensureNotDisposed();let i=this.getAllRegistrations(e);if(!i&&ko.isNormalToken(e)){if(n)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),i){let o=i.map(a=>this.resolveRegistration(a,r));return this.executePostResolutionInterceptor(e,o,"All"),o}let s=[this.construct(e,r)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,r=!1){return this.ensureNotDisposed(),this._registry.has(e)||r&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,r]of this._registry.entries())this._registry.setAll(e,r.filter(n=>!ko.isValueProvider(n.provider)).map(n=>(n.instance=void 0,n)))}createChildContainer(){this.ensureNotDisposed();let e=new t(this);for(let[r,n]of this._registry.entries())n.some(({options:i})=>i.lifecycle===pa.default.ContainerScoped)&&e._registry.setAll(r,n.map(i=>i.options.lifecycle===pa.default.ContainerScoped?{provider:i.provider,options:i.options}:i));return e}beforeResolution(e,r,n={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:r,options:n})}afterResolution(e,r,n={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:r,options:n})}dispose(){return qnt.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(r=>{let n=r.dispose();n&&e.push(n)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,r){if(e instanceof Knt.DelayedConstructor)return e.createProxy(i=>this.resolve(i,r));let n=(()=>{let i=vp.typeInfo.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=i.map(this.resolveParams(r,e));return new e(...s)})();return Unt.isDisposable(n)&&this.disposables.add(n),n}resolveParams(e,r){return(n,i)=>{try{return b5.isTokenDescriptor(n)?b5.isTransformDescriptor(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token,new _5.default,n.isOptional),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,e,n.isOptional),...n.transformArgs):n.multiple?this.resolveAll(n.token,new _5.default,n.isOptional):this.resolve(n.token,e,n.isOptional):b5.isTransformDescriptor(n)?this.resolve(n.transform,e).transform(this.resolve(n.token,e),...n.transformArgs):this.resolve(n,e)}catch(s){throw new Error($nt.formatErrorCtor(r,i,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};vp.instance=new HL;vp.default=vp.instance});var Hde=m(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});var Gnt=Zm(),Sp=b1(),zL=d5(),Hnt=VL();function znt(){return function(t){let e=Gnt.getParamInfo(t);return class extends t{constructor(...r){super(...r.concat(e.slice(r.length).map((n,i)=>{try{return zL.isTokenDescriptor(n)?zL.isTransformDescriptor(n)?n.multiple?Sp.instance.resolve(n.transform).transform(Sp.instance.resolveAll(n.token),...n.transformArgs):Sp.instance.resolve(n.transform).transform(Sp.instance.resolve(n.token),...n.transformArgs):n.multiple?Sp.instance.resolveAll(n.token):Sp.instance.resolve(n.token):zL.isTransformDescriptor(n)?Sp.instance.resolve(n.transform).transform(Sp.instance.resolve(n.token),...n.transformArgs):Sp.instance.resolve(n)}catch(s){let o=i+r.length;throw new Error(Hnt.formatErrorCtor(t,o,s))}})))}}}}WL.default=znt});var zde=m(JL=>{"use strict";Object.defineProperty(JL,"__esModule",{value:!0});var Wnt=Zm();function Jnt(t,e){let r={token:t,multiple:!1,isOptional:e&&e.isOptional};return Wnt.defineInjectionTokenMetadata(r)}JL.default=Jnt});var v5=m(YL=>{"use strict";Object.defineProperty(YL,"__esModule",{value:!0});var Ynt=Zm(),Qnt=b1(),Wde=b1();function Xnt(t){return function(e){Qnt.typeInfo.set(e,Ynt.getParamInfo(e)),t&&t.token&&(Array.isArray(t.token)?t.token.forEach(r=>{Wde.instance.register(r,e)}):Wde.instance.register(t.token,e))}}YL.default=Xnt});var Jde=m(QL=>{"use strict";Object.defineProperty(QL,"__esModule",{value:!0});var Znt=(o5(),Jt(s5)),eit=b1();function tit(t=[]){return function(e){return t.forEach(r=>{var{token:n,options:i}=r,s=Znt.__rest(r,["token","options"]);return eit.instance.register(n,s,i)}),e}}QL.default=tit});var Yde=m(XL=>{"use strict";Object.defineProperty(XL,"__esModule",{value:!0});var rit=v5(),nit=b1();function iit(){return function(t){rit.default()(t),nit.instance.registerSingleton(t)}}XL.default=iit});var Qde=m(ZL=>{"use strict";Object.defineProperty(ZL,"__esModule",{value:!0});var sit=Zm();function oit(t,e){let r={token:t,multiple:!0,isOptional:e&&e.isOptional};return sit.defineInjectionTokenMetadata(r)}ZL.default=oit});var Xde=m(ej=>{"use strict";Object.defineProperty(ej,"__esModule",{value:!0});var ait=Zm();function uit(t,e,...r){let n={token:t,multiple:!0,transform:e,transformArgs:r};return ait.defineInjectionTokenMetadata(n)}ej.default=uit});var Zde=m(tj=>{"use strict";Object.defineProperty(tj,"__esModule",{value:!0});var cit=Zm();function lit(t,e,...r){return cit.defineInjectionTokenMetadata(t,{transformToken:e,args:r})}tj.default=lit});var epe=m(rj=>{"use strict";Object.defineProperty(rj,"__esModule",{value:!0});var dit=v5(),pit=b1();function fit(t,e){return function(r){dit.default()(r),pit.instance.register(e||r,r,{lifecycle:t})}}rj.default=fit});var tpe=m(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var hit=Hde();Object.defineProperty(rl,"autoInjectable",{enumerable:!0,get:function(){return hit.default}});var mit=zde();Object.defineProperty(rl,"inject",{enumerable:!0,get:function(){return mit.default}});var yit=v5();Object.defineProperty(rl,"injectable",{enumerable:!0,get:function(){return yit.default}});var git=Jde();Object.defineProperty(rl,"registry",{enumerable:!0,get:function(){return git.default}});var Eit=Yde();Object.defineProperty(rl,"singleton",{enumerable:!0,get:function(){return Eit.default}});var bit=Qde();Object.defineProperty(rl,"injectAll",{enumerable:!0,get:function(){return bit.default}});var _it=Xde();Object.defineProperty(rl,"injectAllWithTransform",{enumerable:!0,get:function(){return _it.default}});var vit=Zde();Object.defineProperty(rl,"injectWithTransform",{enumerable:!0,get:function(){return vit.default}});var Sit=epe();Object.defineProperty(rl,"scoped",{enumerable:!0,get:function(){return Sit.default}})});var rpe=m(nj=>{"use strict";Object.defineProperty(nj,"__esModule",{value:!0});function wit(t){let e;return r=>(e==null&&(e=t(r)),e)}nj.default=wit});var npe=m(ij=>{"use strict";Object.defineProperty(ij,"__esModule",{value:!0});function Ait(t){let e=new WeakMap;return r=>{let n=e.get(r);return n==null&&(n=t(r),e.set(r,n)),n}}ij.default=Ait});var ipe=m(sj=>{"use strict";Object.defineProperty(sj,"__esModule",{value:!0});function Cit(t,e,r,n=!0){let i,s;return o=>{let a=t(o);return(!n||s!==a)&&((s=a)?i=o.resolve(e):i=o.resolve(r)),i}}sj.default=Cit});var spe=m(W4=>{"use strict";Object.defineProperty(W4,"__esModule",{value:!0});var Tit=rpe();Object.defineProperty(W4,"instanceCachingFactory",{enumerable:!0,get:function(){return Tit.default}});var Oit=npe();Object.defineProperty(W4,"instancePerContainerCachingFactory",{enumerable:!0,get:function(){return Oit.default}});var xit=ipe();Object.defineProperty(W4,"predicateAwareClassFactory",{enumerable:!0,get:function(){return xit.default}})});var r0=m(_1=>{"use strict";Object.defineProperty(_1,"__esModule",{value:!0});var oj=(o5(),Jt(s5));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Iit=Lde();Object.defineProperty(_1,"Lifecycle",{enumerable:!0,get:function(){return Iit.Lifecycle}});oj.__exportStar(tpe(),_1);oj.__exportStar(spe(),_1);oj.__exportStar(FL(),_1);var Rit=l5();Object.defineProperty(_1,"delay",{enumerable:!0,get:function(){return Rit.delay}});var Dit=b1();Object.defineProperty(_1,"container",{enumerable:!0,get:function(){return Dit.instance}})});var fa=m(Fr=>{"use strict";var kit=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function B2(t){return kit(t)==="Uint8Array"}function kj(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function q2(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function Mj(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function L2(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Qa(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:Mj(n)?Object.fromEntries(n):n)}function Mit(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var i0=6,K2=Symbol.for("@@mdb.bson.version"),Z4=2147483647,e3=-2147483648,vpe=Math.pow(2,63)-1,Spe=-Math.pow(2,63),wpe=Math.pow(2,53),Ape=-Math.pow(2,53),Pj=1,Cpe=2,Nj=3,Tpe=4,Fj=5,Pit=6,Ope=7,xpe=8,Ipe=9,Bj=10,A5=11,Nit=12,qj=13,Rpe=14,Dpe=15,Q4=16,kpe=17,Lj=18,Mpe=19,Ppe=255,Npe=127,Fit=0,jj=4,Fpe=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),ge=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Tp=class extends ge{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${i0}.x.x`)}},U2=class extends ge{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},Vu=class extends ge{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},ope,ape;function Bpe(t,e,r,n){if(n){ope??=new TextDecoder("utf8",{fatal:!0});try{return ope.decode(t.subarray(e,r))}catch(i){throw new ge("Invalid UTF-8 string in BSON document",{cause:i})}}return ape??=new TextDecoder("utf8",{fatal:!1}),ape.decode(t.subarray(e,r))}function qpe(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let i=[];for(let s=e;s<r;s++){let o=t[s];if(o>127)return null;i.push(o)}return String.fromCharCode(...i)}function Bit(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,i=r;n<e.length;n++,i++){let s=e.charCodeAt(n);if(s>127)return null;t[i]=s}return e.length}function qit(t){return Ap.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var Lit=(()=>{try{return require("crypto").randomBytes}catch{return qit}})(),Ap={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new ge("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return Ap.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return Ap.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return Ap.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return Ap.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let i=r-e<=20?qpe(t,e,r):null;if(i!=null)return i;let s=Ap.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<s.length;o++)if(s.charCodeAt(o)===65533){Bpe(t,e,r,!0);break}}return s},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=Bit(t,e,r);return n??Ap.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:Lit,swap32(t){return Ap.toLocalBufferType(t).swap32()}};function jit(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function $it(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return X4.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var Kit=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(X4.allocate(e));if(jit()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return $it})(),upe=/(\d|[a-f])/i,X4={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new ge("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return X4.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(X4.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];if(!upe.test(i)||!upe.test(s))break;let o=Number.parseInt(`${i}${s}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let i=r-e<=20?qpe(t,e,r):null;return i??Bpe(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:Kit,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],i=t[e+2],s=t[e+3];t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r}return t}},Uit=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,ye=Uit?Ap:X4,io=class{get[K2](){return i0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},j2=new Float64Array(1),Cr=new Uint8Array(j2.buffer,0,8);j2[0]=-1;var aj=Cr[7]===0,ht={isBigEndian:aj,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<BigInt(32))+n},getFloat64LE:aj?(t,e)=>(Cr[7]=t[e],Cr[6]=t[e+1],Cr[5]=t[e+2],Cr[4]=t[e+3],Cr[3]=t[e+4],Cr[2]=t[e+5],Cr[1]=t[e+6],Cr[0]=t[e+7],j2[0]):(t,e)=>(Cr[0]=t[e],Cr[1]=t[e+1],Cr[2]=t[e+2],Cr[3]=t[e+3],Cr[4]=t[e+4],Cr[5]=t[e+5],Cr[6]=t[e+6],Cr[7]=t[e+7],j2[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),i=Number(r&n);t[e]=i,i>>=8,t[e+1]=i,i>>=8,t[e+2]=i,i>>=8,t[e+3]=i;let s=Number(r>>BigInt(32)&n);return t[e+4]=s,s>>=8,t[e+5]=s,s>>=8,t[e+6]=s,s>>=8,t[e+7]=s,8},setFloat64LE:aj?(t,e,r)=>(j2[0]=r,t[e]=Cr[7],t[e+1]=Cr[6],t[e+2]=Cr[5],t[e+3]=Cr[4],t[e+4]=Cr[3],t[e+5]=Cr[2],t[e+6]=Cr[1],t[e+7]=Cr[0],8):(t,e,r)=>(j2[0]=r,t[e]=Cr[0],t[e+1]=Cr[1],t[e+2]=Cr[2],t[e+3]=Cr[3],t[e+4]=Cr[4],t[e+5]=Cr[5],t[e+6]=Cr[6],t[e+7]=Cr[7],8)},dr=class t extends io{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!kj(e)&&!Array.isArray(e))throw new ge("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=ye.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?ye.fromNumberArray(e):ye.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new ge("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new ge("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new ge("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=ye.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=ye.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(ye.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new ge("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return ye.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?ye.toHex(this.buffer.subarray(0,this.position)):e==="base64"?ye.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?ye.toUTF8(this.buffer,0,this.position,!1):ye.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&wp(this);let r=ye.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new S1(this.buffer.subarray(0,this.position));throw new ge(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(ye.fromHex(e),r)}static createFromBase64(e,r){return new t(ye.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=ye.fromBase64(e.$binary)):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=ye.fromBase64(e.$binary.base64)):"$uuid"in e&&(i=4,n=S1.bytesFromString(e.$uuid)),!n)throw new ge(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return i===jj?new S1(n):new t(n,i)}inspect(e,r,n){n??=Qa;let i=ye.toBase64(this.buffer.subarray(0,this.position)),s=n(i,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${s}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new ge("Binary datatype field is not Int8");return wp(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new ge("Binary datatype field is not Float32");wp(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ht.isBigEndian&&ye.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new ge("Binary datatype field is not packed bit");return wp(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new ge("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new ge("Binary datatype field is not packed bit");wp(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let i=0;i<n.length;i++){let s=i/8|0,o=this.buffer[s+2],a=7-i%8,u=o>>a&1;n[i]=u}return n}static fromInt8Array(e){let r=ye.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let i=new this(r,this.SUBTYPE_VECTOR);return wp(i),i}static fromFloat32Array(e){let r=ye.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),ht.isBigEndian&&ye.swap32(new Uint8Array(r.buffer,2));let i=new this(r,this.SUBTYPE_VECTOR);return wp(i),i}static fromPackedBits(e,r=0){let n=ye.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let i=new this(n,this.SUBTYPE_VECTOR);return wp(i),i}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let i=e.length%8;n[1]=i===0?0:8-i;for(let s=0;s<e.length;s++){let o=s>>>3,a=e[s];if(a!==0&&a!==1)throw new ge(`Invalid bit value at ${s}: must be 0 or 1, found ${e[s]}`);if(a===0)continue;let u=7-s%8;n[o+2]|=a<<u}return new this(n,t.SUBTYPE_VECTOR)}};dr.BSON_BINARY_SUBTYPE_DEFAULT=0;dr.BUFFER_SIZE=256;dr.SUBTYPE_DEFAULT=0;dr.SUBTYPE_FUNCTION=1;dr.SUBTYPE_BYTE_ARRAY=2;dr.SUBTYPE_UUID_OLD=3;dr.SUBTYPE_UUID=4;dr.SUBTYPE_MD5=5;dr.SUBTYPE_ENCRYPTED=6;dr.SUBTYPE_COLUMN=7;dr.SUBTYPE_SENSITIVE=8;dr.SUBTYPE_VECTOR=9;dr.SUBTYPE_USER_DEFINED=128;dr.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function wp(t){if(t.sub_type!==dr.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===dr.VECTOR_TYPE.Float32||r===dr.VECTOR_TYPE.Int8)&&n!==0)throw new ge("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===dr.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new ge("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===dr.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new ge("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===dr.VECTOR_TYPE.PackedBit&&n>7)throw new ge(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var uj=16,Vit=/^[0-9A-F]{32}$/i,Git=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,S1=class t extends dr{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=ye.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===uj)r=ye.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new ge("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,jj)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[ye.toHex(this.buffer.subarray(0,4)),ye.toHex(this.buffer.subarray(4,6)),ye.toHex(this.buffer.subarray(6,8)),ye.toHex(this.buffer.subarray(8,10)),ye.toHex(this.buffer.subarray(10,16))].join("-"):ye.toHex(this.buffer)}toString(e){return e==="hex"?ye.toHex(this.id):e==="base64"?ye.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return ye.equals(e.id,this.id);try{return ye.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new dr(this.id,dr.SUBTYPE_UUID)}static generate(){let e=ye.randomBytes(uj);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):B2(e)?e.byteLength===uj:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(ye.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new ge("UUID string representation must be 32 hex digits or canonical hyphenated representation");return ye.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return Vit.test(e)||Git.test(e)}inspect(e,r,n){return n??=Qa,`new UUID(${n(this.toHexString(),r)})`}},Op=class t extends io{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=Qa;let i=n(this.code,r),s=i.includes(`
`);this.scope!=null&&(i+=`,${s?`
`:" "}${n(this.scope,r)}`);let o=s&&this.scope===null;return`new Code(${s?`
`:""}${i}${o?`
`:""})`}};function Lpe(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var md=class t extends io{get _bsontype(){return"DBRef"}constructor(e,r,n,i){super();let s=e.split(".");s.length===2&&(n=s.shift(),e=s.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=Qa;let i=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return i[1]=n===Qa?`new ObjectId(${i[1]})`:i[1],`new DBRef(${i.join(", ")})`}};function jpe(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let i=!1;for(;e<t.length&&t[e]==="0";++e)i=!0;return i?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function Hit(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var Uu;try{Uu=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var cpe=65536,zit=1<<24,$2=cpe*cpe,$pe=$2*$2,Wit=$pe/2,lpe={},dpe={},Jit=20,Yit=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,je=class t extends io{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let i=typeof r=="boolean"?r:!!n,s=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,i):typeof e=="bigint"?t.fromBigInt(e,i):{low:e|0,high:s|0,unsigned:i};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,i,s;return r?(e>>>=0,(s=0<=e&&e<256)&&(i=dpe[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),s&&(dpe[e]=n),n)):(e|=0,(s=-128<=e&&e<128)&&(i=lpe[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),s&&(lpe[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=$pe)return t.MAX_UNSIGNED_VALUE}else{if(e<=-9223372036854776e3)return t.MIN_VALUE;if(e+1>=Wit)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%$2|0,e/$2|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),i=BigInt(32);return new t(Number(e&n),Number(e>>i&n),r)}static _fromString(e,r,n){if(e.length===0)throw new ge("empty string");if(n<2||36<n)throw new ge("radix");let i;if((i=e.indexOf("-"))>0)throw new ge("interior hyphen");if(i===0)return t._fromString(e.substring(1),r,n).neg();let s=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let a=0;a<e.length;a+=8){let u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){let l=t.fromNumber(Math.pow(n,u));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(s),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let i=!1;if(typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e.trim()!==e)throw new ge(`Input: '${e}' contains leading and/or trailing whitespace`);if(!Hit(e,n))throw new ge(`Input: '${e}' contains invalid characters for radix: ${n}`);let s=jpe(e),o=t._fromString(s,i,n);if(o.toString(n).toLowerCase()!==s.toLowerCase())throw new ge(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let i=!1;return typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,i,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s+c,p+=f>>>16,f&=65535,p+=i+u,d+=p>>>16,p&=65535,d+=n+a,l+=d>>>16,d&=65535,l+=r+o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new ge("division by zero");if(Uu){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let s=(this.unsigned?Uu.div_u:Uu.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(s,Uu.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),i=r.add(n.div(e)),i));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),a=t.fromNumber(r),u=a.mul(e);for(;u.isNegative()||u.gt(n);)r-=o,a=t.fromNumber(r,this.unsigned),u=a.mul(e);a.isZero()&&(a=t.ONE),i=i.add(a),n=n.sub(u)}return i}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),Uu){let r=(this.unsigned?Uu.rem_u:Uu.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Uu.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Uu){let h=Uu.mul(this.low,this.high,e.low,e.high);return t.fromBits(h,Uu.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,d=0,p=0,f=0;return f+=s*c,p+=f>>>16,f&=65535,p+=i*c,d+=p>>>16,p&=65535,p+=s*u,d+=p>>>16,p&=65535,d+=n*c,l+=d>>>16,d&=65535,d+=i*u,l+=d>>>16,d&=65535,d+=s*a,l+=d>>>16,d&=65535,l+=r*c+n*u+i*a+s*o,l&=65535,t.fromBits(p<<16|f,l<<16|d,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*$2+(this.low>>>0):this.high*$2+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new ge("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let s=t.fromNumber(e),o=this.div(s),a=o.mul(s).sub(this);return o.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,i="";for(;;){let s=n.div(r),a=(n.sub(s.mul(r)).toInt()>>>0).toString(e);if(n=s,n.isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:i=!0}={...r};if(e.$numberLong.length>Jit)throw new ge("$numberLong string is too long");if(!Yit.test(e.$numberLong))throw new ge(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let s=t.fromString(e.$numberLong);return i?s.toNumber():s}inspect(e,r,n){n??=Qa;let i=n(this.toString(),r),s=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${i}${s})`}};je.TWO_PWR_24=je.fromInt(zit);je.MAX_UNSIGNED_VALUE=je.fromBits(-1,-1,!0);je.ZERO=je.fromInt(0);je.UZERO=je.fromInt(0,!0);je.ONE=je.fromInt(1);je.UONE=je.fromInt(1,!0);je.NEG_ONE=je.fromInt(-1);je.MAX_VALUE=je.fromBits(-1,2147483647,!1);je.MIN_VALUE=je.fromBits(0,-2147483648,!1);var Qit=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Xit=/^(\+|-)?(Infinity|inf)$/i,Zit=/^(\+|-)?NaN$/i,N2=6111,J4=-6176,ppe=6176,fpe=34,cj=ye.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),hpe=ye.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),mpe=ye.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),est=/^([-+])?(\d+)?$/,tst=31,ype=16383,rst=30,nst=31;function gpe(t){return!isNaN(parseInt(t,10))}function ist(t){let e=je.fromNumber(1e9),r=je.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new je(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function sst(t,e){if(!t&&!e)return{high:je.fromNumber(0),low:je.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new je(t.getLowBits(),0),i=e.shiftRightUnsigned(32),s=new je(e.getLowBits(),0),o=r.multiply(i),a=r.multiply(s),u=n.multiply(i),c=n.multiply(s);return o=o.add(a.shiftRightUnsigned(32)),a=new je(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new je(c.getLowBits(),0)),{high:o,low:c}}function ost(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let i=t.low>>>0,s=e.low>>>0;if(i<s)return!0}return!1}function nl(t,e){throw new ge(`"${t}" is not a valid Decimal128 string - ${e}`)}var s0=class t extends io{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||B2(e)){if(e.byteLength!==16)throw new ge("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new ge("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,i=!1,s=!1,o=!1,a=0,u=0,c=0,l=0,d=0,p=[0],f=0,h=0,g=0,_=0,S=new je(0,0),w=new je(0,0),C=0,A=0;if(e.length>=7e3)throw new ge(""+e+" not a valid Decimal128 string");let O=e.match(Qit),x=e.match(Xit),R=e.match(Zit);if(!O&&!x&&!R||e.length===0)throw new ge(""+e+" not a valid Decimal128 string");if(O){let B=O[2],U=O[4],k=O[5],H=O[6];U&&H===void 0&&nl(e,"missing exponent power"),U&&B===void 0&&nl(e,"missing exponent base"),U===void 0&&(k||H)&&nl(e,"missing e before exponent")}if((e[A]==="+"||e[A]==="-")&&(i=!0,n=e[A++]==="-"),!gpe(e[A])&&e[A]!=="."){if(e[A]==="i"||e[A]==="I")return new t(n?hpe:mpe);if(e[A]==="N")return new t(cj)}for(;gpe(e[A])||e[A]===".";){if(e[A]==="."){s&&nl(e,"contains multiple periods"),s=!0,A=A+1;continue}f<fpe&&(e[A]!=="0"||o)&&(o||(d=u),o=!0,p[h++]=parseInt(e[A],10),f=f+1),o&&(c=c+1),s&&(l=l+1),u=u+1,A=A+1}if(s&&!u)throw new ge(""+e+" not a valid Decimal128 string");if(e[A]==="e"||e[A]==="E"){let B=e.substr(++A).match(est);if(!B||!B[2])return new t(cj);_=parseInt(B[0],10),A=A+B[0].length}if(e[A])return new t(cj);if(!f)p[0]=0,c=1,f=1,a=0;else if(g=f-1,a=c,a!==1)for(;e[d+a-1+Number(i)+Number(s)]==="0";)a=a-1;for(_<=l&&l>_+16384?_=J4:_=_-l;_>N2;){if(g=g+1,g>=fpe){if(a===0){_=N2;break}nl(e,"overflow")}_=_-1}if(r.allowRounding){for(;_<J4||f<c;){if(g===0&&a<f){_=J4,a=0;break}if(f<c?c=c-1:g=g-1,_<N2)_=_+1;else{if(p.join("").match(/^0+$/)){_=N2;break}nl(e,"overflow")}}if(g+1<a){let B=u;s&&(d=d+1,B=B+1),i&&(d=d+1,B=B+1);let U=parseInt(e[d+g+1],10),k=0;if(U>=5&&(k=1,U===5)){k=p[g]%2===1?1:0;for(let H=d+g+2;H<B;H++)if(parseInt(e[H],10)){k=1;break}}if(k){let H=g;for(;H>=0&&++p[H]>9;H--)if(p[H]=0,H===0)if(_<N2)_=_+1,p[H]=1;else return new t(n?hpe:mpe)}}}else{for(;_<J4||f<c;){if(g===0){if(a===0){_=J4;break}nl(e,"exponent underflow")}f<c?(e[c-1+Number(i)+Number(s)]!=="0"&&a!==0&&nl(e,"inexact rounding"),c=c-1):(p[g]!==0&&nl(e,"inexact rounding"),g=g-1),_<N2?_=_+1:nl(e,"overflow")}g+1<a&&(s&&(d=d+1),i&&(d=d+1),parseInt(e[d+g+1],10)!==0&&nl(e,"inexact rounding"))}if(S=je.fromNumber(0),w=je.fromNumber(0),a===0)S=je.fromNumber(0),w=je.fromNumber(0);else if(g<17){let B=0;for(w=je.fromNumber(p[B++]),S=new je(0,0);B<=g;B++)w=w.multiply(je.fromNumber(10)),w=w.add(je.fromNumber(p[B]))}else{let B=0;for(S=je.fromNumber(p[B++]);B<=g-17;B++)S=S.multiply(je.fromNumber(10)),S=S.add(je.fromNumber(p[B]));for(w=je.fromNumber(p[B++]);B<=g;B++)w=w.multiply(je.fromNumber(10)),w=w.add(je.fromNumber(p[B]))}let M=sst(S,je.fromString("100000000000000000"));M.low=M.low.add(w),ost(M.low,w)&&(M.high=M.high.add(je.fromNumber(1))),C=_+ppe;let I={low:je.fromNumber(0),high:je.fromNumber(0)};M.high.shiftRightUnsigned(49).and(je.fromNumber(1)).equals(je.fromNumber(1))?(I.high=I.high.or(je.fromNumber(3).shiftLeft(61)),I.high=I.high.or(je.fromNumber(C).and(je.fromNumber(16383).shiftLeft(47))),I.high=I.high.or(M.high.and(je.fromNumber(0x7fffffffffff)))):(I.high=I.high.or(je.fromNumber(C&16383).shiftLeft(49)),I.high=I.high.or(M.high.and(je.fromNumber(562949953421311)))),I.low=M.low,n&&(I.high=I.high.or(je.fromString("9223372036854775808")));let F=ye.allocateUnsafe(16);return A=0,F[A++]=I.low.low&255,F[A++]=I.low.low>>8&255,F[A++]=I.low.low>>16&255,F[A++]=I.low.low>>24&255,F[A++]=I.low.high&255,F[A++]=I.low.high>>8&255,F[A++]=I.low.high>>16&255,F[A++]=I.low.high>>24&255,F[A++]=I.high.low&255,F[A++]=I.high.low>>8&255,F[A++]=I.high.low>>16&255,F[A++]=I.high.low>>24&255,F[A++]=I.high.high&255,F[A++]=I.high.high>>8&255,F[A++]=I.high.high>>16&255,F[A++]=I.high.high>>24&255,new t(F)}toString(){let e,r=0,n=new Array(36);for(let A=0;A<n.length;A++)n[A]=0;let i=0,s=!1,o,a={parts:[0,0,0,0]},u,c,l=[];i=0;let d=this.bytes,p=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,f=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,h=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24,g=d[i++]|d[i++]<<8|d[i++]<<16|d[i++]<<24;i=0,{low:new je(p,f),high:new je(h,g)}.high.lessThan(je.ZERO)&&l.push("-");let S=g>>26&tst;if(S>>3===3){if(S===rst)return l.join("")+"Infinity";if(S===nst)return"NaN";e=g>>15&ype,o=8+(g>>14&1)}else o=g>>14&7,e=g>>17&ype;let w=e-ppe;if(a.parts[0]=(g&16383)+((o&15)<<14),a.parts[1]=h,a.parts[2]=f,a.parts[3]=p,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)s=!0;else for(c=3;c>=0;c--){let A=0,O=ist(a);if(a=O.quotient,A=O.rem.low,!!A)for(u=8;u>=0;u--)n[c*9+u]=A%10,A=Math.floor(A/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;let C=r-1+w;if(C>=34||C<=-7||w>0){if(r>34)return l.push("0"),w>0?l.push(`E+${w}`):w<0&&l.push(`E${w}`),l.join("");l.push(`${n[i++]}`),r=r-1,r&&l.push(".");for(let A=0;A<r;A++)l.push(`${n[i++]}`);l.push("E"),C>0?l.push(`+${C}`):l.push(`${C}`)}else if(w>=0)for(let A=0;A<r;A++)l.push(`${n[i++]}`);else{let A=r+w;if(A>0)for(let O=0;O<A;O++)l.push(`${n[i++]}`);else l.push("0");for(l.push(".");A++<0;)l.push("0");for(let O=0;O<r-Math.max(A-1,0);O++)l.push(`${n[i++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=Qa,`new Decimal128(${n(this.toString(),r)})`}},w1=class t extends io{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new ge(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new ge(`Input: '${e}' contains whitespace`);if(e==="")throw new ge("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new ge(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=Qa,`new Double(${n(this.value,r)})`}},A1=class t extends io{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=jpe(e),n=Number(e);if(Z4<n)throw new ge(`Input: '${e}' is larger than the maximum value for Int32`);if(e3>n)throw new ge(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new ge(`Input: '${e}' is not a valid Int32 string`)}else throw new ge(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=Qa,`new Int32(${n(this.value,r)})`}},o0=class t extends io{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},a0=class t extends io{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},n0=null,Y4=new WeakMap,xp=class t extends io{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new ge("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=ye.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=ye.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=ye.fromHex(r),t.cacheHexString&&Y4.set(this,r);else throw new ge("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new ge("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&Y4.set(this,ye.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=Y4.get(this);if(r)return r}let e=ye.toHex(this.id);return t.cacheHexString&&Y4.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=ye.allocateUnsafe(12);return ht.setInt32BE(n,0,e),n0===null&&(n0=ye.randomBytes(5)),n[4]=n0[0],n[5]=n0[1],n[6]=n0[2],n[7]=n0[3],n[8]=n0[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?ye.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&ye.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=ht.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=ye.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return ht.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new ge("hex string must be 24 characters");return new t(ye.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new ge("base64 string must be 16 characters");return new t(ye.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&Y4.has(this)}inspect(e,r,n){return n??=Qa,`new ObjectId(${n(this.toHexString(),r)})`}};xp.index=Math.floor(Math.random()*16777215);function S5(t,e,r){let n=5;if(Array.isArray(t))for(let i=0;i<t.length;i++)n+=Epe(i.toString(),t[i],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let i of Object.keys(t))n+=Epe(i,t[i],e,!1,r)}return n}function Epe(t,e,r=!1,n=!1,i=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+ye.utf8ByteLength(t)+1+4+ye.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=Ape&&e<=wpe&&e>=e3&&e<=Z4?(t!=null?ye.utf8ByteLength(t)+1:0)+5:(t!=null?ye.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!i?(t!=null?ye.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?ye.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[K2]!==i0)throw new Tp;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?ye.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?ye.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||L2(e))return(t!=null?ye.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||kj(e))return(t!=null?ye.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?ye.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?ye.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+4+ye.utf8ByteLength(e.code.toString())+1+S5(e.scope,r,i):(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+ye.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let s=e;return s.sub_type===dr.SUBTYPE_BYTE_ARRAY?(t!=null?ye.utf8ByteLength(t)+1:0)+(s.position+1+4+1+4):(t!=null?ye.utf8ByteLength(t)+1:0)+(s.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?ye.utf8ByteLength(t)+1:0)+ye.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(s.$db=e.db),(t!=null?ye.utf8ByteLength(t)+1:0)+1+S5(s,r,i)}else return e instanceof RegExp||q2(e)?(t!=null?ye.utf8ByteLength(t)+1:0)+1+ye.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?ye.utf8ByteLength(t)+1:0)+1+ye.utf8ByteLength(e.pattern)+1+ye.utf8ByteLength(e.options)+1:(t!=null?ye.utf8ByteLength(t)+1:0)+S5(e,r,i)+1}case"function":return r?(t!=null?ye.utf8ByteLength(t)+1:0)+1+4+ye.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?ye.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new ge(`Unrecognized JS type: ${typeof e}`)}}function ast(t){return t.split("").sort().join("")}var Ip=class t extends io{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=ast(r??""),this.pattern.indexOf("\0")!==-1)throw new ge(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new ge(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new ge(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new ge(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let i=Mit(r)??(a=>a);n??=Qa;let s=i(n(this.pattern),"regexp"),o=i(n(this.options),"regexp");return`new BSONRegExp(${s}, ${o})`}},u0=class t extends io{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=Qa,`new BSONSymbol(${n(this.value,r)})`}},ust=je,C1=class t extends ust{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(je.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new ge("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new ge("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new ge("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new ge("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new ge("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new ge("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new ge("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(je.fromInt(e,!0))}static fromNumber(e){return new t(je.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(je.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=je.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=je.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=Qa;let i=n(this.t,r),s=n(this.i,r);return`new Timestamp({ t: ${i}, i: ${s} })`}};C1.MAX_VALUE=je.MAX_UNSIGNED_VALUE;var cst=je.fromNumber(wpe),lst=je.fromNumber(Ape);function Kpe(t,e,r){e=e??{};let n=e&&e.index?e.index:0,i=ht.getInt32LE(t,n);if(i<5)throw new ge(`bson size must be >= 5, is ${i}`);if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new ge(`buffer length ${t.length} must be >= bson size ${i}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new ge(`buffer length ${t.length} must === bson size ${i}`);if(i+n>t.byteLength)throw new ge(`(bson size ${i} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+i-1]!==0)throw new ge("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return w5(t,n,e,r)}var dst=/^\$ref$|^\$id$|^\$db$/;function w5(t,e,r,n=!1){let i=r.fieldsAsRaw==null?null:r.fieldsAsRaw,s=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,a=r.promoteBuffers??!1,u=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new ge("Must either request bigint or Long for int64 deserialization");if(l&&!u)throw new ge("Must either request bigint or Long for int64 deserialization");let d=r.validation==null?{utf8:!0}:r.validation,p=!0,f,h,g=d.utf8;if(typeof g=="boolean")f=g;else{p=!1;let O=Object.keys(g).map(function(x){return g[x]});if(O.length===0)throw new ge("UTF-8 validation setting cannot be empty");if(typeof O[0]!="boolean")throw new ge("Invalid UTF-8 validation option, must specify boolean values");if(f=O[0],!O.every(x=>x===f))throw new ge("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p){h=new Set;for(let O of Object.keys(g))h.add(O)}let _=e;if(t.length<5)throw new ge("corrupt bson message < 5 bytes long");let S=ht.getInt32LE(t,e);if(e+=4,S<5||S>t.length)throw new ge("corrupt bson message");let w=n?[]:{},C=0,A=n?!1:null;for(;;){let O=t[e++];if(O===0)break;let x=e;for(;t[x]!==0&&x<t.length;)x++;if(x>=t.byteLength)throw new ge("Bad BSON Document: illegal CString");let R=n?C++:ye.toUTF8(t,e,x,!1),M=!0;p||h?.has(R)?M=f:M=!f,A!==!1&&R[0]==="$"&&(A=dst.test(R));let I;if(e=x+1,O===Cpe){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");I=ye.toUTF8(t,e,e+F-1,M),e=e+F}else if(O===Ope){let F=ye.allocateUnsafe(12);for(let B=0;B<12;B++)F[B]=t[e+B];I=new xp(F),e=e+12}else if(O===Q4&&c===!1)I=new A1(ht.getInt32LE(t,e)),e+=4;else if(O===Q4)I=ht.getInt32LE(t,e),e+=4;else if(O===Pj)I=ht.getFloat64LE(t,e),e+=8,c===!1&&(I=new w1(I));else if(O===Ipe){let F=ht.getInt32LE(t,e),B=ht.getInt32LE(t,e+4);e+=8,I=new Date(new je(F,B).toNumber())}else if(O===xpe){if(t[e]!==0&&t[e]!==1)throw new ge("illegal boolean type value");I=t[e++]===1}else if(O===Nj){let F=e,B=ht.getInt32LE(t,e);if(B<=0||B>t.length-e)throw new ge("bad embedded document length in bson");if(s)I=t.subarray(e,e+B);else{let U=r;p||(U={...r,validation:{utf8:M}}),I=w5(t,F,U,!1)}e=e+B}else if(O===Tpe){let F=e,B=ht.getInt32LE(t,e),U=r,k=e+B;if(i&&i[R]&&(U={...r,raw:!0}),p||(U={...U,validation:{utf8:M}}),I=w5(t,F,U,!0),e=e+B,t[e-1]!==0)throw new ge("invalid array terminator byte");if(e!==k)throw new ge("corrupted array bson")}else if(O===Pit)I=void 0;else if(O===Bj)I=null;else if(O===Lj)if(l)I=ht.getBigInt64LE(t,e),e+=8;else{let F=ht.getInt32LE(t,e),B=ht.getInt32LE(t,e+4);e+=8;let U=new je(F,B);u&&c===!0?I=U.lessThanOrEqual(cst)&&U.greaterThanOrEqual(lst)?U.toNumber():U:I=U}else if(O===Mpe){let F=ye.allocateUnsafe(16);for(let B=0;B<16;B++)F[B]=t[e+B];e=e+16,I=new s0(F)}else if(O===Fj){let F=ht.getInt32LE(t,e);e+=4;let B=F,U=t[e++];if(F<0)throw new ge("Negative binary type element size found");if(F>t.byteLength)throw new ge("Binary type size larger than document size");if(U===dr.SUBTYPE_BYTE_ARRAY){if(F=ht.getInt32LE(t,e),e+=4,F<0)throw new ge("Negative binary type element size found for subtype 0x02");if(F>B-4)throw new ge("Binary type with subtype 0x02 contains too long binary size");if(F<B-4)throw new ge("Binary type with subtype 0x02 contains too short binary size")}a&&c?I=ye.toLocalBufferType(t.subarray(e,e+F)):(I=new dr(t.subarray(e,e+F),U),U===jj&&S1.isValid(I)&&(I=I.toUUID())),e=e+F}else if(O===A5&&o===!1){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let F=ye.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let B=ye.toUTF8(t,e,x,!1);e=x+1;let U=new Array(B.length);for(x=0;x<B.length;x++)switch(B[x]){case"m":U[x]="m";break;case"s":U[x]="g";break;case"i":U[x]="i";break}I=new RegExp(F,U.join(""))}else if(O===A5&&o===!0){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let F=ye.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new ge("Bad BSON Document: illegal CString");let B=ye.toUTF8(t,e,x,!1);e=x+1,I=new Ip(F,B)}else if(O===Rpe){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);I=c?B:new u0(B),e=e+F}else if(O===kpe)I=new C1({i:ht.getUint32LE(t,e),t:ht.getUint32LE(t,e+4)}),e+=8;else if(O===Ppe)I=new a0;else if(O===Npe)I=new o0;else if(O===qj){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);I=new Op(B),e=e+F}else if(O===Dpe){let F=ht.getInt32LE(t,e);if(e+=4,F<13)throw new ge("code_w_scope total size shorter minimum expected length");let B=ht.getInt32LE(t,e);if(e+=4,B<=0||B>t.length-e||t[e+B-1]!==0)throw new ge("bad string length in bson");let U=ye.toUTF8(t,e,e+B-1,M);e=e+B;let k=e,H=ht.getInt32LE(t,e),ie=w5(t,k,r,!1);if(e=e+H,F<8+H+B)throw new ge("code_w_scope total size is too short, truncating scope");if(F>8+H+B)throw new ge("code_w_scope total size is too long, clips outer document");I=new Op(U,ie)}else if(O===Nit){let F=ht.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new ge("bad string length in bson");let B=ye.toUTF8(t,e,e+F-1,M);e=e+F;let U=ye.allocateUnsafe(12);for(let H=0;H<12;H++)U[H]=t[e+H];let k=new xp(U);e=e+12,I=new md(B,k)}else throw new ge(`Detected unknown BSON type ${O.toString(16)} for fieldname "${R}"`);R==="__proto__"?Object.defineProperty(w,R,{value:I,writable:!0,enumerable:!0,configurable:!0}):w[R]=I}if(S!==e-_)throw n?new ge("corrupt array bson"):new ge("corrupt object bson");if(!A)return w;if(Lpe(w)){let O=Object.assign({},w);return delete O.$ref,delete O.$id,delete O.$db,new md(w.$ref,w.$id,w.$db,O)}return w}var C5=/\x00/,bpe=new Set(["$db","$ref","$id","$clusterTime"]);function lj(t,e,r,n){t[n++]=Cpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i+1,t[n-1]=0;let s=ye.encodeUTF8Into(t,r,n+4);return ht.setInt32LE(t,n,s+1),n=n+4+s,t[n++]=0,n}function dj(t,e,r,n){let s=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=Z4&&r>=e3?Q4:Pj;t[n++]=s;let o=ye.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,s===Q4?n+=ht.setInt32LE(t,n,r):n+=ht.setFloat64LE(t,n,r),n}function pj(t,e,r,n){t[n++]=Lj;let i=ye.encodeUTF8Into(t,e,n);return n+=i,t[n++]=0,n+=ht.setBigInt64LE(t,n,r),n}function F2(t,e,r,n){t[n++]=Bj;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function fj(t,e,r,n){t[n++]=xpe;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,t[n++]=r?1:0,n}function hj(t,e,r,n){t[n++]=Ipe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=je.fromNumber(r.getTime()),o=s.getLowBits(),a=s.getHighBits();return n+=ht.setInt32LE(t,n,o),n+=ht.setInt32LE(t,n,a),n}function mj(t,e,r,n){t[n++]=A5;let i=ye.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.source&&r.source.match(C5)!=null)throw new ge("value "+r.source+" must not contain null bytes");return n=n+ye.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function yj(t,e,r,n){t[n++]=A5;let i=ye.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.pattern.match(C5)!=null)throw new ge("pattern "+r.pattern+" must not contain null bytes");n=n+ye.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let s=r.options.split("").sort().join("");return n=n+ye.encodeUTF8Into(t,s,n),t[n++]=0,n}function gj(t,e,r,n){r===null?t[n++]=Bj:r._bsontype==="MinKey"?t[n++]=Ppe:t[n++]=Npe;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function Ej(t,e,r,n){t[n++]=Ope;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=r.serializeInto(t,n),n}function bj(t,e,r,n){t[n++]=Fj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.length;if(n+=ht.setInt32LE(t,n,s),t[n++]=Fit,s<=16)for(let o=0;o<s;o++)t[n+o]=r[o];else t.set(r,n);return n=n+s,n}function _j(t,e,r,n,i,s,o,a,u){if(u.has(r))throw new ge("Cannot convert circular structure to BSON");u.add(r),t[n++]=Array.isArray(r)?Tpe:Nj;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=t3(t,r,i,n,s+1,o,a,u);return u.delete(r),l}function vj(t,e,r,n){t[n++]=Mpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;for(let s=0;s<16;s++)t[n+s]=r.bytes[s];return n+16}function Sj(t,e,r,n){t[n++]=r._bsontype==="Long"?Lj:kpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.getLowBits(),o=r.getHighBits();return n+=ht.setInt32LE(t,n,s),n+=ht.setInt32LE(t,n,o),n}function wj(t,e,r,n){r=r.valueOf(),t[n++]=Q4;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=ht.setInt32LE(t,n,r),n}function Aj(t,e,r,n){t[n++]=Pj;let i=ye.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=ht.setFloat64LE(t,n,r.value),n}function Cj(t,e,r,n){t[n++]=qj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.toString(),o=ye.encodeUTF8Into(t,s,n+4)+1;return ht.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function Tj(t,e,r,n,i=!1,s=0,o=!1,a=!0,u){if(r.scope&&typeof r.scope=="object"){t[n++]=Dpe;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,d=r.code;n=n+4;let p=ye.encodeUTF8Into(t,d,n+4)+1;ht.setInt32LE(t,n,p),t[n+4+p-1]=0,n=n+p+4;let f=t3(t,r.scope,i,n,s+1,o,a,u);n=f-1;let h=f-l;l+=ht.setInt32LE(t,l,h),t[n++]=0}else{t[n++]=qj;let c=ye.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),d=ye.encodeUTF8Into(t,l,n+4)+1;ht.setInt32LE(t,n,d),n=n+4+d-1,t[n++]=0}return n}function Oj(t,e,r,n){t[n++]=Fj;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.buffer,o=r.position;if(r.sub_type===dr.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=ht.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===dr.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=ht.setInt32LE(t,n,o)),r.sub_type===dr.SUBTYPE_VECTOR&&wp(r),o<=16)for(let a=0;a<o;a++)t[n+a]=s[a];else t.set(s,n);return n=n+r.position,n}function xj(t,e,r,n){t[n++]=Rpe;let i=ye.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=ye.encodeUTF8Into(t,r.value,n+4)+1;return ht.setInt32LE(t,n,s),n=n+4+s-1,t[n++]=0,n}function Ij(t,e,r,n,i,s,o){t[n++]=Nj;let a=ye.encodeUTF8Into(t,e,n);n=n+a,t[n++]=0;let u=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=t3(t,c,!1,n,i+1,s,!0,o),d=l-u;return u+=ht.setInt32LE(t,n,d),l}function t3(t,e,r,n,i,s,o,a){if(a==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new ge("serialize does not support an array as the root input");if(typeof e!="object")throw new ge("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new ge("BSON types cannot be serialized as a document");if(L2(e)||q2(e)||B2(e)||kj(e))throw new ge("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(e);let u=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let d=`${l}`,p=e[l];typeof p?.toBSON=="function"&&(p=p.toBSON());let f=typeof p;if(p===void 0)u=F2(t,d,p,u);else if(p===null)u=F2(t,d,p,u);else if(f==="string")u=lj(t,d,p,u);else if(f==="number")u=dj(t,d,p,u);else if(f==="bigint")u=pj(t,d,p,u);else if(f==="boolean")u=fj(t,d,p,u);else if(f==="object"&&p._bsontype==null)p instanceof Date||L2(p)?u=hj(t,d,p,u):p instanceof Uint8Array||B2(p)?u=bj(t,d,p,u):p instanceof RegExp||q2(p)?u=mj(t,d,p,u):u=_j(t,d,p,u,r,i,s,o,a);else if(f==="object"){if(p[K2]!==i0)throw new Tp;if(p._bsontype==="ObjectId")u=Ej(t,d,p,u);else if(p._bsontype==="Decimal128")u=vj(t,d,p,u);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")u=Sj(t,d,p,u);else if(p._bsontype==="Double")u=Aj(t,d,p,u);else if(p._bsontype==="Code")u=Tj(t,d,p,u,r,i,s,o,a);else if(p._bsontype==="Binary")u=Oj(t,d,p,u);else if(p._bsontype==="BSONSymbol")u=xj(t,d,p,u);else if(p._bsontype==="DBRef")u=Ij(t,d,p,u,i,s,a);else if(p._bsontype==="BSONRegExp")u=yj(t,d,p,u);else if(p._bsontype==="Int32")u=wj(t,d,p,u);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")u=gj(t,d,p,u);else if(typeof p._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else f==="function"&&s&&(u=Cj(t,d,p,u))}else if(e instanceof Map||Mj(e)){let l=e.entries(),d=!1;for(;!d;){let p=l.next();if(d=!!p.done,d)continue;let f=p.value?p.value[0]:void 0,h=p.value?p.value[1]:void 0;typeof h?.toBSON=="function"&&(h=h.toBSON());let g=typeof h;if(typeof f=="string"&&!bpe.has(f)){if(f.match(C5)!=null)throw new ge("key "+f+" must not contain null bytes");if(r){if(f[0]==="$")throw new ge("key "+f+" must not start with '$'");if(f.includes("."))throw new ge("key "+f+" must not contain '.'")}}if(h===void 0)o===!1&&(u=F2(t,f,h,u));else if(h===null)u=F2(t,f,h,u);else if(g==="string")u=lj(t,f,h,u);else if(g==="number")u=dj(t,f,h,u);else if(g==="bigint")u=pj(t,f,h,u);else if(g==="boolean")u=fj(t,f,h,u);else if(g==="object"&&h._bsontype==null)h instanceof Date||L2(h)?u=hj(t,f,h,u):h instanceof Uint8Array||B2(h)?u=bj(t,f,h,u):h instanceof RegExp||q2(h)?u=mj(t,f,h,u):u=_j(t,f,h,u,r,i,s,o,a);else if(g==="object"){if(h[K2]!==i0)throw new Tp;if(h._bsontype==="ObjectId")u=Ej(t,f,h,u);else if(h._bsontype==="Decimal128")u=vj(t,f,h,u);else if(h._bsontype==="Long"||h._bsontype==="Timestamp")u=Sj(t,f,h,u);else if(h._bsontype==="Double")u=Aj(t,f,h,u);else if(h._bsontype==="Code")u=Tj(t,f,h,u,r,i,s,o,a);else if(h._bsontype==="Binary")u=Oj(t,f,h,u);else if(h._bsontype==="BSONSymbol")u=xj(t,f,h,u);else if(h._bsontype==="DBRef")u=Ij(t,f,h,u,i,s,a);else if(h._bsontype==="BSONRegExp")u=yj(t,f,h,u);else if(h._bsontype==="Int32")u=wj(t,f,h,u);else if(h._bsontype==="MinKey"||h._bsontype==="MaxKey")u=gj(t,f,h,u);else if(typeof h._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else g==="function"&&s&&(u=Cj(t,f,h,u))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new ge("toBSON function did not return an object");for(let l of Object.keys(e)){let d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let p=typeof d;if(typeof l=="string"&&!bpe.has(l)){if(l.match(C5)!=null)throw new ge("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new ge("key "+l+" must not start with '$'");if(l.includes("."))throw new ge("key "+l+" must not contain '.'")}}if(d===void 0)o===!1&&(u=F2(t,l,d,u));else if(d===null)u=F2(t,l,d,u);else if(p==="string")u=lj(t,l,d,u);else if(p==="number")u=dj(t,l,d,u);else if(p==="bigint")u=pj(t,l,d,u);else if(p==="boolean")u=fj(t,l,d,u);else if(p==="object"&&d._bsontype==null)d instanceof Date||L2(d)?u=hj(t,l,d,u):d instanceof Uint8Array||B2(d)?u=bj(t,l,d,u):d instanceof RegExp||q2(d)?u=mj(t,l,d,u):u=_j(t,l,d,u,r,i,s,o,a);else if(p==="object"){if(d[K2]!==i0)throw new Tp;if(d._bsontype==="ObjectId")u=Ej(t,l,d,u);else if(d._bsontype==="Decimal128")u=vj(t,l,d,u);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")u=Sj(t,l,d,u);else if(d._bsontype==="Double")u=Aj(t,l,d,u);else if(d._bsontype==="Code")u=Tj(t,l,d,u,r,i,s,o,a);else if(d._bsontype==="Binary")u=Oj(t,l,d,u);else if(d._bsontype==="BSONSymbol")u=xj(t,l,d,u);else if(d._bsontype==="DBRef")u=Ij(t,l,d,u,i,s,a);else if(d._bsontype==="BSONRegExp")u=yj(t,l,d,u);else if(d._bsontype==="Int32")u=wj(t,l,d,u);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")u=gj(t,l,d,u);else if(typeof d._bsontype<"u")throw new ge(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else p==="function"&&s&&(u=Cj(t,l,d,u))}}a.delete(e),t[u++]=0;let c=u-n;return n+=ht.setInt32LE(t,n,c),u}function pst(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var fst={$oid:xp,$binary:dr,$uuid:dr,$symbol:u0,$numberInt:A1,$numberDecimal:s0,$numberDouble:w1,$numberLong:je,$minKey:a0,$maxKey:o0,$regex:Ip,$regularExpression:Ip,$timestamp:C1};function Upe(t,e={}){if(typeof t=="number"){let n=t<=Z4&&t>=e3,i=t<=vpe&&t>=Spe;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new A1(t);if(i)return e.useBigInt64?BigInt(t):je.fromNumber(t)}return new w1(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let i=fst[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,i=new Date;if(e.legacy)if(typeof n=="number")i.setTime(n);else if(typeof n=="string")i.setTime(Date.parse(n));else if(typeof n=="bigint")i.setTime(Number(n));else throw new U2(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")i.setTime(Date.parse(n));else if(je.isLong(n))i.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)i.setTime(n);else if(typeof n=="bigint")i.setTime(Number(n));else throw new U2(`Unrecognized type for EJSON date: ${typeof n}`);return i}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=Upe(t.$scope)),Op.fromExtendedJSON(t)}if(Lpe(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof md)return n;let i=Object.keys(n).filter(o=>o.startsWith("$")),s=!0;if(i.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(s=!1)}),s)return md.fromExtendedJSON(n)}return t}function hst(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return Cp(r,e)}finally{e.seenObjects.pop()}})}function _pe(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function Cp(t,e){if(t instanceof Map||Mj(t)){let r=Object.create(null);for(let[n,i]of t){if(typeof n!="string")throw new ge("Can only serialize maps with string keys");r[n]=i}return Cp(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),i=n.slice(0,r).map(l=>`${l} -> `).join(""),s=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),a=n[n.length-1],u=" ".repeat(i.length+s.length/2),c="-".repeat(o.length+(s.length+a.length)/2-1);throw new ge(`Converting circular structure to EJSON:
    ${i}${s}${o}${a}
    ${u}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return hst(t,e);if(t===void 0)return null;if(t instanceof Date||L2(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:_pe(t)}:e.relaxed&&n?{$date:_pe(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=e3&&t<=Z4)return{$numberInt:t.toString()};if(t>=Spe&&t<=vpe)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||q2(t)){let r=t.flags;if(r===void 0){let i=t.toString().match(/[gimuy]*$/);i&&(r=i[0])}return new Ip(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?yst(t,e):t}var mst={Binary:t=>new dr(t.value(),t.sub_type),Code:t=>new Op(t.code,t.scope),DBRef:t=>new md(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new s0(t.bytes),Double:t=>new w1(t.value),Int32:t=>new A1(t.value),Long:t=>je.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new o0,MinKey:()=>new a0,ObjectId:t=>new xp(t),BSONRegExp:t=>new Ip(t.pattern,t.options),BSONSymbol:t=>new u0(t.value),Timestamp:t=>C1.fromBits(t.low,t.high)};function yst(t,e){if(t==null||typeof t!="object")throw new ge("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let i of Object.keys(t)){e.seenObjects.push({propertyName:i,obj:null});try{let s=Cp(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[K2]!==i0)throw new Tp;if(pst(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let i=mst[t._bsontype];if(!i)throw new ge("Unrecognized or invalid _bsontype: "+t._bsontype);n=i(n)}return r==="Code"&&n.scope?n=new Op(n.code,Cp(n.scope,e)):r==="DBRef"&&n.oid&&(n=new md(Cp(n.collection,e),Cp(n.oid,e),Cp(n.db,e),Cp(n.fields,e))),n.toExtendedJSON(e)}else throw new ge("_bsontype must be a string, but was: "+typeof r)}}function Vpe(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,i)=>{if(n.indexOf("\0")!==-1)throw new ge(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return Upe(i,r)})}function Gpe(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let i=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),s=Cp(t,i);return JSON.stringify(s,e,r)}function gst(t,e){return e=e||{},JSON.parse(Gpe(t,e))}function Est(t,e){return e=e||{},Vpe(JSON.stringify(t),e)}var c0=Object.create(null);c0.parse=Vpe;c0.stringify=Gpe;c0.serialize=gst;c0.deserialize=Est;Object.freeze(c0);var Un={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function Rj(t,e){try{return ht.getNonnegativeInt32LE(t,e)}catch(r){throw new Vu("BSON size cannot be negative",e,{cause:r})}}function Dj(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new Vu("Null terminator not found",e);return r}function bst(t,e=0){if(e??=0,t.length<5)throw new Vu(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=Rj(t,e);if(r>t.length-e)throw new Vu(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new Vu("BSON documents must end in 0x00",e+r);let n=[],i=e+4;for(;i<=r+e;){let s=t[i];if(i+=1,s===0){if(i-e!==r)throw new Vu("Invalid 0x00 type byte",i);break}let o=i,a=Dj(t,i)-o;i+=a+1;let u;if(s===Un.double||s===Un.long||s===Un.date||s===Un.timestamp)u=8;else if(s===Un.int)u=4;else if(s===Un.objectId)u=12;else if(s===Un.decimal)u=16;else if(s===Un.bool)u=1;else if(s===Un.null||s===Un.undefined||s===Un.maxKey||s===Un.minKey)u=0;else if(s===Un.regex)u=Dj(t,Dj(t,i)+1)+1-i;else if(s===Un.object||s===Un.array||s===Un.javascriptWithScope)u=Rj(t,i);else if(s===Un.string||s===Un.binData||s===Un.dbPointer||s===Un.javascript||s===Un.symbol)u=Rj(t,i)+4,s===Un.binData&&(u+=1),s===Un.dbPointer&&(u+=12);else throw new Vu(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(u>r)throw new Vu("value reports length larger than document",i);n.push([s,o,a,i,u]),i+=u}return n}var V2=Object.create(null);V2.parseToElements=bst;V2.ByteUtils=ye;V2.NumberUtils=ht;Object.freeze(V2);var Hpe=1024*1024*17,v1=ye.allocate(Hpe);function zpe(t){v1.length<t&&(v1=ye.allocate(t))}function Wpe(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,i=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,s=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:Hpe;v1.length<s&&(v1=ye.allocate(s));let o=t3(v1,t,r,0,0,n,i,null),a=ye.allocateUnsafe(o);return a.set(v1.subarray(0,o),0),a}function Jpe(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,a=t3(v1,t,n,0,0,i,s,null);return e.set(v1.subarray(0,a),o),o+a-1}function Ype(t,e={}){return Kpe(ye.toLocalBufferType(t),e)}function Qpe(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return S5(t,r,n)}function Xpe(t,e,r,n,i,s){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},s),a=ye.toLocalBufferType(t),u=e;for(let c=0;c<r;c++){let l=ht.getInt32LE(a,u);o.index=u,n[i+c]=Kpe(a,o),u=u+l}return u}var _st=Object.freeze({__proto__:null,BSONError:ge,BSONOffsetError:Vu,BSONRegExp:Ip,BSONRuntimeError:U2,BSONSymbol:u0,BSONType:Fpe,BSONValue:io,BSONVersionError:Tp,Binary:dr,Code:Op,DBRef:md,Decimal128:s0,Double:w1,EJSON:c0,Int32:A1,Long:je,MaxKey:o0,MinKey:a0,ObjectId:xp,Timestamp:C1,UUID:S1,calculateObjectSize:Qpe,deserialize:Ype,deserializeStream:Xpe,onDemand:V2,serialize:Wpe,serializeWithBufferAndIndex:Jpe,setInternalBufferSize:zpe});Fr.BSON=_st;Fr.BSONError=ge;Fr.BSONOffsetError=Vu;Fr.BSONRegExp=Ip;Fr.BSONRuntimeError=U2;Fr.BSONSymbol=u0;Fr.BSONType=Fpe;Fr.BSONValue=io;Fr.BSONVersionError=Tp;Fr.Binary=dr;Fr.Code=Op;Fr.DBRef=md;Fr.Decimal128=s0;Fr.Double=w1;Fr.EJSON=c0;Fr.Int32=A1;Fr.Long=je;Fr.MaxKey=o0;Fr.MinKey=a0;Fr.ObjectId=xp;Fr.Timestamp=C1;Fr.UUID=S1;Fr.calculateObjectSize=Qpe;Fr.deserialize=Ype;Fr.deserializeStream=Xpe;Fr.onDemand=V2;Fr.serialize=Wpe;Fr.serializeWithBufferAndIndex=Jpe;Fr.setInternalBufferSize=zpe});var gr=m(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.toUTF8=at.getBigInt64LE=at.getFloat64LE=at.getInt32LE=at.UUID=at.Timestamp=at.serialize=at.ObjectId=at.MinKey=at.MaxKey=at.Long=at.Int32=at.EJSON=at.Double=at.deserialize=at.Decimal128=at.DBRef=at.Code=at.calculateObjectSize=at.BSONType=at.BSONSymbol=at.BSONRegExp=at.BSONError=at.BSON=at.Binary=void 0;at.parseToElementsToArray=vst;at.pluckBSONSerializeOptions=Sst;at.resolveBSONOptions=wst;at.parseUtf8ValidationOption=Ast;var r3=fa(),bi=fa();Object.defineProperty(at,"Binary",{enumerable:!0,get:function(){return bi.Binary}});Object.defineProperty(at,"BSON",{enumerable:!0,get:function(){return bi.BSON}});Object.defineProperty(at,"BSONError",{enumerable:!0,get:function(){return bi.BSONError}});Object.defineProperty(at,"BSONRegExp",{enumerable:!0,get:function(){return bi.BSONRegExp}});Object.defineProperty(at,"BSONSymbol",{enumerable:!0,get:function(){return bi.BSONSymbol}});Object.defineProperty(at,"BSONType",{enumerable:!0,get:function(){return bi.BSONType}});Object.defineProperty(at,"calculateObjectSize",{enumerable:!0,get:function(){return bi.calculateObjectSize}});Object.defineProperty(at,"Code",{enumerable:!0,get:function(){return bi.Code}});Object.defineProperty(at,"DBRef",{enumerable:!0,get:function(){return bi.DBRef}});Object.defineProperty(at,"Decimal128",{enumerable:!0,get:function(){return bi.Decimal128}});Object.defineProperty(at,"deserialize",{enumerable:!0,get:function(){return bi.deserialize}});Object.defineProperty(at,"Double",{enumerable:!0,get:function(){return bi.Double}});Object.defineProperty(at,"EJSON",{enumerable:!0,get:function(){return bi.EJSON}});Object.defineProperty(at,"Int32",{enumerable:!0,get:function(){return bi.Int32}});Object.defineProperty(at,"Long",{enumerable:!0,get:function(){return bi.Long}});Object.defineProperty(at,"MaxKey",{enumerable:!0,get:function(){return bi.MaxKey}});Object.defineProperty(at,"MinKey",{enumerable:!0,get:function(){return bi.MinKey}});Object.defineProperty(at,"ObjectId",{enumerable:!0,get:function(){return bi.ObjectId}});Object.defineProperty(at,"serialize",{enumerable:!0,get:function(){return bi.serialize}});Object.defineProperty(at,"Timestamp",{enumerable:!0,get:function(){return bi.Timestamp}});Object.defineProperty(at,"UUID",{enumerable:!0,get:function(){return bi.UUID}});function vst(t,e){let r=r3.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}at.getInt32LE=r3.BSON.onDemand.NumberUtils.getInt32LE;at.getFloat64LE=r3.BSON.onDemand.NumberUtils.getFloat64LE;at.getBigInt64LE=r3.BSON.onDemand.NumberUtils.getBigInt64LE;at.toUTF8=r3.BSON.onDemand.ByteUtils.toUTF8;function Sst(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}}function wst(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function Ast(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var Ne=m(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.MongoWriteConcernError=le.MongoServerSelectionError=le.MongoSystemError=le.MongoMissingDependencyError=le.MongoMissingCredentialsError=le.MongoCompatibilityError=le.MongoInvalidArgumentError=le.MongoParseError=le.MongoNetworkTimeoutError=le.MongoNetworkError=le.MongoClientClosedError=le.MongoTopologyClosedError=le.MongoCursorExhaustedError=le.MongoServerClosedError=le.MongoCursorInUseError=le.MongoOperationTimeoutError=le.MongoUnexpectedServerResponseError=le.MongoGridFSChunkError=le.MongoGridFSStreamError=le.MongoTailableCursorError=le.MongoChangeStreamError=le.MongoClientBulkWriteExecutionError=le.MongoClientBulkWriteCursorError=le.MongoClientBulkWriteError=le.MongoGCPError=le.MongoAzureError=le.MongoOIDCError=le.MongoAWSError=le.MongoKerberosError=le.MongoExpiredSessionError=le.MongoTransactionError=le.MongoNotConnectedError=le.MongoDecompressionError=le.MongoBatchReExecutionError=le.MongoStalePrimaryError=le.MongoRuntimeError=le.MongoAPIError=le.MongoDriverError=le.MongoServerError=le.MongoError=le.MongoErrorLabel=le.GET_MORE_RESUMABLE_CODES=le.MONGODB_ERROR_CODES=le.NODE_IS_RECOVERING_ERROR_MESSAGE=le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;le.needsRetryableWriteLabel=Tst;le.isRetryableWriteError=efe;le.isRetryableReadError=Ost;le.isNodeShuttingDownError=kst;le.isSDAMUnrecoverableError=Mst;le.isNetworkTimeoutError=Pst;le.isResumableError=Nst;le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");le.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");le.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});le.GET_MORE_RESUMABLE_CODES=new Set([le.MONGODB_ERROR_CODES.HostUnreachable,le.MONGODB_ERROR_CODES.HostNotFound,le.MONGODB_ERROR_CODES.NetworkTimeout,le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.ExceededTimeLimit,le.MONGODB_ERROR_CODES.SocketException,le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,le.MONGODB_ERROR_CODES.StaleShardVersion,le.MONGODB_ERROR_CODES.StaleEpoch,le.MONGODB_ERROR_CODES.StaleConfig,le.MONGODB_ERROR_CODES.RetryChangeStream,le.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,le.MONGODB_ERROR_CODES.CursorNotFound]);le.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function Cst(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var il=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:Cst(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};le.MongoError=il;var n3=class extends il{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};le.MongoServerError=n3;var l0=class extends il{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};le.MongoDriverError=l0;var Ms=class extends l0{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};le.MongoAPIError=Ms;var ha=class extends l0{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};le.MongoRuntimeError=ha;var Kj=class extends ha{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};le.MongoStalePrimaryError=Kj;var Uj=class extends Ms{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};le.MongoBatchReExecutionError=Uj;var Vj=class extends ha{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};le.MongoDecompressionError=Vj;var Gj=class extends Ms{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};le.MongoNotConnectedError=Gj;var Hj=class extends Ms{constructor(e){super(e)}get name(){return"MongoTransactionError"}};le.MongoTransactionError=Hj;var zj=class extends Ms{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};le.MongoExpiredSessionError=zj;var Wj=class extends ha{constructor(e){super(e)}get name(){return"MongoKerberosError"}};le.MongoKerberosError=Wj;var Jj=class extends ha{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};le.MongoAWSError=Jj;var i3=class extends ha{constructor(e){super(e)}get name(){return"MongoOIDCError"}};le.MongoOIDCError=i3;var Yj=class extends i3{constructor(e){super(e)}get name(){return"MongoAzureError"}};le.MongoAzureError=Yj;var Qj=class extends i3{constructor(e){super(e)}get name(){return"MongoGCPError"}};le.MongoGCPError=Qj;var Xj=class extends n3{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};le.MongoClientBulkWriteError=Xj;var Zj=class extends ha{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};le.MongoClientBulkWriteCursorError=Zj;var e$=class extends ha{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};le.MongoClientBulkWriteExecutionError=e$;var t$=class extends ha{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};le.MongoChangeStreamError=t$;var r$=class extends Ms{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};le.MongoTailableCursorError=r$;var n$=class extends ha{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};le.MongoGridFSStreamError=n$;var i$=class extends ha{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};le.MongoGridFSChunkError=i$;var s$=class extends ha{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};le.MongoUnexpectedServerResponseError=s$;var o$=class extends l0{get name(){return"MongoOperationTimeoutError"}};le.MongoOperationTimeoutError=o$;var a$=class extends Ms{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};le.MongoCursorInUseError=a$;var u$=class extends Ms{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};le.MongoServerClosedError=u$;var c$=class extends Ms{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};le.MongoCursorExhaustedError=c$;var l$=class extends Ms{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};le.MongoTopologyClosedError=l$;var d$=class extends Ms{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};le.MongoClientClosedError=d$;var T1=class extends il{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};le.MongoNetworkError=T1;var p$=class extends T1{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};le.MongoNetworkTimeoutError=p$;var T5=class extends l0{constructor(e){super(e)}get name(){return"MongoParseError"}};le.MongoParseError=T5;var f$=class extends Ms{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};le.MongoInvalidArgumentError=f$;var h$=class extends Ms{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};le.MongoCompatibilityError=h$;var m$=class extends Ms{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};le.MongoMissingCredentialsError=m$;var y$=class extends Ms{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};le.MongoMissingDependencyError=y$;var O5=class extends il{constructor(e,r){r&&r.error?super(il.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};le.MongoSystemError=O5;var x5=class extends O5{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};le.MongoServerSelectionError=x5;var I5=class extends n3{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};le.MongoWriteConcernError=I5;var Zpe=new Set([le.MONGODB_ERROR_CODES.HostUnreachable,le.MONGODB_ERROR_CODES.HostNotFound,le.MONGODB_ERROR_CODES.NetworkTimeout,le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.SocketException,le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,le.MONGODB_ERROR_CODES.ExceededTimeLimit,le.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),$j=Zpe;function Tst(t,e,r){if(t instanceof T1)return!0;if(t instanceof il&&(e>=9||efe(t))&&!t.hasErrorLabel(le.MongoErrorLabel.HandshakeError))return!1;if(t instanceof I5){if(r==="Mongos"&&e<9)return $j.has(t.result.code??0);let s=t.result.writeConcernError.code??Number(t.code);return $j.has(Number.isNaN(s)?0:s)}return t instanceof il?$j.has(Number(t.code)):!!(le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function efe(t){return t.hasErrorLabel(le.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(le.MongoErrorLabel.PoolRequstedRetry)}function Ost(t){return!!((typeof t.code=="number"?Zpe.has(t.code):!1)||t instanceof T1||le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var xst=new Set([le.MONGODB_ERROR_CODES.ShutdownInProgress,le.MONGODB_ERROR_CODES.PrimarySteppedDown,le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,le.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Ist=new Set([le.MONGODB_ERROR_CODES.NotWritablePrimary,le.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,le.MONGODB_ERROR_CODES.LegacyNotPrimary]),Rst=new Set([le.MONGODB_ERROR_CODES.InterruptedAtShutdown,le.MONGODB_ERROR_CODES.ShutdownInProgress]);function tfe(t){return typeof t.code=="number"?xst.has(t.code):le.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||le.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function Dst(t){return typeof t.code=="number"?Ist.has(t.code):tfe(t)?!1:le.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function kst(t){return!!(typeof t.code=="number"&&Rst.has(t.code))}function Mst(t){return t instanceof T5||t==null?!0:tfe(t)||Dst(t)}function Pst(t){return!!(t instanceof T1&&t.message.match(/timed out/))}function Nst(t,e){return t==null||!(t instanceof il)?!1:t instanceof T1||t instanceof x5?!0:e!=null&&e>=9?t.code===le.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(le.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?le.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var O1=m(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.OP_MSG=Dr.OP_COMPRESSED=Dr.OP_DELETE=Dr.OP_QUERY=Dr.OP_INSERT=Dr.OP_UPDATE=Dr.OP_REPLY=Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Dr.MIN_SUPPORTED_QE_SERVER_VERSION=Dr.MIN_SUPPORTED_QE_WIRE_VERSION=Dr.MAX_SUPPORTED_WIRE_VERSION=Dr.MIN_SUPPORTED_WIRE_VERSION=Dr.MAX_SUPPORTED_SERVER_VERSION=Dr.MIN_SUPPORTED_SERVER_VERSION=void 0;Dr.MIN_SUPPORTED_SERVER_VERSION="4.2";Dr.MAX_SUPPORTED_SERVER_VERSION="8.2";Dr.MIN_SUPPORTED_WIRE_VERSION=8;Dr.MAX_SUPPORTED_WIRE_VERSION=27;Dr.MIN_SUPPORTED_QE_WIRE_VERSION=21;Dr.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Dr.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Dr.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Dr.OP_REPLY=1;Dr.OP_UPDATE=2001;Dr.OP_INSERT=2002;Dr.OP_QUERY=2004;Dr.OP_DELETE=2006;Dr.OP_COMPRESSED=2012;Dr.OP_MSG=2013});var _i=m(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.END=re.CHANGE=re.INIT=re.MORE=re.RESPONSE=re.SERVER_HEARTBEAT_FAILED=re.SERVER_HEARTBEAT_SUCCEEDED=re.SERVER_HEARTBEAT_STARTED=re.COMMAND_FAILED=re.COMMAND_SUCCEEDED=re.COMMAND_STARTED=re.CLUSTER_TIME_RECEIVED=re.CONNECTION_CHECKED_IN=re.CONNECTION_CHECKED_OUT=re.CONNECTION_CHECK_OUT_FAILED=re.CONNECTION_CHECK_OUT_STARTED=re.CONNECTION_CLOSED=re.CONNECTION_READY=re.CONNECTION_CREATED=re.CONNECTION_POOL_READY=re.CONNECTION_POOL_CLEARED=re.CONNECTION_POOL_CLOSED=re.CONNECTION_POOL_CREATED=re.WAITING_FOR_SUITABLE_SERVER=re.SERVER_SELECTION_SUCCEEDED=re.SERVER_SELECTION_FAILED=re.SERVER_SELECTION_STARTED=re.TOPOLOGY_DESCRIPTION_CHANGED=re.TOPOLOGY_CLOSED=re.TOPOLOGY_OPENING=re.SERVER_DESCRIPTION_CHANGED=re.SERVER_CLOSED=re.SERVER_OPENING=re.DESCRIPTION_RECEIVED=re.UNPINNED=re.PINNED=re.MESSAGE=re.ENDED=re.CLOSED=re.CONNECT=re.OPEN=re.CLOSE=re.TIMEOUT=re.ERROR=re.SYSTEM_JS_COLLECTION=re.SYSTEM_COMMAND_COLLECTION=re.SYSTEM_USER_COLLECTION=re.SYSTEM_PROFILE_COLLECTION=re.SYSTEM_INDEX_COLLECTION=re.SYSTEM_NAMESPACE_COLLECTION=void 0;re.kDecoratedKeys=re.kDecorateResult=re.LEGACY_HELLO_COMMAND_CAMEL_CASE=re.LEGACY_HELLO_COMMAND=re.MONGO_CLIENT_EVENTS=re.LOCAL_SERVER_EVENTS=re.SERVER_RELAY_EVENTS=re.APM_EVENTS=re.TOPOLOGY_EVENTS=re.CMAP_EVENTS=re.HEARTBEAT_EVENTS=re.RESUME_TOKEN_CHANGED=void 0;re.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";re.SYSTEM_INDEX_COLLECTION="system.indexes";re.SYSTEM_PROFILE_COLLECTION="system.profile";re.SYSTEM_USER_COLLECTION="system.users";re.SYSTEM_COMMAND_COLLECTION="$cmd";re.SYSTEM_JS_COLLECTION="system.js";re.ERROR="error";re.TIMEOUT="timeout";re.CLOSE="close";re.OPEN="open";re.CONNECT="connect";re.CLOSED="closed";re.ENDED="ended";re.MESSAGE="message";re.PINNED="pinned";re.UNPINNED="unpinned";re.DESCRIPTION_RECEIVED="descriptionReceived";re.SERVER_OPENING="serverOpening";re.SERVER_CLOSED="serverClosed";re.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";re.TOPOLOGY_OPENING="topologyOpening";re.TOPOLOGY_CLOSED="topologyClosed";re.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";re.SERVER_SELECTION_STARTED="serverSelectionStarted";re.SERVER_SELECTION_FAILED="serverSelectionFailed";re.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";re.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";re.CONNECTION_POOL_CREATED="connectionPoolCreated";re.CONNECTION_POOL_CLOSED="connectionPoolClosed";re.CONNECTION_POOL_CLEARED="connectionPoolCleared";re.CONNECTION_POOL_READY="connectionPoolReady";re.CONNECTION_CREATED="connectionCreated";re.CONNECTION_READY="connectionReady";re.CONNECTION_CLOSED="connectionClosed";re.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";re.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";re.CONNECTION_CHECKED_OUT="connectionCheckedOut";re.CONNECTION_CHECKED_IN="connectionCheckedIn";re.CLUSTER_TIME_RECEIVED="clusterTimeReceived";re.COMMAND_STARTED="commandStarted";re.COMMAND_SUCCEEDED="commandSucceeded";re.COMMAND_FAILED="commandFailed";re.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";re.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";re.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";re.RESPONSE="response";re.MORE="more";re.INIT="init";re.CHANGE="change";re.END="end";re.RESUME_TOKEN_CHANGED="resumeTokenChanged";re.HEARTBEAT_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED]);re.CMAP_EVENTS=Object.freeze([re.CONNECTION_POOL_CREATED,re.CONNECTION_POOL_READY,re.CONNECTION_POOL_CLEARED,re.CONNECTION_POOL_CLOSED,re.CONNECTION_CREATED,re.CONNECTION_READY,re.CONNECTION_CLOSED,re.CONNECTION_CHECK_OUT_STARTED,re.CONNECTION_CHECK_OUT_FAILED,re.CONNECTION_CHECKED_OUT,re.CONNECTION_CHECKED_IN]);re.TOPOLOGY_EVENTS=Object.freeze([re.SERVER_OPENING,re.SERVER_CLOSED,re.SERVER_DESCRIPTION_CHANGED,re.TOPOLOGY_OPENING,re.TOPOLOGY_CLOSED,re.TOPOLOGY_DESCRIPTION_CHANGED,re.ERROR,re.TIMEOUT,re.CLOSE]);re.APM_EVENTS=Object.freeze([re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED]);re.SERVER_RELAY_EVENTS=Object.freeze([re.SERVER_HEARTBEAT_STARTED,re.SERVER_HEARTBEAT_SUCCEEDED,re.SERVER_HEARTBEAT_FAILED,re.COMMAND_STARTED,re.COMMAND_SUCCEEDED,re.COMMAND_FAILED,...re.CMAP_EVENTS]);re.LOCAL_SERVER_EVENTS=Object.freeze([re.CONNECT,re.DESCRIPTION_RECEIVED,re.CLOSED,re.ENDED]);re.MONGO_CLIENT_EVENTS=Object.freeze([...re.CMAP_EVENTS,...re.APM_EVENTS,...re.TOPOLOGY_EVENTS,...re.HEARTBEAT_EVENTS]);re.LEGACY_HELLO_COMMAND="ismaster";re.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";re.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");re.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var ol=m(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.ReadConcern=sl.ReadConcernLevel=void 0;sl.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var g$=class t{constructor(e){this.level=sl.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return sl.ReadConcernLevel.majority}static get AVAILABLE(){return sl.ReadConcernLevel.available}static get LINEARIZABLE(){return sl.ReadConcernLevel.linearizable}static get SNAPSHOT(){return sl.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};sl.ReadConcern=g$});var fs=m(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.ReadPreference=so.ReadPreferenceMode=void 0;var d0=Ne();so.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var ps=class t{constructor(e,r,n){if(!t.isValid(e))throw new d0.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new d0.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new d0.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new d0.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new d0.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new d0.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let i=r.mode||r.preference;if(i&&typeof i=="string")return new t(i,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new d0.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};so.ReadPreference=ps;ps.PRIMARY=so.ReadPreferenceMode.primary;ps.PRIMARY_PREFERRED=so.ReadPreferenceMode.primaryPreferred;ps.SECONDARY=so.ReadPreferenceMode.secondary;ps.SECONDARY_PREFERRED=so.ReadPreferenceMode.secondaryPreferred;ps.NEAREST=so.ReadPreferenceMode.nearest;ps.primary=new ps(so.ReadPreferenceMode.primary);ps.primaryPreferred=new ps(so.ReadPreferenceMode.primaryPreferred);ps.secondary=new ps(so.ReadPreferenceMode.secondary);ps.secondaryPreferred=new ps(so.ReadPreferenceMode.secondaryPreferred);ps.nearest=new ps(so.ReadPreferenceMode.nearest)});var Xa=m(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ServerType=Mo.TopologyType=Mo.STATE_CONNECTED=Mo.STATE_CONNECTING=Mo.STATE_CLOSED=Mo.STATE_CLOSING=void 0;Mo._advanceClusterTime=Fst;Mo.STATE_CLOSING="closing";Mo.STATE_CLOSED="closed";Mo.STATE_CONNECTING="connecting";Mo.STATE_CONNECTED="connected";Mo.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Mo.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Fst(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var Po=m(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.WriteConcern=p0.WRITE_CONCERN_KEYS=void 0;p0.throwIfWriteConcernError=qst;var rfe=kr(),Bst=Ne();p0.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var E$=class t{constructor(e,r,n,i){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),i!=null&&(this.journal=this.j=!!i)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let s={...r instanceof t?r:r.writeConcern,...n},{w:o=void 0,wtimeout:a=void 0,j:u=void 0,fsync:c=void 0,journal:l=void 0,wtimeoutMS:d=void 0}=s;if(o!=null||a!=null||d!=null||u!=null||l!=null||c!=null)return new t(o,a??d,u??l,c)}};p0.WriteConcern=E$;function qst(t){if(typeof t=="object"&&t!=null){let e=rfe.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!rfe.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Bst.MongoWriteConcernError(e)}}});var et=m(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.kDispose=Pe.randomBytes=Pe.COSMOS_DB_MSG=Pe.DOCUMENT_DB_MSG=Pe.COSMOS_DB_CHECK=Pe.DOCUMENT_DB_CHECK=Pe.MONGODB_WARNING_CODE=Pe.DEFAULT_PK_FACTORY=Pe.HostAddress=Pe.BufferPool=Pe.List=Pe.MongoDBCollectionNamespace=Pe.MongoDBNamespace=Pe.ByteUtils=void 0;Pe.isUint8Array=Hst;Pe.hostMatchesWildcards=zst;Pe.normalizeHintField=Wst;Pe.isObject=_$;Pe.mergeOptions=Yst;Pe.filterOptions=Qst;Pe.applyRetryableWrites=Xst;Pe.isPromiseLike=Zst;Pe.decorateWithCollation=eot;Pe.decorateWithReadConcern=tot;Pe.getTopology=rot;Pe.ns=not;Pe.makeCounter=iot;Pe.uuidV4=sot;Pe.maxWireVersion=oot;Pe.arrayStrictEqual=aot;Pe.errorStrictEqual=uot;Pe.makeStateMachine=cot;Pe.now=ufe;Pe.calculateDurationInMs=lot;Pe.hasAtomicOperators=cfe;Pe.resolveTimeoutOptions=dot;Pe.resolveOptions=pot;Pe.isSuperset=lfe;Pe.isHello=fot;Pe.setDifference=hot;Pe.isRecord=yot;Pe.emitWarning=dfe;Pe.emitWarningOnce=got;Pe.enumToString=Eot;Pe.supportsRetryableWrites=bot;Pe.shuffle=_ot;Pe.commandSupportsReadConcern=vot;Pe.compareObjectId=Sot;Pe.parseInteger=pfe;Pe.parseUnsignedInteger=wot;Pe.checkParentDomainMatch=Aot;Pe.get=Cot;Pe.request=Tot;Pe.isHostMatch=Oot;Pe.promiseWithResolvers=A$;Pe.squashError=xot;Pe.once=Iot;Pe.maybeAddIdToDocuments=Rot;Pe.fileIsAccessible=Dot;Pe.csotMin=kot;Pe.noop=Mot;Pe.decorateDecryptionResult=ffe;Pe.addAbortListener=C$;Pe.abortable=Pot;var ofe=require("crypto"),Lst=require("fs"),afe=require("http"),b$=require("timers"),jst=require("url"),$st=require("url"),Kst=require("util"),w$=gr(),nfe=O1(),R5=_i(),No=Ne(),Ust=ol(),Vst=fs(),Gst=Xa(),ife=Po();Pe.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return Pe.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return Pe.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return Pe.ByteUtils.toLocalBufferType(t).toString("base64")}};function Hst(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function zst(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function Wst(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var Jst=t=>Object.prototype.toString.call(t);function _$(t){return Jst(t)==="[object Object]"}function Yst(t,e){return{...t,...e}}function Qst(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function Xst(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function Zst(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function eot(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function tot(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function rot(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new No.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function not(t){return s3.fromString(t)}var s3=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new D5(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new No.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),i=n.join(".");return new t(r,i===""?void 0:i)}};Pe.MongoDBNamespace=s3;var D5=class extends s3{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};Pe.MongoDBCollectionNamespace=D5;function*iot(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function sot(){let t=ofe.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function oot(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return nfe.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function aot(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function uot(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function cot(t){return function(r,n){let i=t[r.s.state];if(i&&i.indexOf(n)<0)throw new No.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function ufe(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function lot(t){if(typeof t!="number")return-1;let e=ufe()-t;return e<0?0:e}function cfe(t,e){if(Array.isArray(t)){for(let n of t)if(cfe(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let i of r)if(t[i]!==void 0){n=!1;break}if(n)throw new No.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function dot(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s,...e}}function pot(t,e){let r=Object.assign({},e,(0,w$.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,i=e?.session;if(!i?.inTransaction()){let a=Ust.ReadConcern.fromOptions(e)??t?.readConcern;a&&(r.readConcern=a);let u=ife.WriteConcern.fromOptions(e)??t?.writeConcern;u&&(n!=null&&(u=ife.WriteConcern.fromOptions({writeConcern:{...u,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=u)}r.timeoutMS=n;let s=Vst.ReadPreference.fromOptions(e)??t?.readPreference;if(s&&(r.readPreference=s),i?.explicit&&i?.timeoutContext!=null&&e?.timeoutMS!=null)throw new No.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function lfe(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function fot(t){return!!(t[R5.LEGACY_HELLO_COMMAND]||t.hello)}function hot(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var mot=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function yot(t,e=void 0){if(!_$(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!_$(r.prototype)||!mot(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return lfe(n,e)}return!0}var k5=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};Pe.List=k5;var v$=class{constructor(){this.buffers=new k5,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new No.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let i=this.buffers.shift();if(i==null)break;let s=e-n,o=Math.min(s,i.byteLength),a=i.subarray(0,o);r.set(a,n),n+=o,this.totalByteLength-=o,o<i.byteLength&&this.buffers.unshift(i.subarray(o))}return r}};Pe.BufferPool=v$;var S$=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,i;try{i=new $st.URL(n)}catch(u){let c=new No.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=u,c}let s=i.hostname,o=i.port,a=decodeURIComponent(s).toLowerCase();if(a.startsWith("[")&&a.endsWith("]")&&(this.isIPv6=!0,a=a.substring(1,s.length-1)),this.host=a.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new No.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};Pe.HostAddress=S$;Pe.DEFAULT_PK_FACTORY={createPk(){return new w$.ObjectId}};Pe.MONGODB_WARNING_CODE="MONGODB DRIVER";function dfe(t){return process.emitWarning(t,{code:Pe.MONGODB_WARNING_CODE})}var sfe=new Set;function got(t){if(!sfe.has(t))return sfe.add(t),dfe(t)}function Eot(t){return Object.values(t).join(", ")}function bot(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==Gst.ServerType.Standalone):!1}function _ot(t,e=0){let r=Array.from(t);if(e>r.length)throw new No.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,i=e%r.length===0?1:r.length-e;for(;n>i;){let s=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[s],r[s]=o}return e%r.length===0?r:r.slice(i)}function vot(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function Sot(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:Pe.ByteUtils.compare(t.id,e.id)}function pfe(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function wot(t){let e=pfe(t);return e!=null&&e>=0?e:null}function Aot(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,i=/^.*?\./,s=n.split(".").length<3,o=`.${r.replace(i,"")}`,a=s?n:`.${n.replace(i,"")}`;if(a.startsWith(".")||(a="."+a),s&&r.split(".").length<=n.split(".").length)throw new No.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(a))throw new No.MongoAPIError("Server record does not share hostname with parent URI")}function Cot(t,e={}){return new Promise((r,n)=>{let i,s=afe.get(t,e,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>a+=u),o.on("end",()=>{(0,b$.clearTimeout)(i),r({status:o.statusCode,body:a})})}).on("error",o=>{(0,b$.clearTimeout)(i),n(o)}).end();i=(0,b$.setTimeout)(()=>{s.destroy(new No.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Tot(t,e={}){return await new Promise((r,n)=>{let i={method:"GET",timeout:1e4,json:!0,...jst.parse(t),...e},s=afe.request(i,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>{a+=u}),o.once("end",()=>{if(e.json===!1){r(a);return}try{let u=JSON.parse(a);r(u)}catch{n(new No.MongoRuntimeError(`Invalid JSON response: "${a}"`))}})});s.once("timeout",()=>s.destroy(new No.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),s.once("error",o=>n(o)),s.end()})}Pe.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;Pe.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;Pe.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";Pe.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Oot(t,e){return!!(e&&t.test(e.toLowerCase()))}function A$(){let t,e;return{promise:new Promise(function(i,s){t=i,e=s}),resolve:t,reject:e}}function xot(t){}Pe.randomBytes=(0,Kst.promisify)(ofe.randomBytes);async function Iot(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:i,reject:s}=A$(),o=c=>i(c),a=c=>s(c),u=C$(r?.signal,function(){s(this.reason)});t.once(e,o).once("error",a);try{return await n}finally{t.off(e,o),t.off("error",a),u?.[Pe.kDispose]()}}function Rot(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Dot(t,e){try{return await Lst.promises.access(t,e),!0}catch{return!1}}function kot(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Mot(){}function ffe(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,w$.deserialize)(e)),Buffer.isBuffer(t)))throw new No.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let i=e[n];if(i&&i._bsontype==="Binary"&&i.sub_type===6){t[R5.kDecoratedKeys]||Object.defineProperty(t,R5.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[R5.kDecoratedKeys].push(n);continue}ffe(t[n],i,!1)}}Pe.kDispose=Symbol.dispose??Symbol("dispose");function C$(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[Pe.kDispose]:()=>t.removeEventListener("abort",e)}}async function Pot(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=A$(),i=e.aborted?n(e.reason):C$(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{i?.[Pe.kDispose]()}}});var hfe=m(M5=>{"use strict";Object.defineProperty(M5,"__esModule",{value:!0});M5.OnDemandDocument=void 0;var Yt=gr(),o3={type:0,nameOffset:1,nameLength:2,offset:3,length:4},T$=class t{constructor(e,r=0,n=!1,i){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=i??(0,Yt.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[o3.nameLength],i=r[o3.nameOffset];if(e.length!==n)return!1;let s=i+n;for(let o=i,a=0;a<e.length&&o<s;a++,o++)if(this.bson[o]!==e.charCodeAt(a))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let i={element:this.elements[e],value:void 0};return this.cache[e]=i,this.indexFound[e]=!0,i}else return null;else return null;for(let n=0;n<this.elements.length;n++){let i=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,i)){let s={element:i,value:void 0};return this.cache[e]=s,this.indexFound[n]=!0,s}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[o3.type],i=e[o3.offset],s=e[o3.length];if(r!==n)return null;switch(r){case Yt.BSONType.null:case Yt.BSONType.undefined:return null;case Yt.BSONType.double:return(0,Yt.getFloat64LE)(this.bson,i);case Yt.BSONType.int:return(0,Yt.getInt32LE)(this.bson,i);case Yt.BSONType.long:return(0,Yt.getBigInt64LE)(this.bson,i);case Yt.BSONType.bool:return!!this.bson[i];case Yt.BSONType.objectId:return new Yt.ObjectId(this.bson.subarray(i,i+12));case Yt.BSONType.timestamp:return new Yt.Timestamp((0,Yt.getBigInt64LE)(this.bson,i));case Yt.BSONType.string:return(0,Yt.toUTF8)(this.bson,i+4,i+s-1,!1);case Yt.BSONType.binData:{let o=(0,Yt.getInt32LE)(this.bson,i),a=this.bson[i+4];if(a===2){let u=(0,Yt.getInt32LE)(this.bson,i+1+4);if(u<0)throw new Yt.BSONError("Negative binary type element size found for subtype 0x02");if(u>o-4)throw new Yt.BSONError("Binary type with subtype 0x02 contains too long binary size");if(u<o-4)throw new Yt.BSONError("Binary type with subtype 0x02 contains too short binary size");return new Yt.Binary(this.bson.subarray(i+1+4+4,i+1+4+4+u),2)}return new Yt.Binary(this.bson.subarray(i+1+4,i+1+4+o),a)}case Yt.BSONType.date:return new Date(Number((0,Yt.getBigInt64LE)(this.bson,i)));case Yt.BSONType.object:return new t(this.bson,i);case Yt.BSONType.array:return new t(this.bson,i,!0);default:throw new Yt.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let i=this.getElement(e);if(i==null){if(n===!0)throw new Yt.BSONError(`BSON element "${e}" is missing`);return null}if(i.value==null){let s=this.toJSValue(i.element,r);if(s==null){if(n===!0)throw new Yt.BSONError(`BSON element "${e}" is missing`);return null}i.value=s}return i.value}getNumber(e,r){let n=this.get(e,Yt.BSONType.bool),i=n==null?null:n?1:0,s=this.get(e,Yt.BSONType.long),o=s==null?null:Number(s),a=i??o??this.get(e,Yt.BSONType.int)??this.get(e,Yt.BSONType.double);if(r===!0&&a==null)throw new Yt.BSONError(`BSON element "${e}" is missing`);return a}toObject(e){return(0,Yt.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,Yt.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};M5.OnDemandDocument=T$});var kr=m(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.ClientBulkWriteCursorResponse=al.ExplainedCursorResponse=al.CursorResponse=al.MongoDBResponse=void 0;al.isErrorResponse=yfe;var pr=gr(),f0=Ne(),mfe=et(),Not=hfe(),P5={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function yfe(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[P5.nameLength]===2){let i=n[P5.nameOffset];if(t[i]===111&&t[i+1]===107){let s=n[P5.offset],o=n[P5.length];for(let a=s;a<s+o;a++)if(t[a]!==0)return!1;return!0}}}return!0}var G2=class t extends Not.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(i){throw new f0.MongoUnexpectedServerResponseError(i.message,{cause:i})}}static is(e){return e instanceof t}static make(e){let r=(0,pr.parseToElementsToArray)(e,0);return yfe(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===f0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",pr.BSONType.object)?.getNumber("code")===f0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",pr.BSONType.array);if(n?.size()){for(let i=0;i<n.size();i++)if(n.get(i,pr.BSONType.object)?.getNumber("code")===f0.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",pr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",pr.BSONType.object)?.get("atClusterTime",pr.BSONType.timestamp)??this.get("atClusterTime",pr.BSONType.timestamp)}get operationTime(){return this.get("operationTime",pr.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",pr.BSONType.string)}get errmsg(){return this.get("errmsg",pr.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",pr.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",pr.BSONType.timestamp,!0),n=e.get("signature",pr.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,pr.pluckBSONSerializeOptions)(e??{}),validation:(0,pr.parseUtf8ValidationOption)(e)};return super.toObject(r)}};al.MongoDBResponse=G2;G2.empty=new G2(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var a3=class t extends G2{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,pr.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",pr.BSONType.object,!0)}get id(){try{return pr.Long.fromBigInt(this.cursor.get("id",pr.BSONType.long,!0))}catch(e){throw new f0.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",pr.BSONType.string);return e!=null?(0,mfe.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",pr.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",pr.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",pr.BSONType.array,!0);else throw new f0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",pr.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",pr.BSONType.array,!0);else throw new f0.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",pr.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,pr.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,pr.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let i=r.toObject(e);return n&&(0,mfe.decorateDecryptionResult)(i,n.toObject(e),!0),i}}clear(){this.iterated=this.batchSize}};al.CursorResponse=a3;var O$=class extends a3{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return pr.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};al.ExplainedCursorResponse=O$;var x$=class extends a3{get insertedCount(){return this.get("nInserted",pr.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",pr.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",pr.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",pr.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",pr.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",pr.BSONType.object,!1)}};al.ClientBulkWriteCursorResponse=x$});var u3=m(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.Explain=yd.ExplainVerbosity=void 0;yd.validateExplainTimeoutOptions=Bot;yd.decorateWithExplain=qot;var Fot=Ne();yd.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var I$=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?yd.ExplainVerbosity.allPlansExecution:yd.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};yd.Explain=I$;function Bot(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Fot.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function qot(t,e){let{verbosity:r,maxTimeMS:n}=e,i={explain:t,verbosity:r};return typeof n=="number"&&(i.maxTimeMS=n),i}});var Vr=m(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.AbstractOperation=Gu.Aspect=void 0;Gu.defineAspects=jot;var Lot=gr(),R$=fs();Gu.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var D$=class{constructor(e={}){this.readPreference=this.hasAspect(Gu.Aspect.WRITE_OPERATION)?R$.ReadPreference.primary:R$.ReadPreference.fromOptions(e)??R$.ReadPreference.primary,this.bsonOptions=(0,Lot.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(Gu.Aspect.RETRYABLE)&&this.hasAspect(Gu.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(Gu.Aspect.RETRYABLE)&&this.hasAspect(Gu.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};Gu.AbstractOperation=D$;function jot(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var ti=m(F5=>{"use strict";Object.defineProperty(F5,"__esModule",{value:!0});F5.CommandOperation=void 0;var $ot=O1(),Kot=Ne(),k$=u3(),Uot=ol(),N5=et(),gfe=Po(),h0=Vr(),M$=class extends h0.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new N5.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new N5.MongoDBNamespace("admin","$cmd"),this.readConcern=Uot.ReadConcern.fromOptions(r),this.writeConcern=gfe.WriteConcern.fromOptions(r),this.hasAspect(h0.Aspect.EXPLAINABLE))this.explain=k$.Explain.fromOptions(r),this.explain&&(0,k$.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new Kot.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(h0.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),i=this.session&&this.session.inTransaction();return this.readConcern&&(0,N5.commandSupportsReadConcern)(n)&&!i&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(h0.Aspect.WRITE_OPERATION)&&!i&&gfe.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(h0.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(h0.Aspect.SUPPORTS_RAW_DATA)&&(0,N5.maxWireVersion)(e)>=$ot.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(h0.Aspect.EXPLAINABLE)&&this.explain?(0,k$.decorateWithExplain)(n,this.explain):n}};F5.CommandOperation=M$});var N$=m(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.DeleteManyOperation=Rp.DeleteOneOperation=Rp.DeleteOperation=void 0;Rp.makeDeleteStatement=P$;var Vot=kr(),c3=Ne(),Got=et(),Hot=ti(),Fo=Vr(),H2=class extends Hot.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Vot.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,i=typeof n.ordered=="boolean"?n.ordered:!0,s={delete:this.ns.collection,deletes:this.statements,ordered:i};if(n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,Got.maxWireVersion)(e)<9&&this.statements.find(a=>a.hint))throw new c3.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return s}};Rp.DeleteOperation=H2;var B5=class extends H2{constructor(e,r,n){super(e,[P$(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new c3.MongoServerError(r);if(r.writeErrors)throw new c3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Rp.DeleteOneOperation=B5;var q5=class extends H2{constructor(e,r,n){super(e,[P$(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new c3.MongoServerError(r);if(r.writeErrors)throw new c3.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Rp.DeleteManyOperation=q5;function P$(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,Fo.defineAspects)(H2,[Fo.Aspect.RETRYABLE,Fo.Aspect.WRITE_OPERATION,Fo.Aspect.SUPPORTS_RAW_DATA]);(0,Fo.defineAspects)(B5,[Fo.Aspect.RETRYABLE,Fo.Aspect.WRITE_OPERATION,Fo.Aspect.EXPLAINABLE,Fo.Aspect.SKIP_COLLATION,Fo.Aspect.SUPPORTS_RAW_DATA]);(0,Fo.defineAspects)(q5,[Fo.Aspect.WRITE_OPERATION,Fo.Aspect.EXPLAINABLE,Fo.Aspect.SKIP_COLLATION,Fo.Aspect.SUPPORTS_RAW_DATA])});var d3=m(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Dp.writableServerSelector=Wot;Dp.sameServerSelector=Jot;Dp.secondaryWritableServerSelector=Yot;Dp.readPreferenceServerSelector=B$;var F$=Ne(),l3=fs(),Za=Xa(),zot=1e4,Efe=90;Dp.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function Wot(){return function(e,r){return L5(e,r.filter(n=>n.isWritable))}}function Jot(t){return function(r,n){return t?n.filter(i=>i.address===t.address&&i.type!==Za.ServerType.Unknown):[]}}function Yot(t,e){return!e||!t||t&&t<Dp.MIN_SECONDARY_WRITE_WIRE_VERSION?B$(l3.ReadPreference.primary):B$(e)}function Qot(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,i=(e.heartbeatFrequencyMS+zot)/1e3;if(n<i)throw new F$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${i} seconds`);if(n<Efe)throw new F$.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${Efe} seconds`);if(e.type===Za.TopologyType.ReplicaSetWithPrimary){let s=Array.from(e.servers.values()).filter(j5)[0];return r.reduce((o,a)=>{let c=(a.lastUpdateTime-a.lastWriteDate-(s.lastUpdateTime-s.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}if(e.type===Za.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let s=r.reduce((o,a)=>a.lastWriteDate>o.lastWriteDate?a:o);return r.reduce((o,a)=>{let c=(s.lastWriteDate-a.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}return r}function Xot(t,e){let r=Object.keys(t),n=Object.keys(e);for(let i=0;i<r.length;++i){let s=r[i];if(n.indexOf(s)===-1||e[s]!==t[s])return!1}return!0}function Zot(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],i=e.reduce((s,o)=>(Xot(n,o.tags)&&s.push(o),s),[]);if(i.length)return i}return[]}function L5(t,e){let r=e.reduce((i,s)=>Math.min(s.roundTripTime,i),1/0),n=r+t.localThresholdMS;return e.reduce((i,s)=>(s.roundTripTime<=n&&s.roundTripTime>=r&&i.push(s),i),[])}function j5(t){return t.type===Za.ServerType.RSPrimary}function eat(t){return t.type===Za.ServerType.RSSecondary}function tat(t){return t.type===Za.ServerType.RSSecondary||t.type===Za.ServerType.RSPrimary}function bfe(t){return t.type!==Za.ServerType.Unknown}function rat(t){return t.type===Za.ServerType.LoadBalancer}function B$(t){if(!t.isValid())throw new F$.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,i=[]){if(r.type===Za.TopologyType.LoadBalanced)return n.filter(rat);if(r.type===Za.TopologyType.Unknown)return[];if(r.type===Za.TopologyType.Single)return L5(r,n.filter(bfe));if(r.type===Za.TopologyType.Sharded){let u=n.filter(l=>!i.includes(l)),c=u.length>0?u:i;return L5(r,c.filter(bfe))}let s=t.mode;if(s===l3.ReadPreference.PRIMARY)return n.filter(j5);if(s===l3.ReadPreference.PRIMARY_PREFERRED){let u=n.filter(j5);if(u.length)return u}let o=s===l3.ReadPreference.NEAREST?tat:eat,a=L5(r,Zot(t,Qot(t,r,n.filter(o))));return s===l3.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(j5):a}}});var Gi=m(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.LegacyTimeoutContext=zu.CSOTTimeoutContext=zu.TimeoutContext=zu.Timeout=zu.TimeoutError=void 0;var _fe=require("timers"),m0=Ne(),q$=et(),p3=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};zu.TimeoutError=p3;var Hu=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,i=!!r?.unref,s=r?.rejection;if(n<0)throw new m0.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((a,u)=>{o=u,e(q$.noop,u)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),s==null&&this.duration>0?(this.id=(0,_fe.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new p3(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&i&&this.id.unref()):s!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(s))}clear(){(0,_fe.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,q$.squashError),new p3("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};zu.Timeout=Hu;function nat(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function iat(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var f3=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(iat(e))return new $5(e);if(nat(e))return new K5(e);throw new m0.MongoRuntimeError("Unrecognized options")}};zu.TimeoutContext=f3;var $5=class t extends f3{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Hu.reject(new m0.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,q$.csotMin)(e,r)===r?this._serverSelectionTimeout=Hu.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Hu.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new m0.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Hu.expires(e):Hu.reject(new m0.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Hu.expires(e):Hu.reject(new m0.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new m0.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};zu.CSOTTimeoutContext=$5;var K5=class t extends f3{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Hu.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Hu.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};zu.LegacyTimeoutContext=K5});var h3=m(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.AggregateOperation=y0.DB_AGGREGATE_COLLECTION=void 0;var L$=kr(),vfe=Ne(),sat=Po(),oat=ti(),z2=Vr();y0.DB_AGGREGATE_COLLECTION=1;var U5=class extends oat.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=L$.CursorResponse,this.options={...n},this.target=e.collection||y0.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,this.explain&&this.writeConcern)throw new vfe.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new vfe.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?L$.ExplainedCursorResponse:L$.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&sat.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};y0.AggregateOperation=U5;(0,z2.defineAspects)(U5,[z2.Aspect.READ_OPERATION,z2.Aspect.RETRYABLE,z2.Aspect.EXPLAINABLE,z2.Aspect.CURSOR_CREATING,z2.Aspect.SUPPORTS_RAW_DATA])});var hs=m(V5=>{"use strict";Object.defineProperty(V5,"__esModule",{value:!0});V5.executeOperation=lat;V5.autoConnect=Cfe;var oo=Ne(),Sfe=fs(),wfe=d3(),aat=Gi(),j$=et(),uat=h3(),kp=Vr(),cat=oo.MONGODB_ERROR_CODES.IllegalOperation,Afe="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function lat(t,e,r){if(!(e instanceof kp.AbstractOperation))throw new oo.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,j$.abortable)(Cfe(t),e.options):t.topology,i=e.session,s;if(i==null)s=Symbol(),i=t.startSession({owner:s,explicit:!1});else{if(i.hasEnded)throw new oo.MongoExpiredSessionError("Use of expired sessions is not permitted");if(i.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new oo.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(i.client!==t)throw new oo.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=i;let o=e.readPreference??Sfe.ReadPreference.primary,a=!!i?.inTransaction(),u=e.hasAspect(kp.Aspect.READ_OPERATION);if(a&&!o.equals(Sfe.ReadPreference.primary)&&(u||e.commandName==="runCommand"))throw new oo.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);i?.isPinned&&i.transaction.isCommitted&&!e.bypassPinningCheck&&i.unpin(),r??=aat.TimeoutContext.create({session:i,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await dat(e,{topology:n,timeoutContext:r,session:i,readPreference:o})}finally{i?.owner!=null&&i.owner===s&&await i.endSession()}}async function Cfe(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new oo.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new oo.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function dat(t,{topology:e,timeoutContext:r,session:n,readPreference:i}){let s;t.hasAspect(kp.Aspect.MUST_SELECT_SAME_SERVER)?s=(0,wfe.sameServerSelector)(t.server?.description):t instanceof uat.AggregateOperation&&t.hasWriteStage?s=(0,wfe.secondaryWritableServerSelector)(e.commonWireVersion,i):s=i;let o=await e.selectServer(s,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),a=t.hasAspect(kp.Aspect.READ_OPERATION),u=t.hasAspect(kp.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,d=e.s.options.retryWrites&&!c&&(0,j$.supportsRetryableWrites)(o)&&t.canRetryWrite,p=t.hasAspect(kp.Aspect.RETRYABLE)&&n!=null&&(a&&l||u&&d);u&&d&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let f=p?r.csotEnabled()?1/0:2:1,h,g;for(let _=0;_<f;_++){if(h){if(u&&h.code===cat)throw new oo.MongoServerError({message:Afe,errmsg:Afe,originalError:h});if(t.hasAspect(kp.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||u&&!(0,oo.isRetryableWriteError)(h)||a&&!(0,oo.isRetryableReadError)(h))throw h;if(h instanceof oo.MongoNetworkError&&t.hasAspect(kp.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(s,{session:n,operationName:t.commandName,previousServer:g,signal:t.options.signal}),u&&!(0,j$.supportsRetryableWrites)(o))throw new oo.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=o;try{_>0&&t.hasAspect(kp.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let S=await o.command(t,r);return t.handleOk(S)}catch(S){return t.handleError(S)}}catch(S){if(!(S instanceof oo.MongoError))throw S;if(h!=null&&S.hasErrorLabel(oo.MongoErrorLabel.NoWritesPerformed))throw h;g=o.description,h=S,r.clear()}}throw h??new oo.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var $$=m(W2=>{"use strict";Object.defineProperty(W2,"__esModule",{value:!0});W2.InsertOneOperation=W2.InsertOperation=void 0;var pat=kr(),Tfe=Ne(),fat=et(),hat=ti(),x1=Vr(),m3=class extends hat.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=pat.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},i=typeof n.ordered=="boolean"?n.ordered:!0,s={insert:this.ns.collection,documents:this.documents,ordered:i};return typeof n.bypassDocumentValidation=="boolean"&&(s.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(s.comment=n.comment),s}};W2.InsertOperation=m3;var G5=class extends m3{constructor(e,r,n){super(e.s.namespace,[(0,fat.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new Tfe.MongoServerError(r);if(r.writeErrors)throw new Tfe.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};W2.InsertOneOperation=G5;(0,x1.defineAspects)(m3,[x1.Aspect.RETRYABLE,x1.Aspect.WRITE_OPERATION,x1.Aspect.SUPPORTS_RAW_DATA]);(0,x1.defineAspects)(G5,[x1.Aspect.RETRYABLE,x1.Aspect.WRITE_OPERATION,x1.Aspect.SUPPORTS_RAW_DATA])});var Y2=m(K$=>{"use strict";Object.defineProperty(K$,"__esModule",{value:!0});K$.formatSort=Cat;var Ofe=Ne();function J2(t=1){let e=`${t}`.toLowerCase();if(mat(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Ofe.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function mat(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function yat(t){if(Array.isArray(t)&&t.length===2)try{return J2(t[1]),!0}catch{return!1}return!1}function gat(t){return Array.isArray(t)&&Array.isArray(t[0])}function Eat(t){return t instanceof Map&&t.size>0}function bat(t){return Array.isArray(t)}function _at(t){return new Map([[`${t[0]}`,J2([t[1]])]])}function vat(t){let e=t.map(([r,n])=>[`${r}`,J2(n)]);return new Map(e)}function Sat(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function wat(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,J2(n)]);return new Map(e)}function Aat(t){let e=Array.from(t).map(([r,n])=>[`${r}`,J2(n)]);return new Map(e)}function Cat(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,J2(e)]]);if(typeof t!="object")throw new Ofe.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!bat(t))return Eat(t)?Aat(t):Object.keys(t).length?wat(t):void 0;if(t.length)return gat(t)?vat(t):yat(t)?_at(t):Sat(t)}}});var V$=m(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.ReplaceOneOperation=ul.UpdateManyOperation=ul.UpdateOneOperation=ul.UpdateOperation=void 0;ul.makeUpdateStatement=J5;var Tat=kr(),cl=Ne(),Oat=Y2(),U$=et(),xat=ti(),vi=Vr(),g0=class extends xat.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Tat.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,i={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),i}};ul.UpdateOperation=g0;var H5=class extends g0{constructor(e,r,n,i){if(super(e,[J5(r,n,{...i,multi:!1})],i),!(0,U$.hasAtomicOperators)(n,i))throw new cl.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new cl.MongoServerError(r);if(r.writeErrors)throw new cl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};ul.UpdateOneOperation=H5;var z5=class extends g0{constructor(e,r,n,i){if(super(e,[J5(r,n,{...i,multi:!0})],i),!(0,U$.hasAtomicOperators)(n,i))throw new cl.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new cl.MongoServerError(r);if(r.writeErrors)throw new cl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};ul.UpdateManyOperation=z5;var W5=class extends g0{constructor(e,r,n,i){if(super(e,[J5(r,n,{...i,multi:!1})],i),(0,U$.hasAtomicOperators)(n))throw new cl.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new cl.MongoServerError(r);if(r.writeErrors)throw new cl.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};ul.ReplaceOneOperation=W5;function J5(t,e,r){if(t==null||typeof t!="object")throw new cl.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new cl.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,Oat.formatSort)(r.sort)),n}(0,vi.defineAspects)(g0,[vi.Aspect.RETRYABLE,vi.Aspect.WRITE_OPERATION,vi.Aspect.SKIP_COLLATION,vi.Aspect.SUPPORTS_RAW_DATA]);(0,vi.defineAspects)(H5,[vi.Aspect.RETRYABLE,vi.Aspect.WRITE_OPERATION,vi.Aspect.EXPLAINABLE,vi.Aspect.SKIP_COLLATION,vi.Aspect.SUPPORTS_RAW_DATA]);(0,vi.defineAspects)(z5,[vi.Aspect.WRITE_OPERATION,vi.Aspect.EXPLAINABLE,vi.Aspect.SKIP_COLLATION,vi.Aspect.SUPPORTS_RAW_DATA]);(0,vi.defineAspects)(W5,[vi.Aspect.RETRYABLE,vi.Aspect.WRITE_OPERATION,vi.Aspect.SKIP_COLLATION,vi.Aspect.SUPPORTS_RAW_DATA])});var X2=m(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.BulkOperationBase=vr.FindOperators=vr.MongoBulkWriteError=vr.WriteError=vr.WriteConcernError=vr.BulkWriteResult=vr.Batch=vr.BatchType=void 0;vr.mergeBatchResults=H$;var Rfe=gr(),Hi=Ne(),g3=N$(),Iat=hs(),Rat=$$(),E0=V$(),Dat=Gi(),ll=et(),xfe=Po();vr.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var G$=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};vr.Batch=G$;var I1=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(i=>n===i.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new Q2({errmsg:e,code:Hi.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${Rfe.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};vr.BulkWriteResult=I1;var Q2=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};vr.WriteConcernError=Q2;var E3=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};vr.WriteError=E3;function H$(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let s={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new E3(s));return}else if(n.ok===0&&e.ok===0)return;Dfe(t)&&n.n&&(e.nInserted=e.nInserted+n.n),J$(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let s=0;s<n.upserted.length;s++)e.upserted.push({index:n.upserted[s].index+t.originalZeroIndex,_id:n.upserted[s]._id})}else n.upserted&&(i=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(W$(t)&&n.n){let s=n.nModified;e.nUpserted=e.nUpserted+i,e.nMatched=e.nMatched+(n.n-i),typeof s=="number"?e.nModified=e.nModified+s:e.nModified=0}if(Array.isArray(n.writeErrors))for(let s=0;s<n.writeErrors.length;s++){let o={index:t.originalIndexes[n.writeErrors[s].index],code:n.writeErrors[s].code,errmsg:n.writeErrors[s].errmsg,errInfo:n.writeErrors[s].errInfo,op:t.operations[n.writeErrors[s].index]};e.writeErrors.push(new E3(o))}n.writeConcernError&&e.writeConcernErrors.push(new Q2(n.writeConcernError))}async function Ife(t,e){if(t.s.batches.length===0)return new I1(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let i=(0,ll.resolveOptions)(t,{...e,ordered:t.isOrdered});i.bypassDocumentValidation!==!0&&delete i.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(i.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(i.checkKeys=!1),i.retryWrites&&(W$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.multi)),J$(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.limit===0)));let s=Dfe(n)?new Rat.InsertOperation(t.s.namespace,n.operations,i):W$(n)?new E0.UpdateOperation(t.s.namespace,n.operations,i):J$(n)?new g3.DeleteOperation(t.s.namespace,n.operations,i):null;if(s==null)throw new Hi.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,a;try{a=await(0,Iat.executeOperation)(t.s.collection.client,s,i.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof Hi.MongoWriteConcernError){H$(n,t.s.bulkResult,o,a);let c=new I1(t.s.bulkResult,t.isOrdered);throw new b0({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new b0(o,new I1(t.s.bulkResult,t.isOrdered));H$(n,t.s.bulkResult,o,a);let u=new I1(t.s.bulkResult,t.isOrdered);t.handleWriteError(u)}t.s.batches.length=0;let r=new I1(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var b0=class extends Hi.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof Q2?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};vr.MongoBulkWriteError=b0;var Y5=class{constructor(e){this.bulkOperation=e}update(e){let r=y3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,E0.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,ll.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new Hi.MongoInvalidArgumentError("Update document requires atomic operators");let r=y3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,E0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,ll.hasAtomicOperators)(e))throw new Hi.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=y3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.UPDATE,(0,E0.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=y3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,g3.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=y3(this.bulkOperation);return this.bulkOperation.addToOperationsList(vr.BatchType.DELETE,(0,g3.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};vr.FindOperators=Y5;var z$=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let i=(0,ll.getTopology)(e);r=r??{};let s=e.s.namespace,o=!1,a=void 0,u=i.lastHello(),c=!!(i.s.options&&i.s.options.autoEncrypter),l=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,d=c?1024*1024*2:l,p=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,f=(p-1).toString(10).length+2,h=Object.assign({},r);h=(0,ll.applyRetryableWrites)(h,e.db);let g={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:g,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:xfe.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:d,maxWriteBatchSize:p,maxKeySize:f,namespace:s,topology:i,options:h,bsonOptions:(0,Rfe.resolveBSONOptions)(r),currentOp:a,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,ll.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(vr.BatchType.INSERT,e)}find(e){if(!e)throw new Hi.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new Y5(this)}raw(e){if(e==null||typeof e!="object")throw new Hi.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,ll.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList(vr.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new Hi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,E0.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,ll.hasAtomicOperators)(r.u))throw new Hi.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new Hi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,E0.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,ll.hasAtomicOperators)(r.u,this.bsonOptions))throw new Hi.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new Hi.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,E0.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,ll.hasAtomicOperators)(r.u,this.bsonOptions))throw new Hi.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(vr.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new Hi.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,g3.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new Hi.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(vr.BatchType.DELETE,(0,g3.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new Hi.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new Hi.MongoBatchReExecutionError;let r=xfe.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new Hi.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,ll.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=Dat.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async i=>await Ife(this,{...n,session:i})):await Ife(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new b0({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new b0(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};vr.BulkOperationBase=z$;function Dfe(t){return t.batchType===vr.BatchType.INSERT}function W$(t){return t.batchType===vr.BatchType.UPDATE}function J$(t){return t.batchType===vr.BatchType.DELETE}function y3(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var Mfe=m((Hmr,kfe)=>{"use strict";var kat=X2().BulkWriteResult;kfe.exports=kat});var b3=m((Lfe,jfe)=>{"use strict";var gd=jfe.exports=Lfe=Object.create(null),Pfe="disconnected",Nfe="connected",Ffe="connecting",Bfe="disconnecting",qfe="uninitialized";gd[0]=Pfe;gd[1]=Nfe;gd[2]=Ffe;gd[3]=Bfe;gd[99]=qfe;gd[Pfe]=0;gd[Nfe]=1;gd[Ffe]=2;gd[Bfe]=3;gd[qfe]=99});var Wu=m((zmr,$fe)=>{"use strict";var Mat=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);$fe.exports=function(e){return Mat(e)}});var Y$=m((Wmr,Ufe)=>{"use strict";var Pat=require("events").EventEmitter,Nat=b3(),Kfe=Wu();function jr(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!e?._hasOpened,this.emitter=new Pat,Nat.connected===this.conn.readyState&&this.onOpen()}jr.prototype.name;jr.prototype.collectionName;jr.prototype.conn;jr.prototype.onOpen=function(){this.buffer=!1,Kfe(()=>this.doQueue())};jr.prototype.onClose=function(){};jr.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};jr.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};jr.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return Kfe(function(){t.emitter.emit("queue")}),this};jr.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};jr.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};jr.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};jr.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};jr.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};jr.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};jr.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};jr.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};jr.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};jr.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};jr.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};jr.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};jr.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};jr.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};jr.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};jr.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};jr.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};jr.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};jr.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e&&e.schemaUserProvidedOptions!=null&&e.schemaUserProvidedOptions.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};jr.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r&&r.schemaUserProvidedOptions!=null&&r.schemaUserProvidedOptions.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e._getBufferTimeoutMS()};Ufe.exports=jr});var Qt=m((Jmr,Vfe)=>{"use strict";var Q5=class extends Error{};Object.defineProperty(Q5.prototype,"name",{value:"MongooseError"});Vfe.exports=Q5});var Hfe=m(Z5=>{"use strict";Object.defineProperty(Z5,"__esModule",{value:!0});Z5.ListDatabasesOperation=void 0;var Fat=kr(),Gfe=et(),Bat=ti(),Q$=Vr(),X5=class extends Bat.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Fat.MongoDBResponse,this.options=r??{},this.ns=new Gfe.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,Gfe.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};Z5.ListDatabasesOperation=X5;(0,Q$.defineAspects)(X5,[Q$.Aspect.READ_OPERATION,Q$.Aspect.RETRYABLE])});var X$=m(tC=>{"use strict";Object.defineProperty(tC,"__esModule",{value:!0});tC.RemoveUserOperation=void 0;var qat=kr(),Lat=ti(),zfe=Vr(),eC=class extends Lat.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=qat.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};tC.RemoveUserOperation=eC;(0,zfe.defineAspects)(eC,[zfe.Aspect.WRITE_OPERATION])});var _3=m(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.RunCursorCommandOperation=Z2.RunCommandOperation=void 0;var Wfe=kr(),jat=Vr(),rC=class extends jat.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=Wfe.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};Z2.RunCommandOperation=rC;var Z$=class extends rC{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=Wfe.CursorResponse}handleOk(e){return e}};Z2.RunCursorCommandOperation=Z$});var Jfe=m(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});nC.ValidateCollectionOperation=void 0;var $at=kr(),eK=Ne(),Kat=ti(),tK=class extends Kat.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=$at.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new eK.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new eK.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new eK.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};nC.ValidateCollectionOperation=tK});var nK=m(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0});sC.Admin=void 0;var Uat=gr(),iC=hs(),Vat=Hfe(),Gat=X$(),Hat=_3(),zat=Jfe(),Wat=et(),rK=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,iC.executeOperation)(this.s.db.client,new Hat.RunCommandOperation(new Wat.MongoDBNamespace("admin"),e,{...(0,Uat.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,iC.executeOperation)(this.s.db.client,new Gat.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,iC.executeOperation)(this.s.db.client,new zat.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,iC.executeOperation)(this.s.db.client,new Vat.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};sC.Admin=rK});var sK=m(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0});aC.OrderedBulkOperation=void 0;var Jat=gr(),Yfe=Ne(),oC=X2(),iK=class extends oC.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=Jat.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Yfe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new oC.Batch(e,this.s.currentIndex));let i=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new oC.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===oC.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new Yfe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=i+n,this.s.currentIndex+=1,this}};aC.OrderedBulkOperation=iK});var aK=m(uC=>{"use strict";Object.defineProperty(uC,"__esModule",{value:!0});uC.UnorderedBulkOperation=void 0;var Yat=gr(),Qfe=Ne(),Mp=X2(),oK=class extends Mp.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=Yat.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Qfe.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Mp.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Mp.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Mp.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let i=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Mp.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Mp.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new Qfe.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Mp.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Mp.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Mp.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=i+n,this}};uC.UnorderedBulkOperation=oK});var k1=m(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.MongoLogger=Xt.MongoLoggableComponent=Xt.SEVERITY_LEVEL_MAP=Xt.DEFAULT_MAX_DOCUMENT_LENGTH=Xt.SeverityLevel=void 0;Xt.parseSeverityFromString=dK;Xt.createStdioLogger=_0;Xt.stringifyWithMaxLen=D1;Xt.defaultLogTransform=e1e;var Xfe=require("util"),Zfe=gr(),dn=_i(),v0=et();Xt.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});Xt.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var lK=class extends Map{constructor(e){let r=[];for(let[n,i]of e)r.push([i,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};Xt.SEVERITY_LEVEL_MAP=new lK([[Xt.SeverityLevel.OFF,-1/0],[Xt.SeverityLevel.EMERGENCY,0],[Xt.SeverityLevel.ALERT,1],[Xt.SeverityLevel.CRITICAL,2],[Xt.SeverityLevel.ERROR,3],[Xt.SeverityLevel.WARNING,4],[Xt.SeverityLevel.NOTICE,5],[Xt.SeverityLevel.INFORMATIONAL,6],[Xt.SeverityLevel.DEBUG,7],[Xt.SeverityLevel.TRACE,8]]);Xt.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function dK(t){let e=Object.values(Xt.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function _0(t){return{write:(0,Xfe.promisify)((e,r)=>{let n=(0,Xfe.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function Qat({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:_0(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:_0(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:_0(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:_0(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:_0(process.stderr),mongodbLogPathIsStdErr:!0}}function e6(t,e,r){return dK(t)??dK(e)??r}function Xat(t,e){let r=Xt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=Xt.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function D1(t,e,r={}){let n="",i=0,s=function(a,u){if(!(i>=e)){if(a==="")return i+=1,u;if(i+=a.length+4,u==null)return u;switch(typeof u){case"string":i+=u.length+2;break;case"number":case"bigint":i+=String(u).length;break;case"boolean":i+=u?4:5;break;case"object":if((0,v0.isUint8Array)(u))i+=22+u.byteLength+u.byteLength*.33+18|0;else if("_bsontype"in u){let c=u;switch(c._bsontype){case"Int32":i+=String(c.value).length;break;case"Double":i+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":i+=c.toString().length;break;case"ObjectId":i+=35;break;case"MaxKey":case"MinKey":i+=13;break;case"Binary":i+=22+u.position+u.position*.33+18|0;break;case"Timestamp":i+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?i+=c.code.length+10+2:i+=c.code.length+10+11;break;case"BSONRegExp":i+=34+c.pattern.length+13+c.options.length+3;break}}}return u}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=Zfe.EJSON.stringify(t,s,0,r):n=Zfe.EJSON.stringify(t,r)}catch(o){n=`Extended JSON serialization failed with: ${o.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function Zat(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function cC(t,e,r=Xt.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:i,topologyDescription:s,message:o}=e;return t.selector=D1(n,r),t.operation=i,t.topologyDescription=D1(s,r),t.message=o,t}function uK(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=v0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function eu(t,e){let{host:r,port:n}=v0.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function R1(t,e){return t.topologyId=e.topologyId,t}function cK(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:i,port:s}=v0.HostAddress.fromString(n).toHostPort();return t.serverHost=i,t.serverPort=s,t}function e1e(t,e=Xt.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case dn.SERVER_SELECTION_STARTED:return r=cC(r,t,e),r;case dn.SERVER_SELECTION_FAILED:return r=cC(r,t,e),r.failure=t.failure?.message,r;case dn.SERVER_SELECTION_SUCCEEDED:return r=cC(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case dn.WAITING_FOR_SUITABLE_SERVER:return r=cC(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case dn.COMMAND_STARTED:return r=uK(r,t),r.message="Command started",r.command=D1(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case dn.COMMAND_SUCCEEDED:return r=uK(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=D1(t.reply,e,{relaxed:!0}),r;case dn.COMMAND_FAILED:return r=uK(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case dn.CONNECTION_POOL_CREATED:if(r=eu(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:a}}return r;case dn.CONNECTION_POOL_READY:return r=eu(r,t),r.message="Connection pool ready",r;case dn.CONNECTION_POOL_CLEARED:return r=eu(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case dn.CONNECTION_POOL_CLOSED:return r=eu(r,t),r.message="Connection pool closed",r;case dn.CONNECTION_CREATED:return r=eu(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case dn.CONNECTION_READY:return r=eu(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case dn.CONNECTION_CLOSED:switch(r=eu(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case dn.CONNECTION_CHECK_OUT_STARTED:return r=eu(r,t),r.message="Connection checkout started",r;case dn.CONNECTION_CHECK_OUT_FAILED:switch(r=eu(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case dn.CONNECTION_CHECKED_OUT:return r=eu(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case dn.CONNECTION_CHECKED_IN:return r=eu(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case dn.SERVER_OPENING:return r=R1(r,t),r=eu(r,t),r.message="Starting server monitoring",r;case dn.SERVER_CLOSED:return r=R1(r,t),r=eu(r,t),r.message="Stopped server monitoring",r;case dn.SERVER_HEARTBEAT_STARTED:return r=R1(r,t),r=cK(r,t),r.message="Server heartbeat started",r;case dn.SERVER_HEARTBEAT_SUCCEEDED:return r=R1(r,t),r=cK(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=D1(t.reply,e,{relaxed:!0}),r;case dn.SERVER_HEARTBEAT_FAILED:return r=R1(r,t),r=cK(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case dn.TOPOLOGY_OPENING:return r=R1(r,t),r.message="Starting topology monitoring",r;case dn.TOPOLOGY_CLOSED:return r=R1(r,t),r.message="Stopped topology monitoring",r;case dn.TOPOLOGY_DESCRIPTION_CHANGED:return r=R1(r,t),r.message="Topology description changed",r.previousDescription=r.reply=D1(t.previousDescription,e),r.newDescription=r.reply=D1(t.newDescription,e),r;default:for(let[n,i]of Object.entries(t))i!=null&&(r[n]=i)}return r}var pK=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(Xt.MongoLoggableComponent)){e[r]={};for(let n of Object.values(Xt.SeverityLevel))e[r][n]=Xat(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(Xt.MongoLoggableComponent)){this.componentSeverities[e]=Xt.SeverityLevel.OFF;for(let r of Object.values(Xt.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=_0(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(Xt.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===Xt.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let i={t:new Date,c:r,s:e};if(typeof n=="string"?i.message=n:typeof n=="object"&&(Zat(n)?i={...i,...n.toLog()}:i={...i,...e1e(n,this.maxDocumentLength)}),(0,v0.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(i)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let s=this.logDestination.write(i);(0,v0.isPromiseLike)(s)&&(this.pendingLog=s.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(s){this.logWriteFailureHandler(s)}}static resolveOptions(e,r){let n=Qat(e,r),i={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},s=e6(i.mongodbLogComponentSeverities?.default,i.MONGODB_LOG_ALL,Xt.SeverityLevel.OFF);return{componentSeverities:{command:e6(i.mongodbLogComponentSeverities?.command,i.MONGODB_LOG_COMMAND,s),topology:e6(i.mongodbLogComponentSeverities?.topology,i.MONGODB_LOG_TOPOLOGY,s),serverSelection:e6(i.mongodbLogComponentSeverities?.serverSelection,i.MONGODB_LOG_SERVER_SELECTION,s),connection:e6(i.mongodbLogComponentSeverities?.connection,i.MONGODB_LOG_CONNECTION,s),client:e6(i.mongodbLogComponentSeverities?.client,i.MONGODB_LOG_CLIENT,s),default:s},maxDocumentLength:i.mongodbLogMaxDocumentLength??(0,v0.parseUnsignedInteger)(i.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:i.mongodbLogPath,logDestinationIsStdErr:i.mongodbLogPathIsStdErr}}};Xt.MongoLogger=pK});var tu=m(t6=>{"use strict";Object.defineProperty(t6,"__esModule",{value:!0});t6.CancellationToken=t6.TypedEventEmitter=void 0;var eut=require("events"),tut=k1(),rut=et(),lC=class extends eut.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...i){if(this.emit(e,...i),this.component){let s={topologyId:r,serverConnectionId:n??null,...i[0]};this.mongoLogger?.debug(this.component,s)}}emitAndLogCommand(e,r,n,i,...s){if(e&&this.emit(r,...s),i){let o={databaseName:n,...s[0]};this.mongoLogger?.debug(tut.MongoLoggableComponent.COMMAND,o)}}};t6.TypedEventEmitter=lC;var fK=class extends lC{constructor(...e){super(...e),this.on("error",rut.noop)}};t6.CancellationToken=fK});var hK=m(fC=>{"use strict";Object.defineProperty(fC,"__esModule",{value:!0});fC.GetMoreOperation=void 0;var nut=kr(),t1e=Ne(),iut=et(),dC=Vr(),pC=class extends dC.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=nut.CursorResponse,this.options=i,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new t1e.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new t1e.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,iut.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};fC.GetMoreOperation=pC;(0,dC.defineAspects)(pC,[dC.Aspect.READ_OPERATION,dC.Aspect.MUST_SELECT_SAME_SERVER])});var r1e=m(mC=>{"use strict";Object.defineProperty(mC,"__esModule",{value:!0});mC.KillCursorsOperation=void 0;var sut=kr(),out=Ne(),mK=Vr(),hC=class extends mK.AbstractOperation{constructor(e,r,n,i){super(i),this.SERVER_COMMAND_RESPONSE_TYPE=sut.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new out.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};mC.KillCursorsOperation=hC;(0,mK.defineAspects)(hC,[mK.Aspect.MUST_SELECT_SAME_SERVER])});var gC=m((a0r,l1e)=>{"use strict";var yC=Object.prototype.hasOwnProperty,c1e=Object.prototype.toString,n1e=Object.defineProperty,i1e=Object.getOwnPropertyDescriptor,s1e=function(e){return typeof Array.isArray=="function"?Array.isArray(e):c1e.call(e)==="[object Array]"},o1e=function(e){if(!e||c1e.call(e)!=="[object Object]")return!1;var r=yC.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&yC.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||yC.call(e,i)},a1e=function(e,r){n1e&&r.name==="__proto__"?n1e(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},u1e=function(e,r){if(r==="__proto__")if(yC.call(e,r)){if(i1e)return i1e(e,r).value}else return;return e[r]};l1e.exports=function t(){var e,r,n,i,s,o,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=u1e(a,r),i=u1e(e,r),a!==i&&(l&&i&&(o1e(i)||(s=s1e(i)))?(s?(s=!1,o=n&&s1e(n)?n:[]):o=n&&o1e(n)?n:{},a1e(a,{name:r,newValue:t(l,o,i)})):typeof i<"u"&&a1e(a,{name:r,newValue:i}));return a}});var f1e=m((u0r,p1e)=>{"use strict";var ri={};p1e.exports=ri;function d1e(t){return t<0?-1:1}function aut(t){return t%1===.5&&(t&1)===0?Math.floor(t):Math.round(t)}function M1(t,e){e.unsigned||--t;let r=e.unsigned?0:-Math.pow(2,t),n=Math.pow(2,t)-1,i=e.moduloBitLength?Math.pow(2,e.moduloBitLength):Math.pow(2,t),s=e.moduloBitLength?Math.pow(2,e.moduloBitLength-1):Math.pow(2,t-1);return function(o,a){a||(a={});let u=+o;if(a.enforceRange){if(!Number.isFinite(u))throw new TypeError("Argument is not a finite number");if(u=d1e(u)*Math.floor(Math.abs(u)),u<r||u>n)throw new TypeError("Argument is not in byte range");return u}if(!isNaN(u)&&a.clamp)return u=aut(u),u<r&&(u=r),u>n&&(u=n),u;if(!Number.isFinite(u)||u===0)return 0;if(u=d1e(u)*Math.floor(Math.abs(u)),u=u%i,!e.unsigned&&u>=s)return u-i;if(e.unsigned){if(u<0)u+=i;else if(u===-0)return 0}return u}}ri.void=function(){};ri.boolean=function(t){return!!t};ri.byte=M1(8,{unsigned:!1});ri.octet=M1(8,{unsigned:!0});ri.short=M1(16,{unsigned:!1});ri["unsigned short"]=M1(16,{unsigned:!0});ri.long=M1(32,{unsigned:!1});ri["unsigned long"]=M1(32,{unsigned:!0});ri["long long"]=M1(32,{unsigned:!1,moduloBitLength:64});ri["unsigned long long"]=M1(32,{unsigned:!0,moduloBitLength:64});ri.double=function(t){let e=+t;if(!Number.isFinite(e))throw new TypeError("Argument is not a finite floating-point value");return e};ri["unrestricted double"]=function(t){let e=+t;if(isNaN(e))throw new TypeError("Argument is NaN");return e};ri.float=ri.double;ri["unrestricted float"]=ri["unrestricted double"];ri.DOMString=function(t,e){return e||(e={}),e.treatNullAsEmptyString&&t===null?"":String(t)};ri.ByteString=function(t,e){let r=String(t),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw new TypeError("Argument is not a valid bytestring");return r};ri.USVString=function(t){let e=String(t),r=e.length,n=[];for(let i=0;i<r;++i){let s=e.charCodeAt(i);if(s<55296||s>57343)n.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)n.push(String.fromCodePoint(65533));else if(i===r-1)n.push(String.fromCodePoint(65533));else{let o=e.charCodeAt(i+1);if(56320<=o&&o<=57343){let a=s&1023,u=o&1023;n.push(String.fromCodePoint(65536+1024*a+u)),++i}else n.push(String.fromCodePoint(65533))}}return n.join("")};ri.Date=function(t,e){if(!(t instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(t))return t};ri.RegExp=function(t,e){return t instanceof RegExp||(t=new RegExp(t)),t}});var h1e=m((c0r,P1)=>{"use strict";P1.exports.mixin=function(e,r){let n=Object.getOwnPropertyNames(r);for(let i=0;i<n.length;++i)Object.defineProperty(e,n[i],Object.getOwnPropertyDescriptor(r,n[i]))};P1.exports.wrapperSymbol=Symbol("wrapper");P1.exports.implSymbol=Symbol("impl");P1.exports.wrapperForImpl=function(t){return t[P1.exports.wrapperSymbol]};P1.exports.implForWrapper=function(t){return t[P1.exports.implSymbol]}});var m1e=m((l0r,uut)=>{uut.exports=[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1e3,1e3],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6e3],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8e3,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8e3]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9e3],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[3e4]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13e3,13e3],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43e3,43e3],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64e3,64e3],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66e3,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[12e4,12e4],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128e3,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23e3]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149e3]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32e3]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195e3,195e3],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[4e4]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918e3,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]});var v1e=m((d0r,bC)=>{"use strict";var g1e=require("punycode"),y1e=m1e(),r6={TRANSITIONAL:0,NONTRANSITIONAL:1};function E1e(t){return t.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function b1e(t){for(var e=0,r=y1e.length-1;e<=r;){var n=Math.floor((e+r)/2),i=y1e[n];if(i[0][0]<=t&&i[0][1]>=t)return i;i[0][0]>t?r=n-1:e=n+1}return null}var cut=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function _1e(t){return t.replace(cut,"_").length}function lut(t,e,r){for(var n=!1,i="",s=_1e(t),o=0;o<s;++o){var a=t.codePointAt(o),u=b1e(a);switch(u[1]){case"disallowed":n=!0,i+=String.fromCodePoint(a);break;case"ignored":break;case"mapped":i+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":r===r6.TRANSITIONAL?i+=String.fromCodePoint.apply(String,u[2]):i+=String.fromCodePoint(a);break;case"valid":i+=String.fromCodePoint(a);break;case"disallowed_STD3_mapped":e?(n=!0,i+=String.fromCodePoint(a)):i+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":e&&(n=!0),i+=String.fromCodePoint(a);break}}return{string:i,error:n}}var dut=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function put(t,e){t.substr(0,4)==="xn--"&&(t=g1e.toUnicode(t),e=r6.NONTRANSITIONAL);var r=!1;(E1e(t)!==t||t[3]==="-"&&t[4]==="-"||t[0]==="-"||t[t.length-1]==="-"||t.indexOf(".")!==-1||t.search(dut)===0)&&(r=!0);for(var n=_1e(t),i=0;i<n;++i){var s=b1e(t.codePointAt(i));if(EC===r6.TRANSITIONAL&&s[1]!=="valid"||EC===r6.NONTRANSITIONAL&&s[1]!=="valid"&&s[1]!=="deviation"){r=!0;break}}return{label:t,error:r}}function EC(t,e,r){var n=lut(t,e,r);n.string=E1e(n.string);for(var i=n.string.split("."),s=0;s<i.length;++s)try{var o=put(i[s]);i[s]=o.label,n.error=n.error||o.error}catch{n.error=!0}return{string:i.join("."),error:n.error}}bC.exports.toASCII=function(t,e,r,n){var i=EC(t,e,r),s=i.string.split(".");if(s=s.map(function(u){try{return g1e.toASCII(u)}catch{return i.error=!0,u}}),n){var o=s.slice(0,s.length-1).join(".").length;(o.length>253||o.length===0)&&(i.error=!0);for(var a=0;a<s.length;++a)if(s.length>63||s.length===0){i.error=!0;break}}return i.error?null:s.join(".")};bC.exports.toUnicode=function(t,e){var r=EC(t,e,r6.NONTRANSITIONAL);return{domain:r.string,error:r.error}};bC.exports.PROCESSING_OPTIONS=r6});var Ed=m((p0r,ru)=>{"use strict";var n6=require("punycode"),S1e=v1e(),T1e={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},rr=Symbol("failure");function w1e(t){return n6.ucs2.decode(t).length}function A1e(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function v3(t){return t>=48&&t<=57}function S3(t){return t>=65&&t<=90||t>=97&&t<=122}function fut(t){return S3(t)||v3(t)}function dl(t){return v3(t)||t>=65&&t<=70||t>=97&&t<=102}function C1e(t){return t==="."||t.toLowerCase()==="%2e"}function hut(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function mut(t,e){return S3(t)&&(e===58||e===124)}function O1e(t){return t.length===2&&S3(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function yut(t){return t.length===2&&S3(t.codePointAt(0))&&t[1]===":"}function gut(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/)!==-1}function Eut(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/)!==-1}function yK(t){return T1e[t]!==void 0}function zi(t){return yK(t.scheme)}function but(t){return T1e[t]}function x1e(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e="0"+e),"%"+e}function _ut(t){let e=new Buffer(t),r="";for(let n=0;n<e.length;++n)r+=x1e(e[n]);return r}function vut(t){let e=new Buffer(t),r=[];for(let n=0;n<e.length;++n)e[n]!==37?r.push(e[n]):e[n]===37&&dl(e[n+1])&&dl(e[n+2])?(r.push(parseInt(e.slice(n+1,n+3).toString(),16)),n+=2):r.push(e[n]);return new Buffer(r).toString()}function _C(t){return t<=31||t>126}var Sut=new Set([32,34,35,60,62,63,96,123,125]);function I1e(t){return _C(t)||Sut.has(t)}var wut=new Set([47,58,59,61,64,91,92,93,94,124]);function EK(t){return I1e(t)||wut.has(t)}function S0(t,e){let r=String.fromCodePoint(t);return e(t)?_ut(r):r}function Aut(t){let e=10;return t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t===""?0:(e===10?/[^0-9]/:e===16?/[^0-9A-Fa-f]/:/[^0-7]/).test(t)?rr:parseInt(t,e)}function Cut(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return t;let r=[];for(let s of e){if(s==="")return t;let o=Aut(s);if(o===rr)return t;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return rr;if(r[r.length-1]>=Math.pow(256,5-r.length))return rr;let n=r.pop(),i=0;for(let s of r)n+=s*Math.pow(256,3-i),++i;return n}function Tut(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e="."+e),r=Math.floor(r/256);return e}function Out(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=n6.ucs2.decode(t),t[i]===58){if(t[i+1]!==58)return rr;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return rr;if(t[i]===58){if(n!==null)return rr;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&dl(t[i]);)s=s*16+parseInt(A1e(t,i),16),++i,++o;if(t[i]===46){if(o===0||(i-=o,r>6))return rr;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===46&&a<4)++i;else return rr;if(!v3(t[i]))return rr;for(;v3(t[i]);){let c=parseInt(A1e(t,i));if(u===null)u=c;else{if(u===0)return rr;u=u*10+c}if(u>255)return rr;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return rr;break}else if(t[i]===58){if(++i,t[i]===void 0)return rr}else if(t[i]!==void 0)return rr;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return rr;return e}function xut(t){let e="",n=Rut(t).idx,i=!1;for(let s=0;s<=7;++s)if(!(i&&t[s]===0)){if(i&&(i=!1),n===s){e+=s===0?"::":":",i=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function gK(t,e){if(t[0]==="[")return t[t.length-1]!=="]"?rr:Out(t.substring(1,t.length-1));if(!e)return Iut(t);let r=vut(t),n=S1e.toASCII(r,!1,S1e.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(n===null||gut(n))return rr;let i=Cut(n);return typeof i=="number"||i===rr?i:n}function Iut(t){if(Eut(t))return rr;let e="",r=n6.ucs2.decode(t);for(let n=0;n<r.length;++n)e+=S0(r[n],_C);return e}function Rut(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r&&(e=n,r=i),{idx:e,len:r}}function bK(t){return typeof t=="number"?Tut(t):t instanceof Array?"["+xut(t)+"]":t}function Dut(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}function kut(t){return t.replace(/\u0009|\u000A|\u000D/g,"")}function R1e(t){let e=t.path;e.length!==0&&(t.scheme==="file"&&e.length===1&&Put(e[0])||e.pop())}function D1e(t){return t.username!==""||t.password!==""}function Mut(t){return t.host===null||t.host===""||t.cannotBeABaseURL||t.scheme==="file"}function Put(t){return/^[A-Za-z]:$/.test(t)}function ni(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};let o=Dut(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=kut(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=n6.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this["parse "+this.state](o,a);if(u){if(u===rr){this.failure=!0;break}}else break}}ni.prototype["parse scheme start"]=function(e,r){if(S3(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,rr;return!0};ni.prototype["parse scheme"]=function(e,r){if(fut(e)||e===43||e===45||e===46)this.buffer+=r.toLowerCase();else if(e===58){if(this.stateOverride&&(zi(this.url)&&!yK(this.buffer)||!zi(this.url)&&yK(this.buffer)||(D1e(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&(this.url.host===""||this.url.host===null))||(this.url.scheme=this.buffer,this.buffer="",this.stateOverride))return!1;this.url.scheme==="file"?((this.input[this.pointer+1]!==47||this.input[this.pointer+2]!==47)&&(this.parseError=!0),this.state="file"):zi(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":zi(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===47?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,rr;return!0};ni.prototype["parse no scheme"]=function(e){return this.base===null||this.base.cannotBeABaseURL&&e!==35?rr:(this.base.cannotBeABaseURL&&e===35?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};ni.prototype["parse special relative or authority"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};ni.prototype["parse path or authority"]=function(e){return e===47?this.state="authority":(this.state="path",--this.pointer),!0};ni.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===47?this.state="relative slash":e===63?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):zi(this.url)&&e===92?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0};ni.prototype["parse relative slash"]=function(e){return zi(this.url)&&(e===47||e===92)?(e===92&&(this.parseError=!0),this.state="special authority ignore slashes"):e===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};ni.prototype["parse special authority slashes"]=function(e){return e===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};ni.prototype["parse special authority ignore slashes"]=function(e){return e!==47&&e!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0};ni.prototype["parse authority"]=function(e,r){if(e===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;let n=w1e(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=S0(s,EK);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===47||e===63||e===35||zi(this.url)&&e===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,rr;this.pointer-=w1e(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};ni.prototype["parse hostname"]=ni.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,rr;let n=gK(this.buffer,zi(this.url));if(n===rr)return rr;if(this.url.host=n,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(e)||e===47||e===63||e===35||zi(this.url)&&e===92){if(--this.pointer,zi(this.url)&&this.buffer==="")return this.parseError=!0,rr;if(this.stateOverride&&this.buffer===""&&(D1e(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=gK(this.buffer,zi(this.url));if(n===rr)return rr;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===91?this.arrFlag=!0:e===93&&(this.arrFlag=!1),this.buffer+=r;return!0};ni.prototype["parse port"]=function(e,r){if(v3(e))this.buffer+=r;else if(isNaN(e)||e===47||e===63||e===35||zi(this.url)&&e===92||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>Math.pow(2,16)-1)return this.parseError=!0,rr;this.url.port=n===but(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,rr;return!0};var Nut=new Set([47,92,63,35]);ni.prototype["parse file"]=function(e){return this.url.scheme="file",e===47||e===92?(e===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):e===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):e===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!mut(e,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!Nut.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),R1e(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0};ni.prototype["parse file slash"]=function(e){return e===47||e===92?(e===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(yut(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0};ni.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===47||e===92||e===63||e===35)if(--this.pointer,!this.stateOverride&&O1e(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=gK(this.buffer,zi(this.url));if(n===rr)return rr;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};ni.prototype["parse path start"]=function(e){return zi(this.url)?(e===92&&(this.parseError=!0),this.state="path",e!==47&&e!==92&&--this.pointer):!this.stateOverride&&e===63?(this.url.query="",this.state="query"):!this.stateOverride&&e===35?(this.url.fragment="",this.state="fragment"):e!==void 0&&(this.state="path",e!==47&&--this.pointer),!0};ni.prototype["parse path"]=function(e){if(isNaN(e)||e===47||zi(this.url)&&e===92||!this.stateOverride&&(e===63||e===35)){if(zi(this.url)&&e===92&&(this.parseError=!0),hut(this.buffer)?(R1e(this.url),e!==47&&!(zi(this.url)&&e===92)&&this.url.path.push("")):C1e(this.buffer)&&e!==47&&!(zi(this.url)&&e===92)?this.url.path.push(""):C1e(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&O1e(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(e===void 0||e===63||e===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();e===63&&(this.url.query="",this.state="query"),e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!dl(this.input[this.pointer+1])||!dl(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=S0(e,I1e);return!0};ni.prototype["parse cannot-be-a-base-URL path"]=function(e){return e===63?(this.url.query="",this.state="query"):e===35?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==37&&(this.parseError=!0),e===37&&(!dl(this.input[this.pointer+1])||!dl(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+S0(e,_C))),!0};ni.prototype["parse query"]=function(e,r){if(isNaN(e)||!this.stateOverride&&e===35){(!zi(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");let n=new Buffer(this.buffer);for(let i=0;i<n.length;++i)n[i]<33||n[i]>126||n[i]===34||n[i]===35||n[i]===60||n[i]===62?this.url.query+=x1e(n[i]):this.url.query+=String.fromCodePoint(n[i]);this.buffer="",e===35&&(this.url.fragment="",this.state="fragment")}else e===37&&(!dl(this.input[this.pointer+1])||!dl(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r;return!0};ni.prototype["parse fragment"]=function(e){return isNaN(e)||(e===0?this.parseError=!0:(e===37&&(!dl(this.input[this.pointer+1])||!dl(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=S0(e,_C))),!0};function Fut(t,e){let r=t.scheme+":";if(t.host!==null?(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=":"+t.password),r+="@"),r+=bK(t.host),t.port!==null&&(r+=":"+t.port)):t.host===null&&t.scheme==="file"&&(r+="//"),t.cannotBeABaseURL)r+=t.path[0];else for(let n of t.path)r+="/"+n;return t.query!==null&&(r+="?"+t.query),!e&&t.fragment!==null&&(r+="#"+t.fragment),r}function But(t){let e=t.scheme+"://";return e+=bK(t.host),t.port!==null&&(e+=":"+t.port),e}ru.exports.serializeURL=Fut;ru.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return ru.exports.serializeURLOrigin(ru.exports.parseURL(t.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return But({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}};ru.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new ni(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?"failure":r.url};ru.exports.setTheUsername=function(t,e){t.username="";let r=n6.ucs2.decode(e);for(let n=0;n<r.length;++n)t.username+=S0(r[n],EK)};ru.exports.setThePassword=function(t,e){t.password="";let r=n6.ucs2.decode(e);for(let n=0;n<r.length;++n)t.password+=S0(r[n],EK)};ru.exports.serializeHost=bK;ru.exports.cannotHaveAUsernamePasswordPort=Mut;ru.exports.serializeInteger=function(t){return String(t)};ru.exports.parseURL=function(t,e){return e===void 0&&(e={}),ru.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var M1e=m(k1e=>{"use strict";var ii=Ed();k1e.implementation=class{constructor(e){let r=e[0],n=e[1],i=null;if(n!==void 0&&(i=ii.basicURLParse(n),i==="failure"))throw new TypeError("Invalid base URL");let s=ii.basicURLParse(r,{baseURL:i});if(s==="failure")throw new TypeError("Invalid URL");this._url=s}get href(){return ii.serializeURL(this._url)}set href(e){let r=ii.basicURLParse(e);if(r==="failure")throw new TypeError("Invalid URL");this._url=r}get origin(){return ii.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){ii.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){ii.cannotHaveAUsernamePasswordPort(this._url)||ii.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){ii.cannotHaveAUsernamePasswordPort(this._url)||ii.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?ii.serializeHost(e.host):ii.serializeHost(e.host)+":"+ii.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||ii.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":ii.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||ii.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":ii.serializeInteger(this._url.port)}set port(e){ii.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:ii.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],ii.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(e){let r=this._url;if(e===""){r.query=null;return}let n=e[0]==="?"?e.substring(1):e;r.query="",ii.basicURLParse(n,{url:r,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",ii.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var F1e=m((m0r,w3)=>{"use strict";var Ju=f1e(),N1e=h1e(),P1e=M1e(),Xr=N1e.implSymbol;function ms(t){if(!this||this[Xr]||!(this instanceof ms))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");let e=[];for(let r=0;r<arguments.length&&r<2;++r)e[r]=arguments[r];e[0]=Ju.USVString(e[0]),e[1]!==void 0&&(e[1]=Ju.USVString(e[1])),w3.exports.setup(this,e)}ms.prototype.toJSON=function(){if(!this||!w3.exports.is(this))throw new TypeError("Illegal invocation");let e=[];for(let r=0;r<arguments.length&&r<0;++r)e[r]=arguments[r];return this[Xr].toJSON.apply(this[Xr],e)};Object.defineProperty(ms.prototype,"href",{get(){return this[Xr].href},set(t){t=Ju.USVString(t),this[Xr].href=t},enumerable:!0,configurable:!0});ms.prototype.toString=function(){if(!this||!w3.exports.is(this))throw new TypeError("Illegal invocation");return this.href};Object.defineProperty(ms.prototype,"origin",{get(){return this[Xr].origin},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"protocol",{get(){return this[Xr].protocol},set(t){t=Ju.USVString(t),this[Xr].protocol=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"username",{get(){return this[Xr].username},set(t){t=Ju.USVString(t),this[Xr].username=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"password",{get(){return this[Xr].password},set(t){t=Ju.USVString(t),this[Xr].password=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"host",{get(){return this[Xr].host},set(t){t=Ju.USVString(t),this[Xr].host=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"hostname",{get(){return this[Xr].hostname},set(t){t=Ju.USVString(t),this[Xr].hostname=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"port",{get(){return this[Xr].port},set(t){t=Ju.USVString(t),this[Xr].port=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"pathname",{get(){return this[Xr].pathname},set(t){t=Ju.USVString(t),this[Xr].pathname=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"search",{get(){return this[Xr].search},set(t){t=Ju.USVString(t),this[Xr].search=t},enumerable:!0,configurable:!0});Object.defineProperty(ms.prototype,"hash",{get(){return this[Xr].hash},set(t){t=Ju.USVString(t),this[Xr].hash=t},enumerable:!0,configurable:!0});w3.exports={is(t){return!!t&&t[Xr]instanceof P1e.implementation},create(t,e){let r=Object.create(ms.prototype);return this.setup(r,t,e),r},setup(t,e,r){r||(r={}),r.wrapper=t,t[Xr]=new P1e.implementation(e,r),t[Xr][N1e.wrapperSymbol]=t},interface:ms,expose:{Window:{URL:ms},Worker:{URL:ms}}}});var B1e=m(bd=>{"use strict";bd.URL=F1e().interface;bd.serializeURL=Ed().serializeURL;bd.serializeURLOrigin=Ed().serializeURLOrigin;bd.basicURLParse=Ed().basicURLParse;bd.setTheUsername=Ed().setTheUsername;bd.setThePassword=Ed().setThePassword;bd.serializeHost=Ed().serializeHost;bd.serializeInteger=Ed().serializeInteger;bd.parseURL=Ed().parseURL});var J1e=m((fl,W1e)=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});function a6(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var pl=a6(require("stream")),$1e=a6(require("http")),SC=a6(require("url")),K1e=a6(B1e()),qut=a6(require("https")),w0=a6(require("zlib")),Lut=pl.Readable,Pp=Symbol("buffer"),_K=Symbol("type"),C3=class t{constructor(){this[_K]="";let e=arguments[0],r=arguments[1],n=[],i=0;if(e){let o=e,a=Number(o.length);for(let u=0;u<a;u++){let c=o[u],l;c instanceof Buffer?l=c:ArrayBuffer.isView(c)?l=Buffer.from(c.buffer,c.byteOffset,c.byteLength):c instanceof ArrayBuffer?l=Buffer.from(c):c instanceof t?l=c[Pp]:l=Buffer.from(typeof c=="string"?c:String(c)),i+=l.length,n.push(l)}}this[Pp]=Buffer.concat(n);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[_K]=s)}get size(){return this[Pp].length}get type(){return this[_K]}text(){return Promise.resolve(this[Pp].toString())}arrayBuffer(){let e=this[Pp],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){let e=new Lut;return e._read=function(){},e.push(this[Pp]),e.push(null),e}toString(){return"[object Blob]"}slice(){let e=this.size,r=arguments[0],n=arguments[1],i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?s=e:n<0?s=Math.max(e+n,0):s=Math.min(n,e);let o=Math.max(s-i,0),u=this[Pp].slice(i,i+o),c=new t([],{type:arguments[2]});return c[Pp]=u,c}};Object.defineProperties(C3.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(C3.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function Ps(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Ps.prototype=Object.create(Error.prototype);Ps.prototype.constructor=Ps;Ps.prototype.name="FetchError";var AK;try{AK=require("encoding").convert}catch{}var Fp=Symbol("Body internals"),q1e=pl.PassThrough;function ys(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var s=r.timeout;let o=s===void 0?0:s;t==null?t=null:U1e(t)?t=Buffer.from(t.toString()):O3(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof pl||(t=Buffer.from(String(t)))),this[Fp]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof pl&&t.on("error",function(a){let u=a.name==="AbortError"?a:new Ps(`Invalid response body while trying to fetch ${e.url}: ${a.message}`,"system",a);e[Fp].error=u})}ys.prototype={get body(){return this[Fp].body},get bodyUsed(){return this[Fp].disturbed},arrayBuffer(){return i6.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return i6.call(this).then(function(e){return Object.assign(new C3([],{type:t.toLowerCase()}),{[Pp]:e})})},json(){var t=this;return i6.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return ys.Promise.reject(new Ps(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return i6.call(this).then(function(t){return t.toString()})},buffer(){return i6.call(this)},textConverted(){var t=this;return i6.call(this).then(function(e){return jut(e,t.headers)})}};Object.defineProperties(ys.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});ys.mixIn=function(t){for(let e of Object.getOwnPropertyNames(ys.prototype))if(!(e in t)){let r=Object.getOwnPropertyDescriptor(ys.prototype,e);Object.defineProperty(t,e,r)}};function i6(){var t=this;if(this[Fp].disturbed)return ys.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Fp].disturbed=!0,this[Fp].error)return ys.Promise.reject(this[Fp].error);let e=this.body;if(e===null)return ys.Promise.resolve(Buffer.alloc(0));if(O3(e)&&(e=e.stream()),Buffer.isBuffer(e))return ys.Promise.resolve(e);if(!(e instanceof pl))return ys.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new ys.Promise(function(s,o){let a;t.timeout&&(a=setTimeout(function(){i=!0,o(new Ps(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(u){u.name==="AbortError"?(i=!0,o(u)):o(new Ps(`Invalid response body while trying to fetch ${t.url}: ${u.message}`,"system",u))}),e.on("data",function(u){if(!(i||u===null)){if(t.size&&n+u.length>t.size){i=!0,o(new Ps(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=u.length,r.push(u)}}),e.on("end",function(){if(!i){clearTimeout(a);try{s(Buffer.concat(r,n))}catch(u){o(new Ps(`Could not create Buffer from response body for ${t.url}: ${u.message}`,"system",u))}}})})}function jut(t,e){if(typeof AK!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");let r=e.get("content-type"),n="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),AK(t,"UTF-8",n).toString()}function U1e(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function O3(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function V1e(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof pl&&typeof n.getBoundary!="function"&&(e=new q1e,r=new q1e,n.pipe(e),n.pipe(r),t[Fp].body=e,n=r),n}function G1e(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":U1e(t)?"application/x-www-form-urlencoded;charset=UTF-8":O3(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof pl?null:"text/plain;charset=UTF-8"}function H1e(t){let e=t.body;return e===null?0:O3(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function $ut(t,e){let r=e.body;r===null?t.end():O3(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}ys.Promise=global.Promise;var z1e=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,CK=/[^\t\x20-\x7e\x80-\xff]/;function A3(t){if(t=`${t}`,z1e.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function L1e(t){if(t=`${t}`,CK.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function s6(t,e){e=e.toLowerCase();for(let r in t)if(r.toLowerCase()===e)return r}var Si=Symbol("map"),Qu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Si]=Object.create(null),e instanceof t){let r=e.raw(),n=Object.keys(r);for(let i of n)for(let s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){let r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");let n=[];for(let i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(let i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(let n of Object.keys(e)){let i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,A3(e);let r=s6(this[Si],e);return r===void 0?null:this[Si][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=TK(this),i=0;for(;i<n.length;){var s=n[i];let o=s[0],a=s[1];e.call(r,a,o,this),n=TK(this),i++}}set(e,r){e=`${e}`,r=`${r}`,A3(e),L1e(r);let n=s6(this[Si],e);this[Si][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,A3(e),L1e(r);let n=s6(this[Si],e);n!==void 0?this[Si][n].push(r):this[Si][e]=[r]}has(e){return e=`${e}`,A3(e),s6(this[Si],e)!==void 0}delete(e){e=`${e}`,A3(e);let r=s6(this[Si],e);r!==void 0&&delete this[Si][r]}raw(){return this[Si]}keys(){return vK(this,"key")}values(){return vK(this,"value")}[Symbol.iterator](){return vK(this,"key+value")}};Qu.prototype.entries=Qu.prototype[Symbol.iterator];Object.defineProperty(Qu.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Qu.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function TK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Si]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[Si][n].join(", ")}:function(n){return[n.toLowerCase(),t[Si][n].join(", ")]})}var OK=Symbol("internal");function vK(t,e){let r=Object.create(xK);return r[OK]={target:t,kind:e,index:0},r}var xK=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==xK)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[OK];let e=t.target,r=t.kind,n=t.index,i=TK(e,r),s=i.length;return n>=s?{value:void 0,done:!0}:(this[OK].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(xK,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Kut(t){let e=Object.assign({__proto__:null},t[Si]),r=s6(t[Si],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Uut(t){let e=new Qu;for(let r of Object.keys(t))if(!z1e.test(r))if(Array.isArray(t[r]))for(let n of t[r])CK.test(n)||(e[Si][r]===void 0?e[Si][r]=[n]:e[Si][r].push(n));else CK.test(t[r])||(e[Si][r]=[t[r]]);return e}var N1=Symbol("Response internals"),Vut=$1e.STATUS_CODES,Yu=class t{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ys.call(this,e,r);let n=r.status||200,i=new Qu(r.headers);if(e!=null&&!i.has("Content-Type")){let s=G1e(e);s&&i.append("Content-Type",s)}this[N1]={url:r.url,status:n,statusText:r.statusText||Vut[n],headers:i,counter:r.counter}}get url(){return this[N1].url||""}get status(){return this[N1].status}get ok(){return this[N1].status>=200&&this[N1].status<300}get redirected(){return this[N1].counter>0}get statusText(){return this[N1].statusText}get headers(){return this[N1].headers}clone(){return new t(V1e(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}};ys.mixIn(Yu.prototype);Object.defineProperties(Yu.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Yu.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var Np=Symbol("Request internals"),Gut=SC.URL||K1e.URL,Hut=SC.parse,zut=SC.format;function SK(t){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(t)&&(t=new Gut(t).toString()),Hut(t)}var Wut="destroy"in pl.Readable.prototype;function vC(t){return typeof t=="object"&&typeof t[Np]=="object"}function Jut(t){let e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}var B1=class t{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;vC(e)?n=SK(e.url):(e&&e.href?n=SK(e.href):n=SK(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||vC(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:vC(e)&&e.body!==null?V1e(e):null;ys.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});let o=new Qu(r.headers||e.headers||{});if(s!=null&&!o.has("Content-Type")){let u=G1e(s);u&&o.append("Content-Type",u)}let a=vC(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!Jut(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Np]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[Np].method}get url(){return zut(this[Np].parsedURL)}get headers(){return this[Np].headers}get redirect(){return this[Np].redirect}get signal(){return this[Np].signal}clone(){return new t(this)}};ys.mixIn(B1.prototype);Object.defineProperty(B1.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(B1.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Yut(t){let e=t[Np].parsedURL,r=new Qu(t[Np].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof pl.Readable&&!Wut)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){let s=H1e(t);typeof s=="number"&&(n=String(s))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),Object.assign({},e,{method:t.method,headers:Kut(r),agent:i})}function o6(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}o6.prototype=Object.create(Error.prototype);o6.prototype.constructor=o6;o6.prototype.name="AbortError";var T3=SC.URL||K1e.URL,j1e=pl.PassThrough,Qut=function(e,r){let n=new T3(r).hostname,i=new T3(e).hostname;return n===i||n[n.length-i.length-1]==="."&&n.endsWith(i)},Xut=function(e,r){let n=new T3(r).protocol,i=new T3(e).protocol;return n===i};function F1(t,e){if(!F1.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return ys.Promise=F1.Promise,new F1.Promise(function(r,n){let i=new B1(t,e),s=Yut(i),o=(s.protocol==="https:"?qut:$1e).request,a=i.signal,u=null,c=function(){let g=new o6("The user aborted a request.");n(g),i.body&&i.body instanceof pl.Readable&&wK(i.body,g),!(!u||!u.body)&&u.body.emit("error",g)};if(a&&a.aborted){c();return}let l=function(){c(),f()},d=o(s),p;a&&a.addEventListener("abort",l);function f(){d.abort(),a&&a.removeEventListener("abort",l),clearTimeout(p)}i.timeout&&d.once("socket",function(h){p=setTimeout(function(){n(new Ps(`network timeout at: ${i.url}`,"request-timeout")),f()},i.timeout)}),d.on("error",function(h){n(new Ps(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),u&&u.body&&wK(u.body,h),f()}),Zut(d,function(h){a&&a.aborted||u&&u.body&&wK(u.body,h)}),parseInt(process.version.substring(1))<14&&d.on("socket",function(h){h.addListener("close",function(g){let _=h.listenerCount("data")>0;if(u&&_&&!g&&!(a&&a.aborted)){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",S)}})}),d.on("response",function(h){clearTimeout(p);let g=Uut(h.headers);if(F1.isRedirect(h.statusCode)){let A=g.get("Location"),O=null;try{O=A===null?null:new T3(A,i.url).toString()}catch{if(i.redirect!=="manual"){n(new Ps(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new Ps(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":if(O!==null)try{g.set("Location",O)}catch(R){n(R)}break;case"follow":if(O===null)break;if(i.counter>=i.follow){n(new Ps(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new Qu(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(!Qut(i.url,O)||!Xut(i.url,O))for(let R of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(R);if(h.statusCode!==303&&i.body&&H1e(i)===null){n(new Ps("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length")),r(F1(new B1(O,x))),f();return}}h.once("end",function(){a&&a.removeEventListener("abort",l)});let _=h.pipe(new j1e),S={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:g,size:i.size,timeout:i.timeout,counter:i.counter},w=g.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){u=new Yu(_,S),r(u);return}let C={flush:w0.Z_SYNC_FLUSH,finishFlush:w0.Z_SYNC_FLUSH};if(w=="gzip"||w=="x-gzip"){_=_.pipe(w0.createGunzip(C)),u=new Yu(_,S),r(u);return}if(w=="deflate"||w=="x-deflate"){let A=h.pipe(new j1e);A.once("data",function(O){(O[0]&15)===8?_=_.pipe(w0.createInflate()):_=_.pipe(w0.createInflateRaw()),u=new Yu(_,S),r(u)}),A.on("end",function(){u||(u=new Yu(_,S),r(u))});return}if(w=="br"&&typeof w0.createBrotliDecompress=="function"){_=_.pipe(w0.createBrotliDecompress()),u=new Yu(_,S),r(u);return}u=new Yu(_,S),r(u)}),$ut(d,i)})}function Zut(t,e){let r;t.on("socket",function(n){r=n}),t.on("response",function(n){let i=n.headers;i["transfer-encoding"]==="chunked"&&!i["content-length"]&&n.once("close",function(s){if(r&&r.listenerCount("data")>0&&!s){let a=new Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",e(a)}})})}function wK(t,e){t.destroy?t.destroy(e):(t.emit("error",e),t.end())}F1.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308};F1.Promise=global.Promise;W1e.exports=fl=F1;Object.defineProperty(fl,"__esModule",{value:!0});fl.default=fl;fl.Headers=Qu;fl.Request=B1;fl.Response=Yu;fl.FetchError=Ps;fl.AbortError=o6});var wC=m((g0r,Y1e)=>{"use strict";var _d=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";_d.writable=t=>_d(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";_d.readable=t=>_d(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";_d.duplex=t=>_d.writable(t)&&_d.readable(t);_d.transform=t=>_d.duplex(t)&&typeof t._transform=="function";Y1e.exports=_d});var RK=m(AC=>{"use strict";Object.defineProperty(AC,"__esModule",{value:!0});AC.GaxiosError=void 0;var IK=class extends Error{constructor(e,r,n){super(e),this.response=n,this.config=r,this.response.data=ect(r.responseType,n.data),this.code=n.status.toString()}};AC.GaxiosError=IK;function ect(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}});var X1e=m(CC=>{"use strict";Object.defineProperty(CC,"__esModule",{value:!0});CC.getRetryConfig=void 0;async function tct(t){var e;let r=Q1e(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!await(r.shouldRetry||rct)(t))return{shouldRetry:!1,config:t.config};let o=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let a=r.retryBackoff?r.retryBackoff(t,o):new Promise(u=>{setTimeout(u,o)});return r.onRetryAttempt&&r.onRetryAttempt(t),await a,{shouldRetry:!0,config:t.config}}CC.getRetryConfig=tct;function rct(t){let e=Q1e(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Q1e(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var DK=m((_0r,Z1e)=>{var u6=1e3,c6=u6*60,l6=c6*60,A0=l6*24,nct=A0*7,ict=A0*365.25;Z1e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return sct(t);if(r==="number"&&isFinite(t))return e.long?act(t):oct(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function sct(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ict;case"weeks":case"week":case"w":return r*nct;case"days":case"day":case"d":return r*A0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*l6;case"minutes":case"minute":case"mins":case"min":case"m":return r*c6;case"seconds":case"second":case"secs":case"sec":case"s":return r*u6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function oct(t){var e=Math.abs(t);return e>=A0?Math.round(t/A0)+"d":e>=l6?Math.round(t/l6)+"h":e>=c6?Math.round(t/c6)+"m":e>=u6?Math.round(t/u6)+"s":t+"ms"}function act(t){var e=Math.abs(t);return e>=A0?TC(t,e,A0,"day"):e>=l6?TC(t,e,l6,"hour"):e>=c6?TC(t,e,c6,"minute"):e>=u6?TC(t,e,u6,"second"):t+" ms"}function TC(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var kK=m((v0r,ehe)=>{function uct(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=DK(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ehe.exports=uct});var the=m((ma,OC)=>{ma.formatArgs=lct;ma.save=dct;ma.load=pct;ma.useColors=cct;ma.storage=fct();ma.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ma.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cct(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lct(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+OC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ma.log=console.debug||console.log||(()=>{});function dct(t){try{t?ma.storage.setItem("debug",t):ma.storage.removeItem("debug")}catch{}}function pct(){let t;try{t=ma.storage.getItem("debug")||ma.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function fct(){try{return localStorage}catch{}}OC.exports=kK()(ma);var{formatters:hct}=OC.exports;hct.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var nhe=m((S0r,rhe)=>{"use strict";rhe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var x3=m((w0r,she)=>{"use strict";var mct=require("os"),ihe=require("tty"),Xu=nhe(),{env:gs}=process,q1;Xu("no-color")||Xu("no-colors")||Xu("color=false")||Xu("color=never")?q1=0:(Xu("color")||Xu("colors")||Xu("color=true")||Xu("color=always"))&&(q1=1);"FORCE_COLOR"in gs&&(gs.FORCE_COLOR==="true"?q1=1:gs.FORCE_COLOR==="false"?q1=0:q1=gs.FORCE_COLOR.length===0?1:Math.min(parseInt(gs.FORCE_COLOR,10),3));function MK(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function PK(t,e){if(q1===0)return 0;if(Xu("color=16m")||Xu("color=full")||Xu("color=truecolor"))return 3;if(Xu("color=256"))return 2;if(t&&!e&&q1===void 0)return 0;let r=q1||0;if(gs.TERM==="dumb")return r;if(process.platform==="win32"){let n=mct.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in gs)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in gs)||gs.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in gs)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(gs.TEAMCITY_VERSION)?1:0;if(gs.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in gs){let n=parseInt((gs.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(gs.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(gs.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(gs.TERM)||"COLORTERM"in gs?1:r}function yct(t){let e=PK(t,t&&t.isTTY);return MK(e)}she.exports={supportsColor:yct,stdout:MK(PK(!0,ihe.isatty(1))),stderr:MK(PK(!0,ihe.isatty(2)))}});var ahe=m((Es,IC)=>{var gct=require("tty"),xC=require("util");Es.init=Act;Es.log=vct;Es.formatArgs=bct;Es.save=Sct;Es.load=wct;Es.useColors=Ect;Es.destroy=xC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Es.colors=[6,2,3,4,5,1];try{let t=x3();t&&(t.stderr||t).level>=2&&(Es.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Es.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Ect(){return"colors"in Es.inspectOpts?!!Es.inspectOpts.colors:gct.isatty(process.stderr.fd)}function bct(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+IC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=_ct()+e+" "+t[0]}function _ct(){return Es.inspectOpts.hideDate?"":new Date().toISOString()+" "}function vct(...t){return process.stderr.write(xC.formatWithOptions(Es.inspectOpts,...t)+`
`)}function Sct(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function wct(){return process.env.DEBUG}function Act(t){t.inspectOpts={};let e=Object.keys(Es.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Es.inspectOpts[e[r]]}IC.exports=kK()(Es);var{formatters:ohe}=IC.exports;ohe.o=function(t){return this.inspectOpts.colors=this.useColors,xC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ohe.O=function(t){return this.inspectOpts.colors=this.useColors,xC.inspect(t,this.inspectOpts)}});var RC=m((A0r,NK)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?NK.exports=the():NK.exports=ahe()});var uhe=m(FK=>{"use strict";Object.defineProperty(FK,"__esModule",{value:!0});function Cct(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(s,o)=>{s?i(s):n(o)})})}}FK.default=Cct});var dhe=m((qK,lhe)=>{"use strict";var che=qK&&qK.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Tct=require("events"),Oct=che(RC()),xct=che(uhe()),I3=Oct.default("agent-base");function Ict(t){return!!t&&typeof t.addRequest=="function"}function BK(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function DC(t,e){return new DC.Agent(t,e)}(function(t){class e extends Tct.EventEmitter{constructor(n,i){super();let s=i;typeof n=="function"?this.callback=n:n&&(s=n),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:BK()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:BK()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=BK()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,n._last=!0,n.shouldKeepAlive=!1;let o=!1,a=null,u=s.timeout||this.timeout,c=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{a=null,o=!0;let f=new Error(`A "socket" was not created for HTTP request before ${u}ms`);f.code="ETIMEOUT",c(f)},d=f=>{o||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(o)return;if(a!=null&&(clearTimeout(a),a=null),Ict(f)){I3("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,s);return}if(f){f.once("free",()=>{this.freeSocket(f,s)}),n.onSocket(f);return}let h=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);c(h)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(I3("Converting legacy callback function to promise"),this.promisifiedCallback=xct.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(a=setTimeout(l,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{I3("Resolving socket for %o request: %o",s.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,s)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(n,i){I3("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){I3("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(DC||(DC={}));lhe.exports=DC});var phe=m(D3=>{"use strict";var Rct=D3&&D3.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(D3,"__esModule",{value:!0});var Dct=Rct(RC()),R3=Dct.default("https-proxy-agent:parse-proxy-response");function kct(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let d=t.read();d?l(d):t.once("readable",s)}function o(){t.removeListener("end",u),t.removeListener("error",c),t.removeListener("close",a),t.removeListener("readable",s)}function a(d){R3("onclose had error %o",d)}function u(){R3("onend")}function c(d){o(),R3("onerror %o",d),r(d)}function l(d){i.push(d),n+=d.length;let p=Buffer.concat(i,n);if(p.indexOf(`\r
\r
`)===-1){R3("have not received end of HTTP headers yet..."),s();return}let h=p.toString("ascii",0,p.indexOf(`\r
`)),g=+h.split(" ")[1];R3("got proxy server response: %o",h),e({statusCode:g,buffered:p})}t.on("error",c),t.on("close",a),t.on("end",u),s()})}D3.default=kct});var mhe=m(C0=>{"use strict";var Mct=C0&&C0.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},d6=C0&&C0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(C0,"__esModule",{value:!0});var fhe=d6(require("net")),hhe=d6(require("tls")),Pct=d6(require("url")),Nct=d6(require("assert")),Fct=d6(RC()),Bct=dhe(),qct=d6(phe()),k3=Fct.default("https-proxy-agent:agent"),LK=class extends Bct.Agent{constructor(e){let r;if(typeof e=="string"?r=Pct.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");k3("creating new HttpsProxyAgent instance: %o",r),super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||$ct(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return Mct(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s;i?(k3("Creating `tls.Socket`: %o",n),s=hhe.default.connect(n)):(k3("Creating `net.Socket`: %o",n),s=fhe.default.connect(n));let o=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(o["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:c,port:l,secureEndpoint:d}=r;jct(l,d)||(c+=`:${l}`),o.Host=c,o.Connection="close";for(let _ of Object.keys(o))u+=`${_}: ${o[_]}\r
`;let p=qct.default(s);s.write(`${u}\r
`);let{statusCode:f,buffered:h}=yield p;if(f===200){if(e.once("socket",Lct),r.secureEndpoint){k3("Upgrading socket connection to TLS");let _=r.servername||r.host;return hhe.default.connect(Object.assign(Object.assign({},Kct(r,"host","hostname","path","port")),{socket:s,servername:_}))}return s}s.destroy();let g=new fhe.default.Socket({writable:!1});return g.readable=!0,e.once("socket",_=>{k3("replaying proxy buffer for failed request"),Nct.default(_.listenerCount("data")>0),_.push(h),_.push(null)}),g})}};C0.default=LK;function Lct(t){t.resume()}function jct(t,e){return!!(!e&&t===80||e&&t===443)}function $ct(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function Kct(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var ghe=m((KK,yhe)=>{"use strict";var Uct=KK&&KK.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},jK=Uct(mhe());function $K(t){return new jK.default(t)}(function(t){t.HttpsProxyAgent=jK.default,t.prototype=jK.default.prototype})($K||($K={}));yhe.exports=$K});var She=m(p6=>{"use strict";var kC=p6&&p6.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p6,"__esModule",{value:!0});p6.Gaxios=void 0;var Vct=kC(gC()),Gct=require("https"),Hct=kC(J1e()),zct=kC(require("querystring")),Wct=kC(wC()),bhe=require("url"),Jct=RK(),Yct=X1e(),Qct=Zct()?window.fetch:Hct.default;function Xct(){return typeof window<"u"&&!!window}function Zct(){return Xct()&&!!window.fetch}function elt(){return typeof Buffer<"u"}function Ehe(t,e){return!!_he(t,e)}function _he(t,e){e=e.toLowerCase();for(let r of Object.keys(t?.headers||{}))if(e===r.toLowerCase())return t.headers[r]}var UK;function vhe(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(UK=ghe()),i}vhe();function tlt(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new bhe.URL(t);return!!n.find(s=>s.startsWith("*.")||s.startsWith(".")?(s=s.replace(/^\*\./,"."),i.hostname.endsWith(s)):s===i.origin||s===i.hostname)}function rlt(t){if(!tlt(t))return vhe()}var VK=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}async request(e={}){return e=this.validateOpts(e),this._request(e)}async _defaultAdapter(e){let n=await(e.fetchImplementation||Qct)(e.url,e),i=await this.getResponseData(e,n);return this.translateResponse(e,n,i)}async _request(e={}){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let n="";await new Promise(i=>{r.data.on("data",s=>{n+=s}),r.data.on("end",i)}),r.data=n}throw new Jct.GaxiosError(`Request failed with status code ${r.status}`,e,r)}return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:s}=await(0,Yct.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,this._request(n.config);throw n}}async getResponseData(e,r){switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{n=JSON.parse(n)}catch{}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}}validateOpts(e){let r=(0,Vct.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let s=r.paramsSerializer(r.params);s.startsWith("?")&&(s=s.slice(1));let o=r.url.includes("?")?"&":"?";r.url=r.url+o+s}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let s=typeof FormData>"u"?!1:r?.data instanceof FormData;Wct.default.readable(r.data)?r.body=r.data:elt()&&Buffer.isBuffer(r.data)?(r.body=r.data,Ehe(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?s||(_he(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Ehe(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=rlt(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let s=new bhe.URL(i);r.agent=new UK({port:s.port,host:s.host,protocol:s.protocol,cert:r.cert,key:r.key})}else r.agent=new UK(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new Gct.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return zct.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((s,o)=>{i[o]=s}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};p6.Gaxios=VK});var Ahe=m(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.request=hl.instance=hl.Gaxios=hl.GaxiosError=void 0;var whe=She();Object.defineProperty(hl,"Gaxios",{enumerable:!0,get:function(){return whe.Gaxios}});var nlt=RK();Object.defineProperty(hl,"GaxiosError",{enumerable:!0,get:function(){return nlt.GaxiosError}});hl.instance=new whe.Gaxios;async function ilt(t){return hl.instance.request(t)}hl.request=ilt});var GK=m((Che,MC)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,u=14,c=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function f(O){var x,R,M,I=Ce.prototype={constructor:Ce,toString:null,valueOf:null},F=new Ce(1),B=20,U=4,k=-7,H=21,ie=-1e7,j=1e7,V=!1,Ee=1,Re=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Ge="0123456789abcdefghijklmnopqrstuvwxyz",Me=!0;function Ce(P,$){var G,ne,Y,te,de,z,X,ue,se=this;if(!(se instanceof Ce))return new Ce(P,$);if($==null){if(P&&P._isBigNumber===!0){se.s=P.s,!P.c||P.e>j?se.c=se.e=null:P.e<ie?se.c=[se.e=0]:(se.e=P.e,se.c=P.c.slice());return}if((z=typeof P=="number")&&P*0==0){if(se.s=1/P<0?(P=-P,-1):1,P===~~P){for(te=0,de=P;de>=10;de/=10,te++);te>j?se.c=se.e=null:(se.e=te,se.c=[P]);return}ue=String(P)}else{if(!r.test(ue=String(P)))return M(se,ue,z);se.s=ue.charCodeAt(0)==45?(ue=ue.slice(1),-1):1}(te=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(de=ue.search(/e/i))>0?(te<0&&(te=de),te+=+ue.slice(de+1),ue=ue.substring(0,de)):te<0&&(te=ue.length)}else{if(S($,2,Ge.length,"Base"),$==10&&Me)return se=new Ce(P),Ei(se,B+se.e+1,U);if(ue=String(P),z=typeof P=="number"){if(P*0!=0)return M(se,ue,z,$);if(se.s=1/P<0?(ue=ue.slice(1),-1):1,Ce.DEBUG&&ue.replace(/^0\.0*|\./,"").length>15)throw Error(o+P)}else se.s=ue.charCodeAt(0)===45?(ue=ue.slice(1),-1):1;for(G=Ge.slice(0,$),te=de=0,X=ue.length;de<X;de++)if(G.indexOf(ne=ue.charAt(de))<0){if(ne=="."){if(de>te){te=X;continue}}else if(!Y&&(ue==ue.toUpperCase()&&(ue=ue.toLowerCase())||ue==ue.toLowerCase()&&(ue=ue.toUpperCase()))){Y=!0,de=-1,te=0;continue}return M(se,String(P),z,$)}z=!1,ue=R(ue,$,10,se.s),(te=ue.indexOf("."))>-1?ue=ue.replace(".",""):te=ue.length}for(de=0;ue.charCodeAt(de)===48;de++);for(X=ue.length;ue.charCodeAt(--X)===48;);if(ue=ue.slice(de,++X)){if(X-=de,z&&Ce.DEBUG&&X>15&&(P>c||P!==i(P)))throw Error(o+se.s*P);if((te=te-de-1)>j)se.c=se.e=null;else if(te<ie)se.c=[se.e=0];else{if(se.e=te,se.c=[],de=(te+1)%u,te<0&&(de+=u),de<X){for(de&&se.c.push(+ue.slice(0,de)),X-=u;de<X;)se.c.push(+ue.slice(de,de+=u));de=u-(ue=ue.slice(de)).length}else de-=X;for(;de--;ue+="0");se.c.push(+ue)}}else se.c=[se.e=0]}Ce.clone=f,Ce.ROUND_UP=0,Ce.ROUND_DOWN=1,Ce.ROUND_CEIL=2,Ce.ROUND_FLOOR=3,Ce.ROUND_HALF_UP=4,Ce.ROUND_HALF_DOWN=5,Ce.ROUND_HALF_EVEN=6,Ce.ROUND_HALF_CEIL=7,Ce.ROUND_HALF_FLOOR=8,Ce.EUCLID=9,Ce.config=Ce.set=function(P){var $,G;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty($="DECIMAL_PLACES")&&(G=P[$],S(G,0,p,$),B=G),P.hasOwnProperty($="ROUNDING_MODE")&&(G=P[$],S(G,0,8,$),U=G),P.hasOwnProperty($="EXPONENTIAL_AT")&&(G=P[$],G&&G.pop?(S(G[0],-p,0,$),S(G[1],0,p,$),k=G[0],H=G[1]):(S(G,-p,p,$),k=-(H=G<0?-G:G))),P.hasOwnProperty($="RANGE"))if(G=P[$],G&&G.pop)S(G[0],-p,-1,$),S(G[1],1,p,$),ie=G[0],j=G[1];else if(S(G,-p,p,$),G)ie=-(j=G<0?-G:G);else throw Error(s+$+" cannot be zero: "+G);if(P.hasOwnProperty($="CRYPTO"))if(G=P[$],G===!!G)if(G)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))V=G;else throw V=!G,Error(s+"crypto unavailable");else V=G;else throw Error(s+$+" not true or false: "+G);if(P.hasOwnProperty($="MODULO_MODE")&&(G=P[$],S(G,0,9,$),Ee=G),P.hasOwnProperty($="POW_PRECISION")&&(G=P[$],S(G,0,p,$),Re=G),P.hasOwnProperty($="FORMAT"))if(G=P[$],typeof G=="object")fe=G;else throw Error(s+$+" not an object: "+G);if(P.hasOwnProperty($="ALPHABET"))if(G=P[$],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))Me=G.slice(0,10)=="0123456789",Ge=G;else throw Error(s+$+" invalid: "+G)}else throw Error(s+"Object expected: "+P);return{DECIMAL_PLACES:B,ROUNDING_MODE:U,EXPONENTIAL_AT:[k,H],RANGE:[ie,j],CRYPTO:V,MODULO_MODE:Ee,POW_PRECISION:Re,FORMAT:fe,ALPHABET:Ge}},Ce.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!Ce.DEBUG)return!0;var $,G,ne=P.c,Y=P.e,te=P.s;e:if({}.toString.call(ne)=="[object Array]"){if((te===1||te===-1)&&Y>=-p&&Y<=p&&Y===i(Y)){if(ne[0]===0){if(Y===0&&ne.length===1)return!0;break e}if($=(Y+1)%u,$<1&&($+=u),String(ne[0]).length==$){for($=0;$<ne.length;$++)if(G=ne[$],G<0||G>=a||G!==i(G))break e;if(G!==0)return!0}}}else if(ne===null&&Y===null&&(te===null||te===1||te===-1))return!0;throw Error(s+"Invalid BigNumber: "+P)},Ce.maximum=Ce.max=function(){return _t(arguments,-1)},Ce.minimum=Ce.min=function(){return _t(arguments,1)},Ce.random=(function(){var P=9007199254740992,$=Math.random()*P&2097151?function(){return i(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var ne,Y,te,de,z,X=0,ue=[],se=new Ce(F);if(G==null?G=B:S(G,0,p),de=n(G/u),V)if(crypto.getRandomValues){for(ne=crypto.getRandomValues(new Uint32Array(de*=2));X<de;)z=ne[X]*131072+(ne[X+1]>>>11),z>=9e15?(Y=crypto.getRandomValues(new Uint32Array(2)),ne[X]=Y[0],ne[X+1]=Y[1]):(ue.push(z%1e14),X+=2);X=de/2}else if(crypto.randomBytes){for(ne=crypto.randomBytes(de*=7);X<de;)z=(ne[X]&31)*281474976710656+ne[X+1]*1099511627776+ne[X+2]*4294967296+ne[X+3]*16777216+(ne[X+4]<<16)+(ne[X+5]<<8)+ne[X+6],z>=9e15?crypto.randomBytes(7).copy(ne,X):(ue.push(z%1e14),X+=7);X=de/7}else throw V=!1,Error(s+"crypto unavailable");if(!V)for(;X<de;)z=$(),z<9e15&&(ue[X++]=z%1e14);for(de=ue[--X],G%=u,de&&G&&(z=l[u-G],ue[X]=i(de/z)*z);ue[X]===0;ue.pop(),X--);if(X<0)ue=[te=0];else{for(te=-1;ue[0]===0;ue.splice(0,1),te-=u);for(X=1,z=ue[0];z>=10;z/=10,X++);X<u&&(te-=u-X)}return se.e=te,se.c=ue,se}})(),Ce.sum=function(){for(var P=1,$=arguments,G=new Ce($[0]);P<$.length;)G=G.plus($[P++]);return G},R=(function(){var P="0123456789";function $(G,ne,Y,te){for(var de,z=[0],X,ue=0,se=G.length;ue<se;){for(X=z.length;X--;z[X]*=ne);for(z[0]+=te.indexOf(G.charAt(ue++)),de=0;de<z.length;de++)z[de]>Y-1&&(z[de+1]==null&&(z[de+1]=0),z[de+1]+=z[de]/Y|0,z[de]%=Y)}return z.reverse()}return function(G,ne,Y,te,de){var z,X,ue,se,Se,He,tt,zt,Nr=G.indexOf("."),Lr=B,Dt=U;for(Nr>=0&&(se=Re,Re=0,G=G.replace(".",""),zt=new Ce(ne),He=zt.pow(G.length-Nr),Re=se,zt.c=$(A(g(He.c),He.e,"0"),10,Y,P),zt.e=zt.c.length),tt=$(G,ne,Y,de?(z=Ge,P):(z=P,Ge)),ue=se=tt.length;tt[--se]==0;tt.pop());if(!tt[0])return z.charAt(0);if(Nr<0?--ue:(He.c=tt,He.e=ue,He.s=te,He=x(He,zt,Lr,Dt,Y),tt=He.c,Se=He.r,ue=He.e),X=ue+Lr+1,Nr=tt[X],se=Y/2,Se=Se||X<0||tt[X+1]!=null,Se=Dt<4?(Nr!=null||Se)&&(Dt==0||Dt==(He.s<0?3:2)):Nr>se||Nr==se&&(Dt==4||Se||Dt==6&&tt[X-1]&1||Dt==(He.s<0?8:7)),X<1||!tt[0])G=Se?A(z.charAt(1),-Lr,z.charAt(0)):z.charAt(0);else{if(tt.length=X,Se)for(--Y;++tt[--X]>Y;)tt[X]=0,X||(++ue,tt=[1].concat(tt));for(se=tt.length;!tt[--se];);for(Nr=0,G="";Nr<=se;G+=z.charAt(tt[Nr++]));G=A(G,ue,z.charAt(0))}return G}})(),x=(function(){function P(ne,Y,te){var de,z,X,ue,se=0,Se=ne.length,He=Y%d,tt=Y/d|0;for(ne=ne.slice();Se--;)X=ne[Se]%d,ue=ne[Se]/d|0,de=tt*X+ue*He,z=He*X+de%d*d+se,se=(z/te|0)+(de/d|0)+tt*ue,ne[Se]=z%te;return se&&(ne=[se].concat(ne)),ne}function $(ne,Y,te,de){var z,X;if(te!=de)X=te>de?1:-1;else for(z=X=0;z<te;z++)if(ne[z]!=Y[z]){X=ne[z]>Y[z]?1:-1;break}return X}function G(ne,Y,te,de){for(var z=0;te--;)ne[te]-=z,z=ne[te]<Y[te]?1:0,ne[te]=z*de+ne[te]-Y[te];for(;!ne[0]&&ne.length>1;ne.splice(0,1));}return function(ne,Y,te,de,z){var X,ue,se,Se,He,tt,zt,Nr,Lr,Dt,ur,Pn,Qc,ju,Z,oe,D,N=ne.s==Y.s?1:-1,K=ne.c,Q=Y.c;if(!K||!K[0]||!Q||!Q[0])return new Ce(!ne.s||!Y.s||(K?Q&&K[0]==Q[0]:!Q)?NaN:K&&K[0]==0||!Q?N*0:N/0);for(Nr=new Ce(N),Lr=Nr.c=[],ue=ne.e-Y.e,N=te+ue+1,z||(z=a,ue=h(ne.e/u)-h(Y.e/u),N=N/u|0),se=0;Q[se]==(K[se]||0);se++);if(Q[se]>(K[se]||0)&&ue--,N<0)Lr.push(1),Se=!0;else{for(ju=K.length,oe=Q.length,se=0,N+=2,He=i(z/(Q[0]+1)),He>1&&(Q=P(Q,He,z),K=P(K,He,z),oe=Q.length,ju=K.length),Qc=oe,Dt=K.slice(0,oe),ur=Dt.length;ur<oe;Dt[ur++]=0);D=Q.slice(),D=[0].concat(D),Z=Q[0],Q[1]>=z/2&&Z++;do{if(He=0,X=$(Q,Dt,oe,ur),X<0){if(Pn=Dt[0],oe!=ur&&(Pn=Pn*z+(Dt[1]||0)),He=i(Pn/Z),He>1)for(He>=z&&(He=z-1),tt=P(Q,He,z),zt=tt.length,ur=Dt.length;$(tt,Dt,zt,ur)==1;)He--,G(tt,oe<zt?D:Q,zt,z),zt=tt.length,X=1;else He==0&&(X=He=1),tt=Q.slice(),zt=tt.length;if(zt<ur&&(tt=[0].concat(tt)),G(Dt,tt,ur,z),ur=Dt.length,X==-1)for(;$(Q,Dt,oe,ur)<1;)He++,G(Dt,oe<ur?D:Q,ur,z),ur=Dt.length}else X===0&&(He++,Dt=[0]);Lr[se++]=He,Dt[0]?Dt[ur++]=K[Qc]||0:(Dt=[K[Qc]],ur=1)}while((Qc++<ju||Dt[0]!=null)&&N--);Se=Dt[0]!=null,Lr[0]||Lr.splice(0,1)}if(z==a){for(se=1,N=Lr[0];N>=10;N/=10,se++);Ei(Nr,te+(Nr.e=se+ue*u-1)+1,de,Se)}else Nr.e=ue,Nr.r=+Se;return Nr}})();function Rr(P,$,G,ne){var Y,te,de,z,X;if(G==null?G=U:S(G,0,8),!P.c)return P.toString();if(Y=P.c[0],de=P.e,$==null)X=g(P.c),X=ne==1||ne==2&&(de<=k||de>=H)?C(X,de):A(X,de,"0");else if(P=Ei(new Ce(P),$,G),te=P.e,X=g(P.c),z=X.length,ne==1||ne==2&&($<=te||te<=k)){for(;z<$;X+="0",z++);X=C(X,te)}else if($-=de+(ne===2&&te>de),X=A(X,te,"0"),te+1>z){if(--$>0)for(X+=".";$--;X+="0");}else if($+=te-z,$>0)for(te+1==z&&(X+=".");$--;X+="0");return P.s<0&&Y?"-"+X:X}function _t(P,$){for(var G,ne,Y=1,te=new Ce(P[0]);Y<P.length;Y++)ne=new Ce(P[Y]),(!ne.s||(G=_(te,ne))===$||G===0&&te.s===$)&&(te=ne);return te}function ca(P,$,G){for(var ne=1,Y=$.length;!$[--Y];$.pop());for(Y=$[0];Y>=10;Y/=10,ne++);return(G=ne+G*u-1)>j?P.c=P.e=null:G<ie?P.c=[P.e=0]:(P.e=G,P.c=$),P}M=(function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,G=/^\.([^.]+)$/,ne=/^-?(Infinity|NaN)$/,Y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(te,de,z,X){var ue,se=z?de:de.replace(Y,"");if(ne.test(se))te.s=isNaN(se)?null:se<0?-1:1;else{if(!z&&(se=se.replace(P,function(Se,He,tt){return ue=(tt=tt.toLowerCase())=="x"?16:tt=="b"?2:8,!X||X==ue?He:Se}),X&&(ue=X,se=se.replace($,"$1").replace(G,"0.$1")),de!=se))return new Ce(se,ue);if(Ce.DEBUG)throw Error(s+"Not a"+(X?" base "+X:"")+" number: "+de);te.s=null}te.c=te.e=null}})();function Ei(P,$,G,ne){var Y,te,de,z,X,ue,se,Se=P.c,He=l;if(Se){e:{for(Y=1,z=Se[0];z>=10;z/=10,Y++);if(te=$-Y,te<0)te+=u,de=$,X=Se[ue=0],se=i(X/He[Y-de-1]%10);else if(ue=n((te+1)/u),ue>=Se.length)if(ne){for(;Se.length<=ue;Se.push(0));X=se=0,Y=1,te%=u,de=te-u+1}else break e;else{for(X=z=Se[ue],Y=1;z>=10;z/=10,Y++);te%=u,de=te-u+Y,se=de<0?0:i(X/He[Y-de-1]%10)}if(ne=ne||$<0||Se[ue+1]!=null||(de<0?X:X%He[Y-de-1]),ne=G<4?(se||ne)&&(G==0||G==(P.s<0?3:2)):se>5||se==5&&(G==4||ne||G==6&&(te>0?de>0?X/He[Y-de]:0:Se[ue-1])%10&1||G==(P.s<0?8:7)),$<1||!Se[0])return Se.length=0,ne?($-=P.e+1,Se[0]=He[(u-$%u)%u],P.e=-$||0):Se[0]=P.e=0,P;if(te==0?(Se.length=ue,z=1,ue--):(Se.length=ue+1,z=He[u-te],Se[ue]=de>0?i(X/He[Y-de]%He[de])*z:0),ne)for(;;)if(ue==0){for(te=1,de=Se[0];de>=10;de/=10,te++);for(de=Se[0]+=z,z=1;de>=10;de/=10,z++);te!=z&&(P.e++,Se[0]==a&&(Se[0]=1));break}else{if(Se[ue]+=z,Se[ue]!=a)break;Se[ue--]=0,z=1}for(te=Se.length;Se[--te]===0;Se.pop());}P.e>j?P.c=P.e=null:P.e<ie&&(P.c=[P.e=0])}return P}function tr(P){var $,G=P.e;return G===null?P.toString():($=g(P.c),$=G<=k||G>=H?C($,G):A($,G,"0"),P.s<0?"-"+$:$)}return I.absoluteValue=I.abs=function(){var P=new Ce(this);return P.s<0&&(P.s=1),P},I.comparedTo=function(P,$){return _(this,new Ce(P,$))},I.decimalPlaces=I.dp=function(P,$){var G,ne,Y,te=this;if(P!=null)return S(P,0,p),$==null?$=U:S($,0,8),Ei(new Ce(te),P+te.e+1,$);if(!(G=te.c))return null;if(ne=((Y=G.length-1)-h(this.e/u))*u,Y=G[Y])for(;Y%10==0;Y/=10,ne--);return ne<0&&(ne=0),ne},I.dividedBy=I.div=function(P,$){return x(this,new Ce(P,$),B,U)},I.dividedToIntegerBy=I.idiv=function(P,$){return x(this,new Ce(P,$),0,1)},I.exponentiatedBy=I.pow=function(P,$){var G,ne,Y,te,de,z,X,ue,se,Se=this;if(P=new Ce(P),P.c&&!P.isInteger())throw Error(s+"Exponent not an integer: "+tr(P));if($!=null&&($=new Ce($)),z=P.e>14,!Se.c||!Se.c[0]||Se.c[0]==1&&!Se.e&&Se.c.length==1||!P.c||!P.c[0])return se=new Ce(Math.pow(+tr(Se),z?P.s*(2-w(P)):+tr(P))),$?se.mod($):se;if(X=P.s<0,$){if($.c?!$.c[0]:!$.s)return new Ce(NaN);ne=!X&&Se.isInteger()&&$.isInteger(),ne&&(Se=Se.mod($))}else{if(P.e>9&&(Se.e>0||Se.e<-1||(Se.e==0?Se.c[0]>1||z&&Se.c[1]>=24e7:Se.c[0]<8e13||z&&Se.c[0]<=9999975e7)))return te=Se.s<0&&w(P)?-0:0,Se.e>-1&&(te=1/te),new Ce(X?1/te:te);Re&&(te=n(Re/u+2))}for(z?(G=new Ce(.5),X&&(P.s=1),ue=w(P)):(Y=Math.abs(+tr(P)),ue=Y%2),se=new Ce(F);;){if(ue){if(se=se.times(Se),!se.c)break;te?se.c.length>te&&(se.c.length=te):ne&&(se=se.mod($))}if(Y){if(Y=i(Y/2),Y===0)break;ue=Y%2}else if(P=P.times(G),Ei(P,P.e+1,1),P.e>14)ue=w(P);else{if(Y=+tr(P),Y===0)break;ue=Y%2}Se=Se.times(Se),te?Se.c&&Se.c.length>te&&(Se.c.length=te):ne&&(Se=Se.mod($))}return ne?se:(X&&(se=F.div(se)),$?se.mod($):te?Ei(se,Re,U,de):se)},I.integerValue=function(P){var $=new Ce(this);return P==null?P=U:S(P,0,8),Ei($,$.e+1,P)},I.isEqualTo=I.eq=function(P,$){return _(this,new Ce(P,$))===0},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(P,$){return _(this,new Ce(P,$))>0},I.isGreaterThanOrEqualTo=I.gte=function(P,$){return($=_(this,new Ce(P,$)))===1||$===0},I.isInteger=function(){return!!this.c&&h(this.e/u)>this.c.length-2},I.isLessThan=I.lt=function(P,$){return _(this,new Ce(P,$))<0},I.isLessThanOrEqualTo=I.lte=function(P,$){return($=_(this,new Ce(P,$)))===-1||$===0},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&this.c[0]==0},I.minus=function(P,$){var G,ne,Y,te,de=this,z=de.s;if(P=new Ce(P,$),$=P.s,!z||!$)return new Ce(NaN);if(z!=$)return P.s=-$,de.plus(P);var X=de.e/u,ue=P.e/u,se=de.c,Se=P.c;if(!X||!ue){if(!se||!Se)return se?(P.s=-$,P):new Ce(Se?de:NaN);if(!se[0]||!Se[0])return Se[0]?(P.s=-$,P):new Ce(se[0]?de:U==3?-0:0)}if(X=h(X),ue=h(ue),se=se.slice(),z=X-ue){for((te=z<0)?(z=-z,Y=se):(ue=X,Y=Se),Y.reverse(),$=z;$--;Y.push(0));Y.reverse()}else for(ne=(te=(z=se.length)<($=Se.length))?z:$,z=$=0;$<ne;$++)if(se[$]!=Se[$]){te=se[$]<Se[$];break}if(te&&(Y=se,se=Se,Se=Y,P.s=-P.s),$=(ne=Se.length)-(G=se.length),$>0)for(;$--;se[G++]=0);for($=a-1;ne>z;){if(se[--ne]<Se[ne]){for(G=ne;G&&!se[--G];se[G]=$);--se[G],se[ne]+=a}se[ne]-=Se[ne]}for(;se[0]==0;se.splice(0,1),--ue);return se[0]?ca(P,se,ue):(P.s=U==3?-1:1,P.c=[P.e=0],P)},I.modulo=I.mod=function(P,$){var G,ne,Y=this;return P=new Ce(P,$),!Y.c||!P.s||P.c&&!P.c[0]?new Ce(NaN):!P.c||Y.c&&!Y.c[0]?new Ce(Y):(Ee==9?(ne=P.s,P.s=1,G=x(Y,P,0,3),P.s=ne,G.s*=ne):G=x(Y,P,0,Ee),P=Y.minus(G.times(P)),!P.c[0]&&Ee==1&&(P.s=Y.s),P)},I.multipliedBy=I.times=function(P,$){var G,ne,Y,te,de,z,X,ue,se,Se,He,tt,zt,Nr,Lr,Dt=this,ur=Dt.c,Pn=(P=new Ce(P,$)).c;if(!ur||!Pn||!ur[0]||!Pn[0])return!Dt.s||!P.s||ur&&!ur[0]&&!Pn||Pn&&!Pn[0]&&!ur?P.c=P.e=P.s=null:(P.s*=Dt.s,!ur||!Pn?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(ne=h(Dt.e/u)+h(P.e/u),P.s*=Dt.s,X=ur.length,Se=Pn.length,X<Se&&(zt=ur,ur=Pn,Pn=zt,Y=X,X=Se,Se=Y),Y=X+Se,zt=[];Y--;zt.push(0));for(Nr=a,Lr=d,Y=Se;--Y>=0;){for(G=0,He=Pn[Y]%Lr,tt=Pn[Y]/Lr|0,de=X,te=Y+de;te>Y;)ue=ur[--de]%Lr,se=ur[de]/Lr|0,z=tt*ue+se*He,ue=He*ue+z%Lr*Lr+zt[te]+G,G=(ue/Nr|0)+(z/Lr|0)+tt*se,zt[te--]=ue%Nr;zt[te]=G}return G?++ne:zt.splice(0,1),ca(P,zt,ne)},I.negated=function(){var P=new Ce(this);return P.s=-P.s||null,P},I.plus=function(P,$){var G,ne=this,Y=ne.s;if(P=new Ce(P,$),$=P.s,!Y||!$)return new Ce(NaN);if(Y!=$)return P.s=-$,ne.minus(P);var te=ne.e/u,de=P.e/u,z=ne.c,X=P.c;if(!te||!de){if(!z||!X)return new Ce(Y/0);if(!z[0]||!X[0])return X[0]?P:new Ce(z[0]?ne:Y*0)}if(te=h(te),de=h(de),z=z.slice(),Y=te-de){for(Y>0?(de=te,G=X):(Y=-Y,G=z),G.reverse();Y--;G.push(0));G.reverse()}for(Y=z.length,$=X.length,Y-$<0&&(G=X,X=z,z=G,$=Y),Y=0;$;)Y=(z[--$]=z[$]+X[$]+Y)/a|0,z[$]=a===z[$]?0:z[$]%a;return Y&&(z=[Y].concat(z),++de),ca(P,z,de)},I.precision=I.sd=function(P,$){var G,ne,Y,te=this;if(P!=null&&P!==!!P)return S(P,1,p),$==null?$=U:S($,0,8),Ei(new Ce(te),P,$);if(!(G=te.c))return null;if(Y=G.length-1,ne=Y*u+1,Y=G[Y]){for(;Y%10==0;Y/=10,ne--);for(Y=G[0];Y>=10;Y/=10,ne++);}return P&&te.e+1>ne&&(ne=te.e+1),ne},I.shiftedBy=function(P){return S(P,-c,c),this.times("1e"+P)},I.squareRoot=I.sqrt=function(){var P,$,G,ne,Y,te=this,de=te.c,z=te.s,X=te.e,ue=B+4,se=new Ce("0.5");if(z!==1||!de||!de[0])return new Ce(!z||z<0&&(!de||de[0])?NaN:de?te:1/0);if(z=Math.sqrt(+tr(te)),z==0||z==1/0?($=g(de),($.length+X)%2==0&&($+="0"),z=Math.sqrt(+$),X=h((X+1)/2)-(X<0||X%2),z==1/0?$="5e"+X:($=z.toExponential(),$=$.slice(0,$.indexOf("e")+1)+X),G=new Ce($)):G=new Ce(z+""),G.c[0]){for(X=G.e,z=X+ue,z<3&&(z=0);;)if(Y=G,G=se.times(Y.plus(x(te,Y,ue,1))),g(Y.c).slice(0,z)===($=g(G.c)).slice(0,z))if(G.e<X&&--z,$=$.slice(z-3,z+1),$=="9999"||!ne&&$=="4999"){if(!ne&&(Ei(Y,Y.e+B+2,0),Y.times(Y).eq(te))){G=Y;break}ue+=4,z+=4,ne=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(Ei(G,G.e+B+2,1),P=!G.times(G).eq(te));break}}return Ei(G,G.e+B+1,U,P)},I.toExponential=function(P,$){return P!=null&&(S(P,0,p),P++),Rr(this,P,$,1)},I.toFixed=function(P,$){return P!=null&&(S(P,0,p),P=P+this.e+1),Rr(this,P,$)},I.toFormat=function(P,$,G){var ne,Y=this;if(G==null)P!=null&&$&&typeof $=="object"?(G=$,$=null):P&&typeof P=="object"?(G=P,P=$=null):G=fe;else if(typeof G!="object")throw Error(s+"Argument not an object: "+G);if(ne=Y.toFixed(P,$),Y.c){var te,de=ne.split("."),z=+G.groupSize,X=+G.secondaryGroupSize,ue=G.groupSeparator||"",se=de[0],Se=de[1],He=Y.s<0,tt=He?se.slice(1):se,zt=tt.length;if(X&&(te=z,z=X,X=te,zt-=te),z>0&&zt>0){for(te=zt%z||z,se=tt.substr(0,te);te<zt;te+=z)se+=ue+tt.substr(te,z);X>0&&(se+=ue+tt.slice(te)),He&&(se="-"+se)}ne=Se?se+(G.decimalSeparator||"")+((X=+G.fractionGroupSize)?Se.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):Se):se}return(G.prefix||"")+ne+(G.suffix||"")},I.toFraction=function(P){var $,G,ne,Y,te,de,z,X,ue,se,Se,He,tt=this,zt=tt.c;if(P!=null&&(z=new Ce(P),!z.isInteger()&&(z.c||z.s!==1)||z.lt(F)))throw Error(s+"Argument "+(z.isInteger()?"out of range: ":"not an integer: ")+tr(z));if(!zt)return new Ce(tt);for($=new Ce(F),ue=G=new Ce(F),ne=X=new Ce(F),He=g(zt),te=$.e=He.length-tt.e-1,$.c[0]=l[(de=te%u)<0?u+de:de],P=!P||z.comparedTo($)>0?te>0?$:ue:z,de=j,j=1/0,z=new Ce(He),X.c[0]=0;se=x(z,$,0,1),Y=G.plus(se.times(ne)),Y.comparedTo(P)!=1;)G=ne,ne=Y,ue=X.plus(se.times(Y=ue)),X=Y,$=z.minus(se.times(Y=$)),z=Y;return Y=x(P.minus(G),ne,0,1),X=X.plus(Y.times(ue)),G=G.plus(Y.times(ne)),X.s=ue.s=tt.s,te=te*2,Se=x(ue,ne,te,U).minus(tt).abs().comparedTo(x(X,G,te,U).minus(tt).abs())<1?[ue,ne]:[X,G],j=de,Se},I.toNumber=function(){return+tr(this)},I.toPrecision=function(P,$){return P!=null&&S(P,1,p),Rr(this,P,$,2)},I.toString=function(P){var $,G=this,ne=G.s,Y=G.e;return Y===null?ne?($="Infinity",ne<0&&($="-"+$)):$="NaN":(P==null?$=Y<=k||Y>=H?C(g(G.c),Y):A(g(G.c),Y,"0"):P===10&&Me?(G=Ei(new Ce(G),B+Y+1,U),$=A(g(G.c),G.e,"0")):(S(P,2,Ge.length,"Base"),$=R(A(g(G.c),Y,"0"),10,P,ne,!0)),ne<0&&G.c[0]&&($="-"+$)),$},I.valueOf=I.toJSON=function(){return tr(this)},I._isBigNumber=!0,O!=null&&Ce.set(O),Ce}function h(O){var x=O|0;return O>0||O===x?x:x-1}function g(O){for(var x,R,M=1,I=O.length,F=O[0]+"";M<I;){for(x=O[M++]+"",R=u-x.length;R--;x="0"+x);F+=x}for(I=F.length;F.charCodeAt(--I)===48;);return F.slice(0,I+1||1)}function _(O,x){var R,M,I=O.c,F=x.c,B=O.s,U=x.s,k=O.e,H=x.e;if(!B||!U)return null;if(R=I&&!I[0],M=F&&!F[0],R||M)return R?M?0:-U:B;if(B!=U)return B;if(R=B<0,M=k==H,!I||!F)return M?0:!I^R?1:-1;if(!M)return k>H^R?1:-1;for(U=(k=I.length)<(H=F.length)?k:H,B=0;B<U;B++)if(I[B]!=F[B])return I[B]>F[B]^R?1:-1;return k==H?0:k>H^R?1:-1}function S(O,x,R,M){if(O<x||O>R||O!==i(O))throw Error(s+(M||"Argument")+(typeof O=="number"?O<x||O>R?" out of range: ":" not an integer: ":" not a primitive number: ")+String(O))}function w(O){var x=O.c.length-1;return h(O.e/u)==x&&O.c[x]%2!=0}function C(O,x){return(O.length>1?O.charAt(0)+"."+O.slice(1):O)+(x<0?"e":"e+")+x}function A(O,x,R){var M,I;if(x<0){for(I=R+".";++x;I+=R);O=I+O}else if(M=O.length,++x>M){for(I=R,x-=M;--x;I+=R);O+=I}else x<M&&(O=O.slice(0,x)+"."+O.slice(x));return O}e=f(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof MC<"u"&&MC.exports?MC.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(Che)});var Ihe=m((R0r,xhe)=>{var The=GK(),Ohe=xhe.exports;(function(){"use strict";function t(c){return c<10?"0"+c:c}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function a(c){return r.lastIndex=0,r.test(c)?'"'+c.replace(r,function(l){var d=s[l];return typeof d=="string"?d:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function u(c,l){var d,p,f,h,g=n,_,S=l[c],w=S!=null&&(S instanceof The||The.isBigNumber(S));switch(S&&typeof S=="object"&&typeof S.toJSON=="function"&&(S=S.toJSON(c)),typeof o=="function"&&(S=o.call(l,c,S)),typeof S){case"string":return w?S:a(S);case"number":return isFinite(S)?String(S):"null";case"boolean":case"null":case"bigint":return String(S);case"object":if(!S)return"null";if(n+=i,_=[],Object.prototype.toString.apply(S)==="[object Array]"){for(h=S.length,d=0;d<h;d+=1)_[d]=u(d,S)||"null";return f=_.length===0?"[]":n?`[
`+n+_.join(`,
`+n)+`
`+g+"]":"["+_.join(",")+"]",n=g,f}if(o&&typeof o=="object")for(h=o.length,d=0;d<h;d+=1)typeof o[d]=="string"&&(p=o[d],f=u(p,S),f&&_.push(a(p)+(n?": ":":")+f));else Object.keys(S).forEach(function(C){var A=u(C,S);A&&_.push(a(C)+(n?": ":":")+A)});return f=_.length===0?"{}":n?`{
`+n+_.join(`,
`+n)+`
`+g+"}":"{"+_.join(",")+"}",n=g,f}}typeof Ohe.stringify!="function"&&(Ohe.stringify=function(c,l,d){var p;if(n="",i="",typeof d=="number")for(p=0;p<d;p+=1)i+=" ";else typeof d=="string"&&(i=d);if(o=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return u("",{"":c})})})()});var Dhe=m((D0r,Rhe)=>{var PC=null,slt=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,olt=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,alt=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},s,o=function(g){throw{name:"SyntaxError",message:g,at:r,text:s}},a=function(g){return g&&g!==n&&o("Expected '"+g+"' instead of '"+n+"'"),n=s.charAt(r),r+=1,n},u=function(){var g,_="";for(n==="-"&&(_="-",a("-"));n>="0"&&n<="9";)_+=n,a();if(n===".")for(_+=".";a()&&n>="0"&&n<="9";)_+=n;if(n==="e"||n==="E")for(_+=n,a(),(n==="-"||n==="+")&&(_+=n,a());n>="0"&&n<="9";)_+=n,a();if(g=+_,!isFinite(g))o("Bad number");else return PC==null&&(PC=GK()),_.length>15?e.storeAsString?_:e.useNativeBigInt?BigInt(_):new PC(_):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(g):new PC(g):g},c=function(){var g,_,S="",w;if(n==='"')for(var C=r;a();){if(n==='"')return r-1>C&&(S+=s.substring(C,r-1)),a(),S;if(n==="\\"){if(r-1>C&&(S+=s.substring(C,r-1)),a(),n==="u"){for(w=0,_=0;_<4&&(g=parseInt(a(),16),!!isFinite(g));_+=1)w=w*16+g;S+=String.fromCharCode(w)}else if(typeof i[n]=="string")S+=i[n];else break;C=r}}o("Bad string")},l=function(){for(;n&&n<=" ";)a()},d=function(){switch(n){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+n+"'")},p,f=function(){var g=[];if(n==="["){if(a("["),l(),n==="]")return a("]"),g;for(;n;){if(g.push(p()),l(),n==="]")return a("]"),g;a(","),l()}}o("Bad array")},h=function(){var g,_=Object.create(null);if(n==="{"){if(a("{"),l(),n==="}")return a("}"),_;for(;n;){if(g=c(),l(),a(":"),e.strict===!0&&Object.hasOwnProperty.call(_,g)&&o('Duplicate key "'+g+'"'),slt.test(g)===!0?e.protoAction==="error"?o("Object contains forbidden prototype property"):e.protoAction==="ignore"?p():_[g]=p():olt.test(g)===!0?e.constructorAction==="error"?o("Object contains forbidden constructor property"):e.constructorAction==="ignore"?p():_[g]=p():_[g]=p(),l(),n==="}")return a("}"),_;a(","),l()}}o("Bad object")};return p=function(){switch(l(),n){case"{":return h();case"[":return f();case'"':return c();case"-":return u();default:return n>="0"&&n<="9"?u():d()}},function(g,_){var S;return s=g+"",r=0,n=" ",S=p(),l(),n&&o("Syntax error"),typeof _=="function"?(function w(C,A){var O,x,R=C[A];return R&&typeof R=="object"&&Object.keys(R).forEach(function(M){x=w(R,M),x!==void 0?R[M]=x:delete R[M]}),_.call(C,A,R)})({"":S},""):S}};Rhe.exports=alt});var HK=m((k0r,NC)=>{var khe=Ihe().stringify,Mhe=Dhe();NC.exports=function(t){return{parse:Mhe(t),stringify:khe}};NC.exports.parse=Mhe();NC.exports.stringify=khe});var zK=m(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.detectGCPResidency=ao.isGoogleComputeEngine=ao.isGoogleComputeEngineMACAddress=ao.isGoogleComputeEngineLinux=ao.isGoogleCloudServerless=ao.GCE_LINUX_BIOS_PATHS=void 0;var Phe=require("fs"),Nhe=require("os");ao.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var ult=/^42:01/;function Fhe(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}ao.isGoogleCloudServerless=Fhe;function Bhe(){if((0,Nhe.platform)()!=="linux")return!1;try{(0,Phe.statSync)(ao.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,Phe.readFileSync)(ao.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}ao.isGoogleComputeEngineLinux=Bhe;function qhe(){let t=(0,Nhe.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(ult.test(r))return!0}return!1}ao.isGoogleComputeEngineMACAddress=qhe;function Lhe(){return Bhe()||qhe()}ao.isGoogleComputeEngine=Lhe;function clt(){return Fhe()||Lhe()}ao.detectGCPResidency=clt});var Khe=m(mt=>{"use strict";var llt=mt&&mt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),dlt=mt&&mt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&llt(e,t,r)};Object.defineProperty(mt,"__esModule",{value:!0});mt.requestTimeout=mt.setGCPResidency=mt.getGCPResidency=mt.gcpResidencyCache=mt.resetIsAvailableCache=mt.isAvailable=mt.project=mt.instance=mt.METADATA_SERVER_DETECTION=mt.HEADERS=mt.HEADER_VALUE=mt.HEADER_NAME=mt.SECONDARY_HOST_ADDRESS=mt.HOST_ADDRESS=mt.BASE_PATH=void 0;var WK=Ahe(),plt=HK(),flt=zK();mt.BASE_PATH="/computeMetadata/v1";mt.HOST_ADDRESS="http://169.254.169.254";mt.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";mt.HEADER_NAME="Metadata-Flavor";mt.HEADER_VALUE="Google";mt.HEADERS=Object.freeze({[mt.HEADER_NAME]:mt.HEADER_VALUE});mt.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function JK(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||mt.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(mt.BASE_PATH,t).href}function hlt(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function YK(t,e,r=3,n=!1){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),hlt(e);try{let o=await(n?mlt:WK.request)({url:`${JK()}/${t}${i}`,headers:Object.assign({},mt.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:$he()});if(o.headers[mt.HEADER_NAME.toLowerCase()]!==mt.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${mt.HEADER_NAME} header.`);if(!o.data)throw new Error("Invalid response from the metadata service");if(typeof o.data=="string")try{return plt.parse(o.data)}catch{}return o.data}catch(s){let o=s;throw o.response&&o.response.status!==200&&(o.message=`Unsuccessful response status code. ${o.message}`),s}}async function mlt(t){let e={...t,url:t.url.replace(JK(),JK(mt.SECONDARY_HOST_ADDRESS))},r=!1,n=(0,WK.request)(t).then(s=>(r=!0,s)).catch(s=>{if(r)return i;throw r=!0,s}),i=(0,WK.request)(e).then(s=>(r=!0,s)).catch(s=>{if(r)return n;throw r=!0,s});return Promise.race([n,i])}function ylt(t){return YK("instance",t)}mt.instance=ylt;function glt(t){return YK("project",t)}mt.project=glt;function Elt(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var FC;async function blt(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in mt.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(mt.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return QK();case"ping-only":}}try{return FC===void 0&&(FC=YK("instance",void 0,Elt(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await FC,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}mt.isAvailable=blt;function _lt(){FC=void 0}mt.resetIsAvailableCache=_lt;mt.gcpResidencyCache=null;function QK(){return mt.gcpResidencyCache===null&&jhe(),mt.gcpResidencyCache}mt.getGCPResidency=QK;function jhe(t=null){mt.gcpResidencyCache=t!==null?t:(0,flt.detectGCPResidency)()}mt.setGCPResidency=jhe;function $he(){return QK()?0:3e3}mt.requestTimeout=$he;dlt(zK(),mt)});var yl=m(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.aws4=void 0;ml.getKerberos=vlt;ml.getZstdLibrary=Slt;ml.getAwsCredentialProvider=wlt;ml.getGcpMetadata=Alt;ml.getSnappy=Clt;ml.getSocks=Tlt;ml.getMongoDBClientEncryption=xlt;var L1=Ne();function M3(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function vlt(){let t;try{t=require("kerberos")}catch(e){t=M3(new L1.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Slt(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=M3(new L1.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function wlt(){try{return require("@aws-sdk/credential-providers")}catch(t){return M3(new L1.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Alt(){try{return Khe()}catch(t){return M3(new L1.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function Clt(){try{return require("snappy")}catch(t){return{kModuleError:new L1.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function Tlt(){try{return require("socks")}catch(t){return{kModuleError:new L1.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}ml.aws4=Olt();function Olt(){let t;try{t=require("aws4")}catch(e){t=M3(new L1.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function xlt(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new L1.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var j1=m(f6=>{"use strict";Object.defineProperty(f6,"__esModule",{value:!0});f6.AuthProvider=f6.AuthContext=void 0;var Ilt=Ne(),XK=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};f6.AuthContext=XK;var ZK=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Ilt.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};f6.AuthProvider=ZK});var BC=m(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.GSSAPI=gl.GSSAPICanonicalizationValue=void 0;gl.performGSSAPICanonicalizeHostName=Ghe;gl.resolveCname=nU;var tU=require("dns"),Rlt=yl(),Uhe=Ne(),Dlt=et(),klt=j1();gl.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function eU(t,e){return await t.command((0,Dlt.ns)("$external.$cmd"),e)}var P3,rU=class extends klt.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new Uhe.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:i}=n,s=await Mlt(e),o=await s.step(""),a=await eU(r,Plt(o)),u=await Vhe(s,10,a.payload),c=await eU(r,Nlt(u,a.conversationId)),l=await Flt(s,i,c.payload);await eU(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};gl.GSSAPI=rU;async function Mlt(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new Uhe.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(Blt(),"kModuleError"in P3)throw P3.kModuleError;let{initializeClient:n}=P3,{username:i,password:s}=r,o=r.mechanismProperties,a=o.SERVICE_NAME??"mongodb",u=await Ghe(e.host,o),c={};s!=null&&Object.assign(c,{user:i,password:s});let l=o.SERVICE_HOST??u,d=`${a}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(d=`${d}@${o.SERVICE_REALM}`),await n(d,c)}function Plt(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function Nlt(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function Vhe(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await Vhe(t,e-1,r)}}async function Flt(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function Ghe(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===gl.GSSAPICanonicalizationValue.none)return t;if(r===gl.GSSAPICanonicalizationValue.on||r===gl.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await tU.promises.lookup(t);try{let i=await tU.promises.resolvePtr(n);return i.length>0?i[0]:t}catch{return await nU(t)}}else return await nU(t)}async function nU(t){try{let e=await tU.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function Blt(){P3||(P3=(0,Rlt.getKerberos)())}});var Sd=m(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.AUTH_MECHS_AUTH_SRC_EXTERNAL=vd.AuthMechanism=void 0;vd.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});vd.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([vd.AuthMechanism.MONGODB_GSSAPI,vd.AuthMechanism.MONGODB_AWS,vd.AuthMechanism.MONGODB_OIDC,vd.AuthMechanism.MONGODB_X509])});var qC=m(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.MongoCredentials=T0.DEFAULT_ALLOWED_HOSTS=void 0;var Zu=Ne(),qlt=BC(),Bo=Sd();function Llt(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(Bo.AuthMechanism.MONGODB_SCRAM_SHA256)?Bo.AuthMechanism.MONGODB_SCRAM_SHA256:Bo.AuthMechanism.MONGODB_SCRAM_SHA1:Bo.AuthMechanism.MONGODB_SCRAM_SHA256}var Hhe=["test","azure","gcp","k8s"],zhe="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";T0.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var jlt="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",iU=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||Bo.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===Bo.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:T0.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:Llt(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===Bo.AuthMechanism.MONGODB_GSSAPI||this.mechanism===Bo.AuthMechanism.MONGODB_PLAIN||this.mechanism===Bo.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===Bo.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Zu.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===Bo.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Zu.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Zu.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Zu.MongoInvalidArgumentError(jlt);if(this.mechanismProperties.ENVIRONMENT&&!Hhe.includes(this.mechanismProperties.ENVIRONMENT))throw new Zu.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${Hhe.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Zu.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Zu.MongoInvalidArgumentError(zhe);for(let n of r)if(typeof n!="string")throw new Zu.MongoInvalidArgumentError(zhe)}}if(Bo.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Zu.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===Bo.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Zu.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===Bo.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Zu.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(qlt.GSSAPICanonicalizationValue).includes(e))throw new Zu.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??Bo.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};T0.MongoCredentials=iU});var Whe=m((j0r,$lt)=>{$lt.exports={name:"mongodb",version:"6.20.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var sU=m($1=>{"use strict";Object.defineProperty($1,"__esModule",{value:!0});$1.LimitedSizeDocument=void 0;$1.isDriverInfoEqual=Vlt;$1.makeClientMetadata=Glt;$1.addContainerMetadata=zlt;$1.getFAASEnv=Qhe;var N3=require("os"),F3=require("process"),h6=gr(),Jhe=Ne(),Klt=et(),Ult=Whe().version;function Vlt(t,e){let r=(n,i)=>(n||=void 0,i||=void 0,n===i);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var B3=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=h6.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return h6.BSON.deserialize(h6.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};$1.LimitedSizeDocument=B3;function Glt(t,{appName:e=""}){let r=new B3(512);if(e.length>0){let a=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:a})}let n={name:"nodejs",version:Ult};for(let{name:a="",version:u=""}of t)a.length>0&&(n.name=`${n.name}|${a}`),u.length>0&&(n.version=`${n.version}|${u}`);if(!r.ifItFitsItSits("driver",n))throw new Jhe.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let i=Wlt();for(let{platform:a=""}of t)a.length>0&&(i=`${i}|${a}`);if(!r.ifItFitsItSits("platform",i))throw new Jhe.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let s=new Map().set("name",F3.platform).set("architecture",F3.arch).set("version",N3.release()).set("type",N3.type());if(!r.ifItFitsItSits("os",s)){for(let a of s.keys())if(s.delete(a),s.size===0||r.ifItFitsItSits("os",s))break}let o=Qhe();if(o!=null&&!r.ifItFitsItSits("env",o)){for(let a of o.keys())if(o.delete(a),o.size===0||r.ifItFitsItSits("env",o))break}return r.toObject()}var Yhe;async function Hlt(){let t={};Yhe??=(0,Klt.fileIsAccessible)("/.dockerenv");let e=await Yhe,{KUBERNETES_SERVICE_HOST:r=""}=F3.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function zlt(t){let e=await Hlt();if(Object.keys(e).length===0)return t;let r=new B3(512),n={...t?.env,container:e};for(let[i,s]of Object.entries(t))i!=="env"?r.ifItFitsItSits(i,s):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",s);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function Qhe(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:i="",VERCEL:s="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:a="",FUNCTION_MEMORY_MB:u="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:d=""}=F3.env,p=t.startsWith("AWS_Lambda_")||e.length>0,f=r.length>0,h=n.length>0||i.length>0,g=s.length>0,_=new Map;return g&&!(f||h)?(d.length>0&&_.set("region",d),_.set("name","vercel"),_):p&&!(f||h||g)?(a.length>0&&_.set("region",a),o.length>0&&Number.isInteger(+o)&&_.set("memory_mb",new h6.Int32(o)),_.set("name","aws.lambda"),_):f&&!(h||p||g)?(_.set("name","azure.func"),_):h&&!(f||p||g)?(c.length>0&&_.set("region",c),u.length>0&&Number.isInteger(+u)&&_.set("memory_mb",new h6.Int32(u)),l.length>0&&Number.isInteger(+l)&&_.set("timeout_sec",new h6.Int32(l)),_.set("name","gcp.func"),_):null}function Wlt(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${N3.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${N3.endianness()}`:`Node.js ${F3.version}, ${N3.endianness()}`}});var jC=m($r=>{"use strict";function Gr(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function g6(t,e){if(typeof t=="bigint")throw Gr(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function Zhe(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?q3(Math.floor(t)):q3(Math.round(t))}function LC(t){return q3(Math.trunc(t))}function Xhe(t){return t<0?-1:1}function Jlt(t,e){let r=t%e;return Xhe(e)!==Xhe(r)?r+e:r}function q3(t){return t===0?0:t}function E6(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let i=2**t,s=2**(t-1);return(o,a={})=>{let u=g6(o,a);if(u=q3(u),a.enforceRange){if(!Number.isFinite(u))throw Gr(TypeError,"is not a finite number",a);if(u=LC(u),u<r||u>n)throw Gr(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,a);return u}return!Number.isNaN(u)&&a.clamp?(u=Math.min(Math.max(u,r),n),u=Zhe(u),u):!Number.isFinite(u)||u===0?0:(u=LC(u),u>=r&&u<=n?u:(u=Jlt(u,i),!e&&u>=s?u-i:u))}}function eme(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,i=e?BigInt.asUintN:BigInt.asIntN;return(s,o={})=>{let a=g6(s,o);if(a=q3(a),o.enforceRange){if(!Number.isFinite(a))throw Gr(TypeError,"is not a finite number",o);if(a=LC(a),a<n||a>r)throw Gr(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return a}if(!Number.isNaN(a)&&o.clamp)return a=Math.min(Math.max(a,n),r),a=Zhe(a),a;if(!Number.isFinite(a)||a===0)return 0;let u=BigInt(LC(a));return u=i(t,u),Number(u)}}$r.any=t=>t;$r.undefined=()=>{};$r.boolean=t=>!!t;$r.byte=E6(8,{unsigned:!1});$r.octet=E6(8,{unsigned:!0});$r.short=E6(16,{unsigned:!1});$r["unsigned short"]=E6(16,{unsigned:!0});$r.long=E6(32,{unsigned:!1});$r["unsigned long"]=E6(32,{unsigned:!0});$r["long long"]=eme(64,{unsigned:!1});$r["unsigned long long"]=eme(64,{unsigned:!0});$r.double=(t,e={})=>{let r=g6(t,e);if(!Number.isFinite(r))throw Gr(TypeError,"is not a finite floating-point value",e);return r};$r["unrestricted double"]=(t,e={})=>g6(t,e);$r.float=(t,e={})=>{let r=g6(t,e);if(!Number.isFinite(r))throw Gr(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw Gr(TypeError,"is outside the range of a single-precision floating-point value",e);return n};$r["unrestricted float"]=(t,e={})=>{let r=g6(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};$r.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw Gr(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};$r.ByteString=(t,e={})=>{let r=$r.DOMString(t,e),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw Gr(TypeError,"is not a valid ByteString",e);return r};$r.USVString=(t,e={})=>{let r=$r.DOMString(t,e),n=r.length,i=[];for(let s=0;s<n;++s){let o=r.charCodeAt(s);if(o<55296||o>57343)i.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)i.push(String.fromCodePoint(65533));else if(s===n-1)i.push(String.fromCodePoint(65533));else{let a=r.charCodeAt(s+1);if(56320<=a&&a<=57343){let u=o&1023,c=a&1023;i.push(String.fromCodePoint(65536+1024*u+c)),++s}else i.push(String.fromCodePoint(65533))}}return i.join("")};$r.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw Gr(TypeError,"is not an object",e);return t};var Ylt=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,Qlt=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function oU(t){try{return Ylt.call(t),!0}catch{return!1}}function m6(t){try{return Qlt.call(t),!0}catch{return!1}}function y6(t){try{return new Uint8Array(t),!1}catch{return!0}}$r.ArrayBuffer=(t,e={})=>{if(!oU(t))throw e.allowShared&&!m6(t)?Gr(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):Gr(TypeError,"is not an ArrayBuffer",e);if(y6(t))throw Gr(TypeError,"is a detached ArrayBuffer",e);return t};var Xlt=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;$r.DataView=(t,e={})=>{try{Xlt.call(t)}catch{throw Gr(TypeError,"is not a DataView",e)}if(!e.allowShared&&m6(t.buffer))throw Gr(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(y6(t.buffer))throw Gr(TypeError,"is backed by a detached ArrayBuffer",e);return t};var Zlt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";$r[e]=(n,i={})=>{if(!ArrayBuffer.isView(n)||Zlt.call(n)!==e)throw Gr(TypeError,`is not ${r} ${e} object`,i);if(!i.allowShared&&m6(n.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",i);if(y6(n.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",i);return n}});$r.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw Gr(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&m6(t.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(y6(t.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",e);return t};$r.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&m6(t.buffer))throw Gr(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(y6(t.buffer))throw Gr(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!oU(t))throw Gr(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!m6(t)&&!oU(t))throw Gr(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(y6(t))throw Gr(TypeError,"is a detached ArrayBuffer",e);return t};$r.DOMTimeStamp=$r["unsigned long long"]});var KC=m((ame,ume)=>{"use strict";function edt(t){return typeof t=="object"&&t!==null||typeof t=="function"}var tme=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function tdt(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function rdt(t,e){let r=ime(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var rme=Symbol("wrapper"),nme=Symbol("impl"),b6=Symbol("SameObject caches"),$C=Symbol.for("[webidl2js] constructor registry"),ndt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function ime(t){if(tme(t,$C))return t[$C];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=ndt}return t[$C]=e,e}function idt(t,e,r){return t[b6]||(t[b6]=Object.create(null)),e in t[b6]||(t[b6][e]=r()),t[b6][e]}function sme(t){return t?t[rme]:null}function ome(t){return t?t[nme]:null}function sdt(t){let e=sme(t);return e||t}function odt(t){let e=ome(t);return e||t}var adt=Symbol("internal");function udt(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var cdt=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function ldt(t){try{return cdt.call(t),!0}catch{return!1}}function ddt([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var pdt=Symbol("supports property index"),fdt=Symbol("supported property indices"),hdt=Symbol("supports property name"),mdt=Symbol("supported property names"),ydt=Symbol("indexed property get"),gdt=Symbol("indexed property set new"),Edt=Symbol("indexed property set existing"),bdt=Symbol("named property get"),_dt=Symbol("named property set new"),vdt=Symbol("named property set existing"),Sdt=Symbol("named property delete"),wdt=Symbol("async iterator get the next iteration result"),Adt=Symbol("async iterator return steps"),Cdt=Symbol("async iterator initialization steps"),Tdt=Symbol("async iterator end of iteration");ume.exports=ame={isObject:edt,hasOwn:tme,define:tdt,newObjectInRealm:rdt,wrapperSymbol:rme,implSymbol:nme,getSameObject:idt,ctorRegistrySymbol:$C,initCtorRegistry:ime,wrapperForImpl:sme,implForWrapper:ome,tryWrapperForImpl:sdt,tryImplForWrapper:odt,iterInternalSymbol:adt,isArrayBuffer:ldt,isArrayIndexPropName:udt,supportsPropertyIndex:pdt,supportedPropertyIndices:fdt,supportsPropertyName:hdt,supportedPropertyNames:mdt,indexedGet:ydt,indexedSetNew:gdt,indexedSetExisting:Edt,namedGet:bdt,namedSetNew:_dt,namedSetExisting:vdt,namedDelete:Sdt,asyncIteratorNext:wdt,asyncIteratorReturn:Adt,asyncIteratorInit:Cdt,asyncIteratorEOI:Tdt,iteratorResult:ddt}});var yme=m((U0r,mme)=>{"use strict";var Odt=/^xn--/,xdt=/[^\0-\x7F]/,Idt=/[\x2E\u3002\uFF0E\uFF61]/g,Rdt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},aU=35,wd=Math.floor,uU=String.fromCharCode;function K1(t){throw new RangeError(Rdt[t])}function Ddt(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function lme(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Idt,".");let i=t.split("."),s=Ddt(i,e).join(".");return n+s}function dme(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var kdt=t=>String.fromCodePoint(...t),Mdt=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},cme=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},pme=function(t,e,r){let n=0;for(t=r?wd(t/700):t>>1,t+=wd(t/e);t>aU*26>>1;n+=36)t=wd(t/aU);return wd(n+(aU+1)*t/(t+38))},fme=function(t){let e=[],r=t.length,n=0,i=128,s=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&K1("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){let u=n;for(let l=1,d=36;;d+=36){a>=r&&K1("invalid-input");let p=Mdt(t.charCodeAt(a++));p>=36&&K1("invalid-input"),p>wd((2147483647-n)/l)&&K1("overflow"),n+=p*l;let f=d<=s?1:d>=s+26?26:d-s;if(p<f)break;let h=36-f;l>wd(2147483647/h)&&K1("overflow"),l*=h}let c=e.length+1;s=pme(n-u,c,u==0),wd(n/c)>2147483647-i&&K1("overflow"),i+=wd(n/c),n%=c,e.splice(n++,0,i)}return String.fromCodePoint(...e)},hme=function(t){let e=[];t=dme(t);let r=t.length,n=128,i=0,s=72;for(let u of t)u<128&&e.push(uU(u));let o=e.length,a=o;for(o&&e.push("-");a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>wd((2147483647-i)/c)&&K1("overflow"),i+=(u-n)*c,n=u;for(let l of t)if(l<n&&++i>2147483647&&K1("overflow"),l===n){let d=i;for(let p=36;;p+=36){let f=p<=s?1:p>=s+26?26:p-s;if(d<f)break;let h=d-f,g=36-f;e.push(uU(cme(f+h%g,0))),d=wd(h/g)}e.push(uU(cme(d,0))),s=pme(i,c,a===o),i=0,++a}++i,++n}return e.join("")},Pdt=function(t){return lme(t,function(e){return Odt.test(e)?fme(e.slice(4).toLowerCase()):e})},Ndt=function(t){return lme(t,function(e){return xdt.test(e)?"xn--"+hme(e):e})},Fdt={version:"2.3.1",ucs2:{decode:dme,encode:kdt},decode:fme,encode:hme,toASCII:Ndt,toUnicode:Pdt};mme.exports=Fdt});var Eme=m((V0r,gme)=>{"use strict";var Bdt=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,qdt=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,Ldt=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,jdt=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,$dt=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,Kdt=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Udt=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,Vdt=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,Gdt=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,Hdt=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,zdt=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,Wdt=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;gme.exports={combiningMarks:Bdt,combiningClassVirama:qdt,validZWNJ:Ldt,bidiDomain:jdt,bidiS1LTR:$dt,bidiS1RTL:Kdt,bidiS2:Udt,bidiS3:Vdt,bidiS4EN:Gdt,bidiS4AN:Hdt,bidiS5:zdt,bidiS6:Wdt}});var bme=m((G0r,Jdt)=>{Jdt.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var vme=m((H0r,_me)=>{"use strict";_me.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var Tme=m((z0r,Cme)=>{"use strict";var lU=yme(),ec=Eme(),Sme=bme(),{STATUS_MAPPING:U1}=vme();function cU(t){return/[^\x00-\x7F]/u.test(t)}function wme(t){let e=0,r=Sme.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),i=Sme[n],s=Array.isArray(i[0])?i[0][0]:i[0],o=Array.isArray(i[0])?i[0][1]:i[0];if(s<=t&&o>=t)return i.slice(1);s>t?r=n-1:e=n+1}return null}function Ydt(t,{transitionalProcessing:e}){let r="";for(let n of t){let[i,s]=wme(n.codePointAt(0));switch(i){case U1.disallowed:r+=n;break;case U1.ignored:break;case U1.mapped:e&&n==="\u1E9E"?r+="ss":r+=s;break;case U1.deviation:e?r+=s:r+=n;break;case U1.valid:r+=n;break}}return r}function Qdt(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:i,useSTD3ASCIIRules:s,isBidi:o}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let a=Array.from(t);if(e&&(a[2]==="-"&&a[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||ec.combiningMarks.test(a[0]))return!1;for(let u of a){let c=u.codePointAt(0),[l]=wme(c);if(i){if(l!==U1.valid)return!1}else if(l!==U1.valid&&l!==U1.deviation)return!1;if(s&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(u))return!1}if(n){let u=0;for(let[c,l]of a.entries())if(l==="\u200C"||l==="\u200D"){if(c>0){if(ec.combiningClassVirama.test(a[c-1]))continue;if(l==="\u200C"){let d=a.indexOf("\u200C",c+1),p=d<0?a.slice(u):a.slice(u,d);if(ec.validZWNJ.test(p.join(""))){u=c+1;continue}}}return!1}}if(r&&o){let u;if(ec.bidiS1LTR.test(a[0]))u=!1;else if(ec.bidiS1RTL.test(a[0]))u=!0;else return!1;if(u){if(!ec.bidiS2.test(t)||!ec.bidiS3.test(t)||ec.bidiS4EN.test(t)&&ec.bidiS4AN.test(t))return!1}else if(!ec.bidiS5.test(t)||!ec.bidiS6.test(t))return!1}return!0}function Xdt(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return lU.decode(r.substring(4))}catch{return""}return r}).join(".");return ec.bidiDomain.test(e)}function Ame(t,e){let r=Ydt(t,e);r=r.normalize("NFC");let n=r.split("."),i=Xdt(n),s=!1;for(let[o,a]of n.entries()){let u=a,c=e.transitionalProcessing;if(u.startsWith("xn--")){if(cU(u)){s=!0;continue}try{u=lU.decode(u.substring(4))}catch{if(!e.ignoreInvalidPunycode){s=!0;continue}}n[o]=u,(u===""||!cU(u))&&(s=!0),c=!1}if(s)continue;Qdt(u,{...e,transitionalProcessing:c,isBidi:i})||(s=!0)}return{string:n.join("."),error:s}}function Zdt(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,verifyDNSLength:s=!1,transitionalProcessing:o=!1,ignoreInvalidPunycode:a=!1}={}){let u=Ame(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:o,ignoreInvalidPunycode:a}),c=u.string.split(".");if(c=c.map(l=>{if(cU(l))try{return`xn--${lU.encode(l)}`}catch{u.error=!0}return l}),s){let l=c.join(".").length;(l>253||l===0)&&(u.error=!0);for(let d=0;d<c.length;++d)if(c[d].length>63||c[d].length===0){u.error=!0;break}}return u.error?null:c.join(".")}function ept(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,transitionalProcessing:s=!1,ignoreInvalidPunycode:o=!1}={}){let a=Ame(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i,transitionalProcessing:s,ignoreInvalidPunycode:o});return{domain:a.string,error:a.error}}Cme.exports={toASCII:Zdt,toUnicode:ept}});var pU=m((W0r,xme)=>{"use strict";function dU(t){return t>=48&&t<=57}function Ome(t){return t>=65&&t<=90||t>=97&&t<=122}function tpt(t){return Ome(t)||dU(t)}function rpt(t){return dU(t)||t>=65&&t<=70||t>=97&&t<=102}xme.exports={isASCIIDigit:dU,isASCIIAlpha:Ome,isASCIIAlphanumeric:tpt,isASCIIHex:rpt}});var UC=m((J0r,Ime)=>{"use strict";var npt=new TextEncoder,ipt=new TextDecoder("utf-8",{ignoreBOM:!0});function spt(t){return npt.encode(t)}function opt(t){return ipt.decode(t)}Ime.exports={utf8Encode:spt,utf8DecodeWithoutBOM:opt}});var VC=m((Y0r,Fme)=>{"use strict";var{isASCIIHex:Rme}=pU(),{utf8Encode:Dme}=UC();function Er(t){return t.codePointAt(0)}function apt(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function kme(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let i=t[n];if(i!==37)e[r++]=i;else if(i===37&&(!Rme(t[n+1])||!Rme(t[n+2])))e[r++]=i;else{let s=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=s,n+=2}}return e.slice(0,r)}function upt(t){let e=Dme(t);return kme(e)}function fU(t){return t<=31||t>126}var cpt=new Set([Er(" "),Er('"'),Er("<"),Er(">"),Er("`")]);function lpt(t){return fU(t)||cpt.has(t)}var dpt=new Set([Er(" "),Er('"'),Er("#"),Er("<"),Er(">")]);function hU(t){return fU(t)||dpt.has(t)}function ppt(t){return hU(t)||t===Er("'")}var fpt=new Set([Er("?"),Er("`"),Er("{"),Er("}"),Er("^")]);function Mme(t){return hU(t)||fpt.has(t)}var hpt=new Set([Er("/"),Er(":"),Er(";"),Er("="),Er("@"),Er("["),Er("\\"),Er("]"),Er("|")]);function Pme(t){return Mme(t)||hpt.has(t)}var mpt=new Set([Er("$"),Er("%"),Er("&"),Er("+"),Er(",")]);function ypt(t){return Pme(t)||mpt.has(t)}var gpt=new Set([Er("!"),Er("'"),Er("("),Er(")"),Er("~")]);function Ept(t){return ypt(t)||gpt.has(t)}function Nme(t,e){let r=Dme(t),n="";for(let i of r)e(i)?n+=apt(i):n+=String.fromCharCode(i);return n}function bpt(t,e){return Nme(String.fromCodePoint(t),e)}function _pt(t,e,r=!1){let n="";for(let i of t)r&&i===" "?n+="+":n+=Nme(i,e);return n}Fme.exports={isC0ControlPercentEncode:fU,isFragmentPercentEncode:lpt,isQueryPercentEncode:hU,isSpecialQueryPercentEncode:ppt,isPathPercentEncode:Mme,isUserinfoPercentEncode:Pme,isURLEncodedPercentEncode:Ept,percentDecodeString:upt,percentDecodeBytes:kme,utf8PercentEncodeString:_pt,utf8PercentEncodeCodePoint:bpt}});var _U=m((Q0r,qo)=>{"use strict";var vpt=Tme(),Fs=pU(),{utf8DecodeWithoutBOM:Spt}=UC(),{percentDecodeString:wpt,utf8PercentEncodeCodePoint:HC,utf8PercentEncodeString:zC,isC0ControlPercentEncode:jme,isFragmentPercentEncode:Apt,isQueryPercentEncode:Cpt,isSpecialQueryPercentEncode:Tpt,isPathPercentEncode:Opt,isUserinfoPercentEncode:gU}=VC();function ke(t){return t.codePointAt(0)}var $me={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Mt=Symbol("failure");function Bme(t){return[...t].length}function qme(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function Lme(t){return t==="."||t.toLowerCase()==="%2e"}function xpt(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function Ipt(t,e){return Fs.isASCIIAlpha(t)&&(e===ke(":")||e===ke("|"))}function Kme(t){return t.length===2&&Fs.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function Rpt(t){return t.length===2&&Fs.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function Ume(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Dpt(t){return Ume(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function GC(t){return $me[t]!==void 0}function Ns(t){return GC(t.scheme)}function mU(t){return!GC(t.scheme)}function Vme(t){return $me[t]}function Gme(t){if(t==="")return Mt;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?Mt:parseInt(t,e)}function kpt(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return Mt;let r=[];for(let s of e){let o=Gme(s);if(o===Mt)return Mt;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return Mt;if(r[r.length-1]>=256**(5-r.length))return Mt;let n=r.pop(),i=0;for(let s of r)n+=s*256**(3-i),++i;return n}function Mpt(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function Ppt(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=Array.from(t,s=>s.codePointAt(0)),t[i]===ke(":")){if(t[i+1]!==ke(":"))return Mt;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return Mt;if(t[i]===ke(":")){if(n!==null)return Mt;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&Fs.isASCIIHex(t[i]);)s=s*16+parseInt(qme(t,i),16),++i,++o;if(t[i]===ke(".")){if(o===0||(i-=o,r>6))return Mt;let a=0;for(;t[i]!==void 0;){let u=null;if(a>0)if(t[i]===ke(".")&&a<4)++i;else return Mt;if(!Fs.isASCIIDigit(t[i]))return Mt;for(;Fs.isASCIIDigit(t[i]);){let c=parseInt(qme(t,i));if(u===null)u=c;else{if(u===0)return Mt;u=u*10+c}if(u>255)return Mt;++i}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return Mt;break}else if(t[i]===ke(":")){if(++i,t[i]===void 0)return Mt}else if(t[i]!==void 0)return Mt;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return Mt;return e}function Npt(t){let e="",r=qpt(t),n=!1;for(let i=0;i<=7;++i)if(!(n&&t[i]===0)){if(n&&(n=!1),r===i){e+=i===0?"::":":",n=!0;continue}e+=t[i].toString(16),i!==7&&(e+=":")}return e}function yU(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?Mt:Ppt(t.substring(1,t.length-1));if(e)return Bpt(t);let r=Spt(wpt(t)),n=Lpt(r);return n===Mt?Mt:Fpt(n)?kpt(n):n}function Fpt(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(Gme(r)!==Mt||/^[0-9]+$/u.test(r))}function Bpt(t){return Ume(t)?Mt:zC(t,jme)}function qpt(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r?n:e}function EU(t){return typeof t=="number"?Mpt(t):t instanceof Array?`[${Npt(t)}]`:t}function Lpt(t,e=!1){let r=vpt.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||Dpt(r))?Mt:r}function jpt(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function $pt(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function Hme(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&Upt(e[0])||e.pop())}function zme(t){return t.username!==""||t.password!==""}function Kpt(t){return t.host===null||t.host===""||t.scheme==="file"}function L3(t){return typeof t.path=="string"}function Upt(t){return/^[A-Za-z]:$/u.test(t)}function si(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=jpt(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=$pt(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this[`parse ${this.state}`](o,a);if(u){if(u===Mt){this.failure=!0;break}}else break}}si.prototype["parse scheme start"]=function(e,r){if(Fs.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Mt;return!0};si.prototype["parse scheme"]=function(e,r){if(Fs.isASCIIAlphanumeric(e)||e===ke("+")||e===ke("-")||e===ke("."))this.buffer+=r.toLowerCase();else if(e===ke(":")){if(this.stateOverride&&(Ns(this.url)&&!GC(this.buffer)||!Ns(this.url)&&GC(this.buffer)||(zme(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===Vme(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==ke("/")||this.input[this.pointer+2]!==ke("/"))&&(this.parseError=!0),this.state="file"):Ns(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Ns(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===ke("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Mt;return!0};si.prototype["parse no scheme"]=function(e){return this.base===null||L3(this.base)&&e!==ke("#")?Mt:(L3(this.base)&&e===ke("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};si.prototype["parse special relative or authority"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};si.prototype["parse path or authority"]=function(e){return e===ke("/")?this.state="authority":(this.state="path",--this.pointer),!0};si.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===ke("/")?this.state="relative slash":Ns(this.url)&&e===ke("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};si.prototype["parse relative slash"]=function(e){return Ns(this.url)&&(e===ke("/")||e===ke("\\"))?(e===ke("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===ke("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};si.prototype["parse special authority slashes"]=function(e){return e===ke("/")&&this.input[this.pointer+1]===ke("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};si.prototype["parse special authority ignore slashes"]=function(e){return e!==ke("/")&&e!==ke("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};si.prototype["parse authority"]=function(e,r){if(e===ke("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=Bme(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===ke(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=HC(s,gU);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ns(this.url)&&e===ke("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Mt;this.pointer-=Bme(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};si.prototype["parse hostname"]=si.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===ke(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride==="hostname")return!1;let n=yU(this.buffer,mU(this.url));if(n===Mt)return Mt;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ns(this.url)&&e===ke("\\")){if(--this.pointer,Ns(this.url)&&this.buffer==="")return this.parseError=!0,Mt;if(this.stateOverride&&this.buffer===""&&(zme(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=yU(this.buffer,mU(this.url));if(n===Mt)return Mt;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===ke("[")?this.arrFlag=!0:e===ke("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};si.prototype["parse port"]=function(e,r){if(Fs.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===ke("/")||e===ke("?")||e===ke("#")||Ns(this.url)&&e===ke("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,Mt;this.url.port=n===Vme(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Mt;return!0};var Vpt=new Set([ke("/"),ke("\\"),ke("?"),ke("#")]);function Wme(t,e){let r=t.length-e;return r>=2&&Ipt(t[e],t[e+1])&&(r===2||Vpt.has(t[e+2]))}si.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===ke("?")?(this.url.query="",this.state="query"):e===ke("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,Wme(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):Hme(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};si.prototype["parse file slash"]=function(e){return e===ke("/")||e===ke("\\")?(e===ke("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!Wme(this.input,this.pointer)&&Rpt(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};si.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===ke("/")||e===ke("\\")||e===ke("?")||e===ke("#"))if(--this.pointer,!this.stateOverride&&Kme(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=yU(this.buffer,mU(this.url));if(n===Mt)return Mt;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};si.prototype["parse path start"]=function(e){return Ns(this.url)?(e===ke("\\")&&(this.parseError=!0),this.state="path",e!==ke("/")&&e!==ke("\\")&&--this.pointer):!this.stateOverride&&e===ke("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===ke("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==ke("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};si.prototype["parse path"]=function(e){return isNaN(e)||e===ke("/")||Ns(this.url)&&e===ke("\\")||!this.stateOverride&&(e===ke("?")||e===ke("#"))?(Ns(this.url)&&e===ke("\\")&&(this.parseError=!0),xpt(this.buffer)?(Hme(this.url),e!==ke("/")&&!(Ns(this.url)&&e===ke("\\"))&&this.url.path.push("")):Lme(this.buffer)&&e!==ke("/")&&!(Ns(this.url)&&e===ke("\\"))?this.url.path.push(""):Lme(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&Kme(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===ke("?")&&(this.url.query="",this.state="query"),e===ke("#")&&(this.url.fragment="",this.state="fragment")):(e===ke("%")&&(!Fs.isASCIIHex(this.input[this.pointer+1])||!Fs.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=HC(e,Opt)),!0};si.prototype["parse opaque path"]=function(e){if(e===ke("?"))this.url.query="",this.state="query";else if(e===ke("#"))this.url.fragment="",this.state="fragment";else if(e===ke(" ")){let r=this.input[this.pointer+1];r===ke("?")||r===ke("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==ke("%")&&(this.parseError=!0),e===ke("%")&&(!Fs.isASCIIHex(this.input[this.pointer+1])||!Fs.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=HC(e,jme));return!0};si.prototype["parse query"]=function(e,r){if((!Ns(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===ke("#")||isNaN(e)){let n=Ns(this.url)?Tpt:Cpt;this.url.query+=zC(this.buffer,n),this.buffer="",e===ke("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===ke("%")&&(!Fs.isASCIIHex(this.input[this.pointer+1])||!Fs.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};si.prototype["parse fragment"]=function(e){return isNaN(e)||(e===ke("%")&&(!Fs.isASCIIHex(this.input[this.pointer+1])||!Fs.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=HC(e,Apt)),!0};function Gpt(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=EU(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!L3(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=bU(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function Hpt(t){let e=`${t.scheme}://`;return e+=EU(t.host),t.port!==null&&(e+=`:${t.port}`),e}function bU(t){if(L3(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}qo.exports.serializeURL=Gpt;qo.exports.serializePath=bU;qo.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=qo.exports.parseURL(bU(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":qo.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return Hpt({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};qo.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new si(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};qo.exports.setTheUsername=function(t,e){t.username=zC(e,gU)};qo.exports.setThePassword=function(t,e){t.password=zC(e,gU)};qo.exports.serializeHost=EU;qo.exports.cannotHaveAUsernamePasswordPort=Kpt;qo.exports.hasAnOpaquePath=L3;qo.exports.serializeInteger=function(t){return String(t)};qo.exports.parseURL=function(t,e){return e===void 0&&(e={}),qo.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var vU=m((X0r,t0e)=>{"use strict";var{utf8Encode:zpt,utf8DecodeWithoutBOM:Jme}=UC(),{percentDecodeBytes:Yme,utf8PercentEncodeString:Qme,isURLEncodedPercentEncode:Xme}=VC();function Zme(t){return t.codePointAt(0)}function Wpt(t){let e=Qpt(t,Zme("&")),r=[];for(let n of e){if(n.length===0)continue;let i,s,o=n.indexOf(Zme("="));o>=0?(i=n.slice(0,o),s=n.slice(o+1)):(i=n,s=new Uint8Array(0)),i=e0e(i,43,32),s=e0e(s,43,32);let a=Jme(Yme(i)),u=Jme(Yme(s));r.push([a,u])}return r}function Jpt(t){return Wpt(zpt(t))}function Ypt(t){let e="";for(let[r,n]of t.entries()){let i=Qme(n[0],Xme,!0),s=Qme(n[1],Xme,!0);r!==0&&(e+="&"),e+=`${i}=${s}`}return e}function Qpt(t,e){let r=[],n=0,i=t.indexOf(e);for(;i>=0;)r.push(t.slice(n,i)),n=i+1,i=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function e0e(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}t0e.exports={parseUrlencodedString:Jpt,serializeUrlencoded:Ypt}});var i0e=m(n0e=>{"use strict";var r0e=jC(),WC=KC();n0e.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...i){let s=WC.tryWrapperForImpl(this),o;for(let a=0;a<i.length;a++)i[a]=WC.tryWrapperForImpl(i[a]);return o=Reflect.apply(e,s,i),o=r0e.any(o,{context:r,globals:t}),o}return n.construct=(...i)=>{for(let o=0;o<i.length;o++)i[o]=WC.tryWrapperForImpl(i[o]);let s=Reflect.construct(e,i);return s=r0e.any(s,{context:r,globals:t}),s},n[WC.wrapperSymbol]=e,n.objectReference=e,n}});var o0e=m(s0e=>{"use strict";var SU=vU();s0e.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let i=r[0];if(this._list=[],this._url=null,!n&&typeof i=="string"&&i[0]==="?"&&(i=i.slice(1)),Array.isArray(i))for(let s of i){if(s.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([s[0],s[1]])}else if(typeof i=="object"&&Object.getPrototypeOf(i)===null)for(let s of Object.keys(i)){let o=i[s];this._list.push([s,o])}else this._list=SU.parseUrlencodedString(i)}_updateSteps(){if(this._url!==null){let e=SU.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,i=0;for(;i<this._list.length;)this._list[i][0]===e?n?this._list.splice(i,1):(n=!0,this._list[i][1]=r,i++):i++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return SU.serializeUrlencoded(this._list)}}});var wU=m(Tr=>{"use strict";var ya=jC(),Zr=KC(),Xpt=i0e(),a0e=Zr.newObjectInRealm,wi=Zr.implSymbol,c0e=Zr.ctorRegistrySymbol,u0e="URLSearchParams";Tr.is=t=>Zr.isObject(t)&&Zr.hasOwn(t,wi)&&t[wi]instanceof V1.implementation;Tr.isImpl=t=>Zr.isObject(t)&&t instanceof V1.implementation;Tr.convert=(t,e,{context:r="The provided value"}={})=>{if(Tr.is(e))return Zr.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Tr.createDefaultIterator=(t,e,r)=>{let i=t[c0e]["URLSearchParams Iterator"],s=Object.create(i);return Object.defineProperty(s,Zr.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),s};function l0e(t,e){let r;return e!==void 0&&(r=e.prototype),Zr.isObject(r)||(r=t[c0e].URLSearchParams.prototype),Object.create(r)}Tr.create=(t,e,r)=>{let n=l0e(t);return Tr.setup(n,t,e,r)};Tr.createImpl=(t,e,r)=>{let n=Tr.create(t,e,r);return Zr.implForWrapper(n)};Tr._internalSetup=(t,e)=>{};Tr.setup=(t,e,r=[],n={})=>(n.wrapper=t,Tr._internalSetup(t,e),Object.defineProperty(t,wi,{value:new V1.implementation(e,r,n),configurable:!0}),t[wi][Zr.wrapperSymbol]=t,V1.init&&V1.init(t[wi]),t);Tr.new=(t,e)=>{let r=l0e(t,e);return Tr._internalSetup(r,t),Object.defineProperty(r,wi,{value:Object.create(V1.implementation.prototype),configurable:!0}),r[wi][Zr.wrapperSymbol]=r,V1.init&&V1.init(r[wi]),r[wi]};var Zpt=new Set(["Window","Worker"]);Tr.install=(t,e)=>{if(!e.some(i=>Zpt.has(i)))return;let r=Zr.initCtorRegistry(t);class n{constructor(){let s=[];{let o=arguments[0];if(o!==void 0)if(Zr.isObject(o))if(o[Symbol.iterator]!==void 0)if(Zr.isObject(o)){let a=[],u=o;for(let c of u){if(Zr.isObject(c)){let l=[],d=c;for(let p of d)p=ya.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(p);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");a.push(c)}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(Zr.isObject(o)){let a=Object.create(null);for(let u of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,u);if(c&&c.enumerable){let l=u;l=ya.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let d=o[u];d=ya.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),a[l]=d}}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=ya.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";s.push(o)}return Tr.setup(Object.create(new.target.prototype),t,s)}append(s,o){let a=this!==null&&this!==void 0?this:t;if(!Tr.is(a))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=ya.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=ya.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return Zr.tryWrapperForImpl(a[wi].append(...u))}delete(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ya.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=ya.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return Zr.tryWrapperForImpl(o[wi].delete(...a))}get(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ya.USVString(u,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return o[wi].get(...a)}getAll(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ya.USVString(u,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return Zr.tryWrapperForImpl(o[wi].getAll(...a))}has(s){let o=this!==null&&this!==void 0?this:t;if(!Tr.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=ya.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=ya.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return o[wi].has(...a)}set(s,o){let a=this!==null&&this!==void 0?this:t;if(!Tr.is(a))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=ya.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=ya.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return Zr.tryWrapperForImpl(a[wi].set(...u))}sort(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return Zr.tryWrapperForImpl(s[wi].sort())}toString(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return s[wi].toString()}keys(){if(!Tr.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"key")}values(){if(!Tr.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"value")}entries(){if(!Tr.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Tr.createDefaultIterator(t,this,"key+value")}forEach(s){if(!Tr.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");s=Xpt.convert(t,s,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],a=Array.from(this[wi]),u=0;for(;u<a.length;){let[c,l]=a[u].map(Zr.tryWrapperForImpl);s.call(o,l,c,this),a=Array.from(this[wi]),u++}}get size(){let s=this!==null&&this!==void 0?this:t;if(!Tr.is(s))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return s[wi].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[u0e]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),Zr.define(r["URLSearchParams Iterator"],{next(){let i=this&&this[Zr.iterInternalSymbol];if(!i)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:s,kind:o,index:a}=i,u=Array.from(s[wi]),c=u.length;if(a>=c)return a0e(t,{value:void 0,done:!0});let l=u[a];return i.index=a+1,a0e(t,Zr.iteratorResult(l.map(Zr.tryWrapperForImpl),o))}}),Object.defineProperty(t,u0e,{configurable:!0,writable:!0,value:n})};var V1=o0e()});var h0e=m(f0e=>{"use strict";var Hr=_U(),d0e=vU(),eft=wU();f0e.implementation=class p0e{constructor(e,[r,n]){let i=null;if(n!==void 0&&(i=Hr.basicURLParse(n),i===null))throw new TypeError(`Invalid base URL: ${n}`);let s=Hr.basicURLParse(r,{baseURL:i});if(s===null)throw new TypeError(`Invalid URL: ${r}`);let o=s.query!==null?s.query:"";this._url=s,this._query=eft.createImpl(e,[o],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new p0e(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=Hr.basicURLParse(r),n===null)||Hr.basicURLParse(e,{baseURL:n})===null)}get href(){return Hr.serializeURL(this._url)}set href(e){let r=Hr.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=d0e.parseUrlencodedString(n))}get origin(){return Hr.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){Hr.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||Hr.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||Hr.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?Hr.serializeHost(e.host):`${Hr.serializeHost(e.host)}:${Hr.serializeInteger(e.port)}`}set host(e){Hr.hasAnOpaquePath(this._url)||Hr.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":Hr.serializeHost(this._url.host)}set hostname(e){Hr.hasAnOpaquePath(this._url)||Hr.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":Hr.serializeInteger(this._url.port)}set port(e){Hr.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:Hr.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return Hr.serializePath(this._url)}set pathname(e){Hr.hasAnOpaquePath(this._url)||(this._url.path=[],Hr.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",Hr.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=d0e.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",Hr.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var g0e=m(jt=>{"use strict";var uo=jC(),ga=KC(),Or=ga.implSymbol,tft=ga.ctorRegistrySymbol,m0e="URL";jt.is=t=>ga.isObject(t)&&ga.hasOwn(t,Or)&&t[Or]instanceof Ad.implementation;jt.isImpl=t=>ga.isObject(t)&&t instanceof Ad.implementation;jt.convert=(t,e,{context:r="The provided value"}={})=>{if(jt.is(e))return ga.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function y0e(t,e){let r;return e!==void 0&&(r=e.prototype),ga.isObject(r)||(r=t[tft].URL.prototype),Object.create(r)}jt.create=(t,e,r)=>{let n=y0e(t);return jt.setup(n,t,e,r)};jt.createImpl=(t,e,r)=>{let n=jt.create(t,e,r);return ga.implForWrapper(n)};jt._internalSetup=(t,e)=>{};jt.setup=(t,e,r=[],n={})=>(n.wrapper=t,jt._internalSetup(t,e),Object.defineProperty(t,Or,{value:new Ad.implementation(e,r,n),configurable:!0}),t[Or][ga.wrapperSymbol]=t,Ad.init&&Ad.init(t[Or]),t);jt.new=(t,e)=>{let r=y0e(t,e);return jt._internalSetup(r,t),Object.defineProperty(r,Or,{value:Object.create(Ad.implementation.prototype),configurable:!0}),r[Or][ga.wrapperSymbol]=r,Ad.init&&Ad.init(r[Or]),r[Or]};var rft=new Set(["Window","Worker"]);jt.install=(t,e)=>{if(!e.some(i=>rft.has(i)))return;let r=ga.initCtorRegistry(t);class n{constructor(s){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=uo.USVString(a,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=uo.USVString(a,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(a)}return jt.setup(Object.create(new.target.prototype),t,o)}toJSON(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return s[Or].toJSON()}get href(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return s[Or].href}set href(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Or].href=s}toString(){let s=this;if(!jt.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return s[Or].href}get origin(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return s[Or].origin}get protocol(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return s[Or].protocol}set protocol(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Or].protocol=s}get username(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return s[Or].username}set username(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Or].username=s}get password(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return s[Or].password}set password(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Or].password=s}get host(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return s[Or].host}set host(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Or].host=s}get hostname(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return s[Or].hostname}set hostname(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Or].hostname=s}get port(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return s[Or].port}set port(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Or].port=s}get pathname(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return s[Or].pathname}set pathname(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Or].pathname=s}get search(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return s[Or].search}set search(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Or].search=s}get searchParams(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return ga.getSameObject(this,"searchParams",()=>ga.tryWrapperForImpl(s[Or].searchParams))}get hash(){let s=this!==null&&this!==void 0?this:t;if(!jt.is(s))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return s[Or].hash}set hash(s){let o=this!==null&&this!==void 0?this:t;if(!jt.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");s=uo.USVString(s,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Or].hash=s}static parse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=uo.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=uo.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),o.push(a)}return ga.tryWrapperForImpl(Ad.implementation.parse(t,...o))}static canParse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=uo.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=uo.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(a)}return Ad.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[m0e]=n,Object.defineProperty(t,m0e,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var Ad=h0e()});var E0e=m(AU=>{"use strict";var nft=g0e(),ift=wU();AU.URL=nft;AU.URLSearchParams=ift});var _0e=m(co=>{"use strict";var{URL:sft,URLSearchParams:oft}=E0e(),El=_U(),b0e=VC(),JC={Array,Object,Promise,String,TypeError};sft.install(JC,["Window"]);oft.install(JC,["Window"]);co.URL=JC.URL;co.URLSearchParams=JC.URLSearchParams;co.parseURL=El.parseURL;co.basicURLParse=El.basicURLParse;co.serializeURL=El.serializeURL;co.serializePath=El.serializePath;co.serializeHost=El.serializeHost;co.serializeInteger=El.serializeInteger;co.serializeURLOrigin=El.serializeURLOrigin;co.setTheUsername=El.setTheUsername;co.setThePassword=El.setThePassword;co.cannotHaveAUsernamePasswordPort=El.cannotHaveAUsernamePasswordPort;co.hasAnOpaquePath=El.hasAnOpaquePath;co.percentDecodeString=b0e.percentDecodeString;co.percentDecodeBytes=b0e.percentDecodeBytes});var S0e=m(tc=>{"use strict";var aft=tc&&tc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),uft=tc&&tc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),cft=tc&&tc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&aft(e,t,r);return uft(e,t),e};Object.defineProperty(tc,"__esModule",{value:!0});tc.redactConnectionString=tc.redactValidConnectionString=void 0;var v0e=cft(CU());function lft(t,e){var r,n;let i=t.clone(),s=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",o=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((i.username||i.password)&&o?(i.username=s,i.password=""):i.password&&(i.password=s),i.searchParams.has("authMechanismProperties")){let a=new v0e.CommaAndColonSeparatedRecord(i.searchParams.get("authMechanismProperties"));a.get("AWS_SESSION_TOKEN")&&(a.set("AWS_SESSION_TOKEN",s),i.searchParams.set("authMechanismProperties",a.toString()))}return i.searchParams.has("tlsCertificateKeyFilePassword")&&i.searchParams.set("tlsCertificateKeyFilePassword",s),i.searchParams.has("proxyUsername")&&o&&i.searchParams.set("proxyUsername",s),i.searchParams.has("proxyPassword")&&i.searchParams.set("proxyPassword",s),i}tc.redactValidConnectionString=lft;function dft(t,e){var r,n;let i=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",s=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,o;try{o=new v0e.default(t)}catch{}if(o)return e={...e,replacementString:"___credentials___"},o.redact(e).toString().replace(/___credentials___/g,i);let a=i,u=[c=>c.replace(s?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${a}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${a}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${a}`),c=>s?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${a}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${a}`)];for(let c of u)t=c(t);return t}tc.redactConnectionString=dft});var CU=m(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.CommaAndColonSeparatedRecord=Bp.ConnectionString=Bp.redactConnectionString=void 0;var pft=_0e(),w0e=S0e();Object.defineProperty(Bp,"redactConnectionString",{enumerable:!0,get:function(){return w0e.redactConnectionString}});var j3="__this_is_a_placeholder__";function fft(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var hft=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,YC=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function mft(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return YC.prototype._normalizeKey.call(this,r)}}}var TU=class extends pft.URL{},bl=class extends Error{get name(){return"MongoParseError"}},QC=class t extends TU{constructor(e,r={}){var n;let{looseValidation:i}=r;if(!i&&!fft(e))throw new bl('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(hft);if(!s)throw new bl(`Invalid connection string "${e}"`);let{protocol:o,username:a,password:u,hosts:c,rest:l}=(n=s.groups)!==null&&n!==void 0?n:{};if(!i){if(!o||!c)throw new bl(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(a??""),decodeURIComponent(u??"")}catch(f){throw new bl(f.message)}let p=/[:/?#[\]@]/gi;if(a?.match(p))throw new bl(`Username contains unescaped characters ${a}`);if(!a||!u){let f=e.replace(`${o}://`,"");if(f.startsWith("@")||f.startsWith(":"))throw new bl("URI contained empty userinfo section")}if(u?.match(p))throw new bl("Password contains unescaped characters")}let d="";typeof a=="string"&&(d+=a),typeof u=="string"&&(d+=`:${u}`),d&&(d+="@");try{super(`${o.toLowerCase()}://${d}${j3}${l}`)}catch(p){throw i&&new t(e,{...r,looseValidation:!1}),typeof p.message=="string"&&(p.message=p.message.replace(j3,c)),p}if(this._hosts=c.split(","),!i){if(this.isSRV&&this.hosts.length!==1)throw new bl("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(p=>p.includes(":")))throw new bl("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,mft(this.searchParams.constructor).prototype)}get host(){return j3}set host(e){throw new Error("No single host for connection string")}get hostname(){return j3}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(j3,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,w0e.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:a,search:u,searchParams:c,hash:l}}};Bp.ConnectionString=QC;var OU=class extends YC{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Bp.CommaAndColonSeparatedRecord=OU;Bp.default=QC});var K3=m(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.OpCompressedRequest=Ea.OpMsgResponse=Ea.OpMsgRequest=Ea.DocumentSequence=Ea.OpReply=Ea.OpQueryRequest=void 0;var S6=gr(),$3=Ne(),xU=U3(),_6=O1(),v6=0,yft=2,gft=4,Eft=8,bft=16,_ft=32,vft=64,Sft=128,wft=1,Aft=2,Cft=4,Tft=8,Oft=S6.BSON.onDemand.ByteUtils.encodeUTF8Into,RU=class t{constructor(e,r,n){this.moreToCome=!1;let i=`${e}.$cmd`;if(typeof e!="string")throw new $3.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new $3.MongoRuntimeError("A query document must be specified for query");if(i.indexOf("\0")!==-1)throw new $3.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=i,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=v6++}nextRequestId(){return v6+1}static getRequestId(){return++v6}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=yft),this.secondaryOk&&(n|=gft),this.oplogReplay&&(n|=Eft),this.noCursorTimeout&&(n|=bft),this.awaitData&&(n|=_ft),this.exhaust&&(n|=vft),this.partial&&(n|=Sft),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let i=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(i);let s=S6.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(s),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=S6.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=i.length+s.length+(r?r.length:0),a=4;return i[3]=o>>24&255,i[2]=o>>16&255,i[1]=o>>8&255,i[0]=o&255,i[a+3]=this.requestId>>24&255,i[a+2]=this.requestId>>16&255,i[a+1]=this.requestId>>8&255,i[a]=this.requestId&255,a=a+4,i[a+3]=0,i[a+2]=0,i[a+1]=0,i[a]=0,a=a+4,i[a+3]=_6.OP_QUERY>>24&255,i[a+2]=_6.OP_QUERY>>16&255,i[a+1]=_6.OP_QUERY>>8&255,i[a]=_6.OP_QUERY&255,a=a+4,i[a+3]=n>>24&255,i[a+2]=n>>16&255,i[a+1]=n>>8&255,i[a]=n&255,a=a+4,a=a+i.write(this.ns,a,"utf8")+1,i[a-1]=0,i[a+3]=this.numberToSkip>>24&255,i[a+2]=this.numberToSkip>>16&255,i[a+1]=this.numberToSkip>>8&255,i[a]=this.numberToSkip&255,a=a+4,i[a+3]=this.numberToReturn>>24&255,i[a+2]=this.numberToReturn>>16&255,i[a+1]=this.numberToReturn>>8&255,i[a]=this.numberToReturn&255,a=a+4,e}};Ea.OpQueryRequest=RU;var DU=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new S6.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&wft)!==0,this.queryFailure=(this.responseFlags&Aft)!==0,this.shardConfigStale=(this.responseFlags&Cft)!==0,this.awaitCapable=(this.responseFlags&Tft)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};Ea.OpReply=DU;var C0e=1,T0e=2,O0e=65536,XC=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,Oft(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let i of r)this.push(i,S6.serialize(i))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};Ea.DocumentSequence=XC;var ZC=class t{constructor(e,r,n){if(r==null)throw new $3.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=C0e),this.moreToCome&&(r|=T0e),this.exhaustAllowed&&(r|=O0e);let n=Buffer.alloc(20);e.push(n);let i=n.length,s=this.command;return i+=this.makeSections(e,s),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(_6.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),i=Buffer.allocUnsafe(1);i[0]=0;let s=this.serializeBson(r);return e.push(i),e.push(s),e.push(n),i.length+s.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,i]of Object.entries(e))i instanceof XC&&(r.push(i.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return S6.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return v6=v6+1&2147483647,v6}};Ea.OpMsgRequest=ZC;var kU=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&C0e)!==0,this.moreToCome=(this.responseFlags&T0e)!==0,this.exhaustAllowed=(this.responseFlags&O0e)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new $3.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};Ea.OpMsgResponse=kU;var IU=16,A0e=9,MU=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof ZC?e.command:e.query,n=Object.keys(r)[0];return!xU.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(IU),n=e.readInt32LE(12),i=await(0,xU.compress)(this.options,r),s=Buffer.alloc(IU);s.writeInt32LE(IU+A0e+i.length,0),s.writeInt32LE(this.command.requestId,4),s.writeInt32LE(0,8),s.writeInt32LE(_6.OP_COMPRESSED,12);let o=Buffer.alloc(A0e);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(xU.Compressor[this.options.agreedCompressor],8),[s,o,i]}};Ea.OpCompressedRequest=MU});var U3=m(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.uncompressibleCommands=Bs.Compressor=void 0;Bs.compress=kft;Bs.decompress=D0e;Bs.compressCommand=Mft;Bs.decompressResponse=Pft;var x0e=require("util"),e7=require("zlib"),xft=_i(),I0e=yl(),NU=Ne(),w6=K3(),PU=O1();Bs.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});Bs.uncompressibleCommands=new Set([xft.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var Ift=3,Rft=(0,x0e.promisify)(e7.inflate.bind(e7)),Dft=(0,x0e.promisify)(e7.deflate.bind(e7)),G1,O0=null;function R0e(){if(O0==null){let t=(0,I0e.getSnappy)();if("kModuleError"in t)throw t.kModuleError;O0=t}return O0}async function kft(t,e){let r={};switch(t.agreedCompressor){case"snappy":return O0??=R0e(),await O0.compress(e);case"zstd":{if(k0e(),"kModuleError"in G1)throw G1.kModuleError;return await G1.compress(e,Ift)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Dft(e,r);default:throw new NU.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function D0e(t,e){if(t!==Bs.Compressor.snappy&&t!==Bs.Compressor.zstd&&t!==Bs.Compressor.zlib&&t!==Bs.Compressor.none)throw new NU.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case Bs.Compressor.snappy:return O0??=R0e(),await O0.uncompress(e,{asBuffer:!0});case Bs.Compressor.zstd:{if(k0e(),"kModuleError"in G1)throw G1.kModuleError;return await G1.decompress(e)}case Bs.Compressor.zlib:return await Rft(e);default:return e}}function k0e(){G1||(G1=(0,I0e.getZstdLibrary)())}var V3=16;async function Mft(t,e){let n=await(e.agreedCompressor==="none"||!w6.OpCompressedRequest.canCompress(t)?t:new w6.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function Pft(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==PU.OP_COMPRESSED){let a=e.opCode===PU.OP_MSG?w6.OpMsgResponse:w6.OpReply,u=t.subarray(V3);return new a(t,e,u)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(V3),length:t.readInt32LE(V3+4)},n=t[V3+8],i=t.slice(V3+9),s=r.opCode===PU.OP_MSG?w6.OpMsgResponse:w6.OpReply,o=await D0e(n,i);if(o.length!==r.length)throw new NU.MongoDecompressionError("Message body and message header must be the same length");return new s(t,r,o)}});var BU=m(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.hmacSha256Hook=Wi.hmacSha512Hook=Wi.aes256CtrDecryptHook=Wi.aes256CtrEncryptHook=Wi.aes256CbcDecryptHook=Wi.aes256CbcEncryptHook=void 0;Wi.makeAES256Hook=H3;Wi.randomHook=Nft;Wi.sha256Hook=Fft;Wi.makeHmacHook=FU;Wi.signRsaSha256Hook=Bft;var G3=require("crypto");function H3(t,e){return function(r,n,i,s){let o;try{let a=G3[t](e,r,n);a.setAutoPadding(!1),o=a.update(i);let u=a.final();u.length>0&&(o=Buffer.concat([o,u]))}catch(a){return a}return o.copy(s),o.length}}function Nft(t,e){try{G3.randomFillSync(t,0,e)}catch(r){return r}return e}function Fft(t,e){let r;try{r=G3.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function FU(t){return(e,r,n)=>{let i;try{i=G3.createHmac(t,e).update(r).digest()}catch(s){return s}return i.copy(n),i.length}}function Bft(t,e,r){let n;try{let i=G3.createSign("sha256WithRSAEncryption"),s=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=i.update(e).end().sign(s)}catch(i){return i}return n.copy(r),n.length}Wi.aes256CbcEncryptHook=H3("createCipheriv","aes-256-cbc");Wi.aes256CbcDecryptHook=H3("createDecipheriv","aes-256-cbc");Wi.aes256CtrEncryptHook=H3("createCipheriv","aes-256-ctr");Wi.aes256CtrDecryptHook=H3("createDecipheriv","aes-256-ctr");Wi.hmacSha512Hook=FU("sha512");Wi.hmacSha256Hook=FU("sha256")});var A6=m(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.MongoCryptKMSRequestNetworkTimeoutError=ba.MongoCryptAzureKMSRequestError=ba.MongoCryptCreateEncryptedCollectionError=ba.MongoCryptCreateDataKeyError=ba.MongoCryptInvalidArgumentError=ba.MongoCryptError=void 0;var qft=Ne(),H1=class extends qft.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};ba.MongoCryptError=H1;var qU=class extends H1{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};ba.MongoCryptInvalidArgumentError=qU;var LU=class extends H1{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};ba.MongoCryptCreateDataKeyError=LU;var jU=class extends H1{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};ba.MongoCryptCreateEncryptedCollectionError=jU;var $U=class extends H1{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};ba.MongoCryptAzureKMSRequestError=$U;var KU=class extends H1{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};ba.MongoCryptKMSRequestNetworkTimeoutError=KU});var HU=m(z1=>{"use strict";Object.defineProperty(z1,"__esModule",{value:!0});z1.LegacyAWSTemporaryCredentialProvider=z1.AWSSDKCredentialProvider=z1.AWSTemporaryCredentialProvider=void 0;var Lft=yl(),jft=Ne(),t7=et(),$ft="http://169.254.170.2",UU="http://169.254.169.254",M0e="/latest/meta-data/iam/security-credentials",qp=class t{static get awsSDK(){return t._awsSDK??=(0,Lft.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};z1.AWSTemporaryCredentialProvider=qp;var VU=class extends qp{constructor(e){super(),e&&(this._provider=e)}get provider(){if("kModuleError"in qp.awsSDK)throw qp.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,s=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&s?qp.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):qp.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new jft.MongoAWSError(e.message,{cause:e})}}};z1.AWSSDKCredentialProvider=VU;var GU=class extends qp{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,t7.request)(`${$ft}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,t7.request)(`${UU}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,t7.request)(`${UU}/${M0e}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,t7.request)(`${UU}/${M0e}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};z1.LegacyAWSTemporaryCredentialProvider=GU});var P0e=m(zU=>{"use strict";Object.defineProperty(zU,"__esModule",{value:!0});zU.loadAWSCredentials=Uft;var Kft=HU();async function Uft(t,e){let r=new Kft.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:i="",Token:s}=await r.getCredentials(),o={secretAccessKey:n,accessKeyId:i};return s!=null&&(o.sessionToken=s),{...t,aws:o}}});var WU=m(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.tokenCache=_a.AzureCredentialCache=_a.AZURE_BASE_URL=void 0;_a.addAzureParams=N0e;_a.prepareRequest=F0e;_a.fetchAzureKMSToken=B0e;_a.loadAzureCredentials=Wft;var Vft=Ne(),Gft=et(),C6=A6(),Hft=6e3;_a.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var r7=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=Hft}resetCache(){this.cachedToken=null}_getToken(){return B0e()}};_a.AzureCredentialCache=r7;_a.tokenCache=new r7;async function zft(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new C6.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new C6.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new C6.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new C6.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let i=Number(n.expires_in)*1e3;if(Number.isNaN(i))throw new C6.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+i}}function N0e(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function F0e(t){let e=new URL(t.url?.toString()??_a.AZURE_BASE_URL);return N0e(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function B0e(t={}){let{headers:e,url:r}=F0e(t);try{let n=await(0,Gft.get)(r,{headers:e});return await zft(n)}catch(n){throw n instanceof Vft.MongoNetworkTimeoutError?new C6.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function Wft(t){let e=await _a.tokenCache.getToken();return{...t,azure:e}}});var q0e=m(JU=>{"use strict";Object.defineProperty(JU,"__esModule",{value:!0});JU.loadGCPCredentials=Yft;var Jft=yl();async function Yft(t){let e=(0,Jft.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var YU=m(i7=>{"use strict";Object.defineProperty(i7,"__esModule",{value:!0});i7.isEmptyCredentials=n7;i7.refreshKMSCredentials=e1t;var Qft=P0e(),Xft=WU(),Zft=q0e();function n7(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function e1t(t,e){let r=t;return n7("aws",t)&&(r=await(0,Qft.loadAWSCredentials)(r,e?.aws)),n7("gcp",t)&&(r=await(0,Zft.loadGCPCredentials)(r)),n7("azure",t)&&(r=await(0,Xft.loadAzureCredentials)(r)),r}});var XU=m(s7=>{"use strict";Object.defineProperty(s7,"__esModule",{value:!0});s7.StateMachine=void 0;var L0e=require("fs/promises"),t1t=require("net"),r1t=require("tls"),Lp=gr(),j0e=qs(),n1t=yl(),i1t=Ne(),$0e=Gi(),W1=et(),s1t=o7(),J1=A6(),z3=null;function o1t(){if(z3==null){let t=(0,n1t.getSocks)();if("kModuleError"in t)throw t.kModuleError;z3=t}return z3}var x0=0,U0e=1,V0e=2,G0e=3,H0e=7,z0e=4,W0e=5,J0e=6,a1t=443,u1t=new Map([[x0,"MONGOCRYPT_CTX_ERROR"],[U0e,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[V0e,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[G0e,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[H0e,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[z0e,"MONGOCRYPT_CTX_NEED_KMS"],[W0e,"MONGOCRYPT_CTX_READY"],[J0e,"MONGOCRYPT_CTX_DONE"]]),c1t=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function K0e(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var l1t,QU=class{constructor(e,r=(0,Lp.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let i=e._keyVaultNamespace,s=e._keyVaultClient,o=e._metaDataClient,a=e._mongocryptdClient,u=e._mongocryptdManager,c=null,l=()=>r.status,d=()=>r.state;for(;d()!==J0e&&d()!==x0;)switch(n.signal?.throwIfAborted(),K0e(`[context#${r.id}] ${u1t.get(d())||d()}`),d()){case U0e:{let p=(0,Lp.deserialize)(r.nextMongoOperation());if(!o)throw new J1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let f=this.fetchCollectionInfo(o,r.ns,p,n);for await(let h of f)if(r.addMongoOperationResponse((0,Lp.serialize)(h)),d()===x0)break;if(d()===x0)break;r.finishMongoOperation();break}case V0e:{let p=r.nextMongoOperation();if(d()===x0)break;if(!a)throw new J1.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let f=u?await u.withRespawn(this.markCommand.bind(this,a,r.ns,p,n)):await this.markCommand(a,r.ns,p,n);r.addMongoOperationResponse(f),r.finishMongoOperation();break}case G0e:{let p=r.nextMongoOperation(),f=await this.fetchKeys(s,i,p,n);f.length===0&&(c=l1t??=(0,Lp.serialize)({v:[]}));for(let h of f)r.addMongoOperationResponse((0,Lp.serialize)(h));r.finishMongoOperation();break}case H0e:{let p=await e.askForKMSCredentials();r.provideKMSProviders((0,Lp.serialize)(p));break}case z0e:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case W0e:{let p=r.finalize();if(d()===x0){let f=l().message||"Finalization error";throw new J1.MongoCryptError(f)}c=p;break}default:throw new J1.MongoCryptError(`Unknown state: ${d()}`)}if(d()===x0||c==null){let p=l().message;throw p||K0e("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new J1.MongoCryptError(p??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),i=n[1]!=null?Number.parseInt(n[1],10):a1t,s={host:n[0],servername:n[0],port:i,...(0,s1t.autoSelectSocketOptions)(this.options.socketOptions||{})},o=e.message,a=new W1.BufferPool,u,c;function l(){for(let g of[c,u])g&&g.destroy()}function d(g){return new J1.MongoCryptError("KMS request failed",{cause:g})}function p(){return new J1.MongoCryptError("KMS request closed")}let f=this.options.tlsOptions;if(f){let g=e.kmsProvider,_=f[g];if(_){let S=this.validateTlsOptions(g,_);if(S)throw S;try{await this.setTlsOptions(_,s)}catch(w){throw d(w)}}}let h;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){u=new t1t.Socket;let{promise:w,reject:C,resolve:A}=(0,W1.promiseWithResolvers)();u.once("error",x=>C(d(x))).once("close",()=>C(p())).once("connect",()=>A());let O={...s,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};u.connect(O),await w;try{z3??=o1t(),s.socket=(await z3.SocksClient.createConnection({existing_socket:u,command:"connect",destination:{host:s.host,port:s.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(x){throw d(x)}}c=r1t.connect(s,()=>{c.write(o)});let{promise:g,reject:_,resolve:S}=(0,W1.promiseWithResolvers)();h=(0,W1.addAbortListener)(r?.signal,function(){l(),_(this.reason)}),c.once("error",w=>_(d(w))).once("close",()=>_(p())).on("data",w=>{for(a.append(w);e.bytesNeeded>0&&a.length;){let C=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(C))}e.bytesNeeded<=0&&S()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([g,$0e.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):g)}catch(g){throw g instanceof $0e.TimeoutError?new i1t.MongoOperationTimeoutError("KMS request timed out"):g}finally{l(),h?.[W1.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let i of c1t)if(n.includes(i))return new J1.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${i}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await L0e.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await L0e.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,i){let{db:s}=W1.MongoDBCollectionNamespace.fromString(r);return e.db(s).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:i?.timeoutContext&&new j0e.CursorTimeoutContext(i?.timeoutContext,Symbol()),signal:i?.signal,nameOnly:!1})}async markCommand(e,r,n,i){let{db:s}=W1.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},a=(0,Lp.deserialize)(n,o),u={timeoutMS:void 0,signal:void 0};i?.timeoutContext?.csotEnabled()&&(u.timeoutMS=i.timeoutContext.remainingTimeMS),i?.signal&&(u.signal=i.signal);let c=await e.db(s).command(a,{...o,...u});return(0,Lp.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,i){let{db:s,collection:o}=W1.MongoDBCollectionNamespace.fromString(r),a={timeoutContext:void 0,signal:void 0};return i?.timeoutContext!=null&&(a.timeoutContext=new j0e.CursorTimeoutContext(i.timeoutContext,Symbol())),i?.signal!=null&&(a.signal=i.signal),e.db(s).collection(o,{readConcern:{level:"majority"}}).find((0,Lp.deserialize)(n),a).toArray()}};s7.StateMachine=QU});var o7=m(Y3=>{"use strict";Object.defineProperty(Y3,"__esModule",{value:!0});Y3.ClientEncryption=void 0;Y3.autoSelectSocketOptions=J3;var Lo=gr(),d1t=yl(),W3=Gi(),va=et(),p1t=BU(),Y1=A6(),Y0e=YU(),a7=XU(),ZU=class t{static getMongoCrypt(){let e=(0,d1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,va.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,Y0e.isEmptyCredentials)("aws",this._kmsProviders))throw new Y1.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new Y1.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let i={...r,cryptoCallbacks:p1t,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Lo.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let s=t.getMongoCrypt();this._mongoCrypt=new s(i)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new Y1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((f,h)=>{if(typeof f!="string")throw new Y1.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${h} was of type ${typeof f}`);return(0,Lo.serialize)({keyAltName:f})}));let i;r.keyMaterial&&(i=(0,Lo.serialize)({keyMaterial:r.keyMaterial}));let s=(0,Lo.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(s,{keyAltNames:n,keyMaterial:i}),a=new a7.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:J3(this._client.s.options)}),u=r?.timeoutContext??W3.TimeoutContext.create((0,va.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,Lo.deserialize)(await a.execute(this,o,{timeoutContext:u})),{db:l,collection:d}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:p}=await this._keyVaultClient.db(l).collection(d).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0});return p}async rewrapManyDataKey(e,r){let n;if(r){let f=Object.assign({provider:r.provider},r.masterKey);n=(0,Lo.serialize)(f)}let i=(0,Lo.serialize)(e),s=this._mongoCrypt.makeRewrapManyDataKeyContext(i,n),o=new a7.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:J3(this._client.s.options)}),a=W3.TimeoutContext.create((0,va.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:u}=(0,Lo.deserialize)(await o.execute(this,s,{timeoutContext:a}));if(u.length===0)return{};let{db:c,collection:l}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),d=u.map(f=>({updateOne:{filter:{_id:f._id},update:{$set:{masterKey:f.masterKey,keyMaterial:f.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(d,{writeConcern:{w:"majority"},timeoutMS:a.csotEnabled()?a?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:i}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:i}=va.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),s=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},s,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:i,masterKey:s,createCollectionOptions:{encryptedFields:{...o},...a}}=n,u=this._timeoutMS!=null?W3.TimeoutContext.create((0,va.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async p=>p==null||typeof p!="object"||p.keyId!=null?p:{...p,keyId:await this.createDataKey(i,{masterKey:s,timeoutContext:u?.csotEnabled()?u?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((p,f)=>p.status==="fulfilled"?p.value:o.fields[f]);let d=l.find(p=>p.status==="rejected");if(d!=null)throw new Y1.MongoCryptCreateDataKeyError(o,{cause:d.reason})}try{return{collection:await e.createCollection(r,{...a,encryptedFields:o,timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new Y1.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,Lo.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),i=new a7.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:J3(this._client.s.options)}),s=this._timeoutMS!=null?W3.TimeoutContext.create((0,va.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,Lo.deserialize)(await i.execute(this,n,{timeoutContext:s}));return o}async askForKMSCredentials(){return await(0,Y0e.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:i,keyId:s,keyAltName:o,contentionFactor:a,queryType:u,rangeOptions:c,textOptions:l}=n,d={expressionMode:r,algorithm:i};if(s&&(d.keyId=s.buffer),o){if(s)throw new Y1.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new Y1.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);d.keyAltName=(0,Lo.serialize)({keyAltName:o})}(typeof a=="number"||typeof a=="bigint")&&(d.contentionFactor=a),typeof u=="string"&&(d.queryType=u),typeof c=="object"&&(d.rangeOptions=(0,Lo.serialize)(c)),typeof l=="object"&&(d.textOptions=(0,Lo.serialize)(l));let p=(0,Lo.serialize)({v:e}),f=new a7.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:J3(this._client.s.options)}),h=this._mongoCrypt.makeExplicitEncryptionContext(p,d),g=this._timeoutMS!=null?W3.TimeoutContext.create((0,va.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:_}=(0,Lo.deserialize)(await f.execute(this,h,{timeoutContext:g}));return _}};Y3.ClientEncryption=ZU;function J3(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var Q0e=m(c7=>{"use strict";Object.defineProperty(c7,"__esModule",{value:!0});c7.MongocryptdManager=void 0;var f1t=Ne(),u7=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof f1t.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};c7.MongocryptdManager=u7;u7.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var nV=m(T6=>{"use strict";var rye;Object.defineProperty(T6,"__esModule",{value:!0});T6.AutoEncrypter=T6.AutoEncryptionLoggerLevel=void 0;var X0e=require("net"),Q3=gr(),h1t=_i(),m1t=yl(),eV=Ne(),y1t=Q1(),g1t=et(),tV=o7(),E1t=BU(),Z0e=A6(),b1t=Q0e(),eye=YU(),tye=XU();T6.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var rV=class t{static getMongoCrypt(){let e=(0,m1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[rye]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,eye.isEmptyCredentials)("aws",this._kmsProviders))throw new Z0e.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={enableMultipleCollinfo:!0,cryptoCallbacks:E1t};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,Q3.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,Q3.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Q3.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let i=t.getMongoCrypt();if(this._mongocrypt=new i(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new Z0e.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new b1t.MongocryptdManager(r.extraOptions);let s={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!X0e.getDefaultAutoSelectFamily&&(s.family=4),X0e.getDefaultAutoSelectFamily&&Object.assign(s,(0,tV.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new y1t.MongoClient(this._mongocryptdManager.uri,s)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new eV.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new eV.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new eV.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let i=Buffer.isBuffer(r)?r:(0,Q3.serialize)(r,n),s=this._mongocrypt.makeEncryptionContext(g1t.MongoDBCollectionNamespace.fromString(e).db,i);s.id=this._contextCounter++,s.ns=e,s.document=r;let o=new tye.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,tV.autoSelectSocketOptions)(this._client.s.options)});return(0,Q3.deserialize)(await o.execute(this,s,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new tye.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,tV.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,eye.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};T6.AutoEncrypter=rV;rye=h1t.kDecorateResult});var iye=m(l7=>{"use strict";Object.defineProperty(l7,"__esModule",{value:!0});l7.Encrypter=void 0;var _1t=nV(),v1t=_i(),S1t=yl(),nye=Ne(),w1t=Q1(),iV=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new nye.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new _1t.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let i=this.internalClient;if(i==null){let s={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(s,o,Reflect.get(n,o));s.minPoolSize=0,i=new w1t.MongoClient(r,s),this.internalClient=i;for(let o of v1t.MONGO_CLIENT_EVENTS)for(let a of e.listeners(o))i.on(o,a);e.on("newListener",(o,a)=>{i?.on(o,a)}),this.needsConnecting=!0}return i}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(i){r=i}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,S1t.getMongoDBClientEncryption)();if("kModuleError"in e)throw new nye.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};l7.Encrypter=iV});var sV=m(d7=>{"use strict";Object.defineProperty(d7,"__esModule",{value:!0});d7.ConnectionPoolMetrics=void 0;var O6=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};d7.ConnectionPoolMetrics=O6;O6.TXN="txn";O6.CURSOR="cursor";O6.OTHER="other"});var aV=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.Transaction=$t.TxnState=void 0;$t.isTransactionCommand=R1t;var sye=Ne(),A1t=ol(),C1t=fs(),T1t=Po();$t.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var O1t={[$t.TxnState.NO_TRANSACTION]:[$t.TxnState.NO_TRANSACTION,$t.TxnState.STARTING_TRANSACTION],[$t.TxnState.STARTING_TRANSACTION]:[$t.TxnState.TRANSACTION_IN_PROGRESS,$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.TRANSACTION_ABORTED],[$t.TxnState.TRANSACTION_IN_PROGRESS]:[$t.TxnState.TRANSACTION_IN_PROGRESS,$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_ABORTED],[$t.TxnState.TRANSACTION_COMMITTED]:[$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.STARTING_TRANSACTION,$t.TxnState.NO_TRANSACTION],[$t.TxnState.TRANSACTION_ABORTED]:[$t.TxnState.STARTING_TRANSACTION,$t.TxnState.NO_TRANSACTION],[$t.TxnState.TRANSACTION_COMMITTED_EMPTY]:[$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.NO_TRANSACTION]},x1t=new Set([$t.TxnState.STARTING_TRANSACTION,$t.TxnState.TRANSACTION_IN_PROGRESS]),I1t=new Set([$t.TxnState.TRANSACTION_COMMITTED,$t.TxnState.TRANSACTION_COMMITTED_EMPTY,$t.TxnState.TRANSACTION_ABORTED]),oV=class{constructor(e){e=e??{},this.state=$t.TxnState.NO_TRANSACTION,this.options={};let r=T1t.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new sye.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=A1t.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=C1t.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===$t.TxnState.STARTING_TRANSACTION}get isActive(){return x1t.has(this.state)}get isCommitted(){return I1t.has(this.state)}transition(e){let r=O1t[this.state];if(r&&r.includes(e)){this.state=e,(this.state===$t.TxnState.NO_TRANSACTION||this.state===$t.TxnState.STARTING_TRANSACTION||this.state===$t.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new sye.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};$t.Transaction=oV;function R1t(t){return!!(t.commitTransaction||t.abortTransaction)}});var I6=m(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.ServerSessionPool=_l.ServerSession=_l.ClientSession=void 0;_l.maybeClearPinnedConnection=h7;_l.applySession=N1t;_l.updateSessionFromResponse=F1t;var f7=gr(),m7=sV(),uye=_i(),Tt=Ne(),D1t=tu(),p7=hs(),uV=_3(),k1t=ol(),cV=fs(),M1t=R6(),dV=Xa(),lV=Gi(),zr=aV(),Ls=et(),x6=Po(),y7=class t extends D1t.TypedEventEmitter{constructor(e,r,n,i){if(super(),this.timeoutContext=null,this.on("error",Ls.noop),e==null)throw new Tt.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof g7))throw new Tt.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new Tt.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let s=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??s},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new zr.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new Tt.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new Tt.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===dV.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(uye.PINNED,this.inTransaction()?m7.ConnectionPoolMetrics.TXN:m7.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return h7(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,Ls.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new X3(r)),this.hasEnded=!0,this.emit("ended",this)}h7(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new Tt.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new Tt.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new Tt.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,dV._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:Ls.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new Tt.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new Tt.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new zr.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(zr.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===zr.TxnState.NO_TRANSACTION)throw new Tt.MongoTransactionError("No transaction started");if(this.transaction.state===zr.TxnState.STARTING_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(zr.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)throw new Tt.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(i!=null)if(n==null&&this.timeoutContext==null)x6.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i});else{let a=Object.keys(i);(a.length>2||!a.includes("wtimeoutMS")&&!a.includes("wTimeoutMS"))&&x6.WriteConcern.apply(r,{...i,wtimeoutMS:void 0})}(this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?x6.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}):x6.WriteConcern.apply(r,{w:"majority",...i,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let s=new uV.RunCommandOperation(new Ls.MongoDBNamespace("admin"),r,{session:this,readPreference:cV.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?lV.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,p7.executeOperation)(this.client,s,o),this.commitAttempted=void 0;return}catch(a){if(this.commitAttempted=!0,a instanceof Tt.MongoError&&(0,Tt.isRetryableWriteError)(a)){x6.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}),this.unpin({force:!0});try{await(0,p7.executeOperation)(this.client,new uV.RunCommandOperation(new Ls.MongoDBNamespace("admin"),r,{session:this,readPreference:cV.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(u){throw aye(u)&&u.addErrorLabel(Tt.MongoErrorLabel.UnknownTransactionCommitResult),oye(u)&&this.unpin({error:u}),u}}throw aye(a)&&a.addErrorLabel(Tt.MongoErrorLabel.UnknownTransactionCommitResult),oye(a)&&this.unpin({error:a}),a}finally{this.transaction.transition(zr.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===zr.TxnState.NO_TRANSACTION)throw new Tt.MongoTransactionError("No transaction started");if(this.transaction.state===zr.TxnState.STARTING_TRANSACTION){this.transaction.transition(zr.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)throw new Tt.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new Tt.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=n!=null?lV.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;s!=null&&n==null&&x6.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new uV.RunCommandOperation(new Ls.MongoDBNamespace("admin"),r,{session:this,readPreference:cV.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,p7.executeOperation)(this.client,o,i),this.unpin();return}catch(a){if(this.unpin(),a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a;if(a instanceof Tt.MongoError&&(0,Tt.isRetryableWriteError)(a))try{await(0,p7.executeOperation)(this.client,o,i);return}catch(u){if(u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u}}finally{this.transaction.transition(zr.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&h7(this,{force:!1})}}toBSON(){throw new Tt.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let i=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=i!=null?lV.TimeoutContext.create({timeoutMS:i,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let s=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,Ls.now)(),o=!1,a;try{for(;!o;){this.startTransaction(r);try{let u=e(this);if(!(0,Ls.isPromiseLike)(u))throw new Tt.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(a=await u,this.transaction.state===zr.TxnState.NO_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_COMMITTED||this.transaction.state===zr.TxnState.TRANSACTION_ABORTED)return a}catch(u){if(!(u instanceof Tt.MongoError)||u instanceof Tt.MongoInvalidArgumentError)throw await this.abortTransaction(),u;if((this.transaction.state===zr.TxnState.STARTING_TRANSACTION||this.transaction.state===zr.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),u.hasErrorLabel(Tt.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Ls.now)()-s<12e4))continue;throw u}for(;!o;)try{await this.commitTransaction(),o=!0}catch(u){if(!E7(u)&&u.hasErrorLabel(Tt.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,Ls.now)()-s<12e4))continue;if(u.hasErrorLabel(Tt.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Ls.now)()-s<12e4))break;throw u}}return a}finally{this.timeoutContext=null}}};_l.ClientSession=y7;(0,M1t.configureResourceManagement)(y7.prototype);var P1t=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function oye(t){if(t instanceof Tt.MongoError){if((0,Tt.isRetryableWriteError)(t)||t instanceof Tt.MongoWriteConcernError||E7(t)){if(cye(t))return!0}else if(t.hasErrorLabel(Tt.MongoErrorLabel.TransientTransactionError))return!0}return!1}function aye(t){let e=(0,Tt.isRetryableWriteError)(t);return e||=t instanceof Tt.MongoWriteConcernError,e||=E7(t),e&&=cye(t),e}function cye(t){let e=t instanceof Tt.MongoServerError&&t.codeName&&P1t.has(t.codeName);return E7(t)||!e&&t.code!==Tt.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==Tt.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function h7(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof Tt.MongoError&&n.hasErrorLabel(Tt.MongoErrorLabel.TransientTransactionError))return;let i=t.client.topology;if(r&&i!=null){let o=Array.from(i.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(uye.UNPINNED,t.transaction.state!==zr.TxnState.NO_TRANSACTION?m7.ConnectionPoolMetrics.TXN:m7.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function E7(t){return t==null||!(t instanceof Tt.MongoServerError)?!1:t.code===Tt.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===Tt.MONGODB_ERROR_CODES.MaxTimeMSExpired}var X3=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new f7.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new f7.Binary((0,Ls.uuidV4)(),f7.Binary.SUBTYPE_UUID)},this.lastUse=(0,Ls.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,Ls.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};_l.ServerSession=X3;var g7=class{constructor(e){if(e==null)throw new Tt.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new Ls.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new X3),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};_l.ServerSessionPool=g7;function N1t(t,e,r){if(t.hasEnded)return new Tt.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new Tt.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new Tt.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,Ls.now)(),e.lsid=n.id;let i=t.inTransaction()||(0,zr.isTransactionCommand)(e);if((r.willRetryWrite||i)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=f7.Long.fromNumber(n.txnNumber)),!i){t.transaction.state!==zr.TxnState.NO_TRANSACTION&&t.transaction.transition(zr.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,Ls.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:k1t.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===zr.TxnState.STARTING_TRANSACTION){t.transaction.transition(zr.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function F1t(t,e){if(e.$clusterTime&&(0,dV._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var _V=m(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.SENSITIVE_COMMANDS=rc.CommandFailedEvent=rc.CommandSucceededEvent=rc.CommandStartedEvent=void 0;var Z3=_i(),pye=et(),pV=K3(),fV=class{constructor(e,r,n){this.name=Z3.COMMAND_STARTED;let i=EV(r),s=yV(i),{address:o,connectionId:a,serviceId:u}=bV(e);rc.SENSITIVE_COMMANDS.has(s)&&(this.commandObj={},this.commandObj[s]=!0),this.address=o,this.connectionId=a,this.serviceId=u,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=s,this.command=gV(s,i,i),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};rc.CommandStartedEvent=fV;var hV=class{constructor(e,r,n,i,s){this.name=Z3.COMMAND_SUCCEEDED;let o=EV(r),a=yV(o),{address:u,connectionId:c,serviceId:l}=bV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,pye.calculateDurationInMs)(i),this.reply=gV(a,o,L1t(n)),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};rc.CommandSucceededEvent=hV;var mV=class{constructor(e,r,n,i,s){this.name=Z3.COMMAND_FAILED;let o=EV(r),a=yV(o),{address:u,connectionId:c,serviceId:l}=bV(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,pye.calculateDurationInMs)(i),this.failure=gV(a,o,n),this.serverConnectionId=s,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};rc.CommandFailedEvent=mV;rc.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var B1t=new Set(["hello",Z3.LEGACY_HELLO_COMMAND,Z3.LEGACY_HELLO_COMMAND_CAMEL_CASE]),yV=t=>Object.keys(t)[0],q1t=t=>t.ns.split(".")[1],gV=(t,e,r)=>rc.SENSITIVE_COMMANDS.has(t)||B1t.has(t)&&e.speculativeAuthenticate?{}:r,lye={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},dye={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function EV(t){if(t instanceof pV.OpMsgRequest){let n={...t.command};return n.ops instanceof pV.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof pV.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:q1t(t)},Object.keys(lye).forEach(i=>{t.query[i]!=null&&(n[lye[i]]={...t.query[i]})})),Object.keys(dye).forEach(i=>{let s=i;t[s]!=null&&(n[dye[s]]=t[s])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function L1t(t){return t&&(t.result?t.result:t)}function bV(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var ev=m(M6=>{"use strict";Object.defineProperty(M6,"__esModule",{value:!0});M6.ServerDescription=void 0;M6.parseServerType=fye;M6.compareTopologyVersion=hye;var D6=gr(),j1t=Ne(),k6=et(),Ni=Xa(),$1t=new Set([Ni.ServerType.RSPrimary,Ni.ServerType.Standalone,Ni.ServerType.Mongos,Ni.ServerType.LoadBalancer]),K1t=new Set([Ni.ServerType.RSPrimary,Ni.ServerType.RSSecondary,Ni.ServerType.Mongos,Ni.ServerType.Standalone,Ni.ServerType.LoadBalancer]),vV=class{constructor(e,r,n={}){if(e==null||e==="")throw new j1t.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?k6.HostAddress.fromString(e).toString():e.toString(),this.type=fye(r,n),this.hosts=r?.hosts?.map(i=>i.toLowerCase())??[],this.passives=r?.passives?.map(i=>i.toLowerCase())??[],this.arbiters=r?.arbiters?.map(i=>i.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,k6.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return k6.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Ni.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return K1t.has(this.type)}get isWritable(){return $1t.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||hye(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,k6.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,k6.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,k6.arrayStrictEqual)(this.hosts,e.hosts)&&U1t(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};M6.ServerDescription=vV;function fye(t,e){return e?.loadBalanced?Ni.ServerType.LoadBalancer:!t||!t.ok?Ni.ServerType.Unknown:t.isreplicaset?Ni.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?Ni.ServerType.Mongos:t.setName?t.hidden?Ni.ServerType.RSOther:t.isWritablePrimary?Ni.ServerType.RSPrimary:t.secondary?Ni.ServerType.RSSecondary:t.arbiterOnly?Ni.ServerType.RSArbiter:Ni.ServerType.RSOther:Ni.ServerType.Standalone}function U1t(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(i=>e[i]===t[i])}function hye(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?D6.Long.fromBigInt(t.counter):D6.Long.isLong(t.counter)?t.counter:D6.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?D6.Long.fromBigInt(e.counter):D6.Long.isLong(e.counter)?e.counter:D6.Long.fromNumber(e.counter);return r.compare(n)}});var mye=m(b7=>{"use strict";Object.defineProperty(b7,"__esModule",{value:!0});b7.StreamDescription=void 0;var V1t=gr(),G1t=Xa(),H1t=ev(),z1t=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],SV=class{constructor(e,r){this.hello=null,this.address=e,this.type=G1t.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,H1t.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of z1t)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return V1t.Long.isLong(e)?e.toBigInt():BigInt(e)}};b7.StreamDescription=SV});var yye=m(wV=>{"use strict";Object.defineProperty(wV,"__esModule",{value:!0});wV.onData=W1t;var tv=et();function W1t(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new tv.List,i=new tv.List,s=null,o=!1,a={next(){let f=n.shift();if(f!=null)return Promise.resolve({value:f,done:!1});if(s!=null){let S=Promise.reject(s);return s=null,S}if(o)return p();let{promise:h,resolve:g,reject:_}=(0,tv.promiseWithResolvers)();return i.push({resolve:g,reject:_}),h},return(){return p()},throw(f){return d(f),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await p()}};t.on("data",l),t.on("error",d);let u=(0,tv.addAbortListener)(r,function(){d(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,d),a;function l(f){let h=i.shift();h!=null?h.resolve({value:f,done:!1}):n.push(f)}function d(f){let h=i.shift();h!=null?h.reject(f):s=f,p()}function p(){t.off("data",l),t.off("error",d),u?.[tv.kDispose](),o=!0,c?.clear();let f={value:void 0,done:o};for(let h of i)h.resolve(f);return Promise.resolve(f)}}});var TV=m(S7=>{"use strict";Object.defineProperty(S7,"__esModule",{value:!0});S7.TopologyDescription=void 0;var J1t=gr(),v7=O1(),_7=Ne(),AV=et(),fr=Xa(),X1=ev(),Y1t=v7.MIN_SUPPORTED_SERVER_VERSION,Q1t=v7.MAX_SUPPORTED_SERVER_VERSION,gye=v7.MIN_SUPPORTED_WIRE_VERSION,Eye=v7.MAX_SUPPORTED_WIRE_VERSION,X1t=new Set([fr.ServerType.Mongos,fr.ServerType.Unknown]),bye=new Set([fr.ServerType.Mongos,fr.ServerType.Standalone]),_ye=new Set([fr.ServerType.RSSecondary,fr.ServerType.RSArbiter,fr.ServerType.RSOther]),CV=class t{constructor(e,r=null,n=null,i=null,s=null,o=null,a=null){a=a??{},this.type=e??fr.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=a.heartbeatFrequencyMS??0,this.localThresholdMS=a.localThresholdMS??15,this.setName=n??null,this.maxElectionId=s??null,this.maxSetVersion=i??null,this.commonWireVersion=o??0;for(let u of this.servers.values())if(!(u.type===fr.ServerType.Unknown||u.type===fr.ServerType.LoadBalancer)&&(u.minWireVersion>Eye&&(this.compatible=!1,this.compatibilityError=`Server at ${u.address} requires wire version ${u.minWireVersion}, but this version of the driver only supports up to ${Eye} (MongoDB ${Q1t})`),u.maxWireVersion<gye)){this.compatible=!1,this.compatibilityError=`Server at ${u.address} reports wire version ${u.maxWireVersion}, but this version of the driver requires at least ${gye} (MongoDB ${Y1t}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,u]of this.servers)if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),i=new Set(this.servers.keys()),s=new Set(n),o=new Set;for(let u of i)s.delete(u),n.has(u)||o.add(u);if(s.size===0&&o.size===0)return this;let a=new Map(this.servers);for(let u of o)a.delete(u);if(s.size>0){if(r===0)for(let u of s)a.set(u,new X1.ServerDescription(u));else if(a.size<r){let u=(0,AV.shuffle)(s,r-a.size);for(let c of u)a.set(c,new X1.ServerDescription(c))}}return new t(this.type,a,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:i,maxSetVersion:s,maxElectionId:o,commonWireVersion:a}=this,u=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(a==null?a=e.maxWireVersion:a=Math.min(a,e.maxWireVersion)),typeof e.setName=="string"&&typeof i=="string"&&e.setName!==i&&(n===fr.TopologyType.Single?e=new X1.ServerDescription(r):c.delete(r)),c.set(r,e),n===fr.TopologyType.Single)return new t(fr.TopologyType.Single,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===fr.TopologyType.Unknown&&(u===fr.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=Z1t(u)),n===fr.TopologyType.Sharded&&(X1t.has(u)||c.delete(r)),n===fr.TopologyType.ReplicaSetNoPrimary){if(bye.has(u)&&c.delete(r),u===fr.ServerType.RSPrimary){let l=vye(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else if(_ye.has(u)){let l=tht(c,e,i);n=l[0],i=l[1]}}if(n===fr.TopologyType.ReplicaSetWithPrimary)if(bye.has(u))c.delete(r),n=I0(c);else if(u===fr.ServerType.RSPrimary){let l=vye(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else _ye.has(u)?n=eht(c,e,i):n=I0(c);return new t(n,c,i,s,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==fr.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return J1t.EJSON.serialize(this)}};S7.TopologyDescription=CV;function Z1t(t){switch(t){case fr.ServerType.Standalone:return fr.TopologyType.Single;case fr.ServerType.Mongos:return fr.TopologyType.Sharded;case fr.ServerType.RSPrimary:return fr.TopologyType.ReplicaSetWithPrimary;case fr.ServerType.RSOther:case fr.ServerType.RSSecondary:return fr.TopologyType.ReplicaSetNoPrimary;default:return fr.TopologyType.Unknown}}function vye(t,e,r=null,n=null,i=null){let s=(u,c,l)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${u.setVersion}, server electionId: ${u.electionId}, topology setVersion: ${c}, topology electionId: ${l}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[I0(t),r,n,i];if(e.maxWireVersion>=17){let u=(0,AV.compareObjectId)(i,e.electionId),c=u===0,l=u===-1,d=(n??-1)<=(e.setVersion??-1);if(l||c&&d)i=e.electionId,n=e.setVersion;else return t.set(e.address,new X1.ServerDescription(e.address,void 0,{error:new _7.MongoStalePrimaryError(s(e,n,i))})),[I0(t),r,n,i]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&i&&(n>e.setVersion||(0,AV.compareObjectId)(i,u)>0))return t.set(e.address,new X1.ServerDescription(e.address,void 0,{error:new _7.MongoStalePrimaryError(s(e,n,i))})),[I0(t),r,n,i];i=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,c]of t)if(c.type===fr.ServerType.RSPrimary&&c.address!==e.address){t.set(u,new X1.ServerDescription(c.address,void 0,{error:new _7.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new X1.ServerDescription(u))});let o=Array.from(t.keys()),a=e.allHosts;return o.filter(u=>a.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[I0(t),r,n,i]}function eht(t,e,r=null){if(r==null)throw new _7.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),I0(t)}function tht(t,e,r=null){let n=fr.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(i=>{t.has(i)||t.set(i,new X1.ServerDescription(i))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function I0(t){for(let e of t.values())if(e.type===fr.ServerType.RSPrimary)return fr.TopologyType.ReplicaSetWithPrimary;return fr.TopologyType.ReplicaSetNoPrimary}});var wye=m(w7=>{"use strict";Object.defineProperty(w7,"__esModule",{value:!0});w7.getReadPreference=iht;w7.isSharded=sht;var rht=Ne(),OV=fs(),Sye=Xa(),nht=TV();function iht(t){let e=t?.readPreference??OV.ReadPreference.primary;if(typeof e=="string"&&(e=OV.ReadPreference.fromString(e)),!(e instanceof OV.ReadPreference))throw new rht.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function sht(t){return t==null?!1:t.description&&t.description.type===Sye.ServerType.Mongos?!0:t.description&&t.description instanceof nht.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===Sye.ServerType.Mongos):!1}});var T7=m(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.CryptoConnection=jp.SizedMessageTransform=jp.Connection=void 0;jp.hasSessionSupport=hht;var oht=require("stream"),Oye=require("timers"),aht=gr(),Z1=_i(),Vn=Ne(),Aye=k1(),uht=tu(),cht=fs(),lht=Xa(),Cye=I6(),Tye=Gi(),nu=et(),xV=_V(),A7=K3(),dht=mye(),pht=U3(),fht=yye(),rv=kr(),IV=wye();function hht(t){return t.description.logicalSessionTimeoutMinutes!=null}function mht(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?nu.HostAddress.fromHostPort(r,n).toString():(0,nu.uuidV4)().toString("hex")}var vl=class t extends uht.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",nu.noop),this.socket=e,this.id=r.id,this.address=mht(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new dht.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,nu.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new C7({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,nu.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,nu.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Aye.MongoLoggableComponent.COMMAND,Aye.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,nu.now)()}onSocketError(e){this.onError(new Vn.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Vn.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,Oye.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new Vn.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Vn.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,nu.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let i={...r},s=(0,IV.getReadPreference)(n),o=n?.session,a=this.clusterTime;if(this.serverApi){let{version:l,strict:d,deprecationErrors:p}=this.serverApi;i.apiVersion=l,d!=null&&(i.apiStrict=d),p!=null&&(i.apiDeprecationErrors=p)}if(this.hasSessionSupport&&o){o.clusterTime&&a&&o.clusterTime.clusterTime.greaterThan(a.clusterTime)&&(a=o.clusterTime);let l=(0,Cye.applySession)(o,i,n);if(l)throw l}else if(o?.explicit)throw new Vn.MongoCompatibilityError("Current topology does not support sessions");a&&(i.$clusterTime=a),this.description.type!==lht.ServerType.Standalone&&(!(0,IV.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&s?.mode==="primary"?i.$readPreference=cht.ReadPreference.primaryPreferred.toJSON():(0,IV.isSharded)(this)&&!this.supportsOpMsg&&s?.mode!=="primary"?i={$query:i,$readPreference:s.toJSON()}:s?.mode!=="primary"&&(i.$readPreference=s.toJSON()));let u={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:s.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(i,n),this.supportsOpMsg?new A7.OpMsgRequest(e,i,u):new A7.OpQueryRequest(e,i,u)}async*sendWire(e,r,n){this.throwIfAborted();let i=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(i);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),r.noResponse||e.moreToCome){yield rv.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Vn.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let s of this.readMany(r)){this.socket.setTimeout(0);let o=s.parse();yield(n??rv.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(i)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,i){n?.signal?.throwIfAborted();let s=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,nu.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,s.databaseName,this.established,new xV.CommandStartedEvent(this,s,this.description.serverConnectionId)));let a=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},u,c;try{this.throwIfAborted();for await(u of this.sendWire(s,n,i)){if(c=void 0,n.session!=null&&(0,Cye.updateSessionFromResponse)(n.session,u),u.$clusterTime&&(this.clusterTime=u.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,u.$clusterTime)),u.ok===0)throw n.timeoutContext?.csotEnabled()&&u.isMaxTimeExpiredError?new Vn.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vn.MongoServerError(c??=u.toObject(a))}):new Vn.MongoServerError(c??=u.toObject(a));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,s.databaseName,this.established,new xV.CommandSucceededEvent(this,s,n.noResponse?void 0:s.moreToCome?{ok:1}:c??=u.toObject(a),o,this.description.serverConnectionId)),i==null?yield c??=u.toObject(a):yield u,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,s.databaseName,this.established,new xV.CommandFailedEvent(this,s,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},i){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let s of this.sendCommand(e,r,n,i)){if(n.timeoutContext?.csotEnabled()){if(rv.MongoDBResponse.is(s)){if(s.isMaxTimeExpiredError)throw new Vn.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vn.MongoServerError(s.toObject())})}else if(Array.isArray(s?.writeErrors)&&s.writeErrors.some(o=>o?.code===Vn.MONGODB_ERROR_CODES.MaxTimeMSExpired)||s?.writeConcernError?.code===Vn.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new Vn.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vn.MongoServerError(s)})}return s}throw new Vn.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,i){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))i(void 0,o),this.throwIfAborted();throw new Vn.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,i)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!A7.OpCompressedRequest.canCompress(e)?e:new A7.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),i=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Vn.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(i))return;let s=(0,nu.once)(this.socket,"drain",r),o=r?.timeoutContext?.timeoutForSocketWrite,a=o?Promise.race([s,o]):s;try{return await a}catch(u){if(Tye.TimeoutError.is(u)){let c=new Vn.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else u===r.signal?.reason&&this.onError(u);throw u}finally{o?.clear()}}async*readMany(e){try{this.dataEvents=(0,fht.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,pht.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(Tye.TimeoutError.is(r)){let n=new Vn.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};jp.Connection=vl;vl.COMMAND_STARTED=Z1.COMMAND_STARTED;vl.COMMAND_SUCCEEDED=Z1.COMMAND_SUCCEEDED;vl.COMMAND_FAILED=Z1.COMMAND_FAILED;vl.CLUSTER_TIME_RECEIVED=Z1.CLUSTER_TIME_RECEIVED;vl.CLOSE=Z1.CLOSE;vl.PINNED=Z1.PINNED;vl.UNPINNED=Z1.UNPINNED;var C7=class extends oht.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new nu.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,Oye.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let i=this.bufferPool.getInt32();if(i==null)break;if(i<0)return n(new Vn.MongoParseError(`Message size cannot be negative: ${i}`));if(i>this.bufferPool.length)break;let s=this.bufferPool.read(i);if(!this.push(s))return n(new Vn.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};jp.SizedMessageTransform=C7;var RV=class extends vl{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,i){let{autoEncrypter:s}=this;if(!s)throw new Vn.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,nu.maxWireVersion)(this)===0)return await super.command(e,r,n,i);let a=r.find||r.findAndModify?r.sort:null,u=r.createIndexes?r.indexes.map(f=>f.key):null,c=await s.encrypt(e.toString(),r,n);if(a!=null&&(r.find||r.findAndModify)&&(c.sort=a),u!=null&&r.createIndexes)for(let[f,h]of u.entries())c.indexes[f].key=h;let l=await super.command(e,c,n,i??rv.MongoDBResponse),d=await s.decrypt(l.toBytes(),n),p=i?.make(d)??(0,aht.deserialize)(d,n);return s[Z1.kDecorateResult]&&(i==null?(0,nu.decorateDecryptionResult)(p,l.toObject(),!0):p instanceof rv.CursorResponse&&(p.encryptedResponse=l)),p}};jp.CryptoConnection=RV});var MV=m(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.LEGAL_TCP_SOCKET_OPTIONS=iu.LEGAL_TLS_SOCKET_OPTIONS=void 0;iu.connect=bht;iu.makeConnection=Dye;iu.performInitialHandshake=kye;iu.prepareHandshakeDocument=Mye;iu.makeSocket=x7;var Iye=require("net"),yht=require("tls"),Rye=_i(),ght=yl(),Gn=Ne(),DV=et(),Eht=j1(),O7=Sd(),xye=T7(),P6=O1();async function bht(t){let e=null;try{let r=await x7(t);return e=Dye(t,r),await kye(e,t),e}catch(r){throw e?.destroy(),r}}function Dye(t,e){let r=t.connectionType??xye.Connection;return t.autoEncrypter&&(r=xye.CryptoConnection),new r(e,t)}function _ht(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),i=!Number.isNaN(r)&&r>=P6.MIN_SUPPORTED_WIRE_VERSION,s=!Number.isNaN(n)&&n<=P6.MAX_SUPPORTED_WIRE_VERSION;if(i){if(s)return null;let a=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${P6.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${P6.MAX_SUPPORTED_SERVER_VERSION})`;return new Gn.MongoCompatibilityError(a)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${P6.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${P6.MIN_SUPPORTED_SERVER_VERSION})`;return new Gn.MongoCompatibilityError(o)}async function kye(t,e){let r=e.credentials;if(r&&r.mechanism!==O7.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Gn.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new Eht.AuthContext(t,r,e);t.authContext=n;let i=await Mye(n),s={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(s.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),a=await c(i,s);"isWritablePrimary"in a||(a.isWritablePrimary=a[Rye.LEGACY_HELLO_COMMAND]),a.helloOk&&(t.helloOk=!0);let u=_ht(a,e);if(u)throw u;if(e.loadBalanced&&!a.serviceId)throw new Gn.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=a,t.lastHelloMS=new Date().getTime()-o,!a.arbiterOnly&&r){n.response=a;let l=r.resolveAuthMechanism(a),d=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!d)throw new Gn.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await d.auth(n)}catch(p){throw p instanceof Gn.MongoError&&(p.addErrorLabel(Gn.MongoErrorLabel.HandshakeError),(0,Gn.needsRetryableWriteLabel)(p,a.maxWireVersion,t.description.type)&&p.addErrorLabel(Gn.MongoErrorLabel.RetryableWriteError)),p}}t.established=!0;async function c(l,d){try{return await t.command((0,DV.ns)("admin.$cmd"),l,d)}catch(p){throw p instanceof Gn.MongoError&&p.addErrorLabel(Gn.MongoErrorLabel.HandshakeError),p}}}async function Mye(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,i=await e.extendedMetadata,s={[n?.version||e.loadBalanced===!0?"hello":Rye.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:i,compression:r};e.loadBalanced===!0&&(s.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===O7.AuthMechanism.MONGODB_DEFAULT&&o.username){s.saslSupportedMechs=`${o.source}.${o.username}`;let u=t.options.authProviders.getOrCreateProvider(O7.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!u)throw new Gn.MongoInvalidArgumentError(`No AuthProvider for ${O7.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await u.prepare(s,t)}let a=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!a)throw new Gn.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await a.prepare(s,t)}return s}iu.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];iu.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function kV(t){let e=t.hostAddress;if(!e)throw new Gn.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of iu.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Gn.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function vht(t){let e=kV(t);for(let r of iu.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!Iye.isIP(e.host)&&(e.servername=e.host),e}async function x7(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,i;if(t.proxyHost!=null)return await wht({...t,connectTimeoutMS:r});if(e){let c=yht.connect(vht(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),i=c}else n?i=n:i=Iye.createConnection(kV(t));i.setTimeout(r);let s=null,{promise:o,resolve:a,reject:u}=(0,DV.promiseWithResolvers)();if(n)a(i);else{let c=performance.now(),l=e?"secureConnect":"connect";i.once(l,()=>a(i)).once("error",d=>u(new Gn.MongoNetworkError(Gn.MongoError.buildErrorMessage(d),{cause:d}))).once("timeout",()=>{u(new Gn.MongoNetworkTimeoutError(`Socket '${l}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>u(new Gn.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(s=()=>u(new Gn.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",s))}try{return i=await o,i}catch(c){throw i.destroy(),c}finally{i.setTimeout(0),s!=null&&t.cancellationToken?.removeListener("cancel",s)}}var nv=null;function Sht(){if(nv==null){let t=(0,ght.getSocks)();if("kModuleError"in t)throw t.kModuleError;nv=t}return nv}async function wht(t){let e=DV.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await x7({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=kV(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Gn.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");nv??=Sht();let i;try{i=(await nv.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(s){throw new Gn.MongoNetworkError(Gn.MongoError.buildErrorMessage(s),{cause:s})}return await x7({...t,existingSocket:i,proxyHost:void 0})}});var I7=m(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ServerHeartbeatFailedEvent=Fi.ServerHeartbeatSucceededEvent=Fi.ServerHeartbeatStartedEvent=Fi.TopologyClosedEvent=Fi.TopologyOpeningEvent=Fi.TopologyDescriptionChangedEvent=Fi.ServerClosedEvent=Fi.ServerOpeningEvent=Fi.ServerDescriptionChangedEvent=void 0;var $p=_i(),PV=class{constructor(e,r,n,i){this.name=$p.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=i}};Fi.ServerDescriptionChangedEvent=PV;var NV=class{constructor(e,r){this.name=$p.SERVER_OPENING,this.topologyId=e,this.address=r}};Fi.ServerOpeningEvent=NV;var FV=class{constructor(e,r){this.name=$p.SERVER_CLOSED,this.topologyId=e,this.address=r}};Fi.ServerClosedEvent=FV;var BV=class{constructor(e,r,n){this.name=$p.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Fi.TopologyDescriptionChangedEvent=BV;var qV=class{constructor(e){this.name=$p.TOPOLOGY_OPENING,this.topologyId=e}};Fi.TopologyOpeningEvent=qV;var LV=class{constructor(e){this.name=$p.TOPOLOGY_CLOSED,this.topologyId=e}};Fi.TopologyClosedEvent=LV;var jV=class{constructor(e,r){this.name=$p.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Fi.ServerHeartbeatStartedEvent=jV;var $V=class{constructor(e,r,n,i){this.name=$p.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=i}};Fi.ServerHeartbeatSucceededEvent=$V;var KV=class{constructor(e,r,n,i){this.name=$p.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=i}};Fi.ServerHeartbeatFailedEvent=KV});var tG=m(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ConnectionPoolClearedEvent=pn.ConnectionCheckedInEvent=pn.ConnectionCheckedOutEvent=pn.ConnectionCheckOutFailedEvent=pn.ConnectionCheckOutStartedEvent=pn.ConnectionClosedEvent=pn.ConnectionReadyEvent=pn.ConnectionCreatedEvent=pn.ConnectionPoolClosedEvent=pn.ConnectionPoolReadyEvent=pn.ConnectionPoolCreatedEvent=pn.ConnectionPoolMonitoringEvent=void 0;var Sl=_i(),eG=et(),Sa=class{constructor(e){this.time=new Date,this.address=e.address}};pn.ConnectionPoolMonitoringEvent=Sa;var UV=class extends Sa{constructor(e){super(e),this.name=Sl.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}}};pn.ConnectionPoolCreatedEvent=UV;var VV=class extends Sa{constructor(e){super(e),this.name=Sl.CONNECTION_POOL_READY}};pn.ConnectionPoolReadyEvent=VV;var GV=class extends Sa{constructor(e){super(e),this.name=Sl.CONNECTION_POOL_CLOSED}};pn.ConnectionPoolClosedEvent=GV;var HV=class extends Sa{constructor(e,r){super(e),this.name=Sl.CONNECTION_CREATED,this.connectionId=r.id}};pn.ConnectionCreatedEvent=HV;var zV=class extends Sa{constructor(e,r,n){super(e),this.name=Sl.CONNECTION_READY,this.durationMS=(0,eG.now)()-n,this.connectionId=r.id}};pn.ConnectionReadyEvent=zV;var WV=class extends Sa{constructor(e,r,n,i){super(e),this.name=Sl.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=i??null}};pn.ConnectionClosedEvent=WV;var JV=class extends Sa{constructor(e){super(e),this.name=Sl.CONNECTION_CHECK_OUT_STARTED}};pn.ConnectionCheckOutStartedEvent=JV;var YV=class extends Sa{constructor(e,r,n,i){super(e),this.name=Sl.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,eG.now)()-n,this.reason=r,this.error=i}};pn.ConnectionCheckOutFailedEvent=YV;var QV=class extends Sa{constructor(e,r,n){super(e),this.name=Sl.CONNECTION_CHECKED_OUT,this.durationMS=(0,eG.now)()-n,this.connectionId=r.id}};pn.ConnectionCheckedOutEvent=QV;var XV=class extends Sa{constructor(e,r){super(e),this.name=Sl.CONNECTION_CHECKED_IN,this.connectionId=r.id}};pn.ConnectionCheckedInEvent=XV;var ZV=class extends Sa{constructor(e,r={}){super(e),this.name=Sl.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};pn.ConnectionPoolClearedEvent=ZV});var sG=m(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.WaitQueueTimeoutError=Cd.PoolClearedOnNetworkError=Cd.PoolClearedError=Cd.PoolClosedError=void 0;var R7=Ne(),rG=class extends R7.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};Cd.PoolClosedError=rG;var D7=class extends R7.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(R7.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};Cd.PoolClearedError=D7;var nG=class extends D7{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};Cd.PoolClearedOnNetworkError=nG;var iG=class extends R7.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};Cd.WaitQueueTimeoutError=iG});var Nye=m($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.ConnectionPool=$s.PoolState=void 0;var N6=require("timers"),nc=_i(),wl=Ne(),Pye=tu(),Aht=Gi(),Kp=et(),Cht=MV(),k7=T7(),js=tG(),F6=sG(),Tht=sV();$s.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var wa=class t extends Pye.TypedEventEmitter{constructor(e,r){if(super(),this.on("error",Kp.noop),this.options=Object.freeze({connectionType:k7.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new wl.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=$s.PoolState.paused,this.server=e,this.connections=new Kp.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,Kp.makeCounter)(1),this.cancellationToken=new Pye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new Kp.List,this.metrics=new Tht.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new js.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===$s.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===$s.PoolState.paused&&(this.poolState=$s.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new js.ConnectionPoolReadyEvent(this)),(0,N6.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,Kp.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new js.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:i,reject:s}=(0,Kp.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,a={resolve:i,reject:s,cancelled:!1,checkoutTime:r},u=(0,Kp.addAbortListener)(e.signal,function(){a.cancelled=!0,s(this.reason)});this.waitQueue.push(a),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(c){if(Aht.TimeoutError.is(c)){o?.clear(),a.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new js.ConnectionCheckOutFailedEvent(this,"timeout",a.checkoutTime));let l=new F6.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new wl.MongoOperationTimeoutError("Timed out during connection checkout",{cause:l}):l}throw c}finally{u?.[Kp.kDispose](),o?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),i=!!(r||n||e.closed);if(i||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new js.ConnectionCheckedInEvent(this,e)),i){let s=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,s)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:s}=e;if(!s)throw new wl.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=s.toHexString(),a=this.serviceGenerations.get(o);if(a==null)throw new wl.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,a+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new js.ConnectionPoolClearedEvent(this,{serviceId:s}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let i=this.poolState===$s.PoolState.paused;this.poolState=$s.PoolState.paused,this.clearMinPoolSizeTimer(),i||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new js.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new F6.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new wl.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=$s.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new js.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new js.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new wl.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new wl.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let i=n.resolveAuthMechanism(e.hello),s=this.server.topology.client.s.authProviders.getOrCreateProvider(i.mechanism,i.mechanismProperties);if(!s)throw new wl.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await s.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,N6.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new js.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),i=this.serviceGenerations.get(n);return e.generation!==i}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let i=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,i),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let n=(0,Kp.now)();this.emitAndLog(t.CONNECTION_CREATED,new js.ConnectionCreatedEvent(this,{id:r.id})),(0,Cht.connect)(r).then(i=>{if(this.poolState!==$s.PoolState.ready){this.pending--,i.destroy(),e(this.closed?new F6.PoolClosedError(this):new F6.PoolClearedError(this));return}for(let s of[...nc.APM_EVENTS,k7.Connection.CLUSTER_TIME_RECEIVED])i.on(s,o=>this.emit(s,o));if(this.loadBalanced){i.on(k7.Connection.PINNED,o=>this.metrics.markPinned(o)),i.on(k7.Connection.UNPINNED,o=>this.metrics.markUnpinned(o));let s=i.serviceId;if(s){let o,a=s.toHexString();(o=this.serviceGenerations.get(a))?i.generation=o:(this.serviceGenerations.set(a,0),i.generation=0)}}i.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new js.ConnectionReadyEvent(this,i,n)),this.pending--,e(void 0,i)},i=>{this.pending--,this.server.handleError(i),this.emitAndLog(t.CONNECTION_CLOSED,new js.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",i)),(i instanceof wl.MongoNetworkError||i instanceof wl.MongoServerError)&&(i.connectionGeneration=r.generation),e(i??new wl.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===$s.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===$s.PoolState.ready&&((0,N6.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,N6.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,N6.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,N6.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==$s.PoolState.ready){let s=this.closed?"poolClosed":"connectionError",o=this.closed?new F6.PoolClosedError(this):new F6.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new js.ConnectionCheckOutFailedEvent(this,s,n.checkoutTime,o)),this.waitQueue.shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let i=this.connections.shift();if(!i)break;this.destroyConnectionIfPerished(i)||(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new js.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),this.waitQueue.shift(),n.resolve(i))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((i,s)=>{n.cancelled?!i&&s&&this.connections.push(s):i?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new js.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,i)),n.reject(i)):s&&(this.checkedOut.add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new js.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),n.resolve(s)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};$s.ConnectionPool=wa;wa.CONNECTION_POOL_CREATED=nc.CONNECTION_POOL_CREATED;wa.CONNECTION_POOL_CLOSED=nc.CONNECTION_POOL_CLOSED;wa.CONNECTION_POOL_CLEARED=nc.CONNECTION_POOL_CLEARED;wa.CONNECTION_POOL_READY=nc.CONNECTION_POOL_READY;wa.CONNECTION_CREATED=nc.CONNECTION_CREATED;wa.CONNECTION_READY=nc.CONNECTION_READY;wa.CONNECTION_CLOSED=nc.CONNECTION_CLOSED;wa.CONNECTION_CHECK_OUT_STARTED=nc.CONNECTION_CHECK_OUT_STARTED;wa.CONNECTION_CHECK_OUT_FAILED=nc.CONNECTION_CHECK_OUT_FAILED;wa.CONNECTION_CHECKED_OUT=nc.CONNECTION_CHECKED_OUT;wa.CONNECTION_CHECKED_IN=nc.CONNECTION_CHECKED_IN});var lG=m(M7=>{"use strict";Object.defineProperty(M7,"__esModule",{value:!0});M7.Server=void 0;var Oht=T7(),xht=Nye(),Iht=sG(),Td=_i(),Nn=Ne(),Rht=tu(),Dht=h3(),uG=aV(),R0=et(),Fye=Po(),en=Xa(),kht=dG(),cG=ev(),Mht=d3(),iv=(0,R0.makeStateMachine)({[en.STATE_CLOSED]:[en.STATE_CLOSED,en.STATE_CONNECTING],[en.STATE_CONNECTING]:[en.STATE_CONNECTING,en.STATE_CLOSING,en.STATE_CONNECTED,en.STATE_CLOSED],[en.STATE_CONNECTED]:[en.STATE_CONNECTED,en.STATE_CLOSING,en.STATE_CLOSED],[en.STATE_CLOSING]:[en.STATE_CLOSING,en.STATE_CLOSED]}),Al=class t extends Rht.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",R0.noop),this.serverApi=n.serverApi;let i={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new xht.ConnectionPool(this,i),this.s={description:r,options:n,state:en.STATE_CLOSED,operationCount:0};for(let s of[...Td.CMAP_EVENTS,...Td.APM_EVENTS])this.pool.on(s,o=>this.emit(s,o));if(this.pool.on(Oht.Connection.CLUSTER_TIME_RECEIVED,s=>{this.clusterTime=s}),this.loadBalanced){this.monitor=null;return}this.monitor=new kht.Monitor(this,this.s.options);for(let s of Td.HEARTBEAT_EVENTS)this.monitor.on(s,o=>this.emit(s,o));this.monitor.on("resetServer",s=>oG(this,s)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,s=>{this.emit(t.DESCRIPTION_RECEIVED,new cG.ServerDescription(this.description.hostAddress,s.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===en.STATE_CONNECTING&&(iv(this,en.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===en.TopologyType.LoadBalanced}connect(){this.s.state===en.STATE_CLOSED&&(iv(this,en.STATE_CONNECTING),this.loadBalanced?(iv(this,en.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==en.STATE_CLOSED&&(iv(this,en.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),iv(this,en.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===en.STATE_CLOSING||this.s.state===en.STATE_CLOSED)throw new Nn.MongoServerClosedError;let n=e.session,i=n?.pinnedConnection;if(this.incrementOperationCount(),i==null)try{i=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(d){throw this.decrementOperationCount(),d instanceof Iht.PoolClearedError||this.handleError(d),d}let s=null,o=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==i)if(s!=null){let d=()=>{this.pool.checkIn(i)};s.then(d,d)}else this.pool.checkIn(i)},a;try{a=e.buildCommand(i,n)}catch(d){throw o(),d}let u=e.buildOptions(r),c=e.ns;this.loadBalanced&&Pht(a,n)&&!n?.pinnedConnection&&n?.pin(i),u.directConnection=this.topology.s.options.directConnection,e instanceof Dht.AggregateOperation&&e.hasWriteStage&&(0,R0.maxWireVersion)(i)<Mht.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete u.readPreference,this.description.iscryptd&&(u.omitMaxTimeMS=!0);try{try{let d=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,Fye.throwIfWriteConcernError)(d),d}catch(d){throw this.decorateCommandError(i,a,u,d)}}catch(d){if(d instanceof Nn.MongoError&&d.code===Nn.MONGODB_ERROR_CODES.Reauthenticate){s=this.pool.reauthenticate(i),s.then(void 0,p=>{s=null,(0,R0.squashError)(p)}),await(0,R0.abortable)(s,u),s=null;try{let p=await i.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,Fye.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(i,a,u,p)}}else throw d}finally{o()}}handleError(e,r){if(!(e instanceof Nn.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let i=e instanceof Nn.MongoNetworkError&&!(e instanceof Nn.MongoNetworkTimeoutError),s=e instanceof Nn.MongoNetworkError&&e.beforeHandshake,o=e.hasErrorLabel(Nn.MongoErrorLabel.HandshakeError);if(i||s||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(Nn.MongoErrorLabel.ResetPool),oG(this,e));else if((0,Nn.isSDAMUnrecoverableError)(e)&&Fht(this,e)){let a=(0,Nn.isNodeShuttingDownError)(e);this.loadBalanced&&r&&a&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(a&&e.addErrorLabel(Nn.MongoErrorLabel.ResetPool),oG(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,i){if(typeof i!="object"||i==null||!("name"in i))throw new Nn.MongoRuntimeError("An unexpected error type: "+typeof i);if(i.name==="AbortError"&&"cause"in i&&i.cause instanceof Nn.MongoError&&(i=i.cause),!(i instanceof Nn.MongoError)||Nht(this.pool,e))return i;let s=n?.session;return i instanceof Nn.MongoNetworkError?(s&&!s.hasEnded&&s.serverSession&&(s.serverSession.isDirty=!0),aG(s,r)&&!i.hasErrorLabel(Nn.MongoErrorLabel.TransientTransactionError)&&i.addErrorLabel(Nn.MongoErrorLabel.TransientTransactionError),(Bye(this.topology)||(0,uG.isTransactionCommand)(r))&&(0,R0.supportsRetryableWrites)(this)&&!aG(s,r)&&i.addErrorLabel(Nn.MongoErrorLabel.RetryableWriteError)):(Bye(this.topology)||(0,uG.isTransactionCommand)(r))&&(0,Nn.needsRetryableWriteLabel)(i,(0,R0.maxWireVersion)(this),this.description.type)&&!aG(s,r)&&i.addErrorLabel(Nn.MongoErrorLabel.RetryableWriteError),s&&s.isPinned&&i.hasErrorLabel(Nn.MongoErrorLabel.TransientTransactionError)&&s.unpin({force:!0}),this.handleError(i,e),i}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};M7.Server=Al;Al.SERVER_HEARTBEAT_STARTED=Td.SERVER_HEARTBEAT_STARTED;Al.SERVER_HEARTBEAT_SUCCEEDED=Td.SERVER_HEARTBEAT_SUCCEEDED;Al.SERVER_HEARTBEAT_FAILED=Td.SERVER_HEARTBEAT_FAILED;Al.CONNECT=Td.CONNECT;Al.DESCRIPTION_RECEIVED=Td.DESCRIPTION_RECEIVED;Al.CLOSED=Td.CLOSED;Al.ENDED=Td.ENDED;function oG(t,e){t.loadBalanced||(e instanceof Nn.MongoNetworkError&&!(e instanceof Nn.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(Al.DESCRIPTION_RECEIVED,new cG.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function Pht(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Nht(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function Fht(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,cG.compareTopologyVersion)(n,r)<0}function aG(t,e){return t&&t.inTransaction()&&!(0,uG.isTransactionCommand)(e)}function Bye(t){return t.s.options.retryWrites!==!1}});var dG=m(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.RTTSampler=Aa.MonitorInterval=Aa.RTTPinger=Aa.Monitor=Aa.ServerMonitoringMode=void 0;var eh=require("timers"),qye=gr(),P7=MV(),Bht=sU(),pG=_i(),B6=Ne(),qht=k1(),Lye=tu(),Ks=et(),Us=Xa(),sv=I7(),ov=lG(),q6="idle",D0="monitoring",L6=(0,Ks.makeStateMachine)({[Us.STATE_CLOSING]:[Us.STATE_CLOSING,q6,Us.STATE_CLOSED],[Us.STATE_CLOSED]:[Us.STATE_CLOSED,D0],[q6]:[q6,D0,Us.STATE_CLOSING],[D0]:[D0,q6,Us.STATE_CLOSING]}),Lht=new Set([Us.STATE_CLOSING,Us.STATE_CLOSED,D0]);function av(t){return t.s.state===Us.STATE_CLOSED||t.s.state===Us.STATE_CLOSING}Aa.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var fG=class extends Lye.TypedEventEmitter{constructor(e,r){super(),this.component=qht.MongoLoggableComponent.TOPOLOGY,this.on("error",Ks.noop),this.server=e,this.connection=null,this.cancellationToken=new Lye.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:Us.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,Bht.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new F7(10);let n=this.cancellationToken,i={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete i.credentials,i.autoEncrypter&&delete i.autoEncrypter,this.connectOptions=Object.freeze(i)}connect(){if(this.s.state!==Us.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new uv($ye(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){Lht.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(av(this)||e==null)return;L6(this,Us.STATE_CLOSING),jye(this),L6(this,q6);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new uv($ye(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){av(this)||(L6(this,Us.STATE_CLOSING),jye(this),this.emit("close"),L6(this,Us.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};Aa.Monitor=fG;function jye(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function hG(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===Aa.ServerMonitoringMode.poll?!1:r===Aa.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function jht(t,e){let r,n,i=t.server.description.topologyVersion,s=hG(t,i);t.emitAndLogHeartbeat(ov.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new sv.ServerHeartbeatStartedEvent(t.address,s));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(ov.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new sv.ServerHeartbeatFailedEvent(t.address,(0,Ks.calculateDurationInMs)(r),c,n));let l=c instanceof B6.MongoError?c:new B6.MongoError(B6.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(B6.MongoErrorLabel.ResetPool),l instanceof B6.MongoNetworkTimeoutError&&l.addErrorLabel(B6.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function a(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[pG.LEGACY_HELLO_COMMAND]);let l=s&&t.rttPinger?t.rttPinger.latestRtt??(0,Ks.calculateDurationInMs)(r):(0,Ks.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(ov.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new sv.ServerHeartbeatSucceededEvent(t.address,l,c,s)),s?(t.emitAndLogHeartbeat(ov.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new sv.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,Ks.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:u}=t;if(u&&!u.closed){let{serverApi:c,helloOk:l}=u,d=t.options.connectTimeoutMS,p=t.options.heartbeatFrequencyMS,f={[c?.version||l?"hello":pG.LEGACY_HELLO_COMMAND]:1,...s&&i?{maxAwaitTimeMS:p,topologyVersion:$ht(i)}:{}},h=s?{socketTimeoutMS:d?d+p:0,exhaustAllowed:!0}:{socketTimeoutMS:d};if(s&&t.rttPinger==null&&(t.rttPinger=new N7(t)),r=(0,Ks.now)(),s)return n=!0,u.exhaustCommand((0,Ks.ns)("admin.$cmd"),f,h,(g,_)=>g?o(g):a(_));n=!1,u.command((0,Ks.ns)("admin.$cmd"),f,h).then(a,o);return}(async()=>{let c=await(0,P7.makeSocket)(t.connectOptions),l=(0,P7.makeConnection)(t.connectOptions,c);r=(0,Ks.now)();try{return await(0,P7.performInitialHandshake)(l,t.connectOptions),l}catch(d){throw l.destroy(),d}})().then(c=>{if(av(t)){c.destroy();return}let l=(0,Ks.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(ov.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new sv.ServerHeartbeatSucceededEvent(t.address,l,c.hello,hG(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function $ye(t){return e=>{if(t.s.state===D0){process.nextTick(e);return}L6(t,D0);function r(){av(t)||L6(t,q6),e()}jht(t,(n,i)=>{if(n&&t.server.description.type===Us.ServerType.Unknown)return r();hG(t,i?.topologyVersion)&&(0,eh.setTimeout)(()=>{av(t)||t.monitorId?.wake()},0),r()})}}function $ht(t){return{processId:t.processId,counter:qye.Long.isLong(t.counter)?t.counter:qye.Long.fromNumber(t.counter)}}var N7=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,eh.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,eh.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,Ks.calculateDurationInMs)(e),this.monitorId=(0,eh.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,Ks.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,P7.connect)(this.monitor.connectOptions).then(i=>{this.measureAndReschedule(e,i)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":pG.LEGACY_HELLO_COMMAND;r.command((0,Ks.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};Aa.RTTPinger=N7;var uv=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,eh.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,Ks.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,Ks.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,eh.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,Ks.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,eh.clearTimeout)(this.timerId),this.timerId=(0,eh.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};Aa.MonitorInterval=uv;var F7=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};Aa.RTTSampler=F7});var vG=m(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.DEFAULT_OPTIONS=su.OPTIONS=void 0;su.resolveSRVRecord=Yht;su.parseOptions=Xht;var mG=require("dns"),Kht=CU(),Uht=require("url"),j6=qC(),Od=Sd(),Kye=U3(),Uye=iye(),it=Ne(),B7=Q1(),EG=k1(),yG=ol(),th=fs(),Vht=dG(),lo=et(),Up=Po(),gG=["authSource","replicaSet","loadBalanced"],Ght="loadBalanced option only supported with a single host in the URI",Hht="loadBalanced option not supported with a replicaSet option",zht="loadBalanced option not supported when directConnection is provided";function Hye(t){return async function(r){try{return await mG.promises[t](r)}catch(n){if(n.code===mG.TIMEOUT)return await mG.promises[t](r);throw n}}}var Wht=Hye("resolveSrv"),Jht=Hye("resolveTxt");async function Yht(t){if(typeof t.srvHost!="string")throw new it.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=Jht(e);r.then(void 0,lo.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,i=await Wht(n);if(i.length===0)throw new it.MongoAPIError("No addresses found at host");for(let{name:p}of i)(0,lo.checkParentDomainMatch)(p,e);let s=i.map(p=>lo.HostAddress.fromString(`${p.name}:${p.port??27017}`));bG(s,t,!0);let o;try{o=await r}catch(p){if(p.code!=="ENODATA"&&p.code!=="ENOTFOUND")throw p;return s}if(o.length>1)throw new it.MongoParseError("Multiple text records not allowed");let a=new Uht.URLSearchParams(o[0].join(""));if([...a.keys()].some(p=>!gG.includes(p)))throw new it.MongoParseError(`Text record may only set any of: ${gG.join(", ")}`);if(gG.some(p=>a.get(p)===""))throw new it.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=a.get("authSource")??void 0,l=a.get("replicaSet")??void 0,d=a.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!Od.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=j6.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&l&&(t.replicaSet=l),d==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new it.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return bG(s,t,!0),s}function Qht(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new it.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function Vp(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new it.MongoParseError(`${t} must be either "true" or "false"`)}}function _G(t,e){let r=(0,lo.parseInteger)(e);if(r!=null)return r;throw new it.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function cv(t,e){let r=_G(t,e);if(r<0)throw new it.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*Vye(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,i]=r.split(/:(.*)/);if(i==null)throw new it.MongoParseError("Cannot have undefined values in key value pairs");yield[n,i]}}var $6=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Xht(t,e=void 0,r={}){if(e!=null&&!(e instanceof B7.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new it.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new it.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new Kht.default(t),{hosts:i,isSRV:s}=n,o=Object.create(null);o.hosts=s?[]:i.map(lo.HostAddress.fromString);let a=new $6;if(n.pathname!=="/"&&n.pathname!==""){let h=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);h&&a.set("dbName",[h])}if(n.username!==""){let h={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(h.password=decodeURIComponent(n.password)),a.set("auth",[h])}for(let h of n.searchParams.keys()){let g=n.searchParams.getAll(h),_=/readPreferenceTags/i.test(h);if(!_&&g.length>1)throw new it.MongoInvalidArgumentError(`URI option "${h}" cannot appear more than once in the connection string`);if(!_&&g.includes(""))throw new it.MongoAPIError(`URI option "${h}" cannot be specified with no value`);a.has(h)||a.set(h,g)}let u=new $6(Object.entries(r).filter(([,h])=>h!=null));if(a.has("serverApi"))throw new it.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=a.get("authMechanismProperties");if(c){for(let h of c)if(/(^|,)ALLOWED_HOSTS:/.test(h))throw new it.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(u.has("loadBalanced"))throw new it.MongoParseError("loadBalanced is only a valid option in the URI");let l=new $6,d=new Set([...a.keys(),...u.keys()]);for(let h of d){let g=[],_=u.get(h);_!=null&&g.push(_);let S=a.get(h)??[];g.push(...S),l.set(h,g)}if(l.has("tls")||l.has("ssl")){let h=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(Vp.bind(null,"tls/ssl"));if(new Set(h).size!==1)throw new it.MongoParseError("All values of tls/ssl must be the same.")}Qht(l);let p=(0,lo.setDifference)(d,Array.from(Object.keys(su.OPTIONS)).map(h=>h.toLowerCase()));if(p.size!==0){let h=p.size>1?"options":"option",g=p.size>1?"are":"is";throw new it.MongoParseError(`${h} ${Array.from(p).join(", ")} ${g} not supported`)}for(let[h,g]of Object.entries(su.OPTIONS)){let _=l.get(h);if(!_||_.length===0)su.DEFAULT_OPTIONS.has(h)&&Gye(o,h,g,[su.DEFAULT_OPTIONS.get(h)]);else{let{deprecated:S}=g;if(S){let w=typeof S=="string"?`: ${S}`:"";(0,lo.emitWarning)(`${h} is a deprecated option${w}`)}Gye(o,h,g,_)}}if(o.credentials){let h=o.credentials.mechanism===Od.AuthMechanism.MONGODB_GSSAPI,g=o.credentials.mechanism===Od.AuthMechanism.MONGODB_X509,_=o.credentials.mechanism===Od.AuthMechanism.MONGODB_AWS,S=o.credentials.mechanism===Od.AuthMechanism.MONGODB_OIDC;if((h||g)&&l.has("authSource")&&o.credentials.source!=="$external")throw new it.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(h||g||_||S)&&o.dbName&&!l.has("authSource")&&(o.credentials=j6.MongoCredentials.merge(o.credentials,{source:o.dbName})),_&&o.credentials.username&&!o.credentials.password)throw new it.MongoMissingCredentialsError(`When using ${o.credentials.mechanism} password must be set when a username is specified`);o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===Od.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),bG(i,o,s),e&&o.autoEncryption&&(Uye.Encrypter.checkForMongoCrypt(),o.encrypter=new Uye.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=u.has("authSource")||a.has("authSource"),o.userSpecifiedReplicaSet=u.has("replicaSet")||a.has("replicaSet"),s){if(o.srvHost=i[0],o.directConnection)throw new it.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new it.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let h=!u.has("tls")&&!a.has("tls"),g=!u.has("ssl")&&!a.has("ssl");h&&g&&(o.tls=!0)}else if(a.has("srvMaxHosts")||u.has("srvMaxHosts")||a.has("srvServiceName")||u.has("srvServiceName"))throw new it.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new it.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new it.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new it.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(h=>a.get(h)??[]).some(h=>h.length>1))throw new it.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return o.mongoLoggerOptions=EG.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o}function bG(t,e,r){if(e.loadBalanced){if(t.length>1)throw new it.MongoParseError(Ght);if(e.replicaSet)throw new it.MongoParseError(Hht);if(e.directConnection)throw new it.MongoParseError(zht);if(r&&e.srvMaxHosts>0)throw new it.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function Gye(t,e,r,n){let{target:i,type:s,transform:o}=r,a=i??e;switch(s){case"boolean":t[a]=Vp(a,n[0]);break;case"int":t[a]=_G(a,n[0]);break;case"uint":t[a]=cv(a,n[0]);break;case"string":if(n[0]==null)break;t[a]=String(n[0]);break;case"record":if(!(0,lo.isRecord)(n[0]))throw new it.MongoParseError(`${a} must be an object`);t[a]=n[0];break;case"any":t[a]=n[0];break;default:{if(!o)throw new it.MongoParseError("Descriptors missing a type must define a transform");let u=o({name:a,options:t,values:n});t[a]=u;break}}}su.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,lo.isRecord)(r,["username","password"]))throw new it.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return j6.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(Od.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new it.MongoParseError(`authMechanism one of ${r}, got ${e}`);let i=t.credentials?.source;(n===Od.AuthMechanism.MONGODB_PLAIN||Od.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(i="$external");let s=t.credentials?.password;return n===Od.AuthMechanism.MONGODB_X509&&s===""&&(s=void 0),j6.MongoCredentials.merge(t.credentials,{mechanism:n,source:i,password:s})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[i,s]of Vye(n))try{r[i]=Vp(i,s)}catch{r[i]=s}else{if(!(0,lo.isRecord)(n))throw new it.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return j6.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return j6.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new it.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(B7.ServerApiVersion).join('", "')}"]`);if(!Object.values(B7.ServerApiVersion).some(n=>n===r))throw new it.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(B7.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new it.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let i of n)if(Object.keys(Kye.Compressor).includes(String(i)))e.add(String(i));else throw new it.MongoInvalidArgumentError(`${i} is not a valid compression mechanism. Must be one of: ${Object.keys(Kye.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=_G(t,e);if(r===4||r===6)return r;throw new it.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:Vp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Vp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Vp(t,r)}});if(!n)throw new it.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=cv(t,e);if(r===0)throw new it.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=cv(t,r);return e.readPreference?th.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new th.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:lo.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,lo.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new it.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof yG.ReadConcern||(0,lo.isRecord)(t,["level"]))return yG.ReadConcern.fromOptions({...e.readConcern,...t});throw new it.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return yG.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:th.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof th.ReadPreference)return th.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,lo.isRecord)(t,["mode"])){let r=th.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new it.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new th.ReadPreference(t,e.readPreference?.tags,r)}throw new it.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let i of r){let s=Object.create(null);if(typeof i=="string")for(let[o,a]of Vye(i))s[o]=a;if((0,lo.isRecord)(i))for(let[o,a]of Object.entries(i))s[o]=a;n.push(s)}return th.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(Vht.ServerMonitoringMode).includes(t))throw new it.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!Vp(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return Vp(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=Vp(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,lo.isRecord)(t)||t instanceof Up.WriteConcern)return Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new it.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:cv("wtimeout",t)}});if(r)return r;throw new it.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=Up.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:cv("wtimeoutMS",t)}});if(r)return r;throw new it.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new it.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new it.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new it.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(EG.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new it.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(EG.SeverityLevel).some(n=>n===r))throw new it.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};su.DEFAULT_OPTIONS=new $6(Object.entries(su.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var zye=m(L7=>{"use strict";Object.defineProperty(L7,"__esModule",{value:!0});L7.ListCollectionsOperation=void 0;var SG=kr(),Zht=et(),emt=ti(),lv=Vr(),q7=class extends emt.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=SG.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?SG.ExplainedCursorResponse:SG.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,Zht.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};L7.ListCollectionsOperation=q7;(0,lv.defineAspects)(q7,[lv.Aspect.READ_OPERATION,lv.Aspect.RETRYABLE,lv.Aspect.CURSOR_CREATING,lv.Aspect.SUPPORTS_RAW_DATA])});var AG=m(j7=>{"use strict";Object.defineProperty(j7,"__esModule",{value:!0});j7.ListCollectionsCursor=void 0;var tmt=hs(),rmt=zye(),nmt=qs(),wG=class t extends nmt.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new rmt.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,tmt.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};j7.ListCollectionsCursor=wG});var Jye=m($7=>{"use strict";Object.defineProperty($7,"__esModule",{value:!0});$7.RunCommandCursor=void 0;var K6=Ne(),Wye=hs(),imt=hK(),smt=_3(),omt=et(),amt=qs(),CG=class extends amt.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new K6.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new K6.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new K6.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new K6.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new K6.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,omt.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new smt.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,Wye.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){if(!this.session)throw new K6.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r=new imt.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,Wye.executeOperation)(this.client,r,this.timeoutContext)}};$7.RunCommandCursor=CG});var dv=m(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.ListIndexesOperation=rh.DropIndexOperation=rh.CreateIndexesOperation=void 0;var TG=kr(),umt=Ne(),OG=et(),xG=ti(),Cl=Vr(),cmt=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function lmt(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function dmt(t){return Array.isArray(t)&&t.length===2&&lmt(t[1])}function pmt(t){let e=new Map,r=!Array.isArray(t)||dmt(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[i,s]of n)e.set(i,s);else if((0,OG.isObject)(n))for(let[i,s]of Object.entries(n))e.set(i,s);return e}function fmt(t){let e=Object.entries(t).filter(([r])=>cmt.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var K7=class t extends xG.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=TG.MongoDBResponse,this.options=i??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(s=>{let o=s.key instanceof Map?s.key:new Map(Object.entries(s.key)),a=s.name??Array.from(o).flat().join("_");return{...fmt(s),name:a,key:o}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,i){return new t(e,r,n,i)}static fromIndexSpecification(e,r,n,i={}){let s=pmt(n),o={...i,key:s};return new t(e,r,[o],i)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,i=(0,OG.maxWireVersion)(e),s={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(i<9)throw new umt.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");s.commitQuorum=r.commitQuorum}return s}handleOk(e){return this.indexes.map(n=>n.name||"")}};rh.CreateIndexesOperation=K7;var U7=class extends xG.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=TG.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};rh.DropIndexOperation=U7;var V7=class extends xG.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=TG.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,OG.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},i={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(i.comment=this.options.comment),i}handleOk(e){return e}};rh.ListIndexesOperation=V7;(0,Cl.defineAspects)(V7,[Cl.Aspect.READ_OPERATION,Cl.Aspect.RETRYABLE,Cl.Aspect.CURSOR_CREATING,Cl.Aspect.SUPPORTS_RAW_DATA]);(0,Cl.defineAspects)(K7,[Cl.Aspect.WRITE_OPERATION,Cl.Aspect.SUPPORTS_RAW_DATA]);(0,Cl.defineAspects)(U7,[Cl.Aspect.WRITE_OPERATION,Cl.Aspect.SUPPORTS_RAW_DATA])});var Xye=m(pv=>{"use strict";Object.defineProperty(pv,"__esModule",{value:!0});pv.CreateCollectionOperation=void 0;pv.createCollections=wmt;var Yye=O1(),hmt=kr(),mmt=V6(),ymt=Ne(),gmt=Gi(),Emt=et(),bmt=ti(),IG=hs(),_mt=dv(),Qye=Vr(),vmt=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),Smt="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",U6=class extends bmt.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=hmt.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([i,s])=>s!=null&&typeof s!="function"&&!vmt.has(i);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new mmt.Collection(this.db,this.name,this.options)}};pv.CreateCollectionOperation=U6;async function wmt(t,e,r){let n=gmt.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(i){class o extends U6{buildCommandDocument(l,d){if(!l.description.loadBalanced&&(0,Emt.maxWireVersion)(l)<Yye.MIN_SUPPORTED_QE_WIRE_VERSION)throw new ymt.MongoCompatibilityError(`${Smt} The minimum server version required is ${Yye.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(l,d)}}let a=i.escCollection??`enxcol_.${e}.esc`,u=i.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[a,u]){let l=new o(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,IG.executeOperation)(t.client,l,n)}r.encryptedFields||(r={...r,encryptedFields:i})}let s=await(0,IG.executeOperation)(t.client,new U6(t,e,r),n);if(i){let o=_mt.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,IG.executeOperation)(t.client,o,n)}return s}(0,Qye.defineAspects)(U6,[Qye.Aspect.WRITE_OPERATION])});var rge=m(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});k0.DropDatabaseOperation=k0.DropCollectionOperation=void 0;k0.dropCollections=xmt;var Amt=M0(),ege=kr(),Cmt=qs(),Tmt=Ne(),Omt=Gi(),tge=ti(),Zye=hs(),G7=Vr(),G6=class extends tge.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=ege.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}};k0.DropCollectionOperation=G6;async function xmt(t,e,r){let n=Omt.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),i=t.client.s.options.autoEncryption?.encryptedFieldsMap,s=r.encryptedFields??i?.[`${t.databaseName}.${e}`];if(!s&&i&&(s=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new Cmt.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),s){let o=s.escCollection||`enxcol_.${e}.esc`,a=s.ecocCollection||`enxcol_.${e}.ecoc`;for(let u of[o,a]){let c=new G6(t,u,r);try{await(0,Zye.executeOperation)(t.client,c,n)}catch(l){if(!(l instanceof Amt.MongoServerError)||l.code!==Tmt.MONGODB_ERROR_CODES.NamespaceNotFound)throw l}}}return await(0,Zye.executeOperation)(t.client,new G6(t,e,r),n)}var H7=class extends tge.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=ege.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};k0.DropDatabaseOperation=H7;(0,G7.defineAspects)(G6,[G7.Aspect.WRITE_OPERATION]);(0,G7.defineAspects)(H7,[G7.Aspect.WRITE_OPERATION])});var ige=m(z7=>{"use strict";Object.defineProperty(z7,"__esModule",{value:!0});z7.ProfilingLevelOperation=void 0;var Imt=gr(),Rmt=kr(),nge=Ne(),Dmt=ti(),RG=class extends Rmt.MongoDBResponse{get was(){return this.get("was",Imt.BSONType.int,!0)}},DG=class extends Dmt.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=RG,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new nge.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new nge.MongoUnexpectedServerResponseError("Error with profile command")}};z7.ProfilingLevelOperation=DG});var kG=m(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0});J7.RenameOperation=void 0;var kmt=kr(),Mmt=V6(),Pmt=et(),Nmt=ti(),sge=Vr(),W7=class extends Nmt.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=kmt.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new Pmt.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,i=this.collection.s.namespace.withCollection(this.newName).toString(),s=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:i,dropTarget:s}}handleOk(e){return new Mmt.Collection(this.collection.db,this.newName,this.collection.s.options)}};J7.RenameOperation=W7;(0,sge.defineAspects)(W7,[sge.Aspect.WRITE_OPERATION])});var PG=m(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.SetProfilingLevelOperation=xd.ProfilingLevel=void 0;var Fmt=kr(),Bmt=Ne(),qmt=et(),Lmt=ti(),jmt=new Set(["off","slow_only","all"]);xd.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var MG=class extends Lmt.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Fmt.MongoDBResponse,this.options=n,r){case xd.ProfilingLevel.off:this.profile=0;break;case xd.ProfilingLevel.slowOnly:this.profile=1;break;case xd.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!jmt.has(r))throw new Bmt.MongoInvalidArgumentError(`Profiling level must be one of "${(0,qmt.enumToString)(xd.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};xd.SetProfilingLevelOperation=MG});var age=m(Q7=>{"use strict";Object.defineProperty(Q7,"__esModule",{value:!0});Q7.DbStatsOperation=void 0;var $mt=kr(),Kmt=ti(),oge=Vr(),Y7=class extends Kmt.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=$mt.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};Q7.DbStatsOperation=Y7;(0,oge.defineAspects)(Y7,[oge.Aspect.READ_OPERATION])});var Z7=m(X7=>{"use strict";Object.defineProperty(X7,"__esModule",{value:!0});X7.Db=void 0;var Umt=nK(),uge=gr(),Vmt=P0(),cge=V6(),H6=_i(),Gmt=fv(),Hmt=AG(),zmt=Jye(),lge=Ne(),Wmt=Xye(),dge=rge(),nh=hs(),Jmt=dv(),Ymt=ige(),Qmt=X$(),Xmt=kG(),Zmt=_3(),e0t=PG(),t0t=age(),r0t=ol(),pge=fs(),bs=et(),n0t=Po(),i0t=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],Gp=class{constructor(e,r,n){if(n=n??{},n=(0,bs.filterOptions)(n,i0t),typeof r=="string"&&r.includes("."))throw new lge.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:pge.ReadPreference.fromOptions(n),bsonOptions:(0,uge.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??bs.DEFAULT_PK_FACTORY,readConcern:r0t.ReadConcern.fromOptions(n),writeConcern:n0t.WriteConcern.fromOptions(n),namespace:new bs.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,bs.resolveOptions)(this,r),await(0,Wmt.createCollections)(this,e,r)}async command(e,r){return await(0,nh.executeOperation)(this.client,new Zmt.RunCommandOperation(this.s.namespace,e,(0,bs.resolveOptions)(void 0,{...(0,uge.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new Gmt.AggregationCursor(this.client,this.s.namespace,e,(0,bs.resolveOptions)(this,r))}admin(){return new Umt.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new lge.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new cge.Collection(this,e,(0,bs.resolveOptions)(this,r))}async stats(e){return await(0,nh.executeOperation)(this.client,new t0t.DbStatsOperation(this,(0,bs.resolveOptions)(this,e)))}listCollections(e={},r={}){return new Hmt.ListCollectionsCursor(this,e,(0,bs.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,nh.executeOperation)(this.client,new Xmt.RenameOperation(this.collection(e),r,(0,bs.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:pge.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,bs.resolveOptions)(this,r),await(0,dge.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,nh.executeOperation)(this.client,new dge.DropDatabaseOperation(this,(0,bs.resolveOptions)(this,e)))}async collections(e){return e=(0,bs.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new cge.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,nh.executeOperation)(this.client,Jmt.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,nh.executeOperation)(this.client,new Qmt.RemoveUserOperation(this,e,(0,bs.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,nh.executeOperation)(this.client,new e0t.SetProfilingLevelOperation(this,e,(0,bs.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,nh.executeOperation)(this.client,new Ymt.ProfilingLevelOperation(this,(0,bs.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,bs.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new Vmt.ChangeStream(this,e,(0,bs.resolveOptions)(this,r))}runCursorCommand(e,r){return new zmt.RunCommandCursor(this,e,r)}};X7.Db=Gp;Gp.SYSTEM_NAMESPACE_COLLECTION=H6.SYSTEM_NAMESPACE_COLLECTION;Gp.SYSTEM_INDEX_COLLECTION=H6.SYSTEM_INDEX_COLLECTION;Gp.SYSTEM_PROFILE_COLLECTION=H6.SYSTEM_PROFILE_COLLECTION;Gp.SYSTEM_USER_COLLECTION=H6.SYSTEM_USER_COLLECTION;Gp.SYSTEM_COMMAND_COLLECTION=H6.SYSTEM_COMMAND_COLLECTION;Gp.SYSTEM_JS_COLLECTION=H6.SYSTEM_JS_COLLECTION});var fge=m(eT=>{"use strict";Object.defineProperty(eT,"__esModule",{value:!0});eT.MongoDBAWS=void 0;var NG=gr(),FG=yl(),W6=Ne(),z6=et(),s0t=j1(),BG=HU(),o0t=qC(),a0t=Sd(),u0t=110,qG={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},LG=class extends s0t.AuthProvider{constructor(e){super(),this.credentialProvider=e,this.credentialFetcher=BG.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new BG.AWSSDKCredentialProvider(e):new BG.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new W6.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in FG.aws4)throw FG.aws4.kModuleError;let{sign:n}=FG.aws4;if((0,z6.maxWireVersion)(r)<9)throw new W6.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await c0t(e.credentials,this.credentialFetcher));let{credentials:i}=e,s=i.username,o=i.password,a=i.mechanismProperties.AWS_SESSION_TOKEN,u=s&&o&&a?{accessKeyId:s,secretAccessKey:o,sessionToken:a}:s&&o?{accessKeyId:s,secretAccessKey:o}:void 0,c=i.source,l=await(0,z6.randomBytes)(32),d={saslStart:1,mechanism:"MONGODB-AWS",payload:NG.serialize({r:l,p:u0t},qG)},p=await r.command((0,z6.ns)(`${c}.$cmd`),d,void 0),f=NG.deserialize(p.payload.buffer,qG),h=f.h,g=f.s.buffer;if(g.length!==64)throw new W6.MongoRuntimeError(`Invalid server nonce length ${g.length}, expected 64`);if(!z6.ByteUtils.equals(g.subarray(0,l.byteLength),l))throw new W6.MongoRuntimeError("Server nonce does not begin with client nonce");if(h.length<1||h.length>255||h.indexOf("..")!==-1)throw new W6.MongoRuntimeError(`Server returned an invalid host: "${h}"`);let _="Action=GetCallerIdentity&Version=2011-06-15",S=n({method:"POST",host:h,region:l0t(f.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":_.length,"X-MongoDB-Server-Nonce":z6.ByteUtils.toBase64(g),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:_},u),w={a:S.headers.Authorization,d:S.headers["X-Amz-Date"]};a&&(w.t=a);let C={saslContinue:1,conversationId:p.conversationId,payload:NG.serialize(w,qG)};await r.command((0,z6.ns)(`${c}.$cmd`),C,void 0)}};eT.MongoDBAWS=LG;async function c0t(t,e){function r(i){if(!i.AccessKeyId||!i.SecretAccessKey)throw new W6.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new o0t.MongoCredentials({username:i.AccessKeyId,password:i.SecretAccessKey,source:t.source,mechanism:a0t.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:i.Token}})}let n=await e.getCredentials();return r(n)}function l0t(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var mge=m(tT=>{"use strict";Object.defineProperty(tT,"__esModule",{value:!0});tT.finishCommandDocument=d0t;tT.startCommandDocument=p0t;var J6=gr(),hge=Sd();function d0t(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new J6.Binary(J6.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:hge.AuthMechanism.MONGODB_OIDC,payload:new J6.Binary(J6.BSON.serialize({jwt:t}))}}function p0t(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:hge.AuthMechanism.MONGODB_OIDC,payload:new J6.Binary(J6.BSON.serialize(e))}}});var UG=m(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.CallbackWorkflow=ih.AUTOMATED_TIMEOUT_MS=ih.HUMAN_TIMEOUT_MS=void 0;var f0t=require("timers/promises"),h0t=Ne(),yge=et(),jG=mge();ih.HUMAN_TIMEOUT_MS=3e5;ih.AUTOMATED_TIMEOUT_MS=6e4;var m0t=["accessToken","expiresInSeconds","refreshToken"],y0t="User provided OIDC callbacks must return a valid object with an accessToken.",$G=100,KG=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-$G}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let i=(0,jG.finishCommandDocument)(n);return i.db=r.source,{speculativeAuthenticate:i}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let i;return n?.speculativeAuthenticate?i=n.speculativeAuthenticate:i=await e.command((0,yge.ns)(r.source),(0,jG.startCommandDocument)(r),void 0),i}async finishAuthentication(e,r,n,i){await e.command((0,yge.ns)(r.source),(0,jG.finishCommandDocument)(n,i),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(g0t(r))throw new h0t.MongoMissingCredentialsError(y0t);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let i=Date.now()-this.lastExecutionTime;return i<=$G&&await(0,f0t.setTimeout)($G-i,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};ih.CallbackWorkflow=KG;function g0t(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>m0t.includes(e))}});var zG=m(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.AutomatedCallbackWorkflow=void 0;var VG=Ne(),gge=Gi(),E0t=nT(),GG=UG(),HG=class extends GG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let i=this.cache.getAccessToken();e.accessToken||(e.accessToken=i);try{return await this.finishAuthentication(e,r,i)}catch(s){if(s instanceof VG.MongoError&&s.code===VG.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw s}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:E0t.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let i=gge.Timeout.expires(GG.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),i])}catch(s){throw gge.TimeoutError.is(s)?(r.abort(),new VG.MongoOIDCError(`OIDC callback timed out after ${GG.AUTOMATED_TIMEOUT_MS}ms.`)):s}finally{i.clear()}}};rT.AutomatedCallbackWorkflow=HG});var bge=m(iT=>{"use strict";Object.defineProperty(iT,"__esModule",{value:!0});iT.callback=void 0;var Ege=WU(),WG=Ne(),b0t=et(),_0t=Object.freeze({Metadata:"true",Accept:"application/json"}),v0t="Azure endpoint did not return a value with only access_token and expires_in properties",S0t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",w0t=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new WG.MongoAzureError(S0t);let n=await A0t(e,r);if(!C0t(n))throw new WG.MongoAzureError(v0t);return n};iT.callback=w0t;async function A0t(t,e){let r=new URL(Ege.AZURE_BASE_URL);(0,Ege.addAzureParams)(r,t,e);let n=await(0,b0t.get)(r,{headers:_0t});if(n.status!==200)throw new WG.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let i=JSON.parse(n.body);return{accessToken:i.access_token,expiresInSeconds:Number(i.expires_in)}}function C0t(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var vge=m(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});sT.callback=void 0;var _ge=Ne(),T0t=et(),O0t="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",x0t=Object.freeze({"Metadata-Flavor":"Google"}),I0t="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",R0t=async t=>{let e=t.tokenAudience;if(!e)throw new _ge.MongoGCPError(I0t);return await D0t(e)};sT.callback=R0t;async function D0t(t){let e=new URL(O0t);e.searchParams.append("audience",t);let r=await(0,T0t.get)(e,{headers:x0t});if(r.status!==200)throw new _ge.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var Age=m(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0});oT.callback=void 0;var k0t=require("fs/promises"),M0t="/var/run/secrets/kubernetes.io/serviceaccount/token",Sge="AZURE_FEDERATED_TOKEN_FILE",wge="AWS_WEB_IDENTITY_TOKEN_FILE",P0t=async()=>{let t;return process.env[Sge]?t=process.env[Sge]:process.env[wge]?t=process.env[wge]:t=M0t,{accessToken:await(0,k0t.readFile)(t,"utf8")}};oT.callback=P0t});var YG=m(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});aT.TokenCache=void 0;var N0t=Ne(),hv=class extends N0t.MongoDriverError{},JG=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new hv("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new hv("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new hv("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};aT.TokenCache=JG});var Cge=m(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0});uT.callback=void 0;var F0t=require("fs"),B0t=Ne(),q0t="OIDC_TOKEN_FILE must be set in the environment.",L0t=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new B0t.MongoAWSError(q0t);return{accessToken:await F0t.promises.readFile(t,"utf8")}};uT.callback=L0t});var nT=m(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.MongoDBOIDC=ic.OIDC_WORKFLOWS=ic.OIDC_VERSION=void 0;var Oge=Ne(),j0t=j1(),cT=zG(),$0t=bge(),K0t=vge(),U0t=Age(),lT=YG(),V0t=Cge(),G0t="AuthContext must provide credentials.";ic.OIDC_VERSION=1;ic.OIDC_WORKFLOWS=new Map;ic.OIDC_WORKFLOWS.set("test",()=>new cT.AutomatedCallbackWorkflow(new lT.TokenCache,V0t.callback));ic.OIDC_WORKFLOWS.set("azure",()=>new cT.AutomatedCallbackWorkflow(new lT.TokenCache,$0t.callback));ic.OIDC_WORKFLOWS.set("gcp",()=>new cT.AutomatedCallbackWorkflow(new lT.TokenCache,K0t.callback));ic.OIDC_WORKFLOWS.set("k8s",()=>new cT.AutomatedCallbackWorkflow(new lT.TokenCache,U0t.callback));var QG=class extends j0t.AuthProvider{constructor(e){if(super(),!e)throw new Oge.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:i}=e;if(i?.speculativeAuthenticate?.done&&!n)return;let s=Tge(e);n?await this.workflow.reauthenticate(r,s):await this.workflow.execute(r,s,i)}async prepare(e,r){let{connection:n}=r,i=Tge(r),s=await this.workflow.speculativeAuth(n,i);return{...e,...s}}};ic.MongoDBOIDC=QG;function Tge(t){let{credentials:e}=t;if(!e)throw new Oge.MongoMissingCredentialsError(G0t);return e}});var Ige=m(dT=>{"use strict";Object.defineProperty(dT,"__esModule",{value:!0});dT.HumanCallbackWorkflow=void 0;var H0t=gr(),mv=Ne(),xge=Gi(),z0t=nT(),XG=UG(),ZG=class extends XG.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let a=this.cache.getAccessToken();e.accessToken=a;try{return await this.finishAuthentication(e,r,a)}catch(u){if(u instanceof mv.MongoError&&u.code===mv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw u}}if(this.cache.hasRefreshToken){let a=this.cache.getRefreshToken(),u=await this.fetchAccessToken(this.cache.getIdpInfo(),r,a);this.cache.put(u),e.accessToken=u.accessToken;try{return await this.finishAuthentication(e,r,u.accessToken)}catch(c){if(c instanceof mv.MongoError&&c.code===mv.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),i=n.conversationId,s=H0t.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(s,r);return this.cache.put(o,s),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,i)}async fetchAccessToken(e,r,n){let i=new AbortController,s={timeoutContext:i.signal,version:z0t.OIDC_VERSION,idpInfo:e};r.username&&(s.username=r.username),n&&(s.refreshToken=n);let o=xge.Timeout.expires(XG.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(s),o])}catch(a){throw xge.TimeoutError.is(a)?(i.abort(),new mv.MongoOIDCError(`OIDC callback timed out after ${XG.HUMAN_TIMEOUT_MS}ms.`)):a}finally{o.clear()}}};dT.HumanCallbackWorkflow=ZG});var Rge=m(pT=>{"use strict";Object.defineProperty(pT,"__esModule",{value:!0});pT.Plain=void 0;var W0t=gr(),J0t=Ne(),Y0t=et(),Q0t=j1(),eH=class extends Q0t.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new J0t.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:i,password:s}=n,a={saslStart:1,mechanism:"PLAIN",payload:new W0t.Binary(Buffer.from(`\0${i}\0${s}`)),autoAuthorize:1};await r.command((0,Y0t.ns)("$external.$cmd"),a,void 0)}};pT.Plain=eH});var Pge=m((dgr,Mge)=>{"use strict";var Dge=t=>t.codePointAt(0),X0t=t=>t[0],Z0t=t=>t[t.length-1];function kge(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let s=t.charCodeAt(n+1);if(s>=56320&&s<=57343){e.push((i-55296)*1024+s-56320+65536),n+=1;continue}}e.push(i)}return e}function yv({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:i,bidirectional_l:s},o,a={}){let u=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=kge(o).map(w=>u.get(w)?32:w).filter(w=>!c.get(w)),d=String.fromCodePoint.apply(null,l).normalize("NFKC"),p=kge(d);if(p.some(w=>n.get(w)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(a.allowUnassigned!==!0&&p.some(C=>t.get(C)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let h=p.some(w=>i.get(w)),g=p.some(w=>s.get(w));if(h&&g)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let _=i.get(Dge(X0t(d))),S=i.get(Dge(Z0t(d)));if(h&&!(_&&S))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return d}yv.saslprep=yv;yv.default=yv;Mge.exports=yv});var Bge=m((pgr,Fge)=>{Fge.exports=Hp;function Hp(t,e){if(!(this instanceof Hp))return new Hp(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?fT(this.deduplicate.length):null}Hp.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Hp.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Hp.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;eyt(this,t)}nyt(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],s=r[i];if(!s){if(e)return;s=r[i]=new Array(32768)}r=s}return r};Hp.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],i=r&&r[n];return!i&&!e&&(i=r[n]=new Nge(t,fT(this.pageSize)),t>=this.length&&(this.length=t+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!e&&(i.buffer=ryt(i.buffer),i.deduplicate=0),i};Hp.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var i=r[n],s=tyt(e,this.pageSize);i?i.buffer=s:r[n]=new Nge(t,s)};Hp.prototype.toBuffer=function(){for(var t=new Array(this.length),e=fT(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<t.length;i++)t[r++]=n&&n[i]?n[i].buffer:e;return Buffer.concat(t)};function eyt(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function tyt(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=fT(e);return t.copy(r),r}function fT(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function ryt(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function Nge(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function nyt(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var Lge=m((fgr,qge)=>{var iyt=Bge();qge.exports=oh;function oh(t){if(!(this instanceof oh))return new oh(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||iyt(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!oyt(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}oh.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};oh.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};oh.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,i=this.getByte(n);return this.setByte(n,e?i|128>>r:i&(255^128>>r))};oh.prototype.toBuffer=function(){for(var t=syt(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};oh.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===e?!1:(i.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function syt(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function oyt(t){return!(t&t-1)}});var jge=m(gv=>{"use strict";var ayt=gv&&gv.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gv,"__esModule",{value:!0});gv.createMemoryCodePoints=cyt;var uyt=ayt(Lge());function cyt(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,uyt.default)({buffer:l})}let n=r(),i=r(),s=r(),o=r(),a=r(),u=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:i,non_ASCII_space_characters:s,prohibited_characters:o,bidirectional_r_al:a,bidirectional_l:u}}});var $ge=m(tH=>{"use strict";Object.defineProperty(tH,"__esModule",{value:!0});var lyt=require("zlib");tH.default=(0,lyt.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var Vge=m((rH,Uge)=>{"use strict";var Kge=rH&&rH.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dyt=Kge(Pge()),pyt=jge(),fyt=Kge($ge()),hyt=(0,pyt.createMemoryCodePoints)(fyt.default);function Ev(t,e){return(0,dyt.default)(hyt,t,e)}Ev.saslprep=Ev;Ev.default=Ev;Uge.exports=Ev});var Qge=m(Y6=>{"use strict";Object.defineProperty(Y6,"__esModule",{value:!0});Y6.ScramSHA256=Y6.ScramSHA1=void 0;var myt=Vge(),N0=require("crypto"),nH=gr(),Tl=Ne(),yT=et(),yyt=j1(),Gge=Sd(),gT=class extends yyt.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,i=r.credentials;if(!i)throw new Tl.MongoMissingCredentialsError("AuthContext must provide credentials.");let s=await(0,yT.randomBytes)(24);return r.nonce=s,{...e,speculativeAuthenticate:{...Jge(n,i,s),db:i.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await Yge(this.cryptoMethod,n.speculativeAuthenticate,e):await gyt(this.cryptoMethod,e)}};function zge(t){return t.replace("=","=3D").replace(",","=2C")}function Wge(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function Jge(t,e,r){let n=zge(e.username);return{saslStart:1,mechanism:t==="sha1"?Gge.AuthMechanism.MONGODB_SCRAM_SHA1:Gge.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new nH.Binary(Buffer.concat([Buffer.from("n,,","utf8"),Wge(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function gyt(t,e){let{connection:r,credentials:n}=e;if(!n)throw new Tl.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new Tl.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let i=e.nonce,s=n.source,o=Jge(t,n,i),a=await r.command((0,yT.ns)(`${s}.$cmd`),o,void 0);await Yge(t,a,e)}async function Yge(t,e,r){let n=r.connection,i=r.credentials;if(!i)throw new Tl.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new Tl.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let s=r.nonce,o=i.source,a=zge(i.username),u=i.password,c=t==="sha256"?(0,myt.saslprep)(u):Eyt(a,u),l=Buffer.isBuffer(e.payload)?new nH.Binary(e.payload):e.payload,d=Hge(l),p=parseInt(d.i,10);if(p&&p<4096)throw new Tl.MongoRuntimeError(`Server returned an invalid iteration count ${p}`);let f=d.s,h=d.r;if(h.startsWith("nonce"))throw new Tl.MongoRuntimeError(`Server returned an invalid nonce: ${h}`);let g=`c=biws,r=${h}`,_=wyt(c,Buffer.from(f,"base64"),p,t),S=hT(t,_,"Client Key"),w=hT(t,_,"Server Key"),C=_yt(t,S),A=[Wge(a,s),l.toString("utf8"),g].join(","),O=hT(t,C,A),x=`p=${byt(S,O)}`,R=[g,x].join(","),M=hT(t,w,A),I={saslContinue:1,conversationId:e.conversationId,payload:new nH.Binary(Buffer.from(R))},F=await n.command((0,yT.ns)(`${o}.$cmd`),I,void 0),B=Hge(F.payload);if(!Ayt(Buffer.from(B.v,"base64"),M))throw new Tl.MongoRuntimeError("Server returned an invalid signature");if(F.done!==!1)return;let U={saslContinue:1,conversationId:F.conversationId,payload:Buffer.alloc(0)};await n.command((0,yT.ns)(`${o}.$cmd`),U,void 0)}function Hge(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let i=0;i<n.length;i++){let s=(n[i].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[s[0]]=s[1]}return r}function Eyt(t,e){if(typeof t!="string")throw new Tl.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new Tl.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new Tl.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=N0.createHash("md5")}catch(n){throw N0.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function byt(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let i=0;i<r;i+=1)n.push(t[i]^e[i]);return Buffer.from(n).toString("base64")}function _yt(t,e){return N0.createHash(t).update(e).digest()}function hT(t,e,r){return N0.createHmac(t,e).update(r).digest()}var mT={},iH=0;function vyt(){mT={},iH=0}var Syt={sha256:32,sha1:20};function wyt(t,e,r,n){let i=[t,e.toString("base64"),r].join("_");if(mT[i]!=null)return mT[i];let s=N0.pbkdf2Sync(t,e,r,Syt[n],n);return iH>=200&&vyt(),mT[i]=s,iH+=1,s}function Ayt(t,e){if(t.length!==e.length)return!1;if(typeof N0.timingSafeEqual=="function")return N0.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var sH=class extends gT{constructor(){super("sha1")}};Y6.ScramSHA1=sH;var oH=class extends gT{constructor(){super("sha256")}};Y6.ScramSHA256=oH});var e2e=m(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0});ET.X509=void 0;var Xge=Ne(),Cyt=et(),Tyt=j1(),aH=class extends Tyt.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new Xge.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:Zge(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new Xge.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,Cyt.ns)("$external.$cmd"),Zge(n),void 0)}};ET.X509=aH;function Zge(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var lH=m(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0});bT.MongoClientAuthProviders=void 0;var Oyt=BC(),xyt=fge(),n2e=nT(),Iyt=zG(),Ryt=Ige(),t2e=YG(),Dyt=Rge(),ah=Sd(),r2e=Qge(),kyt=e2e(),cH=Ne(),Myt=new Map([[ah.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new xyt.MongoDBAWS(t)],[ah.AuthMechanism.MONGODB_CR,()=>{throw new cH.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[ah.AuthMechanism.MONGODB_GSSAPI,()=>new Oyt.GSSAPI],[ah.AuthMechanism.MONGODB_OIDC,t=>new n2e.MongoDBOIDC(Pyt(t))],[ah.AuthMechanism.MONGODB_PLAIN,()=>new Dyt.Plain],[ah.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new r2e.ScramSHA1],[ah.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new r2e.ScramSHA256],[ah.AuthMechanism.MONGODB_X509,()=>new kyt.X509]]),uH=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let i=Myt.get(e);if(!i)throw new cH.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let s=i(r);return this.existingProviders.set(e,s),s}};bT.MongoClientAuthProviders=uH;function Pyt(t){if(t.OIDC_HUMAN_CALLBACK)return new Ryt.HumanCallbackWorkflow(new t2e.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new Iyt.AutomatedCallbackWorkflow(new t2e.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=n2e.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new cH.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var dH=m(vT=>{"use strict";Object.defineProperty(vT,"__esModule",{value:!0});vT.ClientBulkWriteOperation=void 0;var Nyt=kr(),Fyt=et(),Byt=ti(),F0=Vr(),_T=class extends Byt.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=Nyt.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new Fyt.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};vT.ClientBulkWriteOperation=_T;(0,F0.defineAspects)(_T,[F0.Aspect.WRITE_OPERATION,F0.Aspect.SKIP_COLLATION,F0.Aspect.CURSOR_CREATING,F0.Aspect.RETRYABLE,F0.Aspect.COMMAND_BATCHING,F0.Aspect.SUPPORTS_RAW_DATA])});var s2e=m(ST=>{"use strict";Object.defineProperty(ST,"__esModule",{value:!0});ST.ClientBulkWriteCursor=void 0;var qyt=dH(),Lyt=hs(),i2e=et(),jyt=qs(),pH=class t extends jyt.AbstractCursor{constructor(e,r,n={}){super(e,new i2e.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,i2e.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new qyt.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,Lyt.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};ST.ClientBulkWriteCursor=pH});var d2e=m(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.buildReplaceOneOperation=Hn.buildUpdateManyOperation=Hn.buildUpdateOneOperation=Hn.buildDeleteManyOperation=Hn.buildDeleteOneOperation=Hn.buildInsertOneOperation=Hn.ClientBulkWriteCommandBuilder=void 0;Hn.buildOperation=yH;var fH=gr(),o2e=K3(),bv=Ne(),u2e=Y2(),gH=et(),a2e=1e3,mH=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??gH.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let i=0,s=0,o=this.baseCommand(),a=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let u=this.models[this.currentModelIndex],c=u.namespace,l=a.get(c);if((u.name==="deleteMany"||u.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let d=yH(u,l,this.pkFactory,this.options),p;try{p=fH.BSON.serialize(d)}catch(f){throw new bv.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:f})}if(hH("ops",p,n),i+p.length<e&&o.ops.documents.length<r)i=a2e+o.ops.push(d,p),this.currentModelIndex++;else break}else{a.set(c,s);let d={ns:c},p=yH(u,s,this.pkFactory,this.options),f,h;try{f=fH.BSON.serialize(d),h=fH.BSON.serialize(p)}catch(g){throw new bv.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:g})}if(hH("nsInfo",f,n),hH("ops",h,n),i+f.length+h.length<e&&o.ops.documents.length<r)i=a2e+o.nsInfo.push(d,f)+o.ops.push(p,h),s++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new o2e.DocumentSequence("ops"),nsInfo:new o2e.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Hn.ClientBulkWriteCommandBuilder=mH;function hH(t,e,r){if(e.length>r)throw new bv.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var $yt=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Hn.buildInsertOneOperation=$yt;var Kyt=(t,e)=>c2e(t,e,!1);Hn.buildDeleteOneOperation=Kyt;var Uyt=(t,e)=>c2e(t,e,!0);Hn.buildDeleteManyOperation=Uyt;function c2e(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var Vyt=(t,e,r)=>l2e(t,e,!1,r);Hn.buildUpdateOneOperation=Vyt;var Gyt=(t,e,r)=>l2e(t,e,!0,r);Hn.buildUpdateManyOperation=Gyt;function Hyt(t,e){if(!(0,gH.hasAtomicOperators)(t,e))throw new bv.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function l2e(t,e,r,n){Hyt(t.update,n);let i={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(i.hint=t.hint),t.upsert&&(i.upsert=t.upsert),t.arrayFilters&&(i.arrayFilters=t.arrayFilters),t.collation&&(i.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(i.sort=(0,u2e.formatSort)(t.sort)),i}var zyt=(t,e)=>{if((0,gH.hasAtomicOperators)(t.replacement))throw new bv.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,u2e.formatSort)(t.sort)),r};Hn.buildReplaceOneOperation=zyt;function yH(t,e,r,n){switch(t.name){case"insertOne":return(0,Hn.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Hn.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Hn.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Hn.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,Hn.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,Hn.buildReplaceOneOperation)(t,e)}}});var p2e=m(wT=>{"use strict";Object.defineProperty(wT,"__esModule",{value:!0});wT.ClientBulkWriteResultsMerger=void 0;var Wyt=M0(),Jyt=Ne(),Yyt={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},EH=class{static unacknowledged(){return Yyt}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let i=new Jyt.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw i.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),i.partialResult=this.result,i}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof Wyt.MongoWriteConcernError){let i=n.result;if(r={insertedCount:i.nInserted,upsertedCount:i.nUpserted,matchedCount:i.nMatched,modifiedCount:i.nModified,deletedCount:i.nDeleted,writeConcernError:i.writeConcernError},this.options.verboseResults&&i.cursor.firstBatch)for(let s of i.cursor.firstBatch)s.ok===1&&this.processDocument(e,s)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let i={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(i.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,i)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};wT.ClientBulkWriteResultsMerger=EH});var m2e=m(AT=>{"use strict";Object.defineProperty(AT,"__esModule",{value:!0});AT.ClientBulkWriteExecutor=void 0;var f2e=qs(),Qyt=s2e(),B0=Ne(),Xyt=Gi(),Zyt=et(),egt=Po(),tgt=hs(),rgt=dH(),ngt=d2e(),h2e=p2e(),bH=class{constructor(e,r,n){if(r.length===0)throw new B0.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=egt.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new B0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new B0.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new ngt.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,Zyt.resolveTimeoutOptions)(this.client,this.options),i=Xyt.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let s=new rgt.ClientBulkWriteOperation(r,this.options);await(0,tgt.executeOperation)(this.client,s,i)}return h2e.ClientBulkWriteResultsMerger.unacknowledged()}else{let s=new h2e.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new f2e.CursorTimeoutContext(i,Symbol()),a={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:f2e.CursorTimeoutMode.LIFETIME}},u=new Qyt.ClientBulkWriteCursor(this.client,r,a);try{await s.merge(u)}catch(c){if(c instanceof B0.MongoServerError&&!(c instanceof B0.MongoClientBulkWriteError)){let l=new B0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=s.bulkWriteResult,l}else throw c}}if(s.writeConcernErrors.length>0||s.writeErrors.size>0){let o=new B0.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=s.writeConcernErrors,o.writeErrors=s.writeErrors,o.partialResult=s.bulkWriteResult,o}return s.bulkWriteResult}}};AT.ClientBulkWriteExecutor=bH});var AH=m(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.WaitingForSuitableServerEvent=sc.ServerSelectionSucceededEvent=sc.ServerSelectionFailedEvent=sc.ServerSelectionStartedEvent=sc.ServerSelectionEvent=void 0;var igt=et(),CT=_i(),q0=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};sc.ServerSelectionEvent=q0;var _H=class extends q0{constructor(e,r,n){super(e,r,n),this.name=CT.SERVER_SELECTION_STARTED,this.message="Server selection started"}};sc.ServerSelectionStartedEvent=_H;var vH=class extends q0{constructor(e,r,n,i){super(e,r,i),this.name=CT.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};sc.ServerSelectionFailedEvent=vH;var SH=class extends q0{constructor(e,r,n,i){super(e,r,i),this.name=CT.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:s,port:o}=igt.HostAddress.fromString(n).toHostPort();this.serverHost=s,this.serverPort=o}};sc.ServerSelectionSucceededEvent=SH;var wH=class extends q0{constructor(e,r,n,i){super(e,r,i),this.name=CT.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};sc.WaitingForSuitableServerEvent=wH});var TH=m(Q6=>{"use strict";Object.defineProperty(Q6,"__esModule",{value:!0});Q6.SrvPoller=Q6.SrvPollingEvent=void 0;var sgt=require("dns"),CH=require("timers"),ogt=Ne(),agt=tu(),_v=et(),TT=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>_v.HostAddress.fromSrvRecord(e).toString()))}};Q6.SrvPollingEvent=TT;var OT=class t extends agt.TypedEventEmitter{constructor(e){if(super(),this.on("error",_v.noop),!e||!e.srvHost)throw new ogt.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,CH.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,CH.clearTimeout)(this._timeout),this._timeout=(0,CH.setTimeout)(()=>{this._poll().then(void 0,_v.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new TT(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await sgt.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let i of r)try{(0,_v.checkParentDomainMatch)(i.name,this.srvHost),n.push(i)}catch(s){(0,_v.squashError)(s)}if(!n.length){this.failure();return}this.success(n)}};Q6.SrvPoller=OT;OT.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var w2e=m(X6=>{"use strict";Object.defineProperty(X6,"__esModule",{value:!0});X6.ServerCapabilities=X6.Topology=void 0;var ugt=vG(),Ta=_i(),Id=Ne(),Fn=k1(),cgt=tu(),vv=fs(),OH=Gi(),Ca=et(),Kt=Xa(),uh=I7(),y2e=lG(),IH=ev(),xH=d3(),ch=AH(),xT=TH(),g2e=TV(),lgt=0,Sv=(0,Ca.makeStateMachine)({[Kt.STATE_CLOSED]:[Kt.STATE_CLOSED,Kt.STATE_CONNECTING],[Kt.STATE_CONNECTING]:[Kt.STATE_CONNECTING,Kt.STATE_CLOSING,Kt.STATE_CONNECTED,Kt.STATE_CLOSED],[Kt.STATE_CONNECTED]:[Kt.STATE_CONNECTED,Kt.STATE_CLOSING,Kt.STATE_CLOSED],[Kt.STATE_CLOSING]:[Kt.STATE_CLOSING,Kt.STATE_CLOSED]}),po=class t extends cgt.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",Ca.noop),this.client=e,n=n??{hosts:[Ca.HostAddress.fromString("localhost:27017")],...Object.fromEntries(ugt.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[Ca.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let i=[];for(let c of r)if(typeof c=="string")i.push(Ca.HostAddress.fromString(c));else if(c instanceof Ca.HostAddress)i.push(c);else throw new Id.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let s=dgt(n),o=lgt++,a=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=i.length?i:(0,Ca.shuffle)(i,n.srvMaxHosts),u=new Map;for(let c of a)u.set(c.toString(),new IH.ServerDescription(c));this.waitQueue=new Ca.List,this.s={id:o,options:n,seedlist:i,state:Kt.STATE_CLOSED,description:new g2e.TopologyDescription(s,u,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new xT.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,i=r!==Kt.TopologyType.Sharded&&n===Kt.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(xT.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);i&&!o&&(this.s.srvPoller?.on(xT.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(E2e(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new uh.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new IT(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Kt.STATE_CONNECTED)return this;Sv(this,Kt.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new uh.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new uh.TopologyDescriptionChangedEvent(this.s.id,new g2e.TopologyDescription(Kt.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(a=>[a.address,v2e(this,a)])),this.s.options.loadBalanced)for(let a of r){let u=new IH.ServerDescription(a.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(u)}let n=this.client.s.options.serverSelectionTimeoutMS,i=e.readPreference??vv.ReadPreference.primary,s=OH.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"handshake",...e,timeoutContext:s};try{let a=await this.selectServer((0,xH.readPreferenceServerSelector)(i),o);if(!(this.s.options.__skipPingOnConnect===!0)&&this.s.credentials){let c=await a.pool.checkOut({timeoutContext:s});return a.pool.checkIn(c),Sv(this,Kt.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return Sv(this,Kt.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(a){throw this.close(),a}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===Kt.STATE_CLOSED||this.s.state===Kt.STATE_CLOSING)){for(let e of this.s.servers.values())_2e(e,this);this.s.servers.clear(),Sv(this,Kt.STATE_CLOSING),S2e(this.waitQueue,new Id.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(xT.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),Sv(this,Kt.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new uh.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,xH.readPreferenceServerSelector)(vv.ReadPreference.fromString(e));else{let f;e instanceof vv.ReadPreference?f=e:(vv.ReadPreference.translate(r),f=r.readPreference||vv.ReadPreference.primary),n=(0,xH.readPreferenceServerSelector)(f)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionStartedEvent(e,this.description,r.operationName));let i;r.timeoutContext?i=r.timeoutContext.serverSelectionTimeout:i=OH.Timeout.expires(r.serverSelectionTimeoutMS??0);let s=this.description.type===Kt.TopologyType.Sharded,o=r.session,a=o&&o.transaction;if(s&&a&&a.server)return this.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionSucceededEvent(e,this.description,a.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear(),a.server;let{promise:u,resolve:c,reject:l}=(0,Ca.promiseWithResolvers)(),d={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:a,resolve:c,reject:l,cancelled:!1,startTime:(0,Ca.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},p=(0,Ca.addAbortListener)(r.signal,function(){d.cancelled=!0,l(this.reason)});this.waitQueue.push(d),b2e(this);try{i?.throwIfExpired();let f=await(i?Promise.race([u,i]):u);return r.timeoutContext?.csotEnabled()&&f.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=f.description.minRoundTripTime),f}catch(f){if(OH.TimeoutError.is(f)){d.cancelled=!0;let h=new Id.MongoServerSelectionError(`Server selection timed out after ${i?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionFailedEvent(e,this.description,h,r.operationName)),r.timeoutContext?.csotEnabled()?new Id.MongoOperationTimeoutError("Timed out during server selection",{cause:h}):h}throw f}finally{p?.[Ca.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||pgt(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let i=e.$clusterTime;i&&(0,Kt._advanceClusterTime)(this,i);let s=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new Id.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!s){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new uh.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}E2e(this,e),this.waitQueue.length>0&&b2e(this),s||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new uh.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Kt.STATE_CONNECTED}isDestroyed(){return this.s.state===Kt.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(i=>i.type!==Kt.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};X6.Topology=po;po.SERVER_OPENING=Ta.SERVER_OPENING;po.SERVER_CLOSED=Ta.SERVER_CLOSED;po.SERVER_DESCRIPTION_CHANGED=Ta.SERVER_DESCRIPTION_CHANGED;po.TOPOLOGY_OPENING=Ta.TOPOLOGY_OPENING;po.TOPOLOGY_CLOSED=Ta.TOPOLOGY_CLOSED;po.TOPOLOGY_DESCRIPTION_CHANGED=Ta.TOPOLOGY_DESCRIPTION_CHANGED;po.ERROR=Ta.ERROR;po.OPEN=Ta.OPEN;po.CONNECT=Ta.CONNECT;po.CLOSE=Ta.CLOSE;po.TIMEOUT=Ta.TIMEOUT;function _2e(t,e){for(let r of Ta.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(po.SERVER_CLOSED,new uh.ServerClosedEvent(e.s.id,t.description.address));for(let r of Ta.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function dgt(t){return t?.directConnection?Kt.TopologyType.Single:t?.replicaSet?Kt.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Kt.TopologyType.LoadBalanced:Kt.TopologyType.Unknown}function v2e(t,e){t.emitAndLog(po.SERVER_OPENING,new uh.ServerOpeningEvent(t.s.id,e.address));let r=new y2e.Server(t,e,t.s.options);for(let n of Ta.SERVER_RELAY_EVENTS)r.on(n,i=>t.emit(n,i));return r.on(y2e.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function E2e(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof Id.MongoError&&e.error.hasErrorLabel(Id.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(Id.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Kt.ServerType.Unknown&&n===Kt.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=v2e(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let i=t.s.servers.get(n);t.s.servers.delete(n),i&&_2e(i,t)}}function S2e(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function b2e(t){if(t.s.state===Kt.STATE_CLOSED){S2e(t.waitQueue,new Id.MongoTopologyClosedError);return}let e=t.description.type===Kt.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let i=0;i<n;++i){let s=t.waitQueue.shift();if(!s||s.cancelled)continue;let o;try{let c=s.serverSelector,l=s.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);continue}let a;if(o.length===0){s.waitingLogged||(t.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.WaitingForSuitableServerEvent(s.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,Ca.now)()-s.startTime):-1,s.operationName)),s.waitingLogged=!0),t.waitQueue.push(s);continue}else if(o.length===1)a=t.s.servers.get(o[0].address);else{let c=(0,Ca.shuffle)(o,2),l=t.s.servers.get(c[0].address),d=t.s.servers.get(c[1].address);a=l&&d&&l.s.operationCount<d.s.operationCount?l:d}if(!a){let c=new Id.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);return}let u=s.transaction;e&&u&&u.isActive&&a&&u.pinServer(a),t.client.mongoLogger?.willLog(Fn.MongoLoggableComponent.SERVER_SELECTION,Fn.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Fn.MongoLoggableComponent.SERVER_SELECTION,new ch.ServerSelectionSucceededEvent(s.serverSelector,s.topologyDescription,a.pool.address,s.operationName)),s.resolve(a)}if(t.waitQueue.length>0)for(let[,i]of t.s.servers)process.nextTick(function(){return i.requestCheck()})}function pgt(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,IH.compareTopologyVersion)(n,e.topologyVersion)>0}var IT=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}};X6.ServerCapabilities=IT});var Q1=m(Z6=>{"use strict";Object.defineProperty(Z6,"__esModule",{value:!0});Z6.MongoClient=Z6.ServerApiVersion=void 0;var RH=require("fs"),fgt=gr(),hgt=P0(),mgt=qC(),ygt=Sd(),DH=sU(),ggt=kr(),A2e=vG(),Egt=_i(),bgt=Z7(),kH=Ne(),_gt=lH(),C2e=k1(),vgt=tu(),Sgt=m2e(),wgt=hs(),Agt=Vr(),T2e=fs(),Cgt=R6(),Tgt=d3(),O2e=w2e(),x2e=I6(),Ji=et();Z6.ServerApiVersion=Object.freeze({v1:"1"});var RT=class extends vgt.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",Ji.noop),this.options=(0,A2e.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(s=>s!==C2e.SeverityLevel.OFF);this.mongoLogger=n?new C2e.MongoLogger(this.options.mongoLoggerOptions):void 0;let i=this;this.s={url:e,bsonOptions:(0,fgt.resolveBSONOptions)(this.options),namespace:(0,Ji.ns)("admin"),hasBeenClosed:!1,sessionPool:new x2e.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new _gt.MongoClientAuthProviders,get options(){return i.options},get readConcern(){return i.options.readConcern},get writeConcern(){return i.options.writeConcern},get readPreference(){return i.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,DH.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,DH.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,DH.addContainerMetadata)(this.options.metadata).then(void 0,Ji.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(s=>(0,Ji.isHostMatch)(Ji.DOCUMENT_DB_CHECK,s.host)),r=(0,Ji.isHostMatch)(Ji.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(s=>(0,Ji.isHostMatch)(Ji.COSMOS_DB_CHECK,s.host)),i=(0,Ji.isHostMatch)(Ji.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",Ji.DOCUMENT_DB_MSG):(n.length!==0||i)&&this.mongoLogger?.info("client",Ji.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new kH.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new Sgt.ClientBulkWriteExecutor(this,e,(0,Ji.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await RH.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await RH.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await RH.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,A2e.resolveSRVRecord)(e);for(let[i,s]of n.entries())e.hosts[i]=s}if(e.credentials?.mechanism===ygt.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||mgt.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let s of e.hosts)if(!(0,Ji.hostMatchesWildcards)(s.toHostPort().host,n))throw new kH.MongoInvalidArgumentError(`Host '${s}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new O2e.Topology(this,e.hosts,e),this.topology.once(O2e.Topology.OPEN,()=>this.emit("open",this));for(let n of Egt.MONGO_CLIENT_EVENTS)this.topology.on(n,(...i)=>this.emit(n,...i));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,c=>c.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,Tgt.readPreferenceServerSelector)(T2e.ReadPreference.primaryPreferred),i=this.topology.description,s=Array.from(i.servers.values());if(n(i,s).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:l})=>l);if(c.length!==0)try{class l extends Agt.AbstractOperation{constructor(){super(...arguments),this.ns=Ji.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=ggt.MongoDBResponse}buildCommand(p,f){return{endSessions:c}}buildOptions(p){return{timeoutContext:p,readPreference:T2e.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,wgt.executeOperation)(this,new l)}catch(l){(0,Ji.squashError)(l)}}let a=this.topology;this.topology=void 0,a.close();let{encrypter:u}=this.options;u&&await u.close(this)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new bgt.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new x2e.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},i=typeof e=="function"?e:r;if(i==null)throw new kH.MongoInvalidArgumentError("Missing required callback parameter");let s=this.startSession(n);try{return await i(s)}finally{try{await s.endSession()}catch(o){(0,Ji.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new hgt.ChangeStream(this,e,(0,Ji.resolveOptions)(this,r))}};Z6.MongoClient=RT;(0,Cgt.configureResourceManagement)(RT.prototype)});var R6=m(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0});DT.configureResourceManagement=wv;DT.configureExplicitResourceManagement=Ogt;function wv(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function Ogt(){let{MongoClient:t}=Q1(),{ClientSession:e}=I6(),{AbstractCursor:r}=qs(),{ChangeStream:n}=P0();wv(t.prototype),wv(e.prototype),wv(r.prototype),wv(n.prototype)}});var qs=m(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.CursorTimeoutContext=oi.AbstractCursor=oi.CursorTimeoutMode=oi.CURSOR_FLAGS=void 0;var k2e=require("stream"),eE=gr(),Yi=Ne(),xgt=tu(),I2e=hs(),Igt=hK(),Rgt=r1e(),R2e=ol(),kT=fs(),Dgt=R6(),kgt=I6(),MH=Gi(),ou=et();oi.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function D2e(){this.client.s.activeCursors.delete(this)}oi.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var Av=class extends xgt.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",ou.noop),!e.s.isMongoClient)throw new Yi.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof kT.ReadPreference?n.readPreference:kT.ReadPreference.primary,...(0,eE.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new Yi.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=oi.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=oi.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===oi.CursorTimeoutMode.LIFETIME)throw new Yi.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new Yi.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let i=R2e.ReadConcern.fromOptions(n);i&&(this.cursorOptions.readConcern=i),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,ou.addAbortListener)(this.signal,()=>{this.close().then(void 0,ou.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(D2e)||this.once("close",D2e)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let i=0;i<n;i++){let s=this.documents?.shift(this.deserializationOptions);s!=null&&r.push(s)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,ou.squashError)(e)}}}stream(e){let r=new PH(this),n=(0,ou.addAbortListener)(this.signal,function(){r.destroy(this.reason)});if(r.once("end",()=>{n?.[ou.kDispose]()}),e?.transform){let i=e.transform,s=r.pipe(new k2e.Transform({objectMode:!0,highWaterMark:1,transform(o,a,u){try{let c=i(o);u(void 0,c)}catch(c){u(c)}}}));return r.on("error",o=>s.emit("error",o)),s}return r}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===eE.Long.ZERO)return!1;this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===eE.Long.ZERO)throw new Yi.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===eE.Long.ZERO)throw new Yi.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===oi.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new Yi.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let i of n)e.push(await this.transformDocument(i));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!oi.CURSOR_FLAGS.includes(e))throw new Yi.MongoInvalidArgumentError(`Flag ${e} is not one of ${oi.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new Yi.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof kT.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=kT.ReadPreference.fromString(e);else throw new Yi.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=R2e.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Yi.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new Yi.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new Yi.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new Yi.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,ou.squashError),this.cursorSession=null))}async getMore(e){if(this.cursorId==null)throw new Yi.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new Yi.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new Yi.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new Igt.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,I2e.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new Cv(MH.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,ou.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.abortListener?.[ou.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new Cv(MH.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async o=>{try{await o()}finally{this.emitClose()}})(async()=>{let o=this.cursorSession;if(o)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!o.hasEnded){this.isKilled=!0;let a=this.cursorId;this.cursorId=eE.Long.ZERO,await(0,I2e.executeOperation)(this.cursorClient,new Rgt.KillCursorsOperation(a,this.cursorNamespace,this.selectedServer,{session:o}),n())}}catch(a){(0,ou.squashError)(a)}finally{o.owner===this&&await o.endSession({error:r}),o.inTransaction()||(0,kgt.maybeClearPinnedConnection)(o,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new Yi.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,ou.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new Yi.MongoCursorInUseError}};oi.AbstractCursor=Av;Av.CLOSE="close";var PH=class extends k2e.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===eE.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,ou.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,ou.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}};(0,Dgt.configureResourceManagement)(Av.prototype);var Cv=class t extends MH.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};oi.CursorTimeoutContext=Cv});var PT=m(MT=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0});MT.ExplainableCursor=void 0;var Mgt=qs(),NH=class extends Mgt.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,i;return e==null&&r==null?(n=void 0,i=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,i=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,i=r),{timeout:i,explain:n}}};MT.ExplainableCursor=NH});var fv=m(NT=>{"use strict";Object.defineProperty(NT,"__esModule",{value:!0});NT.AggregationCursor=void 0;var FH=Ne(),M2e=u3(),P2e=h3(),N2e=hs(),Pgt=et(),F2e=qs(),Ngt=PT(),BH=class t extends Ngt.ExplainableCursor{constructor(e,r,n=[],i={}){super(e,r,i),this.pipeline=n,this.aggregateOptions=i;let s=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===F2e.CursorTimeoutMode.ITERATION&&(s?.$merge!=null||s?.$out!=null))throw new FH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,Pgt.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,M2e.validateExplainTimeoutOptions)(r,M2e.Explain.fromOptions(r))}catch{throw new FH.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new P2e.AggregateOperation(this.namespace,this.pipeline,r),i=await(0,N2e.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:i}}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,N2e.executeOperation)(this.client,new P2e.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===F2e.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new FH.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};NT.AggregationCursor=BH});var qH=m(qT=>{"use strict";Object.defineProperty(qT,"__esModule",{value:!0});qT.CountOperation=void 0;var Fgt=kr(),Bgt=ti(),FT=Vr(),BT=class extends Bgt.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=Fgt.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,i={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(i.limit=n.limit),typeof n.skip=="number"&&(i.skip=n.skip),n.hint!=null&&(i.hint=n.hint),typeof n.maxTimeMS=="number"&&(i.maxTimeMS=n.maxTimeMS),i}handleOk(e){return e.getNumber("n")??0}};qT.CountOperation=BT;(0,FT.defineAspects)(BT,[FT.Aspect.READ_OPERATION,FT.Aspect.RETRYABLE,FT.Aspect.SUPPORTS_RAW_DATA])});var B2e=m(jT=>{"use strict";Object.defineProperty(jT,"__esModule",{value:!0});jT.FindOperation=void 0;var LH=kr(),qgt=Ne(),Lgt=Y2(),jgt=et(),$gt=ti(),tE=Vr(),LT=class extends $gt.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=LH.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new qgt.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?LH.ExplainedCursorResponse:LH.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return Kgt(this.ns,this.filter,this.options)}};jT.FindOperation=LT;function Kgt(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,Lgt.formatSort)(r.sort)),r.projection){let i=r.projection;i&&Array.isArray(i)&&(i=i.length?i.reduce((s,o)=>(s[o]=1,s),{}):{_id:1}),n.projection=i}return r.hint&&(n.hint=(0,jgt.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,tE.defineAspects)(LT,[tE.Aspect.READ_OPERATION,tE.Aspect.RETRYABLE,tE.Aspect.EXPLAINABLE,tE.Aspect.CURSOR_CREATING,tE.Aspect.SUPPORTS_RAW_DATA])});var VH=m(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});rE.FindCursor=rE.FLAGS=void 0;var Ugt=kr(),oc=Ne(),q2e=u3(),Vgt=qH(),jH=hs(),L2e=B2e(),$H=Y2(),KH=et(),Ggt=PT();rE.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var UH=class t extends Ggt.ExplainableCursor{constructor(e,r,n={},i={}){super(e,r,i),this.numReturned=0,this.cursorFilter=n,this.findOptions=i,i.sort!=null&&(this.findOptions.sort=(0,$H.formatSort)(i.sort))}clone(){let e=(0,KH.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,q2e.validateExplainTimeoutOptions)(r,q2e.Explain.fromOptions(r))}catch{throw new oc.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new L2e.FindOperation(this.namespace,this.cursorFilter,r),i=await(0,jH.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=i.batchSize,{server:n.server,session:e,response:i}}async getMore(e){let r=this.numReturned;if(r){let i=this.findOptions.limit;if(e=i&&i>0&&r+e>i?i-r:e,e<=0){try{await this.close()}catch(s){(0,KH.squashError)(s)}return Ugt.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,KH.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new oc.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,jH.executeOperation)(this.client,new Vgt.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,jH.executeOperation)(this.client,new L2e.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new oc.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,$H.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new oc.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new oc.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new oc.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new oc.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,$H.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new oc.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new oc.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new oc.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new oc.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new oc.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};rE.FindCursor=UH});var HH=m($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.ListIndexesCursor=void 0;var Hgt=hs(),zgt=dv(),Wgt=qs(),GH=class t extends Wgt.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new zgt.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,Hgt.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};$T.ListIndexesCursor=GH});var j2e=m(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.ListSearchIndexesCursor=void 0;var Jgt=fv(),zH=class extends Jgt.AggregationCursor{constructor({fullNamespace:e,client:r},n,i={}){let s=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,s,i)}};KT.ListSearchIndexesCursor=zH});var $2e=m(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.DistinctOperation=void 0;var Ygt=kr(),Qgt=ti(),Tv=Vr(),UT=class extends Qgt.CommandOperation{constructor(e,r,n,i){super(e,i),this.SERVER_COMMAND_RESPONSE_TYPE=Ygt.MongoDBResponse,this.options=i??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};VT.DistinctOperation=UT;(0,Tv.defineAspects)(UT,[Tv.Aspect.READ_OPERATION,Tv.Aspect.RETRYABLE,Tv.Aspect.EXPLAINABLE,Tv.Aspect.SUPPORTS_RAW_DATA])});var K2e=m(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0});HT.EstimatedDocumentCountOperation=void 0;var Xgt=kr(),Zgt=ti(),Ov=Vr(),GT=class extends Zgt.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Xgt.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};HT.EstimatedDocumentCountOperation=GT;(0,Ov.defineAspects)(GT,[Ov.Aspect.READ_OPERATION,Ov.Aspect.RETRYABLE,Ov.Aspect.CURSOR_CREATING,Ov.Aspect.SUPPORTS_RAW_DATA])});var QH=m(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.FindOneAndUpdateOperation=au.FindOneAndReplaceOperation=au.FindOneAndDeleteOperation=au.FindAndModifyOperation=au.ReturnDocument=void 0;var e2t=kr(),lh=Ne(),t2t=fs(),r2t=Y2(),zT=et(),n2t=ti(),xv=Vr();au.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function U2e(t,e){return t.new=e.returnDocument===au.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var L0=class extends n2t.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=e2t.MongoDBResponse,this.options=n,this.readPreference=t2t.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,i={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let s=(0,r2t.formatSort)(n.sort);if(s&&(i.sort=s),n.projection&&(i.fields=n.projection),n.maxTimeMS&&(i.maxTimeMS=n.maxTimeMS),n.writeConcern&&(i.writeConcern=n.writeConcern),n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),(0,zT.decorateWithCollation)(i,n),n.hint){if(this.writeConcern?.w===0&&(0,zT.maxWireVersion)(e)<9)throw new lh.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");i.hint=n.hint}return i}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};au.FindAndModifyOperation=L0;var WH=class extends L0{constructor(e,r,n){if(r==null||typeof r!="object")throw new lh.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};au.FindOneAndDeleteOperation=WH;var JH=class extends L0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new lh.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new lh.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,zT.hasAtomicOperators)(n))throw new lh.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,i),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,U2e(n,this.options),n}};au.FindOneAndReplaceOperation=JH;var YH=class extends L0{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new lh.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new lh.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,zT.hasAtomicOperators)(n,i))throw new lh.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,i),this.update=n,this.options=i}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,U2e(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};au.FindOneAndUpdateOperation=YH;(0,xv.defineAspects)(L0,[xv.Aspect.WRITE_OPERATION,xv.Aspect.RETRYABLE,xv.Aspect.EXPLAINABLE,xv.Aspect.SUPPORTS_RAW_DATA])});var V2e=m(WT=>{"use strict";Object.defineProperty(WT,"__esModule",{value:!0});WT.CreateSearchIndexesOperation=void 0;var i2t=kr(),s2t=Vr(),XH=class extends s2t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=i2t.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};WT.CreateSearchIndexesOperation=XH});var H2e=m(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});JT.DropSearchIndexOperation=void 0;var o2t=kr(),G2e=Ne(),a2t=Vr(),ZH=class extends a2t.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=o2t.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let i={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(i.name=this.name),i}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof G2e.MongoServerError&&e.code===G2e.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};JT.DropSearchIndexOperation=ZH});var z2e=m(YT=>{"use strict";Object.defineProperty(YT,"__esModule",{value:!0});YT.UpdateSearchIndexOperation=void 0;var u2t=kr(),c2t=Vr(),ez=class extends c2t.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=u2t.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};YT.UpdateSearchIndexOperation=ez});var V6=m(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.Collection=void 0;var l2t=gr(),d2t=sK(),p2t=aK(),f2t=P0(),h2t=fv(),m2t=VH(),y2t=HH(),g2t=j2e(),nE=Ne(),E2t=qH(),W2e=N$(),b2t=$2e(),_2t=K2e(),Ai=hs(),tz=QH(),QT=dv(),v2t=$$(),S2t=kG(),w2t=V2e(),A2t=H2e(),C2t=z2e(),rz=V$(),T2t=ol(),nz=fs(),Kr=et(),J2e=Po(),iz=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new Kr.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??Kr.DEFAULT_PK_FACTORY,readPreference:nz.ReadPreference.fromOptions(n),bsonOptions:(0,l2t.resolveBSONOptions)(n,e),readConcern:T2t.ReadConcern.fromOptions(n),writeConcern:J2e.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,Kr.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,Ai.executeOperation)(this.client,new v2t.InsertOneOperation(this,e,(0,Kr.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new nE.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,Kr.resolveOptions)(this,r??{});let n=J2e.WriteConcern.fromOptions(r)?.w!==0;try{let i=await this.bulkWrite(e.map(s=>({insertOne:{document:s}})),r);return{acknowledged:n,insertedCount:i.insertedCount,insertedIds:i.insertedIds}}catch(i){throw i&&i.message==="Operation must be an object with an operation key"?new nE.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):i}}async bulkWrite(e,r){if(!Array.isArray(e))throw new nE.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,Kr.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,Ai.autoConnect)(this.client);let i=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let s of e)i.raw(s);return await i.execute({...r})}async updateOne(e,r,n){return await(0,Ai.executeOperation)(this.client,new rz.UpdateOneOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,Ai.executeOperation)(this.client,new rz.ReplaceOneOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,Ai.executeOperation)(this.client,new rz.UpdateManyOperation(this.s.namespace,e,r,(0,Kr.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,Ai.executeOperation)(this.client,new W2e.DeleteOneOperation(this.s.namespace,e,(0,Kr.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,Ai.executeOperation)(this.client,new W2e.DeleteManyOperation(this.s.namespace,e,(0,Kr.resolveOptions)(this,r)))}async rename(e,r){return await(0,Ai.executeOperation)(this.client,new S2t.RenameOperation(this,e,(0,Kr.resolveOptions)(void 0,{...r,readPreference:nz.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{batchSize:n,noCursorTimeout:i,...s}=r;s.singleBatch=!0;let o=this.find(e,s).limit(1),a=await o.next();return await o.close(),a}find(e={},r={}){return new m2t.FindCursor(this.client,this.s.namespace,e,(0,Kr.resolveOptions)(this,r))}async options(e){e=(0,Kr.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new nE.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,Ai.executeOperation)(this.client,QT.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,Kr.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,Ai.executeOperation)(this.client,QT.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,Kr.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,Ai.executeOperation)(this.client,new QT.DropIndexOperation(this,e,{...(0,Kr.resolveOptions)(this,r),readPreference:nz.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,Ai.executeOperation)(this.client,new QT.DropIndexOperation(this,"*",(0,Kr.resolveOptions)(this,e))),!0}catch(r){if(r instanceof nE.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new y2t.ListIndexesCursor(this,(0,Kr.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],i=new Set(await this.listIndexes(r).map(({name:s})=>s).toArray());return n.every(s=>i.has(s))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,Ai.executeOperation)(this.client,new _2t.EstimatedDocumentCountOperation(this,(0,Kr.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let i=this.aggregate(n,r),s=await i.next();return await i.close(),s?.n??0}async distinct(e,r={},n={}){return await(0,Ai.executeOperation)(this.client,new b2t.DistinctOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:s,key:o})=>[s,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,Ai.executeOperation)(this.client,new tz.FindOneAndDeleteOperation(this,e,(0,Kr.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,Ai.executeOperation)(this.client,new tz.FindOneAndReplaceOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,Ai.executeOperation)(this.client,new tz.FindOneAndUpdateOperation(this,e,r,(0,Kr.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new nE.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new h2t.AggregationCursor(this.client,this.s.namespace,e,(0,Kr.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new f2t.ChangeStream(this,e,(0,Kr.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new p2t.UnorderedBulkOperation(this,(0,Kr.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new d2t.OrderedBulkOperation(this,(0,Kr.resolveOptions)(this,e))}async count(e={},r={}){return await(0,Ai.executeOperation)(this.client,new E2t.CountOperation(this.fullNamespace,e,(0,Kr.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new g2t.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,Ai.executeOperation)(this.client,new w2t.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,Ai.executeOperation)(this.client,new A2t.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,Ai.executeOperation)(this.client,new C2t.UpdateSearchIndexOperation(this,e,r))}};XT.Collection=iz});var az=m(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});ZT.ChangeStreamCursor=void 0;var sz=P0(),Y2e=_i(),O2t=h3(),x2t=hs(),Q2e=et(),I2t=qs(),oz=class t extends I2t.AbstractCursor{constructor(e,r,n=[],i={}){super(e,r,{...i,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=i,this._resumeToken=null,this.startAtOperationTime=i.startAtOperationTime??null,i.startAfter?this.resumeToken=i.startAfter:i.resumeAfter&&(this.resumeToken=i.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(sz.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new O2t.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,x2t.executeOperation)(e.client,r,this.timeoutContext),i=r.server;return this.maxWireVersion=(0,Q2e.maxWireVersion)(i),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(Y2e.INIT,n),this.emit(Y2e.RESPONSE),{server:i,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,Q2e.maxWireVersion)(this.server),this._processBatch(r),this.emit(sz.ChangeStream.MORE,r),this.emit(sz.ChangeStream.RESPONSE),r}};ZT.ChangeStreamCursor=oz});var P0=m(tO=>{"use strict";Object.defineProperty(tO,"__esModule",{value:!0});tO.ChangeStream=void 0;var R2t=V6(),Ol=_i(),D2t=qs(),k2t=az(),M2t=Z7(),_s=Ne(),P2t=Q1(),N2t=tu(),F2t=R6(),B2t=Gi(),Rd=et(),q2t=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],j0={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},L2t=[Ol.RESUME_TOKEN_CHANGED,Ol.END,Ol.CLOSE],j2t="A change stream document has been received that lacks a resume token (_id).",eO="ChangeStream is closed",ac=class t extends N2t.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let i;if(delete this.options.writeConcern,e instanceof R2t.Collection)this.type=j0.COLLECTION,i=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof M2t.Db)this.type=j0.DATABASE,i=e.client.options.serverSelectionTimeoutMS;else if(e instanceof P2t.MongoClient)this.type=j0.CLUSTER,i=e.options.serverSelectionTimeoutMS;else throw new _s.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",s=>{s==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",s=>{s==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new B2t.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:i}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Rd.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Rd.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof _s.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Rd.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Rd.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new _s.MongoChangeStreamError(eO);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this.mode==="iterator")throw new _s.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new _s.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=(0,Rd.filterOptions)(e,q2t);this.type===j0.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],i=this.type===j0.CLUSTER?this.parent:this.type===j0.DATABASE?this.parent.client:this.type===j0.COLLECTION?this.parent.client:null;if(i==null)throw new _s.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let s=new k2t.ChangeStreamCursor(i,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new D2t.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of L2t)s.on(o,a=>this.emit(o,a));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(s),s}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Rd.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let i=this._processChange(n);this.emit(t.CHANGE,i)}catch(i){this.emit(t.ERROR,i)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new _s.MongoAPIError(eO);if(e==null)throw new _s.MongoRuntimeError(eO);if(e&&!e._id)throw new _s.MongoChangeStreamError(j2t);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,_s.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof _s.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Rd.squashError)(n),this._resume(e))).then(()=>{e instanceof _s.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new _s.MongoAPIError(eO);if(r&&((0,_s.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof _s.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Rd.squashError)(n)}if(await this._resume(e),e instanceof _s.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Rd.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Rd.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};tO.ChangeStream=ac;ac.RESPONSE=Ol.RESPONSE;ac.MORE=Ol.MORE;ac.INIT=Ol.INIT;ac.CLOSE=Ol.CLOSE;ac.CHANGE=Ol.CHANGE;ac.END=Ol.END;ac.ERROR=Ol.ERROR;ac.RESUME_TOKEN_CHANGED=Ol.RESUME_TOKEN_CHANGED;(0,F2t.configureResourceManagement)(ac.prototype)});var uz=m(rO=>{"use strict";Object.defineProperty(rO,"__esModule",{value:!0});rO.GridFSBucketReadStream=void 0;var $2t=require("stream"),K2t=qs(),uu=Ne(),U2t=Gi(),Iv=class extends $2t.Readable{constructor(e,r,n,i,s){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:i,init:!1,expectedEnd:0,options:{start:0,end:0,...s},readPreference:n,timeoutContext:s?.timeoutMS!=null?new U2t.CSOTTimeoutContext({timeoutMS:s.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||H2t(this,()=>V2t(this))}start(e=0){return X2e(this),this.s.options.start=e,this}end(e=0){return X2e(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};rO.GridFSBucketReadStream=Iv;Iv.FILE="file";function X2e(t){if(t.s.init)throw new uu.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function V2t(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,d=>t.destroy(d));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,i=t.s.expected++,s=Math.min(t.s.file.chunkSize,n);if(r.n>i)return t.destroy(new uu.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${i}`));if(r.n<i)return t.destroy(new uu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${i}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==s)return n<=0?t.destroy(new uu.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new uu.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${s}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let a=null,u=null;t.s.bytesToSkip!=null&&(a=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=i===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?u=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(u=l),(a!=null||u!=null)&&(o=o.slice(a||0,u||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function G2t(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=i=>{if(t.destroyed)return;if(!i){let u=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new uu.MongoRuntimeError(u);return c.code="ENOENT",t.destroy(c)}if(i.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=z2t(t,i,t.s.options)}catch(a){return t.destroy(a)}let s={files_id:i._id};if(t.s.options&&t.s.options.start!=null){let a=Math.floor(t.s.options.start/i.chunkSize);a>0&&(s.n={$gte:a})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(a){return t.destroy(a)}t.s.cursor=t.s.chunks.find(s,{timeoutMode:t.s.options.timeoutMS!=null?K2t.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(i.length/i.chunkSize),t.s.file=i;try{t.s.bytesToTrim=W2t(t,i,t.s.cursor,t.s.options)}catch(a){return t.destroy(a)}t.emit(Iv.FILE,i)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(i){t.destroyed||t.destroy(i);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,i=>{t.destroyed||t.destroy(i)})}function H2t(t,e){if(t.s.file)return e();t.s.init||(G2t(t),t.s.init=!0),t.once("file",()=>{e()})}function z2t(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new uu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new uu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new uu.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new uu.MongoInvalidArgumentError("Start option must be defined")}function W2t(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new uu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new uu.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let i=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-i),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new uu.MongoInvalidArgumentError("End option must be defined")}});var dz=m(iO=>{"use strict";Object.defineProperty(iO,"__esModule",{value:!0});iO.GridFSBucketWriteStream=void 0;var J2t=require("stream"),e6e=gr(),t6e=qs(),xl=Ne(),Y2t=Gi(),Z2e=et(),Q2t=Po(),cz=class extends J2t.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=Q2t.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new e6e.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new Y2t.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,Z2e.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Z2t(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof xl.MongoOperationTimeoutError)return $0(this,r,e);(0,Z2e.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){t6t(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,r6t(this,e)}async abort(){if(this.state.streamEnd)throw new xl.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new xl.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};iO.GridFSBucketWriteStream=cz;function $0(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function r6e(t,e,r){return{_id:new e6e.ObjectId,files_id:t,n:e,data:r}}async function X2t(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?t6e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(s){if(s instanceof xl.MongoError&&s.code===xl.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw s}n.find(s=>Object.keys(s.key).length===2&&s.key.files_id===1&&s.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function lz(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=e6t(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(nO(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return $0(t,new xl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},i=>$0(t,i,e));return}process.nextTick(e)}async function Z2t(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},i;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let s={timeoutMode:e!=null?t6e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{i=await t.files.listIndexes(s).toArray()}catch(a){if(a instanceof xl.MongoError&&a.code===xl.MONGODB_ERROR_CODES.NamespaceNotFound)i=[];else throw a}i.find(a=>Object.keys(a.key).length===2&&a.key.filename===1&&a.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await X2t(t)}function e6t(t,e,r,n,i,s,o){let a={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return i&&(a.contentType=i),s&&(a.aliases=s),o&&(a.metadata=o),a}function t6t(t,e,r,n){if(nO(t,n))return;let i=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=i.length,t.pos+i.length<t.chunkSizeBytes){i.copy(t.bufToStore,t.pos),t.pos+=i.length,process.nextTick(n);return}let s=i.length,o=t.chunkSizeBytes-t.pos,a=Math.min(o,i.length),u=0;for(;s>0;){let c=i.length-s;i.copy(t.bufToStore,t.pos,c,c+a),t.pos+=a,o-=a;let l;if(o===0){l=r6e(t.id,t.n,Buffer.from(t.bufToStore));let d=t.timeoutContext?.remainingTimeMS;if(d!=null&&d<=0)return $0(t,new xl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++u,nO(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:d}).then(()=>{--t.state.outstandingRequests,--u,u||lz(t,n)},p=>$0(t,p,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}s-=a,a=Math.min(o,s)}}function r6t(t,e){if(t.pos===0)return lz(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=r6e(t.id,t.n,r);if(nO(t,e))return;let i=t.timeoutContext?.remainingTimeMS;if(i!=null&&i<=0)return $0(t,new xl.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:i}).then(()=>{--t.state.outstandingRequests,lz(t,e)},s=>$0(t,s,e))}function nO(t,e){return t.state.aborted?(process.nextTick(e,new xl.MongoAPIError("Stream has been aborted")),!0):!1}});var o6e=m(aO=>{"use strict";Object.defineProperty(aO,"__esModule",{value:!0});aO.GridFSBucket=void 0;var pz=Ne(),n6t=tu(),n6e=Gi(),sO=et(),i6t=Po(),i6e=uz(),s6e=dz(),s6t={bucketName:"fs",chunkSizeBytes:255*1024},oO=class extends n6t.TypedEventEmitter{constructor(e,r){super(),this.on("error",sO.noop),this.setMaxListeners(0);let n=(0,sO.resolveOptions)(e,{...s6t,...r,writeConcern:i6t.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new s6e.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new s6e.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new i6e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,sO.resolveOptions)(this.s.db,r),i;n&&(i=new n6e.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:s}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:i?.remainingTimeMS}),o=i?.remainingTimeMS;if(o!=null&&o<=0)throw new pz.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),s===0)throw new pz.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},i;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},i=r.revision):i=-r.revision-1),new i6e.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:i})}async rename(e,r,n){let i={_id:e},s={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(i,s,n);if(o===0)throw new pz.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,sO.resolveOptions)(this.s.db,e),n;if(r&&(n=new n6e.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let i=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:i})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};aO.GridFSBucket=oO;oO.INDEX="index"});var M0=m(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.MongoRuntimeError=L.MongoParseError=L.MongoOperationTimeoutError=L.MongoOIDCError=L.MongoNotConnectedError=L.MongoNetworkTimeoutError=L.MongoNetworkError=L.MongoMissingDependencyError=L.MongoMissingCredentialsError=L.MongoKerberosError=L.MongoInvalidArgumentError=L.MongoGridFSStreamError=L.MongoGridFSChunkError=L.MongoGCPError=L.MongoExpiredSessionError=L.MongoError=L.MongoDriverError=L.MongoDecompressionError=L.MongoCursorInUseError=L.MongoCursorExhaustedError=L.MongoCompatibilityError=L.MongoClientClosedError=L.MongoClientBulkWriteExecutionError=L.MongoClientBulkWriteError=L.MongoClientBulkWriteCursorError=L.MongoChangeStreamError=L.MongoBatchReExecutionError=L.MongoAzureError=L.MongoAWSError=L.MongoAPIError=L.ExplainableCursor=L.ChangeStreamCursor=L.ClientEncryption=L.MongoBulkWriteError=L.UUID=L.Timestamp=L.ObjectId=L.MinKey=L.MaxKey=L.Long=L.Int32=L.Double=L.Decimal128=L.DBRef=L.Code=L.BSONType=L.BSONSymbol=L.BSONRegExp=L.Binary=L.BSON=void 0;L.CommandFailedEvent=L.WriteConcern=L.ReadPreference=L.ReadConcern=L.TopologyType=L.ServerType=L.ReadPreferenceMode=L.ReadConcernLevel=L.ProfilingLevel=L.ReturnDocument=L.SeverityLevel=L.MongoLoggableComponent=L.ServerApiVersion=L.ExplainVerbosity=L.MongoErrorLabel=L.CursorTimeoutMode=L.CURSOR_FLAGS=L.Compressor=L.AuthMechanism=L.GSSAPICanonicalizationValue=L.AutoEncryptionLoggerLevel=L.BatchType=L.UnorderedBulkOperation=L.OrderedBulkOperation=L.MongoClient=L.ListIndexesCursor=L.ListCollectionsCursor=L.GridFSBucketWriteStream=L.GridFSBucketReadStream=L.GridFSBucket=L.FindCursor=L.Db=L.Collection=L.ClientSession=L.ChangeStream=L.CancellationToken=L.AggregationCursor=L.Admin=L.AbstractCursor=L.configureExplicitResourceManagement=L.MongoWriteConcernError=L.MongoUnexpectedServerResponseError=L.MongoTransactionError=L.MongoTopologyClosedError=L.MongoTailableCursorError=L.MongoSystemError=L.MongoStalePrimaryError=L.MongoServerSelectionError=L.MongoServerError=L.MongoServerClosedError=void 0;L.MongoClientAuthProviders=L.MongoCryptKMSRequestNetworkTimeoutError=L.MongoCryptInvalidArgumentError=L.MongoCryptError=L.MongoCryptCreateEncryptedCollectionError=L.MongoCryptCreateDataKeyError=L.MongoCryptAzureKMSRequestError=L.SrvPollingEvent=L.WaitingForSuitableServerEvent=L.ServerSelectionSucceededEvent=L.ServerSelectionStartedEvent=L.ServerSelectionFailedEvent=L.ServerSelectionEvent=L.TopologyOpeningEvent=L.TopologyDescriptionChangedEvent=L.TopologyClosedEvent=L.ServerOpeningEvent=L.ServerHeartbeatSucceededEvent=L.ServerHeartbeatStartedEvent=L.ServerHeartbeatFailedEvent=L.ServerDescriptionChangedEvent=L.ServerClosedEvent=L.ConnectionReadyEvent=L.ConnectionPoolReadyEvent=L.ConnectionPoolMonitoringEvent=L.ConnectionPoolCreatedEvent=L.ConnectionPoolClosedEvent=L.ConnectionPoolClearedEvent=L.ConnectionCreatedEvent=L.ConnectionClosedEvent=L.ConnectionCheckOutStartedEvent=L.ConnectionCheckOutFailedEvent=L.ConnectionCheckedOutEvent=L.ConnectionCheckedInEvent=L.CommandSucceededEvent=L.CommandStartedEvent=void 0;var o6t=nK();Object.defineProperty(L,"Admin",{enumerable:!0,get:function(){return o6t.Admin}});var a6t=sK();Object.defineProperty(L,"OrderedBulkOperation",{enumerable:!0,get:function(){return a6t.OrderedBulkOperation}});var u6t=aK();Object.defineProperty(L,"UnorderedBulkOperation",{enumerable:!0,get:function(){return u6t.UnorderedBulkOperation}});var c6t=P0();Object.defineProperty(L,"ChangeStream",{enumerable:!0,get:function(){return c6t.ChangeStream}});var l6t=V6();Object.defineProperty(L,"Collection",{enumerable:!0,get:function(){return l6t.Collection}});var d6t=qs();Object.defineProperty(L,"AbstractCursor",{enumerable:!0,get:function(){return d6t.AbstractCursor}});var p6t=fv();Object.defineProperty(L,"AggregationCursor",{enumerable:!0,get:function(){return p6t.AggregationCursor}});var f6t=VH();Object.defineProperty(L,"FindCursor",{enumerable:!0,get:function(){return f6t.FindCursor}});var h6t=AG();Object.defineProperty(L,"ListCollectionsCursor",{enumerable:!0,get:function(){return h6t.ListCollectionsCursor}});var m6t=HH();Object.defineProperty(L,"ListIndexesCursor",{enumerable:!0,get:function(){return m6t.ListIndexesCursor}});var y6t=Z7();Object.defineProperty(L,"Db",{enumerable:!0,get:function(){return y6t.Db}});var g6t=o6e();Object.defineProperty(L,"GridFSBucket",{enumerable:!0,get:function(){return g6t.GridFSBucket}});var E6t=uz();Object.defineProperty(L,"GridFSBucketReadStream",{enumerable:!0,get:function(){return E6t.GridFSBucketReadStream}});var b6t=dz();Object.defineProperty(L,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return b6t.GridFSBucketWriteStream}});var _6t=Q1();Object.defineProperty(L,"MongoClient",{enumerable:!0,get:function(){return _6t.MongoClient}});var v6t=tu();Object.defineProperty(L,"CancellationToken",{enumerable:!0,get:function(){return v6t.CancellationToken}});var S6t=I6();Object.defineProperty(L,"ClientSession",{enumerable:!0,get:function(){return S6t.ClientSession}});var w6t=gr();Object.defineProperty(L,"BSON",{enumerable:!0,get:function(){return w6t.BSON}});var jo=gr();Object.defineProperty(L,"Binary",{enumerable:!0,get:function(){return jo.Binary}});Object.defineProperty(L,"BSONRegExp",{enumerable:!0,get:function(){return jo.BSONRegExp}});Object.defineProperty(L,"BSONSymbol",{enumerable:!0,get:function(){return jo.BSONSymbol}});Object.defineProperty(L,"BSONType",{enumerable:!0,get:function(){return jo.BSONType}});Object.defineProperty(L,"Code",{enumerable:!0,get:function(){return jo.Code}});Object.defineProperty(L,"DBRef",{enumerable:!0,get:function(){return jo.DBRef}});Object.defineProperty(L,"Decimal128",{enumerable:!0,get:function(){return jo.Decimal128}});Object.defineProperty(L,"Double",{enumerable:!0,get:function(){return jo.Double}});Object.defineProperty(L,"Int32",{enumerable:!0,get:function(){return jo.Int32}});Object.defineProperty(L,"Long",{enumerable:!0,get:function(){return jo.Long}});Object.defineProperty(L,"MaxKey",{enumerable:!0,get:function(){return jo.MaxKey}});Object.defineProperty(L,"MinKey",{enumerable:!0,get:function(){return jo.MinKey}});Object.defineProperty(L,"ObjectId",{enumerable:!0,get:function(){return jo.ObjectId}});Object.defineProperty(L,"Timestamp",{enumerable:!0,get:function(){return jo.Timestamp}});Object.defineProperty(L,"UUID",{enumerable:!0,get:function(){return jo.UUID}});var A6t=X2();Object.defineProperty(L,"MongoBulkWriteError",{enumerable:!0,get:function(){return A6t.MongoBulkWriteError}});var C6t=o7();Object.defineProperty(L,"ClientEncryption",{enumerable:!0,get:function(){return C6t.ClientEncryption}});var T6t=az();Object.defineProperty(L,"ChangeStreamCursor",{enumerable:!0,get:function(){return T6t.ChangeStreamCursor}});var O6t=PT();Object.defineProperty(L,"ExplainableCursor",{enumerable:!0,get:function(){return O6t.ExplainableCursor}});var Ut=Ne();Object.defineProperty(L,"MongoAPIError",{enumerable:!0,get:function(){return Ut.MongoAPIError}});Object.defineProperty(L,"MongoAWSError",{enumerable:!0,get:function(){return Ut.MongoAWSError}});Object.defineProperty(L,"MongoAzureError",{enumerable:!0,get:function(){return Ut.MongoAzureError}});Object.defineProperty(L,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Ut.MongoBatchReExecutionError}});Object.defineProperty(L,"MongoChangeStreamError",{enumerable:!0,get:function(){return Ut.MongoChangeStreamError}});Object.defineProperty(L,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteCursorError}});Object.defineProperty(L,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteError}});Object.defineProperty(L,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Ut.MongoClientBulkWriteExecutionError}});Object.defineProperty(L,"MongoClientClosedError",{enumerable:!0,get:function(){return Ut.MongoClientClosedError}});Object.defineProperty(L,"MongoCompatibilityError",{enumerable:!0,get:function(){return Ut.MongoCompatibilityError}});Object.defineProperty(L,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Ut.MongoCursorExhaustedError}});Object.defineProperty(L,"MongoCursorInUseError",{enumerable:!0,get:function(){return Ut.MongoCursorInUseError}});Object.defineProperty(L,"MongoDecompressionError",{enumerable:!0,get:function(){return Ut.MongoDecompressionError}});Object.defineProperty(L,"MongoDriverError",{enumerable:!0,get:function(){return Ut.MongoDriverError}});Object.defineProperty(L,"MongoError",{enumerable:!0,get:function(){return Ut.MongoError}});Object.defineProperty(L,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Ut.MongoExpiredSessionError}});Object.defineProperty(L,"MongoGCPError",{enumerable:!0,get:function(){return Ut.MongoGCPError}});Object.defineProperty(L,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Ut.MongoGridFSChunkError}});Object.defineProperty(L,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Ut.MongoGridFSStreamError}});Object.defineProperty(L,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Ut.MongoInvalidArgumentError}});Object.defineProperty(L,"MongoKerberosError",{enumerable:!0,get:function(){return Ut.MongoKerberosError}});Object.defineProperty(L,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Ut.MongoMissingCredentialsError}});Object.defineProperty(L,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Ut.MongoMissingDependencyError}});Object.defineProperty(L,"MongoNetworkError",{enumerable:!0,get:function(){return Ut.MongoNetworkError}});Object.defineProperty(L,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Ut.MongoNetworkTimeoutError}});Object.defineProperty(L,"MongoNotConnectedError",{enumerable:!0,get:function(){return Ut.MongoNotConnectedError}});Object.defineProperty(L,"MongoOIDCError",{enumerable:!0,get:function(){return Ut.MongoOIDCError}});Object.defineProperty(L,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Ut.MongoOperationTimeoutError}});Object.defineProperty(L,"MongoParseError",{enumerable:!0,get:function(){return Ut.MongoParseError}});Object.defineProperty(L,"MongoRuntimeError",{enumerable:!0,get:function(){return Ut.MongoRuntimeError}});Object.defineProperty(L,"MongoServerClosedError",{enumerable:!0,get:function(){return Ut.MongoServerClosedError}});Object.defineProperty(L,"MongoServerError",{enumerable:!0,get:function(){return Ut.MongoServerError}});Object.defineProperty(L,"MongoServerSelectionError",{enumerable:!0,get:function(){return Ut.MongoServerSelectionError}});Object.defineProperty(L,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Ut.MongoStalePrimaryError}});Object.defineProperty(L,"MongoSystemError",{enumerable:!0,get:function(){return Ut.MongoSystemError}});Object.defineProperty(L,"MongoTailableCursorError",{enumerable:!0,get:function(){return Ut.MongoTailableCursorError}});Object.defineProperty(L,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Ut.MongoTopologyClosedError}});Object.defineProperty(L,"MongoTransactionError",{enumerable:!0,get:function(){return Ut.MongoTransactionError}});Object.defineProperty(L,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Ut.MongoUnexpectedServerResponseError}});Object.defineProperty(L,"MongoWriteConcernError",{enumerable:!0,get:function(){return Ut.MongoWriteConcernError}});var x6t=R6();Object.defineProperty(L,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return x6t.configureExplicitResourceManagement}});var I6t=X2();Object.defineProperty(L,"BatchType",{enumerable:!0,get:function(){return I6t.BatchType}});var R6t=nV();Object.defineProperty(L,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return R6t.AutoEncryptionLoggerLevel}});var D6t=BC();Object.defineProperty(L,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return D6t.GSSAPICanonicalizationValue}});var k6t=Sd();Object.defineProperty(L,"AuthMechanism",{enumerable:!0,get:function(){return k6t.AuthMechanism}});var M6t=U3();Object.defineProperty(L,"Compressor",{enumerable:!0,get:function(){return M6t.Compressor}});var a6e=qs();Object.defineProperty(L,"CURSOR_FLAGS",{enumerable:!0,get:function(){return a6e.CURSOR_FLAGS}});Object.defineProperty(L,"CursorTimeoutMode",{enumerable:!0,get:function(){return a6e.CursorTimeoutMode}});var P6t=Ne();Object.defineProperty(L,"MongoErrorLabel",{enumerable:!0,get:function(){return P6t.MongoErrorLabel}});var N6t=u3();Object.defineProperty(L,"ExplainVerbosity",{enumerable:!0,get:function(){return N6t.ExplainVerbosity}});var F6t=Q1();Object.defineProperty(L,"ServerApiVersion",{enumerable:!0,get:function(){return F6t.ServerApiVersion}});var u6e=k1();Object.defineProperty(L,"MongoLoggableComponent",{enumerable:!0,get:function(){return u6e.MongoLoggableComponent}});Object.defineProperty(L,"SeverityLevel",{enumerable:!0,get:function(){return u6e.SeverityLevel}});var B6t=QH();Object.defineProperty(L,"ReturnDocument",{enumerable:!0,get:function(){return B6t.ReturnDocument}});var q6t=PG();Object.defineProperty(L,"ProfilingLevel",{enumerable:!0,get:function(){return q6t.ProfilingLevel}});var L6t=ol();Object.defineProperty(L,"ReadConcernLevel",{enumerable:!0,get:function(){return L6t.ReadConcernLevel}});var j6t=fs();Object.defineProperty(L,"ReadPreferenceMode",{enumerable:!0,get:function(){return j6t.ReadPreferenceMode}});var c6e=Xa();Object.defineProperty(L,"ServerType",{enumerable:!0,get:function(){return c6e.ServerType}});Object.defineProperty(L,"TopologyType",{enumerable:!0,get:function(){return c6e.TopologyType}});var $6t=ol();Object.defineProperty(L,"ReadConcern",{enumerable:!0,get:function(){return $6t.ReadConcern}});var K6t=fs();Object.defineProperty(L,"ReadPreference",{enumerable:!0,get:function(){return K6t.ReadPreference}});var U6t=Po();Object.defineProperty(L,"WriteConcern",{enumerable:!0,get:function(){return U6t.WriteConcern}});var fz=_V();Object.defineProperty(L,"CommandFailedEvent",{enumerable:!0,get:function(){return fz.CommandFailedEvent}});Object.defineProperty(L,"CommandStartedEvent",{enumerable:!0,get:function(){return fz.CommandStartedEvent}});Object.defineProperty(L,"CommandSucceededEvent",{enumerable:!0,get:function(){return fz.CommandSucceededEvent}});var uc=tG();Object.defineProperty(L,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return uc.ConnectionCheckedInEvent}});Object.defineProperty(L,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return uc.ConnectionCheckedOutEvent}});Object.defineProperty(L,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return uc.ConnectionCheckOutFailedEvent}});Object.defineProperty(L,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return uc.ConnectionCheckOutStartedEvent}});Object.defineProperty(L,"ConnectionClosedEvent",{enumerable:!0,get:function(){return uc.ConnectionClosedEvent}});Object.defineProperty(L,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return uc.ConnectionCreatedEvent}});Object.defineProperty(L,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return uc.ConnectionPoolClearedEvent}});Object.defineProperty(L,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return uc.ConnectionPoolClosedEvent}});Object.defineProperty(L,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return uc.ConnectionPoolCreatedEvent}});Object.defineProperty(L,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return uc.ConnectionPoolMonitoringEvent}});Object.defineProperty(L,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return uc.ConnectionPoolReadyEvent}});Object.defineProperty(L,"ConnectionReadyEvent",{enumerable:!0,get:function(){return uc.ConnectionReadyEvent}});var zp=I7();Object.defineProperty(L,"ServerClosedEvent",{enumerable:!0,get:function(){return zp.ServerClosedEvent}});Object.defineProperty(L,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return zp.ServerDescriptionChangedEvent}});Object.defineProperty(L,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return zp.ServerHeartbeatFailedEvent}});Object.defineProperty(L,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return zp.ServerHeartbeatStartedEvent}});Object.defineProperty(L,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return zp.ServerHeartbeatSucceededEvent}});Object.defineProperty(L,"ServerOpeningEvent",{enumerable:!0,get:function(){return zp.ServerOpeningEvent}});Object.defineProperty(L,"TopologyClosedEvent",{enumerable:!0,get:function(){return zp.TopologyClosedEvent}});Object.defineProperty(L,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return zp.TopologyDescriptionChangedEvent}});Object.defineProperty(L,"TopologyOpeningEvent",{enumerable:!0,get:function(){return zp.TopologyOpeningEvent}});var Rv=AH();Object.defineProperty(L,"ServerSelectionEvent",{enumerable:!0,get:function(){return Rv.ServerSelectionEvent}});Object.defineProperty(L,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Rv.ServerSelectionFailedEvent}});Object.defineProperty(L,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Rv.ServerSelectionStartedEvent}});Object.defineProperty(L,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Rv.ServerSelectionSucceededEvent}});Object.defineProperty(L,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Rv.WaitingForSuitableServerEvent}});var V6t=TH();Object.defineProperty(L,"SrvPollingEvent",{enumerable:!0,get:function(){return V6t.SrvPollingEvent}});var iE=A6();Object.defineProperty(L,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return iE.MongoCryptAzureKMSRequestError}});Object.defineProperty(L,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return iE.MongoCryptCreateDataKeyError}});Object.defineProperty(L,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return iE.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(L,"MongoCryptError",{enumerable:!0,get:function(){return iE.MongoCryptError}});Object.defineProperty(L,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return iE.MongoCryptInvalidArgumentError}});Object.defineProperty(L,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return iE.MongoCryptKMSRequestNetworkTimeoutError}});var G6t=lH();Object.defineProperty(L,"MongoClientAuthProviders",{enumerable:!0,get:function(){return G6t.MongoClientAuthProviders}})});var ot=m(Qi=>{"use strict";Qi.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");Qi.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");Qi.arrayParentSymbol=Symbol("mongoose#Array#_parent");Qi.arrayPathSymbol=Symbol("mongoose#Array#_path");Qi.arraySchemaSymbol=Symbol("mongoose#Array#_schema");Qi.documentArrayParent=Symbol("mongoose#documentArrayParent");Qi.documentIsSelected=Symbol("mongoose#Document#isSelected");Qi.documentIsModified=Symbol("mongoose#Document#isModified");Qi.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");Qi.documentSchemaSymbol=Symbol("mongoose#Document#schema");Qi.getSymbol=Symbol("mongoose#Document#get");Qi.modelSymbol=Symbol("mongoose#Model");Qi.objectIdSymbol=Symbol("mongoose#ObjectId");Qi.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");Qi.schemaTypeSymbol=Symbol("mongoose#schemaType");Qi.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");Qi.scopeSymbol=Symbol("mongoose#Document#scope");Qi.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Wp=m((Qgr,l6e)=>{"use strict";var Dv=fa().ObjectId,H6t=ot().objectIdSymbol;Object.defineProperty(Dv.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Dv.prototype.hasOwnProperty("valueOf")||(Dv.prototype.valueOf=function(){return this.toString()});Dv.prototype[H6t]=!0;l6e.exports=Dv});var $o=m((Xgr,d6e)=>{"use strict";d6e.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var Il=m(p6e=>{"use strict";p6e.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var uO=m((e2r,f6e)=>{"use strict";f6e.exports=fa().Decimal128});var K0=m((t2r,h6e)=>{"use strict";h6e.exports=new Set(["__proto__","constructor","prototype"])});var cO=m(m6e=>{"use strict";m6e.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var kv=m((n2r,y6e)=>{"use strict";var z6t=cO().isMongooseArray;y6e.exports=function(t){return t!=null&&(z6t(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var hz=m((i2r,g6e)=>{"use strict";var W6t=/^function\s*([^\s(]+)/;g6e.exports=function(t){return t.name||(t.toString().trim().match(W6t)||[])[1]}});var Vs=m((s2r,E6e)=>{"use strict";function J6t(t,e){return t!=null&&t._bsontype===e}E6e.exports=J6t});var dh=m((o2r,b6e)=>{"use strict";b6e.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var sE=m((a2r,_6e)=>{"use strict";_6e.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var oE=m(mz=>{"use strict";var v6e=Symbol("mongoose#trustedSymbol");mz.trustedSymbol=v6e;mz.trusted=function(e){return e==null||typeof e!="object"||(e[v6e]=!0),e}});var zn=m((c2r,S6e)=>{"use strict";var Y6t=uO(),Q6t=Wp(),X6t=K0(),Z6t=kv(),eEt=hz(),yz=Vs(),tEt=cO().isMongooseArray,rEt=dh(),nEt=sE(),iEt=ot(),gz=oE().trustedSymbol,sEt=fa();function bz(t,e,r){if(t==null)return t;if(yz(t,"Double"))return new sEt.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return oEt(t,e);if(Z6t(t)){if(e&&e.retainDocuments&&t.$__!=null){let s=t.$clone();return t.__index!=null&&(s.__index=t.__index),t.__parentArray!=null&&(s.__parentArray=t.__parentArray),s.$__parent=t.$__parent,s}if(nEt(t)&&t.$__!=null&&t._doc!=null)return t._doc;let i;return e&&e.json&&typeof t.toJSON=="function"?i=t.toJSON(e):i=t.toObject(e),i}let n=t.constructor;if(n)switch(eEt(n)){case"Object":return Ez(t,e,r);case"Date":return new n(+t);case"RegExp":return aEt(t);default:break}return yz(t,"ObjectId")?e&&e.flattenObjectIds?t.toJSON():new Q6t(t.id):yz(t,"Decimal128")?e&&e.flattenDecimals?t.toJSON():Y6t.fromString(t.toString()):!n&&rEt(t)?Ez(t,e,r):typeof t=="object"&&t[iEt.schemaTypeSymbol]?t.clone():e&&e.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():Ez(t,e,r)}S6e.exports=bz;function Ez(t,e,r){let n=e&&e.minimize,i=e&&e.omitUndefined,s=e&&e._seen,o={},a;if(s&&s.has(t))return s.get(t);s&&s.set(t,o),gz in t&&e?.copyTrustedSymbol!==!1&&(o[gz]=t[gz]);let u=Object.keys(t),c=u.length;for(let l=0;l<c;++l){let d=u[l];if(X6t.has(d))continue;let p=bz(t[d],e,!1);(n===!1||i)&&typeof p>"u"?delete o[d]:(n!==!0||typeof p<"u")&&(a||(a=!0),o[d]=p)}return n&&!r?a&&o:o}function oEt(t,e){let r=0,n=t.length,i=null;for(e?.retainDocuments?t.isMongooseDocumentArray?i=new(t.$schemaType()).schema.base.Types.DocumentArray([],t.$path(),t.$parent(),t.$schemaType()):t.isMongooseArray?i=new(t.$parent()).schema.base.Types.Array([],t.$path(),t.$parent(),t.$schemaType()):i=new Array(n):i=new Array(n),t=tEt(t)?t.__array:t,r=0;r<n;++r)i[r]=bz(t[r],e,!0);return i}function aEt(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var C6e=m((l2r,A6e)=>{"use strict";var lO=Y$(),_z=Qt(),vz=M0().Collection,uEt=Wp(),w6e=$o(),cEt=Il().internalToObjectOptions,lEt=require("stream"),Sz=require("util"),dEt=Object.freeze({...cEt,copyTrustedSymbol:!1});function Rl(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,lO.apply(this,arguments)}Object.setPrototypeOf(Rl.prototype,lO.prototype);Rl.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),lO.prototype.onOpen.call(this),this.collection};Rl.prototype.onClose=function(t){lO.prototype.onClose.call(this,t)};Rl.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};var Mv={watch:!0,find:!0,aggregate:!0};function pEt(t){Rl.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,i=n&&n.conn&&n.conn.base&&n.conn.base.options&&n.conn.base.options.debug,s=n&&n.conn&&n.conn.options&&n.conn.options.debug,o=s??i,a=arguments[arguments.length-1],u=new uEt;if(this.conn.$wasForceClosed){let d=new _z("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](d);return}else throw d}let c=r,l=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,args:r});let d,p=r,f=null,h=null;Mv[t]&&typeof a=="function"?(this.addQueue(t,p),d=a):Mv[t]?f=new this.Promise((_,S)=>{d=function(C,A){if(h!=null&&clearTimeout(h),C!=null)return S(C);_(A)},p=r.concat([d]),this.addQueue(t,p)}):typeof a=="function"?(d=function(){return h!=null&&clearTimeout(h),a.apply(this,arguments)},p=r.slice(0,r.length-1).concat([d])):f=new Promise((_,S)=>{d=function(C,A){if(h!=null&&clearTimeout(h),C!=null)return S(C);_(A)},p=r.concat([d]),this.addQueue(t,p)});let g=this._getBufferTimeoutMS();if(h=setTimeout(()=>{if(this.removeQueue(t,p)){let S="Operation `"+this.name+"."+t+"()` buffering timed out after "+g+"ms",w=new _z(S);this.conn.emit("buffer-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:w}),d(w)}},g),!Mv[t]&&typeof a=="function"){this.addQueue(t,p);return}return f}else!Mv[t]&&typeof a=="function"&&(l=function(p,f){return p!=null?n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,error:p}):n.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:n.name,method:t,result:f}),a.apply(this,arguments)},c=r.slice(0,r.length-1).concat([l]));if(o)if(typeof o=="function"){let d=null;typeof r[r.length-1]=="function"?d=r.slice(0,r.length-1):d=r,o.apply(n,[n.name,t].concat(d))}else if(o instanceof lEt.Writable)this.$printToStream(n.name,t,r,o);else{let d=o.color==null?!0:o.color,p=o.shell==null?!1:o.shell;this.$print(n.name,t,r,d,p)}this.conn.emit("operation-start",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,params:c});try{if(e==null){let p="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new _z(p)}if(Mv[t]&&typeof a=="function"){let p=e[t].apply(e,c.slice(0,c.length-1));return this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),a.call(this,null,p)}let d=e[t].apply(e,c);return d!=null&&typeof d.then=="function"?d.then(p=>(typeof a=="function"?a(null,p):this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,result:p}),p),p=>{if(typeof a=="function"){a(p);return}else this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:p});throw p}):d}catch(d){if(typeof a=="function")return a(d);throw this.conn.emit("operation-end",{_id:u,modelName:n.modelName,collectionName:this.name,method:t,error:d}),d}}}for(let t of Object.getOwnPropertyNames(vz.prototype))Object.getOwnPropertyDescriptor(vz.prototype,t).get===void 0&&typeof vz.prototype[t]=="function"&&pEt(t);Rl.prototype.$print=function(t,e,r,n,i){let s=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),a=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||a.length)&&a.unshift(this.$format(r[c],n,i));let u="("+a.join(", ")+")";console.info(s+o+u)};Rl.prototype.$printToStream=function(t,e,r,n){let i=[t,e].join("."),s=[];for(let a=r.length-1;a>=0;--a)(this.$format(r[a])||s.length)&&s.unshift(this.$format(r[a]));let o="("+s.join(", ")+")";n.write(i+o,"utf8")};Rl.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":wz(t,!1,e,r)};function aE(t){let e={inspect:function(){return t}};return Sz.inspect.custom&&(e[Sz.inspect.custom]=e.inspect),e}function fEt(t){return wz(t,!0)}function hEt(t,e){t[e]=aE('ObjectId("'+t[e].toHexString()+'")')}function mEt(t,e,r){r?t[e]=aE('ISODate("'+t[e].toUTCString()+'")'):t[e]=aE('new Date("'+t[e].toUTCString()+'")')}function wz(t,e,r,n){if(t&&typeof t.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let i=zn(),s=e?t:i(t,dEt),o=w6e(s);if(o==="Binary")s="BinData("+s.sub_type+', "'+s.toString("base64")+'")';else if(o==="ObjectId")s=aE('ObjectId("'+s.toHexString()+'")');else if(o==="Date")s=aE('new Date("'+s.toUTCString()+'")');else if(o==="Object"){let a=Object.keys(s),u=a.length,c;for(let l=0;l<u;++l)if(c=a[l],s[c]){let d;if(typeof s[c].toBSON=="function")try{s[c]=s[c].toBSON()}catch(f){d=f}let p=w6e(s[c]);if(p==="Binary")s[c]="BinData("+s[c].sub_type+', "'+s[c].buffer.toString("base64")+'")';else if(p==="Object")s[c]=wz(s[c],!0);else if(p==="ObjectId")hEt(s,c);else if(p==="Date")mEt(s,c,n);else if(p==="ClientSession")s[c]=aE('ClientSession("'+(s[c]&&s[c].id&&s[c].id.id&&s[c].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(s[c]))s[c]=s[c].map(fEt);else if(d!=null)throw d}}return e?s:Sz.inspect(s,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}Rl.prototype.getIndexes=Rl.prototype.indexInformation;A6e.exports=Rl});var Cz=m((d2r,O6e)=>{"use strict";var yEt=require("events").EventEmitter,Pv=Qt();var T6e=["close","change","end","error","resumeTokenChanged"];var Az=class extends yEt{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n&&n.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let i=null;if(this.$driverChangeStreamPromise=new Promise((s,o)=>{try{e((a,u)=>{if(a!=null)return this.errored=!0,this.emit("error",a),o(a);this.driverChangeStream=u,this.emit("ready"),s()})}catch(a){i=a,this.errored=!0,this.emit("error",a),o(a)}}),i!=null)throw i}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),T6e.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),T6e.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Pv("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Pv("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(e!=null){let n=e;e=(i,s)=>i!=null?n(i):(s.fullDocument!=null&&(s.fullDocument=this.options.model.hydrate(s.fullDocument)),n(null,s))}let r=this.driverChangeStream.next(e);return r&&typeof r.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Pv("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Pv("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Pv("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};O6e.exports=Az});var U0=m((p2r,R6e)=>{"use strict";function Br(){this._pres=new Map,this._posts=new Map}Br.skipWrappedFunction=function(){if(!(this instanceof Br.skipWrappedFunction))return new Br.skipWrappedFunction(...arguments);this.args=[...arguments]};Br.overwriteResult=function(){if(!(this instanceof Br.overwriteResult))return new Br.overwriteResult(...arguments);this.args=[...arguments]};Br.prototype.execPre=function(t,e,r,n){arguments.length===3&&(n=r,r=[]);let i=this._pres.get(t)||[],s=i.length,o=i.numAsync||0,a=0,u=o,c=!1,l=r,d=null;if(!s)return Fv(function(){n(null)});function p(){if(a>=s)return;let h=i[a];if(h.isAsync){let g=[Nv(f),Nv(function(_){if(_){if(c)return;if(_ instanceof Br.skipWrappedFunction)d=_;else return c=!0,n(_)}if(--u===0&&a>=s)return n(d)})];dO(h.fn,e,g,g[0])}else if(h.fn.length>0){let g=[Nv(f)],_=arguments.length>=2?arguments:[null].concat(l);for(let S=1;S<_.length;++S)S===_.length-1&&typeof _[S]=="function"||g.push(_[S]);dO(h.fn,e,g,g[0])}else{let g=null;try{g=h.fn.call(e)}catch(_){if(_!=null)return n(_)}if(pO(g))g.then(()=>f(),_=>f(_));else{if(++a>=s)return u>0?void 0:Fv(function(){n(d)});p()}}}p.apply(null,[null].concat(r));function f(h){if(h){if(c)return;if(h instanceof Br.skipWrappedFunction)d=h;else return c=!0,n(h)}if(++a>=s)return u>0?void 0:n(d);p.apply(e,arguments)}};Br.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],i=n.length;for(let s=0;s<i;++s)n[s].fn.apply(e,r||[])};Br.prototype.execPost=function(t,e,r,n,i){arguments.length<5&&(i=n,n=null);let s=this._posts.get(t)||[],o=s.length,a=0,u=null;if(n&&n.error&&(u=n.error),!o)return Fv(function(){i.apply(null,[u].concat(r))});function c(){let l=s[a].fn,d=0,p=r.length,f=[];for(let h=0;h<p;++h)d+=r[h]&&r[h]._kareemIgnore?0:1,(!r[h]||!r[h]._kareemIgnore)&&f.push(r[h]);if(u)if(I6e(s[a],d)){let h=Nv(function(g){if(g){if(g instanceof Br.overwriteResult)return r=g.args,++a>=o?i.call(null,u):c();u=g}if(++a>=o)return i.call(null,u);c()});dO(l,e,[u].concat(f).concat([h]),h)}else{if(++a>=o)return i.call(null,u);c()}else{let h=Nv(function(g){if(g)return g instanceof Br.overwriteResult?(r=g.args,++a>=o?i.apply(null,[null].concat(r)):c()):(u=g,c());if(++a>=o)return i.apply(null,[null].concat(r));c()});if(I6e(s[a],d))return++a>=o?i.apply(null,[null].concat(r)):c();if(l.length===d+1)dO(l,e,f.concat([h]),h);else{let g,_;try{_=l.apply(e,f)}catch(S){g=S,u=S}if(pO(_))return _.then(S=>{h(S instanceof Br.overwriteResult?S:null)},S=>h(S));if(_ instanceof Br.overwriteResult&&(r=_.args),++a>=o)return i.apply(null,[g].concat(r));c()}}}c()};Br.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],i=n.length;for(let s=0;s<i;++s){let o=n[s].fn.apply(e,r||[]);o instanceof Br.overwriteResult&&(r=o.args)}return r};Br.prototype.createWrapperSync=function(t,e){let r=this;return function(){r.execPreSync(t,this,arguments);let i=e.apply(this,arguments);return r.execPostSync(t,this,[i])[0]}};function x6e(t,e,r,n,i,s,o){return s.useErrorHandlers?t.execPost(r,n,i,{error:e},function(a){return typeof o=="function"&&o(a)}):typeof o=="function"&&o(e)}Br.prototype.wrap=function(t,e,r,n,i){let s=n.length>0?n[n.length-1]:null,o=Array.from(n);typeof s=="function"&&o.pop();let a=this;i=i||{};let u=i.checkForPromise;this.execPre(t,r,n,function(c){if(c&&!(c instanceof Br.skipWrappedFunction)){let f=i.numCallbackParams||0,h=i.contextParameter?[r]:[];for(let g=h.length;g<f;++g)h.push(null);return x6e(a,c,t,r,h,i,s)}let l=e.length,d;if(c instanceof Br.skipWrappedFunction)return d=c.args[0],p(null,...c.args);try{d=e.apply(r,o.concat(p))}catch(f){return p(f)}if(u){if(pO(d))return d.then(f=>p(null,f),f=>p(f));if(l<o.length+1)return p(null,d)}function p(){let f=Array.from(arguments);if(f.shift(),i.nullResultByDefault&&f.length===0&&f.push(null),arguments[0])return x6e(a,arguments[0],t,r,f,i,s);a.execPost(t,r,f,function(){s!==null&&(arguments[0]?s(arguments[0]):s.apply(r,arguments))})}})};Br.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let i of r){let s=this._pres.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._pres.delete(i);continue}s.numAsync=s.filter(o=>o.isAsync).length,e._pres.set(i,s)}let n=Array.from(e._posts.keys());for(let i of n){let s=this._posts.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._posts.delete(i);continue}e._posts.set(i,s)}return e};Br.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Br.prototype.createWrapper=function(t,e,r,n){let i=this;return this.hasHooks(t)?function(){let s=r||this;i.wrap(t,e,s,Array.from(arguments),n)}:function(){Fv(()=>e.apply(this,arguments))}};Br.prototype.pre=function(t,e,r,n,i){let s={};typeof e=="object"&&e!==null?(s=e,e=s.isAsync):typeof arguments[1]!="boolean"&&(r=e,e=!1);let o=this._pres.get(t)||[];if(this._pres.set(t,o),e&&(o.numAsync=o.numAsync||0,++o.numAsync),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return i?o.unshift(Object.assign({},s,{fn:r,isAsync:e})):o.push(Object.assign({},s,{fn:r,isAsync:e})),this};Br.prototype.post=function(t,e,r,n){let i=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this._posts.set(t,i),this};Br.prototype.clone=function(){let t=new Br;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();r.numAsync=this._pres.get(e).numAsync,t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Br.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let i=r._pres.get(n)||[],s=t._pres.get(n).filter(a=>i.map(u=>u.fn).indexOf(a.fn)===-1),o=i.concat(s);o.numAsync=i.numAsync||0,o.numAsync+=s.filter(a=>a.isAsync).length,r._pres.set(n,o)}for(let n of t._posts.keys()){let i=r._posts.get(n)||[],s=t._posts.get(n).filter(o=>i.indexOf(o)===-1);r._posts.set(n,i.concat(s))}return r};function dO(t,e,r,n){let i;try{i=t.apply(e,r)}catch(s){return n(s)}pO(i)&&i.then(()=>n(),s=>n(s))}function pO(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function Nv(t){let e=!1,r=this;return function(){if(!e)return e=!0,Fv(()=>t.apply(r,arguments))}}var Fv=typeof process=="object"&&process!==null&&process.nextTick||function(e){setTimeout(e,0)};function I6e(t,e){return t.errorHandler?!0:t.fn.length===e+2}R6e.exports=Br});var M6e=m((D6e,k6e)=>{"use strict";var fo=k6e.exports=D6e={};fo.DocumentNotFoundError=null;fo.general={};fo.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";fo.general.required="Path `{PATH}` is required.";fo.Number={};fo.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";fo.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";fo.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";fo.Date={};fo.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";fo.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";fo.String={};fo.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";fo.String.match="Path `{PATH}` is invalid ({VALUE}).";fo.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";fo.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var ho=m((f2r,F6e)=>{"use strict";var gEt=Qt(),EEt=require("util"),fO=class extends gEt{constructor(e,r,n,i,s){if(arguments.length>0){let o=P6e(r),a=N6e(s),u=Tz(null,e,r,n,a,o,i);super(u),this.init(e,r,n,i,s)}else super(Tz())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,i,s){this.stringValue=Oz(r),this.messageFormat=N6e(s),this.kind=e,this.value=r,this.path=n,this.reason=i,this.valueType=P6e(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=Tz(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(fO.prototype,"name",{value:"CastError"});function Oz(t){let e=EEt.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function P6e(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function N6e(t){let e=t&&t._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function Tz(t,e,r,n,i,s,o){if(typeof i=="string"){let a=Oz(r),u=i.replace("{KIND}",e).replace("{VALUE}",a).replace("{PATH}",n);return t!=null&&(u=u.replace("{MODEL}",t.modelName)),u}else{if(typeof i=="function")return i(r,n,t,e);{let a=Oz(r),u=s?" (type "+s+")":"",c="Cast to "+e+" failed for value "+a+u+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}F6e.exports=fO});var mO=m((h2r,q6e)=>{"use strict";var B6e=Qt(),bEt=require("util"),hO=class extends B6e{constructor(e,r,n,i){let s,o=B6e.messages;o.DocumentNotFoundError!=null?s=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:s='No document found for query "'+bEt.inspect(e)+'" on model "'+r+'"',super(s),this.result=i,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(hO.prototype,"name",{value:"DocumentNotFoundError"});q6e.exports=hO});var xz=m((m2r,L6e)=>{"use strict";L6e.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,i=[],s;for(let o=0;o<n;++o)s=r[o],e!==e.errors[s]&&i.push(s+": "+e.errors[s].message);return i.join(", ")}});var G0=m((y2r,K6e)=>{"use strict";var _Et=Qt(),vEt=$o(),j6e=require("util"),$6e=xz(),V0=class t extends _Et{constructor(e){let r;vEt(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+$6e(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(`${e}.${i}`,n[i]);return}this.errors[e]=r,this.message=this._message+": "+$6e(this)}};j6e.inspect.custom&&(V0.prototype[j6e.inspect.custom]=V0.prototype.inspect);Object.defineProperty(V0.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(V0.prototype,"name",{value:"ValidationError"});K6e.exports=V0});var Iz=m((g2r,G6e)=>{"use strict";var U6e=Qt(),uE=class extends U6e{constructor(e,r){let n=e.message;n||(n=U6e.messages.general.default);let i=V6e(n,e,r);super(i),e=Object.assign({},e,{message:i}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(uE.prototype,"name",{value:"ValidatorError"});Object.defineProperty(uE.prototype,"properties",{enumerable:!1,writable:!0,value:null});uE.prototype.formatMessage=V6e;function V6e(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let i of n)i!=="message"&&(t=t.replace("{"+i.toUpperCase()+"}",e[i]));return t}G6e.exports=uE});var Rz=m((E2r,H6e)=>{"use strict";var SEt=Qt(),yO=class extends SEt{constructor(e,r,n){let i=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+i+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(yO.prototype,"name",{value:"VersionError"});H6e.exports=yO});var Dz=m((b2r,z6e)=>{"use strict";var wEt=Qt(),gO=class extends wEt{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(gO.prototype,"name",{value:"ParallelSaveError"});z6e.exports=gO});var kz=m((_2r,W6e)=>{"use strict";var AEt=Qt(),EO=class extends AEt{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(EO.prototype,"name",{value:"OverwriteModelError"});W6e.exports=EO});var Y6e=m((v2r,J6e)=>{"use strict";var CEt=Qt(),bO=class extends CEt{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(bO.prototype,"name",{value:"MissingSchemaError"});J6e.exports=bO});var Mz=m((S2r,Q6e)=>{"use strict";var TEt=Qt(),_O=class extends TEt{constructor(e,r,n){let i=n?.matchedCount??0,s=n?.insertedCount??0,o=r.map(u=>u._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let a=r.length-i-s;super(`${e}.bulkSave() was not able to update ${a} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=a}};Object.defineProperty(_O.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});Q6e.exports=_O});var Z6e=m((w2r,X6e)=>{"use strict";var OEt=$o();X6e.exports=function(e){if(OEt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var tEe=m((A2r,eEe)=>{"use strict";var xEt=$o();eEe.exports=function(e){if(xEt(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var nEe=m((C2r,rEe)=>{"use strict";var IEt=$o(),REt="Client network socket disconnected before secure TLS connection was established";rEe.exports=function(e){if(IEt(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(REt)!==-1)}});var Pz=m((T2r,iEe)=>{"use strict";var DEt=Qt(),kEt=Z6e(),MEt=tEe(),PEt=nEe();var NEt="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",FEt="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",vO=class extends DEt{assimilateError(e){let r=e.reason;MEt(r)&&kEt(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=NEt:PEt(r)?this.message=FEt:this.message=e.message;for(let i in e)i!=="name"&&(this[i]=e[i]);return this.cause=r,this}};Object.defineProperty(vO.prototype,"name",{value:"MongooseServerSelectionError"});iEe.exports=vO});var Nz=m((O2r,sEe)=>{"use strict";var BEt=Qt(),SO=class extends BEt{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(r)}};Object.defineProperty(SO.prototype,"name",{value:"DivergentArrayError"});sEe.exports=SO});var ph=m((x2r,oEe)=>{"use strict";var qEt=Qt(),wO=class extends qEt{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(wO.prototype,"name",{value:"StrictModeError"});oEe.exports=wO});var Fz=m((I2r,aEe)=>{"use strict";var LEt=Qt(),AO=class extends LEt{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(AO.prototype,"name",{value:"StrictPopulateError"});aEe.exports=AO});var Oa=m((uEe,cEe)=>{"use strict";var Gs=Qt();cEe.exports=uEe=Gs;Gs.messages=M6e();Gs.Messages=Gs.messages;Gs.CastError=ho();Gs.DocumentNotFoundError=mO();Gs.ValidationError=G0();Gs.ValidatorError=Iz();Gs.VersionError=Rz();Gs.ParallelSaveError=Dz();Gs.OverwriteModelError=kz();Gs.MissingSchemaError=Y6e();Gs.MongooseBulkSaveIncompleteError=Mz();Gs.MongooseServerSelectionError=Pz();Gs.DivergentArrayError=Nz();Gs.StrictModeError=ph();Gs.StrictPopulateError=Fz()});var cu=m((R2r,lEe)=>{"use strict";lEe.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var Ia=m((D2r,dEe)=>{"use strict";var jEt=zn(),Hs=class{constructor(e){if(e==null)return this;Object.assign(this,jEt(e))}},xa=cu();Object.defineProperty(Hs.prototype,"type",xa);Object.defineProperty(Hs.prototype,"validate",xa);Object.defineProperty(Hs.prototype,"cast",xa);Object.defineProperty(Hs.prototype,"required",xa);Object.defineProperty(Hs.prototype,"default",xa);Object.defineProperty(Hs.prototype,"ref",xa);Object.defineProperty(Hs.prototype,"refPath",xa);Object.defineProperty(Hs.prototype,"select",xa);Object.defineProperty(Hs.prototype,"index",xa);Object.defineProperty(Hs.prototype,"unique",xa);Object.defineProperty(Hs.prototype,"immutable",xa);Object.defineProperty(Hs.prototype,"sparse",xa);Object.defineProperty(Hs.prototype,"text",xa);Object.defineProperty(Hs.prototype,"transform",xa);dEe.exports=Hs});var CO=m((k2r,cE)=>{"use strict";var $Et=ho();cE.exports=function(e,r){if(cE.exports.convertToTrue.has(e))return!0;if(cE.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new $Et("boolean",e,r)};cE.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);cE.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var TO=m((M2r,pEe)=>{"use strict";var KEt=CO();pEe.exports=function(t){let e=this!=null?this.path:null;return KEt(t,e)}});var Bz=m((P2r,fEe)=>{"use strict";fEe.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var mEe=m((N2r,hEe)=>{"use strict";var UEt=ph();hEe.exports=function(t){t.$immutable?(t.$immutableSetter=VEt(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function VEt(t,e){return function(n,i,s,o){if(this==null||this.$__==null||this.isNew||o&&o.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let u=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==u)throw new UEt(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return u}}});var gEe=m((F2r,yEe)=>{"use strict";yEe.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var bEe=m((B2r,EEe)=>{"use strict";EEe.exports=function(e){let r=Object.keys(e),n=!0;for(let i=0,s=r.length;i<s;++i)if(typeof e[r[i]]=="object"&&e[r[i]]!==null){n=!1;break}return n}});var vEe=m((q2r,_Ee)=>{"use strict";_Ee.exports=function(e){let r=[],n="",i="DEFAULT";for(let s=0;s<e.length;++s)i==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[s])&&e[s]!=="]"&&(i="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[s]==="["?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="IN_SQUARE_BRACKETS"):e[s]==="]"?i==="IN_SQUARE_BRACKETS"?(i="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(i="DEFAULT",n+=e[s]):e[s]==="."?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="DEFAULT"):n+=e[s];return i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var CEe=m(Jp=>{var Bv=vEe(),SEe=["__proto__","constructor","prototype"];Jp.get=function(t,e,r,n){var i;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(i=r,r=void 0)),n||(n=AEe);var s=typeof t=="string"?Bv(t):t;if(!Array.isArray(s))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,a,u=0;u<s.length;++u){if(a=s[u],typeof s[u]!="string"&&typeof s[u]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof s[u]);if(Array.isArray(o)&&!/^\d+$/.test(a)){var c=s.slice(u);return[].concat(o).map(function(d){return d?Jp.get(c,d,r||i,n):n(void 0)})}if(i)o=i(o,a);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(a):l[a]}if(!o)return n(o)}return n(o)};Jp.has=function(t,e){var r=typeof t=="string"?Bv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[s]);if(i==null||typeof i!="object"||!(r[s]in i))return!1;i=i[r[s]]}return!0};Jp.unset=function(t,e){var r=typeof t=="string"?Bv(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(i==null||typeof i!="object"||!(r[s]in i))return!1;if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[s]);if(SEe.indexOf(r[s])!==-1)return!1;if(s===n-1)return delete i[r[s]],!0;i=i instanceof Map?i.get(r[s]):i[r[s]]}return!0};Jp.set=function(t,e,r,n,i,s){var o;typeof n=="function"&&(n.length<2?(i=n,n=void 0):(o=n,n=void 0)),i||(i=AEe);var a=typeof t=="string"?Bv(t):t;if(!Array.isArray(a))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var u=0;u<a.length;++u){if(typeof a[u]!="string"&&typeof a[u]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof a[u]);if(SEe.indexOf(a[u])!==-1)return}for(var c=s||/\$/.test(t)&&s!==!1,l=r,d,u=0,p=a.length-1;u<p;++u){if(d=a[u],d=="$"){if(u==p-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(d)){var f=a.slice(u);if(!c&&Array.isArray(e))for(var h=0;h<l.length&&h<e.length;++h)Jp.set(f,e[h],l[h],n||o,i,c);else for(var h=0;h<l.length;++h)Jp.set(f,e,l[h],n||o,i,c);return}if(o)l=o(l,d);else{var g=n&&l[n]?l[n]:l;l=g instanceof Map?g.get(d):g[d]}if(!l)return}if(d=a[p],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(d))if(!c&&Array.isArray(e))wEe(l,e,d,o,n,i);else for(var h=0;h<l.length;++h){var _=l[h];_&&(o?o(_,d,i(e)):(_[n]&&(_=_[n]),_[d]=i(e)))}else o?o(l,d,i(e)):l instanceof Map?l.set(d,i(e)):l[d]=i(e)}};Jp.stringToParts=Bv;function wEe(t,e,r,n,i,s){for(var o,a=0;a<t.length&&a<e.length;++a)o=t[a],Array.isArray(o)&&Array.isArray(e[a])?wEe(o,e[a],r,n,i,s):o&&(n?n(o,r,s(e[a])):(o[i]&&(o=o[i]),o[r]=s(e[a])))}function AEe(t){return t}});var lu=m((TEe,OEe)=>{"use strict";OEe.exports=TEe=CEe()});var Lz=m((j2r,xEe)=>{"use strict";var GEt=zn(),qz=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=GEt(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};xEe.exports=qz});var REe=m(IEe=>{"use strict";IEe.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var OO=m((K2r,DEe)=>{"use strict";var HEt=Wu(),lE=Symbol("mongoose#emitted");DEe.exports=function(e,r,n,i){if(typeof e=="function")try{return r(function(s){if(s!=null){n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[lE]&&(s[lE]=!0,n.emit("error",s));try{e(s)}catch(o){return HEt(()=>{throw o})}return}e.apply(this,arguments)})}catch(s){return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[lE]&&(s[lE]=!0,n.emit("error",s)),e(s)}return i=i||global.Promise,new i((s,o)=>{r(function(a,u){if(a!=null)return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!a[lE]&&(a[lE]=!0,n.emit("error",a)),o(a);if(arguments.length>2)return s(Array.prototype.slice.call(arguments,1));s(u)})})}});var xO=m((U2r,kEe)=>{"use strict";kEe.exports=function(e,r,n){let i=Object.keys(r.tree),s={};for(let o of i)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(s[o]=r.tree[o]);e.options._isMerging=!0,e.add(s,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,a]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,a);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var NEe=m((MEe,PEe)=>{"use strict";var V2r=Ot(),cc=PEe.exports=MEe=function(){};cc.ctor=function(){let t=[...arguments],e=function(){cc.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new cc,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};cc.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let i=this.states[n];i&&delete i[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};cc.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,i;for(;n--;)i=r[n],delete this.states[e][i],delete this.paths[i]};cc.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};cc.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};cc.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};cc.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let i=this;return r.reduce(function(o,a){return i.states[a]==null?o:o.concat(Object.keys(i.states[a]))},[])[e](function(o,a,u){return n(o,a,u)})}};cc.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};cc.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};cc.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var qEe=m((FEe,BEe)=>{"use strict";var zEt=NEe(),WEt=zEt.ctor("require","modify","init","default","ignore");BEe.exports=FEe=ai;function ai(){this.activePaths=new WEt}ai.prototype.strictMode=!0;ai.prototype.fullPath=void 0;ai.prototype.selected=void 0;ai.prototype.shardval=void 0;ai.prototype.saveError=void 0;ai.prototype.validationError=void 0;ai.prototype.adhocPaths=void 0;ai.prototype.removing=void 0;ai.prototype.inserting=void 0;ai.prototype.saving=void 0;ai.prototype.version=void 0;ai.prototype._id=void 0;ai.prototype.ownerDocument=void 0;ai.prototype.populate=void 0;ai.prototype.populated=void 0;ai.prototype.primitiveAtomics=void 0;ai.prototype.wasPopulated=!1;ai.prototype.scope=void 0;ai.prototype.session=null;ai.prototype.pathsToScopes=null;ai.prototype.cachedRequired=null});var dE=m((G2r,$Ee)=>{"use strict";var jz=fa().Binary,JEt=fa().UUID,LEe=Ot();function Ko(t,e,r){let n=t;t==null&&(n=0);let i,s,o;Array.isArray(e)?(s=e[0],o=e[1]):i=e;let a;return typeof n=="number"||n instanceof Number?a=Buffer.alloc(n):a=Buffer.from(n,i,r),LEe.decorate(a,Ko.mixin),a.isMongooseBuffer=!0,a[Ko.pathSymbol]=s,a[jEe]=o,a._subtype=0,a}var YEt=Symbol.for("mongoose#Buffer#_path"),jEe=Symbol.for("mongoose#Buffer#_parent");Ko.pathSymbol=YEt;Ko.mixin={_subtype:void 0,_markModified:function(){let t=this[jEe];return t&&t.markModified(this[Ko.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}};LEe.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Ko.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Ko.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new jz(Buffer.from(this),e)};Ko.mixin.$toObject=Ko.mixin.toObject;Ko.mixin.toBSON=function(){return new jz(this,this._subtype||0)};Ko.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new JEt(this)};Ko.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Ko.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Ko.Binary=jz;$Ee.exports=Ko});var H0=m($z=>{"use strict";$z.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");$z.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var z0=m((z2r,KEe)=>{"use strict";var IO=Ci(),QEt=H0(),XEt=dh(),ZEt=Ot();function lc(t,e){if(e&&e.default){let r=e.default;Array.isArray(r)&&r.length===0?e.default=Array:!e.shared&&XEt(r)&&Object.keys(r).length===0&&(e.default=function(){return{}})}IO.call(this,t,e,"Mixed"),this[QEt.schemaMixedSymbol]=!0}lc.schemaName="Mixed";lc.defaultOptions={};lc.prototype=Object.create(IO.prototype);lc.prototype.constructor=lc;lc.get=IO.get;lc.set=IO.set;lc.setters=[];lc.prototype.cast=function(t){return t instanceof Error?ZEt.errorToPOJO(t):t};lc.prototype.castForQuery=function(t,e){return e};lc.prototype.toJSONSchema=function(e){return{}};KEe.exports=lc});var VEe=m((J2r,UEe)=>{"use strict";UEe.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var DO=m((Y2r,GEe)=>{"use strict";var ebt=Qt(),RO=class extends ebt{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(RO.prototype,"name",{value:"ObjectExpectedError"});GEe.exports=RO});var MO=m((Q2r,HEe)=>{"use strict";var tbt=Qt(),kO=class extends tbt{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+e.toString()+'" (type '+typeof e+")")}};Object.defineProperty(kO.prototype,"name",{value:"ObjectParameterError"});HEe.exports=kO});var WEe=m((X2r,zEe)=>{"use strict";var rbt=Qt(),PO=class extends rbt{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(PO.prototype,"name",{value:"ParallelValidateError"});zEe.exports=PO});var Kz=m((Z2r,JEe)=>{"use strict";JEe.exports=function(e){let r={},n=Object.keys(e);for(let i of n){if(i.indexOf(".")===-1){r[i]=1;continue}let s=i.split("."),o=s[0];for(let a=0;a<s.length;++a)r[o]=1,a+1<s.length&&(o=o+"."+s[a+1])}return r}});var QEe=m((e6r,YEe)=>{"use strict";YEe.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var NO=m((t6r,XEe)=>{"use strict";var nbt=QEe();XEe.exports=function(e,r,n,i,s,o,a){let u=Object.keys(e.$__schema.paths),c=u.length,l=a&&a.skipParentChangeTracking;for(let d=0;d<c;++d){let p,f="",h=u[d];if(h==="_id"&&e.$__.skipId)continue;let g=e.$__schema.paths[h],_=g.splitPath(),S=_.length;if(_[S-1]==="$*")continue;let w=!1,C=e._doc;for(let A=0;A<S&&C!=null;++A){let O=_[A];if(f+=(f.length?".":"")+O,n===!0){if(f in r)break}else if(n===!1&&r&&!w){let x=g.$isSingleNested||g.$isMongooseDocumentArray;if(f in r&&!nbt(r[f])||A===S-1&&x&&i!=null&&i[f])w=!0;else if(i!=null&&!i[f])break}if(A===S-1){if(C[O]!==void 0)break;if(s!=null){if(typeof g.defaultValue=="function"){if(!g.defaultValue.$runBeforeSetters&&s||g.defaultValue.$runBeforeSetters&&!s)break}else if(!s)continue}if(o&&o[f])break;if(r&&n!==null){if(n===!0){if(h in r)continue;try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Uz(e,h,l))}else if(w){try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Uz(e,h,l))}}else{try{p=g.getDefault(e,!1)}catch(x){e.invalidate(h,x);break}typeof p<"u"&&(C[O]=p,Uz(e,h,l))}}else C=C[O]}}};function Uz(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var FO=m((r6r,ebe)=>{"use strict";ebe.exports=function(e,r,n){n=n||{};let i=n.skipDocArrays,s=0;if(!e)return s;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify"))){if(i){let a=e.$__schema.path(o);if(a&&a.$isMongooseDocumentArray)continue}o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++s,e.$isSubdocument&&ZEe(e,o))}return s};function ZEe(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),i=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(i),n.$isSubdocument&&ZEe(n,i,r)}});var qO=m(Vz=>{"use strict";var ibt=zn(),sbt=ot().documentSchemaSymbol,obt=Il().internalToObjectOptions,abt=Ot(),pE,ubt=ot().getSymbol,BO=ot().scopeSymbol,tbe=abt.isPOJO;Vz.compile=rbe;Vz.defineKey=nbe;var cbt=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),lbt=Object.freeze({noDottedPath:!0});function rbe(t,e,r,n){pE=pE||dc();let i=n.typeKey;for(let s of Object.keys(t)){let o=t[s],u=tbe(o)&&Object.keys(o).length>0&&(!o[i]||i==="type"&&tbe(o.type)&&o.type.type)?o:null;nbe({prop:s,subprops:u,prototype:e,prefix:r,options:n})}}function nbe({prop:t,subprops:e,prototype:r,prefix:n,options:i}){pE=pE||dc();let s=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):lbt;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){let a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[s]){let u=Object.create(pE.prototype,dbt(this));n||(u.$__[BO]=this),u.$__.nestedPath=s,Object.defineProperty(u,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,sbt,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return ibt(a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(u,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(u,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(u,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(u,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(s,null,cbt)||{}).length===0}}),Object.defineProperty(u,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),rbe(e,u,s,i),this.$__.getters[s]=u}return this.$__.getters[s]},set:function(a){a!=null&&a.$__isNested?a=a.$__get():a instanceof pE&&!a.$__isNested&&(a=a.$toObject(obt)),(this.$__[BO]||this).$set(s,a)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[ubt].call(this.$__[BO]||this,s,null,o)},set:function(a){this.$set.call(this.$__[BO]||this,s,a)}})}function dbt(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var sbe=m((i6r,ibe)=>{"use strict";ibe.exports=function(e){return e==null?null:Object.keys(e)[0]}});var LO=m(Gz=>{"use strict";var pbt=fa().Binary,obe=Vs(),abe=kv(),fbt=Oa(),hbt=require("util");Gz.flatten=ube;Gz.modifiedPaths=cbe;function ube(t,e,r,n){let i;t&&abe(t)&&!Buffer.isBuffer(t)?i=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):i=Object.keys(t||{});let s=i.length,o={};e=e?e+".":"";for(let a=0;a<s;++a){let u=i[a],c=t[u];o[e+u]=c;let l=n&&n.path&&n.path(e+u),d=n&&n.nested&&n.nested[e+u];if(!(l&&l.instance==="Mixed")){if(lbe(c)){if(r&&r.skipArrays&&Array.isArray(c))continue;let p=ube(c,e+u,r,n);for(let f in p)o[f]=p[f];Array.isArray(c)&&(o[e+u]=c)}if(d){let p=Object.keys(n.paths);for(let f of p)f.startsWith(e+u+".")&&!o.hasOwnProperty(f)&&(o[f]=void 0)}}}return o}function cbe(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new fbt(`a circular reference in the update value, updateValue:
${hbt.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let i=Object.keys(t||{}),s=i.length;r=r||{},e=e?e+".":"";for(let o=0;o<s;++o){let a=i[o],u=t[a],c=e+a;r[c]=!0,!Buffer.isBuffer(u)&&abe(u)&&(u=u.toObject({transform:!1,virtuals:!1})),lbe(u)&&cbe(u,e+a,r,n)}return n.trace.delete(t),r}function lbe(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!obe(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!obe(t,"Decimal128")&&!(t instanceof pbt)}});var ui=m((o6r,dbe)=>{"use strict";dbe.exports=function(e,r,n){let i,s=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let u=Hz(e,r);return u??n}i=r.split(".")}else if(s=!0,i=r,i.length===1){let u=Hz(e,i[0]);return u??n}let o=r,a=e;for(let u of i){if(a==null)return n;if(!s&&a[o]!=null)return a[o];a=Hz(a,u),s||(o=o.substr(u.length+1))}return a??n};function Hz(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var zz=m((a6r,fbe)=>{"use strict";var pbe=Vs();fbe.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:pbe(e,"ObjectId")&&pbe(r,"ObjectId")?e.toString()===r.toString():!1}});var jO=m((u6r,hbe)=>{"use strict";var mbt=zz();hbe.exports=function(e,r){if(e==null||e.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let i=e.discriminators[n];if(i.discriminatorMapping!=null&&mbt(i.discriminatorMapping.value,r))return i}return null}});var ybe=m((c6r,mbe)=>{"use strict";var ybt=ui(),gbt=jO();mbe.exports=function t(e,r,n){n=n||{};let i=n.typeOnly,s=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,a="adhocOrUndefined",u=gbt(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<s.length;++c){let l=s.slice(0,c+1).join(".");if(o=u.path(l),o==null){a="adhocOrUndefined";continue}if(o.instance==="Mixed")return i?"real":o;if(a=u.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let d=o.schema.discriminators,p=e.get(l+"."+ybt(o,"schema.options.discriminatorKey"));if(p==null||d[p]==null)continue;let f=s.slice(c+1).join(".");return t(e.get(l),f,n)}}return i?a:o}});var Ebe=m((l6r,gbe)=>{"use strict";var Ebt=ui();gbe.exports=function(e,r,n){let i=n!=null?Object.keys(Ebt(e.tree,n,{})):Object.keys(e.tree),s=new Set(Object.keys(r)),o;if(s.size>1){o=new Set;for(let a of i)s.has(a)&&o.add(a);for(let a of s)o.has(a)||o.add(a);o=Array.from(o)}else o=Array.from(s);return o}});var _be=m((d6r,bbe)=>{"use strict";bbe.exports=function(e,r){if(r.length===1)return;let n=r[0],i;for(let s=0;s<r.length-1;++s){let o=e.path(n);o&&o.schema?(i=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[s+1])?"":r[s+1]):n+=n.length?"."+r[s+1]:r[s+1]}return i}});var $O=m((p6r,vbe)=>{"use strict";var bbt=Ot(),_bt=new Set(["__index","__parentArray","_doc"]);vbe.exports=function(e,r){if(bbt.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let i of Object.keys(e))typeof i!="symbol"&&i[0]!=="$"&&(_bt.has(i)||(n[i]=e[i]));return{...e._doc,...n}}return e._doc}return e}});var fE=m((f6r,Sbe)=>{"use strict";Sbe.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var hE=m((h6r,wbe)=>{"use strict";var vbt=fE(),Sbt=sE();wbe.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let i=0;i<r.length;++i){let s=r[i];if(s!=="_id"&&vbt(e[s])&&(n=Sbt(e[s])?t(e[s])??n:!e[s],n!=null))break}return n}});var Wz=m((m6r,Abe)=>{"use strict";var wbt=fE();Abe.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),i=null;for(let s of n)if(wbt(e[s])){i=e[r]===1?"inclusive":"exclusive";break}return i==="inclusive"?e[r]!==1:i==="exclusive"?e[r]===0:!1}});var Jz=m((y6r,Cbe)=>{"use strict";var Abt=Ot();Cbe.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let i of r){if(i.isVirtual)continue;let o=i.path.split(".");for(let a=0;a<o.length-1;++a){let u=o.slice(0,a+1).join("."),c=o.slice(a+1).join("."),l=e.get(u);if(l!=null&&Abt.isMongooseDocumentArray(l)){for(let d=0;d<l.length;++d)l[d]&&l[d].populated(c,i._docs[n]==null?void 0:i._docs[n][d],i);break}}}}});var Yz=m((g6r,Obe)=>{"use strict";var{isPOJO:Cbt}=Ot();Obe.exports=Tbe;function Tbe(t){let e=Object.keys(t),r=e.length,n,i,s;for(;r--;){if(i=e[r],s=t[i],Cbt(s)&&(t[i]=Tbe(s)),t[i]===void 0){delete t[i];continue}n=!0}return n?t:void 0}});var Qz=m((E6r,xbe)=>{"use strict";var Tbt=/\./g;xbe.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(Tbt),n=r.length,i=new Array(n),s="";for(let o=0;o<n;++o)s+=s.length!==0?"."+r[o]:r[o],i[o]=s;return i}});var Rbe=m((b6r,Ibe)=>{"use strict";Ibe.exports=function(e,r,n,i,s){let o=Object.keys(e).reduce((u,c)=>u||c.startsWith(r+"."),!1),a=r+"."+n.options.discriminatorKey;!o&&s.length===1&&s[0]===a&&i.splice(i.indexOf(a),1)}});var pc=m((_6r,Dbe)=>{"use strict";var Obt=zz();Dbe.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let i=e[n];if(i.schema&&i.schema.discriminatorMapping&&Obt(i.schema.discriminatorMapping.value,r))return i}return null}});var KO=m((v6r,kbe)=>{"use strict";kbe.exports=function(e,r){let n=r.split("."),i="",s,o,a;for(let u=0;u<n.length;++u)if(i+=i.length?".":""+n[u],e[i]){for(o=Object.keys(e),a=o.length,s=0;s<a;++s)o[u].indexOf(i+".")===0&&o[u].indexOf(r);return!0}return!1}});var qv=m(W0=>{"use strict";var Mbe=Lz(),xbt=Rbe(),Pbe=ui(),Ibt=pc(),Rbt=fE(),Dbt=zn(),kbt=KO();W0.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,i=Object.keys(n).reduce((a,u)=>a.concat([n[u]]),[]);r.lean!=null&&i.filter(a=>(a&&a.options&&a.options.lean)==null).forEach(Mbt(r.lean));let s=e&&e.options&&e.options.session||null;s!=null&&i.forEach(a=>{if(a.options==null){a.options={session:s};return}"session"in a.options||(a.options.session=s)});let o=e._fieldsForExec();for(let a=0;a<i.length;++a)i[a]instanceof Mbe?i[a]=new Mbe({...i[a],_queryProjection:o,_localModel:e.model}):(i[a]._queryProjection=o,i[a]._localModel=e.model);return i};W0.createModel=function(e,r,n,i,s){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,a=o&&o.isRoot?o.key:null,u=r[a];if(a&&u&&e.discriminators){let l=e.discriminators[u]||Ibt(e.discriminators,u);if(l){let d=Dbt(i);return W0.applyPaths(d,l.schema),new l(void 0,d,!0)}}let c={skipId:!0,isNew:!1,willInit:!0};return s!=null&&"defaults"in s&&(c.defaults=s.defaults),new e(void 0,n,c)};W0.createModelAndInit=function(e,r,n,i,s,o,a){let u=o?{populated:o}:void 0,c=W0.createModel(e,r,n,i,s);try{c.$init(r,u,a)}catch(l){a(l,c)}};W0.applyPaths=function(e,r,n){let i,s,o=new Set;if(e){s=Object.keys(e);let p=[];for(let f=0;f<s.length;++f){let h=s[f];s[f][0]==="-"&&(delete e[h],h==="-_id"?e._id=0:p.push(h.slice(1)))}s=Object.keys(e);for(let f=0;f<s.length;++f){if(s[f][0]==="+")continue;let h=e[s[f]];if(Rbt(h)&&!(s[f]==="_id"&&s.length>1)&&!(s[f]===r.options.discriminatorKey&&s.length>1&&h!=null&&!h)){i=!h;break}}for(let f of p){let h=r.path(f);!h||!h.selected||i!==!1?(e[f]=0,i=!0):h&&h.selected&&i===!1&&o.add(f)}}let a=[],u=[],c=[];switch(l(r),i){case!0:for(let p of u)e[p]=0;break;case!1:r&&r.paths._id&&r.paths._id.options&&r.paths._id.options.select===!1&&(e._id=0);for(let p of a)o.has(p)||kbt(e,p)||(e[p]=e[p]||1);break;case void 0:if(e==null)break;for(let p of Object.keys(e||{}))p.startsWith("+")&&delete e[p];for(let p of u)e[p]==null&&(e[p]=0);break}function l(p,f){if(f||(f=""),c.indexOf(p)!==-1)return[];c.push(p);let h=[];return p.eachPath(function(g,_){if(f&&(g=f+"."+g),_.$isSchemaMap||g.endsWith(".$*")){let w="+"+g,C=e&&w in e;_.options&&_.options.select===!1&&!C&&u.push(g);return}let S=d(g,_);if(S==null&&!Array.isArray(_)&&_.$isMongooseArray&&!_.$isMongooseDocumentArray&&(S=d(g,_.caster)),S!=null&&h.push(S),_.schema){let w=l(_.schema,g);i===!1&&xbt(e,g,_.schema,a,w)}}),c.pop(),h}function d(p,f){if(e==null||typeof f.selected!="boolean")return;if(f.selected===!1&&e[p]){n&&(e[p]=0);return}if(!i&&f.selected&&p===r.options.discriminatorKey&&e[p]!=null&&!e[p]){delete e[p];return}if(i===!1&&f.selected&&e[p]!=null&&!e[p]){delete e[p];return}let h="+"+p;if(e&&h in e){delete e[h],i===!1&&s.length>1&&!~s.indexOf(p)&&!n?e[p]=1:i==null&&n&&f.selected===!1&&(e[p]=0);return}let _=p.split("."),S="";for(let w=0;w<_.length;++w)if(S+=S.length?"."+_[w]:_[w],u.indexOf(S)!==-1)return;if(!i&&(f&&f.options&&f.options.$skipDiscriminatorCheck)){let w="";for(let C=0;C<_.length;++C){w+=(w.length===0?"":".")+_[C];let A=Pbe(e,w,!1)||Pbe(e,w+".$",!1);if(A&&typeof A!="object")return}}return(f.selected?a:u).push(p),p}};function Mbt(t){return function(e){e.options||(e.options={}),t!=null&&Array.isArray(t.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var Xz=m((w6r,Nbe)=>{"use strict";function Pbt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}Nbe.exports=Pbt});var Bbe=m((A6r,Fbe)=>{"use strict";Fbe.exports=function(e,r,n){let i=r[0],s=n,o=e;for(let a=0;a<r.length-1;++a){let u=s.path(i);if(u&&u.schema){let c=o.get(i);if(s=u.schema,i=r[a+1],Array.isArray(c)&&!isNaN(i)&&(c=c[i],i=""),c==null)break;o=c}else i+=i.length?"."+r[a+1]:r[a+1]}return o}});var UO=m((C6r,Lbe)=>{"use strict";var Yp=dc(),Nbt=Wu(),Fbt=Il().internalToObjectOptions,qbe=require("util"),Bbt=Ot();Lbe.exports=Wr;function Wr(t,e,r,n,i){if(typeof n=="object"&&n!=null&&i==null&&(i=n,n=void 0),r!=null){let o={isNew:r.isNew};"defaults"in r.$__&&(o.defaults=r.$__.defaults),i=Object.assign(o,i)}i!=null&&i.path!=null&&(this.$basePath=i.path),i!=null&&i.pathRelativeToParent!=null&&(this.$pathRelativeToParent=i.pathRelativeToParent);let s=i;i!=null&&i.path!=null&&(s=Object.assign({},i),delete s.path),Yp.call(this,t,e,n,s),delete this.$__.priorDoc}Wr.prototype=Object.create(Yp.prototype);Object.defineProperty(Wr.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(Wr.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});Wr.prototype.toBSON=function(){return this.toObject(Fbt)};Wr.prototype.save=async function(e){return e=e||{},e.suppressWarning||Bbt.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),new Promise((r,n)=>{this.$__save(i=>{if(i!=null)return n(i);r(this)})})};Wr.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};Wr.prototype.$__pathRelativeToParent=function(t){return this.$pathRelativeToParent!=null?t==null?this.$pathRelativeToParent:this.$pathRelativeToParent+"."+t:t==null?this.$basePath:this.$basePath?[this.$basePath,t].join("."):t};Wr.prototype.$__save=function(t){return Nbt(()=>t(null,this))};Wr.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Yp.prototype.$isValid.call(this,t)};Wr.prototype.markModified=function(t){Yp.prototype.markModified.call(this,t);let e=this.$parent();if(e==null)return;let r=this.$__pathRelativeToParent(t);if(r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};Wr.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(i=>this.$__pathRelativeToParent(i)).filter(i=>i!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Yp.prototype.isModified.call(this,t,e,r)};Wr.prototype.$markValid=function(t){Yp.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};Wr.prototype.invalidate=function(t,e,r){Yp.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),i=this.$__pathRelativeToParent(t);if(n!=null&&i!=null)n.invalidate(i,e,r);else if(e.kind==="cast"||e.name==="CastError"||i==null)throw e;return this.ownerDocument().$__.validationError};Wr.prototype.$ignore=function(t){Yp.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};Wr.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};Wr.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};Wr.prototype.parent=function(){return this.$__parent};Wr.prototype.$parent=Wr.prototype.parent;Wr.prototype.$__deleteOne=function(t){if(t!=null)return t(null,this)};Wr.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};Wr.prototype.deleteOne=function(t,e){if(typeof t=="function"&&(e=t,t=null),qbt(this),!t||!t.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}return this.$__deleteOne(e)};Wr.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};Wr.prototype.inspect=function(){return this.toObject()};qbe.inspect.custom&&(Wr.prototype[qbe.inspect.custom]=Wr.prototype.inspect);Wr.prototype.$toObject=function(e,r){let n=Yp.prototype.$toObject.call(this,e,r);if(!(Object.keys(n).length===0&&e?._calledWithOptions!=null&&(e._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??e.minimize)&&!this.constructor.$__required))return n};function qbt(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var mE=m((T6r,Kbe)=>{"use strict";var jbe=require("events").EventEmitter,$be=UO(),Lbt=Ot(),Lv=ot().documentArrayParent;function Ra(t,e,r,n,i){Lbt.isMongooseDocumentArray(e)?(this.__parentArray=e,this[Lv]=e.$parent()):(this.__parentArray=void 0,this[Lv]=void 0),this.$setIndex(i),this.$__parent=this[Lv];let s;typeof r=="object"&&r!=null?(s={isNew:!0,...r},r=void 0):s={isNew:!0},$be.call(this,t,n,this[Lv],r,s)}Ra.prototype=Object.create($be.prototype);Ra.prototype.constructor=Ra;Object.defineProperty(Ra.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(Ra.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in jbe.prototype)Ra[t]=jbe.prototype[t];Ra.prototype.$setIndex=function(t){if(this.__index=t,this.$__!=null&&this.$__.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};Ra.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};Ra.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};Ra.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};Ra.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray||!this.__parentArray.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};Ra.prototype.$parent=function(){return this[Lv]};Ra.prototype.parentArray=function(){return this.__parentArray};Kbe.exports=Ra});var HO=m((O6r,Ybe)=>{"use strict";var tW=dc(),Zz=mE(),jbt=Qt(),Ube=FO(),$bt=zn(),Vbe=Il().internalToObjectOptions,zbe=lu(),mo=Ot(),eW=Vs(),Qp=ot().arrayAtomicsSymbol,fh=ot().arrayParentSymbol,hh=ot().arrayPathSymbol,Uo=ot().arraySchemaSymbol,Wbe=ot().populateModelSymbol,Kbt=Symbol("mongoose#Array#sliced"),Gbe=Array.prototype.push;var GO={$__getAtomics(){let t=[],e=Object.keys(this[Qp]||{}),r=e.length,n=Object.assign({},Vbe,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let i=e[r],s=this[Qp][i];mo.isMongooseObject(s)?s=s.toObject(n):Array.isArray(s)?s=this.toObject.call(s,n):s!=null&&Array.isArray(s.$each)?s.$each=this.toObject.call(s.$each,n):s!=null&&typeof s.valueOf=="function"&&(s=s.valueOf()),i==="$addToSet"&&(s={$each:s}),t.push([i,s])}return t},$atomics(){return this[Qp]},$parent(){return this[fh]},$path(){return this[hh]},$schemaType(){return this[Uo]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[Uo]},_cast(t){let e=!1,r,n=this[fh];if(n&&(e=n.$populated(this[hh],!0)),e&&t!==null&&t!==void 0){if(r=e.options[Wbe],r==null)throw new jbt("No populated model found for path `"+this[hh]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||eW(t,"ObjectId")||!mo.isObject(t))&&(t={_id:t}),t.schema&&t.schema.discriminatorMapping&&t.schema.discriminatorMapping.key!==void 0||(t=new r(t)),this[Uo].caster.applySetters(t,n,!0)}return this[Uo].caster.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[fh],r;if(e){if(r=this[hh],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[Kbt])return;if(t==="$set")return this[Qp]={$set:e},Ube(this[fh],this[hh]),this._markModified(),this;let r=this[Qp];if(t==="$pop"&&!("$pop"in r)){let i=this;this[fh].once("save",function(){i._popped=i._shifted=null})}if(r.$set||Object.keys(r).length&&!(t in r))return this[Qp]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let i=r.$pull||(r.$pull={});e[0]instanceof Zz?(n=i.$or||(i.$or=[]),Array.prototype.push.apply(n,e.map(s=>s.toObject({transform:(o,a)=>(s==null||s.$__==null||Object.keys(s.$__.activePaths.getStatePaths("default")).forEach(u=>{zbe.unset(u,a),Jbe(a,u)}),a),virtuals:!1})))):(n=i._id||(i._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&mo.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let i of e)r.$push.$each.push(i);else r[t]=e;return this},addToSet(){VO(this,arguments),Hbe(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof Zz?r="doc":t[0]instanceof Date?r="date":eW(t[0],"ObjectId")&&(r="ObjectId");let n=mo.isMongooseArray(t)?t.__array:t,i=mo.isMongooseArray(this)?this.__array:this;return n.forEach(function(s){let o,a=+s;switch(r){case"doc":o=this.some(function(u){return u.equals(s)});break;case"date":o=this.some(function(u){return+u===a});break;case"ObjectId":o=this.find(u=>u.toString()===s.toString());break;default:o=~this.indexOf(s);break}o||(this._markModified(),i.push(s),this._registerAtomic("$addToSet",s),[].push.call(e,s))},this),e},hasAtomics(){return mo.isPOJO(this[Qp])?Object.keys(this[Qp]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){eW(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(i,s)=>this._cast(i,s,{defaults:!1}),this),e=this;mo.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof tW?t.some(function(s){return n.equals(s)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof Zz?this._registerAtomic("$pullDocs",t.map(function(i){let s=i.$__getValue("_id");return s===void 0||i.$isDefault("_id")?i:s})):this._registerAtomic("$pullAll",t),Ube(this[fh],this[hh])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&mo.hasUserDefinedProperty(t[0],"$each"),n=mo.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[Uo]==null)return Gbe.apply(this,t);VO(this,t),Hbe(this,t),t=[].map.call(t,this._mapCast,this);let i,s=this[Qp];return this._markModified(),r?(e.$each=t,(s.$push&&s.$push.$each&&s.$push.$each.length||0)!==0&&s.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=n.length):i=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=this.length):i=[].push.apply(n,t)):(e=t,i=Gbe.apply(n,t)),this._registerAtomic("$push",e),i},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=GO._cast.call(this,e,t);return GO._markModified.call(this,t),n[t]=i,this},shift(){let t=mo.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=mo.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=mo.isMongooseArray(this)?this.__array:this;if(this._markModified(),VO(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[Uo]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(Vbe)},toObject(t){let e=mo.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?(t=$bt(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof tW?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){VO(this,arguments);let t;this[Uo]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=mo.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function Ubt(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof tW)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function Jbe(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=zbe.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(Jbe(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Object.keys(t[e[0]]).length===0&&delete t[e[0]]))}function VO(t,e){let r=t==null?null:t[Uo]&&t[Uo].caster&&t[Uo].caster.options&&t[Uo].caster.options.ref||null;t.length===0&&e.length!==0&&Ubt(e,r)&&t[fh].$populated(t[hh],[],{[Wbe]:e[0].constructor})}function Hbe(t,e){let r=t==null?null:t[Uo]&&t[Uo].caster&&t[Uo].caster.options&&t[Uo].caster.options.ref||null,n=t[fh],i=t[hh];if(!(!r||!n.populated(i))){for(let s of e)if(s!=null&&(typeof s!="object"||s instanceof String||s instanceof Number||s instanceof Buffer||mo.isMongooseType(s))){n.depopulate(i);break}}}var Vbt=["filter","flat","flatMap","map","slice"];for(let t of Vbt)Array.prototype[t]!=null&&(GO[t]=function(){let e=mo.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});Ybe.exports=GO});var nW=m((t_e,r_e)=>{"use strict";var rW=HO(),zO=ot().arrayAtomicsSymbol,Gbt=ot().arrayAtomicsBackupSymbol,Qbe=ot().arrayParentSymbol,Hbt=ot().arrayPathSymbol,Xbe=ot().arraySchemaSymbol,Zbe=Array.prototype.push,e_e=/^\d+$/;function zbt(t,e,r,n){let i;if(Array.isArray(t)){let a=t.length;if(a===0)i=new Array;else if(a===1)i=new Array(1),i[0]=t[0];else if(a<1e4)i=new Array,Zbe.apply(i,t);else{i=new Array;for(let u=0;u<a;++u)Zbe.call(i,t[u])}}else i=[];let s={[zO]:{},[Gbt]:void 0,[Hbt]:e,[Xbe]:n,[Qbe]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:i};t&&t[zO]!=null&&(s[zO]=t[zO]),r!=null&&r.$__&&(s[Qbe]=r,s[Xbe]=n||r.schema.path(e));let o=new Proxy(i,{get:function(a,u){return s.hasOwnProperty(u)?s[u]:rW.hasOwnProperty(u)?rW[u]:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applyGetters(void 0,a):typeof u=="string"&&e_e.test(u)&&n?.$embeddedSchemaType!=null?n.$embeddedSchemaType.applyGetters(i[u],r):i[u]},set:function(a,u,c){return typeof u=="string"&&e_e.test(u)?rW.set.call(o,u,c,!1):s.hasOwnProperty(u)?s[u]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}r_e.exports=t_e=zbt});var sW=m((x6r,i_e)=>{"use strict";var n_e=Vs(),iW=Wp();i_e.exports=function(e){if(e==null||n_e(e,"ObjectId"))return e;if(e._id){if(n_e(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new iW(e._id.toString())}return e.toString instanceof Function?new iW(e.toString()):new iW(e)}});var u_e=m((I6r,a_e)=>{"use strict";var WO=HO(),Wbt=dc(),Jbt=sW(),s_e=pc(),Ybt=Il().internalToObjectOptions,JO=Ot(),oW=Vs(),XO=ot().arrayParentSymbol,aW=ot().arrayPathSymbol,YO=ot().arraySchemaSymbol,o_e=ot().documentArrayParent,Qbt=Array.prototype.toString,uW={toBSON(){return this.toObject(Ybt)},toString(){return Qbt.call(this.__array.map(t=>t!=null&&t.$__!=null?t.toString():t))},getArrayParent(){return this[XO]},$schemaType(){return this[YO]},_cast(t,e,r){if(this[YO]==null)return t;let n=this[YO].casterConstructor;if((n.$isMongooseDocumentArray?JO.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[o_e]&&t.__parentArray||(t[o_e]=this[XO],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||oW(t,"ObjectId")||!JO.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=s_e(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let s=new n(t,this,r,void 0,e);return s.isNew=!0,s},id(t){let e,r,n;try{e=Jbt(t).toString()}catch{e=null}for(let i of this)if(i&&(n=i.get("_id"),!(n===null||typeof n>"u"))){if(n instanceof Wbt){if(r||(r=String(t)),r==n._id)return i}else if(!oW(t,"ObjectId")&&!oW(n,"ObjectId")){if(t==n||JO.deepEqual(t,n))return i}else if(e==n)return i}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=WO.push.apply(this,arguments);return QO(this),t},pull(){let t=WO.pull.apply(this,arguments);return QO(this),t},shift(){let t=WO.shift.apply(this,arguments);return QO(this),t},splice(){let t=WO.splice.apply(this,arguments);return QO(this),t},inspect(){return this.toObject()},create(t){let e=this[YO].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=s_e(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,i){i=i||e;let s=i.length;for(;s--;)i[s]!=null&&(t==="save"&&(n=e[s]),JO.isMongooseArray(i[s])?r(n,i[s]):i[s]&&i[s].emit(t,n))}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=uW._cast.call(this,e,t);return uW._markModified.call(this,t),n[t]=i,this},_markModified(t,e){let r=this[XO],n;if(r){if(n=this[aW],arguments.length)if(e!=null){let i=t.__index;n=n+"."+i+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};a_e.exports=uW;function QO(t){let e=t[XO];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[aW]+"."));for(let n of r){let i=n.slice((t[aW]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(s=>s.$populated(i)))}}});var Y0=m((R6r,l_e)=>{"use strict";var c_e=HO(),cW=u_e(),lW=ot().arrayAtomicsSymbol,Xbt=ot().arrayAtomicsBackupSymbol,dW=ot().arrayParentSymbol,pW=ot().arrayPathSymbol,J0=ot().arraySchemaSymbol,Zbt=Array.prototype.push,e_t=/^\d+$/;function t_t(t,e,r,n){let i=[],s={[lW]:{},[Xbt]:void 0,[pW]:e,[J0]:void 0,[dW]:void 0};if(Array.isArray(t)&&(t[pW]===e&&t[dW]===r&&(s[lW]=Object.assign({},t[lW])),t.forEach(a=>{Zbt.call(i,a)})),s[pW]=e,s.__array=i,r&&r.$__)for(s[dW]=r,s[J0]=r.$__schema.path(e);s[J0]!=null&&s[J0].$isMongooseArray&&!s[J0].$isMongooseDocumentArray;)s[J0]=s[J0].casterConstructor;let o=new Proxy(i,{get:function(a,u){return u==="isMongooseArray"||u==="isMongooseArrayProxy"||u==="isMongooseDocumentArray"||u==="isMongooseDocumentArrayProxy"?!0:s.hasOwnProperty(u)?s[u]:cW.hasOwnProperty(u)?cW[u]:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applyGetters(void 0,a):c_e.hasOwnProperty(u)?c_e[u]:i[u]},set:function(a,u,c){return typeof u=="string"&&e_t.test(u)?cW.set.call(o,u,c,!1):s.hasOwnProperty(u)?s[u]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(u)?n.virtuals[u].applySetters(c,a):i[u]=c,!0}});return o}l_e.exports=t_t});var dc=m((x_e,I_e)=>{"use strict";var r_t=Nz(),hW=require("events").EventEmitter,n_t=qEe(),i_t=dE(),Da=Oa(),d_e=z0(),s_t=VEe(),o_t=DO(),a_t=MO(),u_t=WEe(),c_t=Q0(),mW=ph(),nx=G0(),b_e=Iz(),__e=Kz(),yW=NO(),ZO=FO(),Dl=zn(),l_t=qO().compile,d_t=qO().defineKey,p_t=sbe(),f_t=LO().flatten,fW=ybe(),p_e=Ebe(),h_t=_be(),m_t=$O(),f_e=Wu(),h_e=Vs(),v_e=fE(),y_t=hE(),m_e=Wz(),gW=require("util").inspect,S_e=Il().internalToObjectOptions,g_t=Jz(),E_t=Yz(),b_t=lu(),EW=Qz(),__t=qv(),Pt=Ot(),v_t=Xz(),tx=Pt.deepEqual,S_t=Pt.isMongooseObject,$v=ot().arrayAtomicsBackupSymbol,Vo=ot().arrayAtomicsSymbol,w_t=ot().documentArrayParent,A_t=ot().documentIsModified,w_e=ot().documentModifiedPaths,C_t=ot().documentSchemaSymbol,T_t=ot().getSymbol,O_t=ot().modelSymbol,y_e=ot().populateModelSymbol,x_t=ot().scopeSymbol,I_t=H0().schemaMixedSymbol,R_t=Bbe(),ex=ot().sessionNewDocuments,rx,g_e,jv,A_e=Pt.specialProperties,Kv=1,bW=2,Xp=Kv|bW;function ve(t,e,r,n){if(typeof r=="object"&&r!=null&&(n=r,r=n.skipId),n=Object.assign({},n),this.$__schema==null){let c=Pt.isObject(e)&&!e.instanceOfSchema?new c_t(e):e;this.$__setSchema(c),e=r,r=n,n=arguments[4]||{}}if(this.$__=new n_t,n.isNew!=null&&n.isNew!==!0&&(this.$isNew=n.isNew),n.priorDoc!=null&&(this.$__.priorDoc=n.priorDoc),r&&(this.$__.skipId=r),t!=null&&typeof t!="object")throw new a_t(t,"obj","Document");let i=!0;n.defaults!==void 0&&(this.$__.defaults=n.defaults,i=n.defaults);let s=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):s.options.strict!==!0&&(this.$__.strictMode=s.options.strict);let o=s.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let a=null;Pt.isPOJO(e)&&Object.keys(e).length>0&&(a=y_t(e),this.$__.selected=e,this.$__.exclude=a);let u=a===!1&&e?__e(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,r,a,u,!1),i&&yW(this,e,a,u,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,n):this.$set(t,void 0,!0,n),t instanceof ve&&(this.$isNew=t.$isNew)),n.willInit&&i?n.skipDefaults&&(this.$__.skipDefaults=n.skipDefaults):i&&yW(this,e,a,u,!1,n.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(d){!(d in s.tree)&&!(d in s.methods)&&!(d in s.virtuals)&&!d.startsWith("$")&&d_t({prop:d,subprops:null,prototype:c})})}L_t(this)}ve.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(ve.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(ve.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});ve.prototype.$isNew=!0;Pt.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){ve.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new hW,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},ve.prototype[`$${t}`]=ve.prototype[t]});ve.prototype.constructor=ve;for(let t in hW.prototype)ve[t]=hW.prototype[t];ve.prototype.$__schema;ve.prototype.schema;Object.defineProperty(ve.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});ve.prototype.isNew;Object.defineProperty(ve.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});ve.prototype.id;ve.prototype.$errors;Object.defineProperty(ve.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function D_t(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),i=n.length,s=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<i;++o){let a="",u=n[o];if(!u.startsWith(e+"."))continue;let c=r.$__schema.paths[u],l=c.splitPath().slice(s.length),d=l.length;if(c.defaultValue===void 0)continue;let p=t;for(let f=0;f<d&&p!=null;++f){let h=l[f];if(f===d-1){if(p[h]!==void 0)break;try{let g=c.getDefault(r,!1);g!==void 0&&(p[h]=g)}catch(g){r.invalidate(e+"."+a,g);break}break}a+=(a.length?".":"")+h,p[h]=p[h]||{},p=p[h]}}}ve.prototype.$__buildDoc=function(t,e,r,n,i){let s={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),a=o.length,u=0;for(;u<a;++u){let c=o[u];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),d=l.length,p=d-1,f="",h=s,g=!1;for(let _=0;_<d;++_){let S=l[_];if(f.length?f+="."+S:f=S,n===!0){if(f in e)break}else if(n===!1&&e&&!g){if(f in e)g=!0;else if(!i[f])break}_<p&&(h=h[S]||(h[S]={}))}}this._doc=s};ve.prototype.toBSON=function(){return this.toObject(S_e)};ve.prototype.init=function(t,e,r){return typeof e=="function"&&(r=e,e=null),this.$__init(t,e),r&&r(null,this),this};ve.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};ve.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let i of e.populated)if(i.isVirtual?this.$populated(i.path,Pt.getValue(i.path,t),i):this.$populated(i.path,i._docs[n],i),i._childDocs!=null){for(let s of i._childDocs)s==null||s.$__==null||(s.$__.parent=this);i._childDocs=[]}}C_e(this,t,this._doc,e),g_t(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?__e(this.$__.selected):null;return yW(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function C_e(t,e,r,n,i){i=i||"",e.$__!=null&&(e=e._doc);let s=Object.keys(e),o=s.length,a,u,c,l=t.$__.strictMode,d=t.$__schema;for(let p=0;p<o;++p){if(c=s[p],A_e.has(c)||(u=i?i+c:c,a=d.path(u),d.$isRootDiscriminator&&!t.$__isSelected(u)))continue;let f=e[c];if(!a&&Pt.isPOJO(f))r[c]||(r[c]={},(!l&&!(c in d.tree)&&!(c in d.methods)&&!(c in d.virtuals)||n?.virtuals&&c in d.virtuals)&&(t[c]=r[c])),C_e(t,f,r[c],n,u+".");else if(!a)r[c]=f,(!l&&!i||n?.virtuals&&c in d.virtuals)&&(t[c]=f);else{if(r.hasOwnProperty(c)&&f!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],f===null)r[c]=a._castNullish(null);else if(f!==void 0){let h=f.$__==null?null:f.$__.wasPopulated;if(a&&!h&&!n.hydratedPopulatedDocs)try{n&&n.setters?r[c]=a.applySetters(f,t,!1,null,n):r[c]=a.cast(f,t,!0,void 0,n)}catch(g){t.invalidate(g.path,new b_e({path:g.path,message:g.message,type:"cast",value:g.value,reason:g}))}else a&&n.hydratedPopulatedDocs?(r[c]=a.cast(f,t,!0,void 0,{hydratedPopulatedDocs:!0}),r[c]&&r[c].$__&&r[c].$__.wasPopulated?t.$populated(u,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(u,r[c].map(g=>g?.$__?.wasPopulated?.value).filter(g=>g!=null),r[c][0].$__.wasPopulated.options)):r[c]=f}t.$isModified(u)||t.$__.activePaths.init(u)}}}ve.prototype.updateOne=function(e,r,n){let i=this.constructor.updateOne({_id:this._doc._id},e,r),s=this;return i.pre(function(a){s.constructor._middleware.execPre("updateOne",s,[s],a)}),i.post(function(a){s.constructor._middleware.execPost("updateOne",s,[s],{},a)}),this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),n!=null?i.exec(n):i};ve.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};ve.prototype.$session=function(e){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(e!=null&&e.hasEnded)throw new Da("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};ve.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};ve.prototype.overwrite=function(e){let r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));for(let n of r)n!=="_id"&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]));return this};ve.prototype.$set=function(e,r,n,i){Pt.isPOJO(n)&&(i=n,n=void 0);let s=i&&i.merge,o=n&&n!==!0,a=n===!0,u,c,l=0,d,p,f,h=i&&"strict"in i,g=h?i.strict:this.$__.strictMode;if(o&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof ve&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?_W(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),f=r?r+".":"",c=p_e(this.$__schema,e);let M=c.length,I=i&&i._skipMinimizeTopLevel||!1;if(M===0&&I)return delete i._skipMinimizeTopLevel,r&&this.$set(r,{}),this;i=Object.assign({},i,{_skipMinimizeTopLevel:!1});for(let U=0;U<M;++U){p=c[U];let k=f?f+p:p;d=this.$__schema.pathType(k);let H=e[p];if(n===!0&&!f&&H!=null&&d==="nested"&&this._doc[p]!=null&&delete this._doc[p],Pt.isNonBuiltinObject(H)&&d==="nested"){this.$set(k,H,a,i),D_t(this.$get(k),k,this);continue}else if(g){if(a&&H===void 0&&this.$get(k)!==void 0)continue;if(d==="adhocOrUndefined"&&(d=fW(this,k,{typeOnly:!0})),d==="real"||d==="virtual")this.$set(k,H,a,i);else if(d==="nested"&&H instanceof ve)this.$set(k,H.toObject({transform:!1}),a,i);else{if(g==="throw")throw d==="nested"?new o_t(p,H):new mW(p);d==="nested"&&H==null&&this.$set(k,H,a,i)}}else this.$set(k,H,a,i)}let F={},B=Object.keys(this.$__schema.tree);for(let U=0,k=B.length;U<k;++U)(p=B[U])&&this._doc.hasOwnProperty(p)&&(F[p]=void 0);return this._doc=Object.assign(F,this._doc),this}let _=this.$__schema.pathType(e),S=null;if(_==="adhocOrUndefined"&&(S=e.indexOf(".")===-1?[e]:e.split("."),_=fW(this,S,{typeOnly:!0})),_==="adhocOrUndefined"&&!h){S==null&&(S=e.indexOf(".")===-1?[e]:e.split("."));let M=h_t(this.$__schema,S);M!==void 0&&(g=M)}r=m_t(r,!0);let w=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!a)return this.$__getValue(e)})();if(_==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(S_e)),r==null)return this.invalidate(e,new Da.CastError("Object",r,e)),this;let M=this.$isModified(e),I=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(e);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(e)){let B=this.$__getValue(e);this.$__.savedState[e]=B;let U=Object.keys(B||{});for(let k of U)this.$__.savedState[e+"."+k]=B[k]}if(!s)this.$__setValue(e,null),ZO(this,e);else return this.$set(r,e,a,i);let F=p_e(this.$__schema,r,e);this.$__setValue(e,{});for(let B of F)this.$set(e+"."+B,r[B],a,{...i,_skipMarkModified:!0});return w!=null&&(!M||I)&&Pt.deepEqual(I?this.$__.savedState[e]:w,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new Da.CastError("Object",r,e)),this}let C;if(S==null&&(S=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[S[0]]=="string"&&(S[0]=this.$__schema.aliases[S[0]]),_==="adhocOrUndefined"&&g){let M;for(l=0;l<S.length;++l){let I=S.slice(0,l+1).join(".");if(l+1<S.length&&this.$__schema.pathType(I)==="virtual")return b_t.set(e,r,this),this;if(C=this.$__schema.path(I),C!=null){if(C instanceof d_e){M=!0;break}else if(C.$isSchemaMap&&C.$__schemaType instanceof d_e&&l<S.length-1){M=!0,C=C.$__schemaType;break}}}if(C==null&&(C=fW(this,e)),!M&&!C){if(g==="throw")throw new mW(e);return this}}else{if(_==="virtual")return C=this.$__schema.virtualpath(e),C.applySetters(r,this),this;C=this.$__path(e)}let A=this._doc,O="";for(l=0;l<S.length-1;++l)A=A instanceof Map?A.get(S[l]):A[S[l]],O+=(O.length!==0?".":"")+S[l],A||(this.$set(O,{}),this.$__isSelected(O)||this.unmarkModified(O),A=this.$__getValue(O));let x;if(S.length<=1)x=e;else{let M=S.length;for(l=0;l<M;++l){let I=S.slice(0,l+1).join(".");if(this.$get(I,null,{getters:!1})===null){x=I;break}}x||(x=e)}if(!C)return this.$__set(x,e,i,a,S,C,r,w),_==="nested"&&r==null&&ZO(this,e),this;if((C.$isSingleNested||C.$isMongooseArray)&&B_t(this,e),r!=null&&s&&C.$isSingleNested){r instanceof ve&&(r=r.toObject({virtuals:!1,transform:!1}));let M=Object.keys(r);for(let I of M)this.$set(e+"."+I,r[I],a,i);return this}let R=!0;try{let M=(()=>{if(C.options==null||!(r instanceof ve))return!1;let U=r.constructor,k=typeof C.options.ref=="function"&&!C.options.ref[O_t]?C.options.ref.call(this,this):C.options.ref,H=k?.modelName||k;if(H!=null&&(H===U.modelName||H===U.baseModelName))return!0;let ie=C.options.refPath;if(ie==null)return!1;let j=r.get(ie);return j===U.modelName||j===U.baseModelName})(),I=!1;if(M&&r instanceof ve&&(!r.$__.wasPopulated||Pt.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let U=C&&C.$isSingleNested?C.cast(r,this):r._doc._id;this.$populated(e,U,{[y_e]:r.constructor}),r.$__.wasPopulated={value:U},I=!0}let F,B=this.$__schema.options.typeKey;if(C.options&&Array.isArray(C.options[B])&&C.options[B].length&&C.options[B][0]&&C.options[B][0].ref&&k_t(r,C.options[B][0].ref)){F={[y_e]:r[0].constructor},this.$populated(e,r.map(function(U){return U._doc._id}),F);for(let U of r)U.$__.wasPopulated={value:U._doc._id};I=!0}if(!M||!C.$isSingleNested||!r.$__){let U=this;this.$__schema.singleNestedPaths[e]!=null&&S.length>1&&(U=R_t(this,S,this.schema)),i!=null&&i.overwriteImmutable?r=C.applySetters(r,U,!1,w,{path:e,overwriteImmutable:!0}):r=C.applySetters(r,U,!1,w,{path:e})}if(Array.isArray(r)&&!Array.isArray(C)&&C.$isMongooseDocumentArray&&r.length!==0&&r[0]!=null&&r[0].$__!=null&&r[0].$__.populated!=null){let U=Object.keys(r[0].$__.populated);for(let k of U)this.$populated(e+"."+k,r.map(H=>H.$populated(k)),r[0].$__.populated[k].options);I=!0}if(!I&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let U=0;U<r.length;++U)r[U]instanceof ve&&r.set(U,r[U]._doc._id,!0);delete this.$__.populated[e]}r!=null&&C.$isSingleNested&&q_t(r,C,w),this.$markValid(e)}catch(M){M instanceof Da.StrictModeError&&M.isImmutableError?this.invalidate(e,M):M instanceof Da.CastError?(this.invalidate(M.path,M),M.$originalErrorPath&&this.invalidate(e,new Da.CastError(C.instance,r,e,M.$originalErrorPath))):this.invalidate(e,new Da.CastError(C.instance,r,e,M)),R=!1}if(R){let M=null,I=null;if(!a){let U=this.$isSubdocument?this.ownerDocument():this;M=U.$__.savedState,I=this.$isSubdocument?this.$__.fullPath+"."+e:e,U.$__saveInitialState(I)}this.$__set(x,e,i,a,S,C,r,w);let F=!!this.$__.session?.transaction,B=this.$__.session&&this.$__.session[ex]&&this.$__.session[ex].has(this)&&this.$__.session[ex].get(this).modifiedPaths&&!this.$__.session[ex].get(this).modifiedPaths.has(I);M!=null&&M.hasOwnProperty(I)&&(!F||B)&&Pt.deepEqual(r,M[I])&&this.unmarkModified(e)}return C.$isSingleNested&&(this.isDirectModified(e)||r==null)?ZO(this,e):C.$isSchemaMap&&r==null&&ZO(this,e),this};function k_t(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof ve)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}ve.prototype.set=ve.prototype.$set;ve.prototype.$__shouldModify=function(t,e,r,n,i,s,o,a){return r&&r._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof ve&&tx(o._doc._id,a)?!1:!!(!tx(o,a!==void 0?a:Pt.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&tx(o,s.getDefault(this,n)))};ve.prototype.$__set=function(t,e,r,n,i,s,o,a){jv=jv||mE();let u=this.$__shouldModify(t,e,r,n,i,s,o,a);u?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(t),g_e||(g_e=nW()),o&&Pt.isMongooseArray(o)&&(o._registerAtomic("$set",o),Pt.isMongooseDocumentArray(o)&&o.forEach(function(f){f&&f.__parentArray&&(f.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(a)&&Pt.isMongooseArray(o)&&Pt.isMongooseArray(a)&&(o[Vo]=a[Vo],o[$v]=a[$v],Pt.isMongooseDocumentArray(o)&&o.forEach(f=>{f!=null&&(f.$isNew=!1)}));let c=this._doc,l=0,d=i.length,p="";for(;l<d;l++){let h=l+1===d;if(p+=p?"."+i[l]:i[l],!A_e.has(i[l]))if(h)c instanceof Map?c.set(i[l],o):c.$isSingleNested?(i[l]in c||(c[i[l]]=o),c._doc[i[l]]=o,u&&c.markModified(i[l])):c[i[l]]=o;else{let g=c instanceof Map,_=g?c.get(i[l]):c[i[l]];Pt.isPOJO(_)||_&&_ instanceof jv||_&&!Array.isArray(_)&&_.$isSingleNested||_&&Array.isArray(_)||_==null&&(_={},g?c.set(i[l],_):c[i[l]]=_),c=_}}};ve.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return Pt.getValue(t,this._doc)};ve.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(u=>this.$inc(u,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new mW(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new Da.CastError(n.instance,r,e)),this;let i=this.$__getValue(e)||0,s=!1,o=null,a=r;try{r=n.cast(r),o=n.applySetters(i+r,this),a=o-i,s=!0}catch(u){this.invalidate(e,new Da.CastError("number",r,e,u))}return s&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:a}:this.$__.primitiveAtomics[e].$inc+=a,this.markModified(e),this.$__setValue(e,o)),this};ve.prototype.$__setValue=function(t,e){return Pt.setValue(t,e,this._doc),this};ve.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let i=r.noDottedPath,s=i?this.$__schema.paths[t]:this.$__path(t);if(s==null&&(s=this.$__schema.virtualpath(t),s!=null))return s.applyGetters(void 0,this);if(i){let c=this._doc[t];return n&&(c=n.cast(c)),s!=null&&r.getters!==!1?s.applyGetters(c,this):c}if(s!=null&&s.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(s=c)}let o=t.indexOf(".")!==-1,a=this._doc,u=o?t.split("."):[t];typeof this.$__schema.aliases[u[0]]=="string"&&(u[0]=this.$__schema.aliases[u[0]]);for(let c=0,l=u.length;c<l;c++)a&&a._doc&&(a=a._doc),a==null?a=void 0:a instanceof Map?a=a.get(u[c],{getters:!1}):c===l-1?a=Pt.getValue(u[c],a):a=a[u[c]];if(n&&(a=n.cast(a)),s!=null&&r.getters!==!1)a=s.applyGetters(a,this);else if(this.$__schema.nested[t]&&r.virtuals)return _W(this,Dl(a)||{},{path:t});return a};ve.prototype[T_t]=ve.prototype.get;ve.prototype.$get=ve.prototype.get;ve.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&e.hasOwnProperty(t)?e[t]:null;return r||this.$__schema.path(t)};ve.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};ve.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let i=n.indexOf("."),s=i===-1?n:n.slice(0,i);r.hasOwnProperty(s)||(r[s]=Dl(this.$__getValue(s)))}};ve.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};ve.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};ve.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};ve.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:Pt.isPOJO(r)?T_e(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function T_e(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!T_e(t[e]))return!1;return!0}ve.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,i=0,s=e.length;for(n=0;n<s;++n){let o=e[n],a=EW(o),u=a.length;for(i=0;i<u;++i)r.add(a[i]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let d=l.length;if(Array.isArray(l))for(c=0;c<d;++c){let p=o+"."+c;if(!r.has(p)&&(r.add(p),l[c]!=null&&l[c].$__)){let f=l[c].modifiedPaths(),h=0,g=f.length;for(h=0;h<g;++h)r.add(p+"."+f[h])}}else{let p=Object.keys(l),f=0,h=p.length;for(f=0;f<h;++f)r.add(o+"."+p[f])}}}return Array.from(r)};ve.prototype[w_e]=ve.prototype.modifiedPaths;ve.prototype.isModified=function(t,e,r){if(t){let n=e&&e.ignoreAtomics,i=this.$__.activePaths.states.modify;if(i==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let u of t)if(i[u]!=null)return!0;let s=r||this[w_e](),o=t.some(function(u){return!!~s.indexOf(u)}),a=Object.keys(i);return n&&(a=a.filter(u=>{let c=this.$__getValue(u);return!(c!=null&&c[Vo]!=null&&c[Vo].$set===void 0)})),o||t.some(function(u){return a.some(function(c){return c===u||u.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};ve.prototype.$isModified=ve.prototype.isModified;ve.prototype[A_t]=ve.prototype.isModified;ve.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(r))};ve.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};ve.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&o.isDirectModified(n.slice(i+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};ve.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(r))};ve.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.$__isSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&v_e(this.$__.selected[s])){n=!!this.$__.selected[s];break}if(n===null)return!0;if(e in this.$__.selected)return n;let i=e+".";for(let s of r)if(s!=="_id"){if(s.startsWith(i))return n||s!==i;if(i.startsWith(s+"."))return n}return!n};ve.prototype.$__isSelected=ve.prototype.isSelected;ve.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.isDirectSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&v_e(this.$__.selected[i])){n=!!this.$__.selected[i];break}return n===null?!0:this.$__.selected.hasOwnProperty(e)?n:!n};ve.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Da("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let i=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=i?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let n=r&&r._skipParallelValidateCheck;if(this.$isSubdocument==null){if(this.$__.validating&&!n)throw new u_t(this);n||(this.$__.validating=!0)}return new Promise((i,s)=>{this.$__validate(e,r,o=>{if(this.$op=null,this.$__.validating=null,o!=null)return s(o);i()})})};ve.prototype.$validate=ve.prototype.validate;function M_t(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let i=e[r],s=t.$__schema.path(i);if(s!=null&&typeof s.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[i]=s.originalRequiredValue.call(t,t)}catch(o){t.invalidate(i,o)}}}}function O_e(t,e,r,n){let i={};M_t(t);let s=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(u){return!t.$__isSelected(u)&&!t.$isModified(u)||u.endsWith(".$*")?!1:t.$__.cachedRequired!=null&&u in t.$__.cachedRequired?t.$__.cachedRequired[u]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(u){u.endsWith(".$*")||s.add(u)}if(!n){let u=[];for(let l of Object.keys(t.$__schema.paths)){let d=t.$__schema.path(l);if(d.$isSingleNested){let p=t.$get(l);p&&u.push(p)}else if(d.$isMongooseDocumentArray){let p=t.$get(l);if(p&&p.length)for(let f of p)f&&u.push(f)}}let c=t.modifiedPaths();for(let l of u)if(l.$basePath){let d=l.$__pathRelativeToParent();for(let f of l.modifiedPaths())s.delete(d+"."+f);let p=l.$parent();if(p==null)throw new Error("Cannot validate subdocument that does not have a parent");t.$isModified(d,null,c)&&!p.$__.activePaths.getStatePaths("modify").hasOwnProperty(d)&&!p.$isDefault(d)&&(s.add(d),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[d]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),i[d]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(i[d].index=l.__index))}}for(let u of s){let c=t.$__schema.path(u);if(c){if(c.$isMongooseDocumentArray)for(let l of s)(l==null||l.startsWith(c.path+"."))&&s.delete(l);(!c.caster&&c.validators.length===0&&!c.$parentSchemaDocArray||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.$embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.$embeddedSchemaType.validators.length===0)&&s.delete(u)}}Array.isArray(e)?s=N_t(s,e):Array.isArray(r)&&(s=F_t(s,r)),P_t(t,s);let a={skipArrays:!0};for(let u of s)if(t.$__schema.nested[u]){let c=t.$__getValue(u);S_t(c)&&(c=c.toObject({transform:!1}));let l=f_t(c,u,a,t.$__schema);Object.keys(l).filter(d=>!t.$__schema.singleNestedPaths.hasOwnProperty(d)).forEach(o)}for(let u of s){let c=t.$__schema.path(u);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&s.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(u);if(l!=null)for(let d of l.keys())s.add(u+"."+d)}return s=Array.from(s),[s,i]}function P_t(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required)||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&n.$embeddedSchemaType.validators.length===0)continue;let i=t.$__getValue(r);ix(i,e,r)}}function ix(t,e,r){if(t!=null){let n=t.length;for(let i=0;i<n;++i)Array.isArray(t[i])?ix(t[i],e,r+"."+i):e.add(r+"."+i)}}ve.prototype.$__validate=function(t,e,r){this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!t?t=[...this.$__.saveOptions.pathsToSave]:typeof t=="function"?(r=t,e=null,t=null):typeof e=="function"&&(r=e,e=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i=e&&e.pathsToSkip||null,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let o=e&&e.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&s)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let a=this,u=()=>{let _=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,s&&_!=null){let S=Object.keys(_.errors);for(let w of S)this.$isModified(w)||delete _.errors[w];Object.keys(_.errors).length===0&&(_=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",a),this.constructor.emit("validate",a),_){for(let S in _.errors)!this[w_t]&&_.errors[S]instanceof Da.CastError&&this.invalidate(S,_.errors[S]);return _}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let _ of c){let S=this.$__schema.path(_);if(!S||!S.$isMongooseArray)continue;let w=this.$__getValue(_);w&&ix(w,c,_)}c=[...c],l={}}else{let _=O_e(this,t,i,e&&e._nestedValidate);c=s?_[0].filter(S=>this.$isModified(S)):_[0],l=_[1]}if(typeof t=="string"&&(t=t.split(" ")),c.length===0)return f_e(function(){let _=u();if(_)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:_},function(S){r(S)});r(null,a)});let d={},p=0,f=this.$__.saveOptions?.pathsToSave;if(Array.isArray(f)){f=new Set(f);for(let _ of c)f.has(_)&&h(_)}else for(let _ of c)h(_);function h(_){_==null||d[_]||(d[_]=!0,p++,f_e(function(){let S=a.$__schema.path(_);if(!S)return--p||g();if(!a.$isValid(_)){--p||g();return}if(S[I_t]!=null&&_!==S.path)return--p||g();let w=a.$__getValue(_),C;(C=a.$populated(_))?w=C:w!=null&&w.$__!=null&&w.$__.wasPopulated&&(w=w._doc._id);let A=a.$__.pathsToScopes!=null&&_ in a.$__.pathsToScopes?a.$__.pathsToScopes[_]:a,O={...l[_],path:_,validateAllPaths:o,_nestedValidate:!0};S.doValidate(w,function(x){if(x){if((S.$isSingleNested||S.$isArraySubdocument||S.$isMongooseDocumentArray)&&x instanceof nx)return--p||g();a.invalidate(_,x,void 0,!0)}--p||g()},A,O)}))}function g(){let _=u();if(_)return a.$__schema.s.hooks.execPost("validate:error",a,[a],{error:_},function(S){r(S)});r(null,a)}};function N_t(t,e){let r=new Set(e),n=new Map([]);for(let s of e){if(s.indexOf(".")===-1)continue;let o=s.split("."),a=o[0];for(let u=1;u<o.length;++u)n.set(a,s),a=a+"."+o[u]}let i=new Set;for(let s of t)r.has(s)?i.add(s):n.has(s)&&i.add(n.get(s));return i}function F_t(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}ve.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i;n?i=!!e.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let s=e&&e.pathsToSkip,o=e&&e.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof s=="string"&&s.indexOf(" ")!==-1&&(s=s.split(" "));let a,u;if(o){a=new Set(Object.keys(this.$__schema.paths));for(let d of a){let p=this.$__schema.path(d);if(!p||!p.$isMongooseArray)continue;let f=this.$__getValue(d);f&&ix(f,a,d)}a=[...a],u={}}else{let d=O_e(this,t,s);a=i?d[0].filter(p=>this.$isModified(p)):d[0],u=d[1]}let c={};for(let d=0,p=a.length;d<p;++d){let f=a[d];if(c[f])continue;c[f]=!0;let h=r.$__schema.path(f);if(!h||!r.$isValid(f))continue;let g=r.$__getValue(f),_=h.doValidateSync(g,r,{skipSchemaValidators:u[f],path:f,validateModifiedOnly:i,validateAllPaths:o});if(_){if((h.$isSingleNested||h.$isArraySubdocument||h.$isMongooseDocumentArray)&&_ instanceof nx)continue;r.invalidate(f,_,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let d in l.errors)l.errors[d]instanceof Da.CastError&&r.invalidate(d,l.errors[d]);return l};ve.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new nx(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new b_e({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};ve.prototype.$markValid=function(t){!this.$__.validationError||!this.$__.validationError.errors[t]||(delete this.$__.validationError.errors[t],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))};function B_t(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];Object.keys(t.$__.validationError.errors).length===0&&(t.$__.validationError=null)}function q_t(t,e,r){let n=e.schema;if(n!=null)for(let i of Object.keys(n.paths)){let s=n.paths[i];if(s.$immutableSetter==null)continue;let o=r?.$__getValue(i);s.$immutableSetter.call(t,o)}}ve.prototype.$isValid=function(t){return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};ve.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r&&r.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let i=n.value;i&&i[Vo]&&(i[$v]=i[Vo],i[Vo]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};ve.prototype.$__undoReset=function(){if(!(this.$__.backup==null||this.$__.backup.activePaths==null)){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r&&r[Vo]&&r[$v]&&(r[Vo]=r[$v])}if(!this.$isSubdocument)for(let e of this.$getAllSubdocs())e.$__undoReset()}};ve.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(i){return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}});e=e.concat(this.$__.activePaths.map("default",function(i){if(!(i==="_id"||t.$__getValue(i)==null))return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}}));let r=new Map(e.filter(i=>i!=null).map(i=>[i.path,i.value])),n=[];return e.forEach(function(i){if(!i)return;let s=null,o=EW(i.path);for(let a=0;a<o.length-1;a++)if(r.has(o[a])){s=r.get(o[a]);break}s==null?n.push(i):s!=null&&s[Vo]!=null&&s.hasAtomics()&&(s[Vo]={},s[Vo].$set=s)}),n};ve.prototype.$__setSchema=function(t){l_t(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this[C_t]=t};ve.prototype.$__getArrayPathsToValidate=function(){return rx||(rx=Y0()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&Pt.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};ve.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;rx||(rx=Y0()),jv=jv||mE();let e=[];function r(n){let i=[];for(let{model:s}of n.$__schema.childSchemas){let o=n.$__getValue(s.path);if(o!=null){if(o.$__&&i.push(o),Array.isArray(o))for(let a of o)a!=null&&a.$__&&i.push(a);if(o instanceof Map)for(let a of o.values())a!=null&&a.$__&&i.push(a)}}for(let s of i)r(s);e.push(...i)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function L_t(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}ve.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)};ve.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=Pt.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let i;t._calledWithOptions.minimize!=null?i=t.minimize:this.$__schemaTypeOptions?.minimize!=null?i=this.$__schemaTypeOptions.minimize:r!=null&&r.minimize!=null?i=r.minimize:i=this.$__schema.options.minimize,t.minimize=i,n||(t._seen=t._seen||new Map);let s=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(s&&t._isNested&&this.$__.wasPopulated)return Dl(this.$__.wasPopulated.value||this._doc._id,t);if(s&&(t.depopulate=!0),r!=null)for(let f of Object.keys(r))t[f]==null&&(t[f]=r[f]);t._isNested=!0,t.json=e,t.minimize=i;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let a=t._calledWithOptions.schemaFieldsOnly??t.schemaFieldsOnly??r.schemaFieldsOnly??!1,u;if(n&&!t.flattenObjectIds)u=this.$__toObjectShallow(a);else if(a){u={};for(let f of Object.keys(this.$__schema.paths)){let h=this.$__getValue(f);if(h===void 0)continue;let g=f,_=u;if(f.indexOf(".")!==-1){let S=f.split(".");g=S[S.length-1];for(let w=0;w<S.length-1;++w)_[S[w]]=_[S[w]]??{},_=_[S[w]]}if(h===null){_[g]=null;continue}_[g]=Dl(h,t)}}else u=Dl(this._doc,t)||{};let c=t._calledWithOptions.getters??t.getters??r.getters??!1;c&&(j_t(this,u),t.minimize&&(u=E_t(u)||{}));let l=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(l||c&&l!==!1)&&_W(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let d=t._calledWithOptions.transform??!0,p;if(d===!0?p=r.transform:typeof d=="function"&&(p=d),d&&$_t(this,u),t.useProjection&&K_t(this,u),typeof p=="function"){let f=p(this,u,t);typeof f<"u"&&(u=f)}return u};ve.prototype.$__toObjectShallow=function(e){let r={};if(this._doc!=null){let n=Object.keys(e?this.$__schema.paths:this._doc);for(let i of n){let s=this._doc[i];s instanceof Date?r[i]=new Date(s):s!==void 0&&(r[i]=s)}}return r};ve.prototype.toObject=function(t){return this.$toObject(t)};function _W(t,e,r,n){let i=t.$__schema,s=i.virtuals,o=Object.keys(s),a=o.length,u=a,c,l,d=t._doc,p,f=typeof(n&&n.aliases)=="boolean"?n.aliases:!0;r=r||{};let h=null;if(Array.isArray(r.virtuals))h=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){h=new Set(o);for(let g=0;g<r.virtuals.pathsToSkip.length;g++)h.has(r.virtuals.pathsToSkip[g])&&h.delete(r.virtuals.pathsToSkip[g])}if(!d)return e;for(a=0;a<u;++a){if(c=o[a],h!=null&&!h.has(c)||!f&&i.aliases.hasOwnProperty(c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(p=s[c].applyGetters(void 0,t),p===void 0)continue;p=Dl(p,r),e[l]=p;continue}let g=l.split(".");if(p=Dl(t.get(c),r),p===void 0)continue;let _=g.length;d=e;for(let S=0;S<_-1;++S)d[g[S]]=d[g[S]]||{},d=d[g[S]];d[g[_-1]]=p}return e}function j_t(t,e){let r=t.$__schema,n=Object.keys(r.paths),i=n.length,s,o=t._doc,a;if(!o)return e;for(;i--;){s=n[i];let u=s.split("."),c=u.length,l=c-1,d=e,p;if(o=t._doc,!!t.$__isSelected(s))for(let f=0;f<c&&(p=u[f],a=o[p],!(d!=null&&typeof d!="object"));++f){if(f===l){if(d[p]=r.paths[s].applyGetters(d[p],t),Array.isArray(d[p])&&r.paths[s].$embeddedSchemaType)for(let h=0;h<d[p].length;++h)d[p][h]=r.paths[s].$embeddedSchemaType.applyGetters(d[p][h],t)}else if(a==null){p in o&&(d[p]=a);break}else d=d[p]||(d[p]={});o=a}}return e}function $_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let s of n){let o=r.paths[s],a=o.options.transform??o.constructor?.defaultOptions?.transform,u=o.$embeddedSchemaType?.options?.transform??o.$embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof a=="function"){let c=t.$get(s);if(c===void 0)continue;let l=a.call(t,c);E_e(s,l),Pt.setValue(s,l,e)}else if(typeof u=="function"){let c=t.$get(s);if(c===void 0)continue;let l=[].concat(c);for(let d=0;d<l.length;++d){let p=u.call(t,l[d]);l[d]=p,E_e(s,p)}e[s]=l}}return e}function E_e(t,e){if(v_t(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function K_t(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let s=t.$__.selected;if(s===void 0&&(s={},__t.applyPaths(s,r)),s==null||Object.keys(s).length===0)return e;for(let o of n)s[o]!=null&&!s[o]&&delete e[o];return e}ve.prototype.toJSON=function(t){return this.$toObject(t,!0)};ve.prototype.ownerDocument=function(){return this};ve.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};ve.prototype.$parent=ve.prototype.parent;ve.prototype.inspect=function(t){let e=Pt.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};gW.custom&&(ve.prototype[gW.custom]=ve.prototype.inspect);ve.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:gW(t)};ve.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?tx(this,t):e&&e.equals?e.equals(r):e===r};ve.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new Da("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let s=Pt.populate.apply(null,r);for(let o of s)e[o.path]=o}let n=Pt.object.vals(e),i=this.constructor;if(this.$__isNested){i=this.$__[x_t].constructor;let s=this.$__.nestedPath;n.forEach(function(o){o.path=s+"."+o.path})}if(this.$session()!=null){let s=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:s};return}"session"in o.options||(o.options.session=s)})}return n.forEach(s=>{s._localModel=i}),i.populate(this,n)};ve.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let i=this.$get(n);Array.isArray(i)?r=r.concat(i):i instanceof ve&&r.push(i)}return r};ve.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let i=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,s=this.$__.populated[i];return s?e===!0?s:s.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&this.$populated(s)){let a=n.slice(i+1).join(".");o.$populated(a,e,r);break}}return e};ve.prototype.$populated=ve.prototype.populated;ve.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new Da(`Expected path "${e}" to be populated`);return this};ve.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let s of r)delete this.$$populatedVirtuals[s],delete this._doc[s],delete n[s];let i=Object.keys(n);for(let s of i)if(e=this.$populated(s),!!e)if(delete n[s],Array.isArray(e)){let o=Pt.getValue(s,this._doc);if(o.isMongooseArray){let a=o.__array;for(let u=0;u<a.length;++u){let c=a[u];c!=null&&(a[u]=c instanceof ve?c._doc._id:c._id)}}else Pt.setValue(s,e,this._doc)}else Pt.setValue(s,e,this._doc);return this}for(let i of t)if(e=this.$populated(i),delete n[i],r.indexOf(i)!==-1)delete this.$$populatedVirtuals[i],delete this._doc[i];else if(e)if(Array.isArray(e)){let s=Pt.getValue(i,this._doc);if(s.isMongooseArray){let o=s.__array;for(let a=0;a<o.length;++a){let u=o[a];u!=null&&(o[a]=u instanceof ve?u._doc._id:u._id)}}else Pt.setValue(i,e,this._doc)}else Pt.setValue(i,e,this._doc);return this};ve.prototype.$__fullPath=function(t){return t||""};ve.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};ve.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let u=new Set(r);this.modifiedPaths().find(l=>u.has(l))&&(this.$__.version=e.length?Xp:Kv)}else this.$__.version=e.length?Xp:Kv;if(!e.length&&Xp!==this.$__.version)return;let n={},i={},s=e.length,o=[],a=0;for(n._id=this._doc._id,(n&&n._id&&n._id.$__||null)!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));a<s;++a){let u=e[a],c=u.value,l=U_t(this,u.path,c);if(l){o.push(l);continue}if(!this.$populated(u.path,!0)&&this.$__.selected){let p=u.path.split("."),f=p[0];if(this.$__.selected[f]&&this.$__.selected[f].$elemMatch)if(p.length>1&&p[1]==0&&typeof n[f]>"u")n[f]=this.$__.selected[f],p[1]="$",u.path=p.join(".");else{o.push(u.path);continue}}if(!(this.$isDefault(u.path)&&this.$__.selected&&(u.path.indexOf(".")===-1&&m_e(this.$__.selected,u.path)||EW(u.path).find(f=>m_e(this.$__.isSelected,f))))&&!o.length)if(c===void 0)mh(this,n,i,u,1,"$unset");else if(c===null)mh(this,n,i,u,null);else if(Pt.isMongooseArray(c)&&c.$path()&&c[Vo])V_t(this,n,i,u,c);else if(c[i_t.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),mh(this,n,i,u,c);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[u.path]!=null){let p=this.$__.primitiveAtomics[u.path],f=p_t(p);mh(this,n,i,u,p[f],f)}else c=Dl(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),mh(this,n,i,u,c)}return o.length?new r_t(o):(this.$__.version&&this.$__version(n,i),Object.keys(i).length===0?[n,null]:[n,i])};function U_t(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let s=e.split(".")[0];if(t.$__.selected[s+".$"])return s}if(!(n&&Pt.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Pt.object.hasOwnProperty(n.options.options,"limit")||n.options.options&&n.options.options.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let s=r[Vo];if(Object.keys(s).length===0||s.$set||s.$pop)return e}}function mh(t,e,r,n,i,s){if(s||(s="$set"),r[s]||(r[s]={}),r[s][n.path]=i,t.$__schema.options.versionKey!==!1&&!G_t(t,n.path)&&Xp!==(Xp&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(s){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}s==="$push"||s==="$addToSet"||s==="$pullAll"||s==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=Xp:t.$__.version=bW:/^\$p/.test(s)||Array.isArray(i)?t.$__.version=Xp:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version=Kv)}}function V_t(t,e,r,n,i){if(r.$set&&r.$set[n.path])return;if(typeof i.$__getAtomics=="function"){i.$__getAtomics().forEach(function(d){let p=d[0],f=d[1];mh(t,e,r,n,f,p)});return}let s=i[Vo],o=Object.keys(s),a=o.length,u,c;if(a===0)return Pt.isMongooseObject(i)?i=i.toObject({depopulate:1,_isNested:!0}):i.valueOf&&(i=i.valueOf()),mh(t,e,r,n,i);function l(d){return Pt.isMongooseObject(d)?d.toObject({depopulate:1,_isNested:!0}):d}for(;a--;)c=o[a],u=s[c],Pt.isMongooseObject(u)?u=u.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(u)?u=u.map(l):u.valueOf&&(u=u.valueOf()),c==="$addToSet"&&(u={$each:u}),mh(t,e,r,n,u,c)}function G_t(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}ve.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=Dl(this._doc,{retainDocuments:!0})),this.$__){let r=this.$__.constructor,n=new r;for(let i of Object.getOwnPropertyNames(this.$__))i!=="activePaths"&&(n[i]=Dl(this.$__[i]));Object.assign(n.activePaths,Dl({...this.$__.activePaths})),e.$__=n}return e};ve.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new s_t(e,this.$__.activePaths.clone(),this.$__.version)};ve.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};ve.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};ve.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||Pt.isNativeObject(e)&&!Array.isArray(e)||h_e(e,"ObjectId")||h_e(e,"Decimal128")))};ve.VERSION_WHERE=Kv;ve.VERSION_INC=bW;ve.VERSION_ALL=Xp;ve.ValidationError=nx;I_e.exports=x_e=ve});var Ot=m(Je=>{"use strict";var H_t=fa().UUID,z_t=DK(),D_e=lu(),W_t=Wp(),k_e=Lz(),SW=zn(),J_t=Wu(),Y_t=dh(),M_e=cO(),P_e=REe(),yh=Vs(),Q_t=sE(),X_t=hz(),Uv=kv(),Z_t=OO(),e4t=xO(),Vv=K0(),{trustedSymbol:yE}=oE(),vW;Je.specialProperties=Vv;Je.isMongooseArray=M_e.isMongooseArray;Je.isMongooseDocumentArray=P_e.isMongooseDocumentArray;Je.registerMongooseArray=M_e.registerMongooseArray;Je.registerMongooseDocumentArray=P_e.registerMongooseDocumentArray;var wW=/\s/,AW=/\s+/;Je.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};Je.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(yh(e,"ObjectId")&&yh(r,"ObjectId")||yh(e,"Decimal128")&&yh(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return Je.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let a=0;a<o;++a)if(!t(e[a],r[a]))return!1;return!0}e.$__!=null?e=e._doc:Uv(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Uv(r)&&(r=r.toObject());let n=Object.keys(e),i=Object.keys(r),s=n.length;if(s!==i.length)return!1;for(let o=s-1;o>=0;o--)if(n[o]!==i[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};Je.last=function(t){if(t.length>0)return t[t.length-1]};Je.promiseOrCallback=Z_t;Je.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>Je.cloneArrays(r)):e};Je.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let i of r)delete n[i];return n};Je.clonePOJOsAndArrays=function(e){if(e==null||e.$__!=null)return e;if(Q_t(e)){e={...e};for(let r of Object.keys(e))e[r]=Je.clonePOJOsAndArrays(e[r]);return e}if(Array.isArray(e)){e=[...e];for(let r=0;r<e.length;++r)e[r]=Je.clonePOJOsAndArrays(e[r]);return e}return e};Je.merge=function t(e,r,n,i){n=n||{};let s=Object.keys(r),o=0,a=s.length,u;r[yE]&&(e[yE]=r[yE]),i=i||"";let c=n.omitNested||{};for(;o<a;)if(u=s[o++],!(n.omit&&n.omit[u])&&!c[i]&&!Vv.has(u))if(e[u]==null)e[u]=Je.clonePOJOsAndArrays(r[u]);else if(Je.isObject(r[u])){if(Je.isObject(e[u])||(e[u]={}),r[u]!=null){if(n.isDiscriminatorSchemaMerge&&r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?e4t(e[u],r[u].clone(),n.isDiscriminatorSchemaMerge):e[u]=r[u].clone();continue}else if(yh(r[u],"ObjectId")){e[u]=new W_t(r[u]);continue}}t(e[u],r[u],n,i?i+"."+u:u)}else n.overwrite&&(e[u]=r[u]);return e};Je.toObject=function t(e){vW||(vW=dc());let r;if(e==null)return e;if(e instanceof vW)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(Je.isPOJO(e)){r={},e[yE]&&(r[yE]=e[yE]);for(let n of Object.keys(e))Vv.has(n)||(r[n]=t(e[n]));return r}return e};Je.isObject=Y_t;Je.isPOJO=sE();Je.isNonBuiltinObject=function(e){return typeof e=="object"&&!Je.isNativeObject(e)&&!Je.isMongooseType(e)&&!(e instanceof H_t)&&e!=null};Je.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};Je.isEmptyObject=function(t){return t!=null&&typeof t=="object"&&Object.keys(t).length===0};Je.hasKey=function(e,r){let n=Object.keys(e);for(let i of n)if(i===r||Je.isPOJO(e[i])&&Je.hasKey(e[i],r))return!0;return!1};Je.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){J_t(function(){throw r})}}};Je.isMongooseType=function(t){return yh(t,"ObjectId")||yh(t,"Decimal128")||t instanceof Buffer};Je.isMongooseObject=Uv;Je.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(z_t(e.expires)/1e3),delete e.expires)};Je.populate=function(e,r,n,i,s,o,a,u){let c=null;if(arguments.length===1){if(e instanceof k_e)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(p=>Je.populate(p)[0]);Je.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:i}:c={path:e,select:r,model:n,match:i,options:s,populate:o,justOne:a,count:u};if(typeof c.path!="string"&&!(Array.isArray(c.path)&&c.path.every(d=>typeof d=="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof e+"`");return t4t(c);function l(d){let p=[];return d.forEach(function(f){wW.test(f.path)?f.path.split(AW).forEach(function(g){let _=Object.assign({},f);_.path=g,p.push(_)}):p.push(f)}),p}};function t4t(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(i){if(wW.test(i.path)){let s=Object.assign({},i);s.path.split(AW).forEach(function(a){s.path=a,n.push(Je.populate(s)[0])})}else n.push(Je.populate(i)[0])}),t.populate=Je.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=Je.populate(t.populate));let e=[],r=wW.test(t.path)?t.path.split(AW):Array.isArray(t.path)?t.path:[t.path];t.options!=null&&(t.options=SW(t.options));for(let n of r)e.push(new k_e(Object.assign({},t,{path:n})));return e}Je.getValue=function(t,e,r){return D_e.get(t,e,n4t,r)};var r4t=Object.freeze({getters:!1});function n4t(t,e){if(e==="$*"&&t instanceof Map)return t;let r=t?._doc||t;return r!=null&&r.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,r4t):r[e]}Je.setValue=function(t,e,r,n,i){D_e.set(t,e,r,"_doc",n,i)};Je.object={};Je.object.vals=function(e){let r=Object.keys(e),n=r.length,i=[];for(;n--;)i.push(e[r[n]]);return i};var i4t=Object.prototype.hasOwnProperty;Je.object.hasOwnProperty=function(t,e){return i4t.call(t,e)};Je.isNullOrUndefined=function(t){return t==null};Je.array={};Je.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(i){Array.isArray(i)?t(i,r,n):(!r||r(i))&&n.push(i)}),n};var s4t=Object.prototype.hasOwnProperty;Je.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(Je.hasUserDefinedProperty(t,r))return!0;return!1}if(s4t.call(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var R_e=Math.pow(2,32)-1;Je.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=R_e:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=R_e):!1};Je.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let i of t)if(typeof i=="number"||typeof i=="string"||i==null){if(e.has(i))continue;n.push(i),e.add(i)}else if(yh(i,"ObjectId")){if(r.has(i.toString()))continue;n.push(i),r.add(i.toString())}else n.push(i);return n};Je.buffer={};Je.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0};Je.getFunctionName=X_t;Je.decorate=function(t,e){for(let r in e)Vv.has(r)||(t[r]=e[r])};Je.mergeClone=function(t,e){Uv(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,i=0,s;for(;i<n;)if(s=r[i++],!Vv.has(s))if(typeof t[s]>"u")t[s]=SW(e[s],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[s];if(o!=null&&o.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),Je.isObject(o)){let a=o;Uv(o)&&!o.isMongooseBuffer&&(a=a.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(a=Buffer.from(a)),Je.mergeClone(t[s],a)}else t[s]=SW(o,{flattenDecimals:!1})}};Je.each=function(t,e){for(let r of t)e(r)};Je.renameObjKey=function(t,e,r){return Object.keys(t).reduce((i,s)=>(s===e?i[r]=t[e]:i[s]=t[s],i),{})};Je.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};Je.noop=function(){};Je.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=e[i];return n};Je.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};Je.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var Ci=m((ox,K_e)=>{"use strict";var Gv=Oa(),j_e=Ia(),o4t=TO(),a4t=Bz(),sx=zn(),CW=mEe(),u4t=gEe(),TW=bEe(),N_e=Wu(),c4t=ot().schemaTypeSymbol,X0=Ot(),$_e=ot().validatorErrorSymbol,l4t=ot().documentIsModified,F_e=ot().populateModelSymbol,OW=Gv.CastError,xW=Gv.ValidatorError,d4t={_skipMarkModified:!0};function Nt(t,e,r){this[c4t]=!0,this.path=t,this.instance=r,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let n=this.constructor.defaultOptions||{},i=Object.keys(n);for(let a of i)a==="validate"?this.validate(n.validate):n.hasOwnProperty(a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(e[a]=n[a]);e.select==null&&delete e.select;let s=this.OptionsConstructor||j_e;this.options=new s(e),this._index=null,X0.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,CW(this));let o=Object.keys(this.options);for(let a of o){if(a==="cast"){Array.isArray(this.options[a])?this.castFunction.apply(this,this.options[a]):this.castFunction(this.options[a]);continue}if(X0.hasUserDefinedProperty(this.options,a)&&typeof this[a]=="function"){if(a==="index"&&this._index){if(e.index===!1){let l=this._index;if(typeof l=="object"&&l!=null){if(l.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(l.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let u=e[a];if(a==="default"){this.default(u);continue}let c=Array.isArray(u)?u:[u];this[a].apply(this,c)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}Nt.prototype.OptionsConstructor=j_e;Nt.prototype.path;Nt.prototype.validators;Nt.prototype.isRequired;Nt.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};Nt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};Nt.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};Nt.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};Nt.set=function(e,r){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};Nt.get=function(t){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(t)};Nt.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t!=null&&t.instanceOfSchema)throw new Gv("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};Nt.prototype.index=function(t){return this._index=t,X0.expires(this._index),this};Nt.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!this.options.hasOwnProperty("index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};Nt.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};Nt.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};Nt.prototype.immutable=function(t){return this.$immutable=t,CW(this),this};Nt.prototype.transform=function(t){return this.options.transform=t,this};Nt.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};Nt.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};Nt.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};Nt.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&X0.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=TW(e)?Object.assign({},e):sx(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=Gv.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,i,s;for(n=0,i=arguments.length;n<i;n++){if(s=arguments[n],!X0.isPOJO(s)){let o="Invalid validator. Received ("+typeof s+") "+s+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(s.validator,s)}return this};Nt.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(s){let o=this&&this.$__&&this.$__.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[l4t](n.path))return!0;if(o!=null&&n.path in o){let a=o[n.path]?n.checkRequired(s,this):!0;return delete o[n.path],a}else if(typeof t=="function")return t.apply(this)?n.checkRequired(s,this):!0;return n.checkRequired(s,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let i=e||Gv.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:i,type:"required"})),this};Nt.prototype.ref=function(t){return this.options.ref=t,this};Nt.prototype.getDefault=function(t,e,r){let n;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&(!this.options||!this.options.shared)&&(n=sx(n)),r&&r.skipCast)return this._applySetters(n,t);let i=this.applySetters(n,t,e,void 0,d4t);return i&&!Array.isArray(i)&&i.$isSingleNested&&(i.$__parent=t),i}return n};Nt.prototype._applySetters=function(t,e,r,n,i){let s=t;if(r)return s;let o=this.setters;for(let a=o.length-1;a>=0;a--)s=o[a].call(e,s,n,this,i);return s};Nt.prototype._castNullish=function(e){return e};Nt.prototype.applySetters=function(t,e,r,n,i){let s=this._applySetters(t,e,r,n,i);return s==null?this._castNullish(s):(s=this.cast(s,e,r,n,i),s)};Nt.prototype.applyGetters=function(t,e){let r=t,n=this.getters,i=n.length;if(i===0)return r;for(let s=0;s<i;++s)r=n[s].call(e,r,this);return r};Nt.prototype.select=function(e){return this.selected=!!e,this};Nt.prototype.doValidate=function(t,e,r,n){let i=!1,s=this.path;if(typeof e!="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof e}`);let o=this.validators.filter(c=>typeof c=="object"&&c!==null),a=o.length;if(!a)return e(null);for(let c=0,l=o.length;c<l&&!i;++c){let d=o[c],p=d.validator,f,h=TW(d)?Object.assign({},d):sx(d);if(h.path=n&&n.path?n.path:s,h.fullPath=this.$fullPath,h.value=t,typeof t=="string"&&(h.length=t.length,h.value.length>30&&(h.value=h.value.slice(0,30)+"...")),p instanceof RegExp){u(p.test(t),h,r);continue}if(typeof p=="function"){if(t===void 0&&p!==this.requiredValidator){u(!0,h,r);continue}try{h.propsParameter?f=p.call(r,t,h):f=p.call(r,t)}catch(g){f=!1,h.reason=g,g.message&&(h.message=g.message)}f!=null&&typeof f.then=="function"?f.then(function(g){u(g,h,r)},function(g){h.reason=g,h.message=g.message,f=!1,u(f,h,r)}):u(f,h,r)}}function u(c,l,d){if(!i)if(c===void 0||c)--a<=0&&N_e(function(){e(null)});else{let p=l.ErrorConstructor||xW;i=new p(l,d),i[$_e]=!0,N_e(function(){e(i)})}}};function B_e(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||xW,n=new r(e);return n[$_e]=!0,n}}Nt.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let s=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")s=[this.validators[0]];else return null;let o=null,a=0,u=s.length;for(a=0;a<u;++a){let c=s[a];if(c===null||typeof c!="object")continue;let l=c.validator,d=TW(c)?Object.assign({},c):sx(c);d.path=r&&r.path?r.path:n,d.fullPath=this.$fullPath,d.value=t,typeof t=="string"&&(d.length=t.length,d.value.length>30&&(d.value=d.value.slice(0,30)+"..."));let p=!1;if(!u4t(l)){if(l instanceof RegExp){o=B_e(l.test(t),d);continue}if(typeof l=="function"){try{d.propsParameter?p=l.call(e,t,d):p=l.call(e,t)}catch(f){p=!1,d.reason=f}if(!(p!=null&&typeof p.then=="function")&&(o=B_e(p,d),o))break}}}return o};Nt._isRef=function(t,e,r,n){let i=n&&t.options&&(t.options.ref||t.options.refPath);if(!i&&r&&r.$__!=null){let s=r.$__fullPath(t.path,!0),o=r.ownerDocument();i=s!=null&&o.$populated(s)||r.$populated(t.path)}return i?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&X0.isObject(e)?!0:n:!1};Nt.prototype._castRef=function(e,r,n,i){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!X0.isObject(e)){if(n)return e;throw new OW(this.instance,e,this.path,null,this)}let s=r.$__fullPath(this.path,!0),a=r.ownerDocument().$populated(s,!0),u=e;if(!r.$__.populated||!r.$__.populated[s]||!r.$__.populated[s].options||!r.$__.populated[s].options.options||!r.$__.populated[s].options.options.lean){let c=a?a.options[F_e]:r.constructor.db.model(this.options.ref);u=c.hydrate(e,null,i),u.$__.wasPopulated={value:u._doc._id,options:{[F_e]:c}}}return u};function q_e(t,e){return this.castForQuery(null,t,e)}function p4t(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function L_e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}Nt.prototype.$conditionalHandlers={$all:p4t,$eq:q_e,$in:L_e,$ne:q_e,$nin:L_e,$exists:o4t,$type:a4t};Nt.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof OW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Nt.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};Nt.prototype.checkRequired=function(t){return t!=null};Nt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,CW(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};Nt.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};Nt.prototype._duplicateKeyErrorMessage=null;Nt.prototype.toJSONSchema=function(e){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};Nt.prototype.autoEncryptionType=function(){return null};K_e.exports=ox=Nt;ox.CastError=OW;ox.ValidatorError=xW});var IW=m((k6r,U_e)=>{"use strict";var kl=cu(),ka=class{constructor(e){Object.assign(this,e),e!=null&&e.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(ka.prototype,"ref",kl);Object.defineProperty(ka.prototype,"refPath",kl);Object.defineProperty(ka.prototype,"localField",kl);Object.defineProperty(ka.prototype,"foreignField",kl);Object.defineProperty(ka.prototype,"justOne",kl);Object.defineProperty(ka.prototype,"count",kl);Object.defineProperty(ka.prototype,"match",kl);Object.defineProperty(ka.prototype,"options",kl);Object.defineProperty(ka.prototype,"skip",kl);Object.defineProperty(ka.prototype,"limit",kl);Object.defineProperty(ka.prototype,"perDocumentLimit",kl);U_e.exports=ka});var ax=m((M6r,V_e)=>{"use strict";V_e.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(i=>e[i]):e instanceof Map?e.get(r):e[r])}});var RW=m((P6r,W_e)=>{"use strict";var f4t=Qt(),h4t=Wz(),G_e=ax(),H_e=lu(),m4t=require("util"),y4t=Ot(),z_e=/(\.\d+$|\.\d+\.)/g;W_e.exports=function(e,r,n,i,s){if(e==null)return[];if(typeof e=="string"&&s!=null&&h4t(s,e))throw new f4t("refPath `"+e+"` must not be excluded in projection, got "+m4t.inspect(s));if(z_e.test(n)){let u=n.split(z_e);if(u[u.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let f=0;f<u.length;f+=2){let h=u[f];if(l.startsWith(h+"."))c+=l.substring(0,h.length)+u[f+1],l=l.substring(h.length+1);else if(f===u.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+h+" not in populated path")}let d=H_e.get(c,r,G_e),p=Array.isArray(d)?d:[d];return p=y4t.array.flatten(p),p}let o=H_e.get(e,r,G_e),a;return i!=null&&i.virtuals.hasOwnProperty(e)?a=[i.virtuals[e].applyGetters(void 0,r)]:a=Array.isArray(o)?o:[o],a}});var ux=m((N6r,J_e)=>{"use strict";var g4t=RW(),E4t=Ot(),b4t=ot().modelSymbol;function Zp(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}Zp.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};Zp.prototype.clone=function(){let t=new Zp(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};Zp.prototype.get=function(t){return this.getters.push(t),this};Zp.prototype.set=function(t){return this.setters.push(t),this};Zp.prototype.applyGetters=function(t,e){E4t.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};Zp.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};Zp.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return g4t(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[b4t]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};J_e.exports=Zp});var DW=m((F6r,Y_e)=>{"use strict";Y_e.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var kW=m((B6r,Q_e)=>{"use strict";Q_e.exports=function(e,r){let n=e.discriminatorMapping&&e.discriminatorMapping.value;if(n&&!("sparse"in r)){let i=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[i]=n}return r}});var Z_e=m((q6r,X_e)=>{"use strict";var MW=ui(),_4t=dh(),v4t=kW();X_e.exports=function(e){let r=[],n=new WeakMap,i=e.constructor.indexTypes,s=new Map;return o(e),r;function o(u,c,l){if(n.has(u))return;n.set(u,!0),c=c||"";let d=Object.keys(u.paths);for(let p of d){let f=u.paths[p];if(l!=null&&l.paths[p])continue;if(f._duplicateKeyErrorMessage!=null&&(u._duplicateKeyErrorMessagesByPath=u._duplicateKeyErrorMessagesByPath||{},u._duplicateKeyErrorMessagesByPath[p]=f._duplicateKeyErrorMessage),f.$isMongooseDocumentArray||f.$isSingleNested){if(MW(f,"options.excludeIndexes")!==!0&&MW(f,"schemaOptions.excludeIndexes")!==!0&&MW(f,"schema.options.excludeIndexes")!==!0&&o(f.schema,c+p+"."),f.schema.discriminators!=null){let g=f.schema.discriminators,_=Object.keys(g);for(let S of _)o(g[S],c+p+".",f.schema)}if(f.$isMongooseDocumentArray)continue}let h=f._index||f.caster&&f.caster._index;if(h!==!1&&h!==null&&h!==void 0){let g={},_=_4t(h),S=_?h:{},w=typeof h=="string"?h:_?h.type:!1;if(w&&i.indexOf(w)!==-1)g[c+p]=w;else if(S.text)g[c+p]="text",delete S.text;else{let A=!1;h==="descending"||h==="desc"?A=!0:h==="ascending"||h==="asc"?A=!1:A=Number(h)===-1,g[c+p]=A?-1:1}delete S.type,"background"in S||(S.background=!0),u.options.autoIndex!=null&&(S._autoIndex=u.options.autoIndex);let C=S&&S.name;typeof C=="string"?s.has(C)?Object.assign(s.get(C),g):(r.push([g,S]),s.set(C,g)):(r.push([g,S]),s.set(C,g))}}n.delete(u),c?a(u,c):(u._indexes.forEach(function(p){let f=p[1];"background"in f||(f.background=!0),v4t(u,f)}),r=r.concat(u._indexes))}function a(u,c){let l=u._indexes,d=l.length;for(let p=0;p<d;++p){let f=l[p][0],h=l[p][1],g=Object.keys(f),_=g.length,S={};for(let C=0;C<_;++C){let A=g[C];S[c+A]=f[A]}let w=Object.assign({},h);if(h!=null&&h.partialFilterExpression!=null){w.partialFilterExpression={};let C=h.partialFilterExpression;for(let A of Object.keys(C))w.partialFilterExpression[c+A]=C[A]}r.push([S,w])}}}});var PW=m((L6r,e4e)=>{"use strict";e4e.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var r4e=m((j6r,t4e)=>{"use strict";t4e.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases&&e.aliases.id||e.virtual("id").get(S4t),e};function S4t(){return this._id!=null?this._id.toString():null}});var i4e=m(($6r,n4e)=>{"use strict";n4e.exports=function(e,r){let n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++){let o=n[s];if(o!==i[s]||e[o]!==r[o])return!1}return!0}});var o4e=m((K6r,s4e)=>{"use strict";s4e.exports=function(e,r,n,i){return i.justOne||i.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=i.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(s){return s&&typeof s=="object"})),e[r]}});var Hv=m((U6r,a4e)=>{"use strict";a4e.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var cx=m((V6r,u4e)=>{"use strict";u4e.exports=w4t;function w4t(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var FW=m((G6r,c4e)=>{"use strict";var A4t=Hv(),ef=cx();c4e.exports=Z0;function Z0(t,e,r){if(e==null)return;if(Object.keys(e).some(a=>a[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let a=Object.keys(e.$set);for(let u of a)NW(r,u,e.$set,t)}if(e.$setOnInsert!=null){let a=Object.keys(e.$setOnInsert);for(let u of a)NW(r,u,e.$setOnInsert,t)}}let s=Object.keys(e).filter(a=>a[0]!=="$");for(let a of s)NW(r,a,e,t);function o(a){for(let u of Object.keys(a)){let c=r.path(u.replace(/\.\$\./i,".").replace(/.\$$/,""));if(a[u]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,d=ef(l,"createdAt"),p=ef(l,"updatedAt");a[u].$each?a[u].$each.forEach(function(f){p!=null&&(f[p]=t),d!=null&&(f[d]=t),Z0(t,f,c.schema)}):(p!=null&&(a[u][p]=t),d!=null&&(a[u][d]=t),Z0(t,a[u],c.schema))}}}}function C4t(t,e,r){let n=e.schema.options.timestamps,i=t.length;if(!n){for(let a=0;a<i;++a)Z0(r,t[a],e.schema);return}let s=ef(n,"createdAt"),o=ef(n,"updatedAt");for(let a=0;a<i;++a)o!=null&&(t[a][o]=r),s!=null&&(t[a][s]=r),Z0(r,t[a],e.schema)}function T4t(t,e,r){let n=e.schema.options.timestamps;if(!n){Z0(r,t,e.schema);return}let i=ef(n,"createdAt"),s=ef(n,"updatedAt");s!=null&&(t[s]=r),i!=null&&(t[i]=r),Z0(r,t,e.schema)}function NW(t,e,r,n){let i=A4t(e),s=t.path(i);if(!s)return;let o=[],a=i.split(".");for(let u=a.length-1;u>0;--u){let c=t.path(a.slice(0,u).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,u).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&s.$isMongooseDocumentArray)C4t(r[e],s,n);else if(r[e]&&s.$isSingleNested)T4t(r[e],s,n);else if(o.length>0)for(let u of o){let c=u.parentPath,l=u.parentSchemaType,d=l.schema.options.timestamps,p=ef(d,"updatedAt");if(!(!d||p==null)){if(l.$isSingleNested)r[c+"."+p]=n;else if(l.$isMongooseDocumentArray){let f=e.substring(c.length+1);if(/^\d+$/.test(f)){r[c+"."+f][p]=n;continue}let h=f.indexOf(".");f=h!==-1?f.substring(0,h):f,r[c+"."+f+"."+p]=n}}}else if(s.schema!=null&&s.schema!=t&&r[e]){let u=s.schema.options.timestamps,c=ef(u,"createdAt"),l=ef(u,"updatedAt");if(!u)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var BW=m((H6r,l4e)=>{"use strict";var O4t=ui();l4e.exports=x4t;function x4t(t,e,r,n,i,s){let o=n,a=o,u=O4t(i,"timestamps",!0);if(!u||o==null)return n;let c=u!=null&&u.createdAt===!1,l=u!=null&&u.updatedAt===!1;if(s)return n&&n.$set&&(n=n.$set,o.$set={},a=o.$set),!l&&r&&!n[r]&&(a[r]=t),!c&&e&&!n[e]&&(a[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&(!n.$currentDate||!n.$currentDate[r])){let d=!1;if(r.indexOf(".")!==-1){let p=r.split(".");for(let f=1;f<p.length;++f){let h=p.slice(-f).join("."),g=p.slice(0,-f).join(".");if(n[g]!=null){n[g][h]=t,d=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][h]=t,d=!0;break}}}d||(o.$set[r]=t),o.hasOwnProperty(r)&&delete o[r]}if(!c&&e){n[e]&&delete n[e],n.$set&&n.$set[e]&&delete n.$set[e];let d=!1;if(e.indexOf(".")!==-1){let p=e.split(".");for(let f=1;f<p.length;++f){let h=p.slice(-f).join("."),g=p.slice(0,-f).join(".");if(n[g]!=null){n[g][h]=t,d=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][h]=t,d=!0;break}}}d||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}return Object.keys(o.$set).length===0&&delete o.$set,o}});var p4e=m((z6r,d4e)=>{"use strict";d4e.exports=function(e,r,n,i,s){let o=r!=null&&r.updatedAt===!1,a=r!=null&&r.createdAt===!1,u=n!=null?n():e.ownerDocument().constructor.base.now();if(!a&&(e.isNew||e.$isSubdocument)&&i&&!e.$__getValue(i)&&e.$__isSelected(i)&&e.$set(i,u,void 0,{overwriteImmutable:!0}),!o&&s&&(e.isNew||e.$isModified())){let c=u;e.isNew&&i!=null&&(c=e.$__getValue(i)),e.$set(s,c)}}});var y4e=m((W6r,m4e)=>{"use strict";var I4t=FW(),R4t=BW(),D4t=ui(),f4e=cx(),k4t=p4e(),M4t=H0(),h4e=new Set(["replaceOne","findOneAndReplace"]);m4e.exports=function(e,r){let n=e.childSchemas.find(i);function i(d){return!!d.schema.options.timestamps}if(!r&&!n)return;let s=f4e(r,"createdAt"),o=f4e(r,"updatedAt"),a=r!=null&&r.hasOwnProperty("currentTime")?r.currentTime:null,u={};if(e.$timestamps={createdAt:s,updatedAt:o},s&&!e.paths[s]){let d=e.base!=null?e.base.get("timestamps.createdAt.immutable"):null,p=d??!0;u[s]={[e.options.typeKey||"type"]:Date,immutable:p}}o&&!e.paths[o]&&(u[o]=Date),e.add(u),e.pre("save",function(p){let f=D4t(this,"$__.saveOptions.timestamps");if(f===!1)return p();k4t(this,f,a,s,o),p()}),e.methods.initializeTimestamps=function(){let d=a!=null?a():this.constructor.base.now();if(s&&!this.get(s)&&this.$set(s,d),o&&!this.get(o)&&this.$set(o,d),this.$isSubdocument)return this;let p=this.$getAllSubdocs();for(let f of p)f.initializeTimestamps&&f.initializeTimestamps();return this},l[M4t.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(d){let p=a!=null?a():this.model.base.now();h4e.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),R4t(p,s,o,this.getUpdate(),this._mongooseOptions,h4e.has(this.op)),I4t(p,this.getUpdate(),this.model.schema),d()}}});var E4e=m((J6r,g4e)=>{"use strict";var P4t=Qt(),N4t=require("util");g4e.exports=F4t;function F4t(t,e){if(typeof t!="string"&&typeof t!="function")throw new P4t('Invalid ref at path "'+e+'". Got '+N4t.inspect(t,{depth:0}))}});var lx=m(gE=>{"use strict";var b4e=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);gE.queryOperations=b4e;var B4t=b4e.concat(["validate"]);gE.queryMiddlewareFunctions=B4t;var q4t=["aggregate"];gE.aggregateMiddlewareFunctions=q4t;var L4t=["bulkWrite","createCollection","insertMany"];gE.modelMiddlewareFunctions=L4t;var j4t=["validate","save","remove","updateOne","deleteOne","init"];gE.documentMiddlewareFunctions=j4t});var dx=m((Q6r,_4e)=>{"use strict";var $4t=H0(),K4t=OO();_4e.exports=zv;zv.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var U4t=new Set(zv.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function zv(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},i=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let c of Object.keys(e.paths)){let l=e.paths[c],d=null;if(l.$isSingleNested)d=l.caster;else if(l.$isMongooseDocumentArray)d=l.Constructor;else continue;if(!d.$appliedHooks&&(zv(d,l.schema,{...r,isChildSchema:!0}),d.discriminators!=null)){let p=Object.keys(d.discriminators);for(let f of p)zv(d.discriminators[f],d.discriminators[f].schema,r)}}let s=e.s.hooks.filter(c=>c.name==="updateOne"||c.name==="deleteOne"?!!c.document:c.name==="remove"||c.name==="init"?c.document==null||!!c.document:c.query!=null||c.document!=null?c.document!==!1:!0).filter(c=>e.methods[c.name]?!c.fn[$4t.builtInMiddleware]:!0);t._middleware=s,i.$__originalValidate=i.$__originalValidate||i.$__validate;let o=r&&r.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let c of o){let l=c==="validate"?"$__originalValidate":`$__${c}`,d=s.createWrapper(c,i[l],null,n);i[`$__${c}`]=d}i.$__init=s.createWrapperSync("init",i.$__init,null,n);let a=Object.keys(e.methods),u=Object.assign({},n,{checkForPromise:!0});for(let c of a){if(U4t.has(c)||!s.hasHooks(c))continue;let l=i[c];i[c]=function(){let d=Array.prototype.slice.call(arguments),p=d.slice(-1).pop(),f=typeof p=="function"?d.slice(0,d.length-1):d;return K4t(p,h=>this[`$__${c}`].apply(this,f.concat([h])),t.events)},i[`$__${c}`]=s.createWrapper(c,l,null,u)}}});var S4e=m((X6r,v4e)=>{"use strict";v4e.exports=fa().Double});var px=m((Z6r,O4e)=>{"use strict";var V4t=z0(),G4t=Qt(),w4e=zn(),H4t=Ot().deepEqual,z4t=$o(),W4t=$O(),A4e=require("util"),J4t=K0(),qW=Vs(),Y4t=FO(),C4e=ot().populateModelSymbol;var Ml=class extends Map{constructor(e,r,n,i,s){z4t(e)==="Object"&&(e=Object.keys(e).reduce((o,a)=>o.concat([[a,e[a]]]),[])),super(e),this.$__parent=n!=null&&n.$__!=null?n:null,this.$__parent?.$isSingleNested&&this.$__parent.$basePath?(this.$__path=this.$__parent.$basePath+"."+r,this.$__pathRelativeToParent=r):s?.path?(this.$__path=s.path,this.$__pathRelativeToParent=null):(this.$__path=r,this.$__pathRelativeToParent=null),this.$__schemaType=i??new V4t(r),this.$__runDeferred()}$init(e,r){T4e(e),super.set(e,r),r!=null&&r.$isSingleNested&&(r.$basePath=this.$__path+"."+e,this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return qW(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(qW(e,"ObjectId")&&(e=e.toString()),T4e(e),r=W4t(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,i=this.$__parent,s=i!=null&&i.$__&&i.$__.populated?i.$populated(a.call(this),!0)||i.$populated(this.$__path,!0):null,o=this.get(e);if(s!=null){if(this.$__schemaType.$isSingleNested)throw new G4t(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(u=>(u.$__==null&&(u=new s.options[C4e](u)),u.$__.wasPopulated={value:u._doc._id},u)):r!=null&&(r.$__==null&&(r=new s.options[C4e](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let u=null;(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap)&&(u={path:a.call(this)},this.$__schemaType.$isSingleNested&&(u.pathRelativeToParent=this.$__pathRelativeToParent!=null?this.$__pathRelativeToParent+"."+e:this.$__path+"."+e)),r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),u)}catch(u){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(a.call(this),u);return}throw u}if(super.set(e,r),r!=null&&r.$isSingleNested&&(this.$__pathRelativeToParent!=null?r.$pathRelativeToParent=this.$__pathRelativeToParent+"."+e:r.$pathRelativeToParent=this.$__path+"."+e),i!=null&&i.$__!=null&&!H4t(r,o)){let u;this.$__pathRelativeToParent!=null?u=this.$__pathRelativeToParent+"."+e:u=a.call(this),i.markModified(u),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&Y4t(i,u)}function a(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return qW(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e&&e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=w4e(this.get(i),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof(e&&e.flattenMaps)!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=w4e(this.get(i),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};A4e.inspect.custom&&Object.defineProperty(Ml.prototype,A4e.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:Ml.prototype.inspect});Object.defineProperty(Ml.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ml.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ml.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ml.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ml.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(Ml.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function T4e(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(J4t.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}O4e.exports=Ml});var I4e=m((eEr,x4e)=>{"use strict";x4e.exports=fa().UUID});var EE=m(fc=>{"use strict";fc.Array=nW();fc.Buffer=dE();fc.Document=fc.Embedded=mE();fc.DocumentArray=Y0();fc.Double=S4e();fc.Decimal128=uO();fc.ObjectId=Wp();fc.Map=px();fc.Subdocument=UO();fc.UUID=I4e()});var D4e=m((rEr,R4e)=>{"use strict";var Q4t=Ia(),bE=class extends Q4t{},LW=cu();Object.defineProperty(bE.prototype,"enum",LW);Object.defineProperty(bE.prototype,"of",LW);Object.defineProperty(bE.prototype,"castNonArrays",LW);R4e.exports=bE});var M4e=m((nEr,k4e)=>{"use strict";k4e.exports=jW;function jW(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=jW(t[0]);for(let r=1;r<t.length;++r){let n=jW(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var Wv=m((iEr,N4e)=>{"use strict";var P4e=require("assert");N4e.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),P4e.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);P4e.ok(!1)}});var $W=m((sEr,F4e)=>{"use strict";F4e.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var L4e=m((oEr,q4e)=>{"use strict";var _E=ho(),B4e=ph(),fx=Wv(),X4t=$W(),Z4t=new Set(["$and","$or"]),e3t=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),t3t=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),r3t=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),n3t=new Set(["$arrayElemAt","$first","$last"]),i3t=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),s3t=new Set(["$not"]);q4e.exports=function(e,r,n){if(typeof e=="boolean")return e;if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object or boolean literal");return hc(e,r,n)};function hc(t,e,r){if(Jv(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(i=>hc(i,e,r)):(t.$cond.if=hc(t.$cond.if,e,r),t.$cond.then=hc(t.$cond.then,e,r),t.$cond.else=hc(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(i=>hc(i,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(i=>hc(i,e,r))),"default"in t.$switch&&(t.$switch.default=hc(t.$switch.default,e,r)));let n=Object.keys(t);for(let i of n)Z4t.has(i)?t[i]=t[i].map(s=>hc(s,e,r)):e3t.has(i)?t[i]=u3t(t[i],e,r):t3t.has(i)?t[i]=a3t(t[i],e,r):r3t.has(i)?t[i]=KW(t[i],e,r):s3t.has(i)&&(t[i]=hc(t[i],e,r));if(t.$in&&(t.$in=o3t(t.$in,e,r)),t.$size&&(t.$size=KW(t.$size,e,r)),t.$round){let i=t.$round;if(!Array.isArray(i)||i.length<1||i.length>2)throw new _E("Array",i,"$round");t.$round=i.map(s=>KW(s,e,r))}return X4t(t),t}function KW(t){if(!hx(t))return t;try{return fx(t)}catch{throw new _E("Number",t)}}function o3t(t,e,r){let n=t[1];if(!Jv(n))return t;let i=t[0],s=e.path(n.slice(1));if(s===null){if(r===!1)return t;if(r==="throw")throw new B4e("$in");return}if(!s.$isMongooseArray)throw new Error("Path must be an array for $in");return[s.$isMongooseDocumentArray?s.$embeddedSchemaType.cast(i):s.caster.cast(i),n]}function a3t(t){if(!Array.isArray(t)){if(!hx(t))return t;try{return fx(t)}catch{throw new _E("Number",t)}}return t.map(e=>{if(!hx(e))return e;try{return fx(e)}catch{throw new _E("Number",e)}})}function u3t(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=hc(t[0],e,r);let n=t[0];if(hx(t[1])){let i=null,s=null,o=null;if(Jv(n))i=n.slice(1),s=e.path(i);else if(typeof n=="object"&&n!=null)for(let u of Object.keys(n))i3t.has(u)&&Jv(n[u])?(i=n[u].slice(1)+"."+u,o=fx):n3t.has(u)&&Jv(n[u])&&(i=n[u].slice(1)+"."+u,s=e.path(n[u].slice(1)),s!=null&&(s.$isMongooseDocumentArray?s=s.$embeddedSchemaType:s.$isMongooseArray&&(s=s.caster)));let a=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(s!=null)a?t[1]={$literal:s.cast(t[1].$literal)}:t[1]=s.cast(t[1]);else if(o!=null)if(a)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new _E(o.name.replace(/^cast/,""),t[1],i+".$literal")}else try{t[1]=o(t[1])}catch{throw new _E(o.name.replace(/^cast/,""),t[1],i)}else{if(i!=null&&r===!0)return;if(i!=null&&r==="throw")throw new B4e(i)}}else t[1]=hc(t[1]);return t}function Jv(t){return typeof t=="string"&&t[0]==="$"}function hx(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var mx=m((aEr,j4e)=>{"use strict";var c3t=ho();j4e.exports=function(e,r){if(e==null)return e;if(e._id&&typeof e._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new c3t("string",e,r)}});var V4e=m((uEr,U4e)=>{"use strict";var l3t=ho(),$4e=CO(),K4e=mx();U4e.exports=function(e,r){if(e==null||typeof e!="object")throw new l3t("$text",e,r);return e.$search!=null&&(e.$search=K4e(e.$search,r+".$search")),e.$language!=null&&(e.$language=K4e(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=$4e(e.$caseSensitive,r+".$castSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=$4e(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Yv=m((cEr,G4e)=>{"use strict";var d3t=new Set(["$ref","$id","$db"]);G4e.exports=function(e){return e[0]==="$"&&!d3t.has(e)}});var ey=m((lEr,Y4e)=>{"use strict";var H4e=ho(),UW=ph(),p3t=Qv(),f3t=L4e(),h3t=mx(),m3t=V4e(),y3t=ui(),z4e=jO(),W4e=Yv(),g3t=require("util"),GW=dh(),VW=kv(),J4e=Ot(),E3t=["Polygon","MultiPolygon"];Y4e.exports=function t(e,r,n,i){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",g3t.inspect(r));if(r==null)return r;e!=null&&e.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=z4e(e,r[e.options.discriminatorKey])||e);let s=Object.keys(r),o=s.length,a,u,c,l,d,p,f;for(n=n||{};o--;)if(d=s[o],f=r[d],d==="$or"||d==="$nor"||d==="$and"){if(!Array.isArray(f))throw new H4e("Array",f,d);for(let h=f.length-1;h>=0;h--){if(f[h]==null||typeof f[h]!="object")throw new H4e("Object",f[h],d+"."+h);let g=Object.keys(f[h]).length,_=f[h][e.options.discriminatorKey];if(_==null)f[h]=t(e,f[h],n,i);else{let S=z4e(i.schema,_);f[h]=t(S||e,f[h],n,i)}Object.keys(f[h]).length===0&&g!==0&&f.splice(h,1)}f.length===0&&delete r[d]}else if(d==="$where"){if(p=typeof f,p!=="string"&&p!=="function")throw new Error("Must have a string or function for $where");p==="function"&&(r[d]=f.toString());continue}else if(d==="$expr"){f=f3t(f,e);continue}else if(d==="$elemMatch")f=t(e,f,n,i);else if(d==="$text")f=m3t(f,d);else if(d==="$comment"&&!e.paths.hasOwnProperty("$comment"))f=h3t(f,d),r[d]=f;else{if(!e)continue;if(c=e.path(d),!c){let h=d.split("."),g=h.length;for(;g--;){let _=h.slice(0,g).join("."),S=h.slice(g).join("."),w=e.path(_),C=w&&w.schema&&w.schema.options&&w.schema.options.discriminatorKey;if(w!=null&&(w.schema&&w.schema.discriminators)!=null&&C!=null&&S!==C){let A=y3t(r,_+"."+C),O=w.schema.discriminators;typeof A=="string"&&O[A]!=null?c=O[A].path(S):A!=null&&Object.keys(A).length===1&&Array.isArray(A.$in)&&A.$in.length===1&&typeof A.$in[0]=="string"&&O[A.$in[0]]!=null&&(c=O[A.$in[0]].path(S))}}}if(c){if(f==null)continue;if(J4e.isPOJO(f))if(u=Object.keys(f).some(W4e),!u)r[d]=c.castForQuery(null,f,i);else{let h=Object.keys(f),g,_=h.length;for(;_--;)if(g=h[_],l=f[g],g==="$elemMatch")l&&c!=null&&c.schema!=null?t(c.schema,l,n,i):l&&c!=null&&c.$isMongooseArray&&(J4e.isPOJO(l)&&l.$not!=null?t(e,l,n,i):f[g]=c.castForQuery(g,l,i));else if(g==="$not"){if(l&&c){if(a=Object.keys(l),a.length&&W4e(a[0]))for(let S in l)l[S]=c.castForQuery(S,l[S],i);else f[g]=c.castForQuery(g,l,i);continue}}else f[g]=c.castForQuery(g,l,i)}else if(Array.isArray(f)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let h=[],g=f;for(let _ of g)h.push(c.castForQuery(null,_,i));r[d]={$in:h}}else r[d]=c.castForQuery(null,f,i)}else{let h=d.split("."),g=h.length,_,S,w;for(;g--&&(_=h.slice(0,g).join("."),c=e.path(_),!c););if(c){if(c.caster&&c.caster.schema){w={},S=h.slice(g).join("."),w[S]=f;let O=t(c.caster.schema,w,n,i)[S];O===void 0?delete r[d]:r[d]=O}else r[d]=f;continue}if(GW(f)){let O="";if(f.$near?O="$near":f.$nearSphere?O="$nearSphere":f.$within?O="$within":f.$geoIntersects?O="$geoIntersects":f.$geoWithin&&(O="$geoWithin"),O){let x=new p3t.Number("__QueryCasting__"),R=f[O];if(f.$maxDistance!=null&&(f.$maxDistance=x.castForQuery(null,f.$maxDistance,i)),f.$minDistance!=null&&(f.$minDistance=x.castForQuery(null,f.$minDistance,i)),O==="$within"){let M=R.$center||R.$centerSphere||R.$box||R.$polygon;if(!M)throw new Error("Bad $within parameter: "+JSON.stringify(f));R=M}else if(O==="$near"&&typeof R.type=="string"&&Array.isArray(R.coordinates))R=R.coordinates;else if((O==="$near"||O==="$nearSphere"||O==="$geoIntersects")&&R.$geometry&&typeof R.$geometry.type=="string"&&Array.isArray(R.$geometry.coordinates))R.$maxDistance!=null&&(R.$maxDistance=x.castForQuery(null,R.$maxDistance,i)),R.$minDistance!=null&&(R.$minDistance=x.castForQuery(null,R.$minDistance,i)),VW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({transform:!1,virtuals:!1})),R=R.$geometry.coordinates;else if(O==="$geoWithin")if(R.$geometry){VW(R.$geometry)&&(R.$geometry=R.$geometry.toObject({virtuals:!1}));let M=R.$geometry.type;if(E3t.indexOf(M)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+M+'", must be "Polygon" or "MultiPolygon"');R=R.$geometry.coordinates}else R=R.$box||R.$polygon||R.$center||R.$centerSphere,VW(R)&&(R=R.toObject({virtuals:!1}));HW(R,x,i);continue}}if(e.nested[d])continue;let C="strict"in n?n.strict:e.options.strict,A=b3t(n,e._userProvidedOptions,e.options,i);if(n.upsert&&C)throw C==="throw"?new UW(d):new UW(d,'Path "'+d+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(A==="throw")throw new UW(d,'Path "'+d+`" is not in schema and strictQuery is 'throw'.`);A&&delete r[d]}}return r};function HW(t,e,r){if(Array.isArray(t))t.forEach(function(n,i){if(Array.isArray(n)||GW(n))return HW(n,e,r);t[i]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),i=n.length;for(;i--;){let s=n[i],o=t[s];Array.isArray(o)||GW(o)?(HW(o,e,r),t[s]=o):t[s]=e.castForQuery({val:o,context:r})}}}function b3t(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let i=n&&n.mongooseCollection&&n.mongooseCollection.conn&&n.mongooseCollection.conn.base&&n.mongooseCollection.conn.base.options;return i&&"strictQuery"in i?i.strictQuery:r.strictQuery}});var X4e=m((dEr,Q4e)=>{"use strict";var _3t=Ia(),ty=class extends _3t{},yx=cu();Object.defineProperty(ty.prototype,"min",yx);Object.defineProperty(ty.prototype,"max",yx);Object.defineProperty(ty.prototype,"enum",yx);Object.defineProperty(ty.prototype,"populate",yx);Q4e.exports=ty});var yo=m((pEr,Z4e)=>{"use strict";Z4e.exports=function(e,r,n,i){return n?i?{bsonType:r}:{bsonType:[r,"null"]}:i?{type:e}:{type:[e,"null"]}}});var Xv=m((fEr,t3e)=>{"use strict";var v3t=ho();function S3t(t){let e=this;return Array.isArray(t)?t.map(function(r){return e3e(e.path,r)}):Buffer.isBuffer(t)?t:e3e(e.path,t)}function e3e(t,e){let r=Number(e);if(isNaN(r))throw new v3t("number",e,t);return r}t3e.exports=S3t});var JW=m((hEr,r3e)=>{"use strict";var bx=Oa(),w3t=X4e(),tf=Ci(),A3t=Wv(),C3t=yo(),gx=Xv(),zW=Ot(),WW=tf.CastError;function wn(t,e){tf.call(this,t,e,"Number")}wn.get=tf.get;wn.set=tf.set;wn.setters=[];wn._cast=A3t;wn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};wn._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};wn.schemaName="Number";wn.defaultOptions={};wn.prototype=Object.create(tf.prototype);wn.prototype.constructor=wn;wn.prototype.OptionsConstructor=w3t;wn._checkRequired=t=>typeof t=="number"||t instanceof Number;wn.checkRequired=tf.checkRequired;wn.prototype.checkRequired=function(e,r){return typeof e=="object"&&tf._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():wn.checkRequired())(e)};wn.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||bx.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};wn.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||bx.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};wn.prototype.enum=function(t,e){return this.enumValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.enumValidator},this)),Array.isArray(t)||(zW.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),zW.isPOJO(t)&&(t=Object.values(t)),e=e||bx.messages.Number.enum),e=e??bx.messages.Number.enum,this.enumValidator=r=>r==null||t.indexOf(r)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:t}),this};wn.prototype.cast=function(t,e,r,n,i){if(typeof t!="number"&&tf._isRef(this,t,e,r)&&(t==null||zW.isNonBuiltinObject(t)))return this._castRef(t,e,r,i);let s=t&&typeof t._id<"u"?t._id:t,o;typeof this._castFunction=="function"?o=this._castFunction:typeof this.constructor.cast=="function"?o=this.constructor.cast():o=wn.cast();try{return o(s)}catch(a){throw new WW("Number",s,this.path,a,this)}};function Ex(t){return this.cast(t)}function T3t(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}var O3t={...tf.prototype.$conditionalHandlers,$bitsAllClear:gx,$bitsAnyClear:gx,$bitsAllSet:gx,$bitsAnySet:gx,$gt:Ex,$gte:Ex,$lt:Ex,$lte:Ex,$mod:T3t};Object.defineProperty(wn.prototype,"$conditionalHandlers",{enumerable:!1,value:O3t});wn.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new WW("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(i){throw i instanceof WW&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return e};wn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return C3t("number","number",e?.useBsonType,r)};r3e.exports=wn});var Zv=m(YW=>{"use strict";var x3t=JW();YW.castToNumber=n3e;YW.castArraysOfNumbers=i3e;function n3e(t){return x3t.cast()(t)}function i3e(t,e){t.forEach(function(r,n){Array.isArray(r)?i3e(r,e):t[n]=n3e.call(e,r)})}});var ZW=m(_x=>{"use strict";var s3e=Zv().castArraysOfNumbers,eS=Zv().castToNumber;_x.cast$geoIntersects=D3t;_x.cast$near=I3t;_x.cast$within=R3t;function I3t(t){let e=vx();if(Array.isArray(t))return s3e(t,this),t;if(XW(this,t),t&&t.$geometry)return QW(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function QW(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":s3e(t.$geometry.coordinates,e);break;default:break}return XW(e,t),t}function R3t(t){if(XW(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,i)=>{r[i]=eS.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((i,s)=>{r[s]=eS.call(this,i)}):t[e][n]=eS.call(this,r)})}else t.$geometry&&QW(t,this);return t}function D3t(t){if(t.$geometry)return QW(t,this),t}function XW(t,e){e.$maxDistance&&(e.$maxDistance=eS.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=eS.call(t,e.$minDistance))}});var vx=m((gEr,c3e)=>{"use strict";var k3t=TO(),M3t=Bz(),a3e=Qt(),P3t=D4e(),mc=Ci(),wx=mc.CastError,Ax=z0(),N3t=IW(),o3e=ux(),F3t=M4e(),eJ=ey(),B3t=zn(),q3t=$o(),L3t=Yv(),Cx=require("util"),gh=Ot(),j3t=Zv().castToNumber,$3t=yo(),tJ=ZW(),K3t=pc(),tS,Sx,u3e=Symbol("mongoose#isNestedArray"),U3t=Object.freeze({});function br(t,e,r,n){Sx||(Sx=EE().Embedded);let i="type";if(n&&n.typeKey&&(i=n.typeKey),this.schemaOptions=n,e){let a={};gh.isPOJO(e)&&(e[i]?(a=B3t(e),delete a[i],e=e[i]):e=Ax),r!=null&&r.ref!=null&&a.ref==null&&(a.ref=r.ref),e===Object&&(e=Ax);let u=typeof e=="string"?e:gh.getFunctionName(e),c=Qv(),l=c.hasOwnProperty(u)?c[u]:e;if(this.casterConstructor=l,this.casterConstructor instanceof br&&(this.casterConstructor[u3e]=!0),typeof l=="function"&&!l.$isArraySubdocument&&!l.$isSchemaMap){let d=this.caster instanceof Sx?null:t;this.caster=new l(d,a)}else this.caster=l,this.caster instanceof Sx||(this.caster.path=t);this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,mc.call(this,t,r,"Array");let s,o;if(this.defaultValue!=null&&(s=this.defaultValue,o=typeof s=="function"),!("defaultValue"in this)||this.defaultValue!=null){let a=function(){return o?s.call(this):s!=null?[].concat(s):[]};a.$runBeforeSetters=!o,this.default(a)}}br.schemaName="Array";br.options={castNonArrays:!0};br.defaultOptions={};br.set=mc.set;br.setters=[];br.get=mc.get;br.prototype=Object.create(mc.prototype);br.prototype.constructor=br;br.prototype.OptionsConstructor=P3t;br._checkRequired=mc.prototype.checkRequired;br.checkRequired=mc.checkRequired;br.prototype.virtuals=null;br.prototype.checkRequired=function(e,r){return typeof e=="object"&&mc._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():br.checkRequired())(e)};br.prototype.enum=function(){let t=this;for(;;){let r=t&&t.caster&&t.caster.instance;if(r==="Array"){t=t.caster;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&gh.isObject(arguments)&&(e=gh.object.vals(e)),t.caster.enum.apply(t.caster,e),this};br.prototype.applyGetters=function(t,e){return e!=null&&e.$__!=null&&e.$populated(this.path)?t:mc.prototype.applyGetters.call(this,t,e)};br.prototype._applySetters=function(t,e,r,n){if(this.casterConstructor.$isMongooseArray&&br.options.castNonArrays&&!this[u3e]){let i=0,s=this;for(;s!=null&&s.$isMongooseArray&&!s.$isMongooseDocumentArray;)++i,s=s.casterConstructor;if(t!=null&&t.length!==0){let o=F3t(t);if(o.min===o.max&&o.max<i&&o.containsNonArrayItem)for(let a=o.max;a<i;++a)t=[t]}}return mc.prototype._applySetters.call(this,t,e,r,n)};br.prototype.cast=function(t,e,r,n,i){tS||(tS=EE().Array);let s,o;if(Array.isArray(t)){if(!t.length&&e){let f=e.schema.indexedPaths(),h=this.path;for(s=0,o=f.length;s<o;++s){let _=f[s][0][h];if(_==="2dsphere"||_==="2d")return}let g=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(g!=null){for(s=0,o=f.length;s<o;++s)if(f[s][0][g]==="2dsphere")return}}i=i||U3t;let c=gh.isMongooseArray(t)?t.__array:t,l=i.path||this.path;if(i.arrayPathIndex!=null&&(l+="."+i.arrayPathIndex),t=tS(c,l,e,this),c=t.__array,r&&e!=null&&e.$__!=null&&e.$populated(this.path))return t;let d=this.caster,p=d.$isMongooseArray;if(d&&this.casterConstructor!==Ax)try{let f=c.length;for(s=0;s<f;s++){let h={};p&&(i.arrayPath!=null||d._arrayParentPath!=null)&&(h.arrayPathIndex=s),i.hydratedPopulatedDocs&&(h.hydratedPopulatedDocs=i.hydratedPopulatedDocs),c[s]=d.applySetters(c[s],e,r,void 0,h)}}catch(f){throw new wx("["+f.kind+"]",Cx.inspect(t),this.path+"."+s,f,this)}return t}let a=this.options.castNonArrays!=null?this.options.castNonArrays:br.options.castNonArrays;if(r||a)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new wx("Array",Cx.inspect(t),this.path,null,this)};br.prototype._castForPopulate=function(e,r){if(tS||(tS=EE().Array),Array.isArray(e)){let n,i=e.__array?e.__array:e,s=i.length,o=this.caster;if(o&&this.casterConstructor!==Ax)try{for(n=0;n<s;n++){let a={};o.$isMongooseArray&&o._arrayParentPath!=null&&(a.arrayPathIndex=n),i[n]=o.cast(i[n],r,!1,void 0,a)}}catch(a){throw new wx("["+a.kind+"]",Cx.inspect(e),this.path+"."+n,a,this)}return e}throw new wx("Array",Cx.inspect(e),this.path,null,this)};br.prototype.$toObject=br.prototype.toObject;br.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,e==null||typeof e=="function")throw new a3e("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};br.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};br.prototype._castForQuery=function(t,e){let r=this.casterConstructor;if(t&&r.discriminators&&r.schema&&r.schema.options&&r.schema.options.discriminatorKey)if(typeof t[r.schema.options.discriminatorKey]=="string"&&r.discriminators[t[r.schema.options.discriminatorKey]])r=r.discriminators[t[r.schema.options.discriminatorKey]];else{let u=K3t(r.discriminators,t[r.schema.options.discriminatorKey]);u&&(r=u)}let n=this.casterConstructor.prototype,i=n&&n.castForQuery,s=n&&n.cast,o=r.castForQuery,a=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(u=>{t=u.call(this,t,this)}),t=t.map(function(u){return gh.isObject(u)&&u.$elemMatch?u:i?(u=i.call(a,null,u,e),u):s?(u=s.call(a,u),u):o?(u=o.call(a,null,u,e),u):(u!=null&&(u=new r(u)),u)})):i?t=i.call(a,null,t,e):s?t=s.call(a,t):o?t=o.call(a,null,t,e):t!=null&&(t=new r(t)),t};br.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};br.prototype.virtual=function(e,r){if(e instanceof o3e||q3t(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new N3t(r),gh.hasUserDefinedProperty(r,["ref","refPath"]))throw new a3e("Cannot set populate virtual as a property of an array");let n=new o3e(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function V3t(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!gh.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:eJ(this.casterConstructor.schema,r.$elemMatch,null,this&&this.$$context)};let n={};return n[this.path]=r,eJ(this.casterConstructor.schema,n,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)}function G3t(t,e){let r=Object.keys(t),n=r.length;for(let i=0;i<n;++i){let s=r[i],o=t[s];L3t(s)&&o!=null&&(t[s]=this.castForQuery(s,o,e))}return t}var fn=br.prototype.$conditionalHandlers={};fn.$all=V3t;fn.$options=String;fn.$elemMatch=G3t;fn.$geoIntersects=tJ.cast$geoIntersects;fn.$or=rJ("$or");fn.$and=rJ("$and");fn.$nor=rJ("$nor");function rJ(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let i=[];for(let s of r)i.push(eJ(this.casterConstructor.schema??n.schema,s,null,this&&this.$$context));return i}}fn.$near=fn.$nearSphere=tJ.cast$near;fn.$within=fn.$geoWithin=tJ.cast$within;fn.$size=fn.$minDistance=fn.$maxDistance=j3t;fn.$exists=k3t;fn.$type=M3t;fn.$eq=fn.$gt=fn.$gte=fn.$lt=fn.$lte=fn.$not=fn.$regex=fn.$ne=br.prototype._castForQuery;fn.$nin=mc.prototype.$conditionalHandlers.$nin;fn.$in=mc.prototype.$conditionalHandlers.$in;br.prototype.toJSONSchema=function(e){let r=this.getEmbeddedSchemaType(),n=this.options.required&&typeof this.options.required!="function";return{...$3t("array","array",e?.useBsonType,n),items:r.toJSONSchema(e)}};br.prototype.autoEncryptionType=function(){return"array"};c3e.exports=br});var p3e=m((EEr,d3e)=>{"use strict";var{Long:H3t}=fa(),nJ=9223372036854775807n,iJ=-9223372036854775808n,l3e=`Mongoose only supports BigInts between ${iJ} and ${nJ} because MongoDB does not support arbitrary precision integers`;d3e.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint"){if(e>nJ||e<iJ)throw new Error(l3e);return e}if(e instanceof H3t)return e.toBigInt();if(typeof e=="string"||typeof e=="number"){if(e=BigInt(e),e>nJ||e<iJ)throw new Error(l3e);return e}throw new Error(`Cannot convert value to BigInt: "${e}"`)}});var m3e=m((bEr,h3e)=>{"use strict";var f3e=ho(),vE=Ci(),z3t=p3e(),W3t=yo();function ci(t,e){vE.call(this,t,e,"BigInt")}ci.schemaName="BigInt";ci.defaultOptions={};ci.prototype=Object.create(vE.prototype);ci.prototype.constructor=ci;ci._cast=z3t;ci.set=vE.set;ci.setters=[];ci.get=vE.get;ci.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};ci._checkRequired=t=>t!=null;ci.checkRequired=vE.checkRequired;ci.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};ci.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=ci.cast();try{return e(t)}catch(r){throw new f3e("BigInt",t,this.path,r,this)}};var J3t={...vE.prototype.$conditionalHandlers,$gt:Tx,$gte:Tx,$lt:Tx,$lte:Tx};Object.defineProperty(ci.prototype,"$conditionalHandlers",{enumerable:!1,value:J3t});function Tx(t,e){return this.castForQuery(null,t,e)}ci.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof f3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};ci.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():ci.cast())==null,e};ci.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return W3t("string","long",e?.useBsonType,r)};ci.prototype.autoEncryptionType=function(){return"long"};h3e.exports=ci});var E3e=m((_Er,g3e)=>{"use strict";var y3e=ho(),SE=Ci(),rS=CO(),Y3t=yo();function An(t,e){SE.call(this,t,e,"Boolean")}An.schemaName="Boolean";An.defaultOptions={};An.prototype=Object.create(SE.prototype);An.prototype.constructor=An;An._cast=rS;An.set=SE.set;An.setters=[];An.get=SE.get;An.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};An._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};An._checkRequired=t=>t===!0||t===!1;An.checkRequired=SE.checkRequired;An.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(An,"convertToTrue",{get:()=>rS.convertToTrue,set:t=>{rS.convertToTrue=t}});Object.defineProperty(An,"convertToFalse",{get:()=>rS.convertToFalse,set:t=>{rS.convertToFalse=t}});An.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=An.cast();try{return e(t)}catch(r){throw new y3e("Boolean",t,this.path,r,this)}};var Q3t={...SE.prototype.$conditionalHandlers};Object.defineProperty(An.prototype,"$conditionalHandlers",{enumerable:!1,value:Q3t});An.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof y3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};An.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():An.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};An.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Y3t("boolean","bool",e?.useBsonType,r)};An.prototype.autoEncryptionType=function(){return"bool"};g3e.exports=An});var _3e=m((vEr,b3e)=>{"use strict";var X3t=Ia(),Ox=class extends X3t{},Z3t=cu();Object.defineProperty(Ox.prototype,"subtype",Z3t);b3e.exports=Ox});var w3e=m((SEr,S3e)=>{"use strict";var wE=dE(),evt=_3e(),rf=Ci(),tvt=yo(),xx=Xv(),v3e=Ot(),sJ=wE.Binary,Rx=rf.CastError;function Xi(t,e){rf.call(this,t,e,"Buffer")}Xi.schemaName="Buffer";Xi.defaultOptions={};Xi.prototype=Object.create(rf.prototype);Xi.prototype.constructor=Xi;Xi.prototype.OptionsConstructor=evt;Xi._checkRequired=t=>!!(t&&t.length);Xi.set=rf.set;Xi.setters=[];Xi.get=rf.get;Xi.checkRequired=rf.checkRequired;Xi.prototype.checkRequired=function(t,e){return rf._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};Xi.prototype.cast=function(t,e,r,n,i){let s;if(rf._isRef(this,t,e,r)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new wE(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof sJ){if(s=new wE(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new Rx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t==null||v3e.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new wE(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof sJ){if(s=new wE(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new Rx("Buffer",t,this.path,null,this);return s._subtype=t.sub_type,s}if(t===null)return t;let o=typeof t;if(o==="string"||o==="number"||Array.isArray(t)||o==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return o==="number"&&(t=[t]),s=new wE(t,[this.path,e]),this.options.subtype!=null&&(s._subtype=this.options.subtype),s;if(v3e.isPOJO(t)&&(t.$binary instanceof sJ||typeof t.$binary=="string")){let a=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return a._subtype=t.$type,a}throw new Rx("Buffer",t,this.path,null,this)};Xi.prototype.subtype=function(t){return this.options.subtype=t,this};function Ix(t,e){return this.castForQuery(null,t,e)}var rvt={...rf.prototype.$conditionalHandlers,$bitsAllClear:xx,$bitsAnyClear:xx,$bitsAllSet:xx,$bitsAnySet:xx,$gt:Ix,$gte:Ix,$lt:Ix,$lte:Ix};Object.defineProperty(Xi.prototype,"$conditionalHandlers",{enumerable:!1,value:rvt});Xi.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let i;try{i=this.applySetters(e,r)}catch(s){throw s instanceof Rx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return i&&i.toObject({transform:!1,virtuals:!1})};Xi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return tvt("string","binData",e?.useBsonType,r)};Xi.prototype.autoEncryptionType=function(){return"binData"};S3e.exports=Xi});var C3e=m((wEr,A3e)=>{"use strict";var nvt=Ia(),AE=class extends nvt{},oJ=cu();Object.defineProperty(AE.prototype,"min",oJ);Object.defineProperty(AE.prototype,"max",oJ);Object.defineProperty(AE.prototype,"expires",oJ);A3e.exports=AE});var O3e=m((AEr,T3e)=>{"use strict";var aJ=require("assert");T3e.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return aJ.ok(!isNaN(e.valueOf())),e;let r;if(aJ.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;aJ.ok(!1)}});var D3e=m((CEr,R3e)=>{"use strict";var x3e=Oa(),ivt=C3e(),Eh=Ci(),svt=O3e(),ovt=yo(),avt=$o(),uvt=Ot(),I3e=Eh.CastError;function hn(t,e){Eh.call(this,t,e,"Date")}hn.schemaName="Date";hn.defaultOptions={};hn.prototype=Object.create(Eh.prototype);hn.prototype.constructor=hn;hn.prototype.OptionsConstructor=ivt;hn._cast=svt;hn.set=Eh.set;hn.setters=[];hn.get=Eh.get;hn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};hn._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};hn.prototype.expires=function(t){return avt(this._index)!=="Object"&&(this._index={}),this._index.expires=t,uvt.expires(this._index),this};hn._checkRequired=t=>t instanceof Date;hn.checkRequired=Eh.checkRequired;hn.prototype.checkRequired=function(t,e){return typeof t=="object"&&Eh._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():hn.checkRequired())(t)};hn.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||x3e.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(i){let s=t;typeof t=="function"&&t!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};hn.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||x3e.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(i){let s=t;typeof s=="function"&&s!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};hn.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=hn.cast();try{return e(t)}catch(r){throw new I3e("date",t,this.path,r,this)}};function Dx(t){return this.cast(t)}var cvt={...Eh.prototype.$conditionalHandlers,$gt:Dx,$gte:Dx,$lt:Dx,$lte:Dx};Object.defineProperty(hn.prototype,"$conditionalHandlers",{enumerable:!1,value:cvt});hn.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(i){throw i instanceof I3e&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};hn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return ovt("string","date",e?.useBsonType,r)};hn.prototype.autoEncryptionType=function(){return"date"};R3e.exports=hn});var M3e=m((TEr,k3e)=>{"use strict";var ry=uO(),lvt=require("assert");k3e.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return ry.fromString(e.$numberDecimal);if(e instanceof ry)return e;if(typeof e=="string")return ry.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new ry(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new ry(e);if(typeof e=="number")return ry.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return ry.fromString(e.valueOf());lvt.ok(!1)}});var N3e=m((OEr,P3e)=>{"use strict";var nf=Ci(),dvt=nf.CastError,pvt=M3e(),fvt=yo(),uJ=Vs();function Ti(t,e){nf.call(this,t,e,"Decimal128")}Ti.schemaName="Decimal128";Ti.defaultOptions={};Ti.prototype=Object.create(nf.prototype);Ti.prototype.constructor=Ti;Ti._cast=pvt;Ti.set=nf.set;Ti.setters=[];Ti.get=nf.get;Ti.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ti._defaultCaster=t=>{if(t!=null&&!uJ(t,"Decimal128"))throw new Error;return t};Ti._checkRequired=t=>uJ(t,"Decimal128");Ti.checkRequired=nf.checkRequired;Ti.prototype.checkRequired=function(e,r){return nf._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Ti.checkRequired())(e)};Ti.prototype.cast=function(t,e,r,n,i){if(nf._isRef(this,t,e,r))return uJ(t,"Decimal128")?t:this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Ti.cast();try{return s(t)}catch(o){throw new dvt("Decimal128",t,this.path,o,this)}};function kx(t){return this.cast(t)}var hvt={...nf.prototype.$conditionalHandlers,$gt:kx,$gte:kx,$lt:kx,$lte:kx};Object.defineProperty(Ti.prototype,"$conditionalHandlers",{enumerable:!1,value:hvt});Ti.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return fvt("string","decimal",e?.useBsonType,r)};Ti.prototype.autoEncryptionType=function(){return"decimal"};P3e.exports=Ti});var q3e=m((xEr,B3e)=>{"use strict";var mvt=Ia(),nS=class extends mvt{},F3e=cu();Object.defineProperty(nS.prototype,"_id",F3e);Object.defineProperty(nS.prototype,"minimize",F3e);B3e.exports=nS});var cJ=m((IEr,L3e)=>{"use strict";L3e.exports=function(e,r,n){if(e.length===0)return n();let i=e.length,s=null;for(let o of e)r(o,function(a){if(s==null){if(a!=null)return s=a,n(s);if(--i<=0)return n()}})}});var $3e=m((REr,j3e)=>{"use strict";var yvt=cJ();j3e.exports=function(e){e.s.hooks.pre("save",!1,function(i){if(this.$isSubdocument){i();return}let s=this,o=this.$getAllSubdocs({useCache:!0});if(!o.length){i();return}yvt(o,function(a,u){a.$__schema.s.hooks.execPre("save",a,function(c){u(c)})},function(a){if(s.$__.saveOptions&&(s.$__.saveOptions.__subdocs=null),a)return s.$__schema.s.hooks.execPost("save:error",s,[s],{error:a},function(u){i(u)});i()})},null,!0),e.s.hooks.post("save",async function(){let i=this.$__.removedSubdocs;if(!i||!i.length)return;let s=[];for(let o of i)s.push(new Promise((a,u)=>{o.$__schema.s.hooks.execPost("deleteOne",o,[o],function(c){if(c)return u(c);a()})}));this.$__.removedSubdocs=null,await Promise.all(s)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let i=this,s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let o=[];for(let a of s)o.push(new Promise((u,c)=>{a.$__schema.s.hooks.execPost("save",a,[a],function(l){if(l)return c(l);u()})}));try{await Promise.all(o)}catch(a){await new Promise((u,c)=>{this.$__schema.s.hooks.execPost("save:error",i,[i],{error:a},function(l){if(l)return c(l);u()})})}},null,!0)}});var V3e=m((DEr,dJ)=>{"use strict";var gvt=ot().objectIdSymbol,K3e=Ot();dJ.exports=function(e){e.post("init",function(){return lJ.call(this),this}),e.pre("save",function(n){U3e.call(this),n()}),e.pre("remove",function(n){U3e.call(this),n()}),e.post("save",function(){lJ.call(this)})};function U3e(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}dJ.exports.storeShard=lJ;function lJ(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!K3e.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,i;for(let s=0;s<n;++s)i=this.$__getValue(r[s]),i==null?e[r[s]]=i:K3e.isMongooseObject(i)?e[r[s]]=i.toObject({depopulate:!0,_isNested:!0}):i instanceof Date||i[gvt]?e[r[s]]=i:typeof i.valueOf=="function"?e[r[s]]=i.valueOf():e[r[s]]=i}});var z3e=m((kEr,H3e)=>{"use strict";var CE=ot().arrayAtomicsSymbol,pJ=ot().sessionNewDocuments,Evt=Ot();H3e.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[pJ]==null)&&!n[pJ].has(this)){let i={};this.isNew&&(i.isNew=!0),this.$__schema.options.versionKey&&(i.versionKey=this.get(this.$__schema.options.versionKey)),i.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),i.atomics=bvt(this),n[pJ].set(this,i)}})};function bvt(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let s of n){let o=t.$__getValue(s);if(o!=null&&Array.isArray(o)&&Evt.isMongooseDocumentArray(o)&&o.length&&o[CE]!=null&&Object.keys(o[CE]).length!==0){let a=e.get(s)||{};r.set(s,G3e(a,o[CE]))}}let i=t.$__dirty();for(let s of i){let o=s.path,a=s.value;if(a!=null&&a[CE]!=null&&Object.keys(a[CE]).length!==0){let u=e.get(o)||{};r.set(o,G3e(u,a[CE]))}}return r}function G3e(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var J3e=m((MEr,W3e)=>{"use strict";W3e.exports=function(e){e.pre("save",!1,function(i,s){let o=this;if(this.$isSubdocument)return i();let a=s&&typeof s=="object"&&"validateBeforeSave"in s,u;if(a?u=!!s.validateBeforeSave:u=this.$__schema.options.validateBeforeSave,u){let l=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;this.$validate(l).then(()=>{this.$op="save",i()},d=>{o.$__schema.s.hooks.execPost("save:error",o,[o],{error:d},function(p){o.$op="save",i(p)})})}else i()},null,!0)}});var fJ=m(iS=>{"use strict";iS.saveSubdocs=$3e();iS.sharding=V3e();iS.trackTransaction=z3e();iS.validateBeforeSave=J3e()});var X3e=m((NEr,Q3e)=>{"use strict";var Y3e=fJ();Q3e.exports=function(e){for(let r of Object.values(Y3e))r(e,{deduplicate:!0});e.plugins=Object.values(Y3e).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var tve=m((FEr,eve)=>{"use strict";var _vt=xO(),vvt=K0(),Svt=Vs(),wvt=Wp(),Z3e=dh();eve.exports=function t(e,r,n,i){let s=Object.keys(r),o=0,a=s.length,u;if(n=n||"",i=i||new WeakSet,!i.has(r)){for(i.add(r);o<a;)if(u=s[o++],!(!n&&(u==="discriminators"||u==="base"||u==="_applyDiscriminators"||u==="_userProvidedOptions"||u==="options"||u==="tree"))&&!(n==="tree"&&r!=null&&r.instanceOfSchema)&&!vvt.has(u)){if(e[u]==null)e[u]=r[u];else if(Z3e(r[u])){if(Z3e(e[u])||(e[u]={}),r[u]!=null){if(r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested||r[u].$isMongooseDocumentArrayElement&&e[u].$isMongooseDocumentArrayElement)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?_vt(e[u],r[u].clone(),!0):e[u]=r[u].clone();continue}else if(Svt(r[u],"ObjectId")){e[u]=new wvt(r[u]);continue}}t(e[u],r[u],n?n+"."+u:u,i)}}r!=null&&r.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var Mx=m((BEr,ive)=>{"use strict";var rve=z0(),Avt=X3e(),Cvt=zn(),Tvt=qO().defineKey,Ovt=ui(),hJ=Ot(),xvt=tve(),nve={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function Ivt(t,e){if(t.encryptionType()==null&&e.encryptionType()==null)return;let r=i(n(t),n(e));for(let s of r){if(t._hasEncryptedField(s)&&e._hasEncryptedField(s))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${s}`);if(t._hasEncryptedField(s)||e._hasEncryptedField(s))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${s}`)}function n(s){return[...Object.keys(s.paths),...Object.keys(s.singleNestedPaths)]}function*i(s,o){let a=new Set(s);for(let u of o)a.has(u)&&(yield u)}}ive.exports=function(e,r,n,i,s,o,a){if(!(n&&n.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(s){let p=Ovt(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!p})}else o||Avt(n);let u=e.schema.options.discriminatorKey,c=e.schema.path(u);if(c!=null)hJ.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let p={};p[u]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},p[u][e.schema.options.typeKey]=String,e.schema.add(p),Tvt({prop:u,prototype:e.prototype,options:e.schema.options})}if(n.path(u)&&n.path(u).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+u+'"');let l=r;(typeof i=="string"&&i.length||i!=null)&&(l=i),Ivt(e.schema,n);function d(p,f){p._baseSchema=f,f.paths._id&&f.paths._id.options&&!f.paths._id.options.auto&&p.remove("_id");let h=Object.keys(f.paths),g=[];for(let R of h){if(p.nested[R]){g.push(R);continue}if(R.indexOf(".")===-1)continue;let M=R.split(".").slice(0,-1),I="";for(let F of M)I+=(I.length?".":"")+F,(p.paths[I]instanceof rve||p.singleNestedPaths[I]instanceof rve)&&g.push(R)}p.obj={...p.obj},xvt(p,f),p._gatherChildSchemas();for(let R of g)delete p.paths[R];p.childSchemas.forEach(R=>{R.model.prototype.$__setSchema(R.schema)});let _={};_[u]={default:l,select:!0,set:function(R){if(R===l||Array.isArray(l)&&hJ.deepEqual(R,l))return l;throw new Error(`Can't set discriminator key "`+u+'"')},$skipDiscriminatorCheck:!0},_[u][p.options.typeKey]=c?c.options[p.options.typeKey]:String,p.add(_),p.discriminatorMapping={key:u,value:l,isRoot:!1},f.options.collection&&(p.options.collection=f.options.collection);let S=p.options.toJSON,w=p.options.toObject,C=p.options._id,A=p.options.id,O=Object.keys(p.options);p.options.discriminatorKey=f.options.discriminatorKey;let x=p._userProvidedOptions;for(let R of O)if(!nve[R]&&R in x&&!hJ.deepEqual(p.options[R],f.options[R]))throw new Error("Can't customize discriminator option "+R+" (can only modify "+Object.keys(nve).join(", ")+")");p.options=Cvt(f.options);for(let R of Object.keys(x))p.options[R]=x[R];S&&(p.options.toJSON=S),w&&(p.options.toObject=w),typeof C<"u"&&(p.options._id=C),p.options.id=A,o&&(p.s.hooks=e.schema.s.hooks.merge(p.s.hooks)),s&&(p.plugins=Array.prototype.slice.call(f.plugins)),p.callQueue=f.callQueue.concat(p.callQueue),delete p._requiredpaths}if(d(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:u,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!a)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var Px=m((qEr,sve)=>{"use strict";var Rvt=pc();sve.exports=function(e,r,n){let i=e.schema.options.discriminatorKey,s=r!=null&&r[i];if(s==null&&(s=n),e.discriminators&&s!=null)if(e.discriminators[s])e=e.discriminators[s];else{let o=Rvt(e.discriminators,s);o&&(e=o)}return e}});var mJ=m((LEr,ove)=>{"use strict";var Dvt=DW();ove.exports=function(e,r){return r==null||r._id==null||(e=e.clone(),r._id?e.paths._id||(Dvt(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var yJ=m((jEr,ave)=>{"use strict";var kvt=Qt(),Nx=class extends kvt{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(Nx.prototype,"name",{value:"InvalidSchemaOptionError"});ave.exports=Nx});var _J=m(($Er,dve)=>{"use strict";var uve=ho(),gJ=require("events").EventEmitter,Mvt=DO(),Pvt=q3e(),ny=Ci(),Nvt=NO(),Fvt=TO(),cve=Zv().castToNumber,Bvt=yo(),qvt=Mx(),EJ=ZW(),bJ=Px(),Lvt=mJ(),jvt=Il().internalToObjectOptions,$vt=hE(),Kvt=Ot(),Uvt=yJ(),Fx;dve.exports=Bi;function Bi(t,e,r){if(t.options.timeseries)throw new Uvt(e,"timeseries");let n=Bi.defaultOptions&&Bi.defaultOptions._id;n!=null&&(r=r||{},r._id=n),t=Lvt(t,r),this.caster=lve(t,null,r),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,ny.call(this,e,r,"Embedded")}Bi.prototype=Object.create(ny.prototype);Bi.prototype.constructor=Bi;Bi.prototype.OptionsConstructor=Pvt;function lve(t,e,r){Fx||(Fx=UO());let n=function(o,a,u){this.$__parent=u,Fx.apply(this,arguments),u!=null&&this.$session(u.$session())};t._preCompile();let i=e!=null?e.prototype:Fx.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.prototype.$__schemaTypeOptions=r,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new gJ,n.prototype.toBSON=function(){return this.toObject(jvt)};for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in gJ.prototype)n[s]=gJ.prototype[s];return n}var Dd={...ny.prototype.$conditionalHandlers};Dd.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};Dd.$near=Dd.$nearSphere=EJ.cast$near;Dd.$within=Dd.$geoWithin=EJ.cast$within;Dd.$geoIntersects=EJ.cast$geoIntersects;Dd.$minDistance=cve;Dd.$maxDistance=cve;Dd.$exists=Fvt;Object.defineProperty(Bi.prototype,"$conditionalHandlers",{enumerable:!1,value:Dd});Bi.prototype.cast=function(t,e,r,n,i){if(t&&t.$isSingleNested&&t.parent===e)return t;if(t!=null&&(typeof t!="object"||Array.isArray(t)))throw new Mvt(this.path,t);let s=this.schema.path(this.schema.options.discriminatorKey),o=s==null?null:s.getDefault(e),a=bJ(this.caster,t,o),u,c=e&&e.$__&&e.$__.selected,l=this.path,d=c==null?null:Object.keys(c).reduce((p,f)=>(f.startsWith(l+".")&&(p=p||{},p[f.substring(l.length+1)]=c[f]),p),null);if(r){u=new a(void 0,d,e,!1,{defaults:!1}),delete u.$__.defaults,i.path!=null&&(i={...i},delete i.path),u.$init(t,i);let p=$vt(d);Nvt(u,d,p)}else return i=Object.assign({},i,{priorDoc:n}),Object.keys(t).length===0?new a({},d,e,void 0,i):new a(t,d,e,void 0,i);return u};Bi.prototype.castForQuery=function(t,e,r,n){let i;if(t!=null){if(i=this.$conditionalHandlers[t],!i)throw new Error("Can't use "+t);return i.call(this,e)}if(e==null)return e;let s=bJ(this.caster,e);if(e instanceof s)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n!=null&&n.strict!=null?n.strict:void 0;try{e=new s(e,o)}catch(a){throw a instanceof uve?a:new uve("Embedded",e,this.path,a,this)}return e};Bi.prototype.doValidate=function(t,e,r,n){let i=bJ(this.caster,t);if(t&&!(t instanceof i)&&(t=new i(t,null,r!=null&&r.$__!=null?r:null)),n&&n.skipSchemaValidators)return t?t.validate().then(()=>e(null),s=>e(s)):e(null);ny.prototype.doValidate.call(this,t,function(s){if(s)return e(s);if(!t)return e(null);t.validate().then(()=>e(null),o=>e(o))},r,n)};Bi.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){let n=ny.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};Bi.prototype.discriminator=function(t,e,r){r=r||{};let n=Kvt.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&i&&(e=e.clone()),e=qvt(this.caster,t,e,n,null,null,r.overwriteExisting),this.caster.discriminators[t]=lve(e,this.caster),this.caster.discriminators[t]};Bi.defaultOptions={};Bi.set=ny.set;Bi.setters=[];Bi.get=ny.get;Bi.prototype.toJSON=function(){return{path:this.path,options:this.options}};Bi.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t._appliedDiscriminators=this._appliedDiscriminators,t};Bi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return{...this.schema.toJSONSchema(e),...Bvt("object","object",e?.useBsonType,r)}}});var fve=m((KEr,pve)=>{"use strict";var Vvt=Qt(),vJ=Ci(),Gvt=_J(),Hvt=Px();function sf(t,e){if(this.$parentSchemaType=e&&e.$parentSchemaType,!this.$parentSchemaType)throw new Vvt("Cannot create DocumentArrayElement schematype without a parent");delete e.$parentSchemaType,vJ.call(this,t,e,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}sf.schemaName="DocumentArrayElement";sf.defaultOptions={};sf.prototype=Object.create(vJ.prototype);sf.prototype.constructor=sf;sf.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};sf.prototype.doValidate=function(t,e,r,n){let i=Hvt(this.caster,t);return t&&!(t instanceof i)&&(t=new i(t,r,null,null,n&&n.index!=null?n.index:null)),Gvt.prototype.doValidate.call(this,t,e,r,n)};sf.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=vJ.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.caster=this.caster,t.schema=this.schema,t};pve.exports=sf});var yve=m((UEr,mve)=>{"use strict";var zvt=Ia(),sS=class extends zvt{},hve=cu();Object.defineProperty(sS.prototype,"excludeIndexes",hve);Object.defineProperty(sS.prototype,"_id",hve);mve.exports=sS});var Cve=m((VEr,Ave)=>{"use strict";var gve=ho(),Wvt=fve(),SJ=require("events").EventEmitter,AJ=vx(),Jvt=yve(),oS=Ci(),Eve=ey(),bve=yo(),Yvt=Mx(),_ve=mJ(),Qvt=$O(),Xvt=Yv(),TE=Ot(),Bx=Px(),Zvt=yJ(),vve=ot().arrayAtomicsSymbol,wJ=ot().arrayPathSymbol,eSt=ot().documentArrayParent,of,iy;function Bn(t,e,r,n){if(e.options&&e.options.timeseries)throw new Zvt(t,"timeseries");let i=Bn.defaultOptions&&Bn.defaultOptions._id;i!=null&&(n=n||{},n._id=i),n!=null&&n._id!=null?e=_ve(e,n):r!=null&&r._id!=null&&(e=_ve(e,r));let s=wve(e,r);s.prototype.$basePath=t,AJ.call(this,t,s,r),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=s,s.base=e.base;let o=this.defaultValue;(!("defaultValue"in this)||o!=null)&&this.default(function(){let u=o.call(this);return u!=null&&!Array.isArray(u)&&(u=[u]),u});let a=this;this.$embeddedSchemaType=new Wvt(t+".$",{...n||{},$parentSchemaType:a}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}Bn.schemaName="DocumentArray";Bn.options={castNonArrays:!0};Bn.prototype=Object.create(AJ.prototype);Bn.prototype.constructor=Bn;Bn.prototype.OptionsConstructor=Jvt;Object.defineProperty(Bn.prototype,"$conditionalHandlers",{enumerable:!1,value:{...AJ.prototype.$conditionalHandlers}});function wve(t,e,r){iy||(iy=mE());function n(){iy.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let i=r!=null?r.prototype:iy.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new SJ,n.base=t.base;for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in SJ.prototype)n[s]=SJ.prototype[s];return n.options=e,n}Bn.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=TE.getFunctionName(t)),r=r||{};let n=TE.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&i&&(e=e.clone()),e=Yvt(this.casterConstructor,t,e,n,null,null,r?.overwriteExisting);let s=wve(e,null,this.casterConstructor);s.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(s,"name",{value:t})}catch{}return this.casterConstructor.discriminators[t]=s,this.casterConstructor.discriminators[t]};Bn.prototype.doValidate=function(t,e,r,n){of||(of=Y0());let i=this;try{oS.prototype.doValidate.call(this,t,s,r)}catch(o){return e(o)}function s(o){if(o)return e(o);let a=t&&t.length,u;if(!a||n&&n.updateValidator)return e();TE.isMongooseDocumentArray(t)||(t=new of(t,i.path,r));function c(l){l!=null&&(u=l),--a||e(u)}for(let l=0,d=a;l<d;++l){let p=t[l];if(p==null){--a||e(u);continue}if(!(p instanceof iy)){let f=Bx(i.casterConstructor,t[l]);p=t[l]=new f(p,t,void 0,void 0,l)}if(n!=null&&n.validateModifiedOnly&&!p.$isModified()){--a||e(u);continue}p.$__validate(null,n,c)}}};Bn.prototype.doValidateSync=function(t,e,r){let n=oS.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let i=t&&t.length,s=null;if(i){for(let o=0,a=i;o<a;++o){let u=t[o];if(!u)continue;if(!(u instanceof iy)){let l=Bx(this.casterConstructor,t[o]);u=t[o]=new l(u,t,void 0,void 0,o)}if(r!=null&&r.validateModifiedOnly&&!u.$isModified())continue;let c=u.validateSync(r);c&&s==null&&(s=c)}return s}};Bn.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r&&r.skipCast)return n;of||(of=Y0()),Array.isArray(n)||(n=[n]),n=new of(n,this.path,t);for(let i=0;i<n.length;++i){let s=Bx(this.casterConstructor,n[i]),o=new s({},n,void 0,void 0,i);o.$init(n[i]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[i]=o}return n};var tSt=Object.freeze({transform:!1,virtuals:!1}),Sve=Object.freeze({skipId:!1,willInit:!0});Bn.prototype.cast=function(t,e,r,n,i){if(of||(of=Y0()),t!=null&&t[wJ]!=null&&t===n)return t;let s,o;i=i||{};let a=i.path||this.path;if(!Array.isArray(t)){if(!r&&!Bn.options.castNonArrays)throw new gve("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(a),this.cast([t],e,r,n,i)}(!i.skipDocumentArrayCast||TE.isMongooseDocumentArray(t))&&(t=new of(t,a,e,this)),n!=null&&(t[vve]=n[vve]||{}),i.arrayPathIndex!=null&&(t[wJ]=a+"."+i.arrayPathIndex);let u=TE.isMongooseDocumentArray(t)?t.__array:t,c=u.length;for(let l=0;l<c;++l){if(!u[l])continue;let d=Bx(this.casterConstructor,u[l]),p=Qvt(u[l],!0);if(u[l]!==p&&(u[l]=p),u[l]instanceof iy){if(u[l][eSt]!==e)if(r){let f=new d(null,t,Sve,s,l);u[l]=f.$init(u[l])}else{let f=new d(u[l],t,void 0,void 0,l);u[l]=f}u[l].__index==null&&u[l].$setIndex(l)}else if(u[l]!=null)if(r)e?s||(s=rSt(this,e.$__.selected,r)):s=!0,o=new d(null,t,Sve,s,l),u[l]=o.$init(u[l],i);else if(n&&typeof n.id=="function"&&(o=n.id(u[l]._id)),n&&o&&TE.deepEqual(o.toObject(tSt),u[l]))o.set(u[l]),u[l]=o;else try{o=new d(u[l],t,void 0,void 0,l),u[l]=o}catch(f){throw new gve("embedded",u[l],t[wJ],f,this)}}return t};Bn.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e._appliedDiscriminators=this._appliedDiscriminators,e};Bn.prototype.applyGetters=function(t,e){return oS.prototype.applyGetters.call(this,t,e)};function rSt(t,e,r){if(!(r&&e))return;let n=t.path+".",i=Object.keys(e),s=i.length,o={},a,u,c;for(;s--;)if(u=i[s],u.startsWith(n)){if(c=u.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),a||(a=!0),o[c]=e[u]}return a&&o||void 0}Bn.defaultOptions={};Bn.set=oS.set;Bn.setters=[];Bn.get=oS.get;Bn.prototype.$conditionalHandlers.$elemMatch=nSt;function nSt(t,e){let r=Object.keys(t),n=r.length;for(let a=0;a<n;++a){let u=r[a],c=t[u];Xvt(u)&&c!=null&&(t[u]=this.castForQuery(u,c,e))}let i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,s=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(i!=null&&t[i]!=null&&s[t[i]]!=null)return Eve(s[t[i]],t,null,this&&this.$$context);let o=this.casterConstructor.schema??e.schema;return Eve(o,t,null,this&&this.$$context)}Bn.prototype.toJSONSchema=function(e){let r=bve("object","object",e?.useBsonType,!1),n=this.options.required&&typeof this.options.required!="function";return{...bve("array","array",e?.useBsonType,n),items:{...r,...this.schema.toJSONSchema(e)}}};Ave.exports=Bn});var xve=m((GEr,Ove)=>{"use strict";var Tve=require("assert"),CJ=fa(),iSt=Vs();Ove.exports=function(e){if(e==null||e==="")return null;let r;if(iSt(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=CJ.Double.fromString(e),r}catch{Tve.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=CJ.Double.fromString(e),r}catch{Tve.ok(!1)}else r=Number(n)}else r=Number(e);return new CJ.Double(r)}});var Rve=m((HEr,Ive)=>{"use strict";var sSt=ho(),OE=Ci(),oSt=xve(),aSt=yo();function qi(t,e){OE.call(this,t,e,"Double")}qi.schemaName="Double";qi.defaultOptions={};qi.prototype=Object.create(OE.prototype);qi.prototype.constructor=qi;qi._cast=oSt;qi.set=OE.set;qi.setters=[];qi.get=OE.get;qi._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};qi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};qi._checkRequired=t=>t!=null;qi.checkRequired=OE.checkRequired;qi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};qi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=qi.cast();try{return e(t)}catch(r){throw new sSt("Double",t,this.path,r,this)}};function qx(t){return this.cast(t)}var uSt={...OE.prototype.$conditionalHandlers,$gt:qx,$gte:qx,$lt:qx,$lte:qx};Object.defineProperty(qi.prototype,"$conditionalHandlers",{enumerable:!1,value:uSt});qi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return aSt("number","double",e?.useBsonType,r)};qi.prototype.autoEncryptionType=function(){return"double"};Ive.exports=qi});var kve=m((zEr,Dve)=>{"use strict";var cSt=Vs(),lSt=require("assert");Dve.exports=function(e){if(e==null)return e;if(e==="")return null;let r=cSt(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;lSt.ok(!1)}});var Nve=m((WEr,Pve)=>{"use strict";var Mve=ho(),xE=Ci(),dSt=kve(),pSt=yo(),Lx=Xv();function Oi(t,e){xE.call(this,t,e,"Int32")}Oi.schemaName="Int32";Oi.defaultOptions={};Oi.prototype=Object.create(xE.prototype);Oi.prototype.constructor=Oi;Oi._cast=dSt;Oi.set=xE.set;Oi.setters=[];Oi.get=xE.get;Oi._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};Oi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Oi._checkRequired=t=>t!=null;Oi.checkRequired=xE.checkRequired;Oi.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Oi.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Oi.cast();try{return e(t)}catch(r){throw new Mve("Int32",t,this.path,r,this)}};var fSt={...xE.prototype.$conditionalHandlers,$gt:jx,$gte:jx,$lt:jx,$lte:jx,$bitsAllClear:Lx,$bitsAnyClear:Lx,$bitsAllSet:Lx,$bitsAnySet:Lx};Object.defineProperty(Oi.prototype,"$conditionalHandlers",{enumerable:!1,value:fSt});function jx(t,e){return this.castForQuery(null,t,e)}Oi.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof Mve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Oi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return pSt("number","int",e?.useBsonType,r)};Oi.prototype.autoEncryptionType=function(){return"int"};Pve.exports=Oi});var Bve=m((JEr,Fve)=>{"use strict";var hSt=Ia(),$x=class extends hSt{},mSt=cu();Object.defineProperty($x.prototype,"of",mSt);Fve.exports=$x});var jve=m((YEr,Lve)=>{"use strict";var TJ=px(),ySt=Bve(),qve=Ci(),gSt=yo();var IE=class extends qve{constructor(e,r){super(e,r,"Map"),this.$isSchemaMap=!0}set(e,r){return qve.set(e,r)}cast(e,r,n,i,s){if(e instanceof TJ)return e;let o=this.path;if(n){let a=new TJ({},o,r,this.$__schemaType,s),u=a.$__pathRelativeToParent!=null?a.$__pathRelativeToParent:a.$__path;if(e instanceof global.Map)for(let c of e.keys()){let l=e.get(c);l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}else for(let c of Object.keys(e)){let l=e[c];l==null?l=a.$__schemaType._castNullish(l):l=a.$__schemaType.cast(l,r,!0,null,{...s,path:u+"."+c}),a.$init(c,l)}return a}return new TJ(e,o,r,this.$__schemaType,s)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(e){let r=e?.useBsonType,n=this.getEmbeddedSchemaType(),i=this.options.required&&typeof this.options.required!="function",s=gSt("object","object",r,i);return s.additionalProperties=n.toJSONSchema(e),s}autoEncryptionType(){return"object"}};IE.schemaName="Map";IE.prototype.OptionsConstructor=ySt;IE.defaultOptions={};Lve.exports=IE});var Uve=m((QEr,Kve)=>{"use strict";var ESt=Ia(),aS=class extends ESt{},$ve=cu();Object.defineProperty(aS.prototype,"auto",$ve);Object.defineProperty(aS.prototype,"populate",$ve);Kve.exports=aS});var zve=m((XEr,Hve)=>{"use strict";var bSt=Uve(),af=Ci(),_St=sW(),vSt=yo(),SSt=$o(),xJ=Wp(),IJ=Vs(),Vve=Ot(),wSt=af.CastError,OJ;function Wn(t,e){let r=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),n=e&&e.suppressWarning;(r||typeof t>"u")&&!n&&Vve.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),af.call(this,t,e,"ObjectId")}Wn.schemaName="ObjectId";Wn.defaultOptions={};Wn.prototype=Object.create(af.prototype);Wn.prototype.constructor=Wn;Wn.prototype.OptionsConstructor=bSt;Wn.get=af.get;Wn.set=af.set;Wn.setters=[];Wn.prototype.auto=function(t){return t&&(this.default(Gve),this.set(CSt)),this};Wn._checkRequired=t=>IJ(t,"ObjectId");Wn._cast=_St;Wn.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Wn._defaultCaster=t=>{if(!IJ(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};Wn.checkRequired=af.checkRequired;Wn.prototype.checkRequired=function(e,r){return af._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Wn.checkRequired())(e)};Wn.prototype.cast=function(t,e,r,n,i){if(!IJ(t,"ObjectId")&&af._isRef(this,t,e,r)){if((SSt(t)||"").toLowerCase()==="objectid")return new xJ(t.toHexString());if(t==null||Vve.isNonBuiltinObject(t))return this._castRef(t,e,r,i)}let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Wn.cast();try{return s(t)}catch(o){throw new wSt("ObjectId",t,this.path,o,this)}};function Kx(t){return this.cast(t)}var ASt={...af.prototype.$conditionalHandlers,$gt:Kx,$gte:Kx,$lt:Kx,$lte:Kx};Object.defineProperty(Wn.prototype,"$conditionalHandlers",{enumerable:!1,value:ASt});function Gve(){return new xJ}Gve.$runBeforeSetters=!0;function CSt(t){return OJ||(OJ=dc()),this instanceof OJ&&t===void 0?new xJ:t}Wn.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return vSt("string","objectId",e?.useBsonType,r)};Wn.prototype.autoEncryptionType=function(){return"objectId"};Hve.exports=Wn});var Jve=m((ZEr,Wve)=>{"use strict";var TSt=Ia(),du=class extends TSt{},kd=cu();Object.defineProperty(du.prototype,"enum",kd);Object.defineProperty(du.prototype,"match",kd);Object.defineProperty(du.prototype,"lowercase",kd);Object.defineProperty(du.prototype,"trim",kd);Object.defineProperty(du.prototype,"uppercase",kd);Object.defineProperty(du.prototype,"minLength",kd);Object.defineProperty(du.prototype,"minlength",kd);Object.defineProperty(du.prototype,"maxLength",kd);Object.defineProperty(du.prototype,"maxlength",kd);Object.defineProperty(du.prototype,"populate",kd);Wve.exports=du});var RJ=m((ebr,Zve)=>{"use strict";var uf=Ci(),cS=Oa(),OSt=Jve(),xSt=mx(),ISt=yo(),Yve=Ot(),RSt=Vs(),Xve=uf.CastError;function Sr(t,e){this.enumValues=[],this.regExp=null,uf.call(this,t,e,"String")}Sr.schemaName="String";Sr.defaultOptions={};Sr.prototype=Object.create(uf.prototype);Sr.prototype.constructor=Sr;Object.defineProperty(Sr.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:OSt});Sr._cast=xSt;Sr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Sr._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};Sr.get=uf.get;Sr.set=uf.set;Sr.setters=[];Sr._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;Sr.checkRequired=uf.checkRequired;Sr.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;Yve.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=Yve.object.vals(arguments[0]),e=cS.messages.String.enum):(t=arguments,e=cS.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};Sr.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};Sr.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};Sr.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};Sr.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||cS.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};Sr.prototype.minLength=Sr.prototype.minlength;Sr.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||cS.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};Sr.prototype.maxLength=Sr.prototype.maxlength;Sr.prototype.match=function(e,r){let n=r||cS.messages.String.match,i=function(s){return e?(e.lastIndex=0,s!=null&&s!==""?e.test(s):!0):!1};return this.validators.push({validator:i,message:n,type:"regexp",regexp:e}),this};Sr.prototype.checkRequired=function(e,r){return typeof e=="object"&&uf._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Sr.checkRequired())(e)};Sr.prototype.cast=function(t,e,r,n,i){if(typeof t!="string"&&uf._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Sr.cast();try{return s(t)}catch{throw new Xve("string",t,this.path,null,this)}};function uS(t,e){return this.castForQuery(null,t,e)}function DSt(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Qve(t){return t==null?this._castNullish(t):this.cast(t,this)}var kSt={...uf.prototype.$conditionalHandlers,$all:DSt,$gt:uS,$gte:uS,$lt:uS,$lte:uS,$options:Qve,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:Qve.call(this,e)},$not:uS};Object.defineProperty(Sr.prototype,"$conditionalHandlers",{enumerable:!1,value:kSt});Sr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||RSt(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(i){throw i instanceof Xve&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Sr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return ISt("string","string",e?.useBsonType,r)};Sr.prototype.autoEncryptionType=function(){return"string"};Zve.exports=Sr});var tSe=m((tbr,MJ)=>{"use strict";var kJ=dE(),DJ=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,MSt=kJ.Binary;MJ.exports=function(e){if(e==null)return e;function r(n){let i=new kJ(n);return i._subtype=4,i}if(typeof e=="string"){if(DJ.test(e))return eSe(e);throw new Error(`"${e}" is not a valid UUID string`)}if(Buffer.isBuffer(e))return r(e);if(e instanceof MSt)return r(e.value(!0));if(e.toString&&e.toString!==Object.prototype.toString&&DJ.test(e.toString()))return eSe(e.toString());throw new Error(`"${e}" cannot be casted to a UUID`)};MJ.exports.UUID_FORMAT=DJ;function PSt(t){return t!=null&&Buffer.from(t,"hex")}function eSe(t){typeof t!="string"&&(t="");let e=t.replace(/[{}-]/g,""),r=PSt(e),n=new kJ(r);return n._subtype=4,n}});var oSe=m((rbr,sSe)=>{"use strict";var NSt=dE(),bh=Ci(),rSe=bh.CastError,nSe=tSe(),FSt=yo(),iSe=Ot(),Ux=Xv(),BSt=nSe.UUID_FORMAT,qSt=NSt.Binary;function Vx(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function xi(t,e){bh.call(this,t,e,"UUID"),this.getters.push(function(r){return r!=null&&r.$__!=null?r:Buffer.isBuffer(r)?Vx(r):r instanceof qSt?Vx(r.buffer):iSe.isPOJO(r)&&r.type==="Buffer"&&Array.isArray(r.data)?Vx(Buffer.from(r.data)):r})}xi.schemaName="UUID";xi.defaultOptions={};xi.prototype=Object.create(bh.prototype);xi.prototype.constructor=xi;xi._cast=nSe;xi.get=bh.get;xi.set=bh.set;xi.setters=[];xi.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};xi._checkRequired=t=>t!=null;xi.checkRequired=bh.checkRequired;xi.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=Vx(e)),e!=null&&BSt.test(e)};xi.prototype.cast=function(t,e,r,n,i){if(iSe.isNonBuiltinObject(t)&&bh._isRef(this,t,e,r))return this._castRef(t,e,r,i);let s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=xi.cast();try{return s(t)}catch(o){throw new rSe(xi.schemaName,t,this.path,o,this)}};function lS(t){return this.cast(t)}function PJ(t){return t.map(e=>this.cast(e))}var LSt={...bh.prototype.$conditionalHandlers,$bitsAllClear:Ux,$bitsAnyClear:Ux,$bitsAllSet:Ux,$bitsAnySet:Ux,$all:PJ,$gt:lS,$gte:lS,$in:PJ,$lt:lS,$lte:lS,$ne:lS,$nin:PJ};Object.defineProperty(xi.prototype,"$conditionalHandlers",{enumerable:!1,value:LSt});xi.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof rSe&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};xi.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return FSt("string","binData",e?.useBsonType,r)};xi.prototype.autoEncryptionType=function(){return"binData"};sSe.exports=xi});var uSe=m((nbr,aSe)=>{"use strict";var jSt=Ia(),Gx=class extends jSt{},$St=cu();Object.defineProperty(Gx.prototype,"of",$St);aSe.exports=Gx});var lSe=m((ibr,cSe)=>{"use strict";var KSt=uSe(),USt=Ci(),RE=Symbol("firstValue");var DE=class extends USt{constructor(e,r,n={}){if(super(e,r,"Union"),!r||!Array.isArray(r.of)||r.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=r.of.map(i=>r.parentSchema.interpretAsType(e,i,n))}cast(e,r,n,i,s){let o=RE,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u].cast(e,r,n,i,s);if(c===e)return c;o===RE&&(o=c)}catch(c){a=c}if(o!==RE)return o;throw a}applySetters(e,r,n,i,s){let o=RE,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u]._applySetters(e,r,n,i,s);if(c==null?c=this.schemaTypes[u]._castNullish(c):c=this.schemaTypes[u].cast(c,r,n,i,s),c===e)return c;o===RE&&(o=c)}catch(c){a=c}if(o!==RE)return o;throw a}clone(){let e=super.clone();return e.schemaTypes=this.schemaTypes.map(r=>r.clone()),e}};DE.schemaName="Union";DE.defaultOptions={};DE.prototype.OptionsConstructor=KSt;cSe.exports=DE});var Qv=m(tn=>{"use strict";tn.Array=vx();tn.BigInt=m3e();tn.Boolean=E3e();tn.Buffer=w3e();tn.Date=D3e();tn.Decimal128=tn.Decimal=N3e();tn.DocumentArray=Cve();tn.Double=Rve();tn.Int32=Nve();tn.Map=jve();tn.Mixed=z0();tn.Number=JW();tn.ObjectId=zve();tn.String=RJ();tn.Subdocument=_J();tn.UUID=oSe();tn.Union=lSe();tn.Oid=tn.ObjectId;tn.Object=tn.Mixed;tn.Bool=tn.Boolean;tn.ObjectID=tn.ObjectId});var Q0=m((LJ,vSe)=>{"use strict";var VSt=require("events").EventEmitter,GSt=U0(),cf=Qt(),BJ=Ci(),dSe=Ia(),HSt=IW(),qJ=ux(),pSe=DW(),Ws=zn(),fSe=ui(),zSt=$o(),WSt=Z_e(),Wx=PW(),JSt=r4e(),hSe=i4e(),YSt=xO(),Hx=lu(),QSt=o4e(),XSt=y4e(),rn=Ot(),ZSt=E4e(),ewt=/\.\d+(\.|$)/,_h,twt=lx().queryMiddlewareFunctions,rwt=dx().middlewareFunctions,mSe=twt.concat(rwt).reduce((t,e)=>t.add(e),new Set),NJ=rn.isPOJO,ySe=0,nwt=/^\d+$/;function Be(t,e){if(!(this instanceof Be))return new Be(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++ySe,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new GSt},this.options=this.defaultOptions(e),Array.isArray(t))for(let i of t)this.add(i);else t&&this.add(t);if(e&&e.virtuals){let i=e.virtuals,s=Object.keys(i);for(let o of s){let a=i[o].options?i[o].options:void 0,u=this.virtual(o,a);i[o].get&&u.get(i[o].get),i[o].set&&u.set(i[o].set)}}let r=t&&t._id&&rn.isObject(t._id);!this.paths._id&&this.options._id&&!r&&pSe(this),this.setupTimestamp(this.options.timestamps)}function gSe(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let s=fSe(t.paths[r],"options");if(s==null)continue;n=s.alias}if(!n)continue;let i=t.paths[r].path;if(Array.isArray(n)){for(let s of n){if(typeof s!="string")throw new Error("Invalid value for alias option on "+i+", got "+s);t.aliases[s]=i,t.virtual(s).get((function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}})(i)).set((function(o){return function(a){return this.$set(o,a)}})(i))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+i+", got "+n);t.aliases[n]=i,t.virtual(n).get((function(s){return function(){return typeof this.get=="function"?this.get(s):this[s]}})(i)).set((function(s){return function(o){return this.$set(s,o)}})(i))}}Be.prototype=Object.create(VSt.prototype);Be.prototype.constructor=Be;Be.prototype.instanceOfSchema=!0;Object.defineProperty(Be.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(Be.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(Be.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});Be.prototype.obj;Be.prototype.paths;Be.prototype.tree;Be.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};Be.prototype._clone=function(e){e=e||(this.base==null?Be:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=Ws(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=Ws(this.methods),r.methodOptions=Ws(this.methodOptions),r.statics=Ws(this.statics),r.query=Ws(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=Ws(this._indexes),r._searchIndexes=Ws(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=Ws(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,i])=>[n,i.clone()])),r.nested=Ws(this.nested),r.subpaths=Ws(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let i=n.path;for(let s of Object.keys(n.schema.paths))r.singleNestedPaths[i+"."+s]=n.schema.paths[s];for(let s of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[i+"."+s]=n.schema.singleNestedPaths[s];for(let s of Object.keys(n.schema.subpaths))r.singleNestedPaths[i+"."+s]=n.schema.subpaths[s];for(let s of Object.keys(n.schema.nested))r.singleNestedPaths[i+"."+s]="nested"}return r._gatherChildSchemas(),r.virtuals=Ws(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++ySe,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r.encryptedFields=Ws(this.encryptedFields),r};Be.prototype.pick=function(t,e){let r=new Be({},e||this.options);if(!Array.isArray(t))throw new cf('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this._hasEncryptedField(n)){let i=this.encryptedFields[n],s=this.path(n);r.add({[n]:{encrypt:i,[this.options.typeKey]:s}})}else if(this.nested[n])r.add({[n]:fSe(this.tree,n)});else{let i=this.path(n);if(i==null)throw new cf("Path `"+n+"` is not in the schema");r.add({[n]:i})}return this._hasEncryptedFields()||(r.options.encryptionType=null),r};Be.prototype.omit=function(t,e){let r=new Be(this,e||this.options);if(!Array.isArray(t))throw new cf('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};Be.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:Ws(t);let e=this.base&&this.base.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,i="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:i,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new cf("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=Wx(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:Wx(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new cf("Must set `versionKey` if using `optimisticConcurrency`");return t};Be.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};Be.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base&&this.base.options&&this.base.options[e]||{},n=this.options[e]||{},i=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=i,i};Be.prototype.encryptionType=function(t){if(arguments.length===0)return this.options.encryptionType;if(!(typeof t=="string"||t===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=t};Be.prototype.add=function(e,r){if(e instanceof Be||e!=null&&e.instanceOfSchema)return YSt(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),i=this.options.typeKey;for(let o of n){if(rn.specialProperties.has(o))continue;let a=r+o,u=e[o];if(u==null)throw new TypeError("Invalid value for schema path `"+a+'`, got value "'+u+'"');if(o==="_id"&&u===!1)continue;let c=!1;if(typeof u=="string"){let l=this.base!=null?this.base.Schema.Types:Be.Types,d=u.charAt(0).toUpperCase()+u.substring(1);c=l[d]!=null}if(o!=="_id"&&(typeof u!="object"&&typeof u!="function"&&!c||u==null))throw new TypeError(`Invalid schema configuration: \`${u}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(u instanceof qJ||(u.constructor&&u.constructor.name||null)==="VirtualType"){this.virtual(u);continue}if(Array.isArray(u)&&u.length===1&&u[0]==null)throw new TypeError("Invalid value for schema Array path `"+a+'`, got value "'+u[0]+'"');if(NJ(u)||u instanceof dSe)if(Object.keys(u).length<1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(a,u);else if(!u[i]||i==="type"&&NJ(u.type)&&u.type.type)this.nested[a]=!0,this.add(u,a+".");else{let l=u[i];if(NJ(l)&&Object.keys(l).length>0){r&&(this.nested[r.substring(0,r.length-1)]=!0);let d={};this._userProvidedOptions.typeKey&&(d.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(d.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(d.toObject=rn.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(d.toJSON=rn.omit(this._userProvidedOptions.toJSON,["transform"]));let p=new Be(l,d);p.$implicitlyCreated=!0;let f=Object.assign({},u,{[i]:p});this.path(r+o,f)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u!=null&&!u.instanceOfSchema&&rn.isPOJO(u.discriminators)){let d=this.path(r+o);for(let p in u.discriminators)d.discriminator(p,u.discriminators[p])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),u[0]!=null&&!u[0].instanceOfSchema&&rn.isPOJO(u[0].discriminators)){let l=this.path(r+o);for(let d in u[0].discriminators)l.discriminator(d,u[0].discriminators[d])}if(u.instanceOfSchema&&u.encryptionType()!=null){if(this.encryptionType()!=u.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[l,d]of Object.entries(u.encryptedFields)){let p=a+"."+l;this._addEncryptedField(p,d)}}else if(typeof u=="object"&&"encrypt"in u){let{encrypt:l}=u;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(a,l)}else this._removeEncryptedField(a)}let s=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return gSe(this,s),this};Be.prototype._addEncryptedField=function(e,r){if(this.path(e).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${e}'`);this.encryptedFields[e]=Ws(r)};Be.prototype._removeEncryptedField=function(e){delete this.encryptedFields[e]};Be.prototype._hasEncryptedFields=function(){return Object.keys(this.encryptedFields).length>0};Be.prototype._hasEncryptedField=function(e){return e in this.encryptedFields};Be.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([e,r])=>{let n=this.path(e).autoEncryptionType();return{path:e,bsonType:n,...r}})}};Be.prototype._buildSchemaMap=function(){function t(n,i,s){let o=0,a=n[o];for(;o<n.length-1;++o,a=n[o])i[a]=i[a]==null?{bsonType:"object",properties:{}}:i[a],i=i[a].properties;i[a]=s}let e=(n,[i,s])=>{let o=this.path(i).autoEncryptionType(),a=i.split("."),u={encrypt:{...s,bsonType:o}};return t(a,n,u),n};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(e,{})}};Be.prototype.alias=function(t,e){return gSe(this,{[t]:e}),this};Be.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)hSe(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};Be.prototype.clearIndexes=function(){return this._indexes.length=0,this};Be.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};Be.reserved=Object.create(null);Be.prototype.reserved=Be.reserved;var zs=Be.reserved;zs.prototype=zs.emit=zs.listeners=zs.removeListener=zs.collection=zs.errors=zs.get=zs.init=zs.isModified=zs.isNew=zs.populated=zs.remove=zs.save=zs.toObject=zs.validate=1;zs.collection=1;Be.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let u=ESe(t),c=iwt(this,t,u);if(c!=null)return c;let l=bSe(this,t);return l??(c=this.hasMixedParent(u),c??(ewt.test(t)?owt(this,t,u):void 0))}let r=t.split(".")[0];if(zs[r]&&!this.options.suppressReservedKeysWarning){let u=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;rn.warn(u)}typeof e=="object"&&rn.hasUserDefinedProperty(e,"ref")&&ZSt(e.ref,t);let n=t.split(/\./),i=n.pop(),s=this.tree,o="";for(let u of n){if(rn.specialProperties.has(u))throw new Error("Cannot set special property `"+u+"` on a schema");if(o=o+=(o.length>0?".":"")+u,s[u]||(this.nested[o]=!0,s[u]={}),typeof s[u]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+s[u].name+".";throw new Error(c)}s=s[u]}s[i]=Ws(e),this.paths[t]=this.interpretAsType(t,e,this.options);let a=this.paths[t];if(this.childSchemas=this.childSchemas.filter(u=>u.path!==t),a.$isSchemaMap){let u=t+".$*";this.paths[u]=a.$__schemaType,this.mapPaths.push(this.paths[u]),a.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:a.$__schemaType.schema,model:a.$__schemaType.caster,path:t})}if(a.$isSingleNested){for(let u of Object.keys(a.schema.paths))this.singleNestedPaths[t+"."+u]=a.schema.paths[u];for(let u of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+"."+u]=a.schema.singleNestedPaths[u];for(let u of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+"."+u]=a.schema.subpaths[u];for(let u of Object.keys(a.schema.nested))this.singleNestedPaths[t+"."+u]="nested";Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.caster.base=this.base,this.childSchemas.push({schema:a.schema,model:a.caster,path:t})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.casterConstructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.casterConstructor,path:t}));if(a.$isMongooseArray&&a.caster instanceof BJ){let u=t,c=a,l=[];for(;c.$isMongooseArray;)u=u+".$",c.$isMongooseDocumentArray?(c.$embeddedSchemaType._arrayPath=u,c.$embeddedSchemaType._arrayParentPath=t,c=c.$embeddedSchemaType):(c.caster._arrayPath=u,c.caster._arrayParentPath=t,c=c.caster),this.subpaths[u]=c;for(let d of l)this.subpaths[d.path]=d}if(a.$isMongooseDocumentArray){for(let u of Object.keys(a.schema.paths)){let c=a.schema.paths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.subpaths)){let c=a.schema.subpaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.singleNestedPaths)){let c=a.schema.singleNestedPaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}}return this};Be.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.caster,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.caster,path:r})}return this.childSchemas=e,e};function iwt(t,e,r){if(t.paths.hasOwnProperty(e))return t.paths[e];if(t.subpaths.hasOwnProperty(r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(t.singleNestedPaths.hasOwnProperty(r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function ESe(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function bSe(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path.replace(/\.\$\*/g,"");if(e===n||e.startsWith(n+".")&&e.slice(n.length+1).indexOf(".")===-1)return r;if(r.schema&&e.startsWith(n+".")){let i=e.slice(n.length+1);return i=i.slice(i.indexOf(".")+1),r.schema.paths[i]}else if(r.$isSchemaMap&&e.startsWith(n+".")){let i=e.slice(n.length+1);i=i.slice(i.indexOf(".")+1);let s=r.$__schemaType._presplitPath;if(i.indexOf(".")===-1&&s[s.length-1]==="$*")return r.$__schemaType;if(i.indexOf(".")!==-1&&r.$__schemaType.schema&&s[s.length-1]==="$*")return r.$__schemaType.schema.path(i.slice(i.indexOf(".")+1))}}return null}Object.defineProperty(Be.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});Be.prototype.interpretAsType=function(t,e,r){if(e instanceof BJ){if(e.path===t)return e;let u=e.clone();return u.path=t,u}let n=this.base!=null?this.base.Schema.Types:Be.Types,i=this.base!=null?this.base.Types:EE();if(!rn.isPOJO(e)&&!(e instanceof dSe)&&rn.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let s=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{};if(s instanceof BJ){if(s.path===t)return s;let u=s.clone();return u.path=t,u}let o;if(rn.isPOJO(s)||s==="mixed")return new n.Mixed(t,e);if(Array.isArray(s)||s===Array||s==="array"||s===n.Array){let u=s===Array||s==="array"?e.cast||e.of:s[0];if(u&&u.instanceOfSchema){if(!(u instanceof Be))if(this.options._isMerging)u=new Be(u);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u,e)}if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema){if(!(u[r.typeKey]instanceof Be))if(this.options._isMerging)u[r.typeKey]=new Be(u[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u[r.typeKey],e,u)}if(typeof u<"u"&&(Array.isArray(u)||u.type===Array||u.type=="Array"))return u&&u.type=="Array"&&(u.type=Array),new n.Array(t,this.interpretAsType(t,u,r),e);let c=u!=null&&u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u;if(typeof u=="string")u=n[u.charAt(0).toUpperCase()+u.substring(1)];else if(rn.isPOJO(c))if(Object.keys(c).length){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),r.hasOwnProperty("strict")&&(l.strict=r.strict),r.hasOwnProperty("strictQuery")&&(l.strictQuery=r.strictQuery),r.hasOwnProperty("toObject")&&(l.toObject=rn.omit(r.toObject,["transform"])),r.hasOwnProperty("toJSON")&&(l.toJSON=rn.omit(r.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?l._id=this._userProvidedOptions._id:Be.Types.DocumentArray.defaultOptions._id!=null&&(l._id=Be.Types.DocumentArray.defaultOptions._id);let d=new Be(c,l);return d.$implicitlyCreated=!0,new n.DocumentArray(t,d,e)}else return new n.Array(t,n.Mixed,e);if(u){if(s=u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u,Array.isArray(s))return new n.Array(t,this.interpretAsType(t,s,r),e);if(o=typeof s=="string"?s:s.schemaName||rn.getFunctionName(s),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!n.hasOwnProperty(o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new n.Array(t,u||n.Mixed,e,r)}if(s&&s.instanceOfSchema)return new n.Subdocument(s,t,e);if(Buffer.isBuffer(s)?o="Buffer":typeof s=="function"||typeof s=="object"?o=s.schemaName||rn.getFunctionName(s):s===i.ObjectId?o="ObjectId":s===i.Decimal128?o="Decimal128":o=s==null?""+s:s.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);o==="Union"&&(e.parentSchema=this);let a=new n[o](t,e,r);return a.$isSchemaMap&&swt(this,a,t,e,r),a};function swt(t,e,r,n,i){let s=r+".$*",o={type:{}};rn.hasUserDefinedProperty(n,"of")&&(rn.isPOJO(n.of)&&Object.keys(n.of).length>0&&!rn.hasUserDefinedProperty(n.of,t.options.typeKey)?o={[t.options.typeKey]:new Be(n.of)}:rn.isPOJO(n.of)?o=Object.assign({},n.of):o={[t.options.typeKey]:n.of},o[t.options.typeKey]&&o[t.options.typeKey].instanceOfSchema&&o[t.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new cf('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),rn.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),e.$__schemaType=t.interpretAsType(s,o,i)}Be.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};Be.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,i=[];for(;n--;){let s=r[n];this.paths[s].isRequired&&i.push(s)}return this._requiredpaths=i,this._requiredpaths};Be.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};Be.prototype.pathType=function(t){if(this.paths.hasOwnProperty(t))return"real";if(this.virtuals.hasOwnProperty(t))return"virtual";if(this.nested.hasOwnProperty(t))return"nested";let e=ESe(t);if(this.subpaths.hasOwnProperty(e)||this.subpaths.hasOwnProperty(t))return"real";let r=this.singleNestedPaths.hasOwnProperty(e)||this.singleNestedPaths.hasOwnProperty(t);return r?r==="nested"?"nested":"real":bSe(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?_Se(this,t,e):"adhocOrUndefined"};Be.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],this.paths.hasOwnProperty(t)&&this.paths[t]instanceof _h.Mixed)return this.paths[t];return null};Be.prototype.setupTimestamp=function(t){return XSt(this,t)};function _Se(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return t.paths.hasOwnProperty(n[0])?t.paths[n[0]]:"adhocOrUndefined";let i=t.path(n[0]),s=!1;if(!i)return"adhocOrUndefined";let o=n.length-1;for(let a=1;a<n.length;++a){s=!1;let u=n[a];if(a===o&&i&&!/\D/.test(u)){i.$isMongooseDocumentArray?i=i.$embeddedSchemaType:i instanceof _h.Array?i=i.caster:i=void 0;break}if(!/\D/.test(u)){i instanceof _h.Array&&a!==o&&(i=i.caster);continue}if(!(i&&i.schema)){i=void 0;break}s=i.schema.pathType(u)==="nested",i=i.schema.path(u)}return t.subpaths[r]=i,i?"real":s?"nested":"adhocOrUndefined"}function owt(t,e,r){return _Se(t,e,r),t.subpaths[r]}Be.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};Be.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of mSe)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};Be.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of mSe)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};Be.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e&&e.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};Be.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=Ws(r);else this.methods[t]=e,this.methodOptions[t]=Ws(r);return this};Be.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};Be.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&rn.expires(e);for(let r in t)this.aliases[r]&&(t=rn.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())e.name==null&&r[1].name==null&&hSe(r[0],t)&&rn.warn(`Duplicate schema index on ${JSON.stringify(t)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([t,e]),this};Be.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:Wx(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:Wx(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?pSe(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&dS(this,{strict:e}),t==="strictQuery"&&dS(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,dS(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,dS(this,{toJSON:e})),this};function dS(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),dS(r,e))}Be.prototype.get=function(t){return this.options[t]};var awt="2d 2dsphere hashed text".split(" ");Object.defineProperty(Be,"indexTypes",{get:function(){return awt},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});Be.prototype.indexes=function(){return WSt(this)};Be.prototype.virtual=function(t,e){if(t instanceof qJ||zSt(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new HSt(e),rn.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let i=this.virtual(t);i.options=e,this.pre("init",function(u,c){if(Hx.has(t,u)){let l=Hx.get(t,u);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let d=i._getModelNamesForPopulate(this),p=this.$$populatedVirtuals[t];if(!Array.isArray(p)&&!p.$__&&d?.length===1){let f=this.db.model(d[0]);this.$$populatedVirtuals[t]=f.hydrate(p)}else if(Array.isArray(p)&&d?.length===1){let f=this.db.model(d[0]);for(let g=0;g<p.length;++g)p[g].$__||(p[g]=f.hydrate(p[g],null,{hydratedPopulatedDocs:!0}));let h=e.foreignField;this.$populated(t,p.map(g=>g==null?g:g.get(typeof h=="function"?h.call(g,g):h)),{populateModelSymbol:f})}}Hx.unset(t,u)}}),i.set(function(a){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),QSt(this.$$populatedVirtuals,t,a,e)}),typeof e.get=="function"&&i.get(e.get);let s=t.split("."),o=s[0];for(let a=0;a<s.length-1;++a)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let u=s.slice(a+1).join(".");this.paths[o].schema.virtual(u,e);break}else if(this.paths[o].$isSchemaMap){let u=s.slice(a+2).join(".");this.paths[o].$__schemaType.schema.virtual(u,e);break}o+="."+s[a+1]}return i}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(i,s,o){return i[s]||(i[s]=o===n.length-1?new qJ(e,t):{}),i[s]},this.tree),e&&e.applyToArray&&n.length>1){let i=this.path(n.slice(0,-1).join("."));if(i&&i.$isMongooseArray)return i.virtual(n[n.length-1],e);throw new cf(`Path "${i}" is not an array`)}return r[t]};Be.prototype.virtualpath=function(t){return this.virtuals.hasOwnProperty(t)?this.virtuals[t]:null};Be.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],FJ(this,n));delete this.nested[e],FJ(this,e);return}delete this.paths[e],FJ(this,e),this._removeEncryptedField(e)}},this),this};function FJ(t,e){let r=e.split("."),n=r.pop(),i=t.tree;for(let s of r)i=i[s];delete i[n]}Be.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new cf(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?Hx.unset(e,this.tree):delete this.tree[e]}return this};Be.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||t.prototype.hasOwnProperty("$isMongooseModelPrototype")||t.prototype.hasOwnProperty("$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);n.hasOwnProperty("value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};Be.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function i(o,a){let u=o.length+1,c,l;for(;u--;)if(l=o.slice(0,u).join("."),c=a.path(l),c){if(n.push(l),c.caster){if(c.caster instanceof _h.Mixed)return c.caster.$fullPath=n.join("."),c.caster;if(u!==o.length){if(u+1===o.length&&c.$embeddedSchemaType&&(o[u]==="$"||zx(o[u])))return c.$embeddedSchemaType;if(c.schema){let d;return o[u]==="$"||zx(o[u])?u+1===o.length?c.$embeddedSchemaType:(d=i(o.slice(u+1),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d):(d=i(o.slice(u),c.schema),d&&(d.$parentSchemaDocArray=d.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),d)}}}else if(c.$isSchemaMap){if(u>=o.length)return c;if(u+1>=o.length||c.$__schemaType instanceof _h.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return i(o.slice(u+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let s=t.split(".");for(let o=0;o<s.length;++o)(s[o]==="$"||zx(s[o]))&&(s[o]="0"),nwt.test(s[o])&&(s[o]="$");return i(s,e)};Be.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(i,s){let o=i.length+1,a,u;for(;o--;){if(u=i.slice(0,o).join("."),a=s.path(u),a)return a.caster?a.caster instanceof _h.Mixed?{schema:a,pathType:"mixed"}:o!==i.length&&a.schema?i[o]==="$"||zx(i[o])?o===i.length-1?{schema:a,pathType:"nested"}:n(i.slice(o+1),a.schema):n(i.slice(o),a.schema):{schema:a,pathType:a.$isSingleNested?"nested":"array"}:{schema:a,pathType:"real"};if(o===i.length&&s.nested[u])return{schema:s,pathType:"nested"}}return{schema:a||s,pathType:"undefined"}}return n(t.split("."),e)};Be.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let i=n[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(i)?new cf(this._duplicateKeyErrorMessagesByPath[i],{cause:e}):e}return e};function zx(t){return t.startsWith("$[")&&t.endsWith("]")}Be.prototype._preCompile=function(){this.plugin(JSt,{deduplicate:!0})};Be.prototype.toJSONSchema=function(e){let r=e?.useBsonType??!1,n=r?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let i of Object.keys(this.paths)){let s=this.paths[i];if(s._presplitPath.indexOf("$*")!==-1)continue;let o=s._presplitPath.length>1,a=n;if(o)for(let l=0;l<s._presplitPath.length-1;++l){let d=s._presplitPath[l];a.properties[d]==null&&(a.properties[d]=r?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),a=a.properties[d]}let u=s._presplitPath[s._presplitPath.length-1],c=!1;i==="_id"?(a.required||(a.required=[]),a.required.push("_id"),c=!0):s.options.required&&typeof s.options.required!="function"&&(a.required||(a.required=[]),a.required.push(u),c=!0),a.properties[u]=s.toJSONSchema(e),s.options.enum&&(a.properties[u].enum=c?s.options.enum:[...s.options.enum,null])}return n.required.length===0&&delete n.required,n};vSe.exports=LJ=Be;Be.Types=_h=Qv();LJ.ObjectId=_h.ObjectId});var jJ=m((obr,SSe)=>{"use strict";var uwt=Oa(),Jx=class extends uwt{constructor(e,r,n,i){let s=e.map(o=>o.message).join(", ");s.length>200&&(s=s.slice(0,200)+"..."),super(`${i} failed with ${e.length} Mongoose validation errors: ${s}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=i}};Object.defineProperty(Jx.prototype,"name",{value:"MongooseBulkWriteError"});SSe.exports=Jx});var ASe=m((abr,wSe)=>{"use strict";var cwt=Qt(),Yx=class extends cwt{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(Yx.prototype,"name",{value:"SyncIndexesError"});wSe.exports=Yx});var $J=m((ubr,CSe)=>{"use strict";CSe.exports=function t(e,r,n,i){if(e[i])return;if(e[i]=!0,!n||!n.skipTopLevel){let u=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}u=u||new Set(e.options.pluginTags||[]),l.find(d=>u.has(d))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let u of Object.keys(e.paths)){let c=e.paths[u];c.schema!=null&&(t(c.schema,r,n,i),c.caster.prototype.$__setSchema(c.schema))}let s=e.discriminators;if(s==null)return;let o=n.applyPluginsToDiscriminators,a=Object.keys(s);for(let u of a){let c=s[u];t(c,r,{skipTopLevel:!o},i)}}});var Qx=m((cbr,KJ)=>{"use strict";var TSe=null;KJ.exports.get=function(){return TSe};KJ.exports.set=function(t){TSe=t}});var UJ=m((lbr,OSe)=>{"use strict";function lwt(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}OSe.exports=lwt});var ISe=m((dbr,xSe)=>{"use strict";var dwt=Qt(),Xx=class extends dwt{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(Xx.prototype,"name",{value:"CreateCollectionsError"});xSe.exports=Xx});var kSe=m((pbr,DSe)=>{"use strict";var RSe=LO().modifiedPaths;DSe.exports=function(e){let r=Object.keys(e),n={},i={};for(let s of r){if(s.startsWith("$")){RSe(e[s],"",n);continue}i[s]=e[s]}return RSe(i,"",n),n}});var VJ=m((fbr,MSe)=>{"use strict";var pwt=kSe();MSe.exports=function(e){if(e==null)return{};let r=pwt(e);return Object.keys(r).reduce((n,i)=>{let s=i.match(/\$\[[^\]]+\]/g);if(s==null)return n;for(let o of s){let a=i.indexOf(o);if(a!==i.lastIndexOf(o))throw new Error(`Path '${i}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=i.substring(0,a-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var FSe=m((hbr,NSe)=>{"use strict";var fwt=Hv(),PSe=ui(),hwt=pc(),mwt=VJ();NSe.exports=function(e,r,n,i,s){let o=i.indexOf(".")===-1?[i]:i.split("."),a=null,u="adhocOrUndefined";n=n||{},r=r||{};let c=s!=null&&Array.isArray(s.arrayFilters)?s.arrayFilters:[],l=mwt(r),d=0;for(let p=0;p<o.length;++p){let f=o.slice(d,p+1).join("."),h=fwt(f);if(a=e.path(h),a!=null&&(u=e.pathType(h),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&a.schema.discriminators!=null)){let g=PSe(a,"schema.options.discriminatorKey"),_=h+"."+g,S=_.replace(/\.\d+\./,"."),w=null;_ in n&&(w=n[_]),S in n&&(w=n[S]);let C=h.replace(/\.\d+$/,"");a.$isMongooseDocumentArrayElement&&PSe(n[C],"$elemMatch."+g)!=null&&(w=n[C].$elemMatch[g]);let A=f+"."+g;A in r&&(w=r[A]),_ in r&&(w=r[_]);for(let M of Object.keys(l)){let I=l[M]+"."+g,F=M+"."+g;if(I===S){let B=c.find(U=>U.hasOwnProperty(F));B!=null&&(w=B[F])}}if(w==null)continue;let O=hwt(a.caster.discriminators,w),x=O&&O.schema;if(x==null)continue;let R=o.slice(p+1).join(".");if(a=x.path(R),e=x,d=p+1,a!=null){u=x._getPathType(R);break}}}return{type:u,schematype:a}}});var qSe=m((mbr,BSe)=>{"use strict";var ywt=ph();BSe.exports=function(e,r,n,i,s,o,a){if(e==null||!e.options||!e.options.immutable)return!1;let u=e.options.immutable;if(typeof u=="function"&&(u=u.call(a,a)),!u||o&&o.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new ywt(null,`Field ${s} is immutable and strict = 'throw'`);return delete n[i],!0}});var $Se=m((ybr,jSe)=>{"use strict";var gwt=ui();jSe.exports=function(e,r,n){if(r==null)return;let i=Object.keys(r);for(let s of i){let o=s.startsWith("$");if(s==="$set"){let a=Object.keys(r[s]);for(let u of a)LSe(e,r[s],u,r,n)}else o||LSe(e,r,s,r,n)}};function LSe(t,e,r,n,i){let s=t.path(r);if(s==null)return;let o=gwt(s,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(i,i)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var HJ=m((gbr,KSe)=>{"use strict";var GJ=K0();KSe.exports=function(e,r,n){if(r.indexOf(".")===-1){if(GJ.has(r))return;e[r]=n;return}let i=r.split("."),s=i.pop(),o=e;for(let a of i)GJ.has(a)||(o[a]==null&&(o[a]={}),o=o[a]);GJ.has(s)||(o[s]=n)}});var XJ=m((Ebr,YSe)=>{"use strict";var Zx=ho(),ME=Qt(),USe=RJ(),VSe=ph(),Ewt=G0(),JJ=Wv(),bwt=ey(),_wt=$o(),zJ=pc(),WJ=FSe(),GSe=qSe(),vwt=$Se(),WSe=H0().schemaMixedSymbol,Swt=HJ(),PE=Ot(),{internalToObjectOptions:wwt}=Il(),YJ=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);YSe.exports=function(e,r,n,i,s){if(r==null)return;if(n=n||{},Array.isArray(r)){let d=r.length;for(let p=0;p<d;++p){let f=Object.keys(r[p]);for(let h of f)r[p][h]=Awt(h,r[p][h])}return r}if(e!=null&&s!=null&&PE.hasUserDefinedProperty(s,e.options.discriminatorKey)&&typeof s[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let d=s[e.options.discriminatorKey],p=zJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&PE.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let d=r[e.options.discriminatorKey],p=zJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&r.$set!=null&&PE.hasUserDefinedProperty(r.$set,e.options.discriminatorKey)&&e.discriminators!=null){let d=r.$set[e.options.discriminatorKey],p=zJ(i.model.discriminators,d);e=e.discriminators[d]||p&&p.schema||e}n.upsert&&vwt(e,r,i);let o=Object.keys(r),a=o.length,u={},c,l=!1;for(s=s||{};a--;){let d=o[a];YJ.has(d)?d==="$set"&&u.$set||(u[d]=r[d]):(u.$set||(r.$set?u.$set=r.$set:u.$set={}),u.$set[d]=r[d],o.splice(a,1),~o.indexOf("$set")||o.push("$set"))}for(a=o.length;a--;){let d=o[a];if(c=u[d],l=l||d.startsWith("$"),c!=null&&c.$__&&(c=c.toObject(wwt),u[d]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&YJ.has(d))JSe(e,c,d,n,i,s);else{let p="Invalid atomic update value for "+d+". Expected an object, received "+typeof c;throw new Error(p)}d.startsWith("$")&&PE.isEmptyObject(c)&&delete u[d]}return Object.keys(u).length===0&&n.upsert&&Object.keys(s).length>0?{$setOnInsert:{...s}}:u};function Awt(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new ME("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new ME("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new ME("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new ME("Invalid "+t+" in pipeline, must be an object");return e}throw new ME('Invalid update pipeline operator: "'+t+'"')}function JSe(t,e,r,n,i,s,o){let a=n.strict;o=o?o+".":"";let u=Object.keys(e),c=u.length,l=!1,d,p,f,h=null,g=a??t.options.strict;for(;c--;){if(p=u[c],f=e[p],r==="$pull"){if(d=t._getSchema(o+p),d==null){let S=WJ(t,e,s,o+p,n);S.schematype!=null&&(d=S.schematype)}if(d!=null&&d.schema!=null){e[p]=bwt(d.schema,e[p],n,i),l=!0;continue}}let _=o?o+p:p;if(t.discriminatorMapping!=null&&_===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[p]&&!n.overwriteDiscriminatorKey){if(g==="throw"){let S=new Error(`Can't modify discriminator key "`+_+'" on discriminator model');h=sy(S,i,_,h);continue}else if(g){delete e[p];continue}}if(_wt(f)==="Object"){if(d=t._getSchema(o+p),d==null){let S=WJ(t,e,s,o+p,n);S.schematype!=null&&(d=S.schematype)}if(r!=="$setOnInsert"&&GSe(d,a,e,p,o+p,n,i))continue;if(d&&d.caster&&r in QJ)if("$each"in f){l=!0;try{e[p]={$each:kE(d,f.$each,r,p,i,o+p)}}catch(S){h=sy(S,i,p,h)}f.$slice!=null&&(e[p].$slice=f.$slice|0),f.$sort&&(e[p].$sort=f.$sort),f.$position!=null&&(e[p].$position=JJ(f.$position))}else{if(d!=null&&d.$isSingleNested){let S=a??d.schema.options.strict;try{e[p]=d.castForQuery(null,f,i,{strict:S})}catch(w){h=sy(w,i,p,h)}}else try{e[p]=kE(d,f,r,p,i,o+p)}catch(S){h=sy(S,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$currentDate"||r in QJ&&d){try{e[p]=kE(d,f,r,p,i,o+p)}catch(S){h=sy(S,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else if(r==="$rename"){let S=new USe(`${o}${p}.$rename`);try{e[p]=kE(S,f,r,p,i,o+p)}catch(w){h=sy(w,i,p,h)}if(e[p]===void 0){delete e[p];continue}l=!0}else{let S=o+p,w=t._getPathType(S),C=a;if(w&&w.schema&&C==null&&(C=w.schema.options.strict),w.pathType==="undefined"){if(C==="throw")throw new VSe(S);if(C){delete e[p];continue}}l|=JSe(t,f,r,n,i,s,o+p)||PE.isObject(f)&&Object.keys(f).length===0}}else{let S=p==="$each"||p==="$or"||p==="$and"||p==="$in";if(S&&!o)throw new ME('Invalid update: Unexpected modifier "'+p+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let w=S?o:o+p;if(d=t._getSchema(w),r!=="$setOnInsert"&&GSe(d,a,e,p,o+p,n,i))continue;let C=t._getPathType(w);if(d==null){let x=WJ(t,e,s,w,n);x.schematype!=null&&(d=x.schematype,C=x.type)}let A=a;if(C&&C.schema&&a==null&&(A=C.schema.options.strict),A&&!d&&!/real|nested/.test(C.pathType)){if(A==="throw"&&t.virtuals[w]==null)throw new VSe(o+p);delete e[p]}else{if(r==="$rename"){if(e[p]==null)throw new Zx("String",e[p],`${o}${p}.$rename`);let x=new USe(`${o}${p}.$rename`);e[p]=x.castForQuery(null,e[p],i);continue}try{o.length===0||p.indexOf(".")===-1?e[p]=kE(d,f,r,p,i,o+p):(A!==!1||d!=null)&&(Swt(e,p,kE(d,f,r,p,i,o+p)),delete e[p])}catch(x){h=sy(x,i,p,h)}if(Array.isArray(e[p])&&(r==="$addToSet"||r==="$push")&&p!=="$each"&&d&&d.caster&&!d.caster.$isMongooseArray&&!d.caster[WSe]&&(e[p]={$each:e[p]}),e[p]===void 0){delete e[p];continue}l=!0}}}if(h!=null)throw h;return l}function sy(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new Ewt,n.addError(r,t),n}var HSe={$pop:1,$inc:1},Cwt={$unset:1},QJ={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var zSe={$set:1,$setOnInsert:1};function kE(t,e,r,n,i,s){if(!t){if(r in HSe)try{return JJ(e)}catch{throw new Zx("number",e,s)}return e}if(t.caster&&r in QJ&&(PE.isObject(e)||Array.isArray(e))&&!zSe[r]){let a=0,u=t;for(;u.$isMongooseArray;)++a,u=u.caster;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let d=a-c;for(;c<a;)e=[e],++c;let p=t.applySetters(Array.isArray(e)?e:[e],i);for(let f=0;f<d;++f)p=p[0];return p}if(r in Cwt)return e;if(r in HSe){if(e==null)throw new Zx("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,i);try{return JJ(e)}catch{throw new Zx("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(YJ.has(n))return t.castForQuery(n,e,i);if(zSe[r]){let a=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),u=t[WSe]!=null;return a||u?t.applySetters(e,i):t.castForQuery(null,e,i)}return t.castForQuery(null,e,i)}});var ZJ=m((bbr,QSe)=>{"use strict";QSe.exports=function(e,r,n){!n||!(r&&r.upsert)||(r.overwrite?pS(e,n)||(e[n]=0):!pS(e,n)&&!pS(e?.$set,n)&&!pS(e?.$inc,n)&&!pS(e?.$setOnInsert,n)&&(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))};function pS(t,e){return t==null||typeof t!="object"?!1:Object.prototype.hasOwnProperty.call(t,e)}});var eY=m((_br,ZSe)=>{"use strict";var Twt=ui();ZSe.exports=function(t,e,r,n){n=n||{};let i=n.setDefaultsOnInsert!=null?n.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!n.upsert||i===!1)return r;let s=Object.keys(r||{}),o={},a={},u=s.length,c=!1;for(let p=0;p<u;++p)if(s[p].charAt(0)==="$"){c=!0;break}let l=Object.keys(t),d=l.length;for(let p=0;p<d;++p){let f=l[p],h=t[f];if(h&&typeof h=="object"){let g=Object.keys(h),_=g.length,S=!1;for(let w=0;w<_;++w)if(g[w].charAt(0)==="$"){S=!0;break}if(S)continue}o[f]=!0}return n&&n.overwrite&&!c||e.eachPath(function(p,f){if(f.path==="_id"&&f.options.auto)return;let h=f.getDefault(null,!0);if(typeof h>"u")return;let g=f.splitPath();g.includes("$*")||Owt(r,o,p,g,c)||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},Twt(r,p)==null&&(r.$setOnInsert[p]=h),a[p]=h)}),r};function Owt(t,e,r,n,i){if(e[r])return!0;let s=n[0];for(let o=1;o<n.length;++o){if(e[s])return!0;s+="."+n[o]}if(i){for(let o in t)if(o.charAt(0)==="$"&&XSe(t[o],r,n))return!0}else if(XSe(t,r,n))return!0;return!1}function XSe(t,e,r){if(t==null||typeof t!="object")return!1;if(t.hasOwnProperty(e))return!0;let n=r[0];for(let s=1;s<r.length;++s){if(t.hasOwnProperty(n))return!0;n+="."+r[s]}let i=e+".";for(let s in t)if(s.startsWith(i))return!0;return!1}});var tY=m((vbr,Ii)=>{"use strict";var xwt=Qt(),Iwt=pc(),ewe=FW(),twe=BW(),fS=ey(),rwe=XJ(),Rwt=zn(),nwe=ZJ(),{inspect:Dwt}=require("util"),iwe=eY();Ii.exports=function(e,r,n){let i=e.base.now();return r.insertOne?s=>Ii.exports.castInsertOne(e,r.insertOne,n).then(()=>s(null),o=>s(o)):r.updateOne?s=>{try{Ii.exports.castUpdateOne(e,r.updateOne,n,i),s(null)}catch(o){s(o)}}:r.updateMany?s=>{try{Ii.exports.castUpdateMany(e,r.updateMany,n,i),s(null)}catch(o){s(o)}}:r.replaceOne?s=>{Ii.exports.castReplaceOne(e,r.replaceOne,n).then(()=>s(null),o=>s(o))}:r.deleteOne?s=>{try{Ii.exports.castDeleteOne(e,r.deleteOne),s(null)}catch(o){s(o)}}:r.deleteMany?s=>{try{Ii.exports.castDeleteMany(e,r.deleteMany),s(null)}catch(o){s(o)}}:s=>{let o=new xwt(`Invalid op passed to \`bulkWrite()\`: ${Dwt(r)}`);s(o,null)}};Ii.exports.castInsertOne=async function(e,r,n){let i=NE(e,r.document),s=new i(r.document);i.schema.options.timestamps&&eI(r,n)&&s.initializeTimestamps(),n.session!=null&&s.$session(n.session);let o=i?.schema?.options?.versionKey;return o&&s[o]==null&&(s[o]=0),r.document=s,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Ii.exports.castUpdateOne=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=NE(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=Rwt(r.update);hS(o,r.filter);let c=eI(r,n);if(s.schema.$timestamps!=null&&c){let p=s.schema.$timestamps.createdAt,f=s.schema.$timestamps.updatedAt;twe(i,p,f,u,{})}c&&ewe(i,u,s.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert==null?l:r.setDefaultsOnInsert)!==!1&&iwe(r.filter,s.schema,u,{setDefaultsOnInsert:!0,upsert:r.upsert}),nwe(u,r,s.schema.options.versionKey),r.filter=fS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=rwe(s.schema,u,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter),r};Ii.exports.castUpdateMany=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=NE(e,r.filter),o=s.schema,a=n.strict!=null?n.strict:s.schema.options.strict,u=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert==null?u:r.setDefaultsOnInsert)!==!1&&iwe(r.filter,s.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=eI(r,n);if(s.schema.$timestamps!=null&&l){let d=s.schema.$timestamps.createdAt,p=s.schema.$timestamps.updatedAt;twe(i,d,p,r.update,{})}l&&ewe(i,r.update,s.schema),hS(o,r.filter),nwe(r.update,r,s.schema.options.versionKey),r.filter=fS(s.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=rwe(s.schema,r.update,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter)};Ii.exports.castReplaceOne=async function(e,r,n){let i=NE(e,r.filter),s=i.schema,o=n.strict!=null?n.strict:i.schema.options.strict;hS(s,r.filter),r.filter=fS(i.schema,r.filter,{strict:o,upsert:r.upsert});let a=new i(r.replacement,o,!0);i.schema.options.timestamps&&eI(r,n)&&a.initializeTimestamps(),n.session!=null&&a.$session(n.session);let u=i?.schema?.options?.versionKey;if(u&&a[u]==null&&(a[u]=0),r.replacement=a,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Ii.exports.castDeleteOne=function(e,r){let n=NE(e,r.filter),i=n.schema;hS(i,r.filter),r.filter=fS(n.schema,r.filter)};Ii.exports.castDeleteMany=function(e,r){let n=NE(e,r.filter),i=n.schema;hS(i,r.filter),r.filter=fS(n.schema,r.filter)};Ii.exports.cast={insertOne:Ii.exports.castInsertOne,updateOne:Ii.exports.castUpdateOne,updateMany:Ii.exports.castUpdateMany,replaceOne:Ii.exports.castReplaceOne,deleteOne:Ii.exports.castDeleteOne,deleteMany:Ii.exports.castDeleteMany};function hS(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function NE(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&e.hasOwnProperty(r)&&(t=Iwt(t.discriminators,e[r])||t),t}function eI(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var rY=m((Sbr,swe)=>{"use strict";swe.exports=function(e,r,n){return e.mongoose=e.mongoose||{},e.mongoose.validationErrors=r,e.mongoose.results=n,e}});var oY=m((wbr,cwe)=>{"use strict";var kwt=Cz(),iY=require("events").EventEmitter,Mwt=Q0(),Ri=b3(),owe=jJ(),li=Oa(),Pwt=Pz(),Nwt=ASe(),Fwt=$J(),Bwt=zn(),qwt=Qx(),Lwt=ui(),jwt=UJ(),awe=Wu(),sY=Ot(),$wt=ISe(),tI=tY(),{modelSymbol:rI}=ot(),Kwt=Xz(),nY=rY(),Uwt=ot().arrayAtomicsSymbol,mS=ot().sessionNewDocuments,Vwt=globalThis.Date,Gwt=["MONGODB-X509"];function ut(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Ri,this._readyState=Ri.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(ut.prototype,iY.prototype);Object.defineProperty(ut.prototype,"readyState",{get:function(){return this._readyState===Ri.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&Vwt.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Ri.disconnected:this._readyState},set:function(t){if(!(t in Ri))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Ri.connected===t&&(this._hasOpened=!0),this.emit(Ri[t])}}});ut.prototype.get=function(e){return this.config.hasOwnProperty(e)?this.config[e]:Lwt(this.options,e)};ut.prototype.set=function(e,r){return this.config.hasOwnProperty(e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};ut.prototype.collections;ut.prototype.name;ut.prototype.models;ut.prototype.id;Object.defineProperty(ut.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(ut.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});ut.prototype.db;ut.prototype.client;ut.prototype.config;ut.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new li("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};ut.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,i=this.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&i?.session!=null&&(r={...r,session:i.session});let s=this.base.now(),o=null;if(n){let a=[];for(let u of e){if(typeof u.model!="string"&&!u.model?.[rI])throw new li("Must specify model in Connection.prototype.bulkWrite() operations");let c=u.model[rI]?u.model:this.model(u.model);if(u.name==null)throw new li("Must specify operation name in Connection.prototype.bulkWrite()");if(!tI.cast.hasOwnProperty(u.name))throw new li(`Unrecognized bulkWrite() operation name ${u.name}`);await tI.cast[u.name](c,u,r,s),a.push({...u,namespace:c.namespace()})}o=await this.client.bulkWrite(a,r)}else{let a=[],u=[],c=[],l=[],d=[];for(let f=0;f<e.length;++f){let h=e[f];if(typeof h.model!="string"&&!h.model?.[rI]){let S=new li("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:f,error:S}),d[f]=S;continue}let g;try{g=h.model[rI]?h.model:this.model(h.model)}catch(S){c.push({index:f,error:S});continue}if(h.name==null){let S=new li("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:f,error:S}),d[f]=S;continue}if(!tI.cast.hasOwnProperty(h.name)){let S=new li(`Unrecognized bulkWrite() operation name ${h.name}`);c.push({index:f,error:S}),d[f]=S;continue}let _=null;try{_=tI.cast[h.name](g,h,r,s)}catch(S){c.push({index:f,error:S}),d[f]=S;continue}Kwt(_)?l.push(_.then(()=>{a.push({...h,namespace:g.namespace()}),u.push(f)},S=>{c.push({index:f,error:S}),d[f]=S})):(a.push({...h,namespace:g.namespace()}),u.push(f))}if(l.length>0&&await Promise.all(l),c=c.sort((f,h)=>f.index-h.index).map(f=>f.error),a.length===0){if(r.throwOnValidationError&&c.length)throw new owe(c,d,h,"bulkWrite");let f=this.base.driver.get().BulkWriteResult,h=new f(jwt(),!1);return nY(h,c,d)}let p;[o,p]=await this.client.bulkWrite(a,r).then(f=>[f,null]).catch(f=>[null,f]);for(let f=0;f<u.length;++f)d[u[f]]=null;if(p&&c.length>0&&(nY(p,c,d),p.mongoose=p.mongoose||{},p.mongoose.validationErrors=c),c.length>0){if(r.throwOnValidationError)throw new owe(c,d,o,"bulkWrite");nY(o,c,d)}}return o};ut.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.createCollection({})}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new $wt(s,n)}return r};ut.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};ut.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new li("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};ut.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[mS]=new Map,n.withTransaction(()=>Hwt(e,n,this.base),r).then(i=>(delete n[mS],i)).catch(i=>{throw delete n[mS],i}).finally(()=>{n.endSession().catch(()=>{})})))};async function Hwt(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(i=>{r.transactionAsyncLocalStorage.run({session:e},()=>i(t(e)))})}catch(n){throw zwt(e),n}}function zwt(t){for(let e of t[mS].keys()){let r=t[mS].get(e);r.hasOwnProperty("isNew")&&(e.$isNew=r.isNew),r.hasOwnProperty("versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let i=e.$__.activePaths.paths[n];i!=null&&delete e.$__.activePaths[i][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let i=e.$__getValue(n);i!=null&&(i[Uwt]=r.atomics.get(n))}}}ut.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new li("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};ut.prototype._waitForConnect=async function(e){if((this.readyState===Ri.connecting||this.readyState===Ri.disconnected)&&this._shouldBufferCommands()){let r=this._getBufferTimeoutMS(),n=null,i=!1,s={},o=new Promise(a=>{s.fn=a,this._queue.push(s)});if(e?await o:await Promise.race([o,new Promise(a=>{n=setTimeout(()=>{i=!0,a()},r)})]),i){let a=this._queue.indexOf(s);a!==-1&&this._queue.splice(a,1);let u="Connection operation buffering timed out after "+r+"ms";throw new li(u)}else n!=null&&clearTimeout(n)}};ut.prototype._getBufferTimeoutMS=function(){return this.config.bufferTimeoutMS!=null?this.config.bufferTimeoutMS:this.base!=null&&this.base.get("bufferTimeoutMS")!=null?this.base.get("bufferTimeoutMS"):1e4};ut.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};ut.prototype.listDatabases=async function(){throw new li("listDatabases() not implemented by driver")};ut.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new li("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};ut.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};ut.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};ut.prototype.onOpen=function(){this.readyState=Ri.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)sY.object.hasOwnProperty(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};ut.prototype.openUri=async function(e,r){if((this.readyState===Ri.connecting||this.readyState===Ri.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{Wwt.apply(arguments)}catch(i){throw n||(this.$initialConnection=Promise.reject(i)),i}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(i=>{throw this.readyState=Ri.disconnected,this.listeners("error").length>0&&awe(()=>this.emit("error",i)),i});for(let i of Object.values(this.models))i.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(i){throw uwe(i)}return this};ut.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),iY.prototype.on.call(this,e,r)};ut.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),iY.prototype.once.call(this,e,r)};function Wwt(t,e,r){if(typeof e=="function"&&r==null)throw new li("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new li("Connection.prototype.openUri() no longer accepts a callback")}function uwe(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new Pwt,t.assimilateError(e)}return t}ut.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new li("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};ut.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new li("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._lastHeartbeatAt!=null&&(this._lastHeartbeatAt=null);for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};ut.prototype._close=async function(e,r){let n=this,i=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let s=this;switch(this.readyState){case Ri.disconnected:r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),i||(await this.doClose(e),this.onClose(e));break;case Ri.connected:this.readyState=Ri.disconnecting,await this.doClose(e),r&&n.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),this.onClose(e);break;case Ri.connecting:return new Promise((o,a)=>{let u=()=>{this.removeListener("open",u),this.removeListener("error",u),r?this.destroy(e).then(o,a):this.close(e).then(o,a)};this.once("open",u),this.once("error",u)});case Ri.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),o()})})}return this};ut.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};ut.prototype.onClose=function(e){this.readyState=Ri.disconnected;for(let n in this.collections)sY.object.hasOwnProperty(this.collections,n)&&this.collections[n].onClose(e);this.emit("close",e);let r=typeof e=="object"&&e!==null?e.force:e;for(let n of this.otherDbs)this._destroyCalled?n.destroy({force:r,skipCloseClient:!0}):n.close({force:r,skipCloseClient:!0})};ut.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};e=Object.assign({},r,e?Bwt(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base&&this.base.__driver&&this.base.__driver.Collection||qwt.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};ut.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};ut.prototype.model=function(e,r,n,i){if(!(this instanceof ut))throw new li("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let s;if(typeof e=="function"&&(s=e,e=s.name),typeof r=="string"&&(n=r,r=!1),sY.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new Mwt(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},a=Object.assign(o,i,{connection:this});if(this.models[e]&&!n&&a.overwriteModels!==!0){if(r&&r.instanceOfSchema&&r!==this.models[e].schema)throw new li.OverwriteModelError(e);return this.models[e]}let u;if(r&&r.instanceOfSchema)return Fwt(r,this.plugins,null,"$connectionPluginsApplied"),u=this.base._model(s||e,r,n,a),this.models[e]||(this.models[e]=u),u.init().catch(function(){}),u;if(this.models[e]&&n)return u=this.models[e],r=u.prototype.schema,u.__subclass(this,r,n);if(arguments.length===1){if(u=this.models[e],!u)throw new li.MissingSchemaError(e);return u}if(!u)throw new li.MissingSchemaError(e);return this===u.prototype.db&&(!n||n===u.collection.name)?(this.models[e]||(this.models[e]=u),u):(this.models[e]=u.__subclass(this,r,n),this.models[e])};ut.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let i of n)r.test(i)&&this.deleteModel(i)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};ut.prototype.watch=function(e,r){let n=s=>{awe(()=>{if(this.readyState===Ri.connecting)this.once("open",function(){let o=this.db.watch(e,r);s(null,o)});else{let o=this.db.watch(e,r);s(null,o)}})};return new kwt(n,e,r)};ut.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw uwe(e)}};ut.prototype.modelNames=function(){return Object.keys(this.models)};ut.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};ut.prototype.authMechanismDoesNotRequirePassword=function(){return this.options&&this.options.auth?Gwt.indexOf(this.options.auth.authMechanism)>=0:!0};ut.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};ut.prototype.getClient=function(){return this.client};ut.prototype.setClient=function(){throw new li("Connection#setClient not implemented by driver")};ut.prototype.createClient=function(){throw new li("Connection#createClient not implemented by driver")};ut.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.syncIndexes(e)}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Nwt(s,n)}return r};ut.STATES=Ri;cwe.exports=ut});var aY=m((Abr,Jwt)=>{Jwt.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.19.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{bson:"^6.10.4",kareem:"2.6.3",mongodb:"~6.20.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.48.2","@babel/core":"7.28.4","@babel/preset-env":"7.28.3","@mongodb-js/mongodb-downloader":"^0.4.2","@typescript-eslint/eslint-plugin":"^8.19.1","@typescript-eslint/parser":"^8.19.1",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","assert-browserify":"2.0.0","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.1.2","crypto-browserify":"3.12.1",dox:"1.0.0",eslint:"8.57.1","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.18.1",marked:"15.0.12",mkdirp:"^3.0.1",mocha:"11.7.4",moment:"2.30.1","mongodb-memory-server":"10.2.1","mongodb-runner":"^5.8.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"21.0.0","stream-browserify":"3.0.0",tsd:"0.33.0",typescript:"5.9.3",uuid:"11.1.0",webpack:"5.102.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var dwe=m((Cbr,lwe)=>{"use strict";var Ywt=zn(),Qwt=Oa();function Xwt(t,e){let r=e||{},n=r.readPreference?r.readPreference:r9t(t),i=Ywt(r);return n&&n!=="primary"&&n!=="primaryPreferred"?Zwt(n,i):i}function Zwt(t,e){if(e9t(e)&&t9t(t))i9t();else return n9t(e)}function e9t(t){let e=t.config&&t.config.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function t9t(t){return t==="secondary"||t==="secondaryPreferred"}function r9t(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function n9t(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function i9t(){throw new Qwt('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}lwe.exports=Xwt});var fwe=m(pwe=>{"use strict";pwe.setTimeout=setTimeout});var Ewe=m((Obr,gwe)=>{"use strict";var hwe=oY(),oy=Oa(),Ma=b3(),mwe=M0(),s9t=aY(),o9t=dwe(),a9t=fwe().setTimeout,ywe=Ot(),u9t=Q0();function Pl(){hwe.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}Pl.STATES=Ma;Object.setPrototypeOf(Pl.prototype,hwe.prototype);Pl.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===Ma.connected?i():this._queue.push({fn:i});function i(){r.client=n.client;let s={};e.hasOwnProperty("noListener")&&(s.noListener=e.noListener),r.db=n.client.db(t,s),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,e.noListener!==!0&&this.otherDbs.push(r),r.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};Pl.prototype.aggregate=function(e,r){return new this.base.Aggregate(null,this).append(e).option(r??{})};Pl.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new oy(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=Ma.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};Pl.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>a9t(n,1)),this)};Pl.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};Pl.prototype.createClient=async function(e,r){if(typeof e!="string")throw new oy(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new oy("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===Ma.connecting||this.readyState===Ma.connected)&&this._connectionString!==e)throw new oy("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=o9t(e,r),r){let a=r.config&&r.config.autoIndex!=null?r.config.autoIndex:r.autoIndex;a!=null&&(this.config.autoIndex=a!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),"bufferTimeoutMS"in r&&(this.config.bufferTimeoutMS=r.bufferTimeoutMS,delete r.bufferTimeoutMS),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,ywe.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:s9t.version});let{schemaMap:i,encryptedFieldsMap:s}=this._buildEncryptionSchemas();if((Object.keys(i).length>0||Object.keys(s).length)&&!r.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");Object.keys(i).length>0&&(r.autoEncryption.schemaMap=i),Object.keys(s).length>0&&(r.autoEncryption.encryptedFieldsMap=s),this.readyState=Ma.connecting,this._connectionString=e;let o;try{o=new mwe.MongoClient(e,r)}catch(a){throw this.readyState=Ma.disconnected,a}this.client=o,o.setMaxListeners(0),await o.connect(),uY(this,o,r,n);for(let a of this.otherDbs)uY(a,o,{},a.name);return this};Pl.prototype._buildEncryptionSchemas=function(){let t={},e={},r=Object.values(this.models).filter(s=>s.schema._hasEncryptedFields());for(let s of r){let{schema:o,collection:{collectionName:a}}=s,u=`${this.$dbName}.${a}`,c=o.encryptionType()==="csfle"?e:t;if(c[u]??=new u9t({},{encryptionType:o.encryptionType()}),o.discriminatorMapping&&!o.discriminatorMapping.isRoot){let d=o._baseSchema;o.eachPath(p=>{if(!d.path(p)&&c[u]._hasEncryptedField(p))throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${p}`)})}c[u].add(o)}let n=Object.fromEntries(Object.entries(e).map(([s,o])=>[s,o._buildSchemaMap()])),i=Object.fromEntries(Object.entries(t).map(([s,o])=>[s,o._buildEncryptedFields()]));return{schemaMap:n,encryptedFieldsMap:i}};Pl.prototype.setClient=function(e){if(!(e instanceof mwe.MongoClient))throw new oy("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Ma.disconnected)throw new oy("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new oy("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,uY(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function uY(t,e,r,n){let i=n!=null?e.db(n):e.db();t.db=i,t.client=e,t.host=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].host||void 0,t.port=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].port||void 0,t.name=n??i.databaseName,t._closeCalled=e._closeCalled;let s=()=>{t.readyState!==Ma.connected&&(t.readyState=Ma.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e&&e.topology&&e.topology.description&&e.topology.description.type||"";o==="Single"?e.on("serverDescriptionChanged",a=>{a.newDescription.type==="Unknown"?t.readyState=Ma.disconnected:s()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",a=>{let u=a.newDescription;t.readyState===Ma.connected&&u.type!=="ReplicaSetWithPrimary"?t.readyState=Ma.disconnected:t.readyState===Ma.disconnected&&u.type==="ReplicaSetWithPrimary"&&s()}),t._lastHeartbeatAt=null,e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now();for(let a of t.otherDbs)a._lastHeartbeatAt=t._lastHeartbeatAt}),r.monitorCommands&&(e.on("commandStarted",a=>t.emit("commandStarted",a)),e.on("commandFailed",a=>t.emit("commandFailed",a)),e.on("commandSucceeded",a=>t.emit("commandSucceeded",a))),t.onOpen();for(let a in t.collections)ywe.object.hasOwnProperty(t.collections,a)&&t.collections[a].onOpen()}gwe.exports=Pl});var bwe=m(yS=>{"use strict";yS.BulkWriteResult=Mfe();yS.Collection=C6e();yS.Connection=Ewe();yS.ClientEncryption=M0().ClientEncryption});var vwe=m((Ibr,_we)=>{"use strict";var c9t=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","skipOriginalStackTraces","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);_we.exports=c9t});var wwe=m((Rbr,Swe)=>{"use strict";var l9t=Qt(),nI=class extends l9t{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(nI.prototype,"name",{value:"EachAsyncMultiError"});Swe.exports=nI});var lY=m((Dbr,Cwe)=>{"use strict";var d9t=wwe(),cY=Wu();Cwe.exports=async function(e,r,n){let i=n.parallel||1,s=n.batchSize,o=n.signal,a=n.continueOnError,u=[],c=p9t(),l=!1;return new Promise((f,h)=>{if(o!=null){if(o.aborted)return f(null);o.addEventListener("abort",()=>(l=!0,f(null)),{once:!0})}if(s!=null){if(typeof s!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(s)){if(s<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}d((g,_)=>{if(g!=null)return h(g);f(_)})});function d(f){let h=0,g=0,_=null;for(let w=0;w<i;++w)c(S());function S(){let w=[],C=!1;return A;function A(O){if(C||l)return O();if(_)return O();e(function(x,R){if(_!=null)return O();if(x!=null)if(x.name==="MongoCursorExhaustedError")R=null;else if(a)u.push(x);else return _=x,f(x),O();if(R==null){if(C=!0,h<=0){let F=a?Awe(u):_;f(F)}else s&&w.length&&p(w,g++,I);return O()}if(++h,cY(()=>O()),s&&w.push(R),s&&w.length!==s){cY(()=>c(A));return}let M=s?w:R;function I(F){if(s?(h-=w.length,w=[]):--h,F!=null)if(a)u.push(F);else return _=F,f(F);if((C||l)&&h<=0){let B=a?Awe(u):_;return f(B)}cY(()=>c(A))}p(M,g++,I)})}}}function p(f,h,g){let _;try{_=r(f,h)}catch(S){return g(S)}_&&typeof _.then=="function"?_.then(function(){g(null)},function(S){g(S||new Error("`eachAsync()` promise rejected without error"))}):g(null)}};function p9t(){let t=[],e=null,r=0;return function(s){if(e===null&&t.length===0)return e=r++,s(n);t.push(s)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function Awe(t){return t.length===0?null:new d9t(t)}});var Mwe=m((kbr,kwe)=>{"use strict";var gS=Qt(),xwe=require("stream").Readable,f9t=lY(),Iwe=qv(),h9t=U0(),dY=Wu(),{once:m9t}=require("events"),Rwe=require("util");function Pa(t){xwe.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={},e.hooks.execPre("find",t,r=>{if(r!=null){if(r instanceof h9t.skipWrappedFunction){let n=r.args[0];if(n!=null&&(!Array.isArray(n)||n.length)){let i=new gS('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Rwe.inspect(n)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(r),this.listeners("error").length>0&&this.emit("error",r);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),t._mongooseOptions._asyncIterator&&(this._mongooseOptions._asyncIterator=!0),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>Twe(t,this)]):Twe(t,this)})}Rwe.inherits(Pa,xwe);function Twe(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Pa.prototype._read=function(){oI(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Pa.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await m9t(this,"cursor"),this.cursor)};Object.defineProperty(Pa.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Pa.prototype._markError=function(t){return this._error=t,this};Pa.prototype.close=async function(){if(typeof arguments[0]=="function")throw new gS("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Pa.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Pa.prototype.rewind=function(){return Dwe(this,()=>{this.cursor.rewind()}),this};Pa.prototype.next=async function(){if(typeof arguments[0]=="function")throw new gS("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new gS("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{oI(this,function(n,i){if(n)return r(n);e(i)})})};Pa.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new gS("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},f9t(r=>oI(this,r),t,e)};Pa.prototype.options;Pa.prototype.addCursorFlag=function(t,e){return Dwe(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Symbol.asyncIterator!=null&&(Pa.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this});function oI(t,e){let r=e;if(r=function(n,i){return n?e(n):i===null?t._mongooseOptions._asyncIterator?e(null,{done:!0}):e(null,null):(t._transforms.length&&i!==null&&(i=t._transforms.reduce(function(s,o){return o.call(t,s)},i)),t._mongooseOptions._asyncIterator?e(null,{value:i,done:!1}):e(null,i))},t._error)return dY(function(){r(t._error)});if(t.skipped)return dY(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=Iwe.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return iI(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{sI.call({ctx:t,callback:r},null,n)},n=>{sI.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return iI(t,n,null,r);iI(t,n,t._pop,(i,s)=>{if(i!=null)return r(i);t.query.model.populate(s,t._pop).then(o=>r(null,o),o=>r(o))})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;oI(t,e)})}function sI(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,Owe.call(this);this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize?dY(()=>this.ctx.cursor.next().then(r=>{sI.call(this,null,r)},r=>{sI.call(this,r)})):Owe.call(this)}function Owe(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{iI(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function iI(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]],u=>{if(u!=null)return n(u);n(null,e)});let{model:i,_fields:s,_userProvidedFields:o,options:a}=t.query;Iwe.createModelAndInit(i,e,s,o,a,r,(u,c)=>{if(u!=null)return n(u);t.model.hooks.execPost("find",t.query,[[c]],l=>{if(l!=null)return n(l);n(null,c)})})}function Dwe(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}kwe.exports=Pa});var fY=m((Mbr,Nwe)=>{"use strict";var pY=Ot();function y9t(t,e,r){Pwe(t,e,r,"maxTimeMS")}function g9t(t,e,r){Pwe(t,e,r,"allowDiskUse")}Nwe.exports={applyGlobalMaxTimeMS:y9t,applyGlobalDiskUse:g9t};function Pwe(t,e,r,n){pY.hasUserDefinedProperty(t,n)||(pY.hasUserDefinedProperty(e,n)?t[n]=e[n]:pY.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var hY=m((Pbr,Fwe)=>{"use strict";Fwe.exports=function(e,r){if(r.readConcern!==void 0||r&&r.session&&r.session.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var mY=m((Nbr,Bwe)=>{"use strict";Bwe.exports=function(e,r){if(r.writeConcern!=null||r&&r.session&&r.session.transaction)return;let n=e.options.writeConcern??{};Object.keys(n).length!=0?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var jwe=m((Fbr,Lwe)=>{"use strict";var qwe=Yv();Lwe.exports=function(e,r,n){if(!Object.keys(n).some(qwe))return r.castForQuery(null,n,e);let s=Object.keys(n),o=s.length;for(;o--;){let a=s[o],u=n[a];if(a==="$not"){if(u&&r&&!r.caster){let c=Object.keys(u);if(c.length&&qwe(c[0]))for(let l of Object.keys(u))u[l]=r.castForQuery(l,u[l],e);else n[a]=r.castForQuery(a,u,e);continue}}else n[a]=r.castForQuery(a,u,e)}return n}});var Kwe=m((Bbr,$we)=>{"use strict";var E9t=/^\d+$/;$we.exports=function(e,r,n){let i=e.path(r);if(i!=null)return i;let s=r.split("."),o="",a=!1;for(let u of s)if(!(a&&E9t.test(u))){if(o=o.length===0?u:o+"."+u,i=e.path(o),i?.schema)e=i.schema,!a&&i.$isMongooseDocumentArray&&(a=!0),n&&n[o]&&(e=e.discriminators[n[o]]??e),o="";else if(i?.instance==="Mixed")break}return i}});var zwe=m((qbr,Hwe)=>{"use strict";var b9t=jwe(),Uwe=Hv(),Vwe=Kwe(),_9t=VJ();Hwe.exports=function(e){let r=e.options.arrayFilters;if(!Array.isArray(r))return;let n=e.getUpdate(),i=e.schema,s=_9t(n),o=i.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model&&e.model.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),i._userProvidedOptions.strictQuery!=null&&(o=i._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),Gwe(r,i,o,s,e)};function Gwe(t,e,r,n,i){let s={};for(let o of t){if(o==null)throw new Error(`Got null array filter in ${t}`);let a=Object.keys(o).filter(h=>o[h]!=null);if(a.length===0)continue;let u=a[0];if(u==="$and"||u==="$or"){for(let h of a)Gwe(o[h],e,r,n,i);continue}let c=u.indexOf("."),l=c===-1?u:u.substring(0,c);if(n[l]==null)continue;let d=Uwe(n[l]),p=Vwe(e,d,s),f=p!=null?p.schema:null;f!=null&&f.discriminators!=null&&o[l+"."+f.options.discriminatorKey]&&(f=f.discriminators[o[l+"."+f.options.discriminatorKey]]||f,s[d]=o[l+"."+f.options.discriminatorKey]);for(let h of a){if(n[h]===null||Object.keys(n).length===0)continue;let g=h.indexOf("."),_=g===-1?null:h.substring(g),S;if(_==null||f==null?S=p:(_=Uwe(_),S=Vwe(f,_,s)),S==null){if(!r)return;let w=_==null?d+".0":d+".0"+_;throw new Error(`Could not find path "${w}" in schema`)}typeof o[h]=="object"?o[h]=b9t(i,S,o[h]):o[h]=S.castForQuery(null,o[h])}}}});var aI=m((Lbr,Wwe)=>{"use strict";var v9t=fE(),S9t=sE();Wwe.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let i=0;i<n;++i){let s=r[i];if(!s.startsWith("+")&&v9t(e[s])&&e[s])return S9t(e[s])?t(e[s]):!!e[s]}return!1}});var Ywe=m((jbr,Jwe)=>{"use strict";Jwe.exports=function(e,r){return e===r||r.startsWith(e+".")}});var Qwe=m(Li=>{"use strict";var yY=["__proto__","constructor","prototype"],uI=Li.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return Li.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(A9t(e))return Li.cloneObject(e,r);if(e.valueOf)return e.valueOf()};Li.cloneObject=function(e,r){let n=r&&r.minimize,i={},s=Object.keys(e),o=s.length,a=!1,u,c="",l=0;for(l=0;l<o;++l)c=s[l],yY.indexOf(c)===-1&&(u=uI(e[c],r),(!n||typeof u<"u")&&(a||(a=!0),i[c]=u));return n?a&&i:i};Li.cloneArray=function(e,r){let n=[],i=e.length,s=0;for(;s<i;s++)n.push(uI(e[s],r));return n};Li.merge=function t(e,r){let n=Object.keys(r);for(let i of n)yY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=r[i]:Li.isObject(r[i])?t(e[i],r[i]):e[i]=r[i])};Li.mergeClone=function t(e,r){let n=Object.keys(r);for(let i of n)yY.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=uI(r[i]):Li.isObject(r[i])?t(e[i],r[i]):e[i]=uI(r[i]))};Li.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};Li.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var w9t=Object.prototype.toString;Li.toString=function(t){return w9t.call(t)};var A9t=Li.isObject=function(t){return Li.toString(t)=="[object Object]"};Li.keys=Object.keys;Li.create=typeof Object.create=="function"?Object.create:C9t;function C9t(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}Li.inherits=function(t,e){t.prototype=Li.create(e.prototype),t.prototype.constructor=t};Li.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var Zwe=m((Kbr,Xwe)=>{var FE=1e3,BE=FE*60,qE=BE*60,ay=qE*24,T9t=ay*7,O9t=ay*365.25;Xwe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return x9t(t);if(r==="number"&&isFinite(t))return e.long?R9t(t):I9t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function x9t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*O9t;case"weeks":case"week":case"w":return r*T9t;case"days":case"day":case"d":return r*ay;case"hours":case"hour":case"hrs":case"hr":case"h":return r*qE;case"minutes":case"minute":case"mins":case"min":case"m":return r*BE;case"seconds":case"second":case"secs":case"sec":case"s":return r*FE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function I9t(t){var e=Math.abs(t);return e>=ay?Math.round(t/ay)+"d":e>=qE?Math.round(t/qE)+"h":e>=BE?Math.round(t/BE)+"m":e>=FE?Math.round(t/FE)+"s":t+"ms"}function R9t(t){var e=Math.abs(t);return e>=ay?cI(t,e,ay,"day"):e>=qE?cI(t,e,qE,"hour"):e>=BE?cI(t,e,BE,"minute"):e>=FE?cI(t,e,FE,"second"):t+" ms"}function cI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var gY=m((Ubr,e9e)=>{function D9t(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Zwe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}e9e.exports=D9t});var t9e=m((Na,lI)=>{Na.formatArgs=M9t;Na.save=P9t;Na.load=N9t;Na.useColors=k9t;Na.storage=F9t();Na.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Na.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function k9t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function M9t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+lI.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Na.log=console.debug||console.log||(()=>{});function P9t(t){try{t?Na.storage.setItem("debug",t):Na.storage.removeItem("debug")}catch{}}function N9t(){let t;try{t=Na.storage.getItem("debug")||Na.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function F9t(){try{return localStorage}catch{}}lI.exports=gY()(Na);var{formatters:B9t}=lI.exports;B9t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var n9e=m((vs,pI)=>{var q9t=require("tty"),dI=require("util");vs.init=G9t;vs.log=K9t;vs.formatArgs=j9t;vs.save=U9t;vs.load=V9t;vs.useColors=L9t;vs.destroy=dI.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");vs.colors=[6,2,3,4,5,1];try{let t=x3();t&&(t.stderr||t).level>=2&&(vs.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}vs.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function L9t(){return"colors"in vs.inspectOpts?!!vs.inspectOpts.colors:q9t.isatty(process.stderr.fd)}function j9t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+pI.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=$9t()+e+" "+t[0]}function $9t(){return vs.inspectOpts.hideDate?"":new Date().toISOString()+" "}function K9t(...t){return process.stderr.write(dI.formatWithOptions(vs.inspectOpts,...t)+`
`)}function U9t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function V9t(){return process.env.DEBUG}function G9t(t){t.inspectOpts={};let e=Object.keys(vs.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=vs.inspectOpts[e[r]]}pI.exports=gY()(vs);var{formatters:r9e}=pI.exports;r9e.o=function(t){return this.inspectOpts.colors=this.useColors,dI.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};r9e.O=function(t){return this.inspectOpts.colors=this.useColors,dI.inspect(t,this.inspectOpts)}});var i9e=m((Vbr,EY)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?EY.exports=t9e():EY.exports=n9e()});var o9e=m(s9e=>{"use strict";var di=s9e;di.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(di.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};di.distinct.select=di.distinct.slice=di.distinct.sort=di.distinct.limit=di.distinct.skip=di.distinct.batchSize=di.distinct.hint=di.distinct.tailable=!0;di.findOneAndUpdate=di.findOneAndRemove=function(t){let e=Object.keys(di.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};di.findOneAndUpdate.limit=di.findOneAndUpdate.skip=di.findOneAndUpdate.batchSize=di.findOneAndUpdate.tailable=!0;di.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(di.count),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};di.count.slice=di.count.batchSize=di.count.tailable=!0});var bY=m((Nl,a9e)=>{"use strict";Nl.isNode=typeof process<"u"&&typeof a9e=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;Nl.isMongo=!Nl.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";Nl.isBrowser=!Nl.isNode&&!Nl.isMongo&&typeof window<"u";Nl.type=Nl.isNode?"node":Nl.isMongo?"mongo":Nl.isBrowser?"browser":"unknown"});var ES=m((u9e,c9e)=>{"use strict";var _Y=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function vY(){}for(let t=0,e=_Y.length;t<e;++t){let r=_Y[t];vY.prototype[r]=H9t(r)}c9e.exports=u9e=vY;vY.methods=_Y;function H9t(t){return function(){throw new Error("collection."+t+" not implemented")}}});var p9e=m((l9e,d9e)=>{"use strict";var z9t=ES(),SY=class extends z9t{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async count(e,r){return this.collection.count(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};d9e.exports=l9e=SY});var h9e=m((Hbr,f9e)=>{"use strict";var wY=bY();if(wY.type=="unknown")throw new Error("Unknown environment");f9e.exports=wY.isNode?p9e():wY.isMongo?ES():ES()});var OY=m((y9e,g9e)=>{"use strict";var W9t=require("assert"),J9t=require("util"),xr=Qwe(),lf=i9e()("mquery");function Te(t,e){if(!(this instanceof Te))return new Te(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?xr.clone(r._conditions):{},this._fields=r._fields?xr.clone(r._fields):void 0,this._updateDoc=r._updateDoc?xr.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}var uy="$geoWithin";Object.defineProperty(Te,"use$geoWithin",{get:function(){return uy=="$geoWithin"},set:function(t){t===!0?uy="$geoWithin":uy="$within"}});Te.prototype.toConstructor=function(){function e(n,i){if(!(this instanceof e))return new e(n,i);Te.call(this,n,i)}xr.inherits(e,Te);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=xr.clone(this._conditions),r._fields=xr.clone(this._fields),r._updateDoc=xr.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};Te.prototype.setOptions=function(t){if(!(t&&xr.isObject(t)))return this;let e=xr.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let i=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,i)}else this.options[r]=t[r];return this};Te.prototype.collection=function(e){return this._collection=new Te.Collection(e),this};Te.prototype.collation=function(t){return this.options.collation=t,this};Te.prototype.$where=function(t){return this._conditions.$where=t,this};Te.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};Te.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};Te.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};Te.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};Te.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){Te.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});Te.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};Te.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};Te.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(xr.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&xr.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new Te,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};Te.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=uy,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||uy]={$box:e},this};Te.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||uy]={$polygon:t},this};Te.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",i=this._geoComparison||uy;return r[i]={},r[i][n]=[e.center,e.radius],"unique"in e&&(r[i].$uniqueDocs=!!e.unique),this};Te.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),i=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[i]=r.center;let s="maxDistance"in r?r.maxDistance:null;s!=null&&(n.$maxDistance=s),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(J9t.format("Invalid GeoJSON specified for %s",i));n[i]={$geometry:r.center},"maxDistance"in r&&(n[i].$maxDistance=r.maxDistance),"minDistance"in r&&(n[i].$minDistance=r.minDistance)}return this};Te.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};Te.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};Te.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,i,s;if((n=="string"||xr.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),i=0,s=e.length;i<s;++i){let o=e[i];if(!o)continue;let a=o[0]=="-"?0:1;a===0&&(o=o.substring(1)),r[o]=a}return this}if(xr.isObject(e)){let o=xr.keys(e);for(i=0;i<o.length;++i)r[o[i]]=e[o[i]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};Te.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};Te.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let i=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");Y9t(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&i=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let s=n[0]=="-"?-1:1;s===-1&&(n=n.substring(1)),m9e(this.options,n,s)}return this}if(xr.isObject(t)){let s=xr.keys(t);for(e=0;e<s.length;++e)n=s[e],m9e(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return Q9t(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var AY={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function m9e(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let i=String(r||1).toLowerCase();if(i=AY[i],!i)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=i}function Y9t(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=AY[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function Q9t(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let i=String(r||1).toLowerCase();if(i=AY[i],!i)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,i)})}["limit","skip","batchSize","comment"].forEach(function(t){Te.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});Te.prototype.maxTime=Te.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};Te.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(xr.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};Te.prototype.j=function(e){return this.options.j=e,this};Te.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};Te.prototype.read=Te.prototype.setReadPreference=function(t){return arguments.length>1&&!Te.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),Te.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=xr.readPref(t),this};Te.prototype.readConcern=Te.prototype.r=function(t){return this.options.readConcern=xr.readConcern(t),this};Te.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};Te.prototype.writeConcern=Te.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};Te.prototype.wtimeout=Te.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};Te.prototype.merge=function(t){if(!t)return this;if(!Te.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof Te?(t._conditions&&xr.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),xr.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),xr.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),xr.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(xr.merge(this._conditions,t),this)};Te.prototype.find=function(t){return this.op="find",Te.canMerge(t)&&this.merge(t),this};Te.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),lf("_find",this._collection.collectionName,e,r),this._collection.find(e,r)};Te.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),lf("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};Te.prototype.findOne=function(t){return this.op="findOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),lf("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};Te.prototype.count=function(t){return this.op="count",this._validate(),Te.canMerge(t)&&this.merge(t),this};Te.prototype._count=async function(){let e=this._conditions,r=this._optionsForExec();return lf("count",this._collection.collectionName,e,r),this._collection.count(e,r)};Te.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),Te.canMerge(t)&&this.merge(t),this};Te.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return lf("distinct",this._collection.collectionName,e,r),this._collection.distinct(this._distinctDoc,e,r)};Te.prototype.updateMany=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),CY(this,"updateMany",e,r,n)};Te.prototype._updateMany=async function(){return TY(this,"updateMany")};Te.prototype.updateOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),CY(this,"updateOne",e,r,n)};Te.prototype._updateOne=async function(){return TY(this,"updateOne")};Te.prototype.replaceOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),this.setOptions({overwrite:!0}),CY(this,"replaceOne",e,r,n)};Te.prototype._replaceOne=async function(){return TY(this,"replaceOne")};function CY(t,e,r,n,i){return t.op=e,Te.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),xr.isObject(i)&&t.setOptions(i),t}async function TY(t,e){let r=t._optionsForExec(),n=t._conditions,i=t._updateForExec();return lf("update",t._collection.collectionName,n,i,r),t._collection[e](n,i,r)}Te.prototype.deleteOne=function(t){return this.op="deleteOne",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return lf("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};Te.prototype.deleteMany=function(t){return this.op="deleteMany",Te.canMerge(t)&&this.merge(t),this};Te.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return lf("deleteOne",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)};Te.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),arguments.length===1&&(e=t,t=r=void 0),Te.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};Te.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};Te.prototype.findOneAndRemove=Te.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndRemove",this._validate(),Te.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};Te.prototype._findOneAndRemove=async function(){let t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)};Te.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};Te.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),W9t.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};Te.prototype.then=async function(t,e){return this.exec().then(t,e)};Te.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),lf("cursor",this._collection.collectionName,t,e),this._collection.findCursor(t,e)};Te.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};Te.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};Te.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};Te.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof Te?t._updateDoc&&xr.mergeClone(this._updateDoc,t._updateDoc):xr.mergeClone(this._updateDoc,t)};Te.prototype._optionsForExec=function(){return xr.clone(this.options)};Te.prototype._fieldsForExec=function(){return xr.clone(this._fields)};Te.prototype._updateForExec=function(){let t=xr.clone(this._updateDoc),e=xr.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};Te.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};Te.permissions=o9e();Te._isPermitted=function(t,e){let r=Te.permissions[e];return r?r[t]!==!0:!0};Te.prototype._validate=function(t){let e,r;if(t===void 0){if(r=Te.permissions[this.op],typeof r!="function")return!0;e=r(this)}else Te._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};Te.canMerge=function(t){return t instanceof Te||xr.isObject(t)};Te.setGlobalTraceFunction=function(t){Te.traceFunction=t};Te.utils=xr;Te.env=bY();Te.Collection=h9e();Te.BaseCollection=ES();g9e.exports=y9e=Te});var xY=m((zbr,E9e)=>{"use strict";E9e.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let i=e.length,s={};for(let o=0;o<i;++o){let a=e[o];if(!a)continue;let u=a[0]=="-"?0:1;!r&&u===0&&(a=a.substring(1)),s[a]=u}return s}});var v9e=m((Wbr,_9e)=>{"use strict";_9e.exports=function(e,r){let n=Object.keys(e).map(i=>Object.keys(e[i])).reduce((i,s)=>i.concat(s),[]);return r.filter(i=>b9e(i,n))};function b9e(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(s=>b9e(s,e))!=null:!1;let n=r.indexOf("."),i=n===-1?r:r.slice(0,n);return e.find(s=>s.includes("$["+i+"]"))!=null}});var fI=m((Jbr,S9e)=>{"use strict";S9e.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let i=0;i<n;++i)if(r[i][0]==="$")return!0;return!1}});var IY=m((Ybr,w9e)=>{"use strict";var X9t=fI(),{trustedSymbol:Z9t}=oE();w9e.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let i=e[n];if(!(i!=null&&i[Z9t])){if(n==="$and"||n==="$or"){t(i);continue}if(X9t(i)){let s=Object.keys(i);if(s.length===1&&s[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var C9e=m((Qbr,A9e)=>{"use strict";A9e.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var x9e=m((Xbr,O9e)=>{"use strict";var eAt=hE(),tAt=aI();O9e.exports=function(e,r,n){if(n==null)return;let i=Object.keys(n);if(r=r||{},tAt(e))for(let s of i){T9e(r,s)?r[s]===0&&delete e[s]:e[s]=1;let o=n[s]?.refPath;typeof o=="string"&&(T9e(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(eAt(e))for(let s of i){r[s]==null&&delete e[s];let o=n[s]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function T9e(t,e){let r=e.split("."),n=r.length,i=r[0];for(let s=1;s<n;++s){if(t[i]!=null||t[i+".$"]!=null)return!0;i+="."+r[s]}return t[i]!=null||t[i+".$"]!=null}});var k9e=m((Zbr,D9e)=>{"use strict";var I9e=G0(),rAt=Hv(),R9e=LO().flatten;D9e.exports=function(t,e,r,n,i){let s=Object.keys(r||{}),o={},a={},u={},c={},l=s.length,d=!1,p,f,h;for(h=0;h<l;++h)if(s[h].startsWith("$")){if(d=!0,s[h]==="$push"||s[h]==="$addToSet"){let U=Object.keys(r[s[h]]);for(let k=0;k<U.length;++k)p=r[s[h]][U[k]],p&&p.$each?c[U[k]]=(c[U[k]]||[]).concat(p.$each):c[U[k]]=(c[U[k]]||[]).concat([p]);continue}let I=R9e(r[s[h]],null,null,e),F=Object.keys(I),B=F.length;for(let U=0;U<B;++U){let k=rAt(F[U]);f=s[h],!k.includes("$")&&(f==="$set"||f==="$setOnInsert"||f==="$pull"||f==="$pullAll"?(a[k]=I[F[U]],u[k]=f==="$pull"||f==="$pullAll"):f==="$unset"&&(a[k]=void 0),o[k]=!0)}}d||(a=R9e(r,null,null,e),o=Object.keys(a));let g=Object.keys(a),_=g.length,S=[],w=[],C=[],A=t;function O(I,F){let B=e._getSchema(g[I]);if(B!=null&&!(B.instance==="Mixed"&&B.path!==g[I]))if(F&&Array.isArray(F.$in))F.$in.forEach((U,k)=>{S.push(function(H){B.doValidate(U,function(ie){ie&&(ie.path=g[k]+".$in."+k,w.push(ie)),H(null)},A,{updateValidator:!0})})});else{if(u[g[I]]&&B.$isMongooseArray)return;B.$isMongooseDocumentArrayElement&&F!=null&&F.$__!=null?(C.push(g[I]),S.push(function(U){B.doValidate(F,function(k){if(k)if(k.errors)for(let H of Object.keys(k.errors)){let ie=k.errors[H];ie.path=g[I]+"."+H,w.push(ie)}else k.path=g[I],w.push(k);return U(null)},A,{updateValidator:!0})})):S.push(function(U){for(let k of C)if(g[I].startsWith(k+"."))return U(null);B.$isSingleNested&&C.push(g[I]),B.doValidate(F,function(k){if(B.schema!=null&&B.schema.options.storeSubdocValidationError===!1&&k instanceof I9e)return U(null);k&&(k.path=g[I],w.push(k)),U(null)},A,{updateValidator:!0})})}}for(h=0;h<_;++h)O(h,a[g[h]]);let x=Object.keys(c);for(let I of x){let F=e._getSchema(I);if(F&&F.$isMongooseDocumentArray)S.push(function(B){F.doValidate(c[I],M(I,w,B),n&&n.context==="query"?t:null)});else{F=e._getSchema(I+".0");for(let B of c[I])S.push(function(U){F.doValidate(B,M(I,w,U),n&&n.context==="query"?t:null,{updateValidator:!0})})}}if(i!=null){let I=S.length;if(I===0)return R(i);for(let F of S)F(function(){--I<=0&&R(i)});return}return function(I){let F=S.length;if(F===0)return R(I);for(let B of S)B(function(){--F<=0&&R(I)})};function R(I){if(w.length){let F=new I9e(null);for(let B of w)F.addError(B.path,B);return I(F)}I(null)}function M(I,F,B){return function(U){U&&(U.path=I,F.push(U)),B(null)}}}});var yI=m((e_r,H9e)=>{"use strict";var _S=ho(),nAt=mO(),DY=U0(),go=Qt(),vh=MO(),M9e=Mwe(),P9e=G0(),{applyGlobalMaxTimeMS:vS,applyGlobalDiskUse:SS}=fY(),iAt=PW(),sAt=hY(),oAt=mY(),aAt=ey(),uAt=zwe(),mI=Wv(),cAt=XJ(),Fa=zn(),lAt=pc(),wS=qv(),dAt=Il().internalToObjectOptions,pAt=hE(),fAt=aI(),hAt=KO(),N9e=Ywe(),B9e=lu(),pu=OY(),mAt=xY(),yAt=v9e(),gAt=IY(),EAt=C9e(),bAt=x9e(),q9e=eY(),hI=K0(),_At=k9e(),bS=require("util"),mn=Ot(),vAt=lx().queryMiddlewareFunctions,SAt=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),wAt=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function we(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new DY,this._executionStack=null;let i=Object.keys(e);for(let o of i)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model&&this.model._mapreduce&&this.lean(),pu.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let s=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;s!=null&&(this.options.collation=s)}function L9e(t){if(t==null||typeof t!="object"||Object.keys(t).length===0)return!0;for(let e of["$and","$or","$nor"])if(Array.isArray(t[e])&&(t[e].length===0||t[e].every(r=>L9e(r))))return!0;return!1}function jE(t,e){if(e&&e.requireFilter&&L9e(t))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}we.prototype=new pu;we.prototype.constructor=we;we.prototype.count=void 0;we.prototype.findOneAndRemove=void 0;we.base=pu.prototype;Object.defineProperty(we.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});we.use$geoWithin=pu.use$geoWithin;we.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,a){if(!(this instanceof n))return new n(o,a);this._mongooseOptions=Fa(i._mongooseOptions),we.call(this,o,a||null,e,r)};bS.inherits(n,e.Query);let i=n.prototype;i.options={};let s=Object.assign({},this.options);return s.sort!=null&&(i.sort(s.sort),delete s.sort),i.setOptions(s),i.op=this.op,i._validateOp(),i._conditions=Fa(this._conditions),i._fields=Fa(this._fields),i._update=Fa(this._update,{flattenDecimals:!1}),i._path=this._path,i._distinct=this._distinct,i._collection=this._collection,i._mongooseOptions=this._mongooseOptions,n};we.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._validateOp(),r._conditions=Fa(this._conditions),r._fields=Fa(this._fields),r._update=Fa(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};we.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r={};return r[t]={$slice:e},this.select(r),this};var AAt=new Set(vAt);we.prototype._validateOp=function(){this.op!=null&&!AAt.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};we.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};we.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=mI(e)}catch{throw new _S("Number",e,"limit")}return this.options.limit=e,this};we.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=mI(e)}catch{throw new _S("Number",e,"skip")}return this.options.skip=e,this};we.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};we.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),i;this.model!=null&&mn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?i=this.model.db.options.sanitizeProjection:this.model!=null&&mn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?i=this.model.base.options.sanitizeProjection:i=this._mongooseOptions.sanitizeProjection;function s(o){return typeof o=="string"&&i?o=1:o}if(e=mAt(e,!0),mn.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,a])=>{a?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=s(a)):Object.keys(n).forEach(u=>{N9e(o,u)&&(delete r[u],delete n[u])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,a])=>{a?Object.keys(n).forEach(u=>{N9e(o,u)&&(delete r[u],delete n[u])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=s(a))});else{let o=Object.keys(e);for(let a=0;a<o.length;++a){let u=e[o[a]],c=o[a];r[c]=s(u),n[c]=s(u)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};we.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};we.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};we.prototype.read=function(e,r){return typeof e=="string"?(e=iAt(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};we.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${bS.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${bS.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${bS.inspect(this._conditions)}, ${bS.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};we.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};we.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};we.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};we.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};we.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};we.prototype.getOptions=function(){return this.options};we.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&Fa(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let i=0;i<n;++i)this.populate(r[i])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&EAt(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=mI(t.limit)}catch{throw new _S("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=mI(t.skip)}catch{throw new _S("Number",t.skip,"skip")}for(let r of Object.keys(t))if(SAt.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};we.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};we.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};we.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};we.prototype.getFilter=function(){return this._conditions};we.prototype.getQuery=function(){return this._conditions};we.prototype.setQuery=function(t){this._conditions=t};we.prototype.getUpdate=function(){return this._update};we.prototype.setUpdate=function(t){this._update=t};we.prototype._fieldsForExec=function(){return this._fields==null||Object.keys(this._fields).length===0?null:Fa(this._fields)};we.prototype._updateForExec=function(){let t=Fa(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let i=e[r];i[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[i]=t[i],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):i==="$set"&&n.$set||(n[i]=t[i])}return n};we.prototype._optionsForExec=function(t){let e=Fa(this.options);if(delete e.populate,t=t||this.model,!t)return e;sAt(t.schema,e),oAt(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!this.options.hasOwnProperty("session")&&r?.session!=null&&(e.session=r.session);let n=t&&t.schema&&t.schema.options&&t.schema.options.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let i=this._fieldsForExec();i!=null&&(e.projection=i)}if(this._mongooseOptions.populate){if(e.readPreference)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readPreference===void 0&&(i.options||(i.options={}),i.options.readPreference=e.readPreference);if(e.readConcern)for(let i of Object.values(this._mongooseOptions.populate))i.options?.readConcern===void 0&&(i.options||(i.options={}),i.options.readConcern=e.readConcern)}return e};we.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};we.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};we.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||mn.hasUserDefinedProperty(r,e))return r[e];if(mn.hasUserDefinedProperty(n,e))return n[e]};we.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};we.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof _S)))return this.error(null)};we.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};we.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&gAt(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function j9e(t){try{uAt(t)}catch(e){t.error(e)}}we.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this._userProvidedFields||{};vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let n={session:this&&this.options&&this.options.session||null,lean:e.lean||null},i=this._optionsForExec(),s=this._conditions,o=i.projection,a=await this.mongooseCollection.find(s,i);if(i.explain)return a.explain();let u=await a.toArray();if(u.length===0)return u;if(!e.populate){let l=this.schema.options.versionKey;return e.lean&&e.lean.versionKey===!1&&l&&u.forEach(d=>{l in d&&delete d[l]}),e.lean?K9e(this.model.schema,u,null,n):this._completeMany(u,o,r,n)}let c=wS.preparePopulationOptionsMQ(this,e);return e.lean?this.model.populate(u,c):(u=await this._completeMany(u,o,r,n),await this.model.populate(u,c),u)};we.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new go("Query.prototype.find() no longer accepts a callback");return this.op="find",pu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new vh(t,"filter","find")),this};we.prototype.merge=function(t){if(!t)return this;let e={overwrite:!0};return t instanceof we?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),mn.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),mn.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),mn.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),mn.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),mn.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(mn.merge(this._conditions,{_id:t},e),this):(t&&t.$__&&(t=t.toObject(dAt)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>mn.isPOJO(r)?mn.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>mn.isPOJO(r)?mn.merge({},r):r))),mn.merge(this._conditions,t,e),this)};we.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};we.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let i=this.model,s=this._userProvidedFields||{},o=this._mongooseOptions,a=this.options;if(!a.lean&&o.lean&&(a.lean=o.lean),a.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean&&o.lean.versionKey===!1&&c&&c in t&&delete t[c],o.lean?kY(i.schema,t,null,e,a,n):F9e(i,t,e,a,r,s,null,n)}let u=wS.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return i.populate(t,u).then(c=>{kY(i.schema,c,null,e,a,n)},c=>{n(c)});F9e(i,t,e,a,r,s,[],(c,l)=>{if(c!=null)return n(c);i.populate(l,u).then(d=>{n(null,d)},d=>{n(d)})})};we.prototype._completeMany=async function(e,r,n,i){let s=this.model;return Promise.all(e.map(o=>new Promise((a,u)=>{let c=o;o=wS.createModel(s,o,r,n),i.session!=null&&o.$session(i.session),o.$init(c,i,l=>{if(l!=null)return u(l);a(o)})})))};we.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=await this.mongooseCollection.findOne(this._conditions,e);return new Promise((n,i)=>{this._completeOne(r,null,e.projection,(s,o)=>{if(s)return i(s);n(o)})})};we.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new go("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",this._validateOp(),r&&this.setOptions(r),e&&this.select(e),pu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new vh(t,"filter","findOne")),this};we.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(n){this.error(n)}if(this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=this._conditions;return this.mongooseCollection.countDocuments(r,e)};we.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};we.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};we.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new go("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",this._validateOp(),t!=null&&this.setOptions(t),this};we.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new go("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",this._validateOp(),pu.canMerge(t)&&this.merge(t),e!=null&&this.setOptions(e),this};we.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,e)};we.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new go("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",this._validateOp(),pu.canMerge(e)?(this.merge(e),AS(this)):e!=null&&this.error(new vh(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};we.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e&&e.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let i of n){let s=i[0]=="-"?-1:1;s===-1&&(i=i.slice(1)),!hI.has(i)&&(r[i]=s)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let i=""+n[0];hI.has(i)||(r[i]=RY(n[1],i))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))hI.has(n)||(r[n]=RY(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!hI.has(n)&&(r[n]=RY(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function RY(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}we.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new go("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),pu.canMerge(e)?(this.merge(e),AS(this)):e!=null&&this.error(new vh(e,"filter","deleteOne")),this};we.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};we.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new go("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",pu.canMerge(t)?(this.merge(t),AS(this)):t!=null&&this.error(new vh(t,"filter","deleteMany")),this};we.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function F9e(t,e,r,n,i,s,o,a){if(n.includeResultMetadata&&e==null)return u(null),null;wS.createModelAndInit(t,e,i,s,n,o,u);function u(c,l){if(c)return a(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,a(null,r);n.session!=null&&l.$session(n.session),a(null,l)}}function AS(t){if(!t||!t.model||!t.model.schema)return;let e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}we.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new go("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}pu.canMerge(t)?this.merge(t):t!=null&&this.error(new vh(t,"filter","findOneAndUpdate")),e&&this._mergeUpdate(e),r=r?Fa(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),j9e(this),this.error())throw this.error();vS(this.options,this.model.db.options,this.model.base.options),SS(this.options,this.model.db.options,this.model.base.options),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let e=this._optionsForExec(this.model);$9e(e),this._update=this._castUpdate(this._update);let r=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=q9e(this._conditions,this.model.schema,this._update,r),!this._update||Object.keys(this._update).length===0)if(e.upsert){let o=Fa(this._update);delete o._id,this._update={$set:o}}else return this._executionStack=null,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Object.keys(this._update.$set).length===0&&delete this._update.$set}MY(this,"runValidators",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let i=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,e);for(let o of this._transforms)i=o(i);let s=e.includeResultMetadata?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,e.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new go("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validateOp(),this._validate(),pu.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};we.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),i=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)i=o(i);let s=e?i.value:i;return new Promise((o,a)=>{this._completeOne(s,i,n.projection,(u,c)=>{if(u)return a(u);o(c)})})};we.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new go("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validateOp(),this._validate(),pu.canMerge(t)?this.merge(t):t!=null&&this.error(new vh(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};we.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();$9e(r);let n=this.options.includeResultMetadata,i={skipId:!0};"strict"in this._mongooseOptions&&(i.strict=this._mongooseOptions.strict);let s=MY(this,"runValidators",!1);try{let u=new this.model(this._update,null,i);if(s)await u.validate();else if(u.$__.validationError)throw u.$__.validationError;this._update=u.toBSON()}catch(u){if(u instanceof P9e)throw u;let c=new P9e;throw c.errors[u.path]=u,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let u of this._transforms)o=u(o);let a=n?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,r.projection,(l,d)=>{if(l)return c(l);u(d)})})};we.prototype.findById=function(t,e,r){return this.findOne({_id:t},e,r)};we.prototype.findByIdAndUpdate=function(t,e,r){return this.findOneAndUpdate({_id:t},e,r)};we.prototype.findByIdAndDelete=function(t,e){return this.findOneAndDelete({_id:t},e)};function $9e(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function MY(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function kY(t,e,r,n,i,s){if(i.lean&&typeof i.lean.transform=="function"){i.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let a=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,u=t.childSchemas[o].schema,c=B9e.get(a,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)i.lean.transform(c[l]);else i.lean.transform(c);kY(u,c,a,n,i)}}return s?s(null,e):void 0}return i.includeResultMetadata?s(null,n):s(null,e)}function K9e(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let i of e)n.lean.transform(i);for(let i=0;i<t.childSchemas.length;i++){let s=r?r+"."+t.childSchemas[i].model.path:t.childSchemas[i].model.path,o=t.childSchemas[i].schema,a=B9e.get(s,e);if(a!=null){a=a.flat();for(let u=0;u<a.length;u++)n.lean.transform(a[u]);K9e(o,a,s,n)}}}return e}we.prototype._mergeUpdate=function(t){if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Object.keys(t).length===0))if(t instanceof we){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");t._update&&mn.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");mn.mergeClone(this._update,t)}};async function PY(t){if(this._applyTranslateAliases(),this._castConditions(),jE(this._conditions,this.options),j9e(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=Fa(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let s=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=q9e(this._conditions,this.model.schema,this._update,s)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=yAt(this._update,r.arrayFilters)),MY(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}we.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new go("Query.prototype.validate() no longer accepts a callback");await V9e(this,"validate"),n?await e.$validate():await new Promise((i,s)=>{_At(this,this.model.schema,e,r,o=>{if(o!=null)return s(o);i()})}),await U9e(this,null,null,"validate")};we.prototype._updateMany=async function(){return PY.call(this,"updateMany")};we.prototype._updateOne=async function(){return PY.call(this,"updateOne")};we.prototype._replaceOne=async function(){return PY.call(this,"replaceOne")};we.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),NY(this,"updateMany",t,e,r,n)};we.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),NY(this,"updateOne",t,e,r,n)};we.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),NY(this,"replaceOne",t,e,r,n)};function NY(t,e,r,n,i,s){return t.op=e,t._validateOp(),n=n||{},i!=null&&"strict"in i&&(t._mongooseOptions.strict=i.strict),!(r instanceof we)&&r!=null&&r.toString()!=="[object Object]"?t.error(new vh(r,"filter",e)):t.merge(r),mn.isObject(i)&&t.setOptions(i),t._mergeUpdate(n),s&&t.exec(s),t}we.prototype.transform=function(t){return this._transforms.push(t),this};we.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw LE(t,this);break;case"findOne":if(e==null)throw LE(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e&&e.matchedCount===0)throw LE(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw LE(t,this);if(!this.options.includeResultMetadata&&e==null)throw LE(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw LE(t,this);break;default:break}return e}),this};function LE(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new nAt(e.getQuery(),e.model.modelName)),t}we.prototype.isPathSelectedInclusive=function(t){return hAt(this._fields,t)};we.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new go("Query.prototype.exec() no longer accepts a callback");if(typeof e=="string"&&(this.op=e),this.op==null)throw new go("Query must have `op` before executing");if(this.model==null)throw new go("Query must have an associated model before executing");let r=wAt.get(this.op);if(!r)throw new go('Query has invalid `op`: "'+this.op+'"');if(this.options&&this.options.sort&&typeof this.options.sort=="object"&&this.options.sort.hasOwnProperty(""))throw new Error('Invalid field "" passed to sort()');if(this._executionStack!=null){let o=this.toString();o.length>60&&(o=o.slice(0,60)+"...");let a=new go("Query was already executed: "+o);throw this.model.base.options.skipOriginalStackTraces||(a.originalStack=this._executionStack),a}else this._executionStack=this.model.base.options.skipOriginalStackTraces?!0:new Error().stack;let n=null;try{await TAt(this)}catch(o){if(o instanceof DY.skipWrappedFunction)n=o;else throw o}let i,s=null;try{await V9e(this),i=n?n.args[0]:await this[r]();for(let o of this._transforms)i=o(i)}catch(o){o instanceof DY.skipWrappedFunction?i=o.args[0]:s=o,s=this.model.schema._transformDuplicateKeyError(s)}return i=await U9e(this,i,s),await CAt(this),i};function CAt(t){return new Promise((e,r)=>{t._hooks.execPost("exec",t,[],{},n=>{if(n)return r(n);e()})})}function U9e(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}return new Promise((i,s)=>{let o=r?{error:r}:{};t._queryMiddleware.execPost(n||t.op,t,[e],o,(a,u)=>{if(a)return s(a);i(u)})})}function TAt(t){return new Promise((e,r)=>{t._hooks.execPre("exec",t,[],n=>{if(n!=null)return r(n);e()})})}function V9e(t,e){if(t._queryMiddleware!=null)return new Promise((r,n)=>{t._queryMiddleware.execPre(e||t.op,t,[],i=>{if(i!=null)return n(i);r()})})}we.prototype.then=function(t,e){return this.exec().then(t,e)};we.prototype.catch=function(t){return this.exec().then(null,t)};we.prototype.finally=function(t){return this.exec().finally(t)};we.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};we.prototype.pre=function(t){return this._hooks.pre("exec",t),this};we.prototype.post=function(t){return this._hooks.post("exec",t),this};we.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,i=r._baseSchema?r._baseSchema:r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&i.discriminators){let o=Object.values(i.discriminators).find(a=>a.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let s;return"upsert"in this.options&&(s=this.options.upsert),cAt(r,e,{strict:this._mongooseOptions.strict,upsert:s,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};we.prototype.populate=function(){let t=Array.from(arguments);if(!t.some(Boolean))return this;let e=mn.populate.apply(null,t),r=this._mongooseOptions;if(r.lean!=null){let i=r.lean;for(let s of e)(s&&s.options&&s.options.lean)==null&&(s.options=s.options||{},s.options.lean=i)}mn.isObject(r.populate)||(r.populate={});let n=r.populate;for(let i of e){let s=i.path;n[s]&&n[s].populate&&i.populate&&(i.populate=n[s].populate.concat(i.populate)),n[i.path]=i}return this};we.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let i=e[n];Array.isArray(i.populate)&&G9e(r,i.populate,n+".")}return r};function G9e(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&G9e(t,n.populate,r+n.path+".")}we.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&e.hasOwnProperty(r)&&(t=lAt(t.discriminators,e[r])||t);let n={upsert:this.options&&this.options.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return aAt(t.schema,e,n,this)}catch(i){throw typeof i.setModel=="function"&&i.setModel(t),i}};we.prototype._castFields=function(e){let r,n,i,s,o;if(e){i=Object.keys(e),n=[];for(let a=0;a<i.length;++a)s=i[a],e[s].$elemMatch&&(r||(r={}),r[s]=e[s],n.push(s))}if(r){try{o=this.cast(this.model,r)}catch(a){return a}for(let a=0;a<n.length;++a)s=n[a],e[s]=o[s]}return e};we.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&mn.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&mn.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&wS.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&bAt(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};we.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new M9e(this)._markError(r)}return new M9e(this)};we.prototype.tailable=function(t,e){if(t!=null&&typeof t.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};we.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(mn.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&mn.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return we.base.near.apply(this,t)};we.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};Symbol.asyncIterator!=null&&(we.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()});we.prototype.box=function(t,e){return!Array.isArray(t)&&mn.isObject(t)&&(e=t.ur,t=t.ll),we.base.box.call(this,t,e)};we.prototype.center=we.base.circle;we.prototype.centerSphere=function(){arguments[0]!=null&&typeof arguments[0].constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),arguments[1]!=null&&typeof arguments[1].constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),we.base.circle.apply(this,arguments)};we.prototype.selectedInclusively=function(){return fAt(this._fields)};we.prototype.selectedExclusively=function(){return pAt(this._fields)};we.prototype.model;H9e.exports=we});var X9e=m((t_r,Q9e)=>{"use strict";var CS=Qt(),J9e=require("stream").Readable,OAt=lY(),xAt=Wu(),IAt=U0(),Y9e=require("util");function Ba(t){J9e.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._connection,r=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},e?(this.cursor=e.db.aggregate(t._pipeline,t.options||{}),setImmediate(()=>this.emit("cursor",this.cursor))):RAt(r,this,t)}Y9e.inherits(Ba,J9e);function RAt(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r,function(n){if(n!=null){z9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}):t.hooks.execPre("aggregate",r,function(n){if(n!=null){z9e(e,n);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}function z9e(t,e){if(e instanceof IAt.skipWrappedFunction){let r=e.args[0];if(r!=null&&(!Array.isArray(r)||r.length)){let n=new CS('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+Y9e.inspect(r)+'".');t._markError(n),t.listeners("error").length>0&&t.emit("error",n);return}t.emit("cursor",null);return}t._markError(e),t.listeners("error").length>0&&t.emit("error",e)}Ba.prototype._read=function(){let t=this;gI(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";Ba.prototype[Symbol.asyncIterator]=function(){throw new CS(t)}}Object.defineProperty(Ba.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Ba.prototype._markError=function(t){return this._error=t,this};Ba.prototype.close=async function(){if(typeof arguments[0]=="function")throw new CS("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};Ba.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};Ba.prototype.next=async function(){if(typeof arguments[0]=="function")throw new CS("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{gI(this,(n,i)=>{if(n!=null)return r(n);e(i)})})};Ba.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new CS("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},OAt(function(n){return gI(r,n)},t,e)};Symbol.asyncIterator!=null&&(Ba.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});Ba.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(W9e)===-1&&this.map(W9e),this};Ba.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function W9e(t){return t==null?{done:!0}:{value:t,done:!1}}Ba.prototype.addCursorFlag=function(t,e){let r=this;return DAt(this,function(){r.cursor.addCursorFlag(t,e)}),this};function DAt(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function gI(t,e){let r=e;if(t._transforms.length&&(r=function(n,i){if(n||i===null&&!t._mongooseOptions.transformNull)return e(n,i);e(n,t._transforms.reduce(function(s,o){return o(s)},i))}),t._error)return xAt(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("error",e),t.once("cursor",function(){gI(t,e)})}Q9e.exports=Ba});var FY=m((r_r,Z9e)=>{"use strict";Z9e.exports=function(e,r,n){let i=r&&r.discriminatorMapping;if(n=n||"",i&&!i.isRoot){let s=e,o=(n.length>0?n+".":n)+i.key,a=i.value;if(s[0]!=null&&s[0].$match&&(s[0].$match[o]===void 0||s[0].$match[o]===a))s[0].$match[o]=a;else if(s[0]!=null&&s[0].$geoNear)s[0].$geoNear.query=s[0].$geoNear.query||{},s[0].$geoNear.query[o]=a;else if(s[0]!=null&&s[0].$search)if(s[1]&&s[1].$match!=null)s[1].$match[o]=s[1].$match[o]||a;else{let u={};u[o]=a,s.splice(1,0,{$match:u})}else{let u={};u[o]=a,s.unshift({$match:u})}}}});var tAe=m((n_r,eAe)=>{"use strict";eAe.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let s of Object.keys(n))kAt(n[s]);let i=Object.keys(r)[0];if(i&&typeof r[i]=="object"){let s=r[i];for(let o of Object.keys(s))s[o]!=null&&s[o].$function!=null&&typeof s[o].$function.body=="function"&&(s[o].$function.body=s[o].$function.body.toString())}if(r.$facet!=null)for(let s of Object.keys(r.$facet))t(r.$facet[s])}};function kAt(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var qY=m((i_r,oAe)=>{"use strict";var iAe=X9e(),cy=Qt(),sAe=yI(),{applyGlobalMaxTimeMS:MAt,applyGlobalDiskUse:PAt}=fY(),NAt=zn(),FAt=$o(),BY=FY(),BAt=tAe(),rAe=Ot(),{modelSymbol:qAt}=ot(),LAt=sAe.prototype.read,jAt=sAe.prototype.readConcern,nAe=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function nr(t,e){this._pipeline=[],e==null||e[qAt]?this._model=e:this._connection=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}nr.prototype.options;nr.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!t.hasOwnProperty("session")&&e?.session!=null&&(t.session=e.session),t};nr.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};nr.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every($At))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};nr.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};nr.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};nr.prototype.near=function(t){if(t==null)throw new cy("Aggregate `near()` must be called with non-nullish argument");if(t.near==null)throw new cy("Aggregate `near()` argument must have a `near` property");let e=Array.isArray(t.near)?t.near:t.near.coordinates;if(typeof t.near=="object"&&(!Array.isArray(e)||e.length<2||e.find(n=>typeof n!="number")))throw new cy(`Aggregate \`near()\` argument has invalid coordinates, got "${e}"`);let r={};return r.$geoNear=t,this.append(r)};"group match skip limit out densify fill".split(" ").forEach(function(t){nr.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});nr.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};nr.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};nr.prototype.count=function(t){return this.append({$count:t})};nr.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};nr.prototype.lookup=function(t){return this.append({$lookup:t})};nr.prototype.graphLookup=function(t){let e={};if(t){if(!rAe.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");rAe.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};nr.prototype.sample=function(t){return this.append({$sample:{size:t}})};nr.prototype.sort=function(t){let e={};if(FAt(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};nr.prototype.unionWith=function(t){return this.append({$unionWith:t})};nr.prototype.read=function(t,e){return LAt.call(this,t,e),this};nr.prototype.readConcern=function(t){return jAt.call(this,t),this};nr.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!nAe.has(e)||typeof r=="string"&&!nAe.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};nr.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new cy("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");BY(this._pipeline,this._model.schema),await new Promise((o,a)=>{r.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return r.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})});let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let i=null;try{i=await n.explain(e)}catch(o){await new Promise((a,u)=>{let c={error:o};r.hooks.execPost("aggregate",this,[null],c,l=>l?u(l):a())})}let s={error:null};return await new Promise((o,a)=>{r.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};nr.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};nr.prototype.hint=function(t){return this.options.hint=t,this};nr.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};nr.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};nr.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new iAe(this)};nr.prototype.collation=function(t){return this.options.collation=t,this};nr.prototype.facet=function(t){return this.append({$facet:t})};nr.prototype.search=function(t){return this.append({$search:t})};nr.prototype.pipeline=function(){return this._pipeline};nr.prototype.exec=async function(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new cy("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new cy("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let e=this._model,r=this._model.collection;if(MAt(this.options,e.db.options,e.base.options),PAt(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new iAe(this);if(BY(this._pipeline,this._model.schema),BAt(this._pipeline),await new Promise((o,a)=>{e.hooks.execPre("aggregate",this,u=>{if(u){let c={error:u};return e.hooks.execPost("aggregate",this,[null],c,l=>{a(l)})}else o()})}),!this._pipeline.length)throw new cy("Aggregate has empty pipeline");let n=NAt(this.options||{}),i;try{i=await(await r.aggregate(this._pipeline,n)).toArray()}catch(o){await new Promise((a,u)=>{let c={error:o};e.hooks.execPost("aggregate",this,[null],c,l=>{if(l)return u(l);a()})})}let s={error:null};return await new Promise((o,a)=>{e.hooks.execPost("aggregate",this,[i],s,u=>u?a(u):o())}),i};nr.prototype.then=function(t,e){return this.exec().then(t,e)};nr.prototype.catch=function(t){return this.exec().then(null,t)};nr.prototype.finally=function(t){return this.exec().finally(t)};Symbol.asyncIterator!=null&&(nr.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()});function $At(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}nr._prepareDiscriminatorPipeline=BY;oAe.exports=nr});var uAe=m((s_r,aAe)=>{"use strict";var KAt=zn(),EI=class{constructor(e){e!=null&&Object.assign(this,KAt(e))}};EI.prototype.__subdocs=null;aAe.exports=EI});var lAe=m((o_r,cAe)=>{"use strict";cAe.exports=function t(e,r){let n=Object.keys(r.paths),i=n.length;for(let s=0;s<i;++s){let o="",a=n[s],u=r.paths[a],c=u.splitPath(),l=c.length,d=e;for(let p=0;p<l&&d!=null;++p){let f=c[p];if(o+=(o.length?".":"")+f,p===l-1){if(typeof d[f]<"u"){u.$isSingleNested?t(d[f],u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(d[f])&&d[f].forEach(g=>t(g,u.schema));break}let h=u.getDefault(e,!1,{skipCast:!0});typeof h<"u"&&(d[f]=h,u.$isSingleNested?t(h,u.caster.schema):u.$isMongooseDocumentArray&&Array.isArray(h)&&h.forEach(g=>t(g,u.schema)))}else d[f]==null&&(d[f]={}),d=d[f]}}}});var jY=m((a_r,dAe)=>{"use strict";dAe.exports=LY;function LY(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let i=t.paths[n];if(i.schema&&(LY(i.schema,e),!!i.schema._applyDiscriminators&&!(i._appliedDiscriminators&&!r))){for(let s of i.schema._applyDiscriminators.keys()){let{schema:o,options:a}=i.schema._applyDiscriminators.get(s);LY(o,e),i.discriminator(s,o,r?{...a,overwriteExisting:!0}:a)}i._appliedDiscriminators=!0}}}}});var fAe=m((u_r,pAe)=>{"use strict";var UAt=ui(),VAt=Ot();pAe.exports=function t(e,r){let n=$Y();function i(s,o){Object.defineProperty(e.prototype,s,{get:function(){let a={};for(let u in o.methods[s])a[u]=o.methods[s][u].bind(this);return a},configurable:!0})}for(let s of Object.keys(r.methods)){let o=r.methods[s];if(r.tree.hasOwnProperty(s))throw new Error('You have a method and a property in your schema both named "'+s+'"');if(typeof o=="function"&&n.prototype[s]===o){delete r.methods[s];continue}r.reserved[s]&&!UAt(r,`methodOptions.${s}.suppressWarning`,!1)&&VAt.warn(`mongoose: the method name "${s}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${s}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[s]=o:i(s,r)}e.$appliedMethods=!0;for(let s of Object.keys(r.paths)){let o=r.paths[s];o.$isSingleNested&&!o.caster.$appliedMethods&&t(o.caster,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var yAe=m((c_r,mAe)=>{"use strict";var hAe=Kz(),GAt=hE(),HAt=aI(),vI=Ot().isPOJO;mAe.exports=function(e,r,n){if(r==null||e==null)return e;let i=null;return HAt(r)?i=!1:GAt(r)&&(i=!0),i==null?e:i?(n=n||hAe(r),bI(e,r,n)):(n=n||hAe(r),_I(e,r,n))};function bI(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>bI(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;e.hasOwnProperty(a)||n.hasOwnProperty(o)?vI(e[a])||vI(n[o])?s[o]=bI(s[o],e,r,n[o],a):delete s[o]:r[a]&&(s[o]=bI(s[o],e,r,n[o],a))}return s}function _I(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>_I(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let a=i?i+"."+o:o;if(e.hasOwnProperty(a)||n.hasOwnProperty(o)){(vI(e[a])||vI(n[o]))&&(s[o]=_I(s[o],e,r,n[o],a));continue}else r[a]?s[o]=_I(s[o],e,r,n[o],a):delete s[o]}return s}});var EAe=m((l_r,gAe)=>{"use strict";gAe.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var _Ae=m((d_r,bAe)=>{"use strict";var zAt=EAe();bAe.exports=function(e,r,n){zAt(e)||n.hasOwnProperty("collation")&&!r.hasOwnProperty("collation")&&(r.collation=n.collation)}});var SAe=m((p_r,vAe)=>{"use strict";var WAt=OO(),{queryMiddlewareFunctions:JAt,aggregateMiddlewareFunctions:YAt,modelMiddlewareFunctions:QAt,documentMiddlewareFunctions:XAt}=lx(),ZAt=Array.from(new Set([...JAt,...YAt,...QAt,...XAt]));vAe.exports=function(e,r,n){let i={useErrorHandlers:!0,numCallbackParams:1};e.$__insertMany=r.createWrapper("insertMany",e.$__insertMany,e,i),r=r.filter(s=>ZAt.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let o=e[s];e[s]=function(){let a=arguments.length,u=a>0?arguments[a-1]:null,c=typeof u=="function"?u:null,l=Array.prototype.slice.call(arguments,0,c==null?a:a-1);return WAt(c,d=>{r.execPre(s,e,l,function(p){if(p!=null)return d(p);let f=0,h=o.apply(e,l.concat(g));h!=null&&typeof h.then=="function"&&h.then(_=>g(null,_),_=>g(_));function g(_,S){if(!(f++>0)){if(_!=null)return d(_);r.execPost(s,e,[S],function(w){if(w!=null)return d(w);d(null,S)})}}})},e.events)}}}});var AAe=m((f_r,wAe)=>{"use strict";wAe.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var IAe=m((h_r,xAe)=>{"use strict";var CAe=cx(),e8t=lu();xAe.exports=TAe;function TAe(t,e,r){return e==null?e:(t8t(t,e,r),OAe(t,e,r))}function t8t(t,e,r){for(let n of t.childSchemas){let i=n.model.path,s=n.schema;if(!i)continue;let o=e8t.get(i,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||TAe(s,o,r)}}function OAe(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let a of e)OAe(t,a,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let a of Object.keys(t.discriminators)){let u=t.discriminators[a],c=u.discriminatorMapping.key,l=u.discriminatorMapping.value;if(e[c]==l){t=u;break}}let n=CAe(t.options.timestamps,"createdAt"),i=CAe(t.options.timestamps,"updatedAt"),s=r?.currentTime,o=null;s!=null?o=s():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),i&&(e[i]=o)}});var kAe=m((m_r,DAe)=>{"use strict";var r8t=lu();DAe.exports=RAe;function RAe(t,e,r){if(e==null)return e;let n=r,i=null;if(Array.isArray(r)){n=[],i=[];for(let s of r)s.length===1?i.push(s[0]):n.push(s)}return n8t(t,e,n),KY(t,e,i)}function n8t(t,e,r){let n=!1;for(let i of t.childSchemas){let s=i.model.path,o=i.schema;if(!s)continue;let a=r8t.get(s,e);if(a==null||Array.isArray(a)&&a.flat(1/0).length===0)continue;let u=null;if(Array.isArray(r)){u=[];for(let c of r)c[0]==s&&u.push(c.slice(1));if(u.length===0)continue}RAe(o,a,u),n=!0}r&&r.length&&!n&&KY(t,e,r)}function KY(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)KY(t,n,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let n of Object.keys(t.discriminators)){let i=t.discriminators[n],s=i.discriminatorMapping.key,o=i.discriminatorMapping.value;if(e[s]==o){t=i;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let i=t.virtuals[n],s=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<s.length-1;++c)o[s[c]]=s[c]in o?o[s[c]]:{},o=o[s[c]];let a=i.applyGetters(o[s[s.length-1]],e);i.options&&(i.options.ref||i.options.refPath)&&a===void 0&&(i.options.justOne?a=null:a=[]),o[s[s.length-1]]=a}}}});var SI=m((y_r,MAe)=>{"use strict";MAe.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var TS=m((g_r,PAe)=>{"use strict";PAe.exports=new WeakMap});var qAe=m((E_r,BAe)=>{"use strict";var i8t=zn(),NAe=TS(),s8t=ot().modelSymbol,o8t=Ot();BAe.exports=FAe;var wI=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function FAe(t,e,r,n,i){let s=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,a=n.$nullIfNotFound,u,c,l;o8t.isMongooseArray(t)&&(t=t.__array);let d=0,p=t.length;if(o&&i&&n[wI]===void 0){n[wI]=!1;for(let f in r)if(Array.isArray(r[f])){n[wI]=!0;break}}for(d=0;d<p;++d){if(l=t[d],Array.isArray(l)){FAe(l,e,r,n,!0),s.push(l);continue}if(l===null&&o===!1){s.push(l);continue}if(l?.constructor?.name==="Binary"&&l.sub_type===4&&typeof l.toUUID=="function"||l?.constructor?.name==="Buffer"&&l._subtype===4&&typeof l.toUUID=="function"?c=String(l.toUUID()):c=String(l),u=e[c],n.clone&&u!=null)if(n.lean){let f=NAe.get(u);u=i8t(u),NAe.set(u,f)}else u=u.constructor.hydrate(u._doc);if(i)if(u)if(o){let f=r[c];n[wI]?s.push(u):s[f]=u}else s.push(u);else l!=null&&l[s8t]!=null?s.push(l):s.push(n.retainNullValues||a?null:l);else s[d]=u||null}t.length=0,s.length&&s.forEach(function(f,h){t[h]=f})}});var UY=m((b_r,LAe)=>{"use strict";LAe.exports=AI;function AI(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",i="";for(let s=0;s<r.length;++s){if(n+=(n.length>0?".":"")+r[s],t.virtuals[n]){if(s===r.length-1)return{virtual:t.virtuals[n],path:i};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=AI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+n,n="";continue}else if(t.paths[n]?.$isSchemaMap&&t.paths[n].$__schemaType?.schema){t=t.paths[n].$__schemaType.schema,++s;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n,"$*"].filter(a=>!!a).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=AI(t.discriminators[a],o);if(u!=null){let c=[i,n,u.nestedSchemaPath,"$*"].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+"$*"+n,n=""}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let a=AI(t.discriminators[o],e);if(a)return a}return null}}}});var $Ae=m((CI,jAe)=>{(function(t,e){typeof CI=="object"&&typeof jAe<"u"?e(CI):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(CI,(function(t){"use strict";var e=function(D,N){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Q){K.__proto__=Q}||function(K,Q){for(var Oe in Q)Object.prototype.hasOwnProperty.call(Q,Oe)&&(K[Oe]=Q[Oe])},e(D,N)};function r(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");e(D,N);function K(){this.constructor=D}D.prototype=N===null?Object.create(N):(K.prototype=N.prototype,new K)}typeof SuppressedError=="function"&&SuppressedError;var n=function(D){var N="[object "+D+"]";return function(K){return i(K)===N}},i=function(D){return Object.prototype.toString.call(D)},s=function(D){return D instanceof Date?D.getTime():a(D)?D.map(s):D&&typeof D.toJSON=="function"?D.toJSON():D},o=function(D){return D??null},a=n("Array"),u=n("Object"),c=n("Function"),l=function(D,N){return D.hasOwnProperty(N)&&!c(D[N])},d=function(D){return D&&(D.constructor===Object||D.constructor===Array||D.constructor.toString()==="function Object() { [native code] }"||D.constructor.toString()==="function Array() { [native code] }")&&!D.toJSON},p=function(D,N){if(D==null&&D==N||D===N)return!0;if(Object.prototype.toString.call(D)!==Object.prototype.toString.call(N))return!1;if(a(D)){if(D.length!==N.length)return!1;for(var K=0,Q=D.length;K<Q;K++)if(!p(D[K],N[K]))return!1;return!0}else if(u(D)){if(Object.keys(D).length!==Object.keys(N).length)return!1;for(var Oe in D)if(!p(D[Oe],N[Oe]))return!1;return!0}return!1},f=function(D,N,K,Q,Oe,Ie){var be=N[Q];if(a(D)&&isNaN(Number(be))&&!l(D,be)){for(var xe=0,Fe=D.length;xe<Fe;xe++)if(!f(D[xe],N,K,Q,xe,D))return!1}return Q===N.length||D==null?K(D,Oe,Ie,Q===0,Q===N.length):f(D[be],N,K,Q+1,be,D)},h=(function(){function D(N,K,Q,Oe){this.params=N,this.owneryQuery=K,this.options=Q,this.name=Oe,this.init()}return D.prototype.init=function(){},D.prototype.reset=function(){this.done=!1,this.keep=!1},D})(),g=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe)||this;return be.children=Ie,be}return N.prototype.reset=function(){this.keep=!1,this.done=!1;for(var K=0,Q=this.children.length;K<Q;K++)this.children[K].reset()},N.prototype.childrenNext=function(K,Q,Oe,Ie,be){for(var xe=!0,Fe=!0,$e=0,ft=this.children.length;$e<ft;$e++){var cr=this.children[$e];if(cr.done||cr.next(K,Q,Oe,Ie,be),cr.keep||(Fe=!1),cr.done){if(!cr.keep)break}else xe=!1}this.done=xe,this.keep=Fe},N})(h),_=(function(D){r(N,D);function N(K,Q,Oe,Ie,be){var xe=D.call(this,K,Q,Oe,Ie)||this;return xe.name=be,xe}return N})(g),S=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(g),w=(function(D){r(N,D);function N(K,Q,Oe,Ie,be){var xe=D.call(this,Q,Oe,Ie,be)||this;return xe.keyPath=K,xe.propop=!0,xe._nextNestedValue=function(Fe,$e,ft,cr,Sn){return xe.childrenNext(Fe,$e,ft,cr,Sn),!xe.done},xe}return N.prototype.next=function(K,Q,Oe){f(K,this.keyPath,this._nextNestedValue,0,Q,Oe)},N})(g),C=function(D,N){if(D instanceof Function)return D;if(D instanceof RegExp)return function(Q){var Oe=typeof Q=="string"&&D.test(Q);return D.lastIndex=0,Oe};var K=s(D);return function(Q){return N(K,s(Q))}},A=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._test=C(this.params,this.options.compare)},N.prototype.next=function(K,Q,Oe){(!Array.isArray(Oe)||Oe.hasOwnProperty(Q))&&this._test(K,Q,Oe)&&(this.done=!0,this.keep=!0)},N})(h),O=function(D,N,K){return new A(D,N,K)},x=function(D){return function(N,K,Q,Oe){return D(N,K,Q,Oe)}},R=function(D){return x(function(N,K,Q,Oe){var Ie=typeof s(N),be=D(N);return new A(function(xe){var Fe=o(xe);return typeof s(Fe)===Ie&&be(Fe)},K,Q,Oe)})},M=function(D,N,K,Q){var Oe=Q.operations[D];return Oe||I(D),Oe(N,K,Q,D)},I=function(D){throw new Error("Unsupported operation: ".concat(D))},F=function(D,N){for(var K in D)if(N.operations.hasOwnProperty(K)||K.charAt(0)==="$")return!0;return!1},B=function(D,N,K,Q,Oe){if(F(N,Oe)){var Ie=k(N,K,Oe),be=Ie[0],xe=Ie[1];if(xe.length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(D,N,Q,Oe,be)}return new w(D,N,Q,Oe,[new A(N,Q,Oe)])},U=function(D,N,K){N===void 0&&(N=null);var Q=K===void 0?{}:K,Oe=Q.compare,Ie=Q.operations,be={compare:Oe||p,operations:Object.assign({},Ie||{})},xe=k(D,null,be),Fe=xe[0],$e=xe[1],ft=[];return Fe.length&&ft.push(new w([],D,N,be,Fe)),ft.push.apply(ft,$e),ft.length===1?ft[0]:new S(D,N,be,ft)},k=function(D,N,K){var Q=[],Oe=[];if(!d(D))return Q.push(new A(D,D,K)),[Q,Oe];for(var Ie in D)if(K.operations.hasOwnProperty(Ie)){var be=M(Ie,D[Ie],D,K);if(be&&!be.propop&&N&&!K.operations[N])throw new Error("Malformed query. ".concat(Ie," cannot be matched against property."));be!=null&&Q.push(be)}else Ie.charAt(0)==="$"?I(Ie):Oe.push(B(Ie.split("."),D[Ie],Ie,D,K));return[Q,Oe]},H=function(D){return function(N,K,Q){return D.reset(),D.next(N,K,Q),D.keep}},ie=function(D,N){return N===void 0&&(N={}),H(U(D,null,N))},j=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._test=C(this.params,this.options.compare)},N.prototype.reset=function(){D.prototype.reset.call(this),this.keep=!0},N.prototype.next=function(K){this._test(K)&&(this.done=!0,this.keep=!1)},N})(h),V=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=U(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(K){if(a(K)){for(var Q=0,Oe=K.length;Q<Oe;Q++){this._queryOperation.reset();var Ie=K[Q];this._queryOperation.next(Ie,Q,K,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},N})(h),Ee=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){this._queryOperation=U(this.params,this.owneryQuery,this.options)},N.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},N.prototype.next=function(K,Q,Oe,Ie){this._queryOperation.next(K,Q,Oe,Ie),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},N})(h),Re=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){},N.prototype.next=function(K){a(K)&&K.length===this.params&&(this.done=!0,this.keep=!0)},N})(h),fe=function(D){if(D.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},Ge=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!1,K}return N.prototype.init=function(){var K=this;fe(this.params),this._ops=this.params.map(function(Q){return U(Q,null,K.options)})},N.prototype.reset=function(){this.done=!1,this.keep=!1;for(var K=0,Q=this._ops.length;K<Q;K++)this._ops[K].reset()},N.prototype.next=function(K,Q,Oe){for(var Ie=!1,be=!1,xe=0,Fe=this._ops.length;xe<Fe;xe++){var $e=this._ops[xe];if($e.next(K,Q,Oe),$e.keep){Ie=!0,be=$e.keep;break}}this.keep=be,this.done=Ie},N})(h),Me=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!1,K}return N.prototype.next=function(K,Q,Oe){D.prototype.next.call(this,K,Q,Oe),this.keep=!this.keep},N})(Ge),Ce=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.init=function(){var K=this,Q=Array.isArray(this.params)?this.params:[this.params];this._testers=Q.map(function(Oe){if(F(Oe,K.options))throw new Error("cannot nest $ under ".concat(K.name.toLowerCase()));return C(Oe,K.options.compare)})},N.prototype.next=function(K,Q,Oe){for(var Ie=!1,be=!1,xe=0,Fe=this._testers.length;xe<Fe;xe++){var $e=this._testers[xe];if($e(K)){Ie=!0,be=!0;break}}this.keep=be,this.done=Ie},N})(h),Rr=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,Ie)||this;return be.propop=!0,be._in=new Ce(K,Q,Oe,Ie),be}return N.prototype.next=function(K,Q,Oe,Ie){this._in.next(K,Q,Oe),a(Oe)&&!Ie?this._in.keep?(this.keep=!1,this.done=!0):Q==Oe.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},N.prototype.reset=function(){D.prototype.reset.call(this),this._in.reset()},N})(h),_t=(function(D){r(N,D);function N(){var K=D!==null&&D.apply(this,arguments)||this;return K.propop=!0,K}return N.prototype.next=function(K,Q,Oe,Ie,be){be?Oe.hasOwnProperty(Q)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},N})(h),ca=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,K.map(function(xe){return U(xe,Q,Oe)}),Ie)||this;return be.propop=!1,fe(K),be}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(_),Ei=(function(D){r(N,D);function N(K,Q,Oe,Ie){var be=D.call(this,K,Q,Oe,K.map(function(xe){return U(xe,Q,Oe)}),Ie)||this;return be.propop=!0,be}return N.prototype.next=function(K,Q,Oe,Ie){this.childrenNext(K,Q,Oe,Ie)},N})(_),tr=function(D,N,K){return new A(D,N,K)},P=function(D,N,K,Q){return new j(D,N,K,Q)},$=function(D,N,K,Q){return new Ge(D,N,K,Q)},G=function(D,N,K,Q){return new Me(D,N,K,Q)},ne=function(D,N,K,Q){return new V(D,N,K,Q)},Y=function(D,N,K,Q){return new Rr(D,N,K,Q)},te=function(D,N,K,Q){return new Ce(D,N,K,Q)},de=R(function(D){return function(N){return N!=null&&N<D}}),z=R(function(D){return function(N){return N===D||N<=D}}),X=R(function(D){return function(N){return N!=null&&N>D}}),ue=R(function(D){return function(N){return N===D||N>=D}}),se=function(D,N,K){var Q=D[0],Oe=D[1];return new A(function(Ie){return s(Ie)%Q===Oe},N,K)},Se=function(D,N,K,Q){return new _t(D,N,K,Q)},He=function(D,N,K){return new A(new RegExp(D,N.$options),N,K)},tt=function(D,N,K,Q){return new Ee(D,N,K,Q)},zt={number:function(D){return typeof D=="number"},string:function(D){return typeof D=="string"},bool:function(D){return typeof D=="boolean"},array:function(D){return Array.isArray(D)},null:function(D){return D===null},timestamp:function(D){return D instanceof Date}},Nr=function(D,N,K){return new A(function(Q){if(typeof D=="string"){if(!zt[D])throw new Error("Type alias does not exist");return zt[D](Q)}return Q!=null?Q instanceof D||Q.constructor===D:!1},N,K)},Lr=function(D,N,K,Q){return new ca(D,N,K,Q)},Dt=function(D,N,K,Q){return new Ei(D,N,K,Q)},ur=function(D,N,K){return new Re(D,N,K,"$size")},Pn=function(){return null},Qc=function(D,N,K){var Q;if(c(D))Q=D;else if(!process.env.CSP_ENABLED)Q=new Function("obj","return "+D);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new A(function(Oe){return Q.bind(Oe)(Oe)},N,K)},ju=Object.freeze({__proto__:null,$Size:Re,$all:Dt,$and:Lr,$elemMatch:ne,$eq:tr,$exists:Se,$gt:X,$gte:ue,$in:te,$lt:de,$lte:z,$mod:se,$ne:P,$nin:Y,$nor:G,$not:tt,$options:Pn,$or:$,$regex:He,$size:ur,$type:Nr,$where:Qc}),Z=function(D,N,K){var Q=K===void 0?{}:K,Oe=Q.compare,Ie=Q.operations;return U(D,N,{compare:Oe,operations:Object.assign({},ju,Ie||{})})},oe=function(D,N){N===void 0&&(N={});var K=Z(D,null,N);return H(K)};t.$Size=Re,t.$all=Dt,t.$and=Lr,t.$elemMatch=ne,t.$eq=tr,t.$exists=Se,t.$gt=X,t.$gte=ue,t.$in=te,t.$lt=de,t.$lte=z,t.$mod=se,t.$ne=P,t.$nin=Y,t.$nor=G,t.$not=tt,t.$options=Pn,t.$or=$,t.$regex=He,t.$size=ur,t.$type=Nr,t.$where=Qc,t.EqualsOperation=A,t.createDefaultQueryOperation=Z,t.createEqualsOperation=O,t.createOperationTester=H,t.createQueryOperation=U,t.createQueryTester=ie,t.default=oe,Object.defineProperty(t,"__esModule",{value:!0})}))});var UAe=m((__r,VY)=>{var KAe=$Ae();VY.exports=KAe.default;Object.assign(VY.exports,KAe)});var JAe=m((v_r,WAe)=>{"use strict";var a8t=px(),u8t=SI(),c8t=qAe(),TI=ui(),l8t=UY(),zAe=TS(),VAe=ax(),d8t=Jz(),GY=lu(),GAe=UAe().default,OI=Ot(),{populateModelSymbol:p8t}=ot();WAe.exports=function(e){let r=Object.assign({},TI(e,"allOptions.options.options"),TI(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let i=e.populatedModel,s=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),c8t(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,a=e.rawIds,u=e.options,c=e.count&&e.isVirtual,l,d=0;function p(f){if(++d,c)return f;if(f instanceof u8t)return f.val;if(f===void 0)return f;let h=e.allIds[l];if(e.path.endsWith(".$*"))return OS(f,u,n,h);if(e.justOne===!0&&Array.isArray(f)){let g=[];for(let _ of f){let S=zAe.get(_);(S==null||S===i)&&g.push(_)}for(;f.length>g.length;)Array.prototype.pop.apply(f,[]);for(let _=0;_<g.length;++_)f[_]=g[_];return OS(f[0],u,n,h)}else{if(e.justOne===!1&&!Array.isArray(f))return OS([f],u,n,h);if(e.justOne===!0&&!Array.isArray(f)&&Array.isArray(h))return OS(f,u,n,f==null?f:h[d-1])}return OS(f,u,n,h)}for(l=0;l<o.length;++l){d=0;let f=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,h=GY.get(f,o[l],VAe);if(h==null&&!l8t(e.originalModel.schema,f))continue;let g;c?g=f8t(a[l]):Array.isArray(e.match)?g=Array.isArray(a[l])?a[l].filter(O=>O==null||GAe(e.match[l])(O)):[a[l]].filter(O=>O==null||GAe(e.match[l])(O))[0]:g=a[l];let _=e.originalModel.schema,S=TI(o[l],"$__",null)!=null,w=S?h instanceof Map:OI.isPOJO(h);if(w=w&&TI(_._getSchema(f),"$isSchemaMap"),!e.isVirtual&&w){let O=h instanceof Map?Array.from(h.keys()):Object.keys(h);g=g.reduce((x,R,M)=>(x.set(O[M],R),x),new Map)}if(S&&Array.isArray(g))for(let O of g)O!=null&&O.$__!=null&&(O.$__.parent=o[l]);else S&&g!=null&&g.$__!=null&&(g.$__.parent=o[l]);if(e.isVirtual&&S){o[l].$populated(f,e.justOne?s[0]:s,e.allOptions),Array.isArray(g)&&(g=g.map(O=>O??void 0)),GY.set(f,g,o[l],function(x,R,M){return arguments.length>=3?(x[R]=M,x[R]):x instanceof Map&&R==="$*"?[...x.values()]:x[R]},p,!1);continue}let C=f.split("."),A=o[l];for(let O=0;O<C.length-1&&!(Array.isArray(A)&&!OI.isArrayIndex(C[O])||C[O]==="$*");++O){if(A[C[O]]==null){let x=C.slice(0,O+1).join("."),R=_._getSchema(x);if(g==null&&R!=null&&R.$isMongooseArray)break;A[C[O]]={}}if(A=A[C[O]],typeof A!="object")break}o[l].$__&&(e.allOptions.options[p8t]=e.allOptions.model,o[l].$populated(f,e.unpopulatedValues[l],e.allOptions.options),g!=null&&g.$__!=null&&(g.$__.wasPopulated={value:e.unpopulatedValues[l]}),g instanceof Map&&!g.$isMongooseMap&&(g=new a8t(g,f,o[l],o[l].schema.path(f).$__schemaType))),GY.set(f,g,o[l],VAe,p,!1),o[l].$__&&d8t(o[l],[e.allOptions.options])}};function f8t(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function OS(t,e,r,n){let i=typeof r.transform=="function",s=i?r.transform:o=>o;if(Array.isArray(t)){let o=[],a=t.length;for(let l=0;l<a;++l){let d=t[l],p=Array.isArray(n)?n[l]:n;if(!(!HY(d)&&(!r.retainNullValues||d!=null)&&!i)){{if(!r.retainNullValues&&d==null)continue;i&&(d=s(HY(d)?d:null,p))}if(HAe(d,e),o.push(d),e.originalLimit&&o.length>=e.originalLimit)break}}let u=o.length;for(;t.length>u;)Array.prototype.pop.apply(t,[]);let c=0;if(OI.isMongooseArray(t))for(c=0;c<u;++c)t.set(c,o[c],!0);else for(c=0;c<u;++c)t[c]=o[c];return t}return HY(t)||OI.isPOJO(t)?(HAe(t,e),s(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?s(t,n):s(null,n)}function HAe(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function HY(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||zAe.has(t)}});var ZAe=m((S_r,XAe)=>{"use strict";var h8t=SI(),m8t=Qz(),{trusted:xI}=oE(),YAe=fI();XAe.exports=function(e,r,n,i,s){let o=y8t(r);if(n.size===1){let a=Array.from(n)[0],u=i.schema.path(a);if(a!=="_id"||!o._id)e=QAe(e,u,s),o[a]=xI({$in:e});else if(a==="_id"&&o._id){let l=YAe(o[a])?o[a]:{$eq:o[a]};o[a]={...xI({$in:e}),...l}}let c=m8t(a);for(let l=0;l<c.length-1;++l){let d=c[l];if(o[d]!=null&&o[d].$elemMatch!=null){o[d].$elemMatch[a.slice(d.length+1)]=xI({$in:e}),delete o[a];break}}}else{let a=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:a}],delete o.$or):o.$or=a;for(let u of n)if(u!=="_id"||!o._id){let c=i.schema.path(u);e=QAe(e,c,s),a.push({[u]:{$in:e}})}else if(u==="_id"&&o._id){let c=YAe(o[u])?o[u]:{$eq:o[u]};o[u]={...xI({$in:e}),...c}}}return o};function QAe(t,e,r){return t=t.filter(n=>!(n instanceof h8t)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function y8t(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var n8e=m((w_r,r8e)=>{"use strict";var e8e=z0(),g8t=ui(),E8t=pc(),t8e=TS(),$E=lu(),b8t=ot().populateModelSymbol;r8e.exports=function t(e,r,n,i){let s=r.path(i),o=n;if(s)return s;let a=r.discriminatorMapping&&r.discriminatorMapping.key;if(a&&e!=null){if(n!=null&&n[a]!=null){let l=E8t(e.discriminators,n[a]);r=l?l.schema:r}else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,d)=>{let p=e.discriminators[d];return l.concat(t(p,p.schema,null,i))},[])}function u(l,d,p,f){let h=l.length+1,g,_;for(;h--;){if(_=l.slice(0,h).join("."),g=d.path(_),g==null)continue;if(g.caster){if(g.caster instanceof e8e)return g.caster;let C=null;if(g.schema!=null&&g.schema.discriminators!=null){let A=g.schema.discriminators,O=_+"."+g.schema.options.discriminatorKey,x=p?$E.get(O,p)||[]:[];C=Object.keys(A).reduce(function(R,M){let I=A[M].discriminatorMapping.value;return(n==null||x.indexOf(M)!==-1||x.indexOf(I)!==-1)&&R.push(A[M]),R},[])}if(h!==l.length&&g.schema){let A;if(l[h]==="$")return h+1===l.length?g:(A=u(l.slice(h+1),d,p?$E.get(_,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),A);if(C!=null&&C.length>0){A=[];for(let O of C){let x=u(l.slice(h),O,p?$E.get(_,p):null,f.concat(l.slice(0,h)));x!=null&&(x.$parentSchemaDocArray=x.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g),x.$parentSchemaDocArray&&(A.$parentSchemaDocArray=x.$parentSchemaDocArray),A.push(x))}return A}else return A=u(l.slice(h),g.schema,p?$E.get(_,p):null,f.concat(l.slice(0,h))),A&&(A.$parentSchemaDocArray=A.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),A}else if(h!==l.length&&g.$isMongooseArray&&g.casterConstructor.$isMongooseArray){let A=g;for(;A.$isMongooseArray&&!A.$isMongooseDocumentArray;)A=A.casterConstructor;let O=u(l.slice(h),A.schema,null,f.concat(l.slice(0,h)));if(O!=null)return O;if(A.schema.discriminators){let x=[];for(let R of Object.keys(A.schema.discriminators)){let M=A.schema.discriminators[R]||A.schema,I=u(l.slice(h),M,null,f.concat(l.slice(0,h)));I!=null&&x.push(I)}if(x.length>0)return x}}}else if(g.$isSchemaMap&&g.$__schemaType instanceof e8e)return g.$__schemaType;let S=f.concat([_]).join(".");if(o!=null&&o.$__&&o.$populated(S,!0)&&h<l.length){let C=o.$populated(S,!0).options[b8t];if(C!=null)return u(l.slice(h),C.schema,p?$E.get(_,p):null,f.concat(l.slice(0,h)))}let w=g8t(o,_);if(w!=null){let C=Array.isArray(w)&&w.length>0?t8e.get(w[0]):t8e.get(w),A=C!=null?C.schema:null;if(A!=null){let O=u(l.slice(h),A,p?$E.get(_,p):null,f.concat(l.slice(0,h)));if(O!=null)return O.$parentSchemaDocArray=O.$parentSchemaDocArray||(A.$isSingleNested?null:A),O}}return g}}let c=i.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return u(c,r,n,[])}});var c8e=m((A_r,u8e)=>{"use strict";var XY=Oa(),_8t=SI(),v8t=zn(),yc=ui(),S8t=pc(),w8t=$o(),i8e=n8e(),A8t=UY(),xS=ax(),ly=lu(),II=RW(),Eo=Ot(),JY=ot().modelSymbol,zY=ot().populateModelSymbol,YY=H0().schemaMixedSymbol,C8t=Fz();u8e.exports=function(e,r,n){let i,s=r.length,o=[],a=n.model&&n.model.modelName||n.model,u,c,l,d={},p=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let f=A8t(e.schema,n.path);if((f==null?null:f.virtual)!=null)return T8t(e,r,n,f);let g=i8e(e,p,null,n.path);if(g=Array.isArray(g)?g:[g].filter(w=>w!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&g.length===0&&n._localModel!=null)return new C8t(n._fullPath||n.path);for(let w=0;w<s;w++){i=r[w];let C=null;if(i.$__!=null&&i.populated(n.path)&&(n.forceRepopulate!=null?n.forceRepopulate:i.constructor.base.options.forceRepopulate)===!1)continue;let A=i!=null&&i.$__!=null?i.$__schema:p;if(u=i8e(e,A,i,n.path),u!=null&&u.$isMongooseDocumentArray&&u.options.ref==null&&u.options.refPath==null)continue;if(u&&u.$parentSchemaDocArray&&yc(n,"options.sort")!=null)return new XY("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let x=!1,R=null,M=null,I=null;if(u!=null&&u.instance==="Embedded"){if(u.options.ref){let V={localField:n.path+"._id",foreignField:"_id",justOne:!0},Ee=S(i,u,a,e),Re=ly.get(n.path,i),fe=ly.get("_id",Re);QY(e,o,d,Ee.modelNames,n,V,fe,i,M,Re)}continue}if(Array.isArray(u)){let V=u;for(let Ee of V){let Re,fe;try{fe=S(i,Ee,a,e),Re=fe.modelNames,x=x||fe.isRefPath,R=R||fe.refPath,C=fe.justOne}catch(Ge){return Ge}if(!(x&&!fe.isRefPath)&&Re){l=l||[];for(let Ge of Re)l.indexOf(Ge)===-1&&l.push(Ge)}}}else{try{let V=S(i,u,a,e);l=V.modelNames,x=V.isRefPath,R=R||V.refPath,C=V.justOne,M=yc(u,"options.populate",null),x&&(I=l,l=Array.from(new Set(l)))}catch(V){return V}if(!l)continue}let F={},B=n.path,U="_id";if("justOne"in n&&n.justOne!==void 0?C=n.justOne:u&&!u[YY]&&(n.path.endsWith("."+u.path)||n.path===u.path)&&(C=Array.isArray(u)?u.every(V=>!V.$isMongooseArray):!u.$isMongooseArray),!l)continue;F.isVirtual=!1,F.justOne=C,F.localField=B,F.foreignField=U;let k=o8e(i,B,e,n,null,u),H=String(Eo.getValue(U,i));n._docs[H]=Array.isArray(k)?k.slice():k;let ie=yc(n,"match",null),j=typeof ie=="function";j&&(ie=ie.call(i,i)),eQ(ie),F.match=ie,F.hasMatchFunction=j,F.isRefPath=x,F.modelNamesInOrder=I,x&&(l=O8t(i,p,F,n,R,k)||l);try{QY(e,o,d,l,n,F,k,i,M)}catch(V){return V}}return o;function S(w,C,A,O){let x,R=!1,M=null,I=C;C&&C.instance==="Array"&&(C=C.caster),C&&C.$isSchemaMap&&(C=C.$__schemaType);let F=C&&C.options&&C.options.ref;if(c=C&&C.options&&C.options.refPath,C!=null&&C[YY]&&!F&&!c&&!A)return{modelNames:null};if(A)x=[A];else if(c!=null){if(typeof c=="function"){let B=n.path.slice(0,n.path.length-C.path.length-1),U=ly.get(B,w,xS),k=Array.isArray(U)?Eo.array.flatten(U):U?[U]:[];x=new Set;for(let H of k)c=c.call(H,H,n.path),II(c,w,n.path,p,n._queryProjection).forEach(ie=>x.add(ie));x=Array.from(x)}else x=II(c,w,n.path,p,n._queryProjection);R=!0}else{let B,U,k,H,ie=O,j=O.schema.options.discriminatorKey;if(!C&&j&&(H=Eo.getValue(j,w))){let V=S8t(O.discriminators,H)||O;if(V!=null)ie=V;else try{ie=ZY(O.db,H)}catch(Ee){return Ee}k=ie.schema._getSchema(n.path),k&&k.caster&&(k=k.caster)}else k=C;if(I&&I.path.endsWith(".$*")?M=!I.$isMongooseArray&&!I._arrayPath:k!=null&&(M=!k.$isMongooseArray&&!k._arrayPath),(B=yc(k,"options.ref"))!=null)if(k!=null&&typeof B=="function"&&n.path.endsWith("."+k.path)){x=new Set;let V=n.path.slice(0,n.path.length-k.path.length-1),Ee=ly.get(V,w,xS),Re=Array.isArray(Ee)?Eo.array.flatten(Ee):Ee?[Ee]:[];for(let fe of Re)x.add(WY(B,fe));Re.length===0?x=[WY(B,w)]:x=Array.from(x)}else B=WY(B,w),x=[B];else if((k=yc(C,"options.refPath"))!=null)if(R=!0,typeof U=="function"){let V=n.path.slice(0,n.path.length-k.path.length-1),Ee=ly.get(V,w,xS),Re=Array.isArray(Ee)?Eo.array.flatten(Ee):Ee?[Ee]:[];x=new Set;for(let fe of Re)U=U.call(fe,fe,n.path),II(U,w,n.path,p,n._queryProjection).forEach(Ge=>x.add(Ge));x=Array.from(x)}else x=II(U,w,n.path,p,n._queryProjection)}if(!x)if(n._localModel==null)x=[O.modelName];else return{modelNames:x,justOne:M,isRefPath:R,refPath:c};return Array.isArray(x)||(x=[x]),{modelNames:x,justOne:M,isRefPath:R,refPath:c}}};function T8t(t,e,r,n){let i=[],s={},o=n.virtual;for(let a of e){let u=null,c={},l,d=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=d+o.options.localField.call(a,a):Array.isArray(o.options.localField)?l=o.options.localField.map(w=>d+w):l=d+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!r.hasOwnProperty("skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!r.hasOwnProperty("limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!r.hasOwnProperty("perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let p=o.options.foreignField;if(!l||!p)return new XY(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(a,a)),typeof p=="function"&&(p=p.call(a,a)),c.isRefPath=!1;let f=null;"justOne"in r&&r.justOne!==void 0&&(f=r.justOne),u=o._getModelNamesForPopulate(a),o.options.refPath?(f=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(f=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=f;let h=yc(c,"virtual.options.match",null)||yc(c,"virtual.options.options.match",null),g=yc(r,"match",null)||h,_=typeof g=="function";if(_&&(g=g.call(a,a,c.virtual)),Array.isArray(l)&&Array.isArray(p)&&l.length===p.length){g=Object.assign({},g);for(let w=1;w<l.length;++w)g[p[w]]=a8e(ly.get(l[w],a,xS),t.schema),_=!0;l=l[0],p=p[0]}c.localField=l,c.foreignField=p,c.match=g,c.hasMatchFunction=_,eQ(g);let S=o8e(a,l,t,r,o);try{QY(t,i,s,u,r,c,S,a)}catch(w){return w}}return i}function QY(t,e,r,n,i,s,o,a,u,c){let l=i.connection!=null?i.connection:t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=Eo.cloneArrays(c)),n==null)return;let d=Eo.array.flatten(n),p=d.length;for(;p--;){let f=d[p];if(f==null)continue;let h;if(i.model&&i.model[JY])h=i.model;else if(f[JY])h=f,f=h.modelName;else try{h=ZY(l,f)}catch(w){if(o!==void 0)throw w;h=null}let g=o,_=s.modelNamesInOrder?s.modelNamesInOrder:n;s.isRefPath&&Array.isArray(o)&&o.length===_.length&&(g=s8e(o,_,f));let S=i.perDocumentLimit==null?yc(i,"options.perDocumentLimit",null):i.perDocumentLimit;if(!r[f]||S!=null){let w={model:h};s.isVirtual&&yc(s.virtual,"options.options")?w.options=v8t(s.virtual.options.options):u!=null&&(w.options=Object.assign({},u)),Eo.merge(w,i),i[zY]=h,w[zY]=h,r[f]={model:h,options:w,match:s.hasMatchFunction?[s.match]:s.match,docs:[a],ids:[g],allIds:[o],unpopulatedValues:[c],localField:new Set([s.localField]),foreignField:new Set([s.foreignField]),justOne:s.justOne,isVirtual:s.isVirtual,virtual:s.virtual,count:s.count,[zY]:h},e.push(r[f])}else r[f].localField.add(s.localField),r[f].foreignField.add(s.foreignField),r[f].docs.push(a),r[f].ids.push(g),r[f].allIds.push(o),r[f].unpopulatedValues.push(c),s.hasMatchFunction&&r[f].match.push(s.match)}}function ZY(t,e){return t.models[e]==null&&t._parent!=null?ZY(t._parent,e):t.model(e)}function s8e(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,i)=>s8e(n,e[i],r)):[]:e===r?Array.isArray(t)?Eo.array.flatten(t):[t]:[]}function WY(t,e){return typeof t=="function"&&!t[JY]?t.call(e,e):t}function o8e(t,e,r,n,i,s){let o=r.schema._getPathType(e),a=o==="real"?r.schema.path(e):o.schema,u=a&&a.getters?a.getters:[];e=a!=null&&a.instance==="Embedded"?e+"._id":e;let c=yc(n,"options",{}),l="getters"in c?c.getters:yc(i,"options.getters",!1);if(u.length!==0&&l){let d=t.$__!=null?t:r.hydrate(t),p=Eo.getValue(e,t);if(Array.isArray(p)){let f=Eo.getValue(e.split(".").slice(0,-1),d);return p.map((h,g)=>a.applyGetters(h,f[g]))}else return a.applyGetters(p,d)}else return a8e(ly.get(e,t,xS),s)}function a8e(t,e){if(t!=null&&t.$__!=null)return t._doc._id;if(t!=null&&t._id!=null&&(e==null||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){let r=t.__array!=null?t.__array:t;for(let n=0;n<r.length;++n)r[n]!=null&&r[n].$__!=null&&(r[n]=r[n]._doc._id);return Eo.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(w8t(t)==="Object"&&(e==null||e[YY]==null)){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function O8t(t,e,r,n,i,s){if(!r.isRefPath||i==null)return;let o=i.split("."),a="",u;for(let c=0;c<o.length;++c){let l=o[c];a=a+(a.length===0?"":".")+l;let d=e.path(a);if(d!=null&&d.$isMongooseArray&&d.caster.discriminators!=null&&Object.keys(d.caster.discriminators).length!==0){let p=Eo.getValue(a,t),f=n.path.substring(a.length+1),h=d.caster.schema.options.discriminatorKey;u=[];for(let g of p){let _=Eo.getValue(h,g),S=d.caster.discriminators[_],w=S&&S.schema;if(w==null)continue;let C=w.path(f);if(C==null||C.options.refPath==null){let O=Eo.getValue(r.localField.substring(a.length+1),g);s.forEach((x,R)=>{x===O&&(s[R]=_8t(x))});continue}let A=Eo.getValue(o.slice(c+1).join("."),g);u.push(A)}}}return u}function eQ(t){if(t!=null&&typeof t=="object")for(let e of Object.keys(t)){if(e==="$where")throw new XY("Cannot use $where filter with populate() match");t[e]!=null&&typeof t[e]=="object"&&eQ(t[e])}}});var d8e=m((C_r,l8e)=>{"use strict";var x8t=ui();l8e.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=x8t(e,"key",{});return Object.keys(r).length===1&&r.hasOwnProperty("_id")}});var h8e=m((T_r,f8e)=>{"use strict";var RI=ui(),p8e=Ot();f8e.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let a={...n.weights,...n.key};if(Object.keys(a).length!==Object.keys(e).length)return!1;for(let u of Object.keys(a)){if(!(u in e))return!1;let c=a[u];if(c!==RI(r,"weights."+u)&&!(c===1&&RI(r,"weights."+u)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let i=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let a of i)if(!(!(a in r)&&!(a in n))){if(a==="collation"){if(r[a]==null||n[a]==null)return r[a]==null&&n[a]==null;let u=Object.keys(r.collation),c=r.collation,l=n.collation;for(let d of u)if(RI(c,d)!==RI(l,d))return!1}else if(!p8e.deepEqual(r[a],n[a]))return!1}let s=Object.keys(e),o=Object.keys(n.key);if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a]||!p8e.deepEqual(e[s[a]],n.key[o[a]]))return!1;return!0}});var y8e=m((O_r,m8e)=>{"use strict";m8e.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:i}=r.timeseries;return typeof n!="string"||typeof i!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[i]===1}});var _8e=m((x_r,b8e)=>{"use strict";var I8t=fI();function R8t(t,e){return E8e({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function D8t(t,e){return E8e({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}b8e.exports={getRelatedSchemaIndexes:R8t,getRelatedDBIndexes:D8t};function E8e({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let i=e&&e.key,s=e&&e.value;return i?t?r.filter(a=>{let u=g8e(a,n);return u&&u[i]===s}):r.filter(a=>{let u=g8e(a,n);return!u||!u[i]||I8t(u[i])&&!("$eq"in u[i])}):r}function g8e(t,e){if(e==="schema"){let r=t[1];return r&&r.partialFilterExpression}return t.partialFilterExpression}});var S8e=m((I_r,v8e)=>{"use strict";v8e.exports=k8t;function k8t(t,e,r){let n=0,i=0,s=null;if(e<=0)throw new Error("Limit must be positive");if(t.length===0)return r(null,[]);for(let c=0;c<t.length&&c<e;++c)o();function o(){t[i+n](u(i+n)),++n}let a=[];function u(c){return(l,d)=>{if(--n,++i,s==null){if(l!=null)return s=l,r(s);if(a[c]=d,i===t.length)return r(null,a);i+n<t.length&&o()}}}}});var A8e=m((R_r,w8e)=>{"use strict";w8e.exports=function t(e,r,n){if(r!=null)for(let i=0;i<r.length;++i)Array.isArray(r[i])?t(e,r[i],n+"."+i):e.push(n+"."+i)}});var I8e=m((D_r,x8e)=>{"use strict";var C8e=ui(),T8e=lu(),O8e=xY();x8e.exports=function(e,r,n){let i=O8e(C8e(r,"select",null),!0)||O8e(C8e(r,"options.select",null),!0);if(i!=null){for(let s of e)if(i.hasOwnProperty("-"+s))for(let o of n)o.$__!=null?T8e.unset(s,o._doc):T8e.unset(s,o)}}});var $Y=m((W8e,J8e)=>{"use strict";var M8t=qY(),P8t=Cz(),Md=dc(),N8t=mO(),rQ=require("events").EventEmitter,sQ=U0(),MI=jJ(),xt=Oa(),F8t=MO(),B8t=kz(),DI=yI(),q8t=uAe(),nQ=Q0(),kI=G0(),B8e=Rz(),R8e=Dz(),L8t=NO(),j8t=lAe(),$8t=jY(),K8t=dx(),q8e=fAe(),U8t=yAe(),V8t=hY(),L8e=_Ae(),G8t=SAe(),j8e=AAe(),H8t=IAe(),$8e=mY(),z8t=kAe(),W8t=JAe(),J8t=tY(),df=zn(),Y8t=ZAe(),K8e=ZJ(),tQ=UJ(),U8e=jO(),Q8t=Mx(),iQ=cJ(),DS=ui(),X8t=$o(),IS=pc(),Z8t=c8e(),kS=Wu(),oQ=Il().internalToObjectOptions,aQ=d8e(),V8e=h8e(),e5t=y8e(),{getRelatedDBIndexes:t5t,getRelatedSchemaIndexes:r5t}=_8e(),uQ=kW(),n5t=KO(),i5t=TS(),s5t=S8e(),o5t=FY(),G8e=A8e(),a5t=I8e(),u5t=HJ(),D8e=require("util"),nn=Ot(),c5t=Yz(),l5t=Mz(),d5t=DO(),dy=rY(),py=Symbol("mongoose#Model#collection"),fy=Symbol("mongoose#Model#db"),H8e=ot().modelSymbol,RS=Symbol("mongoose#Model#subclassed"),{VERSION_INC:PI,VERSION_WHERE:k8e,VERSION_ALL:p5t}=Md,f5t=Object.assign({},oQ,{bson:!0});function De(t,e,r){if(e instanceof nQ)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");Md.call(this,t,e,r)}Object.setPrototypeOf(De.prototype,Md.prototype);De.prototype.$isMongooseModelPrototype=!0;De.prototype.db;De.useConnection=function(e){if(!e)throw new Error("Please provide a connection.");this.db&&(delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[fy],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[py]),this.db=e;let r=e.collection(this.collection.collectionName,e.options);return this.prototype.collection=r,this.prototype.$collection=r,this.prototype[py]=r,this.prototype.db=e,this.prototype[fy]=e,this.collection=r,this.$__collection=r,e.models[this.modelName]=this,this};De.prototype.collection;De.prototype.$__collection;De.prototype.modelName;De.prototype.$where;De.prototype.baseModelName;De.events;De._middleware;function z8e(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}De.prototype.$__handleSave=function(t,e){let r={};$8e(this.$__schema,t),typeof t.writeConcern<"u"?(r.writeConcern={},"w"in t.writeConcern&&(r.writeConcern.w=t.writeConcern.w),"j"in t.writeConcern&&(r.writeConcern.j=t.writeConcern.j),"wtimeout"in t.writeConcern&&(r.writeConcern.wtimeout=t.writeConcern.wtimeout)):("w"in t&&(r.w=t.w),"j"in t&&(r.j=t.j),"wtimeout"in t&&(r.wtimeout=t.wtimeout)),"checkKeys"in t&&(r.checkKeys=t.checkKeys);let n=this.$session(),i=this[fy].base.transactionAsyncLocalStorage?.getStore();if(n!=null?r.session=n:!t.hasOwnProperty("session")&&i?.session!=null&&(r.session=i.session),this.$isNew){let a=this.toObject(f5t);if((a||{})._id===void 0){kS(function(){e(new xt("document must have an _id before saving"))});return}this.$__version(!0,a),this[py].insertOne(a,r).then(u=>e(null,u),u=>{KE(this,!0),e(u,null)}),this.$__reset(),KE(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let s=this.$__delta();if(t.pathsToSave){for(let a in s[1].$set)if(!t.pathsToSave.includes(a)){if(t.pathsToSave.some(u=>a.slice(0,u.length)===u&&a.charAt(u.length)==="."))continue;delete s[1].$set[a]}}if(s){if(s instanceof xt){e(s);return}let a=this.$__where(s[0]);if(a instanceof xt){e(a);return}z8e(this,a);let u=s[1];if(this.$__schema.options.minimize){for(let c of Object.values(u))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||nn.isPOJO(c[l])&&(c5t(c[l]),Object.keys(c[l]).length===0&&(delete c[l],u.$unset=u.$unset||{},u.$unset[l]=1))}this[py].updateOne(a,u,r).then(c=>{c==null?c={$where:a}:c.$where=a,e(null,c)},c=>{this.$__undoReset(),e(c)})}else{o.call(this);return}this.$__.modifiedPaths=this.modifiedPaths().concat(Object.keys(this.$__.activePaths.getStatePaths("default"))),this.$__reset(),KE(this,!1);function o(){let a=Object.assign({},t,r),u=this.$__where(),c=this.$__schema.options.optimisticConcurrency;if(c&&!Array.isArray(c)){let l=this.$__schema.options.versionKey,d=this.$__getValue(l);d!=null&&(u[l]=d)}V8t(this.$__schema,a),this.constructor.collection.findOne(u,a).then(l=>{e(null,{$where:u,matchedCount:l?1:0})}).catch(e)}};De.prototype.$__save=function(t,e){this.$__handleSave(t,(r,n)=>{if(r)return r=this.$__schema._transformDuplicateKeyError(r),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},a=>{e(a,this)});let i=0;if((t!=null?t.writeConcern!=null?t.writeConcern.w:t.w:0)!==0){if(n!=null&&(Array.isArray(n)?i=n.length:n.matchedCount!=null?i=n.matchedCount:i=n),this.$__.version&&!this.$__.inserting){let a=PI===(PI&this.$__.version);this.$__.version=void 0;let u=this.$__schema.options.versionKey,c=this.$__getValue(u)||0;if(i<=0){this.$__undoReset();let l=this.$__.$versionError||new B8e(this,c,this.$__.modifiedPaths);return e(l,this)}a&&this.$__setValue(u,c+1)}if(n!=null&&i<=0)return this.$__undoReset(),r=new N8t(n.$where,this.constructor.modelName,i,n),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},u=>{e(u,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,i),this.constructor.emit("save",this,i),e(null,this)})};function h5t(t,e,r){let n=t.$__schema.options.versionKey;if(!n)return null;let i=t.$__getValue(n)||0;return new B8e(t,i,e.concat(r))}De.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new xt("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new R8e(this):this.$__.saving=new R8e(this),e=new q8t(e),e.hasOwnProperty("session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=h5t(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),r)throw this.$__handleReject(r),r;return this.$__.saveOptions=e,await new Promise((n,i)=>{this.$__save(e,s=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,s!=null)return this.$__handleReject(s),i(s);n()})}),this};De.prototype.$save=De.prototype.save;De.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(u5t(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(k8e===(k8e&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}PI===(PI&this.$__.version)&&(DS(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};De.prototype.increment=function(){return this.$__.version=p5t,this};De.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0?new xt("No _id found on document!"):e};De.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new xt("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),e.hasOwnProperty("session")&&this.$session(e.session);let r=this,n=this.$__where();if(n instanceof Error)throw n;let i=r.constructor.deleteOne(n,e);return this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),i.pre(function(o){r.constructor._middleware.execPre("deleteOne",r,[r],o)}),i.pre(function(o){iQ(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPre("deleteOne",a,[a],u)},o)}),i.pre(function(o){return r.$__.isDeleted?o(sQ.skipWrappedFunction()):o()}),i.post(function(o){iQ(r.$getAllSubdocs(),(a,u)=>{a.constructor._middleware.execPost("deleteOne",a,[a],{},u)},o)}),i.post(function(o){r.constructor._middleware.execPost("deleteOne",r,[r],{},o)}),i};De.prototype.$model=function(e){return arguments.length===0?this.constructor:this[fy].model(e)};De.prototype.model=De.prototype.$model;De.exists=function(e,r){if(qt(this,"exists"),typeof arguments[2]=="function")throw new xt("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};De.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=nn.getFunctionName(n),!(n.prototype instanceof De)))throw new xt("The provided class "+t+" must extend Model");r=r||{};let i=nn.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,a=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(qt(this,"discriminator"),nn.isObject(e)&&!e.instanceOfSchema&&(e=new nQ(e)),e instanceof nQ&&s&&(e=e.clone()),e=Q8t(this,t,e,i,o,r.mergeHooks,a),this.db.models[t]&&!e.options.overwriteModels&&!a)throw new B8t(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let u=this.discriminators[t];if(Object.setPrototypeOf(u.prototype,this.prototype),Object.defineProperty(u,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),q8e(u,e),j8e(u,e),this[RS]!=null)for(let c of this[RS])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return u};function qt(t,e){if(t==null||t===global)throw new xt("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[H8e]==null)throw new xt("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in rQ.prototype)De[t]=rQ.prototype[t];De.init=function(){if(qt(this,"init"),typeof arguments[0]=="function")throw new xt("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(nn.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(nn.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return await this.createSearchIndexes()},i=async()=>{let a=nn.getOption("autoCreate",this.schema.options,e.config);if(a==null&&(await e._waitForConnect(!0),a=nn.getOption("autoCreate",this.schema.options,e.config,e.base.options)),!!a)return await this.createCollection()};this.$init=i().then(()=>r()).then(()=>n());let s=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,s.apply(o.$init,arguments)},this.$init};De.createCollection=async function(e){if(qt(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.createCollection() no longer accepts a callback");let r=await new Promise((u,c)=>{this.hooks.execPre("createCollection",this,[e],l=>{if(l!=null)return l instanceof sQ.skipWrappedFunction?u(!0):c(l);u()})}),n=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;n!=null&&(e=Object.assign({},n,e));let i=this&&this.schema&&this.schema.options&&this.schema.options.collation;i!=null&&(e=Object.assign({collation:i},e));let s=this&&this.schema&&this.schema.options&&this.schema.options.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;o!=null&&(e=Object.assign({timeseries:o},e),e.expireAfterSeconds!=null||(e.expires!=null?nn.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,nn.expires(e))));let a=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;a!=null&&(e=Object.assign({clusteredIndex:{...a,unique:!0}},e));try{r||await this.db.createCollection(this.$__collection.collectionName,e)}catch(u){u!=null&&(u.name!=="MongoServerError"||u.code!==48)&&await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("createCollection",this,[null],d,p=>{if(p!=null)return l(p);c()})})}return await new Promise((u,c)=>{this.hooks.execPost("createCollection",this,[this.$__collection],l=>{if(l!=null)return c(l);u()})}),this.$__collection};De.syncIndexes=async function(e){if(qt(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.syncIndexes() no longer accepts a callback");if(e?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??!0)try{await this.createCollection()}catch(s){if(s!=null&&(s.name!=="MongoServerError"||s.code!==48))throw s}let n=await this.diffIndexes({indexOptionsToCreate:!0}),i=await this.cleanIndexes({...e,toDrop:n.toDrop});return await this.createIndexes({...e,toCreate:n.toCreate}),i};De.createSearchIndex=async function(e){return qt(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};De.updateSearchIndex=async function(e,r){return qt(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};De.dropSearchIndex=async function(e){return qt(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};De.listSearchIndexes=async function(e){return qt(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};De.diffIndexes=async function(e){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.syncIndexes() no longer accepts a callback");let r=this,n=await r.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});n===void 0&&(n=[]),n=t5t(r,n);let i=r.schema,s=r5t(r,i.indexes()),o=y5t(i,s,n),a=m5t(i,s,n,o,e);return{toDrop:o,toCreate:a}};function m5t(t,e,r,n,i){let s=[],o=i?.indexOptionsToCreate??!1;for(let[a,u]of e){let c=!1,l=uQ(t,df(u));for(let d of r)if(!aQ(d)&&V8e(a,l,d)&&!n.includes(d.name)){c=!0;break}c||(o?s.push([a,u]):s.push(a))}return s}function y5t(t,e,r){let n=[];for(let i of r){let s=!1;if(!aQ(i)&&!e5t(i,t.options)){for(let[o,a]of e){let u=uQ(t,df(a));if(L8e(o,u,t.options),V8e(o,u,i)){s=!0;break}}s||n.push(i.name)}}return n}De.cleanIndexes=async function(e){if(qt(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e&&e.toDrop))return await M8e(e.toDrop,r,e);let n=await r.diffIndexes();return await M8e(n.toDrop,r,e)};async function M8e(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r&&r.hideIndexes?await Promise.all(t.map(i=>e.db.db.command({collMod:n.collectionName,index:{name:i,hidden:!0}}))):await Promise.all(t.map(i=>n.dropIndex(i))),t}De.listIndexes=async function(){if(qt(this,"listIndexes"),typeof arguments[0]=="function")throw new xt("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};De.ensureIndexes=async function(e){if(qt(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{g5t(this,e,i=>{if(i!=null)return n(i);r()})})};De.createIndexes=async function(e){if(qt(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new xt("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function g5t(t,e,r){let n=Array.isArray(e?.toCreate)?e.toCreate:t.schema.indexes(),i;e=e||{};let s=function(d){d&&!t.$caught&&t.emit("error",d),t.emit("index",d||i),r&&r(d||i)};for(let d of n)aQ(d)&&nn.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){kS(function(){s()});return}let o=function(d,p,f,h){t.emit("index-single-done",d,p,f,h)},a=function(d,p){t.emit("index-single-start",d,p)},u=t.schema._baseSchema,c=u?u.indexes():[];kS(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return s();let d=n.shift();if(!d)return s();if(e._automatic&&d[1]._autoIndex===!1||c.find(g=>nn.deepEqual(g,d)))return l();let p=df(d[0]),f=df(d[1]);delete f._autoIndex,uQ(t.schema,f),$8e(t.schema,f),L8e(p,f,t.schema.options),a(p,e),"background"in e&&(f.background=e.background);let h=null;try{h=t.collection.createIndex(p,f)}catch(g){i||(i=g),t.$caught||t.emit("error",g),o(g,p,f),l();return}h.then(g=>{o(null,p,f,g),l()},g=>{i||(i=g),t.$caught||t.emit("error",g),o(g,p,f),l()})}}De.createSearchIndexes=async function(){qt(this,"createSearchIndexes");let e=[];for(let r of this.schema._searchIndexes)e.push(await this.createSearchIndex(r));return e};De.schema;De.db;De.collection;De.$__collection;De.base;De.discriminators;De.translateAliases=function(e,r){qt(this,"translateAliases");let n=(i,s)=>{let o,a=[],u=i.split("."),c=this.schema;for(let d in u){let p=u[d];if(c&&c.aliases[p]){if(o=c.aliases[p],r&&o in e)throw new xt(`Provided object has both field "${p}" and its alias "${o}"`);a.push(o)}else o=p,a.push(p);c&&c.paths[o]?c=c.paths[o].schema:c=null}let l=a.join(".");return e instanceof Map?e.set(l,s):e[l]=s,l!==i&&(e instanceof Map?e.delete(i):delete e[i]),e};if(typeof e=="object"){if(e instanceof Map)for(let i of new Map(e))e=n(i[0],i[1]);else for(let i of Object.keys(e))if(e=n(i,e[i]),i[0]==="$")if(Array.isArray(e[i]))for(let s in e[i])e[i][s]=this.translateAliases(e[i][s]);else this.translateAliases(e[i]);return e}else return e};De.deleteOne=function(e,r){if(qt(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};De.deleteMany=function(e,r){if(qt(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};De.find=function(e,r,n){if(qt(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new xt("Model.find() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.find(e)};De.findById=function(e,r,n){if(qt(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.findById() no longer accepts a callback");return this.findOne({_id:e},r,n)};De.findOne=function(e,r,n){if(qt(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.findOne() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.findOne(e)};De.estimatedDocumentCount=function(e){return qt(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};De.countDocuments=function(e,r){if(qt(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};De.distinct=function(e,r,n){if(qt(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.distinct() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return n!=null&&i.setOptions(n),i.distinct(e,r)};De.where=function(e,r){qt(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};De.$where=function(){qt(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};De.findOneAndUpdate=function(t,e,r){if(qt(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new xt("Model.findOneAndUpdate() no longer accepts a callback");let n;r&&(n=r.fields||r.projection),e=df(e,{depopulate:!0,_isNested:!0}),K8e(e,r,this.schema.options.versionKey);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndUpdate(t,e,r)};De.findByIdAndUpdate=function(t,e,r){if(qt(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new xt("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof Md&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};De.findOneAndDelete=function(t,e){if(qt(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};De.findByIdAndDelete=function(t,e){if(qt(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new xt("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};De.findOneAndReplace=function(t,e,r){if(qt(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new xt("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndReplace(t,e,r)};De.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.create() no longer accepts a callback");qt(this,"create");let n,i=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let a=arguments[arguments.length-1];if(r={},typeof a=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!a&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&a&&X8t(a.session)==="ClientSession"&&!this.schema.path("session")&&nn.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let s=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.session&&!r.ordered&&n.length>1)throw new xt("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(r.ordered){for(let a=0;a<n.length;a++)try{let u=n[a],c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||IS(this.discriminators,u[i]):this;if(c==null)throw new xt(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);let l=u;l instanceof c||(l=new c(l)),await l.$save(r),s.push(l)}catch(u){if(!o)s.push(u);else throw u}return s}else if(!o)s=await Promise.allSettled(n.map(async a=>{let u=this.discriminators&&a[i]!=null?this.discriminators[a[i]]||IS(this.discriminators,a[i]):this;if(u==null)throw new xt(`Discriminator "${a[i]}" not found for model "${this.modelName}"`);let c=a;return c instanceof u||(c=new u(c)),await c.$save(r),c})),s=s.map(a=>a.status==="fulfilled"?a.value:a.reason);else{let a=null;if(s=await Promise.all(n.map(async u=>{let c=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||IS(this.discriminators,u[i]):this;if(c==null)throw new xt(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);try{let l=u;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){a||(a=l)}})),a)throw a}return!Array.isArray(e)&&n.length===1?s[0]:s};De.insertOne=async function(e,r){qt(this,"insertOne");let n=this.schema.options.discriminatorKey,i=this.discriminators&&e[n]!=null?this.discriminators[e[n]]||IS(this.discriminators,e[n]):this;if(i==null)throw new xt(`Discriminator "${e[n]}" not found for model "${this.modelName}"`);return e instanceof i||(e=new i(e)),await e.$save(r)};De.watch=function(t,e){qt(this,"watch");let r=n=>{if(t=t||[],o5t(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,e);n(null,i)});else{let i=this.$__collection.watch(t,e);n(null,i)}};return e=e||{},e.model=this,new P8t(r,t,e)};De.startSession=function(){return qt(this,"startSession"),this.db.startSession.apply(this.db,arguments)};De.insertMany=async function(e,r){if(qt(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.insertMany() no longer accepts a callback");return new Promise((n,i)=>{this.$__insertMany(e,r,(s,o)=>{if(s!=null)return i(s);n(o)})})};De.$__insertMany=function(t,e,r){let n=this;typeof e=="function"&&(r=e,e=null),r=r||nn.noop,e=e||{};let i=e.limit||1e3,s=!!e.rawResult,o=typeof e.ordered=="boolean"?e.ordered:!0,a=typeof e.throwOnValidationError=="boolean"?e.throwOnValidationError:!1,u=!!e.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!e||!e.hasOwnProperty("session"))&&c?.session!=null&&(e={...e,session:c.session}),Array.isArray(t)||(t=[t]);let l=[],d=new Map,p=o?null:new Array(t.length),f=t.map((h,g)=>_=>{if(u)return kS(()=>_(null,h));let S=!1;if(!(h instanceof n)){if(h!=null&&typeof h!="object")return _(new F8t(h,"arr."+g,"insertMany"));try{h=new n(h),S=!0}catch(w){return _(w)}}if(e.session!=null&&h.$session(e.session),u)return kS(()=>_(null,h));h.$validate(S?{_skipParallelValidateCheck:!0}:null).then(()=>{_(null,h)},w=>{if(o===!1)return l.push(w),d.set(w,g),p[g]=w,_(null,null);_(w)})});s5t(f,i,function(h,g){if(h){r(h,null);return}let _=new Map,S=new Map;for(let A=0;A<g.length;++A)_.set(g[A],A);let w=g.filter(function(A){return A!=null});for(let A=0;A<w.length;++A)S.set(A,_.get(w[A]));if(l.length>0&&l.sort((A,O)=>d.get(A)-d.get(O)),w.length===0){if(a)return r(new MI(l,p,null,"insertMany"));if(s){let A={acknowledged:!0,insertedCount:0,insertedIds:{}};return dy(A,l,l),r(null,A)}r(null,[]);return}let C=u?w:w.map(function(A){return A.$__schema.options.versionKey&&(A[A.$__schema.options.versionKey]=0),(!e||e.timestamps!==!1)&&A.initializeTimestamps&&(!A.$__||A.$__.timestamps!==!1)&&A.initializeTimestamps(),A.$__hasOnlyPrimitiveValues()?A.$__toObjectShallow():A.toObject(oQ)});n.$__collection.insertMany(C,e).then(A=>{if(!u)for(let O of w)O.$__reset(),KE(O,!1);if(o===!1&&a&&l.length>0){for(let O=0;O<p.length;++O)p[O]===void 0&&(p[O]=g[O]);return r(new MI(l,p,A,"insertMany"))}if(s){if(o===!1){for(let O=0;O<p.length;++O)p[O]===void 0&&(p[O]=g[O]);dy(A,l,p)}return r(null,A)}if(e.populate!=null)return n.populate(w,e.populate).then(O=>{r(null,O)},O=>{throw O!=null&&(O.insertedDocs=w),O});r(null,w)},A=>{A.writeErrors==null&&(A.result&&A.result.result&&A.result.result.writeErrors)!=null&&(A.writeErrors=A.result.result.writeErrors);let O=A&&A.writeErrors,x=new Set((A&&A.writeErrors||[]).map(M=>M.index));if(A.writeErrors!=null)for(let M=0;M<A.writeErrors.length;++M){let I=S.get(A.writeErrors[M].index);A.writeErrors[M]={...A.writeErrors[M],index:I},o||(p[I]=A.writeErrors[M])}if(!o){for(let M=0;M<p.length;++M)p[M]===void 0&&(p[M]=g[M]);A.results=p}let R=-1;A.insertedDocs=w.filter((M,I)=>{let F=!O||x.has(I);if(o){if(R>-1)return I<R;F&&(R=I)}return!F}).map(function(I){return u||(I.$__reset(),KE(I,!1)),I}),s&&o===!1&&dy(A,l,p),r(A,null)})})};function KE(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}De.bulkWrite=async function(e,r){if(qt(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.bulkWrite() no longer accepts a callback");r=r||{};let n=await new Promise((u,c)=>{this.hooks.execPre("bulkWrite",this,[e,r],l=>{if(l!=null)return l instanceof sQ.skipWrappedFunction?u(l):c(l);u()})});if(n)return n.args[0];let i=r.ordered==null?!0:r.ordered;if(e.length===0){let u=this.base.driver.get().BulkWriteResult,c=new u(tQ(),!1);return c.n=0,dy(c,[],[]),c}let s=r?._skipCastBulkWrite?[]:e.map(u=>J8t(this,u,r)),o=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&o?.session!=null&&(r={...r,session:o.session});let a=null;if(i){await new Promise((u,c)=>{iQ(s,(l,d)=>l(d),l=>{if(l)return c(l);u()})});try{a=await this.$__collection.bulkWrite(e,r)}catch(u){await new Promise((c,l)=>{let d={error:u};this.hooks.execPost("bulkWrite",this,[null],d,p=>{if(p!=null)return l(p);c()})})}}else{let u=[],c=[],l=[];s.length>0?(u=await Promise.all(e.map((h,g)=>g>=s.length?g:new Promise(_=>{s[g](S=>{S==null?_(g):(c.push({index:g,error:S}),l[g]=S),_()})}))),u=u.filter(h=>h!=null)):u=e.map((h,g)=>g),c=c.sort((h,g)=>h.index-g.index).map(h=>h.error);let d=u.sort().map(h=>e[h]);if(d.length===0){if(r.throwOnValidationError&&c.length)throw new MI(c,l,a,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,g=new h(tQ(),!1);return g.result=tQ(),dy(g,c,l),g}let p;[a,p]=await this.$__collection.bulkWrite(d,r).then(h=>[h,null]).catch(h=>[null,h]);let f={};if(p?.writeErrors)for(let h of p.writeErrors)f[h.err.index]=h;for(let h=0;h<u.length;++h)l[u[h]]=f[h]??null;if(p&&(c.length>0&&dy(p,c,l),await new Promise((h,g)=>{let _={error:p};this.hooks.execPost("bulkWrite",this,[null],_,S=>{if(S!=null)return g(S);h()})})),c.length>0){if(r.throwOnValidationError)throw new MI(c,l,a,"bulkWrite");dy(a,c,l)}}return await new Promise((u,c)=>{this.hooks.execPost("bulkWrite",this,[a],l=>{if(l!=null)return c(l);u()})}),a};De.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let l of e)l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=r.timestamps;else for(let l of e)l.$__.timestamps!=null&&(l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=l.$__.timestamps);await Promise.all(e.map(l=>E5t(l,r)));let n=this.buildBulkWriteOperations(e,r),i={skipValidation:!0,_skipCastBulkWrite:!0,...r},{bulkWriteResult:s,bulkWriteError:o}=await this.bulkWrite(n,i).then(l=>({bulkWriteResult:l,bulkWriteError:null}),l=>({bulkWriteResult:null,bulkWriteError:l}));if(o!=null&&o.name!=="MongoBulkWriteError")throw o;let a=s?.matchedCount??0,u=s?.insertedCount??0;if(n.length>0&&a+u<n.length&&!o)throw new l5t(this.modelName,e,s);let c=[];for(let l=0;l<e.length;l++){let d=e[l];(o&&o.writeErrors.find(f=>(f.err.op._id||f.err.op.q._id).toString()===d._doc._id.toString()))==null&&c.push(d)}if(await Promise.all(c.map(l=>b5t(l))),o!=null)throw o;return s};function E5t(t,e){return new Promise((r,n)=>{t.schema.s.hooks.execPre("save",t,[e],i=>{if(i){n(i);return}r()})})}function b5t(t){return new Promise((e,r)=>{t.$isNew&&KE(t,!1),t.$__reset(),t.schema.s.hooks.execPost("save",t,[t],{},n=>{if(n){r(n);return}e()})})}De.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){L8t(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return j8t(e,this.schema),e};De.applyVirtuals=function(e,r){return e==null||e.$__!=null||z8t(this.schema,e,r),e};De.applyTimestamps=function(e,r){return e==null||e.$__!=null||H8t(this.schema,e,r),e};De.castObject=function(e,r){r=r||{};let n={},i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=U8e(i,e[s])||i);let o=Object.keys(i.paths);for(let u of o){let c=i.path(u);if(!c||!c.$isMongooseArray)continue;let l=DS(e,u);G8e(o,l,u)}let a=null;for(let u of o){let c=i.path(u);if(c==null)continue;let l=DS(e,u,void 0);if(l==null)continue;let d=u.indexOf(".")===-1?[u]:u.split("."),p=n;for(let f=0;f<d.length-1;++f)p[d[f]]==null&&(p[d[f]]=isNaN(d[f+1])?{}:[]),p=p[d[f]];if(c.$isMongooseDocumentArray){let f=c.options?.castNonArrays??c.constructor.options.castNonArrays;if(!Array.isArray(l)){f?p[d[d.length-1]]=[De.castObject.call(c.caster,l)]:r.ignoreCastErrors||(a=a||new kI,a.addError(u,new d5t(u,l)));continue}}if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=De.castObject.call(c.caster,l)}catch(f){r.ignoreCastErrors||(a=a||new kI,a.addError(u,f));continue}p[d[d.length-1]]=l;continue}try{l=c.cast(l),p[d[d.length-1]]=l}catch(f){r.ignoreCastErrors||(a=a||new kI,a.addError(u,f));continue}}if(a!=null)throw a;return n};De.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);return i(),e.map((s,o)=>{if(!r.skipValidation){if(!(s instanceof Md))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(r.validateBeforeSave==null||r.validateBeforeSave){let l=s.validateSync();if(l!=null)throw l}}if(s.isNew){let l={insertOne:{document:s}};return nn.injectTimestampsOption(l.insertOne,r.timestamps),l}let u=s.$__delta();if(u!=null&&!nn.isEmptyObject(u[0])){let l=s.$__where(u[0]),d=u[1];z8e(s,l);let p=this.schema.options.shardKey;if(p){let h=Object.keys(p),g=h.length;for(let _=0;_<g;++_)l[h[_]]=s[h[_]]}s.$__version(l,u);let f={updateOne:{filter:l,update:d}};return nn.injectTimestampsOption(f.updateOne,r.timestamps),f}return null}).filter(s=>s!==null);function i(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};De.hydrate=function(t,e,r){if(qt(this,"hydrate"),r?.virtuals&&r?.hydratedPopulatedDocs===!1)throw new xt("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");e!=null&&(t!=null&&t.$__!=null&&(t=t.toObject(oQ)),t=U8t(t,e));let n=qv().createModel(this,t,e);return n.$init(t,r),n};De.updateMany=function(e,r,n){if(qt(this,"updateMany"),r==null)throw new xt("updateMany `update` parameter cannot be nullish");return cQ(this,"updateMany",e,r,n)};De.updateOne=function(e,r,n){return qt(this,"updateOne"),cQ(this,"updateOne",e,r,n)};De.replaceOne=function(e,r,n){qt(this,"replaceOne");let i=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return i&&!r[i]&&(r[i]=0),cQ(this,"replaceOne",e,r,n)};function cQ(t,e,r,n,i){let s=new t.Query({},{},t,t.collection);r instanceof Md?r=r.toObject():r=df(r),i=typeof i=="function"?i:df(i);let o=t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null;return K8e(n,i,o),s[e](r,n,i)}De.aggregate=function(e,r){if(qt(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.aggregate() no longer accepts a callback");let n=new M8t(e||[]);return n.model(this),r!=null&&n.option(r),n};De.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new xt("Model.validate() no longer accepts a callback");let i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=U8e(i,e[s])||i);let o=Object.keys(i.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(f=>f==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let d=l.split("."),p=d[0];for(let f of d){if(c.has(p))return!0;p+="."+f}return c.has(l)})}for(let c of o){let l=i.path(c);if(!l||!l.$isMongooseArray||l.$isMongooseDocumentArray)continue;let d=DS(e,c);G8e(o,d,c)}let a=null;o=new Set(o);try{e=this.castObject(e)}catch(c){a=c;for(let l of Object.keys(a.errors||{}))o.delete(l)}let u=o.size;return new Promise((c,l)=>{if(u===0)return d();for(let f of o){let h=i.path(f);if(h==null){p();continue}let g=f.indexOf(".")===-1?[f]:f.split("."),_=e;for(let w=0;w<g.length-1;++w)_=_[g[w]];let S=DS(e,f,void 0);h.doValidate(S,w=>{w&&(a=a||new kI,a.addError(f,w)),p()},n,{path:f})}function d(){a?l(a):c(e)}function p(){if(--u<=0)return d()}})};De.populate=async function(e,r){if(qt(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new xt("Model.populate() no longer accepts a callback");if(r=nn.populate(r),r.length===0)return e;if(r.find(n=>n.ordered))for(let n of r)await P8e(this,e,n);else{let n=[];for(let i of r)n.push(P8e(this,e,i));await Promise.all(n)}return e};var _5t=/\s?-_id\s?/,v5t=/\s?-_id\s?/g;async function P8e(t,e,r){if(r.strictPopulate==null&&(r._localModel!=null&&r._localModel.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(nn.isNullOrUndefined))return;let n=Z8t(t,e,r);if(n instanceof xt)throw n;let i=n.length,s=[];function o(c){return c!==void 0}let a=!1,u=[];for(let c=0;c<i;++c){let l=n[c],d=l.options.select,p=nn.array.flatten(l.ids,o);p=nn.array.unique(p);let f={};if(f.sort=l&&l.options&&l.options.options&&l.options.options.sort||void 0,f.excludeId=_5t.test(d)||d&&d._id===0,l.options&&l.options.options&&l.options.options.lean&&l.options.options.lean.transform&&(l.options.options._leanTransform=l.options.options.lean.transform,l.options.options.lean=!0),p.length===0||p.every(nn.isNullOrUndefined)){F8e(t,[],l,f);continue}a=!0,typeof r.foreignField=="string"&&(l.foreignField.clear(),l.foreignField.add(r.foreignField));let h=Y8t(p,l.match,l.foreignField,l.model,l.options.skipInvalidIds);f.excludeId&&(typeof d=="string"?d=d.replace(v5t," "):Array.isArray(d)?d=d.filter(g=>g!=="-_id"):(d={...d},delete d._id)),l.options.options&&l.options.options.limit!=null?f.originalLimit=l.options.options.limit:l.options.limit!=null&&(f.originalLimit=l.options.limit),u.push([l,h,d,f])}if(!a){if(n.length!==0)return;if(r.populate!=null){let c=nn.populate(r.populate).map(l=>Object.assign({},l,{path:r.path+"."+l.path}));return t.populate(e,c)}return}if(r.ordered)for(let c of u)await N8e.apply(null,c).then(l=>{s=s.concat(l)});else{let c=[];for(let l of u)c.push(N8e.apply(null,l).then(d=>{s=s.concat(d)}));await Promise.all(c)}for(let c of u){let l=c[0],d=c[3];for(let p of s)l.options._childDocs.push(p);F8e(t,s,l,d)}for(let c of u)a5t(c[0].foreignField,c[0].options,s);for(let c of u){let l=c[0];if(l.options&&l.options.options&&l.options.options._leanTransform)for(let d of s)l.options.options._leanTransform(d)}}function N8e(t,e,r){let n=df(t.options.populate),i={};t.options.skip!==void 0&&(i.skip=t.options.skip),t.options.limit!==void 0&&(i.limit=t.options.limit),t.options.perDocumentLimit!==void 0&&(i.perDocumentLimit=t.options.perDocumentLimit),Object.assign(i,t.options.options),t.count&&delete i.skip,i.perDocumentLimit!=null?(i.limit=i.perDocumentLimit,delete i.perDocumentLimit):i.limit!=null&&(i.limit=i.limit*t.ids.length);let s=t.model.find(e,r,i);for(let o of t.foreignField)o!=="_id"&&s.selectedInclusively()&&!n5t(s._fields,o)&&s.select(o);if(t.count)for(let o of t.foreignField)s.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(a=>{a.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let a of n)a._fullPath=o+"."+a.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);s.populate(n)}return s.exec().then(o=>{for(let a of o)i5t.set(a,t.model);return o})}function F8e(t,e,r,n){let i=r.options,s=r.isVirtual,o=r.justOne,a,u=i&&i.options&&i.options.lean||!1,c=e.length,l={},d={},p,f,h=df(r.allIds);for(let g=0;g<c;g++)if(f=e[g],f!=null)for(let _ of r.foreignField){if(a=nn.getValue(_,f),Array.isArray(a)){a=nn.array.unique(nn.array.flatten(a));for(let S of a)S instanceof Md&&(S=S._doc._id),S?.constructor?.name==="Binary"&&S.sub_type===4&&typeof S.toUUID=="function"||S?.constructor?.name==="Buffer"&&S._subtype===4&&typeof S.toUUID=="function"?p=String(S.toUUID()):p=String(S),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(g)):(d[p]=[d[p],f],l[p]=[l[p],g]):s&&!o?(d[p]=[f],l[p]=[g]):(d[p]=f,l[p]=g)}else a instanceof Md&&(a=a._doc._id),a?.constructor?.name==="Binary"&&a.sub_type===4&&typeof a.toUUID=="function"||a?.constructor?.name==="Buffer"&&a._subtype===4&&typeof a.toUUID=="function"?p=String(a.toUUID()):p=String(a),d[p]?Array.isArray(d[p])?(d[p].push(f),l[p].push(g)):(s||d[p].constructor!==f.constructor||(d[p]instanceof Md?String(d[p]._doc._id):String(d[p]._id))!==(f instanceof Md?String(f._doc._id):String(f._id)))&&(d[p]=[d[p],f],l[p]=[l[p],g]):(d[p]=f,l[p]=g);u||(f.$__.wasPopulated=f.$__.wasPopulated||{value:a})}W8t({originalModel:t,rawIds:r.isVirtual?h:r.allIds,allIds:h,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:d,rawOrder:l,docs:r.docs,path:i.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:u,virtual:r.virtual,count:r.count,match:r.match})}De.compile=function(e,r,n,i,s){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let d={};d[r.options.versionKey]=Number,r.add(d)}let a;typeof e=="function"&&e.prototype instanceof De?(a=e,e=a.name,r.loadClass(a,!1),a.prototype.$isMongooseModelPrototype=!0):a=function d(p,f,h){if(d.hooks.execPreSync("createModel",p),!(this instanceof d))return new d(p,f,h);let g=d.schema.options.discriminatorKey;if(d.discriminators==null||p==null||p[g]==null){De.call(this,p,f,h);return}let _=d.discriminators[p[g]]||IS(d.discriminators,p[g]);if(_!=null)return new _(p,f,h);De.call(this,p,f,h)},a.hooks=r.s.hooks.clone(),a.base=s,a.modelName=e,a.prototype instanceof De||(Object.setPrototypeOf(a,De),Object.setPrototypeOf(a.prototype,De.prototype)),a.model=function(p){return this.db.model(p)},a.db=i,a.prototype.db=i,a.prototype[fy]=i,a.discriminators=a.prototype.discriminators=void 0,a[H8e]=!0,a.events=new rQ,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:a.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=i.collection(n,c);return a.prototype.collection=l,a.prototype.$collection=l,a.prototype[py]=l,a.prototype.$__setSchema(r),q8e(a,r),j8e(a,r),K8t(a,r),G8t(a,r.s.hooks,r.statics),a.schema=a.prototype.$__schema,a.collection=l,a.$__collection=l,a.Query=function(){DI.apply(this,arguments)},Object.setPrototypeOf(a.Query.prototype,DI.prototype),a.Query.base=DI.base,a.Query.prototype.constructor=DI,a._applyQueryMiddleware(),S5t(a,r.query),a};De.clientEncryption=function(){let e=this.base.driver.get().ClientEncryption;if(!e)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let r=this.collection?.conn?.client;if(!r)return null;let n=r.options.autoEncryption;if(!n)return null;let{keyVaultNamespace:i,keyVaultClient:s,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c}=n;return new e(s??r,{keyVaultNamespace:i,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c})};De.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[fy]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[py]=r,this.collection=r,this.$__collection=r};function S5t(t,e){for(let r in e)t.Query.prototype[r]=e[r]}De.__subclass=function(e,r,n){let i=this,s=function l(d,p,f){if(!(this instanceof l))return new l(d,p,f);i.call(this,d,p,f)};if(Object.setPrototypeOf(s,i),Object.setPrototypeOf(s.prototype,i.prototype),s.db=e,s.prototype.db=e,s.prototype[fy]=e,i[RS]=i[RS]||[],i[RS].push(s),i.discriminators!=null){s.discriminators={};for(let l of Object.keys(i.discriminators))s.discriminators[l]=i.discriminators[l].__subclass(i.db,i.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:i.prototype.$__schema,a=o.options||{},u=o._userProvidedOptions||{};n||(n=i.prototype.$__schema.get("collection")||nn.toCollectionName(i.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:u,capped:o&&a.capped};return s.prototype.collection=e.collection(n,c),s.prototype.$collection=s.prototype.collection,s.prototype[py]=s.prototype.collection,s.collection=s.prototype.collection,s.$__collection=s.collection,s.init().catch(()=>{}),s};De.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,$8t(this.schema,new WeakSet,!0)};De.inspect=function(){return`Model { ${this.modelName} }`};De.namespace=function(){return this.db.name+"."+this.collection.collectionName};D8e.inspect.custom&&(De[D8e.inspect.custom]=De.inspect);De._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let i=w5t(n);return n.name==="validate"?!!i.query:n.name==="deleteOne"||n.name==="updateOne"?!!i.query||Object.keys(i).length===0:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function w5t(t){let e={};return t.hasOwnProperty("query")&&(e.query=t.query),t.hasOwnProperty("document")&&(e.document=t.document),e}J8e.exports=W8e=De});var Q8e=m((MS,Y8e)=>{"use strict";Y8e.exports=T5t;MS.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var A5t=MS.pluralization;MS.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var C5t=MS.uncountables;function T5t(t){let e;return t=t.toLowerCase(),!~C5t.indexOf(t)&&(e=A5t.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var r5e=m((k_r,t5e)=>{"use strict";var e5e=Qt(),X8e=require("util"),Z8e=xz(),Sh=class t extends e5e{constructor(){super(""),this.errors={}}toString(){return Z8e(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(i,n[i]);return}this.errors[e]=r,this.message=Z8e(this)}};X8e.inspect.custom&&(Sh.prototype[X8e.inspect.custom]=Sh.prototype.inspect);Object.defineProperty(Sh.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(Sh.prototype,"name",{value:"SetOptionError"});var lQ=class extends e5e{constructor(e){super(`"${e}" is not a valid option to set`)}};Sh.SetOptionInnerError=lQ;t5e.exports=Sh});var i5e=m(()=>{"use strict";var n5e=Ot();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&n5e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),setTimeout.clock!=null&&typeof setTimeout.clock.Date=="function"&&n5e.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var l5e=m((u5e,c5e)=>{"use strict";var s5e=dc(),o5e=require("events").EventEmitter,a5e=Oa(),O5t=Q0(),x5t=Wp(),I5t=a5e.ValidationError,R5t=dx(),D5t=dh();function gc(t,e,r,n,i){if(!(this instanceof gc))return new gc(t,e,r,n,i);if(D5t(e)&&!e.instanceOfSchema&&(e=new O5t(e)),e=this.schema||e,!this.schema&&e.options._id&&(t=t||{},t._id===void 0&&(t._id=new x5t)),!e)throw new a5e.MissingSchemaError;this.$__setSchema(e),s5e.call(this,t,r,n,i),R5t(this,e,{decorateDoc:!0});for(let s in e.methods)this[s]=e.methods[s];for(let s in e.statics)this[s]=e.statics[s]}gc.prototype=Object.create(s5e.prototype);gc.prototype.constructor=gc;gc.events=new o5e;gc.$emitter=new o5e;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(t){gc[t]=function(){return gc.$emitter[t].apply(gc.$emitter,arguments)}});gc.ValidationError=I5t;c5e.exports=u5e=gc});var p5e=m((N_r,dQ)=>{"use strict";var k5t=dc(),M5t=l5e(),d5e=!1;dQ.exports=function(){return d5e?M5t:k5t};dQ.exports.setBrowser=function(t){d5e=t}});var S5e=m((_5e,v5e)=>{"use strict";var P5t=dc(),N5t=require("events").EventEmitter,h5e=U0(),pf=Q0(),F5t=Ci(),PS=Qv(),B5t=ux(),FI=b3(),f5e=vwe(),q5t=EE(),L5t=yI(),m5e=$Y(),j5t=$J(),$5t=fJ(),y5e=Qx(),K5t=Q8e(),pQ=Ot(),U5t=aY(),V5t=ey(),G5t=qY(),H5t=oE().trusted,z5t=IY(),W5t=Vs(),UE=Qt(),NI=r5e(),J5t=jY(),g5e=Symbol.for("mongoose:default"),E5e=Symbol("mongoose:defaultConnection");i5e();var Y5t=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:b5e}=require("node:async_hooks");function Ke(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new N5t,this.__driver=y5e.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(pQ.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&fQ(this),this.options.pluralization&&(this._pluralize=K5t),!t||!t[g5e]){let r=this;this.Schema=function(){return this.base=r,pf.apply(this,arguments)},this.Schema.prototype=Object.create(pf.prototype),Object.assign(this.Schema,pf),this.Schema.base=this,this.Schema.Types=Object.assign({},pf.Types)}else for(let r of["Schema","model"])this[r]=Ke.prototype[r];this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new b5e),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values($5t).map(r=>[r,{deduplicate:!0}])})}Ke.prototype.cast=V5t;Ke.prototype.STATES=FI;Ke.prototype.ConnectionStates=FI;Ke.prototype.driver=y5e;Ke.prototype.setDriver=function(e){let r=this instanceof Ke?this:bo;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==FI.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new UE(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);e.SchemaTypes!=null&&Object.assign(bo.Schema.Types,e.SchemaTypes);let i=e.Connection,s=r.connections[0];if(r.connections=[new i(r)],r.connections[0].models=r.models,s==null)return r;for(let o of Object.values(r.models))o.db===s&&o.$__updateConnection(r.connections[0]);return r};Ke.prototype.set=function(e,r){let n=this instanceof Ke?this:bo;if(arguments.length===1&&typeof e!="object"){if(f5e.indexOf(e)===-1){let o=new NI;throw o.addError(e,new NI.SetOptionInnerError(e)),o}return n.options[e]}let i={};arguments.length===2&&(i={[e]:r}),arguments.length===1&&typeof e=="object"&&(i=e);let s;for(let[o,a]of Object.entries(i)){if(f5e.indexOf(o)===-1){s||(s=new NI),s.addError(o,new NI.SetOptionInnerError(o));continue}n.options[o]=a,o==="objectIdGetter"?a?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?a&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new b5e:!a&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(a&&!n.connection?fQ(n):a===!1&&n.connection&&n.connection[E5e]&&n.connection.readyState===FI.disconnected&&Object.keys(n.connection.models).length===0&&n.connections.shift())}if(s)throw s;return n};Ke.prototype.get=Ke.prototype.set;Ke.prototype.createConnection=function(e,r){let n=this instanceof Ke?this:bo,i=n.__driver.Connection,s=new i(n);return n.connections.push(s),n.nextConnectionId++,n.events.emit("createConnection",s),arguments.length>0&&s.openUri(e,{...r,_fireAndForget:!0}),s};Ke.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new UE("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof Ke?this:bo;return n.connection==null&&fQ(n),n.connection.openUri(e,r).then(()=>n)};Ke.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new UE("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof Ke?this:bo;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};Ke.prototype.startSession=function(){let e=this instanceof Ke?this:bo;return e.connection.startSession.apply(e.connection,arguments)};Ke.prototype.pluralize=function(e){let r=this instanceof Ke?this:bo;return arguments.length>0&&(r._pluralize=e),r._pluralize};Ke.prototype.model=function(e,r,n,i){let s=this instanceof Ke?this:bo;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=s.models[e];if(!c)throw new s.Error.MissingSchemaError(e);return c}if(pQ.isObject(r)&&!(r instanceof pf)&&(r=new pf(r)),r&&!(r instanceof pf))throw new s.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");i=i||{};let o=r;r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r));let a=s.options.hasOwnProperty("overwriteModels")?s.options.overwriteModels:i.overwriteModels;if(s.models.hasOwnProperty(e)&&i.cache!==!1&&a!==!0){if(o&&o.instanceOfSchema&&o!==s.models[e].schema)throw new s.Error.OverwriteModelError(e);if(n&&n!==s.models[e].collection.name){let c=s.models[e];return r=c.prototype.schema,c.__subclass(s.connection,r,n)}return s.models[e]}if(r==null)throw new s.Error.MissingSchemaError(e);let u=s._model(e,r,n,i);return s.connection.models[e]=u,s.models[e]=u,u};Ke.prototype._model=function(e,r,n,i){let s=this instanceof Ke?this:bo,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof m5e)))throw new s.Error("The provided class "+e+" must extend Model");r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=s.options.pluralization),n||(n=r.get("collection")||pQ.toCollectionName(e,s.pluralize())),J5t(r);let a=i.connection||s.connection;if(o=s.Model.compile(o||e,r,n,a,s),o.init().catch(function(){}),a.emit("model",o),r._applyDiscriminators!=null)for(let u of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(u);o.discriminator(u,c,l)}return o};Ke.prototype.deleteModel=function(e){let r=this instanceof Ke?this:bo;return r.connection.deleteModel(e),delete r.models[e],r};Ke.prototype.modelNames=function(){let e=this instanceof Ke?this:bo;return Object.keys(e.models)};Ke.prototype._applyPlugins=function(e,r){let n=this instanceof Ke?this:bo;r=r||{},r.applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof(n.options&&n.options.applyPluginsToChildSchemas)=="boolean"?n.options.applyPluginsToChildSchemas:!0,j5t(e,n.plugins,r,"$globalPluginsApplied")};Ke.prototype.plugin=function(e,r){let n=this instanceof Ke?this:bo;return n.plugins.push([e,r]),n};Ke.prototype.__defineGetter__("connection",function(){return this.connections[0]});Ke.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});Ke.prototype.connections;Ke.prototype.nextConnectionId;Ke.prototype.Aggregate=G5t;Ke.prototype.BaseCollection=Y$();Object.defineProperty(Ke.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(Ke.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});Ke.prototype.BaseConnection=oY();Ke.prototype.version=U5t.version;Ke.prototype.Mongoose=Ke;Ke.prototype.Schema=pf;Ke.prototype.SchemaType=F5t;Ke.prototype.SchemaTypes=pf.Types;Ke.prototype.VirtualType=B5t;Ke.prototype.Types=q5t;Ke.prototype.Query=L5t;Ke.prototype.Model=m5e;Ke.prototype.Document=P5t;Ke.prototype.DocumentProvider=p5e();Ke.prototype.ObjectId=PS.ObjectId;Ke.prototype.isValidObjectId=function(e){return(this instanceof Ke?this:bo).Types.ObjectId.isValid(e)};Ke.prototype.isObjectIdOrHexString=function(e){return W5t(e,"ObjectId")||typeof e=="string"&&Y5t.test(e)};Ke.prototype.syncIndexes=function(e){return(this instanceof Ke?this:bo).connection.syncIndexes(e)};Ke.prototype.Decimal128=PS.Decimal128;Ke.prototype.Mixed=PS.Mixed;Ke.prototype.Date=PS.Date;Ke.prototype.Number=PS.Number;Ke.prototype.Error=UE;Ke.prototype.MongooseError=UE;Ke.prototype.now=function(){return new Date};Ke.prototype.CastError=UE.CastError;Ke.prototype.SchemaTypeOptions=Ia();Ke.prototype.mquery=OY();Ke.prototype.sanitizeFilter=z5t;Ke.prototype.trusted=H5t;Ke.prototype.skipMiddlewareFunction=h5e.skipWrappedFunction;Ke.prototype.overwriteMiddlewareResult=h5e.overwriteResult;Ke.prototype.omitUndefined=$W();function fQ(t){if(t.connection)return;let e=t.createConnection();e[E5e]=!0,e.models=t.models}var bo=v5e.exports=_5e=new Ke({[g5e]:!0})});var C5e=m((F_r,A5e)=>{"use strict";var w5e=bwe();Qx().set(w5e);var hQ=S5e();hQ.setDriver(w5e);hQ.Mongoose.prototype.mongo=M0();A5e.exports=hQ});var hy=m((B_r,Et)=>{"use strict";var vt=C5e();Et.exports=vt;Et.exports.default=vt;Et.exports.mongoose=vt;Et.exports.cast=vt.cast;Et.exports.STATES=vt.STATES;Et.exports.setDriver=vt.setDriver;Et.exports.set=vt.set;Et.exports.get=vt.get;Et.exports.createConnection=vt.createConnection;Et.exports.connect=vt.connect;Et.exports.disconnect=vt.disconnect;Et.exports.startSession=vt.startSession;Et.exports.pluralize=vt.pluralize;Et.exports.model=vt.model;Et.exports.deleteModel=vt.deleteModel;Et.exports.modelNames=vt.modelNames;Et.exports.plugin=vt.plugin;Et.exports.connections=vt.connections;Et.exports.version=vt.version;Et.exports.Aggregate=vt.Aggregate;Et.exports.Mongoose=vt.Mongoose;Et.exports.Schema=vt.Schema;Et.exports.SchemaType=vt.SchemaType;Et.exports.SchemaTypes=vt.SchemaTypes;Et.exports.VirtualType=vt.VirtualType;Et.exports.Types=vt.Types;Et.exports.Query=vt.Query;Et.exports.Model=vt.Model;Et.exports.Document=vt.Document;Et.exports.ObjectId=vt.ObjectId;Et.exports.isValidObjectId=vt.isValidObjectId;Et.exports.isObjectIdOrHexString=vt.isObjectIdOrHexString;Et.exports.syncIndexes=vt.syncIndexes;Et.exports.Decimal128=vt.Decimal128;Et.exports.Mixed=vt.Mixed;Et.exports.Date=vt.Date;Et.exports.Number=vt.Number;Et.exports.Error=vt.Error;Et.exports.MongooseError=vt.MongooseError;Et.exports.now=vt.now;Et.exports.CastError=vt.CastError;Et.exports.SchemaTypeOptions=vt.SchemaTypeOptions;Et.exports.mongo=vt.mongo;Et.exports.mquery=vt.mquery;Et.exports.sanitizeFilter=vt.sanitizeFilter;Et.exports.trusted=vt.trusted;Et.exports.skipMiddlewareFunction=vt.skipMiddlewareFunction;Et.exports.overwriteMiddlewareResult=vt.overwriteMiddlewareResult});var VE,wh,mQ,Q5t,T5e,GE,BI=ce(()=>{"use strict";VE=Ct(hy());wh={free:{max:2,min:0,current:2},standard:{max:5,min:0,current:5},premium:{max:7,min:0,current:7}},mQ=new VE.Schema({max:{type:Number,default:0,min:0},min:{type:Number,default:0,min:0},current:{type:Number,default:0,min:0}},{_id:!1}),Q5t=new VE.Schema({premium:{type:mQ,default:wh.premium},standard:{type:mQ,default:wh.standard},free:{type:mQ,default:wh.free}},{_id:!1}),T5e=new VE.Schema({plan:{type:String,default:"free"},email:{type:String,required:[!0,"Email is required"],unique:[!0,"Email must be unique"]},username:{type:String,required:[!0,"Username is required"]},privacyPolicyAccepted:{type:Boolean,default:!0},lengthOfDocs:{type:Q5t,default:{premium:wh.premium,standard:wh.standard,free:wh.free}},userId:{type:String,required:[!0,"userId is required"],unique:!0},status:{type:String,enum:["active","deleted"],default:"active"},deletedAt:{type:Date,default:null},permanentDeleteAt:{type:Date,default:null}},{timestamps:!0,strict:!0});T5e.index({permanentDeleteAt:1},{expireAfterSeconds:0});GE=(0,VE.model)("User",T5e)});var qa=m((L_r,O5e)=>{"use strict";var yQ=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};O5e.exports=t=>{if(t.length>2)throw new yQ(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var D5e=m((j_r,R5e)=>{var I5e={};R5e.exports=I5e;var x5e={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(x5e).forEach(function(t){var e=x5e[t],r=I5e[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var M5e=m(($_r,k5e)=>{"use strict";k5e.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var N5e=m((K_r,P5e)=>{"use strict";var X5t=require("os"),Fl=M5e(),Go=process.env,HE=void 0;Fl("no-color")||Fl("no-colors")||Fl("color=false")?HE=!1:(Fl("color")||Fl("colors")||Fl("color=true")||Fl("color=always"))&&(HE=!0);"FORCE_COLOR"in Go&&(HE=Go.FORCE_COLOR.length===0||parseInt(Go.FORCE_COLOR,10)!==0);function Z5t(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function eCt(t){if(HE===!1)return 0;if(Fl("color=16m")||Fl("color=full")||Fl("color=truecolor"))return 3;if(Fl("color=256"))return 2;if(t&&!t.isTTY&&HE!==!0)return 0;var e=HE?1:0;if(process.platform==="win32"){var r=X5t.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Go)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Go})||Go.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Go)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Go.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Go){var n=parseInt((Go.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Go.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Go.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Go.TERM)||"COLORTERM"in Go?1:(Go.TERM==="dumb",e)}function gQ(t){var e=eCt(t);return Z5t(e)}P5e.exports={supportsColor:gQ,stdout:gQ(process.stdout),stderr:gQ(process.stderr)}});var B5e=m((U_r,F5e)=>{F5e.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var L5e=m((V_r,q5e)=>{q5e.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(u){var c=Math.floor(Math.random()*u);return c}function o(u){var c=!1;return i.filter(function(l){c=l===u}),c}function a(u,c){var l="",d,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",u=u.split("");for(p in u)if(!o(p)){switch(l=l+u[p],d={up:0,down:0,mid:0},c.size){case"mini":d.up=s(8),d.mid=s(2),d.down=s(8);break;case"maxi":d.up=s(16)+3,d.mid=s(4)+1,d.down=s(64)+3;break;default:d.up=s(8)+1,d.mid=s(6)/2,d.down=s(8)+1;break}var f=["up","mid","down"];for(var h in f)for(var g=f[h],_=0;_<=d[g];_++)c[g]&&(l=l+n[g][s(n[g].length)])}return l}return a(e,r)}});var $5e=m((G_r,j5e)=>{j5e.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var U5e=m((H_r,K5e)=>{K5e.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var G5e=m((z_r,V5e)=>{V5e.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var z5e=m((W_r,H5e)=>{H5e.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var Z5e=m((Y_r,X5e)=>{var ir={};X5e.exports=ir;ir.themes={};var tCt=require("util"),my=ir.styles=D5e(),J5e=Object.defineProperties,rCt=new RegExp(/[\r\n]+/g);ir.supportsColor=N5e().supportsColor;typeof ir.enabled>"u"&&(ir.enabled=ir.supportsColor()!==!1);ir.enable=function(){ir.enabled=!0};ir.disable=function(){ir.enabled=!1};ir.stripColors=ir.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var J_r=ir.stylize=function(e,r){if(!ir.enabled)return e+"";var n=my[r];return!n&&r in ir?ir[r](e):n.open+e+n.close},nCt=/[|\\{}()[\]^$+*?.]/g,iCt=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(nCt,"\\$&")};function Y5e(t){var e=function r(){return oCt.apply(r,arguments)};return e._styles=t,e.__proto__=sCt,e}var Q5e=(function(){var t={};return my.grey=my.gray,Object.keys(my).forEach(function(e){my[e].closeRe=new RegExp(iCt(my[e].close),"g"),t[e]={get:function(){return Y5e(this._styles.concat(e))}}}),t})(),sCt=J5e(function(){},Q5e);function oCt(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:tCt.inspect(o)}).join(" ");if(!ir.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=my[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(rCt,function(o){return s.close+o+s.open}))}return e}ir.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){ir[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=ir[t[r][s]](i);return i}return ir[t[r]](n)}})(e)};function aCt(){var t={};return Object.keys(Q5e).forEach(function(e){t[e]={get:function(){return Y5e([e])}}}),t}var uCt=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};ir.trap=B5e();ir.zalgo=L5e();ir.maps={};ir.maps.america=$5e()(ir);ir.maps.zebra=U5e()(ir);ir.maps.rainbow=G5e()(ir);ir.maps.random=z5e()(ir);for(W5e in ir.maps)(function(t){ir[t]=function(e){return uCt(ir.maps[t],e)}})(W5e);var W5e;J5e(ir,aCt())});var EQ=m((Q_r,eCe)=>{var cCt=Z5e();eCe.exports=cCt});var tCe=m(bQ=>{"use strict";bQ.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};bQ.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var rCe=m(_Q=>{"use strict";_Q.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};_Q.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var nCe=m(vQ=>{"use strict";vQ.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};vQ.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var iCe=m(qI=>{"use strict";Object.defineProperty(qI,"cli",{value:tCe()});Object.defineProperty(qI,"npm",{value:rCe()});Object.defineProperty(qI,"syslog",{value:nCe()})});var ji=m(NS=>{"use strict";Object.defineProperty(NS,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(NS,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(NS,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(NS,"configs",{value:iCe()})});var $I=m((n4r,jI)=>{"use strict";var AQ=EQ(),{LEVEL:SQ,MESSAGE:wQ}=ji();AQ.enabled=!0;var sCe=/\s+/,LI=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=sCe.test(e[i])?e[i].split(sCe):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return AQ[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=AQ[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[wQ]=="string"&&(e[wQ]=this.colorize(e[SQ],e.level,e[wQ])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[SQ],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[SQ],e.level,e.message)),e}};jI.exports=t=>new LI(t);jI.exports.Colorizer=jI.exports.Format=LI});var aCe=m((i4r,oCe)=>{"use strict";var{Colorizer:lCt}=$I();oCe.exports=t=>(lCt.addColors(t.colors||t),t)});var cCe=m((s4r,uCe)=>{"use strict";var dCt=qa();uCe.exports=dCt(t=>(t.message=`	${t.message}`,t))});var pCe=m((o4r,dCe)=>{"use strict";var pCt=qa(),{LEVEL:lCe,MESSAGE:CQ}=ji();dCe.exports=pCt((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[lCe]:t[lCe]||t.level,message:t.message,[CQ]:t[CQ]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[CQ]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var OQ=m((a4r,UI)=>{"use strict";var{configs:fCt,LEVEL:fCe,MESSAGE:TQ}=ji(),KI=class t{constructor(e={levels:fCt.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[fCe]]}${e.message}`,e[TQ]&&(e[TQ]=`${this.paddings[e[fCe]]}${e[TQ]}`),e}};UI.exports=t=>new KI(t);UI.exports.Padder=UI.exports.Format=KI});var hCe=m((u4r,xQ)=>{"use strict";var{Colorizer:hCt}=$I(),{Padder:mCt}=OQ(),{configs:yCt,MESSAGE:gCt}=ji(),VI=class{constructor(e={}){e.levels||(e.levels=yCt.cli.levels),this.colorizer=new hCt(e),this.padder=new mCt(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[gCt]=`${e.level}:${e.message}`,e}};xQ.exports=t=>new VI(t);xQ.exports.Format=VI});var yCe=m((c4r,IQ)=>{"use strict";var ECt=qa();function mCe(t){if(t.every(bCt))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function bCt(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}IQ.exports=(...t)=>{let e=ECt(mCe(t)),r=e();return r.Format=e.Format,r};IQ.exports.cascade=mCe});var BS=m((MQ,bCe)=>{"use strict";var{hasOwnProperty:FS}=Object.prototype,gy=kQ();gy.configure=kQ;gy.stringify=gy;gy.default=gy;MQ.stringify=gy;MQ.configure=kQ;bCe.exports=gy;var _Ct=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Ah(t){return t.length<5e3&&!_Ct.test(t)?`"${t}"`:JSON.stringify(t)}function RQ(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var vCt=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function DQ(t){return vCt.call(t)!==void 0&&t.length!==0}function gCe(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function SCt(t){if(FS.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function wCt(t){let e;if(FS.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function ACt(t,e){let r;if(FS.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function ECe(t,e){let r;if(FS.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function yy(t){return t===1?"1 item":`${t} items`}function CCt(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function TCt(t){if(FS.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function kQ(t){t={...t};let e=TCt(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=SCt(t),n=ACt(t,"bigint"),i=wCt(t),s=typeof i=="function"?i:void 0,o=ECe(t,"maximumDepth"),a=ECe(t,"maximumBreadth");function u(f,h,g,_,S,w){let C=h[f];switch(typeof C=="object"&&C!==null&&typeof C.toJSON=="function"&&(C=C.toJSON(f)),C=_.call(h,f,C),typeof C){case"string":return Ah(C);case"object":{if(C===null)return"null";if(g.indexOf(C)!==-1)return r;let A="",O=",",x=w;if(Array.isArray(C)){if(C.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(C),S!==""&&(w+=S,A+=`
${w}`,O=`,
${w}`);let U=Math.min(C.length,a),k=0;for(;k<U-1;k++){let ie=u(String(k),C,g,_,S,w);A+=ie!==void 0?ie:"null",A+=O}let H=u(String(k),C,g,_,S,w);if(A+=H!==void 0?H:"null",C.length-1>a){let ie=C.length-a-1;A+=`${O}"... ${yy(ie)} not stringified"`}return S!==""&&(A+=`
${x}`),g.pop(),`[${A}]`}let R=Object.keys(C),M=R.length;if(M===0)return"{}";if(o<g.length+1)return'"[Object]"';let I="",F="";S!==""&&(w+=S,O=`,
${w}`,I=" ");let B=Math.min(M,a);i&&!DQ(C)&&(R=RQ(R,s)),g.push(C);for(let U=0;U<B;U++){let k=R[U],H=u(k,C,g,_,S,w);H!==void 0&&(A+=`${F}${Ah(k)}:${I}${H}`,F=O)}if(M>a){let U=M-a;A+=`${F}"...":${I}"${yy(U)} not stringified"`,F=O}return S!==""&&F.length>1&&(A=`
${w}${A}
${x}`),g.pop(),`{${A}}`}case"number":return isFinite(C)?String(C):e?e(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(C);default:return e?e(C):void 0}}function c(f,h,g,_,S,w){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Ah(h);case"object":{if(h===null)return"null";if(g.indexOf(h)!==-1)return r;let C=w,A="",O=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h),S!==""&&(w+=S,A+=`
${w}`,O=`,
${w}`);let M=Math.min(h.length,a),I=0;for(;I<M-1;I++){let B=c(String(I),h[I],g,_,S,w);A+=B!==void 0?B:"null",A+=O}let F=c(String(I),h[I],g,_,S,w);if(A+=F!==void 0?F:"null",h.length-1>a){let B=h.length-a-1;A+=`${O}"... ${yy(B)} not stringified"`}return S!==""&&(A+=`
${C}`),g.pop(),`[${A}]`}g.push(h);let x="";S!==""&&(w+=S,O=`,
${w}`,x=" ");let R="";for(let M of _){let I=c(M,h[M],g,_,S,w);I!==void 0&&(A+=`${R}${Ah(M)}:${x}${I}`,R=O)}return S!==""&&R.length>1&&(A=`
${w}${A}
${C}`),g.pop(),`{${A}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function l(f,h,g,_,S){switch(typeof h){case"string":return Ah(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return l(f,h,g,_,S);if(h===null)return"null"}if(g.indexOf(h)!==-1)return r;let w=S;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h),S+=_;let I=`
${S}`,F=`,
${S}`,B=Math.min(h.length,a),U=0;for(;U<B-1;U++){let H=l(String(U),h[U],g,_,S);I+=H!==void 0?H:"null",I+=F}let k=l(String(U),h[U],g,_,S);if(I+=k!==void 0?k:"null",h.length-1>a){let H=h.length-a-1;I+=`${F}"... ${yy(H)} not stringified"`}return I+=`
${w}`,g.pop(),`[${I}]`}let C=Object.keys(h),A=C.length;if(A===0)return"{}";if(o<g.length+1)return'"[Object]"';S+=_;let O=`,
${S}`,x="",R="",M=Math.min(A,a);DQ(h)&&(x+=gCe(h,O,a),C=C.slice(h.length),M-=h.length,R=O),i&&(C=RQ(C,s)),g.push(h);for(let I=0;I<M;I++){let F=C[I],B=l(F,h[F],g,_,S);B!==void 0&&(x+=`${R}${Ah(F)}: ${B}`,R=O)}if(A>a){let I=A-a;x+=`${R}"...": "${yy(I)} not stringified"`,R=O}return R!==""&&(x=`
${S}${x}
${w}`),g.pop(),`{${x}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,g){switch(typeof h){case"string":return Ah(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,g);if(h===null)return"null"}if(g.indexOf(h)!==-1)return r;let _="",S=h.length!==void 0;if(S&&Array.isArray(h)){if(h.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(h);let x=Math.min(h.length,a),R=0;for(;R<x-1;R++){let I=d(String(R),h[R],g);_+=I!==void 0?I:"null",_+=","}let M=d(String(R),h[R],g);if(_+=M!==void 0?M:"null",h.length-1>a){let I=h.length-a-1;_+=`,"... ${yy(I)} not stringified"`}return g.pop(),`[${_}]`}let w=Object.keys(h),C=w.length;if(C===0)return"{}";if(o<g.length+1)return'"[Object]"';let A="",O=Math.min(C,a);S&&DQ(h)&&(_+=gCe(h,",",a),w=w.slice(h.length),O-=h.length,A=","),i&&(w=RQ(w,s)),g.push(h);for(let x=0;x<O;x++){let R=w[x],M=d(R,h[R],g);M!==void 0&&(_+=`${A}${Ah(R)}:${M}`,A=",")}if(C>a){let x=C-a;_+=`${A}"...":"${yy(x)} not stringified"`}return g.pop(),`{${_}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function p(f,h,g){if(arguments.length>1){let _="";if(typeof g=="number"?_=" ".repeat(Math.min(g,10)):typeof g=="string"&&(_=g.slice(0,10)),h!=null){if(typeof h=="function")return u("",{"":f},[],h,_,"");if(Array.isArray(h))return c("",f,[],CCt(h),_,"")}if(_.length!==0)return l("",f,[],_,"")}return d("",f,[])}return p}});var PQ=m((l4r,_Ce)=>{"use strict";var OCt=qa(),{MESSAGE:xCt}=ji(),ICt=BS();function RCt(t,e){return typeof e=="bigint"?e.toString():e}_Ce.exports=OCt((t,e)=>{let r=ICt.configure(e);return t[xCt]=r(t,e.replacer||RCt,e.space),t})});var SCe=m((d4r,vCe)=>{"use strict";var DCt=qa();vCe.exports=DCt((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var ACe=m((p4r,wCe)=>{"use strict";var kCt=qa(),{MESSAGE:MCt}=ji(),PCt=BS();wCe.exports=kCt(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[MCt]=PCt(e),t})});var TCe=m((f4r,CCe)=>{"use strict";var NCt=qa();function FCt(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function BCt(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}CCe.exports=NCt((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?FCt(t,n,r):e.fillWith?BCt(t,e.fillWith,r):t})});var xCe=m((h4r,OCe)=>{var zE=1e3,WE=zE*60,JE=WE*60,Ey=JE*24,qCt=Ey*7,LCt=Ey*365.25;OCe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return jCt(t);if(r==="number"&&isFinite(t))return e.long?KCt(t):$Ct(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function jCt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*LCt;case"weeks":case"week":case"w":return r*qCt;case"days":case"day":case"d":return r*Ey;case"hours":case"hour":case"hrs":case"hr":case"h":return r*JE;case"minutes":case"minute":case"mins":case"min":case"m":return r*WE;case"seconds":case"second":case"secs":case"sec":case"s":return r*zE;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $Ct(t){var e=Math.abs(t);return e>=Ey?Math.round(t/Ey)+"d":e>=JE?Math.round(t/JE)+"h":e>=WE?Math.round(t/WE)+"m":e>=zE?Math.round(t/zE)+"s":t+"ms"}function KCt(t){var e=Math.abs(t);return e>=Ey?GI(t,e,Ey,"day"):e>=JE?GI(t,e,JE,"hour"):e>=WE?GI(t,e,WE,"minute"):e>=zE?GI(t,e,zE,"second"):t+" ms"}function GI(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var RCe=m((qS,ICe)=>{"use strict";var UCt=qa(),VCt=xCe();ICe.exports=UCt(t=>{let e=+new Date;return qS.diff=e-(qS.prevTime||e),qS.prevTime=e,t.ms=`+${VCt(qS.diff)}`,t})});var MCe=m((m4r,kCe)=>{"use strict";var GCt=require("util").inspect,HCt=qa(),{LEVEL:zCt,MESSAGE:DCe,SPLAT:WCt}=ji();kCe.exports=HCt((t,e={})=>{let r=Object.assign({},t);return delete r[zCt],delete r[DCe],delete r[WCt],t[DCe]=GCt(r,!1,e.depth||null,e.colorize),t})});var PCe=m((y4r,zI)=>{"use strict";var{MESSAGE:JCt}=ji(),HI=class{constructor(e){this.template=e}transform(e){return e[JCt]=this.template(e),e}};zI.exports=t=>new HI(t);zI.exports.Printf=zI.exports.Format=HI});var BCe=m((g4r,FCe)=>{"use strict";var YCt=qa(),{MESSAGE:NCe}=ji(),QCt=BS();FCe.exports=YCt(t=>{let e=QCt(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[NCe]=`${t.level}:${r} ${t.message} ${e}`:t[NCe]=`${t.level}:${r} ${t.message}`,t})});var jCe=m((E4r,LCe)=>{"use strict";var XCt=require("util"),{SPLAT:qCe}=ji(),ZCt=/%[scdjifoO%]/g,e7t=/%%/g,NQ=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[qCe]||e.splat||[],s=n.match(e7t),o=s&&s.length||0,u=r.length-o-i.length,c=u<0?i.splice(u,-1*u):[],l=c.length;if(l)for(let d=0;d<l;d++)Object.assign(e,c[d]);return e.message=XCt.format(n,...i),e}transform(e){let r=e.message,n=e[qCe]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(ZCt);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};LCe.exports=t=>new NQ(t)});var KCe=m((WI,$Ce)=>{(function(t,e){typeof WI=="object"&&typeof $Ce<"u"?e(WI):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(WI,(function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function u(j,V){for(var Ee=[],Re=0,fe=j.length;Re<fe;Re++)Ee.push(j[Re].substr(0,V));return Ee}var c=function(j){return function(V,Ee){var Re=Ee[j].map(function(Ge){return Ge.toLowerCase()}),fe=Re.indexOf(V.toLowerCase());return fe>-1?fe:null}};function l(j){for(var V=[],Ee=1;Ee<arguments.length;Ee++)V[Ee-1]=arguments[Ee];for(var Re=0,fe=V;Re<fe.length;Re++){var Ge=fe[Re];for(var Me in Ge)j[Me]=Ge[Me]}return j}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],f=u(p,3),h=u(d,3),g={dayNamesShort:h,dayNames:d,monthNamesShort:f,monthNames:p,amPm:["am","pm"],DoFn:function(j){return j+["th","st","nd","rd"][j%10>3?0:(j-j%10!==10?1:0)*j%10]}},_=l({},g),S=function(j){return _=l(_,j)},w=function(j){return j.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},C=function(j,V){for(V===void 0&&(V=2),j=String(j);j.length<V;)j="0"+j;return j},A={D:function(j){return String(j.getDate())},DD:function(j){return C(j.getDate())},Do:function(j,V){return V.DoFn(j.getDate())},d:function(j){return String(j.getDay())},dd:function(j){return C(j.getDay())},ddd:function(j,V){return V.dayNamesShort[j.getDay()]},dddd:function(j,V){return V.dayNames[j.getDay()]},M:function(j){return String(j.getMonth()+1)},MM:function(j){return C(j.getMonth()+1)},MMM:function(j,V){return V.monthNamesShort[j.getMonth()]},MMMM:function(j,V){return V.monthNames[j.getMonth()]},YY:function(j){return C(String(j.getFullYear()),4).substr(2)},YYYY:function(j){return C(j.getFullYear(),4)},h:function(j){return String(j.getHours()%12||12)},hh:function(j){return C(j.getHours()%12||12)},H:function(j){return String(j.getHours())},HH:function(j){return C(j.getHours())},m:function(j){return String(j.getMinutes())},mm:function(j){return C(j.getMinutes())},s:function(j){return String(j.getSeconds())},ss:function(j){return C(j.getSeconds())},S:function(j){return String(Math.round(j.getMilliseconds()/100))},SS:function(j){return C(Math.round(j.getMilliseconds()/10),2)},SSS:function(j){return C(j.getMilliseconds(),3)},a:function(j,V){return j.getHours()<12?V.amPm[0]:V.amPm[1]},A:function(j,V){return j.getHours()<12?V.amPm[0].toUpperCase():V.amPm[1].toUpperCase()},ZZ:function(j){var V=j.getTimezoneOffset();return(V>0?"-":"+")+C(Math.floor(Math.abs(V)/60)*100+Math.abs(V)%60,4)},Z:function(j){var V=j.getTimezoneOffset();return(V>0?"-":"+")+C(Math.floor(Math.abs(V)/60),2)+":"+C(Math.abs(V)%60,2)}},O=function(j){return+j-1},x=[null,r],R=[null,o],M=["isPm",o,function(j,V){var Ee=j.toLowerCase();return Ee===V.amPm[0]?0:Ee===V.amPm[1]?1:null}],I=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(j){var V=(j+"").match(/([+-]|\d\d)/gi);if(V){var Ee=+V[1]*60+parseInt(V[2],10);return V[0]==="+"?Ee:-Ee}return 0}],F={D:["day",r],DD:["day",n],Do:["day",r+o,function(j){return parseInt(j,10)}],M:["month",r,O],MM:["month",n,O],YY:["year",n,function(j){var V=new Date,Ee=+(""+V.getFullYear()).substr(0,2);return+(""+(+j>68?Ee-1:Ee)+j)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(j){return+j*100}],SS:["millisecond",n,function(j){return+j*10}],SSS:["millisecond",i],d:x,dd:x,ddd:R,dddd:R,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:M,A:M,ZZ:I,Z:I},B={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},U=function(j){return l(B,j)},k=function(j,V,Ee){if(V===void 0&&(V=B.default),Ee===void 0&&(Ee={}),typeof j=="number"&&(j=new Date(j)),Object.prototype.toString.call(j)!=="[object Date]"||isNaN(j.getTime()))throw new Error("Invalid Date pass to format");V=B[V]||V;var Re=[];V=V.replace(a,function(Ge,Me){return Re.push(Me),"@@@"});var fe=l(l({},_),Ee);return V=V.replace(e,function(Ge){return A[Ge](j,fe)}),V.replace(/@@@/g,function(){return Re.shift()})};function H(j,V,Ee){if(Ee===void 0&&(Ee={}),typeof V!="string")throw new Error("Invalid format in fecha parse");if(V=B[V]||V,j.length>1e3)return null;var Re=new Date,fe={year:Re.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Ge=[],Me=[],Ce=V.replace(a,function(z,X){return Me.push(w(X)),"@@@"}),Rr={},_t={};Ce=w(Ce).replace(e,function(z){var X=F[z],ue=X[0],se=X[1],Se=X[3];if(Rr[ue])throw new Error("Invalid format. "+ue+" specified twice in format");return Rr[ue]=!0,Se&&(_t[Se]=!0),Ge.push(X),"("+se+")"}),Object.keys(_t).forEach(function(z){if(!Rr[z])throw new Error("Invalid format. "+z+" is required in specified format")}),Ce=Ce.replace(/@@@/g,function(){return Me.shift()});var ca=j.match(new RegExp(Ce,"i"));if(!ca)return null;for(var Ei=l(l({},_),Ee),tr=1;tr<ca.length;tr++){var P=Ge[tr-1],$=P[0],G=P[2],ne=G?G(ca[tr],Ei):+ca[tr];if(ne==null)return null;fe[$]=ne}fe.isPm===1&&fe.hour!=null&&+fe.hour!=12?fe.hour=+fe.hour+12:fe.isPm===0&&+fe.hour==12&&(fe.hour=0);var Y;if(fe.timezoneOffset==null){Y=new Date(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.millisecond);for(var te=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],tr=0,de=te.length;tr<de;tr++)if(Rr[te[tr][0]]&&fe[te[tr][0]]!==Y[te[tr][1]]())return null}else if(Y=new Date(Date.UTC(fe.year,fe.month,fe.day,fe.hour,fe.minute-fe.timezoneOffset,fe.second,fe.millisecond)),fe.month>11||fe.month<0||fe.day>31||fe.day<1||fe.hour>23||fe.hour<0||fe.minute>59||fe.minute<0||fe.second>59||fe.second<0)return null;return Y}var ie={format:k,parse:H,defaultI18n:g,setGlobalDateI18n:S,setGlobalDateMasks:U};t.assign=l,t.default=ie,t.format=k,t.parse=H,t.defaultI18n=g,t.setGlobalDateI18n=S,t.setGlobalDateMasks=U,Object.defineProperty(t,"__esModule",{value:!0})}))});var VCe=m((b4r,UCe)=>{"use strict";var t7t=KCe(),r7t=qa();UCe.exports=r7t((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():t7t.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var HCe=m((_4r,GCe)=>{"use strict";var FQ=EQ(),n7t=qa(),{MESSAGE:BQ}=ji();GCe.exports=n7t((t,e)=>(e.level!==!1&&(t.level=FQ.strip(t.level)),e.message!==!1&&(t.message=FQ.strip(String(t.message))),e.raw!==!1&&t[BQ]&&(t[BQ]=FQ.strip(String(t[BQ]))),t))});var LQ=m(qQ=>{"use strict";var i7t=qQ.format=qa();qQ.levels=aCe();function Js(t,e){Object.defineProperty(i7t,t,{get(){return e()},configurable:!0})}Js("align",function(){return cCe()});Js("errors",function(){return pCe()});Js("cli",function(){return hCe()});Js("combine",function(){return yCe()});Js("colorize",function(){return $I()});Js("json",function(){return PQ()});Js("label",function(){return SCe()});Js("logstash",function(){return ACe()});Js("metadata",function(){return TCe()});Js("ms",function(){return RCe()});Js("padLevels",function(){return OQ()});Js("prettyPrint",function(){return MCe()});Js("printf",function(){return PCe()});Js("simple",function(){return BCe()});Js("splat",function(){return jCe()});Js("timestamp",function(){return VCe()});Js("uncolorize",function(){return HCe()})});var jQ=m(JI=>{"use strict";var{format:zCe}=require("util");JI.warn={deprecated(t){return()=>{throw new Error(zCe("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([zCe("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=JI.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=JI.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var WCe=m((w4r,s7t)=>{s7t.exports={name:"winston",description:"A logger for just about everything.",version:"3.18.3",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.8","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var YCe=m((A4r,JCe)=>{JCe.exports=require("util").deprecate});var $Q=m((C4r,QCe)=>{QCe.exports=require("stream")});var UQ=m((T4r,ZCe)=>{"use strict";function o7t(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(KQ,this,t)):process.nextTick(KQ,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(YI,r):(r._writableState.errorEmitted=!0,process.nextTick(XCe,r,s)):process.nextTick(XCe,r,s):e?(process.nextTick(YI,r),e(s)):process.nextTick(YI,r)}),this)}function XCe(t,e){KQ(t,e),YI(t)}function YI(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function a7t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function KQ(t,e){t.emit("error",e)}function u7t(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}ZCe.exports={destroy:o7t,undestroy:a7t,errorOrDestroy:u7t}});var Ch=m((O4r,r7e)=>{"use strict";var t7e={};function Ec(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=r.name,i.prototype.code=t,t7e[t]=i}function e7e(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function c7t(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function l7t(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function d7t(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Ec("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Ec("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&c7t(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(l7t(t," argument"))i=`The ${t} ${n} ${e7e(e,"type")}`;else{let s=d7t(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${e7e(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Ec("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ec("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Ec("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ec("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Ec("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ec("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ec("ERR_STREAM_WRITE_AFTER_END","write after end");Ec("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ec("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Ec("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");r7e.exports.codes=t7e});var VQ=m((x4r,n7e)=>{"use strict";var p7t=Ch().codes.ERR_INVALID_OPT_VALUE;function f7t(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function h7t(t,e,r,n){var i=f7t(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new p7t(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}n7e.exports={getHighWaterMark:h7t}});var i7e=m((I4r,GQ)=>{typeof Object.create=="function"?GQ.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:GQ.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var by=m((R4r,zQ)=>{try{if(HQ=require("util"),typeof HQ.inherits!="function")throw"";zQ.exports=HQ.inherits}catch{zQ.exports=i7e()}var HQ});var l7e=m((D4r,c7e)=>{"use strict";function s7e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function o7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s7e(Object(r),!0).forEach(function(n){m7t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s7e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m7t(t,e,r){return e=u7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y7t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a7e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u7e(n.key),n)}}function g7t(t,e,r){return e&&a7e(t.prototype,e),r&&a7e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u7e(t){var e=E7t(t,"string");return typeof e=="symbol"?e:String(e)}function E7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b7t=require("buffer"),QI=b7t.Buffer,_7t=require("util"),WQ=_7t.inspect,v7t=WQ&&WQ.custom||"inspect";function S7t(t,e,r){QI.prototype.copy.call(t,e,r)}c7e.exports=(function(){function t(){y7t(this,t),this.head=null,this.tail=null,this.length=0}return g7t(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return QI.alloc(0);for(var n=QI.allocUnsafe(r>>>0),i=this.head,s=0;i;)S7t(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=QI.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:v7t,value:function(r,n){return WQ(this,o7e(o7e({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var Bl=m((JQ,p7e)=>{var XI=require("buffer"),Pd=XI.Buffer;function d7e(t,e){for(var r in t)e[r]=t[r]}Pd.from&&Pd.alloc&&Pd.allocUnsafe&&Pd.allocUnsafeSlow?p7e.exports=XI:(d7e(XI,JQ),JQ.Buffer=_y);function _y(t,e,r){return Pd(t,e,r)}_y.prototype=Object.create(Pd.prototype);d7e(Pd,_y);_y.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Pd(t,e,r)};_y.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Pd(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};_y.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Pd(t)};_y.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return XI.SlowBuffer(t)}});var XQ=m(h7e=>{"use strict";var QQ=Bl().Buffer,f7e=QQ.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function w7t(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function A7t(t){var e=w7t(t);if(typeof e!="string"&&(QQ.isEncoding===f7e||!f7e(t)))throw new Error("Unknown encoding: "+t);return e||t}h7e.StringDecoder=LS;function LS(t){this.encoding=A7t(t);var e;switch(this.encoding){case"utf16le":this.text=R7t,this.end=D7t,e=4;break;case"utf8":this.fillLast=O7t,e=4;break;case"base64":this.text=k7t,this.end=M7t,e=3;break;default:this.write=P7t,this.end=N7t;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=QQ.allocUnsafe(e)}LS.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};LS.prototype.end=I7t;LS.prototype.text=x7t;LS.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function YQ(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function C7t(t,e,r){var n=e.length-1;if(n<r)return 0;var i=YQ(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=YQ(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=YQ(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function T7t(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function O7t(t){var e=this.lastTotal-this.lastNeed,r=T7t(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function x7t(t,e){var r=C7t(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function I7t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function R7t(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function D7t(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function k7t(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function M7t(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function P7t(t){return t.toString(this.encoding)}function N7t(t){return t&&t.length?this.write(t):""}});var ZI=m((M4r,g7e)=>{"use strict";var m7e=Ch().codes.ERR_STREAM_PREMATURE_CLOSE;function F7t(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function B7t(){}function q7t(t){return t.setHeader&&typeof t.abort=="function"}function y7e(t,e,r){if(typeof e=="function")return y7e(t,null,e);e||(e={}),r=F7t(r||B7t);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},d=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new m7e),r.call(t,h);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(h=new m7e),r.call(t,h)},p=function(){t.req.on("finish",a)};return q7t(t)?(t.on("complete",a),t.on("abort",d),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",d)}}g7e.exports=y7e});var b7e=m((P4r,E7e)=>{"use strict";var eR;function Th(t,e,r){return e=L7t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L7t(t){var e=j7t(t,"string");return typeof e=="symbol"?e:String(e)}function j7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $7t=ZI(),Oh=Symbol("lastResolve"),vy=Symbol("lastReject"),jS=Symbol("error"),tR=Symbol("ended"),Sy=Symbol("lastPromise"),ZQ=Symbol("handlePromise"),wy=Symbol("stream");function xh(t,e){return{value:t,done:e}}function K7t(t){var e=t[Oh];if(e!==null){var r=t[wy].read();r!==null&&(t[Sy]=null,t[Oh]=null,t[vy]=null,e(xh(r,!1)))}}function U7t(t){process.nextTick(K7t,t)}function V7t(t,e){return function(r,n){t.then(function(){if(e[tR]){r(xh(void 0,!0));return}e[ZQ](r,n)},n)}}var G7t=Object.getPrototypeOf(function(){}),H7t=Object.setPrototypeOf((eR={get stream(){return this[wy]},next:function(){var e=this,r=this[jS];if(r!==null)return Promise.reject(r);if(this[tR])return Promise.resolve(xh(void 0,!0));if(this[wy].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[jS]?a(e[jS]):o(xh(void 0,!0))})});var n=this[Sy],i;if(n)i=new Promise(V7t(n,this));else{var s=this[wy].read();if(s!==null)return Promise.resolve(xh(s,!1));i=new Promise(this[ZQ])}return this[Sy]=i,i}},Th(eR,Symbol.asyncIterator,function(){return this}),Th(eR,"return",function(){var e=this;return new Promise(function(r,n){e[wy].destroy(null,function(i){if(i){n(i);return}r(xh(void 0,!0))})})}),eR),G7t),z7t=function(e){var r,n=Object.create(H7t,(r={},Th(r,wy,{value:e,writable:!0}),Th(r,Oh,{value:null,writable:!0}),Th(r,vy,{value:null,writable:!0}),Th(r,jS,{value:null,writable:!0}),Th(r,tR,{value:e._readableState.endEmitted,writable:!0}),Th(r,ZQ,{value:function(s,o){var a=n[wy].read();a?(n[Sy]=null,n[Oh]=null,n[vy]=null,s(xh(a,!1))):(n[Oh]=s,n[vy]=o)},writable:!0}),r));return n[Sy]=null,$7t(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[vy];s!==null&&(n[Sy]=null,n[Oh]=null,n[vy]=null,s(i)),n[jS]=i;return}var o=n[Oh];o!==null&&(n[Sy]=null,n[Oh]=null,n[vy]=null,o(xh(void 0,!0))),n[tR]=!0}),e.on("readable",U7t.bind(null,n)),n};E7e.exports=z7t});var w7e=m((N4r,S7e)=>{"use strict";function _7e(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function W7t(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){_7e(s,n,i,o,a,"next",u)}function a(u){_7e(s,n,i,o,a,"throw",u)}o(void 0)})}}function v7e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function J7t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v7e(Object(r),!0).forEach(function(n){Y7t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v7e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y7t(t,e,r){return e=Q7t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q7t(t){var e=X7t(t,"string");return typeof e=="symbol"?e:String(e)}function X7t(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z7t=Ch().codes.ERR_INVALID_ARG_TYPE;function eTt(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Z7t("iterable",["Iterable"],e);var i=new t(J7t({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=W7t(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(d){i.destroy(d)}}),a.apply(this,arguments)}return i}S7e.exports=eTt});var cX=m((B4r,M7e)=>{"use strict";M7e.exports=Ir;var YE;Ir.ReadableState=O7e;var F4r=require("events").EventEmitter,T7e=function(e,r){return e.listeners(r).length},KS=$Q(),rR=require("buffer").Buffer,tTt=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function rTt(t){return rR.from(t)}function nTt(t){return rR.isBuffer(t)||t instanceof tTt}var eX=require("util"),er;eX&&eX.debuglog?er=eX.debuglog("stream"):er=function(){};var iTt=l7e(),aX=UQ(),sTt=VQ(),oTt=sTt.getHighWaterMark,nR=Ch().codes,aTt=nR.ERR_INVALID_ARG_TYPE,uTt=nR.ERR_STREAM_PUSH_AFTER_EOF,cTt=nR.ERR_METHOD_NOT_IMPLEMENTED,lTt=nR.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,QE,tX,rX;by()(Ir,KS);var $S=aX.errorOrDestroy,nX=["error","close","destroy","pause","resume"];function dTt(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function O7e(t,e,r){YE=YE||Ay(),t=t||{},typeof r!="boolean"&&(r=e instanceof YE),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=oTt(this,t,"readableHighWaterMark",r),this.buffer=new iTt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(QE||(QE=XQ().StringDecoder),this.decoder=new QE(t.encoding),this.encoding=t.encoding)}function Ir(t){if(YE=YE||Ay(),!(this instanceof Ir))return new Ir(t);var e=this instanceof YE;this._readableState=new O7e(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),KS.call(this)}Object.defineProperty(Ir.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ir.prototype.destroy=aX.destroy;Ir.prototype._undestroy=aX.undestroy;Ir.prototype._destroy=function(t,e){e(t)};Ir.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=rR.from(t,e),e=""),n=!0),x7e(this,t,e,!1,n)};Ir.prototype.unshift=function(t){return x7e(this,t,null,!0,!1)};function x7e(t,e,r,n,i){er("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,hTt(t,s);else{var o;if(i||(o=pTt(s,e)),o)$S(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==rR.prototype&&(e=rTt(e)),n)s.endEmitted?$S(t,new lTt):iX(t,s,e,!0);else if(s.ended)$S(t,new uTt);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?iX(t,s,e,!1):oX(t,s)):iX(t,s,e,!1)}else n||(s.reading=!1,oX(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function iX(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&iR(t)),oX(t,e)}function pTt(t,e){var r;return!nTt(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new aTt("chunk",["string","Buffer","Uint8Array"],e)),r}Ir.prototype.isPaused=function(){return this._readableState.flowing===!1};Ir.prototype.setEncoding=function(t){QE||(QE=XQ().StringDecoder);var e=new QE(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var A7e=1073741824;function fTt(t){return t>=A7e?t=A7e:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function C7e(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=fTt(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ir.prototype.read=function(t){er("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return er("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?sX(this):iR(this),null;if(t=C7e(t,e),t===0&&e.ended)return e.length===0&&sX(this),null;var n=e.needReadable;er("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,er("length less than watermark",n)),e.ended||e.reading?(n=!1,er("reading or ended",n)):n&&(er("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C7e(r,e)));var i;return t>0?i=D7e(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&sX(this)),i!==null&&this.emit("data",i),i};function hTt(t,e){if(er("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?iR(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,I7e(t)))}}function iR(t){var e=t._readableState;er("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(er("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(I7e,t))}function I7e(t){var e=t._readableState;er("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,uX(t)}function oX(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(mTt,t,e))}function mTt(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(er("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ir.prototype._read=function(t){$S(this,new cTt("_read()"))};Ir.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,er("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:g;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,S){er("onunpipe"),_===r&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,l())}function a(){er("onend"),t.end()}var u=yTt(r);t.on("drain",u);var c=!1;function l(){er("cleanup"),t.removeListener("close",f),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",d),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",d);function d(_){er("ondata");var S=t.write(_);er("dest.write",S),S===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&k7e(n.pipes,t)!==-1)&&!c&&(er("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(_){er("onerror",_),g(),t.removeListener("error",p),T7e(t,"error")===0&&$S(t,_)}dTt(t,"error",p);function f(){t.removeListener("finish",h),g()}t.once("close",f);function h(){er("onfinish"),t.removeListener("close",f),g()}t.once("finish",h);function g(){er("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(er("pipe resume"),r.resume()),t};function yTt(t){return function(){var r=t._readableState;er("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&T7e(t,"data")&&(r.flowing=!0,uX(t))}}Ir.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=k7e(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ir.prototype.on=function(t,e){var r=KS.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,er("on readable",n.length,n.reading),n.length?iR(this):n.reading||process.nextTick(gTt,this)),r};Ir.prototype.addListener=Ir.prototype.on;Ir.prototype.removeListener=function(t,e){var r=KS.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(R7e,this),r};Ir.prototype.removeAllListeners=function(t){var e=KS.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(R7e,this),e};function R7e(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function gTt(t){er("readable nexttick read 0"),t.read(0)}Ir.prototype.resume=function(){var t=this._readableState;return t.flowing||(er("resume"),t.flowing=!t.readableListening,ETt(this,t)),t.paused=!1,this};function ETt(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(bTt,t,e))}function bTt(t,e){er("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),uX(t),e.flowing&&!e.reading&&t.read(0)}Ir.prototype.pause=function(){return er("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(er("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function uX(t){var e=t._readableState;for(er("flow",e.flowing);e.flowing&&t.read()!==null;);}Ir.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(er("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(er("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var s=0;s<nX.length;s++)t.on(nX[s],this.emit.bind(this,nX[s]));return this._read=function(o){er("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Ir.prototype[Symbol.asyncIterator]=function(){return tX===void 0&&(tX=b7e()),tX(this)});Object.defineProperty(Ir.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ir.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ir.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ir._fromList=D7e;Object.defineProperty(Ir.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function D7e(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function sX(t){var e=t._readableState;er("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(_Tt,e,t))}function _Tt(t,e){if(er("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ir.from=function(t,e){return rX===void 0&&(rX=w7e()),rX(Ir,t,e)});function k7e(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Ay=m((q4r,N7e)=>{"use strict";var vTt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};N7e.exports=Nd;var P7e=cX(),dX=aR();by()(Nd,P7e);for(lX=vTt(dX.prototype),sR=0;sR<lX.length;sR++)oR=lX[sR],Nd.prototype[oR]||(Nd.prototype[oR]=dX.prototype[oR]);var lX,oR,sR;function Nd(t){if(!(this instanceof Nd))return new Nd(t);P7e.call(this,t),dX.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",STt)))}Object.defineProperty(Nd.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Nd.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Nd.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function STt(){this._writableState.ended||process.nextTick(wTt,this)}function wTt(t){t.end()}Object.defineProperty(Nd.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var aR=m((L4r,$7e)=>{"use strict";$7e.exports=pi;function B7e(t){var e=this;this.next=null,this.entry=null,this.finish=function(){YTt(e,t)}}var XE;pi.WritableState=VS;var ATt={deprecate:YCe()},q7e=$Q(),cR=require("buffer").Buffer,CTt=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function TTt(t){return cR.from(t)}function OTt(t){return cR.isBuffer(t)||t instanceof CTt}var fX=UQ(),xTt=VQ(),ITt=xTt.getHighWaterMark,Ih=Ch().codes,RTt=Ih.ERR_INVALID_ARG_TYPE,DTt=Ih.ERR_METHOD_NOT_IMPLEMENTED,kTt=Ih.ERR_MULTIPLE_CALLBACK,MTt=Ih.ERR_STREAM_CANNOT_PIPE,PTt=Ih.ERR_STREAM_DESTROYED,NTt=Ih.ERR_STREAM_NULL_VALUES,FTt=Ih.ERR_STREAM_WRITE_AFTER_END,BTt=Ih.ERR_UNKNOWN_ENCODING,ZE=fX.errorOrDestroy;by()(pi,q7e);function qTt(){}function VS(t,e,r){XE=XE||Ay(),t=t||{},typeof r!="boolean"&&(r=e instanceof XE),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=ITt(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){GTt(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new B7e(this)}VS.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(VS.prototype,"buffer",{get:ATt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var uR;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(uR=Function.prototype[Symbol.hasInstance],Object.defineProperty(pi,Symbol.hasInstance,{value:function(e){return uR.call(this,e)?!0:this!==pi?!1:e&&e._writableState instanceof VS}})):uR=function(e){return e instanceof this};function pi(t){XE=XE||Ay();var e=this instanceof XE;if(!e&&!uR.call(pi,this))return new pi(t);this._writableState=new VS(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),q7e.call(this)}pi.prototype.pipe=function(){ZE(this,new MTt)};function LTt(t,e){var r=new FTt;ZE(t,r),process.nextTick(e,r)}function jTt(t,e,r,n){var i;return r===null?i=new NTt:typeof r!="string"&&!e.objectMode&&(i=new RTt("chunk",["string","Buffer"],r)),i?(ZE(t,i),process.nextTick(n,i),!1):!0}pi.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&OTt(t);return s&&!cR.isBuffer(t)&&(t=TTt(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=qTt),n.ending?LTt(this,r):(s||jTt(this,n,t,r))&&(n.pendingcb++,i=KTt(this,n,s,t,e,r)),i};pi.prototype.cork=function(){this._writableState.corked++};pi.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&L7e(this,t))};pi.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new BTt(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(pi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $Tt(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=cR.from(e,r)),e}Object.defineProperty(pi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function KTt(t,e,r,n,i,s){if(!r){var o=$Tt(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else pX(t,e,!1,a,n,i,s);return u}function pX(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new PTt("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function UTt(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(US,t,e),t._writableState.errorEmitted=!0,ZE(t,n)):(i(n),t._writableState.errorEmitted=!0,ZE(t,n),US(t,e))}function VTt(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function GTt(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new kTt;if(VTt(r),e)UTt(t,r,n,e,i);else{var s=j7e(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&L7e(t,r),n?process.nextTick(F7e,t,r,s,i):F7e(t,r,s,i)}}function F7e(t,e,r,n){r||HTt(t,e),e.pendingcb--,n(),US(t,e)}function HTt(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function L7e(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,pX(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new B7e(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,d=e.objectMode?1:u.length;if(pX(t,e,!1,d,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}pi.prototype._write=function(t,e,r){r(new DTt("_write()"))};pi.prototype._writev=null;pi.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||JTt(this,n,r),this};Object.defineProperty(pi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j7e(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function zTt(t,e){t._final(function(r){e.pendingcb--,r&&ZE(t,r),e.prefinished=!0,t.emit("prefinish"),US(t,e)})}function WTt(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(zTt,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function US(t,e){var r=j7e(e);if(r&&(WTt(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function JTt(t,e,r){e.ending=!0,US(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function YTt(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(pi.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});pi.prototype.destroy=fX.destroy;pi.prototype._undestroy=fX.undestroy;pi.prototype._destroy=function(t,e){e(t)}});var hX=m((j4r,V7e)=>{"use strict";var QTt=require("util"),K7e=aR(),{LEVEL:U7e}=ji(),GS=V7e.exports=function(e={}){K7e.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};QTt.inherits(GS,K7e);GS.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[U7e]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};GS.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};GS.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[U7e]])&&(this.handleExceptions||r.exception!==!0))};GS.prototype._nop=function(){}});var yX=m(($4r,H7e)=>{"use strict";var XTt=require("util"),{LEVEL:mX}=ji(),G7e=hX(),HS=H7e.exports=function(e={}){if(G7e.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};XTt.inherits(HS,G7e);HS.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[mX]])&&this.transport.log(e[mX],e.message,e,this._nop),n(null)};HS.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[mX],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};HS.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};HS.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Cy=m((K4r,gX)=>{"use strict";gX.exports=hX();gX.exports.LegacyTransportStream=yX()});var J7e=m((V4r,W7e)=>{"use strict";var ZTt=require("os"),{LEVEL:z7e,MESSAGE:eb}=ji(),eOt=Cy();W7e.exports=class extends eOt{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:ZTt.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[z7e]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[eb]}${this.eol}`):this._consoleError(e[eb]),r&&r();return}else if(this.consoleWarnLevels[e[z7e]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[eb]}${this.eol}`):this._consoleWarn(e[eb]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[eb]}${this.eol}`):this._consoleLog(e[eb]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var dR=m((lR,Y7e)=>{"use strict";Object.defineProperty(lR,"__esModule",{value:!0});lR.default=tOt;function tOt(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}Y7e.exports=lR.default});var X7e=m((pR,Q7e)=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0});pR.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};Q7e.exports=pR.default});var tTe=m(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.fallback=Z7e;Rh.wrap=eTe;var rOt=Rh.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,nOt=Rh.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,iOt=Rh.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function Z7e(t){setTimeout(t,0)}function eTe(t){return(e,...r)=>t(()=>e(...r))}var zS;rOt?zS=queueMicrotask:nOt?zS=setImmediate:iOt?zS=process.nextTick:zS=Z7e;Rh.default=eTe(zS)});var oTe=m((fR,sTe)=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});fR.default=lOt;var sOt=X7e(),oOt=iTe(sOt),aOt=tTe(),uOt=iTe(aOt),cOt=Ty();function iTe(t){return t&&t.__esModule?t:{default:t}}function lOt(t){return(0,cOt.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return rTe(n,r)}:(0,oOt.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return rTe(n,r);r(null,n)})}function rTe(t,e){return t.then(r=>{nTe(e,null,r)},r=>{nTe(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function nTe(t,e,r){try{t(e,r)}catch(n){(0,uOt.default)(i=>{throw i},n)}}sTe.exports=fR.default});var Ty=m(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.isAsyncIterable=ff.isAsyncGenerator=ff.isAsync=void 0;var dOt=oTe(),pOt=fOt(dOt);function fOt(t){return t&&t.__esModule?t:{default:t}}function aTe(t){return t[Symbol.toStringTag]==="AsyncFunction"}function hOt(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function mOt(t){return typeof t[Symbol.asyncIterator]=="function"}function yOt(t){if(typeof t!="function")throw new Error("expected a function");return aTe(t)?(0,pOt.default)(t):t}ff.default=yOt;ff.isAsync=aTe;ff.isAsyncGenerator=hOt;ff.isAsyncIterable=mOt});var tb=m((hR,uTe)=>{"use strict";Object.defineProperty(hR,"__esModule",{value:!0});hR.default=gOt;function gOt(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}uTe.exports=hR.default});var lTe=m((mR,cTe)=>{"use strict";Object.defineProperty(mR,"__esModule",{value:!0});var EOt=dR(),bOt=EX(EOt),_Ot=Ty(),vOt=EX(_Ot),SOt=tb(),wOt=EX(SOt);function EX(t){return t&&t.__esModule?t:{default:t}}mR.default=(0,wOt.default)((t,e,r)=>{var n=(0,bOt.default)(e)?[]:{};t(e,(i,s,o)=>{(0,vOt.default)(i)((a,...u)=>{u.length<2&&([u]=u),n[s]=u,o(a)})},i=>r(i,n))},3);cTe.exports=mR.default});var bX=m((yR,dTe)=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});yR.default=AOt;function AOt(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}dTe.exports=yR.default});var fTe=m((gR,pTe)=>{"use strict";Object.defineProperty(gR,"__esModule",{value:!0});gR.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};pTe.exports=gR.default});var yTe=m((ER,mTe)=>{"use strict";Object.defineProperty(ER,"__esModule",{value:!0});ER.default=kOt;var COt=dR(),TOt=hTe(COt),OOt=fTe(),xOt=hTe(OOt);function hTe(t){return t&&t.__esModule?t:{default:t}}function IOt(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function ROt(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function DOt(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function kOt(t){if((0,TOt.default)(t))return IOt(t);var e=(0,xOt.default)(t);return e?ROt(e):DOt(t)}mTe.exports=ER.default});var _X=m((bR,gTe)=>{"use strict";Object.defineProperty(bR,"__esModule",{value:!0});bR.default=MOt;function MOt(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}gTe.exports=bR.default});var vR=m((_R,ETe)=>{"use strict";Object.defineProperty(_R,"__esModule",{value:!0});var POt={};_R.default=POt;ETe.exports=_R.default});var _Te=m((SR,bTe)=>{"use strict";Object.defineProperty(SR,"__esModule",{value:!0});SR.default=qOt;var NOt=vR(),FOt=BOt(NOt);function BOt(t){return t&&t.__esModule?t:{default:t}}function qOt(t,e,r,n){let i=!1,s=!1,o=!1,a=0,u=0;function c(){a>=e||o||i||(o=!0,t.next().then(({value:p,done:f})=>{if(!(s||i)){if(o=!1,f){i=!0,a<=0&&n(null);return}a++,r(p,u,l),u++,c()}}).catch(d))}function l(p,f){if(a-=1,!s){if(p)return d(p);if(p===!1){i=!0,s=!0;return}if(f===FOt.default||i&&a<=0)return i=!0,n(null);c()}}function d(p){s||(o=!1,i=!0,n(p))}c()}bTe.exports=SR.default});var ATe=m((wR,wTe)=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});var LOt=bX(),jOt=WS(LOt),$Ot=yTe(),KOt=WS($Ot),UOt=_X(),VOt=WS(UOt),vTe=Ty(),GOt=_Te(),STe=WS(GOt),HOt=vR(),zOt=WS(HOt);function WS(t){return t&&t.__esModule?t:{default:t}}wR.default=t=>(e,r,n)=>{if(n=(0,jOt.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,vTe.isAsyncGenerator)(e))return(0,STe.default)(e,t,r,n);if((0,vTe.isAsyncIterable)(e))return(0,STe.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,KOt.default)(e),s=!1,o=!1,a=0,u=!1;function c(d,p){if(!o)if(a-=1,d)s=!0,n(d);else if(d===!1)s=!0,o=!0;else{if(p===zOt.default||s&&a<=0)return s=!0,n(null);u||l()}}function l(){for(u=!0;a<t&&!s;){var d=i();if(d===null){s=!0,a<=0&&n(null);return}a+=1,r(d.value,d.key,(0,VOt.default)(c))}u=!1}l()};wTe.exports=wR.default});var SX=m((AR,CTe)=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});var WOt=ATe(),JOt=vX(WOt),YOt=Ty(),QOt=vX(YOt),XOt=tb(),ZOt=vX(XOt);function vX(t){return t&&t.__esModule?t:{default:t}}function ext(t,e,r,n){return(0,JOt.default)(e)(t,(0,QOt.default)(r),n)}AR.default=(0,ZOt.default)(ext,4);CTe.exports=AR.default});var xTe=m((CR,OTe)=>{"use strict";Object.defineProperty(CR,"__esModule",{value:!0});var txt=SX(),rxt=TTe(txt),nxt=tb(),ixt=TTe(nxt);function TTe(t){return t&&t.__esModule?t:{default:t}}function sxt(t,e,r){return(0,rxt.default)(t,1,e,r)}CR.default=(0,ixt.default)(sxt,3);OTe.exports=CR.default});var DTe=m((TR,RTe)=>{"use strict";Object.defineProperty(TR,"__esModule",{value:!0});TR.default=lxt;var oxt=lTe(),axt=ITe(oxt),uxt=xTe(),cxt=ITe(uxt);function ITe(t){return t&&t.__esModule?t:{default:t}}function lxt(t,e){return(0,axt.default)(cxt.default,t,e)}RTe.exports=TR.default});var wX=m((z4r,MTe)=>{"use strict";MTe.exports=hf;var OR=Ch().codes,dxt=OR.ERR_METHOD_NOT_IMPLEMENTED,pxt=OR.ERR_MULTIPLE_CALLBACK,fxt=OR.ERR_TRANSFORM_ALREADY_TRANSFORMING,hxt=OR.ERR_TRANSFORM_WITH_LENGTH_0,xR=Ay();by()(hf,xR);function mxt(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new pxt);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function hf(t){if(!(this instanceof hf))return new hf(t);xR.call(this,t),this._transformState={afterTransform:mxt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",yxt)}function yxt(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){kTe(t,e,r)}):kTe(this,null,null)}hf.prototype.push=function(t,e){return this._transformState.needTransform=!1,xR.prototype.push.call(this,t,e)};hf.prototype._transform=function(t,e,r){r(new dxt("_transform()"))};hf.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};hf.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};hf.prototype._destroy=function(t,e){xR.prototype._destroy.call(this,t,function(r){e(r)})};function kTe(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new hxt;if(t._transformState.transforming)throw new fxt;return t.push(null)}});var FTe=m((W4r,NTe)=>{"use strict";NTe.exports=JS;var PTe=wX();by()(JS,PTe);function JS(t){if(!(this instanceof JS))return new JS(t);PTe.call(this,t)}JS.prototype._transform=function(t,e,r){r(null,t)}});var $Te=m((J4r,jTe)=>{"use strict";var AX;function gxt(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var LTe=Ch().codes,Ext=LTe.ERR_MISSING_ARGS,bxt=LTe.ERR_STREAM_DESTROYED;function BTe(t){if(t)throw t}function _xt(t){return t.setHeader&&typeof t.abort=="function"}function vxt(t,e,r,n){n=gxt(n);var i=!1;t.on("close",function(){i=!0}),AX===void 0&&(AX=ZI()),AX(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,_xt(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new bxt("pipe"))}}}function qTe(t){t()}function Sxt(t,e){return t.pipe(e)}function wxt(t){return!t.length||typeof t[t.length-1]!="function"?BTe:t.pop()}function Axt(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=wxt(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Ext("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return vxt(o,u,c,function(l){i||(i=l),l&&s.forEach(qTe),!u&&(s.forEach(qTe),n(i))})});return e.reduce(Sxt)}jTe.exports=Axt});var Dh=m((bc,QS)=>{var YS=require("stream");process.env.READABLE_STREAM==="disable"&&YS?(QS.exports=YS.Readable,Object.assign(QS.exports,YS),QS.exports.Stream=YS):(bc=QS.exports=cX(),bc.Stream=YS||bc,bc.Readable=bc,bc.Writable=aR(),bc.Duplex=Ay(),bc.Transform=wX(),bc.PassThrough=FTe(),bc.finished=ZI(),bc.pipeline=$Te())});var DX=m((Y4r,UTe)=>{var rb=[],XS=[],CX=function(){};function OX(t){return~rb.indexOf(t)?!1:(rb.push(t),!0)}function xX(t){CX=t}function Cxt(t){for(var e=[],r=0;r<rb.length;r++){if(rb[r].async){e.push(rb[r]);continue}if(rb[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function IX(t){return~XS.indexOf(t)?!1:(XS.push(t),!0)}function TX(){CX.apply(CX,arguments)}function KTe(t){for(var e=0;e<XS.length;e++)t=XS[e].apply(XS[e],arguments);return t}function RX(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function Txt(t){return t.enabled=!1,t.modify=IX,t.set=xX,t.use=OX,RX(function(){return!1},t)}function Oxt(t){function e(){var r=Array.prototype.slice.call(arguments,0);return TX.call(TX,t,KTe(r,t)),!0}return t.enabled=!0,t.modify=IX,t.set=xX,t.use=OX,RX(e,t)}UTe.exports=function(e){return e.introduce=RX,e.enabled=Cxt,e.process=KTe,e.modify=IX,e.write=TX,e.nope=Txt,e.yep=Oxt,e.set=xX,e.use=OX,e}});var GTe=m((Q4r,VTe)=>{var xxt=DX(),Ixt=xxt(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});VTe.exports=Ixt});var QTe=m((X4r,YTe)=>{"use strict";var Fd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},zTe=Object.create(null);for(let t in Fd)Object.hasOwn(Fd,t)&&(zTe[Fd[t]]=t);var ts={to:{},get:{}};ts.get=function(t){let e=t.slice(0,3).toLowerCase(),r,n;switch(e){case"hsl":{r=ts.get.hsl(t),n="hsl";break}case"hwb":{r=ts.get.hwb(t),n="hwb";break}default:{r=ts.get.rgb(t),n="rgb";break}}return r?{model:n,value:r}:null};ts.get.rgb=function(t){if(!t)return null;let e=/^#([a-f\d]{3,4})$/i,r=/^#([a-f\d]{6})([a-f\d]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){let l=u*2;o[u]=Number.parseInt(a.slice(l,l+2),16)}c&&(o[3]=Number.parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=Number.parseInt(a[u]+a[u],16);c&&(o[3]=Number.parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)o[u]=Number.parseInt(a[u+1],10);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)o[u]=Math.round(Number.parseFloat(a[u+1])*2.55);a[4]&&(o[3]=a[5]?Number.parseFloat(a[4])*.01:Number.parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Fd,a[1])?(o=Fd[a[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=kh(o[u],0,255);return o[3]=kh(o[3],0,1),o};ts.get.hsl=function(t){if(!t)return null;let e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=kh(Number.parseFloat(r[2]),0,100),o=kh(Number.parseFloat(r[3]),0,100),a=kh(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};ts.get.hwb=function(t){if(!t)return null;let e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){let n=Number.parseFloat(r[4]),i=(Number.parseFloat(r[1])%360+360)%360,s=kh(Number.parseFloat(r[2]),0,100),o=kh(Number.parseFloat(r[3]),0,100),a=kh(Number.isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};ts.to.hex=function(...t){return"#"+IR(t[0])+IR(t[1])+IR(t[2])+(t[3]<1?IR(Math.round(t[3]*255)):"")};ts.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};ts.to.rgb.percent=function(...t){let e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};ts.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};ts.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};ts.to.keyword=function(...t){return zTe[t.slice(0,3)]};function kh(t,e,r){return Math.min(Math.max(e,t),r)}function IR(t){let e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var WTe={};for(let t of Object.keys(Fd))WTe[Fd[t]]=t;var Ue={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},mf=(6/29)**3;function nb(t){let e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function ib(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(let t of Object.keys(Ue)){if(!("channels"in Ue[t]))throw new Error("missing channels property: "+t);if(!("labels"in Ue[t]))throw new Error("missing channel labels property: "+t);if(Ue[t].labels.length!==Ue[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=Ue[t];delete Ue[t].channels,delete Ue[t].labels,Object.defineProperty(Ue[t],"channels",{value:e}),Object.defineProperty(Ue[t],"labels",{value:r})}Ue.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,u;switch(s){case i:{a=0;break}case e:{a=(r-n)/o;break}case r:{a=2+(n-e)/o;break}case n:{a=4+(e-r)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+s)/2;return s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};Ue.rgb.hsv=function(t){let e,r,n,i,s,o=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),d=function(p){return(c-p)/6/l+1/2};if(l===0)i=0,s=0;else{switch(s=l/c,e=d(o),r=d(a),n=d(u),c){case o:{i=n-r;break}case a:{i=1/3+e-n;break}case u:{i=2/3+r-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,c*100]};Ue.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=Ue.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};Ue.rgb.oklab=function(t){let e=ib(t[0]/255),r=ib(t[1]/255),n=ib(t[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*r+.0514459929*n),s=Math.cbrt(.2119034982*e+.6806995451*r+.1073969566*n),o=Math.cbrt(.0883024619*e+.2817188376*r+.6299787005*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ue.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),s=(1-e-i)/(1-i)||0,o=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function Rxt(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Ue.rgb.keyword=function(t){let e=WTe[t];if(e)return e;let r=Number.POSITIVE_INFINITY,n;for(let i of Object.keys(Fd)){let s=Fd[i],o=Rxt(t,s);o<r&&(r=o,n=i)}return n};Ue.keyword.rgb=function(t){return Fd[t]};Ue.rgb.xyz=function(t){let e=ib(t[0]/255),r=ib(t[1]/255),n=ib(t[2]/255),i=e*.4124564+r*.3575761+n*.1804375,s=e*.2126729+r*.7151522+n*.072175,o=e*.0193339+r*.119192+n*.9503041;return[i*100,s*100,o*100]};Ue.rgb.lab=function(t){let e=Ue.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>mf?r**(1/3):7.787*r+16/116,n=n>mf?n**(1/3):7.787*n+16/116,i=i>mf?i**(1/3):7.787*i+16/116;let s=116*n-16,o=500*(r-n),a=200*(n-i);return[s,o,a]};Ue.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s;if(r===0)return s=n*255,[s,s,s];let o=n<.5?n*(1+r):n+r-n*r,a=2*n-o,u=[0,0,0];for(let c=0;c<3;c++)i=e+1/3*-(c-1),i<0&&i++,i>1&&i--,6*i<1?s=a+(o-a)*6*i:2*i<1?s=o:3*i<2?s=a+(o-a)*(2/3-i)*6:s=a,u[c]=s*255;return u};Ue.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;let o=(n+r)/2,a=n===0?2*i/(s+i):2*r/(n+r);return[e,a*100,o*100]};Ue.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};Ue.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o;o=(2-r)*n;let a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};Ue.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s;i>1&&(r/=i,n/=i);let o=Math.floor(6*e),a=1-n;s=6*e-o,(o&1)!==0&&(s=1-s);let u=r+s*(a-r),c,l,d;switch(o){default:case 6:case 0:{c=a,l=u,d=r;break}case 1:{c=u,l=a,d=r;break}case 2:{c=r,l=a,d=u;break}case 3:{c=r,l=u,d=a;break}case 4:{c=u,l=r,d=a;break}case 5:{c=a,l=r,d=u;break}}return[c*255,l*255,d*255]};Ue.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[s*255,o*255,a*255]};Ue.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2404542+r*-1.5371385+n*-.4985314,s=e*-.969266+r*1.8760108+n*.041556,o=e*.0556434+r*-.2040259+n*1.0572252,i=nb(i),s=nb(s),o=nb(o),[i*255,s*255,o*255]};Ue.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>mf?e**(1/3):7.787*e+16/116,r=r>mf?r**(1/3):7.787*r+16/116,n=n>mf?n**(1/3):7.787*n+16/116;let i=116*r-16,s=500*(e-r),o=200*(r-n);return[i,s,o]};Ue.xyz.oklab=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*r-.1288597137*n),s=Math.cbrt(.0329845436*e+.9293118715*r+.0361456387*n),o=Math.cbrt(.0482003018*e+.2643662691*r+.633851707*n),a=.2104542553*i+.793617785*s-.0040720468*o,u=1.9779984951*i-2.428592205*s+.4505937099*o,c=.0259040371*i+.7827717662*s-.808675766*o;return[a*100,u*100,c*100]};Ue.oklab.oklch=function(t){return Ue.lab.lch(t)};Ue.oklab.xyz=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(.999999998*e+.396337792*r+.215803758*n)**3,s=(1.000000008*e-.105561342*r-.063854175*n)**3,o=(1.000000055*e-.089484182*r-1.291485538*n)**3,a=1.227013851*i-.55779998*s+.281256149*o,u=-.040580178*i+1.11225687*s-.071676679*o,c=-.076381285*i-.421481978*s+1.58616322*o;return[a*100,u*100,c*100]};Ue.oklab.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=(e+.3963377774*r+.2158037573*n)**3,s=(e-.1055613458*r-.0638541728*n)**3,o=(e-.0894841775*r-1.291485548*n)**3,a=nb(4.0767416621*i-3.3077115913*s+.2309699292*o),u=nb(-1.2684380046*i+2.6097574011*s-.3413193965*o),c=nb(-.0041960863*i-.7034186147*s+1.707614701*o);return[a*255,u*255,c*255]};Ue.oklch.oklab=function(t){return Ue.lch.lab(t)};Ue.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;let a=s**3,u=i**3,c=o**3;return s=a>mf?a:(s-16/116)/7.787,i=u>mf?u:(i-16/116)/7.787,o=c>mf?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ue.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(r*r+n*n);return[e,o,i]};Ue.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,s=r*Math.cos(i),o=r*Math.sin(i);return[e,s,o]};Ue.rgb.ansi16=function(t,e=null){let[r,n,i]=t,s=e===null?Ue.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return s===2&&(o+=60),o};Ue.hsv.ansi16=function(t){return Ue.rgb.ansi16(Ue.hsv.rgb(t),t[2])};Ue.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e>>4===r>>4&&r>>4===n>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};Ue.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(Math.trunc(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};Ue.ansi256.rgb=function(t){if(t=t[0],t>=232){let s=(t-232)*10+8;return[s,s,s]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};Ue.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(r.length)+r};Ue.hex.rgb=function(t){let e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=[...r].map(a=>a+a).join(""));let n=Number.parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ue.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,a,u=o<1?s/(1-o):0;return o<=0?a=0:i===e?a=(r-n)/o%6:i===r?a=2+(n-e)/o:a=4+(e-r)/o,a/=6,a%=1,[a*360,o*100,u*100]};Ue.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};Ue.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};Ue.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=o,i[2]=0;break}case 1:{i[0]=a,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=o;break}case 3:{i[0]=0,i[1]=a,i[2]=1;break}case 4:{i[0]=o,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};Ue.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};Ue.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};Ue.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Ue.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};Ue.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Ue.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Ue.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Ue.gray.hsl=function(t){return[0,0,t[0]]};Ue.gray.hsv=Ue.gray.hsl;Ue.gray.hwb=function(t){return[0,100,t[0]]};Ue.gray.cmyk=function(t){return[0,0,0,t[0]]};Ue.gray.lab=function(t){return[t[0],0,0]};Ue.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(n.length)+n};Ue.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function Dxt(){let t={},e=Object.keys(Ue);for(let{length:r}=e,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function kxt(t){let e=Dxt(),r=[t];for(e[t].distance=0;r.length>0;){let n=r.pop(),i=Object.keys(Ue[n]);for(let{length:s}=i,o=0;o<s;o++){let a=i[o],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function Mxt(t,e){return function(r){return e(t(r))}}function Pxt(t,e){let r=[e[t].parent,t],n=Ue[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=Mxt(Ue[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}function Nxt(t){let e=kxt(t),r={},n=Object.keys(e);for(let{length:i}=n,s=0;s<i;s++){let o=n[s];e[o].parent!==null&&(r[o]=Pxt(o,e))}return r}var Ss={},Fxt=Object.keys(Ue);function Bxt(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function qxt(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let{length:s}=i,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}for(let t of Fxt){Ss[t]={},Object.defineProperty(Ss[t],"channels",{value:Ue[t].channels}),Object.defineProperty(Ss[t],"labels",{value:Ue[t].labels});let e=Nxt(t),r=Object.keys(e);for(let n of r){let i=e[n];Ss[t][n]=qxt(i),Ss[t][n].raw=Bxt(i)}}var JTe=["keyword","gray","hex"],kX={};for(let t of Object.keys(Ss))kX[[...Ss[t].labels].sort().join("")]=t;var MX={};function es(t,e){if(!(this instanceof es))return new es(t,e);if(e&&e in JTe&&(e=null),e&&!(e in Ss))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof es)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){let i=ts.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=Ss[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=Ss[this.model].channels;let i=Array.prototype.slice.call(t,0,n);this.color=PX(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let s=i.sort().join("");if(!(s in kX))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=kX[s];let{labels:o}=Ss[this.model],a=[];for(r=0;r<o.length;r++)a.push(t[o[r]]);this.color=PX(a)}if(MX[this.model])for(n=Ss[this.model].channels,r=0;r<n;r++){let i=MX[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}es.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in ts.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:[...e.color,this.valpha];return ts.to[e.model](...r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:[...e.color,this.valpha];return ts.to.rgb.percent(...r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let t={},{channels:e}=Ss[this.model],{labels:r}=Ss[this.model];for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new es([...this.color.map(jxt(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new es([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:fi("rgb",0,Zi(255)),green:fi("rgb",1,Zi(255)),blue:fi("rgb",2,Zi(255)),hue:fi(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:fi("hsl",1,Zi(100)),lightness:fi("hsl",2,Zi(100)),saturationv:fi("hsv",1,Zi(100)),value:fi("hsv",2,Zi(100)),chroma:fi("hcg",1,Zi(100)),gray:fi("hcg",2,Zi(100)),white:fi("hwb",1,Zi(100)),wblack:fi("hwb",2,Zi(100)),cyan:fi("cmyk",0,Zi(100)),magenta:fi("cmyk",1,Zi(100)),yellow:fi("cmyk",2,Zi(100)),black:fi("cmyk",3,Zi(100)),x:fi("xyz",0,Zi(95.047)),y:fi("xyz",1,Zi(100)),z:fi("xyz",2,Zi(108.833)),l:fi("lab",0,Zi(100)),a:fi("lab",1),b:fi("lab",2),keyword(t){return t!==void 0?new es(t):Ss[this.model].keyword(this.color)},hex(t){return t!==void 0?new es(t):ts.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new es(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),ts.to.hex(...e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return es.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return es.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(Ss)){if(JTe.includes(t))continue;let{channels:e}=Ss[t];es.prototype[t]=function(...r){return this.model===t?new es(this):r.length>0?new es(r,t):new es([...$xt(Ss[this.model][t].raw(this.color)),this.valpha],t)},es[t]=function(...r){let n=r[0];return typeof n=="number"&&(n=PX(r,e)),new es(n,t)}}function Lxt(t,e){return Number(t.toFixed(e))}function jxt(t){return function(e){return Lxt(e,t)}}function fi(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(MX[n]||=[])[e]=r;return t=t[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Zi(t){return function(e){return Math.max(0,Math.min(t,e))}}function $xt(t){return Array.isArray(t)?t:[t]}function PX(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}function Kxt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uxt=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i},HTe=Kxt(Uxt);function Vxt(t,e){let r=t.split(e||":"),n=HTe(r[0]);if(!r.length)return n;for(let i=0,s=r.length-1;i<s;i++)n=es(n).mix(es(HTe(r[i+1]))).saturate(1).hex();return n}YTe.exports=Vxt});var ZTe=m((Z4r,XTe)=>{"use strict";function ql(t,e){if(e)return new ql(t).style(e);if(!(this instanceof ql))return new ql(t);this.text=t}ql.prototype.prefix="\x1B[";ql.prototype.suffix="m";ql.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};ql.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};ql.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};ql.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};ql.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};XTe.exports=ql});var tOe=m((e3r,eOe)=>{var Gxt=QTe(),Hxt=ZTe();eOe.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?Hxt(n+":",Gxt(n)):n+":";return e[0]=i+" "+e[0],e}});var nOe=m((t3r,rOe)=>{"use strict";rOe.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var sOe=m((r3r,iOe)=>{var zxt=nOe();iOe.exports=function(e){return function(n){try{return zxt(n,e())}catch{}return!1}}});var aOe=m((n3r,oOe)=>{var Wxt=sOe();oOe.exports=Wxt(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var cOe=m((i3r,uOe)=>{uOe.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var dOe=m((s3r,lOe)=>{var Jxt=DX(),Yxt=require("tty").isatty(1),RR=Jxt(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:Yxt,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});RR.modify(tOe());RR.use(aOe());RR.set(cOe());lOe.exports=RR});var ZS=m((o3r,NX)=>{process.env.NODE_ENV==="production"?NX.exports=GTe():NX.exports=dOe()});var fOe=m((a3r,pOe)=>{"use strict";var FX=require("fs"),{StringDecoder:Qxt}=require("string_decoder"),{Stream:Xxt}=Dh();function Zxt(){}pOe.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new Qxt("utf8"),i=new Xxt,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},FX.open(t.file,"a+","0644",(u,c)=>{if(u){e?e(u):i.emit("error",u),i.destroy();return}(function l(){if(i.destroyed){FX.close(c,Zxt);return}return FX.read(c,r,0,r.length,o,(d,p)=>{if(d){e?e(d):i.emit("error",d),i.destroy();return}if(!p)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(l,1e3);let f=n.write(r.slice(0,p));e||i.emit("data",f),f=(s+f).split(/\n+/);let h=f.length-1,g=0;for(;g<h;g++)(t.start==null||a>t.start)&&(e?e(null,f[g]):i.emit("line",f[g])),a++;return s=f[h],o+=p,l()})})()}),e?i.destroy:i}});var gOe=m((c3r,yOe)=>{"use strict";var La=require("fs"),ws=require("path"),hOe=DTe(),eIt=require("zlib"),{MESSAGE:tIt}=ji(),{Stream:rIt,PassThrough:mOe}=Dh(),nIt=Cy(),Ll=ZS()("winston:file"),iIt=require("os"),sIt=fOe();yOe.exports=class extends nIt{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new mOe,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?ws.basename(e.filename):"winston.log",this.dirname=e.dirname||ws.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=ws.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:iIt.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[tIt]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Ll("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Ll("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=d(e);let n=ws.join(this.dirname,this.filename),i="",s=[],o=0,a=La.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!r)return p.code!=="ENOENT"?r(p):r(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let f=p.length-1,h=0;for(;h<f;h++)(!e.start||o>=e.start)&&u(p[h]),o++;i=p[f]}),a.on("close",()=>{i&&u(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function u(p,f){try{let h=JSON.parse(p);l(h)&&c(h)}catch(h){f||a.emit("error",h)}}function c(p){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(p=e.fields.reduce((f,h)=>(f[h]=p[h],f),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(p)}function l(p){if(!p||typeof p!="object")return;let f=new Date(p.timestamp);if(!(e.from&&f<e.from||e.until&&f>e.until||e.level&&e.level!==p.level))return!0}function d(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-1440*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(e={}){let r=ws.join(this.dirname,this.filename),n=new rIt,i={file:r,start:e.start};return n.destroy=sIt(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);Ll("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=ws.join(this.dirname,r);La.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Ll("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return Ll(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=ws.join(this.dirname,this.filename);Ll("create stream start",r,this.options);let n=La.createWriteStream(r,this.options).on("error",i=>Ll(i)).on("close",()=>Ll("close",n.path,n.bytesWritten)).on("open",()=>{Ll("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new mOe,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return Ll("create stream ok",r),n}_incFile(e){Ll("_incFile",this.filename);let r=ws.extname(this._basename),n=ws.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(ws.join(this.dirname,`${n}${o}${r}`),ws.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),hOe(i,e)}_getFile(){let e=ws.extname(this._basename),r=ws.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,u=ws.join(this.dirname,a);La.unlink(u,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,u){let c=`${r}${a-1}${e}${s}`,l=ws.join(this.dirname,c);La.exists(l,d=>{if(!d)return u(null);c=`${r}${a}${e}${s}`,La.rename(l,ws.join(this.dirname,c),u)})}.bind(this,o));hOe(i,()=>{La.rename(ws.join(this.dirname,`${r}${e}${s}`),ws.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){La.access(e,La.F_OK,i=>{if(i)return n();var s=eIt.createGzip(),o=La.createReadStream(e),a=La.createWriteStream(r);a.on("finish",()=>{La.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){La.existsSync(e)||La.mkdirSync(e,{recursive:!0})}}});var bOe=m((d3r,EOe)=>{"use strict";var oIt=require("http"),aIt=require("https"),{Stream:uIt}=Dh(),cIt=Cy(),{configure:lIt}=BS();EOe.exports=class extends cIt{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(u){return r(u)}r(null,a)})}stream(e={}){let r=new uIt;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let u=a.length-1,c=0;for(;c<u;c++)try{r.emit("log",JSON.parse(a[c]))}catch(l){r.emit("error",l)}s=a[u]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?aIt:oIt).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",u=>u.on("end",()=>r(null,u)).resume());let a=lIt({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var vOe=m((f3r,_Oe)=>{"use strict";var dIt=wC(),{MESSAGE:pIt}=ji(),fIt=require("os"),hIt=Cy();_Oe.exports=class extends hIt{constructor(e={}){if(super(e),!e.stream||!dIt(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:fIt.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[pIt]}${this.eol}`),r&&r()}}});var SOe=m(ew=>{"use strict";Object.defineProperty(ew,"Console",{configurable:!0,enumerable:!0,get(){return J7e()}});Object.defineProperty(ew,"File",{configurable:!0,enumerable:!0,get(){return gOe()}});Object.defineProperty(ew,"Http",{configurable:!0,enumerable:!0,get(){return bOe()}});Object.defineProperty(ew,"Stream",{configurable:!0,enumerable:!0,get(){return vOe()}})});var kR=m(tw=>{"use strict";var DR=LQ(),{configs:BX}=ji();tw.cli=DR.levels(BX.cli);tw.npm=DR.levels(BX.npm);tw.syslog=DR.levels(BX.syslog);tw.addColors=DR.levels});var AOe=m((MR,wOe)=>{"use strict";Object.defineProperty(MR,"__esModule",{value:!0});var mIt=dR(),yIt=Oy(mIt),gIt=vR(),EIt=Oy(gIt),bIt=SX(),_It=Oy(bIt),vIt=bX(),SIt=Oy(vIt),wIt=_X(),AIt=Oy(wIt),CIt=Ty(),TIt=Oy(CIt),OIt=tb(),xIt=Oy(OIt);function Oy(t){return t&&t.__esModule?t:{default:t}}function IIt(t,e,r){r=(0,SIt.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(u,c){u===!1&&(o=!0),o!==!0&&(u?r(u):(++i===s||c===EIt.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,AIt.default)(a))}function RIt(t,e,r){return(0,_It.default)(t,1/0,e,r)}function DIt(t,e,r){var n=(0,yIt.default)(t)?IIt:RIt;return n(t,(0,TIt.default)(e),r)}MR.default=(0,xIt.default)(DIt,3);wOe.exports=MR.default});var TOe=m((PR,COe)=>{"use strict";Object.defineProperty(PR,"__esModule",{value:!0});PR.default=kIt;function kIt(t){return(e,r,n)=>t(e,n)}COe.exports=PR.default});var BR=m((FR,OOe)=>{"use strict";Object.defineProperty(FR,"__esModule",{value:!0});var MIt=AOe(),PIt=NR(MIt),NIt=TOe(),FIt=NR(NIt),BIt=Ty(),qIt=NR(BIt),LIt=tb(),jIt=NR(LIt);function NR(t){return t&&t.__esModule?t:{default:t}}function $It(t,e,r){return(0,PIt.default)(t,(0,FIt.default)((0,qIt.default)(e)),r)}FR.default=(0,jIt.default)($It,3);OOe.exports=FR.default});var IOe=m((y3r,xOe)=>{"use strict";var KIt=Object.prototype.toString;xOe.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=KIt.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var qX=m((g3r,ROe)=>{"use strict";var UIt=IOe();ROe.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=UIt(e),i}});var qR=m(nw=>{nw.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||nw.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};nw.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,u=null,c=null,l=i[5]==="native";if(i[1]){a=i[1];var d=a.lastIndexOf(".");if(a[d-1]=="."&&d--,d>0){s=a.substr(0,d),o=a.substr(d+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}u=null}o&&(u=s,c=o),o==="<anonymous>"&&(c=null,a=null);var f={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:u,methodName:c,columnNumber:parseInt(i[4],10)||null,native:l};return e._createParsedCallSite(f)}}).filter(function(n){return!!n})};function rw(t){for(var e in t)this[e]=t[e]}var VIt=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],GIt=["topLevel","eval","native","constructor"];VIt.forEach(function(t){rw.prototype[t]=null,rw.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});GIt.forEach(function(t){rw.prototype[t]=!1,rw.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});nw._createParsedCallSite=function(t){return new rw(t)}});var kOe=m((_3r,DOe)=>{"use strict";var{Writable:HIt}=Dh();DOe.exports=class extends HIt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var jX=m((S3r,NOe)=>{"use strict";var MOe=require("os"),zIt=BR(),LX=ZS()("winston:exception"),WIt=qX(),POe=qR(),JIt=kOe();NOe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:MOe.loadavg(),uptime:MOe.uptime()}}getTrace(e){return(e?POe.parse(e):POe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new JIt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){LX("doExit",i),LX("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);zIt(n,(a,u)=>{let c=WIt(u),l=a.transport||a;function d(p){return()=>{LX(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var BOe=m((A3r,FOe)=>{"use strict";var{Writable:YIt}=Dh();FOe.exports=class extends YIt{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var KX=m((T3r,jOe)=>{"use strict";var qOe=require("os"),QIt=BR(),$X=ZS()("winston:rejection"),XIt=qX(),LOe=qR(),ZIt=BOe();jOe.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:qOe.loadavg(),uptime:qOe.uptime()}}getTrace(e){return(e?LOe.parse(e):LOe.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new ZIt(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){$X("doExit",i),$X("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);QIt(n,(a,u)=>{let c=XIt(u),l=a.transport||a;function d(p){return()=>{$X(p),c()}}l._ending=!0,l.once("finish",d("finished")),l.once("error",d("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var KOe=m((O3r,$Oe)=>{"use strict";var UX=class{constructor(e){let r=LR();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};$Oe.exports=UX});var LR=m((x3r,HOe)=>{"use strict";var{Stream:eRt,Transform:tRt}=Dh(),UOe=BR(),{LEVEL:Bd,SPLAT:VOe}=ji(),GOe=wC(),rRt=jX(),nRt=KX(),iRt=yX(),sRt=KOe(),{warn:oRt}=jQ(),aRt=kR(),uRt=/%[scdjifoO%]/g,jR=class extends tRt{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:u,emitErrs:c,formatters:l,padLevels:d,rewriters:p,stripColors:f,exceptionHandlers:h,rejectionHandlers:g}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||PQ()(),this.defaultMeta=n||null,this.levels=i||this.levels||aRt.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new rRt(this),this.rejections=new nRt(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(_=>this.add(_))),u||c||l||d||p||f)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));h&&this.exceptions.handle(h),g&&this.rejections.handle(g)}getHighestLogLevel(){let e=iw(this.levels,this.level);return!this.transports||this.transports.length===0?e:this.transports.reduce((r,n)=>{let i=iw(this.levels,n.level);return i!==null&&i>r?i:r},e)}isLevelEnabled(e){let r=iw(this.levels,e);if(r===null)return!1;let n=iw(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=iw(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[Bd]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Bd]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[Bd]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(uRt))){let o=Object.assign({},this.defaultMeta,i,{[Bd]:e,[VOe]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Bd]:e,[VOe]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[Bd]||(e[Bd]=e.level),!this.levels[e[Bd]]&&this.levels[e[Bd]]!==0&&console.error("[winston] Unknown logger level: %s",e[Bd]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();UOe(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!GOe(e)||e.log.length>2?new iRt({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!GOe(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){oRt.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,u){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(c,l)=>{if(c)return u(c);typeof a.formatResults=="function"&&(l=a.formatResults(l,e.format)),u(null,l)})}function o(a,u){s(a,(c,l)=>{u&&(l=c||l,l&&(n[a.name]=l),u()),u=null})}UOe(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new eRt,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new sRt(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function iw(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(jR.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});HOe.exports=jR});var VX=m((I3r,zOe)=>{"use strict";var{LEVEL:cRt}=ji(),lRt=kR(),dRt=LR(),pRt=ZS()("winston:create-logger");function fRt(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}zOe.exports=function(t={}){t.levels=t.levels||lRt.npm.levels;class e extends dRt{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(pRt('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[cRt]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[fRt(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var JOe=m((D3r,WOe)=>{"use strict";var hRt=VX();WOe.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=hRt(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var QOe=m(sn=>{"use strict";var YOe=LQ(),{warn:sw}=jQ();sn.version=WCe().version;sn.transports=SOe();sn.config=kR();sn.addColors=YOe.levels;sn.format=YOe.format;sn.createLogger=VX();sn.Logger=LR();sn.ExceptionHandler=jX();sn.RejectionHandler=KX();sn.Container=JOe();sn.Transport=Cy();sn.loggers=new sn.Container;var qd=sn.createLogger();Object.keys(sn.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>sn[t]=(...e)=>qd[t](...e));Object.defineProperty(sn,"level",{get(){return qd.level},set(t){qd.level=t}});Object.defineProperty(sn,"exceptions",{get(){return qd.exceptions}});Object.defineProperty(sn,"rejections",{get(){return qd.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(sn,t,{get(){return qd[t]},set(e){qd[t]=e}})});Object.defineProperty(sn,"default",{get(){return{exceptionHandlers:qd.exceptionHandlers,rejectionHandlers:qd.rejectionHandlers,transports:qd.transports}}});sw.deprecated(sn,"setLevels");sw.forFunctions(sn,"useFormat",["cli"]);sw.forProperties(sn,"useFormat",["padLevels","stripColors"]);sw.forFunctions(sn,"deprecated",["addRewriter","addFilter","clone","extend"]);sw.forProperties(sn,"deprecated",["emitErrs","levelLength"])});var ow=m(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.getUint64=_c.getInt64=_c.setInt64=_c.setUint64=_c.UINT32_MAX=void 0;_c.UINT32_MAX=4294967295;function mRt(t,e,r){let n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}_c.setUint64=mRt;function yRt(t,e,r){let n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}_c.setInt64=yRt;function gRt(t,e){let r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}_c.getInt64=gRt;function ERt(t,e){let r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}_c.getUint64=ERt});var KR=m(_o=>{"use strict";var GX,HX,zX;Object.defineProperty(_o,"__esModule",{value:!0});_o.utf8DecodeTD=_o.TEXT_DECODER_THRESHOLD=_o.utf8DecodeJs=_o.utf8EncodeTE=_o.TEXT_ENCODER_THRESHOLD=_o.utf8EncodeJs=_o.utf8Count=void 0;var XOe=ow(),$R=(typeof process>"u"||((GX=process==null?void 0:process.env)===null||GX===void 0?void 0:GX.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function bRt(t){let e=t.length,r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if((i&4294967168)===0){r++;continue}else if((i&4294965248)===0)r+=2;else{if(i>=55296&&i<=56319&&n<e){let s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?r+=3:r+=4}}return r}_o.utf8Count=bRt;function _Rt(t,e,r){let n=t.length,i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){let a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}_o.utf8EncodeJs=_Rt;var aw=$R?new TextEncoder:void 0;_o.TEXT_ENCODER_THRESHOLD=$R?typeof process<"u"&&((HX=process==null?void 0:process.env)===null||HX===void 0?void 0:HX.TEXT_ENCODING)!=="force"?200:0:XOe.UINT32_MAX;function vRt(t,e,r){e.set(aw.encode(t),r)}function SRt(t,e,r){aw.encodeInto(t,e.subarray(r))}_o.utf8EncodeTE=aw?.encodeInto?SRt:vRt;var wRt=4096;function ARt(t,e,r){let n=e,i=n+r,s=[],o="";for(;n<i;){let a=t[n++];if((a&128)===0)s.push(a);else if((a&224)===192){let u=t[n++]&63;s.push((a&31)<<6|u)}else if((a&240)===224){let u=t[n++]&63,c=t[n++]&63;s.push((a&31)<<12|u<<6|c)}else if((a&248)===240){let u=t[n++]&63,c=t[n++]&63,l=t[n++]&63,d=(a&7)<<18|u<<12|c<<6|l;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=wRt&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}_o.utf8DecodeJs=ARt;var CRt=$R?new TextDecoder:null;_o.TEXT_DECODER_THRESHOLD=$R?typeof process<"u"&&((zX=process==null?void 0:process.env)===null||zX===void 0?void 0:zX.TEXT_DECODER)!=="force"?200:0:XOe.UINT32_MAX;function TRt(t,e,r){let n=t.subarray(e,e+r);return CRt.decode(n)}_o.utf8DecodeTD=TRt});var JX=m(UR=>{"use strict";Object.defineProperty(UR,"__esModule",{value:!0});UR.ExtData=void 0;var WX=class{constructor(e,r){this.type=e,this.data=r}};UR.ExtData=WX});var GR=m(VR=>{"use strict";Object.defineProperty(VR,"__esModule",{value:!0});VR.DecodeError=void 0;var YX=class t extends Error{constructor(e){super(e);let r=Object.create(t.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};VR.DecodeError=YX});var QX=m(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.timestampExtension=Ys.decodeTimestampExtension=Ys.decodeTimestampToTimeSpec=Ys.encodeTimestampExtension=Ys.encodeDateToTimeSpec=Ys.encodeTimeSpecToTimestamp=Ys.EXT_TIMESTAMP=void 0;var ORt=GR(),ZOe=ow();Ys.EXT_TIMESTAMP=-1;var xRt=4294967296-1,IRt=17179869184-1;function exe({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=IRt)if(e===0&&t<=xRt){let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{let r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{let r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),(0,ZOe.setInt64)(n,4,t),r}}Ys.encodeTimeSpecToTimestamp=exe;function txe(t){let e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}Ys.encodeDateToTimeSpec=txe;function rxe(t){if(t instanceof Date){let e=txe(t);return exe(e)}else return null}Ys.encodeTimestampExtension=rxe;function nxe(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{let r=(0,ZOe.getInt64)(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new ORt.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}Ys.decodeTimestampToTimeSpec=nxe;function ixe(t){let e=nxe(t);return new Date(e.sec*1e3+e.nsec/1e6)}Ys.decodeTimestampExtension=ixe;Ys.timestampExtension={type:Ys.EXT_TIMESTAMP,encode:rxe,decode:ixe}});var WR=m(zR=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});zR.ExtensionCodec=void 0;var HR=JX(),RRt=QX(),uw=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(RRt.timestampExtension)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{let i=1+e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){let i=this.builtInEncoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=-1-n;return new HR.ExtData(o,s)}}}for(let n=0;n<this.encoders.length;n++){let i=this.encoders[n];if(i!=null){let s=i(e,r);if(s!=null){let o=n;return new HR.ExtData(o,s)}}}return e instanceof HR.ExtData?e:null}decode(e,r,n){let i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new HR.ExtData(r,e)}};zR.ExtensionCodec=uw;uw.defaultCodec=new uw});var XX=m(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0});sb.createDataView=sb.ensureUint8Array=void 0;function sxe(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}sb.ensureUint8Array=sxe;function DRt(t){if(t instanceof ArrayBuffer)return new DataView(t);let e=sxe(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}sb.createDataView=DRt});var eZ=m(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.Encoder=Ld.DEFAULT_INITIAL_BUFFER_SIZE=Ld.DEFAULT_MAX_DEPTH=void 0;var cw=KR(),kRt=WR(),oxe=ow(),MRt=XX();Ld.DEFAULT_MAX_DEPTH=100;Ld.DEFAULT_INITIAL_BUFFER_SIZE=2048;var ZX=class{constructor(e=kRt.ExtensionCodec.defaultCodec,r=void 0,n=Ld.DEFAULT_MAX_DEPTH,i=Ld.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,o=!1,a=!1,u=!1){this.extensionCodec=e,this.context=r,this.maxDepth=n,this.initialBufferSize=i,this.sortKeys=s,this.forceFloat32=o,this.ignoreUndefined=a,this.forceIntegerToFloat=u,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){let r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){let r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){if(e.length>cw.TEXT_ENCODER_THRESHOLD){let i=(0,cw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,cw.utf8EncodeTE)(e,this.bytes,this.pos),this.pos+=i}else{let i=(0,cw.utf8Count)(e);this.ensureBufferSizeToWrite(5+i),this.writeStringHeader(i),(0,cw.utf8EncodeJs)(e,this.bytes,this.pos),this.pos+=i}}encodeObject(e,r){let n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);let n=(0,MRt.ensureUint8Array)(e);this.writeU8a(n)}encodeArray(e,r){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(let i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){let n=Object.keys(e);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(let s of n){let o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){let r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,oxe.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,oxe.setInt64)(this.view,this.pos,e),this.pos+=8}};Ld.Encoder=ZX});var axe=m(JR=>{"use strict";Object.defineProperty(JR,"__esModule",{value:!0});JR.encode=void 0;var PRt=eZ(),NRt={};function FRt(t,e=NRt){return new PRt.Encoder(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat).encodeSharedRef(t)}JR.encode=FRt});var uxe=m(YR=>{"use strict";Object.defineProperty(YR,"__esModule",{value:!0});YR.prettyByte=void 0;function BRt(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}YR.prettyByte=BRt});var cxe=m(QR=>{"use strict";Object.defineProperty(QR,"__esModule",{value:!0});QR.CachedKeyDecoder=void 0;var qRt=KR(),LRt=16,jRt=16,tZ=class{constructor(e=LRt,r=jRt){this.maxKeyLength=e,this.maxLengthPerKey=r,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){let i=this.caches[n-1];e:for(let s of i){let o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return s.str}return null}store(e,r){let n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){let i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;let s=(0,qRt.utf8DecodeJs)(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}};QR.CachedKeyDecoder=tZ});var XR=m(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.Decoder=gf.DataViewIndexOutOfBoundsError=void 0;var rZ=uxe(),$Rt=WR(),xy=ow(),nZ=KR(),iZ=XX(),KRt=cxe(),yf=GR(),URt=t=>{let e=typeof t;return e==="string"||e==="number"},lw=-1,oZ=new DataView(new ArrayBuffer(0)),VRt=new Uint8Array(oZ.buffer);gf.DataViewIndexOutOfBoundsError=(()=>{try{oZ.getInt8(0)}catch(t){return t.constructor}throw new Error("never reached")})();var lxe=new gf.DataViewIndexOutOfBoundsError("Insufficient data"),GRt=new KRt.CachedKeyDecoder,sZ=class{constructor(e=$Rt.ExtensionCodec.defaultCodec,r=void 0,n=xy.UINT32_MAX,i=xy.UINT32_MAX,s=xy.UINT32_MAX,o=xy.UINT32_MAX,a=xy.UINT32_MAX,u=GRt){this.extensionCodec=e,this.context=r,this.maxStrLength=n,this.maxBinLength=i,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=u,this.totalPos=0,this.pos=0,this.view=oZ,this.bytes=VRt,this.headByte=lw,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=lw,this.stack.length=0}setBuffer(e){this.bytes=(0,iZ.ensureUint8Array)(e),this.view=(0,iZ.createDataView)(this.bytes),this.pos=0}appendBuffer(e){if(this.headByte===lw&&!this.hasRemaining(1))this.setBuffer(e);else{let r=this.bytes.subarray(this.pos),n=(0,iZ.ensureUint8Array)(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){this.reinitializeState(),this.setBuffer(e);let r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}*decodeMulti(e){for(this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(e){let r=!1,n;for await(let a of e){if(r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(u){if(!(u instanceof gf.DataViewIndexOutOfBoundsError))throw u}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,rZ.prettyByte)(i)} at ${o} (${s} in the current buffer)`)}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){let n=r,i=-1;for await(let s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof gf.DataViewIndexOutOfBoundsError))throw o}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){let i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){let i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{let i=e-160;r=this.decodeUtf8String(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)r=this.readI64();else if(e===217){let i=this.lookU8();r=this.decodeUtf8String(i,1)}else if(e===218){let i=this.lookU16();r=this.decodeUtf8String(i,2)}else if(e===219){let i=this.lookU32();r=this.decodeUtf8String(i,4)}else if(e===220){let i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){let i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){let i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){let i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){let i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){let i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){let i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){let i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){let i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){let i=this.lookU32();r=this.decodeExtension(i,4)}else throw new yf.DecodeError(`Unrecognized type byte: ${(0,rZ.prettyByte)(e)}`);this.complete();let n=this.stack;for(;n.length>0;){let i=n[n.length-1];if(i.type===0)if(i.array[i.position]=r,i.position++,i.position===i.size)n.pop(),r=i.array;else continue e;else if(i.type===1){if(!URt(r))throw new yf.DecodeError("The type of key must be string or number but "+typeof r);if(r==="__proto__")throw new yf.DecodeError("The key __proto__ is not allowed");i.key=r,i.type=2;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)n.pop(),r=i.map;else{i.key=null,i.type=1;continue e}}return r}}readHeadByte(){return this.headByte===lw&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=lw}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new yf.DecodeError(`Unrecognized array type byte: ${(0,rZ.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new yf.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})}pushArrayState(e){if(e>this.maxArrayLength)throw new yf.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:e,array:new Array(e),position:0})}decodeUtf8String(e,r){var n;if(e>this.maxStrLength)throw new yf.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw lxe;let i=this.pos+r,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,i,e):e>nZ.TEXT_DECODER_THRESHOLD?s=(0,nZ.utf8DecodeTD)(this.bytes,i,e):s=(0,nZ.utf8DecodeJs)(this.bytes,i,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new yf.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw lxe;let n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new yf.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,xy.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,xy.getInt64)(this.view,this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};gf.Decoder=sZ});var aZ=m(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.decodeMulti=jd.decode=jd.defaultDecodeOptions=void 0;var dxe=XR();jd.defaultDecodeOptions={};function HRt(t,e=jd.defaultDecodeOptions){return new dxe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decode(t)}jd.decode=HRt;function zRt(t,e=jd.defaultDecodeOptions){return new dxe.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeMulti(t)}jd.decodeMulti=zRt});var hxe=m(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.ensureAsyncIterable=Mh.asyncIterableFromStream=Mh.isAsyncIterable=void 0;function pxe(t){return t[Symbol.asyncIterator]!=null}Mh.isAsyncIterable=pxe;function WRt(t){if(t==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*fxe(t){let e=t.getReader();try{for(;;){let{done:r,value:n}=await e.read();if(r)return;WRt(n),yield n}}finally{e.releaseLock()}}Mh.asyncIterableFromStream=fxe;function JRt(t){return pxe(t)?t:fxe(t)}Mh.ensureAsyncIterable=JRt});var yxe=m($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.decodeStream=$d.decodeMultiStream=$d.decodeArrayStream=$d.decodeAsync=void 0;var uZ=XR(),cZ=hxe(),ZR=aZ();async function YRt(t,e=ZR.defaultDecodeOptions){let r=(0,cZ.ensureAsyncIterable)(t);return new uZ.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeAsync(r)}$d.decodeAsync=YRt;function QRt(t,e=ZR.defaultDecodeOptions){let r=(0,cZ.ensureAsyncIterable)(t);return new uZ.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeArrayStream(r)}$d.decodeArrayStream=QRt;function mxe(t,e=ZR.defaultDecodeOptions){let r=(0,cZ.ensureAsyncIterable)(t);return new uZ.Decoder(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength).decodeStream(r)}$d.decodeMultiStream=mxe;function XRt(t,e=ZR.defaultDecodeOptions){return mxe(t,e)}$d.decodeStream=XRt});var bxe=m(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.decodeTimestampExtension=Vt.encodeTimestampExtension=Vt.decodeTimestampToTimeSpec=Vt.encodeTimeSpecToTimestamp=Vt.encodeDateToTimeSpec=Vt.EXT_TIMESTAMP=Vt.ExtData=Vt.ExtensionCodec=Vt.Encoder=Vt.DataViewIndexOutOfBoundsError=Vt.DecodeError=Vt.Decoder=Vt.decodeStream=Vt.decodeMultiStream=Vt.decodeArrayStream=Vt.decodeAsync=Vt.decodeMulti=Vt.decode=Vt.encode=void 0;var ZRt=axe();Object.defineProperty(Vt,"encode",{enumerable:!0,get:function(){return ZRt.encode}});var gxe=aZ();Object.defineProperty(Vt,"decode",{enumerable:!0,get:function(){return gxe.decode}});Object.defineProperty(Vt,"decodeMulti",{enumerable:!0,get:function(){return gxe.decodeMulti}});var eD=yxe();Object.defineProperty(Vt,"decodeAsync",{enumerable:!0,get:function(){return eD.decodeAsync}});Object.defineProperty(Vt,"decodeArrayStream",{enumerable:!0,get:function(){return eD.decodeArrayStream}});Object.defineProperty(Vt,"decodeMultiStream",{enumerable:!0,get:function(){return eD.decodeMultiStream}});Object.defineProperty(Vt,"decodeStream",{enumerable:!0,get:function(){return eD.decodeStream}});var Exe=XR();Object.defineProperty(Vt,"Decoder",{enumerable:!0,get:function(){return Exe.Decoder}});Object.defineProperty(Vt,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return Exe.DataViewIndexOutOfBoundsError}});var eDt=GR();Object.defineProperty(Vt,"DecodeError",{enumerable:!0,get:function(){return eDt.DecodeError}});var tDt=eZ();Object.defineProperty(Vt,"Encoder",{enumerable:!0,get:function(){return tDt.Encoder}});var rDt=WR();Object.defineProperty(Vt,"ExtensionCodec",{enumerable:!0,get:function(){return rDt.ExtensionCodec}});var nDt=JX();Object.defineProperty(Vt,"ExtData",{enumerable:!0,get:function(){return nDt.ExtData}});var ob=QX();Object.defineProperty(Vt,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return ob.EXT_TIMESTAMP}});Object.defineProperty(Vt,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return ob.encodeDateToTimeSpec}});Object.defineProperty(Vt,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return ob.encodeTimeSpecToTimestamp}});Object.defineProperty(Vt,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return ob.decodeTimestampToTimeSpec}});Object.defineProperty(Vt,"encodeTimestampExtension",{enumerable:!0,get:function(){return ob.encodeTimestampExtension}});Object.defineProperty(Vt,"decodeTimestampExtension",{enumerable:!0,get:function(){return ob.decodeTimestampExtension}})});var vxe=m(tD=>{"use strict";Object.defineProperty(tD,"__esModule",{value:!0});tD.LogLevel=void 0;var _xe;(function(t){t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug",t.Fatal="fatal",t.Http="http",t.Verbose="verbose",t.Silly="silly",t.Trace="trace"})(_xe||(tD.LogLevel=_xe={}))});var pZ=m(dZ=>{"use strict";Object.defineProperty(dZ,"__esModule",{value:!0});var lZ=class{constructor(){this.length=0}push(e){let r={value:e};this.last=this.last?this.last.next=r:this.first=r,this.length++}shift(){if(this.first){let{value:e}=this.first;return this.first=this.first.next,--this.length||(this.last=void 0),e}}};dZ.default=lZ});var Sxe=m(fZ=>{"use strict";Object.defineProperty(fZ,"__esModule",{value:!0});fZ.base64Encode=iDt;function iDt(t){return Buffer.from(t).toString("base64")}});var wxe=m(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});ab.calculateJsonLogSizeBytes=void 0;ab.default=lDt;var sDt=1e3,oDt=1e3,aDt=3,uDt=100,cDt=t=>JSON.stringify(t).length+1;ab.calculateJsonLogSizeBytes=cDt;function lDt(t=sDt,e=oDt,r=aDt,n=uDt,i=0,s=ab.calculateJsonLogSizeBytes){let o,a,u=[],c=0,l=0,d=0;async function p(){o&&clearTimeout(o),o=null;let h=u,g=c;u=[],c=0;try{await a(h.map(_=>_.log)),h.forEach(_=>_.resolve(_.log)),l=0}catch(_){if(l<r){l++,d=Date.now()+n,u=u.concat(h),c+=g,await f();return}h.map(S=>S.reject(_)),l=0}}async function f(){if(!o)return new Promise(h=>{o=setTimeout(async function(){await p(),h()},e)})}return{initPusher:function(h){return a=h,async function(g){return new Promise(async(_,S)=>(u.push({log:g,resolve:_,reject:S}),i>0&&(c+=s(g)),(u.length>=t||i>0&&c>=i)&&Date.now()>d?await p():await f(),_))}},flush:p}}});var Axe=m(mZ=>{"use strict";Object.defineProperty(mZ,"__esModule",{value:!0});mZ.default=dDt;var hZ=64;function dDt(t,e,r="The function"){if(t<=0||e<=0)return c=>c;let n=[0],i=0,s=Date.now();function o(){let c=Date.now(),l=t/hZ;if(c<s+l)return;let d=Math.floor((c-s)/l);n=Array(Math.min(d,hZ)).fill(0).concat(n).slice(0,hZ),s+=d*l}function a(){return n.reduce((c,l)=>c+l)}function u(){n[0]++}return c=>async(...l)=>{if(o(),a()<e)return u(),await c(...l);let d=Date.now();i<d-t&&(i=d,console.error(`${r} was called more than ${e} times during last ${t}ms. Ignoring.`))}}});var Cxe=m(dw=>{"use strict";var pDt=dw&&dw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dw,"__esModule",{value:!0});dw.default=hDt;var fDt=pDt(pZ());function hDt(t,e=-1){let r=0,n=new fDt.default;function i(s){return async(...o)=>new Promise((a,u)=>{async function c(){if(r<t){r++;try{a(await s(...o))}catch(l){u(l)}r--,n.length>0&&n.shift()()}else if(e<0||n.length<e)n.push(c);else{u(new Error("Queue max limit exceeded"));return}}return c()})}return i}});var Oxe=m(hi=>{"use strict";var mDt=hi&&hi.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),yDt=hi&&hi.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),gDt=hi&&hi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mDt(e,t,r);return yDt(e,t),e},yZ=hi&&hi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hi,"__esModule",{value:!0});hi.calculateJsonLogSizeBytes=hi.makeThrottle=hi.makeBurstProtection=hi.makeBatch=hi.base64Encode=hi.Queue=void 0;var EDt=yZ(pZ());hi.Queue=EDt.default;var bDt=Sxe();Object.defineProperty(hi,"base64Encode",{enumerable:!0,get:function(){return bDt.base64Encode}});var Txe=gDt(wxe());hi.makeBatch=Txe.default;Object.defineProperty(hi,"calculateJsonLogSizeBytes",{enumerable:!0,get:function(){return Txe.calculateJsonLogSizeBytes}});var _Dt=yZ(Axe());hi.makeBurstProtection=_Dt.default;var vDt=yZ(Cxe());hi.makeThrottle=vDt.default});var Ixe=m((rvr,xxe)=>{"use strict";var gZ=class t extends Error{constructor(e){super(t._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,t)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},SDt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],EZ=Symbol(".toJSON called"),wDt=t=>{t[EZ]=!0;let e=t.toJSON();return delete t[EZ],e},bZ=({from:t,seen:e,to_:r,forceEnumerable:n,maxDepth:i,depth:s})=>{let o=r||(Array.isArray(t)?[]:{});if(e.push(t),s>=i)return o;if(typeof t.toJSON=="function"&&t[EZ]!==!0)return wDt(t);for(let[a,u]of Object.entries(t)){if(typeof Buffer=="function"&&Buffer.isBuffer(u)){o[a]="[object Buffer]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){o[a]=u;continue}if(!e.includes(t[a])){s++,o[a]=bZ({from:t[a],seen:e.slice(),forceEnumerable:n,maxDepth:i,depth:s});continue}o[a]="[Circular]"}}for(let{property:a,enumerable:u}of SDt)typeof t[a]=="string"&&Object.defineProperty(o,a,{value:t[a],enumerable:n?!0:u,configurable:!0,writable:!0});return o},ADt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;return typeof t=="object"&&t!==null?bZ({from:t,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t},CDt=(t,e={})=>{let{maxDepth:r=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let n=new Error;return bZ({from:t,seen:[],to_:n,maxDepth:r,depth:0}),n}return new gZ(t)};xxe.exports={serializeError:ADt,deserializeError:CDt}});var Dxe=m(SZ=>{"use strict";Object.defineProperty(SZ,"__esModule",{value:!0});var ub=vxe(),rD=Oxe(),Rxe=Ixe(),TDt={endpoint:"https://in.logs.betterstack.com",batchSize:1e3,batchSizeKiB:0,batchInterval:1e3,retryCount:3,retryBackoff:100,syncMax:5,syncQueuedMax:100,burstProtectionMilliseconds:5e3,burstProtectionMax:1e4,ignoreExceptions:!1,throwExceptions:!1,contextObjectMaxDepth:50,contextObjectMaxDepthWarn:!0,contextObjectCircularRefWarn:!0,sendLogsToConsoleOutput:!1,sendLogsToBetterStack:!0,calculateLogSizeBytes:rD.calculateJsonLogSizeBytes},_Z=class{constructor(e,r){if(this._middleware=[],this._countLogged=0,this._countSynced=0,this._countDropped=0,typeof e!="string"||e==="")throw new Error("Logtail source token missing");this._sourceToken=e,this._options=Object.assign(Object.assign({},TDt),r);let i=(0,rD.makeThrottle)(this._options.syncMax,this._options.syncQueuedMax)(o=>this._sync(o));this._logBurstProtection=(0,rD.makeBurstProtection)(this._options.burstProtectionMilliseconds,this._options.burstProtectionMax,"Logging"),this.log=this._logBurstProtection(this.log.bind(this));let s=(0,rD.makeBatch)(this._options.batchSize,this._options.batchInterval,this._options.retryCount,this._options.retryBackoff,this._options.batchSizeKiB*1024,this._options.calculateLogSizeBytes);this._batch=s.initPusher(o=>i(o)),this._flush=s.flush}async flush(){return this._flush()}get logged(){return this._countLogged}get synced(){return this._countSynced}get dropped(){return this._countDropped}async log(e,r=ub.LogLevel.Info,n={}){if(typeof n!="object"&&(n={extra:n}),n instanceof Error&&(n={error:n}),this._options.sendLogsToConsoleOutput)switch(r){case"debug":console.debug(e,n);break;case"info":console.info(e,n);break;case"warn":console.warn(e,n);break;case"error":console.error(e,n);break;default:console.log(`[${r.toUpperCase()}]`,e,n);break}if(typeof this._sync!="function")throw new Error("No Logtail logger sync function provided");this._countLogged++;let s=Object.assign(Object.assign({dt:new Date,level:r},n),e instanceof Error?(0,Rxe.serializeError)(e):{message:e});for(let o of this._middleware){let a=await o(s);if(a==null)return s;s=a}if(s=this.serialize(s,this._options.contextObjectMaxDepth),!this._options.sendLogsToBetterStack)return s;try{await this._batch(s),this._countSynced++}catch(o){if(this._countDropped++,!this._options.ignoreExceptions){if(this._options.throwExceptions)throw o;console.error(o)}}return s}serialize(e,r,n=new WeakSet){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(e instanceof Date)return isNaN(e.getTime())?e.toString():e.toISOString();if(e instanceof Error)return(0,Rxe.serializeError)(e);if((typeof e=="object"||Array.isArray(e))&&(r<1||n.has(e)))return n.has(e)?(this._options.contextObjectCircularRefWarn&&console.warn("[Logtail] Found a circular reference when serializing logs. Please do not use circular references in your logs."),"<omitted circular reference>"):(this._options.contextObjectMaxDepthWarn&&console.warn(`[Logtail] Max depth of ${this._options.contextObjectMaxDepth} reached when serializing logs. Please do not use excessive object depth in your logs.`),`<omitted context beyond configured max depth: ${this._options.contextObjectMaxDepth}>`);if(Array.isArray(e)){n.add(e);let i=e.map(s=>this.serialize(s,r-1,n));return n.delete(e),i}else if(typeof e=="object"){let i={};return n.add(e),Object.entries(e).forEach(s=>{let o=s[0],a=s[1],u=this.serialize(a,r-1,n);u!==void 0&&(i[o]=u)}),n.delete(e),i}else return typeof e>"u"?void 0:`<omitted unserializable ${typeof e}>`}async debug(e,r={}){return this.log(e,ub.LogLevel.Debug,r)}async info(e,r={}){return this.log(e,ub.LogLevel.Info,r)}async warn(e,r={}){return this.log(e,ub.LogLevel.Warn,r)}async error(e,r={}){return this.log(e,ub.LogLevel.Error,r)}setSync(e){this._sync=e}use(e){this._middleware.push(e)}remove(e){this._middleware=this._middleware.filter(r=>r!==e)}},vZ=class extends _Z{async log(e,r=ub.LogLevel.Info,n={}){return super.log(e,r,n)}};SZ.default=vZ});var kxe=m(cb=>{"use strict";var ODt=cb&&cb.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cb,"__esModule",{value:!0});cb.Base=void 0;var xDt=ODt(Dxe());cb.Base=xDt.default});var Nxe=m(pw=>{"use strict";var IDt=pw&&pw.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pw,"__esModule",{value:!0});pw.getStackContext=kDt;var Mxe=require("path"),RDt=IDt(qR()),DDt=Pxe();function kDt(t,e){let r=MDt(t,e);return r===null?{}:{context:{runtime:{file:NDt(r.getFileName()),type:r.getTypeName(),method:r.getMethodName(),function:r.getFunctionName(),line:r.getLineNumber(),column:r.getColumnNumber()},system:{pid:process.pid,main_file:DDt}}}}function MDt(t,e){for(let r of[t.warn,t.error,t.info,t.debug,t.log]){let n=RDt.default.get(r);if(n?.length>0)return PDt(n,e)}return null}function PDt(t,e){if(e){t.reverse();let r=t.findIndex(n=>{var i;return((i=n.getFileName())===null||i===void 0?void 0:i.includes(e.fileName))&&(e.methodNames.includes(n.getMethodName())||e.methodNames.includes(n.getFunctionName()))});return r>0?t[r-1]:e.required?null:t[t.length-1]}return t[0]}function NDt(t){if(typeof t!="string")return null;if(t.startsWith("file:/"))return new URL(t).pathname;{let e=(0,Mxe.dirname)(Pxe());return(0,Mxe.relative)(e,t)}}function Pxe(){let t=process==null?void 0:process.argv;if(t===void 0)return"";for(let e of t){if(typeof e!="string"||e.startsWith("-"))break;if(e.endsWith(".js"))return e}return""}});var Fxe=m(lb=>{"use strict";var AZ=lb&&lb.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lb,"__esModule",{value:!0});lb.Node=void 0;var FDt=bxe(),BDt=AZ(require("node:http")),qDt=AZ(require("node:https")),LDt=AZ(require("node:zlib")),jDt=kxe(),$Dt=Nxe(),wZ=class extends jDt.Base{constructor(e,r){r=Object.assign({timeout:3e4},r),super(e,r);let n=this.createAgent(),i=async s=>{let o=this._options,a=this.getHttpModule().request(o.endpoint,{method:"POST",headers:{"Content-Type":"application/msgpack","Content-Encoding":"gzip",Authorization:`Bearer ${this._sourceToken}`,"User-Agent":"logtail-js(node)"},agent:n,timeout:o.timeout>0?o.timeout:void 0}),u=await new Promise((c,l)=>{o.timeout>0&&a.on("timeout",()=>{a.destroy(),l(new Error(`Request timeout after ${o.timeout}ms`))}),a.on("response",c),a.on("error",l),LDt.default.gzip(this.encodeAsMsgpack(s),(d,p)=>{if(d){l(d);return}a.write(p),a.end()})});if(u.statusCode&&u.statusCode>=200&&u.statusCode<300)return s;throw new Error(u.statusMessage)};this.setSync(i)}async log(e,r,n={},i){n=Object.assign(Object.assign({},(0,$Dt.getStackContext)(this,i)),n);let s=await super.log(e,r,n);return this._writeStream&&this._writeStream.write(JSON.stringify(s)+`
`),s}pipe(e){return this._writeStream=e,e}encodeAsMsgpack(e){let r=(0,FDt.encode)(e);return Buffer.from(r.buffer,r.byteOffset,r.byteLength)}createAgent(){let r=this._options.useIPv6?6:4;return new(this.getHttpModule()).Agent({family:r})}getHttpModule(){return this._options.endpoint.startsWith("https")?qDt.default:BDt.default}};lb.Node=wZ});var Bxe=m(nD=>{"use strict";Object.defineProperty(nD,"__esModule",{value:!0});nD.Logtail=void 0;var KDt=Fxe();Object.defineProperty(nD,"Logtail",{enumerable:!0,get:function(){return KDt.Node}})});var qxe=m(Ph=>{"use strict";var UDt=Ph&&Ph.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},VDt=Ph&&Ph.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.LogtailTransport=void 0;var GDt=VDt(Cy()),HDt={fileName:"node_modules/winston",methodNames:["log","error","warn","info","http","verbose","debug","silly"]},CZ=class extends GDt.default{constructor(e,r){super(Object.assign(Object.assign({},r),{close:()=>{this._logtail.flush().then(()=>{r?.close&&r.close()})}})),this._logtail=e}log(e,r){setImmediate(()=>{this.emit("logged",e)});let{level:n,message:i}=e,s=UDt(e,["level","message"]);this._logtail.log(i,n,s,HDt),r()}};Ph.LogtailTransport=CZ});var Lxe=m(iD=>{"use strict";Object.defineProperty(iD,"__esModule",{value:!0});iD.LogtailTransport=void 0;var zDt=qxe();Object.defineProperty(iD,"LogtailTransport",{enumerable:!0,get:function(){return zDt.LogtailTransport}})});var jxe=m((lvr,WDt)=>{WDt.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var Hxe=m((dvr,Ef)=>{var TZ=require("fs"),sD=require("path"),JDt=require("os"),YDt=require("crypto"),QDt=jxe(),OZ=QDt.version,$xe=["\u{1F510} encrypt with Dotenvx: https://dotenvx.com","\u{1F510} prevent committing .env to code: https://dotenvx.com/precommit","\u{1F510} prevent building .env in docker: https://dotenvx.com/prebuild","\u{1F4E1} add observability to secrets: https://dotenvx.com/ops","\u{1F465} sync secrets across teammates & machines: https://dotenvx.com/ops","\u{1F5C2}\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\u{1F504} add secrets lifecycle management: https://dotenvx.com/ops","\u{1F511} add access controls to secrets: https://dotenvx.com/ops","\u{1F6E0}\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function XDt(){return $xe[Math.floor(Math.random()*$xe.length)]}function db(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function ZDt(){return process.stdout.isTTY}function ekt(t){return ZDt()?`\x1B[2m${t}\x1B[0m`:t}var tkt=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function rkt(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=tkt.exec(r))!=null;){let i=n[1],s=n[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[i]=s}return e}function nkt(t){t=t||{};let e=Gxe(t);t.path=e;let r=ns.configDotenv(t);if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=Vxe(t).split(","),i=n.length,s;for(let o=0;o<i;o++)try{let a=n[o].trim(),u=skt(r,a);s=ns.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=i)throw a}return ns.parse(s)}function ikt(t){console.error(`[dotenv@${OZ}][WARN] ${t}`)}function fw(t){console.log(`[dotenv@${OZ}][DEBUG] ${t}`)}function Uxe(t){console.log(`[dotenv@${OZ}] ${t}`)}function Vxe(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function skt(t,e){let r;try{r=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}let n=r.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let i=r.searchParams.get("environment");if(!i){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let s=`DOTENV_VAULT_${i.toUpperCase()}`,o=t.parsed[s];if(!o){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:n}}function Gxe(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)TZ.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=sD.resolve(process.cwd(),".env.vault");return TZ.existsSync(e)?e:null}function Kxe(t){return t[0]==="~"?sD.join(JDt.homedir(),t.slice(1)):t}function okt(t){let e=db(process.env.DOTENV_CONFIG_DEBUG||t&&t.debug),r=db(process.env.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!r)&&Uxe("Loading env from encrypted .env.vault");let n=ns._parseVault(t),i=process.env;return t&&t.processEnv!=null&&(i=t.processEnv),ns.populate(i,n,t),{parsed:n}}function akt(t){let e=sD.resolve(process.cwd(),".env"),r="utf8",n=process.env;t&&t.processEnv!=null&&(n=t.processEnv);let i=db(n.DOTENV_CONFIG_DEBUG||t&&t.debug),s=db(n.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?r=t.encoding:i&&fw("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Kxe(t.path)];else{o=[];for(let l of t.path)o.push(Kxe(l))}let a,u={};for(let l of o)try{let d=ns.parse(TZ.readFileSync(l,{encoding:r}));ns.populate(u,d,t)}catch(d){i&&fw(`Failed to load ${l} ${d.message}`),a=d}let c=ns.populate(n,u,t);if(i=db(n.DOTENV_CONFIG_DEBUG||i),s=db(n.DOTENV_CONFIG_QUIET||s),i||!s){let l=Object.keys(c).length,d=[];for(let p of o)try{let f=sD.relative(process.cwd(),p);d.push(f)}catch(f){i&&fw(`Failed to load ${p} ${f.message}`),a=f}Uxe(`injecting env (${l}) from ${d.join(",")} ${ekt(`-- tip: ${XDt()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function ukt(t){if(Vxe(t).length===0)return ns.configDotenv(t);let e=Gxe(t);return e?ns._configVault(t):(ikt(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),ns.configDotenv(t))}function ckt(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let o=YDt.createDecipheriv("aes-256-gcm",r,i);return o.setAuthTag(s),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function lkt(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override),s={};if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(i===!0&&(t[o]=e[o],s[o]=e[o]),n&&fw(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],s[o]=e[o]);return s}var ns={configDotenv:akt,_configVault:okt,_parseVault:nkt,config:ukt,decrypt:ckt,parse:rkt,populate:lkt};Ef.exports.configDotenv=ns.configDotenv;Ef.exports._configVault=ns._configVault;Ef.exports._parseVault=ns._parseVault;Ef.exports.config=ns.config;Ef.exports.decrypt=ns.decrypt;Ef.exports.parse=ns.parse;Ef.exports.populate=ns.populate;Ef.exports=ns});var zxe,dkt,As,hw=ce(()=>{"use strict";zxe=Ct(Hxe());zxe.default.config();dkt={PORT:process.env.PORT||8080,WHITELIST_ORIGINS:process.env.WHITELIST_ORIGINS,NODE_ENV:process.env.NODE_ENV,MONGO_URI:process.env.MONGO_URI,LOG_LEVEL:process.env.LOG_LEVEL||"info",AZURE_TENANT_ID:process.env.AZURE_TENANT_ID,AZURE_CLIENT_ID:process.env.AZURE_CLIENT_ID,ADMINA_API_CLIENT_ID:process.env.ADMINA_API_CLIENT_ID,defaultResLimit:20,defaultResOffset:0,AZURE_CLIENT_SECRETE:process.env.AZURE_CLIENT_SECRETE,AZURE_CLIENT_AUTHORITY:process.env.AZURE_CLIENT_AUTHORITY,LOGTAIL_SOURCE_TOKEN:process.env.LOGTAIL_SOURCE_TOKEN,LOG_TAIL_INGESTING_HOST:process.env.LOG_TAIL_INGESTING_HOST,GEMINI_API_KEY:process.env.GEMINI_API_KEY},As=dkt});var mw,Wxe,Jxe,xZ,IZ,Yxe,pkt,fkt,hkt,mkt,oD,RZ,qe,bf=ce(()=>{"use strict";mw=Ct(QOe()),Wxe=Ct(Bxe()),Jxe=Ct(Lxe());hw();({combine:xZ,timestamp:IZ,json:Yxe,errors:pkt,align:fkt,printf:hkt,colorize:mkt}=mw.default.format),oD=[],RZ=new Wxe.Logtail(As.LOGTAIL_SOURCE_TOKEN,{endpoint:`https://${As.LOG_TAIL_INGESTING_HOST}`});if(As.NODE_ENV==="local")oD.push(new mw.default.transports.Console({format:xZ(mkt({all:!0}),IZ({format:"YYYY-MM-DD hh:mm:ss A"}),fkt(),hkt(({timestamp:t,level:e,message:r,...n})=>{let i=Object.keys(n).length?`
${JSON.stringify(n)}`:"";return`${t} [${e}]: ${r}${i}`}))}));else{if(oD.push(new mw.default.transports.Console({format:xZ(IZ(),Yxe())})),!As.LOGTAIL_SOURCE_TOKEN||!As.LOG_TAIL_INGESTING_HOST)throw new Error("Logtail source token and ingesting host must be provided in the configuration");oD.push(new Jxe.LogtailTransport(RZ))}qe=mw.default.createLogger({level:As.LOG_LEVEL||"info",format:xZ(IZ(),pkt({stack:!0}),Yxe()),transports:oD,silent:As.NODE_ENV==="test"})});var Iy,aD=ce(()=>{"use strict";Iy=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(s=>JSON.stringify(s))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}});var me,sr,vc,DZ,yn,ja,Ry,pb,fb,hb,Sc,Dy,_f,Jr,yw,Qxe,Nh,mb,Ho,is,or,Kd,gw,Ew,ky,uD,Cn,yb,fu,gn=ce(()=>{"use strict";me={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},sr={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},vc=[me.OPENID_SCOPE,me.PROFILE_SCOPE,me.OFFLINE_ACCESS_SCOPE],DZ=[...vc,me.EMAIL_SCOPE],yn={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},ja={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Ry={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},pb={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},fb={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},hb={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Sc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Dy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},_f={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Jr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},yw="appmetadata",Qxe="client_info",Nh="1",mb={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ho={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},is={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},or={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Kd={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},gw={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ew={username:"username",password:"password"},ky={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},uD={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Cn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},yb=300,fu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"}});var cD,lD,Xxe=ce(()=>{"use strict";cD="unexpected_error",lD="post_request_failed"});var Zxe,ykt,ar,wc=ce(()=>{"use strict";gn();Xxe();Zxe={[cD]:"Unexpected error in authentication.",[lD]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},ykt={unexpectedError:{code:cD,desc:Zxe[cD]},postRequestFailed:{code:lD,desc:Zxe[lD]}},ar=class t extends Error{constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||me.EMPTY_STRING,this.errorMessage=r||me.EMPTY_STRING,this.subError=n||me.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}});var ss={};da(ss,{authTimeNotFound:()=>vf,authorizationCodeMissingFromServerResponse:()=>zy,bindingKeyNotRemoved:()=>Iw,cannotAppendScopeSet:()=>Vy,cannotRemoveEmptyScope:()=>Uy,clientInfoDecodingError:()=>Fh,clientInfoEmptyError:()=>My,deviceCodeExpired:()=>Sw,deviceCodePollingCancelled:()=>vw,deviceCodeUnknownError:()=>ww,emptyInputScopeSet:()=>Lh,endSessionEndpointNotSupported:()=>Wy,endpointResolutionError:()=>zo,hashNotDeserialized:()=>By,invalidAssertion:()=>Tw,invalidCacheEnvironment:()=>wf,invalidCacheRecord:()=>Gy,invalidClientCredential:()=>Ow,invalidState:()=>jl,keyIdMissing:()=>Jy,maxAgeTranspired:()=>jy,methodNotImplemented:()=>Lt,missingTenantIdError:()=>kw,multipleMatchingAccounts:()=>_w,multipleMatchingAppMetadata:()=>$y,multipleMatchingTokens:()=>bw,nestedAppAuthBridgeDisabled:()=>Mw,networkError:()=>Ny,noAccountFound:()=>Aw,noAccountInSilentRequest:()=>Sf,noCryptoObject:()=>jh,noNetworkConnectivity:()=>Rw,nonceMismatch:()=>Ly,nullOrEmptyToken:()=>Py,openIdConfigError:()=>Fy,requestCannotBeMade:()=>Ky,stateMismatch:()=>qy,stateNotFound:()=>qh,tokenClaimsCnfRequiredForSignedJwt:()=>Hy,tokenParsingError:()=>Bh,tokenRefreshRequired:()=>Af,unexpectedCredentialType:()=>Cw,userCanceled:()=>Dw,userTimeoutReached:()=>xw});var Fh,My,Bh,Py,zo,Ny,Fy,By,jl,qy,qh,Ly,vf,jy,bw,_w,$y,Ky,Uy,Vy,Lh,vw,Sw,ww,Sf,Gy,wf,Aw,jh,Cw,Tw,Ow,Af,xw,Hy,zy,Iw,Wy,Jy,Rw,Dw,kw,Lt,Mw,Di=ce(()=>{"use strict";Fh="client_info_decoding_error",My="client_info_empty_error",Bh="token_parsing_error",Py="null_or_empty_token",zo="endpoints_resolution_error",Ny="network_error",Fy="openid_config_error",By="hash_not_deserialized",jl="invalid_state",qy="state_mismatch",qh="state_not_found",Ly="nonce_mismatch",vf="auth_time_not_found",jy="max_age_transpired",bw="multiple_matching_tokens",_w="multiple_matching_accounts",$y="multiple_matching_appMetadata",Ky="request_cannot_be_made",Uy="cannot_remove_empty_scope",Vy="cannot_append_scopeset",Lh="empty_input_scopeset",vw="device_code_polling_cancelled",Sw="device_code_expired",ww="device_code_unknown_error",Sf="no_account_in_silent_request",Gy="invalid_cache_record",wf="invalid_cache_environment",Aw="no_account_found",jh="no_crypto_object",Cw="unexpected_credential_type",Tw="invalid_assertion",Ow="invalid_client_credential",Af="token_refresh_required",xw="user_timeout_reached",Hy="token_claims_cnf_required_for_signedjwt",zy="authorization_code_missing_from_server_response",Iw="binding_key_not_removed",Wy="end_session_endpoint_not_supported",Jy="key_id_missing",Rw="no_network_connectivity",Dw="user_canceled",kw="missing_tenant_id_error",Lt="method_not_implemented",Mw="nested_app_auth_bridge_disabled"});function Ae(t,e){return new gb(t,e)}var It,gkt,gb,$i=ce(()=>{"use strict";wc();Di();It={[Fh]:"The client info could not be parsed/decoded correctly",[My]:"The client info was empty",[Bh]:"Token cannot be parsed",[Py]:"The token is null or empty",[zo]:"Endpoints cannot be resolved",[Ny]:"Network request failed",[Fy]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[By]:"The hash parameters could not be deserialized",[jl]:"State was not the expected format",[qy]:"State mismatch error",[qh]:"State not found",[Ly]:"Nonce mismatch error",[vf]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[jy]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[bw]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[_w]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[$y]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Ky]:"Token request cannot be made without authorization code or refresh token.",[Uy]:"Cannot remove null or empty scope from ScopeSet",[Vy]:"Cannot append ScopeSet",[Lh]:"Empty input ScopeSet cannot be processed",[vw]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Sw]:"Device code is expired.",[ww]:"Device code stopped polling for unknown reasons.",[Sf]:"Please pass an account object, silent flow is not supported without account information",[Gy]:"Cache record object was null or undefined.",[wf]:"Invalid environment when attempting to create cache entry",[Aw]:"No account found in cache for given key.",[jh]:"No crypto object detected.",[Cw]:"Unexpected credential type.",[Tw]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ow]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Af]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[xw]:"User defined timeout for device code polling reached",[Hy]:"Cannot generate a POP jwt if the token_claims are not populated",[zy]:"Server response does not contain an authorization code to proceed",[Iw]:"Could not remove the credential's binding key from storage.",[Wy]:"The provided authority does not support logout",[Jy]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Rw]:"No network connectivity. Check your internet connection.",[Dw]:"User cancelled the flow.",[kw]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Lt]:"This method has not been implemented",[Mw]:"The nested app auth bridge is disabled"},gkt={clientInfoDecodingError:{code:Fh,desc:It[Fh]},clientInfoEmptyError:{code:My,desc:It[My]},tokenParsingError:{code:Bh,desc:It[Bh]},nullOrEmptyToken:{code:Py,desc:It[Py]},endpointResolutionError:{code:zo,desc:It[zo]},networkError:{code:Ny,desc:It[Ny]},unableToGetOpenidConfigError:{code:Fy,desc:It[Fy]},hashNotDeserialized:{code:By,desc:It[By]},invalidStateError:{code:jl,desc:It[jl]},stateMismatchError:{code:qy,desc:It[qy]},stateNotFoundError:{code:qh,desc:It[qh]},nonceMismatchError:{code:Ly,desc:It[Ly]},authTimeNotFoundError:{code:vf,desc:It[vf]},maxAgeTranspired:{code:jy,desc:It[jy]},multipleMatchingTokens:{code:bw,desc:It[bw]},multipleMatchingAccounts:{code:_w,desc:It[_w]},multipleMatchingAppMetadata:{code:$y,desc:It[$y]},tokenRequestCannotBeMade:{code:Ky,desc:It[Ky]},removeEmptyScopeError:{code:Uy,desc:It[Uy]},appendScopeSetError:{code:Vy,desc:It[Vy]},emptyInputScopeSetError:{code:Lh,desc:It[Lh]},DeviceCodePollingCancelled:{code:vw,desc:It[vw]},DeviceCodeExpired:{code:Sw,desc:It[Sw]},DeviceCodeUnknownError:{code:ww,desc:It[ww]},NoAccountInSilentRequest:{code:Sf,desc:It[Sf]},invalidCacheRecord:{code:Gy,desc:It[Gy]},invalidCacheEnvironment:{code:wf,desc:It[wf]},noAccountFound:{code:Aw,desc:It[Aw]},noCryptoObj:{code:jh,desc:It[jh]},unexpectedCredentialType:{code:Cw,desc:It[Cw]},invalidAssertion:{code:Tw,desc:It[Tw]},invalidClientCredential:{code:Ow,desc:It[Ow]},tokenRefreshRequired:{code:Af,desc:It[Af]},userTimeoutReached:{code:xw,desc:It[xw]},tokenClaimsRequired:{code:Hy,desc:It[Hy]},noAuthorizationCodeFromServer:{code:zy,desc:It[zy]},bindingKeyNotRemovedError:{code:Iw,desc:It[Iw]},logoutNotSupported:{code:Wy,desc:It[Wy]},keyIdMissing:{code:Jy,desc:It[Jy]},noNetworkConnectivity:{code:Rw,desc:It[Rw]},userCanceledError:{code:Dw,desc:It[Dw]},missingTenantIdError:{code:kw,desc:It[kw]},nestedAppAuthBridgeDisabled:{code:Mw,desc:It[Mw]}},gb=class t extends ar{constructor(e,r){super(e,r?`${It[e]}: ${r}`:It[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}}});var kZ,eIe=ce(()=>{"use strict";$i();Di();kZ={createNewGuid:()=>{throw Ae(Lt)},base64Decode:()=>{throw Ae(Lt)},base64Encode:()=>{throw Ae(Lt)},base64UrlEncode:()=>{throw Ae(Lt)},encodeKid:()=>{throw Ae(Lt)},async getPublicKeyThumbprint(){throw Ae(Lt)},async removeTokenBindingKey(){throw Ae(Lt)},async clearKeystore(){throw Ae(Lt)},async signJwt(){throw Ae(Lt)},async hashString(){throw Ae(Lt)}}});var ki,Cf,dD=ce(()=>{"use strict";gn();(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(ki||(ki={}));Cf=class t{constructor(e,r,n){this.level=ki.Info;let i=()=>{},s=e||t.createDefaultLoggerOptions();this.localCallback=s.loggerCallback||i,this.piiLoggingEnabled=s.piiLoggingEnabled||!1,this.level=typeof s.logLevel=="number"?s.logLevel:ki.Info,this.correlationId=s.correlationId||me.EMPTY_STRING,this.packageName=r||me.EMPTY_STRING,this.packageVersion=n||me.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ki.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let s=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ki[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,s,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:ki.Error,containsPii:!1,correlationId:r||me.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:ki.Error,containsPii:!0,correlationId:r||me.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:ki.Warning,containsPii:!1,correlationId:r||me.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:ki.Warning,containsPii:!0,correlationId:r||me.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:ki.Info,containsPii:!1,correlationId:r||me.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:ki.Info,containsPii:!0,correlationId:r||me.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:ki.Verbose,containsPii:!1,correlationId:r||me.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:ki.Verbose,containsPii:!0,correlationId:r||me.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:ki.Trace,containsPii:!1,correlationId:r||me.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:ki.Trace,containsPii:!0,correlationId:r||me.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}});var pD,Eb,fD=ce(()=>{"use strict";pD="@azure/msal-common",Eb="15.13.0"});var Yy,hD=ce(()=>{"use strict";Yy={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}});var bb,mD,_b,Tf,vb,Sb,Qy,wb,Ab,yD,Cb,Xy,Tb,Ob,$h,gD,ED,bD,_D,vD,SD,wD,AD,Kh=ce(()=>{"use strict";bb="redirect_uri_empty",mD="claims_request_parsing_error",_b="authority_uri_insecure",Tf="url_parse_error",vb="empty_url_error",Sb="empty_input_scopes_error",Qy="invalid_claims",wb="token_request_empty",Ab="logout_request_empty",yD="invalid_code_challenge_method",Cb="pkce_params_missing",Xy="invalid_cloud_discovery_metadata",Tb="invalid_authority_metadata",Ob="untrusted_authority",$h="missing_ssh_jwk",gD="missing_ssh_kid",ED="missing_nonce_authentication_header",bD="invalid_authentication_header",_D="cannot_set_OIDCOptions",vD="cannot_allow_platform_broker",SD="authority_mismatch",wD="invalid_request_method_for_EAR",AD="invalid_authorize_post_body_parameters"});function Tn(t){return new MZ(t)}var qn,Pvr,MZ,Zy=ce(()=>{"use strict";wc();Kh();qn={[bb]:"A redirect URI is required for all calls, and none has been set.",[mD]:"Could not parse the given claims request object.",[_b]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Tf]:"URL could not be parsed into appropriate segments.",[vb]:"URL was empty or null.",[Sb]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Qy]:"Given claims parameter must be a stringified JSON object.",[wb]:"Token request was empty and not found in cache.",[Ab]:"The logout request was null or undefined.",[yD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Cb]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Xy]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Tb]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ob]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[$h]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[gD]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[ED]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[bD]:"Invalid authentication header provided",[_D]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[vD]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[SD]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[AD]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[wD]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},Pvr={redirectUriNotSet:{code:bb,desc:qn[bb]},claimsRequestParsingError:{code:mD,desc:qn[mD]},authorityUriInsecure:{code:_b,desc:qn[_b]},urlParseError:{code:Tf,desc:qn[Tf]},urlEmptyError:{code:vb,desc:qn[vb]},emptyScopesError:{code:Sb,desc:qn[Sb]},invalidClaimsRequest:{code:Qy,desc:qn[Qy]},tokenRequestEmptyError:{code:wb,desc:qn[wb]},logoutRequestEmptyError:{code:Ab,desc:qn[Ab]},invalidCodeChallengeMethod:{code:yD,desc:qn[yD]},invalidCodeChallengeParams:{code:Cb,desc:qn[Cb]},invalidCloudDiscoveryMetadata:{code:Xy,desc:qn[Xy]},invalidAuthorityMetadata:{code:Tb,desc:qn[Tb]},untrustedAuthority:{code:Ob,desc:qn[Ob]},missingSshJwk:{code:$h,desc:qn[$h]},missingSshKid:{code:gD,desc:qn[gD]},missingNonceAuthenticationHeader:{code:ED,desc:qn[ED]},invalidAuthenticationHeader:{code:bD,desc:qn[bD]},cannotSetOIDCOptions:{code:_D,desc:qn[_D]},cannotAllowPlatformBroker:{code:vD,desc:qn[vD]},authorityMismatch:{code:SD,desc:qn[SD]},invalidAuthorizePostBodyParameters:{code:AD,desc:qn[AD]},invalidRequestMethodForEAR:{code:wD,desc:qn[wD]}},MZ=class t extends ar{constructor(e){super(e,qn[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}}});var En,Uh=ce(()=>{"use strict";En=class{static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s=>decodeURIComponent(s.replace(/\+/g," "));return n.forEach(s=>{if(s.trim()){let[o,a]=s.split(/=(.+)/g,2);o&&a&&(r[i(o)]=i(a))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}}});var Ki,Pw=ce(()=>{"use strict";Zy();Uh();$i();gn();Kh();Di();Ki=class t{constructor(e){let r=e?En.trimArrayEntries([...e]):[],n=r?En.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw Tn(Sb);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||me.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=e&&e.length>0?e:[...vc],n=new t(r);return n.containsOnlyOIDCScopes()?n.removeScope(me.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return DZ.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw Ae(Vy)}}removeScope(e){if(!e)throw Ae(Uy);this.scopes.delete(e.trim())}removeOIDCScopes(){DZ.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Ae(Lh);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw Ae(Lh);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):me.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}});function tIe(t,e){return!!t&&!!e&&t===e.split(".")[1]}function Nw(t,e,r,n){if(n){let{oid:i,sub:s,tid:o,name:a,tfp:u,acr:c,preferred_username:l,upn:d,login_hint:p}=n,f=o||u||c||"";return{tenantId:f,localAccountId:i||s||"",name:a,username:l||d||"",loginHint:p,isHomeTenant:tIe(f,t)}}else return{tenantId:r,localAccountId:e,username:"",isHomeTenant:tIe(r,t)}}function CD(t,e,r,n){let i=t;if(e){let{isHomeTenant:s,...o}=e;i={...t,...o}}if(r){let{isHomeTenant:s,...o}=Nw(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...o,idTokenClaims:r,idToken:n},i}return i}var TD=ce(()=>{"use strict";});var OD={};da(OD,{checkMaxAge:()=>Fw,extractTokenClaims:()=>Of,getJWSPayload:()=>rIe});function Of(t,e){let r=rIe(t);try{let n=e(r);return JSON.parse(n)}catch{throw Ae(Bh)}}function rIe(t){if(!t)throw Ae(Py);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw Ae(Bh);return r[2]}function Fw(t,e){if(e===0||Date.now()-3e5>t+e)throw Ae(jy)}var xb=ce(()=>{"use strict";$i();Di();});var Vh={};da(Vh,{getDeserializedResponse:()=>PZ,mapToQueryString:()=>Ud,normalizeUrlForComparison:()=>Ekt,stripLeadingHashOrQuery:()=>iIe});function nIe(t){if(!t)return t;let e=t.toLowerCase();return En.endsWith(e,"?")?e=e.slice(0,-1):En.endsWith(e,"?/")&&(e=e.slice(0,-2)),En.endsWith(e,"/")||(e+="/"),e}function iIe(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function PZ(t){if(!t||t.indexOf("=")<0)return null;try{let e=iIe(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw Ae(By)}return null}function Ud(t,e=!0,r){let n=new Array;return t.forEach((i,s)=>{!e&&r&&s in r?n.push(`${s}=${i}`):n.push(`${s}=${encodeURIComponent(i)}`)}),n.join("&")}function Ekt(t){if(!t)return t;let e=t.split("#")[0];try{let r=new URL(e),n=r.origin+r.pathname+r.search;return nIe(n)}catch{return nIe(e)}}var eg=ce(()=>{"use strict";$i();Uh();Di();});var wr,Gh=ce(()=>{"use strict";Zy();Uh();gn();eg();Kh();wr=class t{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Tn(vb);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return En.endsWith(r,"?")?r=r.slice(0,-1):En.endsWith(r,"?/")&&(r=r.slice(0,-2)),En.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Tn(Tf)}if(!e.HostNameAndPort||!e.PathSegments)throw Tn(Tf);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Tn(_b)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===ja.COMMON||n[0]===ja.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw Tn(Tf);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(s=>s&&s.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw Tn(Tf);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===me.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!PZ(e)}}});function aIe(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wr(n).getUrlComponents().HostNameAndPort;r=sIe(i,t.cloudDiscoveryMetadata?.metadata,Ho.CONFIG,e)||sIe(i,FZ.metadata,Ho.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}function sIe(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=Bw(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function uIe(t){return Bw(FZ.metadata,t)}function Bw(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}var oIe,NZ,FZ,BZ,qZ=ce(()=>{"use strict";Gh();gn();oIe={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},NZ=oIe.endpointMetadata,FZ=oIe.instanceDiscoveryMetadata,BZ=new Set;FZ.metadata.forEach(t=>{t.aliases.forEach(e=>{BZ.add(e)})})});var LZ,xD,cIe=ce(()=>{"use strict";LZ="cache_quota_exceeded",xD="cache_error_unknown"});function lIe(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new qw(LZ):new qw(t.name,t.message):new qw(xD)}var jZ,qw,dIe=ce(()=>{"use strict";wc();cIe();jZ={[LZ]:"Exceeded cache storage capacity.",[xD]:"Unexpected error occurred when using cache storage."},qw=class t extends ar{constructor(e,r){let n=r||(jZ[e]?jZ[e]:jZ[xD]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}});var Hh,Lw,$Z=ce(()=>{"use strict";gn();Pw();$i();TD();xb();fD();qZ();dIe();wc();Di();Hh=class{constructor(e,r,n,i,s){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(pD,Eb),this.staticAuthorityOptions=s,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){if(Object.keys(e).length===0||Object.values(e).every(i=>!i))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let n=this.getAllAccounts(e,r);return n.length>1?n.sort(s=>s.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,s){let o=null,a;if(s&&!this.tenantProfileMatchesFilter(n,s))return null;let u=this.getIdToken(e,i,r,n.tenantId);return u&&(a=Of(u.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,s))?null:(o=CD(e,n,a,u?.secret),o)}getTenantProfilesFromAccountEntity(e,r,n,i){let s=e.getAccountInfo(),o=s.tenantProfiles||new Map,a=this.getTokenKeys();if(n){let c=o.get(n);if(c)o=new Map([[n,c]]);else return[]}let u=[];return o.forEach(c=>{let l=this.getTenantedAccountInfoByFilter(s,a,c,r,i);l&&u.push(l)}),u}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw Ae(Gy);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof ar?i:lIe(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=Ki.fromString(e.target);i.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,n,!1))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,n)&&Ki.fromString(a.target).intersectingScopeSets(s)&&this.removeAccessToken(o,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(s=>{let o=this.getAccount(s,r);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},u=o.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,a));u&&u.length===0||i.push(o)}),i}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===or.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let s=this.getAppMetadata(i);s&&(e.environment&&!this.matchEnvironment(s,e.environment)||e.clientId&&!this.matchClientId(s,e.clientId)||(n[i]=s))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let s=this.getAuthorityMetadata(i);s&&s.aliases.indexOf(e)!==-1&&(n=s)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){this.removeAccountContext(e,r);let n=this.getAccountKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.filter(i).forEach(s=>{this.removeItem(s,r),this.performanceClient.incrementFields({accountsRemoved:1},r)})}removeAccountContext(e,r){let n=this.getTokenKeys(),i=s=>s.includes(e.homeAccountId)&&s.includes(e.environment);n.idToken.filter(i).forEach(s=>{this.removeIdToken(s,r)}),n.accessToken.filter(i).forEach(s=>{this.removeAccessToken(s,r)}),n.refreshToken.filter(i).forEach(s=>{this.removeRefreshToken(s,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==or.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}getIdToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getIdToken called");let o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jr.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(o,r,n),u=a.size;if(u<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(u>1){let c=a;if(!i){let l=new Map;a.forEach((p,f)=>{p.realm===e.tenantId&&l.set(f,p)});let d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;c=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((l,d)=>{this.removeIdToken(d,r)}),s&&r&&s.addFields({multiMatchedID:a.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,s=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,{clientId:this.clientId,...e}))return;let a=this.getIdTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&s.set(o,a)}),s}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let s=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",s);let o=Ki.createSearchScopes(r.scopes),a=r.authenticationScheme||or.BEARER,u=a&&a.toLowerCase()!==or.BEARER.toLowerCase()?Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Jr.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:i||e.tenantId,target:o,tokenType:a,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,c,!0)){let h=this.getAccessTokenCredential(f,s);h&&this.credentialMatchesFilter(h,c)&&d.push(h)}});let p=d.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",s),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",s),d.forEach(f=>{this.removeAccessToken(this.generateCredentialKey(f),s)}),this.performanceClient.addFields({multiMatchedAT:d.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",s),d[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let s=r.target.asArray();for(let o=0;o<s.length;o++){if(n&&!i.includes(s[o].toLowerCase()))return!1;if(!n&&i.includes(s[o].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,e,!0))return;let o=this.getAccessTokenCredential(s,r);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,r,n,i,s){this.commonLogger.trace("CacheManager - getRefreshToken called");let o=r?Nh:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Jr.REFRESH_TOKEN,clientId:this.clientId,familyId:o},u=i&&i.refreshToken||this.getTokenKeys().refreshToken,c=[];u.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){let p=this.getRefreshTokenCredential(d,n);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});let l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&s&&n&&s.addFields({multiMatchedRT:l},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(o=>n[o]),s=i.length;if(s<1)return null;if(s>1)throw Ae($y);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===Nh)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=aIe(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==Jr.ACCESS_TOKEN&&e.credentialType!==Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Ki.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(yw)!==-1}isAuthorityMetadata(e){return e.indexOf(mb.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${mb.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},Lw=class extends Hh{async setAccount(){throw Ae(Lt)}getAccount(){throw Ae(Lt)}async setIdTokenCredential(){throw Ae(Lt)}getIdTokenCredential(){throw Ae(Lt)}async setAccessTokenCredential(){throw Ae(Lt)}getAccessTokenCredential(){throw Ae(Lt)}async setRefreshTokenCredential(){throw Ae(Lt)}getRefreshTokenCredential(){throw Ae(Lt)}setAppMetadata(){throw Ae(Lt)}getAppMetadata(){throw Ae(Lt)}setServerTelemetry(){throw Ae(Lt)}getServerTelemetry(){throw Ae(Lt)}setAuthorityMetadata(){throw Ae(Lt)}getAuthorityMetadata(){throw Ae(Lt)}getAuthorityMetadataKeys(){throw Ae(Lt)}setThrottlingCache(){throw Ae(Lt)}getThrottlingCache(){throw Ae(Lt)}removeItem(){throw Ae(Lt)}getKeys(){throw Ae(Lt)}getAccountKeys(){throw Ae(Lt)}getTokenKeys(){throw Ae(Lt)}generateCredentialKey(){throw Ae(Lt)}generateAccountKey(){throw Ae(Lt)}}});var Ac,jw=ce(()=>{"use strict";Ac={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"}});var ae,vSr,pIe,$l=ce(()=>{"use strict";ae={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},vSr=new Map([[ae.AcquireTokenByCode,"ATByCode"],[ae.AcquireTokenByRefreshToken,"ATByRT"],[ae.AcquireTokenSilent,"ATS"],[ae.AcquireTokenSilentAsync,"ATSAsync"],[ae.AcquireTokenPopup,"ATPopup"],[ae.AcquireTokenRedirect,"ATRedirect"],[ae.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[ae.CryptoOptsSignJwt,"CryptoSignJwt"],[ae.SilentCacheClientAcquireToken,"SltCacheClientAT"],[ae.SilentIframeClientAcquireToken,"SltIframeClientAT"],[ae.SilentRefreshClientAcquireToken,"SltRClientAT"],[ae.SsoSilent,"SsoSlt"],[ae.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[ae.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[ae.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[ae.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[ae.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[ae.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[ae.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[ae.BrokerHandhshake,"BrokerHandshake"],[ae.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[ae.AcquireTokenByBroker,"ATByBroker"],[ae.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[ae.RefreshTokenClientAcquireToken,"RTClientAT"],[ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[ae.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[ae.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[ae.AcquireTokenFromCache,"ATFromCache"],[ae.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[ae.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[ae.AcquireTokenBySilentIframe,"ATBySltIframe"],[ae.InitializeBaseRequest,"InitBaseReq"],[ae.InitializeSilentRequest,"InitSltReq"],[ae.InitializeClientApplication,"InitClientApplication"],[ae.InitializeCache,"InitCache"],[ae.ImportExistingCache,"importCache"],[ae.SetUserData,"setUserData"],[ae.LocalStorageUpdated,"localStorageUpdated"],[ae.SilentIframeClientTokenHelper,"SIClientTHelper"],[ae.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[ae.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[ae.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[ae.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[ae.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[ae.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[ae.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[ae.GetAuthCodeUrl,"GetAuthCodeUrl"],[ae.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[ae.HandleCodeResponse,"HandleCodeResp"],[ae.HandleResponseEar,"HandleRespEar"],[ae.HandleResponseCode,"HandleRespCode"],[ae.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[ae.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[ae.AuthClientAcquireToken,"AuthClientAT"],[ae.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[ae.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[ae.PopTokenGenerateCnf,"PopTGenCnf"],[ae.PopTokenGenerateKid,"PopTGenKid"],[ae.HandleServerTokenResponse,"HandleServerTRes"],[ae.DeserializeResponse,"DeserializeRes"],[ae.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[ae.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[ae.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[ae.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[ae.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[ae.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[ae.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[ae.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[ae.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[ae.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[ae.AcquireTokenByCodeAsync,"ATByCodeAsync"],[ae.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[ae.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[ae.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[ae.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[ae.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[ae.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[ae.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[ae.NativeGenerateAuthResult,"NtvGenAuthRes"],[ae.RemoveHiddenIframe,"RemoveHiddenIframe"],[ae.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[ae.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[ae.GeneratePkceCodes,"GenPkceCodes"],[ae.GenerateCodeVerifier,"GenCodeVerifier"],[ae.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[ae.Sha256Digest,"Sha256Digest"],[ae.GetRandomValues,"GetRandomValues"],[ae.GenerateHKDF,"genHKDF"],[ae.GenerateBaseKey,"genBaseKey"],[ae.Base64Decode,"b64Decode"],[ae.UrlEncodeArr,"urlEncArr"],[ae.Encrypt,"encrypt"],[ae.Decrypt,"decrypt"],[ae.GenerateEarKey,"genEarKey"],[ae.DecryptEarResponse,"decryptEarResp"]]),pIe={NotStarted:0,InProgress:1,Completed:2}});var ID,tg,KZ=ce(()=>{"use strict";$l();ID=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},tg=class{generateId(){return"callback-id"}startMeasurement(e,r){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:pIe.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new ID}}startPerformanceMeasurement(){return new ID}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}});function fIe({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:s,cryptoInterface:o,clientCredentials:a,libraryInfo:u,telemetry:c,serverTelemetryManager:l,persistencePlugin:d,serializableCache:p}){let f={..._kt,...r};return{authOptions:Okt(t),systemOptions:{...bkt,...e},loggerOptions:f,cacheOptions:{...vkt,...n},storageInterface:i||new Lw(t.clientId,kZ,new Cf(f),new tg),networkInterface:s||Skt,cryptoInterface:o||kZ,clientCredentials:a||Akt,libraryInfo:{...wkt,...u},telemetry:{...Tkt,...c},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:p||null}}function Okt(t){return{clientCapabilities:[],azureCloudOptions:Ckt,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function RD(t){return t.authOptions.authority.options.protocolMode===Ac.OIDC}var bkt,_kt,vkt,Skt,wkt,Akt,Ckt,Tkt,DD=ce(()=>{"use strict";eIe();dD();gn();fD();hD();$Z();jw();$i();KZ();Di();bkt={tokenRenewalOffsetSeconds:yb,preventCorsPreflight:!1},_kt={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ki.Info,correlationId:me.EMPTY_STRING},vkt={claimsBasedCachingEnabled:!1},Skt={async sendGetRequestAsync(){throw Ae(Lt)},async sendPostRequestAsync(){throw Ae(Lt)}},wkt={sku:me.SKU,version:Eb,cpu:me.EMPTY_STRING,os:me.EMPTY_STRING},Akt={clientSecret:me.EMPTY_STRING,clientAssertion:void 0},Ckt={azureCloudInstance:Yy.None,tenant:`${me.DEFAULT_COMMON_TENANT}`},Tkt={application:{appName:"",appVersion:""}}});var Wo,$w=ce(()=>{"use strict";Wo={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"}});function Ib(t,e){if(!t)throw Ae(My);try{let r=e(t);return JSON.parse(r)}catch{throw Ae(Fh)}}function Vd(t){if(!t)throw Ae(Fh);let e=t.split(_f.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?me.EMPTY_STRING:e[1]}}var Rb=ce(()=>{"use strict";$i();gn();Di();});var BD={};da(BD,{ACCESS_TOKEN:()=>Rkt,BROKER_CLIENT_ID:()=>Kw,BROKER_REDIRECT_URI:()=>FD,CCS_HEADER:()=>qkt,CLAIMS:()=>HZ,CLIENT_ASSERTION:()=>yee,CLIENT_ASSERTION_TYPE:()=>gee,CLIENT_ID:()=>Gd,CLIENT_INFO:()=>Nkt,CLIENT_REQUEST_ID:()=>ree,CLIENT_SECRET:()=>mee,CODE:()=>XZ,CODE_CHALLENGE:()=>ZZ,CODE_CHALLENGE_METHOD:()=>eee,CODE_VERIFIER:()=>tee,DEVICE_CODE:()=>hee,DOMAIN_HINT:()=>Aee,EAR_JWE_CRYPTO:()=>Tee,EAR_JWK:()=>Cee,ERROR:()=>xkt,ERROR_DESCRIPTION:()=>Ikt,EXPIRES_IN:()=>kkt,FOCI:()=>Bkt,GRANT_TYPE:()=>GZ,ID_TOKEN:()=>Dkt,ID_TOKEN_HINT:()=>fee,INSTANCE_AWARE:()=>Db,LOGIN_HINT:()=>wee,LOGOUT_HINT:()=>vee,NATIVE_BROKER:()=>_ee,NONCE:()=>YZ,OBO_ASSERTION:()=>Eee,ON_BEHALF_OF:()=>Fkt,POST_LOGOUT_URI:()=>pee,PROMPT:()=>QZ,REDIRECT_URI:()=>kD,REFRESH_TOKEN:()=>WZ,REFRESH_TOKEN_EXPIRES_IN:()=>Mkt,REQUESTED_TOKEN_USE:()=>bee,REQ_CNF:()=>PD,RESPONSE_MODE:()=>VZ,RESPONSE_TYPE:()=>UZ,RETURN_SPA_CODE:()=>ND,SCOPE:()=>zZ,SESSION_STATE:()=>Pkt,SID:()=>See,STATE:()=>JZ,TOKEN_TYPE:()=>MD,X_APP_NAME:()=>lee,X_APP_VER:()=>dee,X_CLIENT_CPU:()=>oee,X_CLIENT_CURR_TELEM:()=>aee,X_CLIENT_EXTRA_SKU:()=>Lkt,X_CLIENT_LAST_TELEM:()=>uee,X_CLIENT_OS:()=>see,X_CLIENT_SKU:()=>nee,X_CLIENT_VER:()=>iee,X_MS_LIB_CAPABILITY:()=>cee});var Gd,kD,UZ,VZ,GZ,HZ,zZ,xkt,Ikt,Rkt,Dkt,WZ,kkt,Mkt,JZ,YZ,QZ,Pkt,Nkt,XZ,ZZ,eee,tee,ree,nee,iee,see,oee,aee,uee,cee,lee,dee,pee,fee,hee,mee,yee,gee,MD,PD,Eee,bee,Fkt,Bkt,qkt,ND,_ee,vee,See,wee,Aee,Lkt,Kw,FD,Db,Cee,Tee,kb=ce(()=>{"use strict";Gd="client_id",kD="redirect_uri",UZ="response_type",VZ="response_mode",GZ="grant_type",HZ="claims",zZ="scope",xkt="error",Ikt="error_description",Rkt="access_token",Dkt="id_token",WZ="refresh_token",kkt="expires_in",Mkt="refresh_token_expires_in",JZ="state",YZ="nonce",QZ="prompt",Pkt="session_state",Nkt="client_info",XZ="code",ZZ="code_challenge",eee="code_challenge_method",tee="code_verifier",ree="client-request-id",nee="x-client-SKU",iee="x-client-VER",see="x-client-OS",oee="x-client-CPU",aee="x-client-current-telemetry",uee="x-client-last-telemetry",cee="x-ms-lib-capability",lee="x-app-name",dee="x-app-ver",pee="post_logout_redirect_uri",fee="id_token_hint",hee="device_code",mee="client_secret",yee="client_assertion",gee="client_assertion_type",MD="token_type",PD="req_cnf",Eee="assertion",bee="requested_token_use",Fkt="on_behalf_of",Bkt="foci",qkt="X-AnchorMailbox",ND="return_spa_code",_ee="nativebroker",vee="logout_hint",See="sid",wee="login_hint",Aee="domain_hint",Lkt="x-client-xtra-sku",Kw="brk_client_id",FD="brk_redirect_uri",Db="instance_aware",Cee="ear_jwk",Tee="ear_jwe_crypto"});var lt={};da(lt,{addApplicationTelemetry:()=>Vw,addAuthorizationCode:()=>Mee,addBrokerParameters:()=>Rf,addCcsOid:()=>xf,addCcsUpn:()=>zh,addClaims:()=>og,addClientAssertion:()=>zw,addClientAssertionType:()=>Ww,addClientCapabilitiesToClaims:()=>hIe,addClientId:()=>ig,addClientInfo:()=>ug,addClientSecret:()=>Hw,addCodeChallengeParams:()=>Kkt,addCodeVerifier:()=>Nee,addCorrelationId:()=>ag,addDeviceCode:()=>Ukt,addDomainHint:()=>Ree,addEARParameters:()=>Wkt,addExtraQueryParameters:()=>If,addGrantType:()=>Jw,addIdTokenHint:()=>Iee,addInstanceAware:()=>Yw,addLibraryInfo:()=>Uw,addLoginHint:()=>Mb,addLogoutHint:()=>Fee,addNativeBroker:()=>$kt,addNonce:()=>kee,addOboAssertion:()=>Vkt,addPassword:()=>zkt,addPopToken:()=>Qw,addPostBodyParameters:()=>Jkt,addPostLogoutRedirectUri:()=>xee,addPrompt:()=>Dee,addRedirectUri:()=>sg,addRefreshToken:()=>Pee,addRequestTokenUse:()=>Gkt,addResponseMode:()=>Oee,addResponseType:()=>jkt,addScopes:()=>ng,addServerTelemetry:()=>Zw,addSid:()=>qD,addSshJwk:()=>Xw,addState:()=>Gw,addThrottling:()=>e9,addUsername:()=>Hkt,instrumentBrokerParams:()=>rg});function rg(t,e,r){if(!e)return;let n=t.get(Gd);n&&t.has(Kw)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(kD)},e)}function jkt(t,e){t.set(UZ,e)}function Oee(t,e){t.set(VZ,e||hb.QUERY)}function $kt(t){t.set(_ee,"1")}function ng(t,e,r=!0,n=vc){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],s=new Ki(i);t.set(zZ,s.printScopes())}function ig(t,e){t.set(Gd,e)}function sg(t,e){t.set(kD,e)}function xee(t,e){t.set(pee,e)}function Iee(t,e){t.set(fee,e)}function Ree(t,e){t.set(Aee,e)}function Mb(t,e){t.set(wee,e)}function zh(t,e){t.set(yn.CCS_HEADER,`UPN:${e}`)}function xf(t,e){t.set(yn.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function qD(t,e){t.set("sid",e)}function og(t,e,r){let n=hIe(e,r);try{JSON.parse(n)}catch{throw Tn(Qy)}t.set(HZ,n)}function ag(t,e){t.set(ree,e)}function Uw(t,e){t.set(nee,e.sku),t.set(iee,e.version),e.os&&t.set(see,e.os),e.cpu&&t.set(oee,e.cpu)}function Vw(t,e){e?.appName&&t.set(lee,e.appName),e?.appVersion&&t.set(dee,e.appVersion)}function Dee(t,e){t.set(QZ,e)}function Gw(t,e){e&&t.set(JZ,e)}function kee(t,e){t.set(YZ,e)}function Kkt(t,e,r){if(e&&r)t.set(ZZ,e),t.set(eee,r);else throw Tn(Cb)}function Mee(t,e){t.set(XZ,e)}function Ukt(t,e){t.set(hee,e)}function Pee(t,e){t.set(WZ,e)}function Nee(t,e){t.set(tee,e)}function Hw(t,e){t.set(mee,e)}function zw(t,e){e&&t.set(yee,e)}function Ww(t,e){e&&t.set(gee,e)}function Vkt(t,e){t.set(Eee,e)}function Gkt(t,e){t.set(bee,e)}function Jw(t,e){t.set(GZ,e)}function ug(t){t.set(Qxe,"1")}function Yw(t){t.has(Db)||t.set(Db,"true")}function If(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}function hIe(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw Tn(Qy)}return e&&e.length>0&&(r.hasOwnProperty(Ry.ACCESS_TOKEN)||(r[Ry.ACCESS_TOKEN]={}),r[Ry.ACCESS_TOKEN][Ry.XMS_CC]={values:e}),JSON.stringify(r)}function Hkt(t,e){t.set(Ew.username,e)}function zkt(t,e){t.set(Ew.password,e)}function Qw(t,e){e&&(t.set(MD,or.POP),t.set(PD,e))}function Xw(t,e){e&&(t.set(MD,or.SSH),t.set(PD,e))}function Zw(t,e){t.set(aee,e.generateCurrentRequestHeaderValue()),t.set(uee,e.generateLastRequestHeaderValue())}function e9(t){t.set(cee,Kd.X_MS_LIB_CAPABILITY_VALUE)}function Fee(t,e){t.set(vee,e)}function Rf(t,e,r){t.has(Kw)||t.set(Kw,e),t.has(FD)||t.set(FD,r)}function Wkt(t,e){t.set(Cee,encodeURIComponent(e)),t.set(Tee,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Jkt(t,e){Object.entries(e).forEach(([r,n])=>{n&&t.set(r,n)})}var Pb=ce(()=>{"use strict";gn();kb();Pw();Zy();Kh();});var Cc,Bee=ce(()=>{"use strict";Cc={Default:0,Adfs:1,Dsts:2,Ciam:3}});function mIe(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}var yIe=ce(()=>{"use strict";});function gIe(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}var EIe=ce(()=>{"use strict";});function bIe(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}var _Ie=ce(()=>{"use strict";});var vIe,hr,Df=ce(()=>{"use strict";vIe=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}try{let a=t(...s);return o?.end({success:!0}),r.trace(`Returning result from ${e}`),a}catch(a){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a}},hr=(t,e,r,n,i)=>(...s)=>{r.trace(`Executing function ${e}`);let o=n?.startMeasurement(e,i);if(i){let a=e+"CallCount";n?.incrementFields({[a]:1},i)}return n?.setPreQueueTime(e,i),t(...s).then(a=>(r.trace(`Returning result from ${e}`),o?.end({success:!0}),a)).catch(a=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(a))}catch{r.trace("Unable to print error message.")}throw o?.end({success:!1},a),a})}});var t9,SIe=ce(()=>{"use strict";gn();$l();Df();t9=class t{constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=ky.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let s=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(me.IMDS_VERSION,i);if(s.status===sr.SUCCESS&&(n=s.body,r.region_source=ky.IMDS),s.status===sr.BAD_REQUEST){let o=await hr(this.getCurrentVersion.bind(this),ae.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!o)return r.region_source=ky.FAILED_AUTO_DETECTION,null;let a=await hr(this.getRegionFromIMDS.bind(this),ae.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(o,i);a.status===sr.SUCCESS&&(n=a.body,r.region_source=ky.IMDS)}}catch{return r.region_source=ky.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=ky.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${me.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,me.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(ae.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${me.IMDS_ENDPOINT}?format=json`,e);return r.status===sr.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};t9.IMDS_OPTIONS={headers:{Metadata:"true"}}});var Cs={};da(Cs,{delay:()=>Xkt,isCacheExpired:()=>Qkt,isTokenExpired:()=>Nb,nowSeconds:()=>hu,toDateFromSeconds:()=>r9,toSecondsFromDate:()=>Ykt,wasClockTurnedBack:()=>qee});function hu(){return Math.round(new Date().getTime()/1e3)}function Ykt(t){return t.getTime()/1e3}function r9(t){return t?new Date(Number(t)*1e3):new Date}function Nb(t,e){let r=Number(t)||0;return hu()+e>r}function Qkt(t,e){let r=Number(t)+e*24*60*60*1e3;return Date.now()>r}function qee(t){return Number(t)>hu()}function Xkt(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}var Wh=ce(()=>{"use strict";});var Jo={};da(Jo,{createAccessTokenEntity:()=>jee,createIdTokenEntity:()=>Lee,createRefreshTokenEntity:()=>$ee,generateAppMetadataKey:()=>iMt,generateAuthorityMetadataExpiresAt:()=>jD,isAccessTokenEntity:()=>Zkt,isAppMetadataEntity:()=>sMt,isAuthorityMetadataEntity:()=>oMt,isAuthorityMetadataExpired:()=>$D,isCredentialEntity:()=>LD,isIdTokenEntity:()=>eMt,isRefreshTokenEntity:()=>tMt,isServerTelemetryEntity:()=>rMt,isThrottlingEntity:()=>nMt,updateAuthorityEndpointMetadata:()=>Fb,updateCloudDiscoveryMetadata:()=>n9});function Lee(t,e,r,n,i){return{credentialType:Jr.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i,lastUpdatedAt:Date.now().toString()}}function jee(t,e,r,n,i,s,o,a,u,c,l,d,p,f,h){let g={homeAccountId:t,credentialType:Jr.ACCESS_TOKEN,secret:r,cachedAt:hu().toString(),expiresOn:o.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:n,realm:i,target:s,tokenType:l||or.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(g.userAssertionHash=d),c&&(g.refreshOn=c.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=h),g.tokenType?.toLowerCase()!==or.BEARER.toLowerCase())switch(g.credentialType=Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case or.POP:let _=Of(r,u);if(!_?.cnf?.kid)throw Ae(Hy);g.keyId=_.cnf.kid;break;case or.SSH:g.keyId=p}return g}function $ee(t,e,r,n,i,s,o){let a={credentialType:Jr.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return s&&(a.userAssertionHash=s),i&&(a.familyId=i),o&&(a.expiresOn=o.toString()),a}function LD(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function Zkt(t){return t?LD(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===Jr.ACCESS_TOKEN||t.credentialType===Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function eMt(t){return t?LD(t)&&t.hasOwnProperty("realm")&&t.credentialType===Jr.ID_TOKEN:!1}function tMt(t){return t?LD(t)&&t.credentialType===Jr.REFRESH_TOKEN:!1}function rMt(t,e){let r=t.indexOf(is.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}function nMt(t,e){let r=!1;t&&(r=t.indexOf(Kd.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}function iMt({environment:t,clientId:e}){return[yw,t,e].join(_f.CACHE_KEY_SEPARATOR).toLowerCase()}function sMt(t,e){return e?t.indexOf(yw)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function oMt(t,e){return e?t.indexOf(mb.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function jD(){return hu()+mb.REFRESH_TIME_SECONDS}function Fb(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}function n9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}function $D(t){return t.expiresAt<=hu()}var KD=ce(()=>{"use strict";xb();$i();gn();Wh();Di();});function wIe(t){let n=new wr(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case ja.COMMON:case ja.ORGANIZATIONS:case ja.CONSUMERS:return;default:return n}}function UD(t){return t.endsWith(me.FORWARD_SLASH)?t:`${t}${me.FORWARD_SLASH}`}function Kee(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw Tn(Xy)}return{canonicalAuthority:t.authority?UD(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}var kf,VD=ce(()=>{"use strict";Bee();yIe();Gh();$i();gn();qZ();Zy();jw();hD();EIe();_Ie();SIe();wc();$l();Df();KD();Di();Kh();kf=class t{constructor(e,r,n,i,s,o,a,u){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=s,this.performanceClient=a,this.correlationId=o,this.managedIdentity=u||!1,this.regionDiscovery=new t9(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(me.CIAM_AUTH_URL))return Cc.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case me.ADFS:return Cc.Adfs;case me.DSTS:return Cc.Dsts}return Cc.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wr(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ae(zo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ae(zo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ae(zo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ae(Wy);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ae(zo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ae(zo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ae(zo)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Cc.Default&&this.protocolMode!==Ac.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wr(this.metadata.canonical_authority).getUrlComponents(),s=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,u)=>{let c=s[u];if(u===0&&this.canReplaceTenant(i)){let l=new wr(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==l&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${l}`),c=l)}a!==c&&(r=r.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Cc.Adfs||this.protocolMode===Ac.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(ae.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await hr(this.updateCloudDiscoveryMetadata.bind(this),ae.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await hr(this.updateEndpointMetadata.bind(this),ae.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:jD(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Ho.CACHE&&n?.source!==Ho.CACHE&&(e.expiresAt=jD(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Ho.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);Fb(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await hr(this.getEndpointMetadataFromNetwork.bind(this),ae.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await hr(this.updateMetadataWithRegionalInformation.bind(this),ae.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),Fb(e,n,!0),Ho.NETWORK;throw Ae(Fy,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),Fb(e,r,!1),{source:Ho.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return Fb(e,i,!1),{source:Ho.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=$D(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ho.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wr(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Tn(Tb)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return mIe(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in NZ?NZ[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==me.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=uD.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await hr(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ae.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=uD.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=uD.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ae.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await hr(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return n9(e,n,!0),Ho.NETWORK;throw Tn(Ob)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||me.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||me.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||me.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),n9(e,r,!1),Ho.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=uIe(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),n9(e,i,!1),Ho.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=$D(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ho.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Cc.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=Bw(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Tn(Xy)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ae.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${me.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),s,o;if(gIe(i.body))s=i.body,o=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(bIe(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===me.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Bw(o,this.hostnameAndPort)}catch(i){if(i instanceof ar)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wr.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Yy.None){let i=r.tenant?r.tenant:me.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return me.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ae(zo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return BZ.has(e)}static isPublicCloudAuthority(e){return me.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wr(e);i.validateAsUri();let s=i.getUrlComponents(),o=`${r}.${s.HostNameAndPort}`;this.isPublicCloudAuthority(s.HostNameAndPort)&&(o=`${r}.${me.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=wr.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wr(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(me.CIAM_AUTH_URL)){let s=i.HostNameAndPort.split(".")[0];r=`${r}${s}${me.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};kf.reservedTenantDomains=new Set(["{tenant}","{tenantid}",ja.COMMON,ja.CONSUMERS,ja.ORGANIZATIONS])});var GD={};da(GD,{createDiscoveredInstance:()=>Uee});async function Uee(t,e,r,n,i,s,o){o?.addQueueMeasurement(ae.AuthorityFactoryCreateDiscoveredInstance,s);let a=kf.transformCIAMAuthority(UD(t)),u=new kf(a,e,r,n,i,s,o);try{return await hr(u.resolveEndpointsAsync.bind(u),ae.AuthorityResolveEndpointsAsync,i,o,s)(),u}catch{throw Ae(zo)}}var Vee=ce(()=>{"use strict";VD();$i();$l();Df();Di();});var Hd,i9=ce(()=>{"use strict";wc();Hd=class t extends ar{constructor(e,r,n,i,s){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=s,Object.setPrototypeOf(this,t.prototype)}}});function Bb(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var HD=ce(()=>{"use strict";});var s9,AIe=ce(()=>{"use strict";gn();i9();HD();s9=class t{static generateThrottlingStorageKey(e){return`${Kd.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),s=e.getThrottlingCache(i);if(s){if(s.throttleTime<Date.now()){e.removeItem(i,n);return}throw new Hd(s.errorCodes?.join(" ")||me.EMPTY_STRING,s.errorMessage,s.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let s={throttleTime:t.calculateThrottleTime(parseInt(n.headers[yn.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),s,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(yn.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||Kd.DEFAULT_THROTTLE_TIME_SECONDS),n+Kd.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let s=Bb(r,n,i),o=this.generateThrottlingStorageKey(s);e.removeItem(o,n.correlationId)}}});var zD,CIe=ce(()=>{"use strict";wc();zD=class t extends ar{constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}}});var Yo,o9=ce(()=>{"use strict";DD();dD();gn();fD();$w();Rb();Pb();eg();Vee();$l();AIe();wc();$i();CIe();Df();Di();Yo=class{constructor(e,r){this.config=fIe(e),this.logger=new Cf(this.config.loggerOptions,pD,Eb),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[yn.CONTENT_TYPE]=me.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Wo.HOME_ACCOUNT_ID:try{let n=Vd(e.credential);r[yn.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Wo.UPN:r[yn.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,s,o){o&&this.performanceClient?.addQueueMeasurement(o,s);let a=await this.sendPostRequest(i,e,{body:r,headers:n},s);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,r,n,i){s9.preProcess(this.cacheManager,e,i);let s;try{s=await hr(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ae.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let o=s.headers||{};this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:o[yn.X_MS_HTTP_VERSION]||"",requestId:o[yn.X_MS_REQUEST_ID]||""},i)}catch(o){if(o instanceof zD){let a=o.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[yn.X_MS_HTTP_VERSION]||"",requestId:a[yn.X_MS_REQUEST_ID]||"",contentTypeHeader:a[yn.CONTENT_TYPE]||void 0,contentLengthHeader:a[yn.CONTENT_LENGTH]||void 0,httpStatus:o.httpStatus},i),o.error}throw o instanceof ar?o:Ae(Ny)}return s9.postProcess(this.cacheManager,e,s,i),s}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(ae.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await Uee(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&Rf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&If(r,e.tokenQueryParameters),ag(r,e.correlationId),rg(r,e.correlationId,this.performanceClient),Ud(r)}}});function WD(t){return t&&(t.tid||t.tfp||t.acr)||null}var Gee=ce(()=>{"use strict";});var Kl,Hee=ce(()=>{"use strict";gn();Rb();TD();$i();Bee();Gee();jw();Di();Kl=class t{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,r,n){let i=new t;r.authorityType===Cc.Adfs?i.authorityType=Dy.ADFS_ACCOUNT_TYPE:r.protocolMode===Ac.OIDC?i.authorityType=Dy.GENERIC_ACCOUNT_TYPE:i.authorityType=Dy.MSSTS_ACCOUNT_TYPE;let s;e.clientInfo&&n&&(s=Ib(e.clientInfo,n),s.xms_tdbr&&(i.dataBoundary=s.xms_tdbr==="EU"?"EU":"None")),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let o=e.environment||r&&r.getPreferredCache();if(!o)throw Ae(wf);i.environment=o,i.realm=s?.utid||WD(e.idTokenClaims)||"",i.localAccountId=s?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,u=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=a||u||"",i.loginHint=e.idTokenClaims?.login_hint,i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let c=Nw(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[c]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||Dy.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.loginHint=e.loginHint,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i.dataBoundary=e.dataBoundary,i}static generateHomeAccountId(e,r,n,i,s){if(!(r===Cc.Adfs||r===Cc.Dsts)){if(e)try{let o=Ib(e,i.base64Decode);if(o.uid&&o.utid)return`${o.uid}.${o.utid}`}catch{}n.warning("No client info in response")}return s?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let s=e.idTokenClaims||{},o=r.idTokenClaims||{};i=s.iat===o.iat&&s.nonce===o.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.loginHint===r.loginHint&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}}});var cg,JD,YD,zee,TIe,OIe,xIe,lg,Wee=ce(()=>{"use strict";cg="no_tokens_found",JD="native_account_unavailable",YD="refresh_token_expired",zee="ux_not_allowed",TIe="interaction_required",OIe="consent_required",xIe="login_required",lg="bad_token"});function XD(t,e,r){let n=!!t&&IIe.indexOf(t)>-1,i=!!r&&aMt.indexOf(r)>-1,s=!!e&&IIe.some(o=>e.indexOf(o)>-1);return n||s||i}function Jee(t){return new zd(t,QD[t])}var IIe,aMt,QD,y9r,zd,ZD=ce(()=>{"use strict";gn();wc();Wee();IIe=[TIe,OIe,xIe,lg,zee],aMt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],QD={[cg]:"No refresh token found in the cache. Please sign-in.",[JD]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[YD]:"Refresh token has expired.",[lg]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[zee]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},y9r={noTokensFoundError:{code:cg,desc:QD[cg]},native_account_unavailable:{code:JD,desc:QD[JD]},bad_token:{code:lg,desc:QD[lg]}},zd=class t extends ar{constructor(e,r,n,i,s,o,a,u){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||me.EMPTY_STRING,this.traceId=s||me.EMPTY_STRING,this.correlationId=o||me.EMPTY_STRING,this.claims=a||me.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=u}}});var ek,RIe=ce(()=>{"use strict";gn();$i();Di();ek=class t{static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${me.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw Ae(jh);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw Ae(jh);if(!r)throw Ae(jl);try{let n=r.split(me.RESOURCE_DELIM),i=n[0],s=n.length>1?n.slice(1).join(me.RESOURCE_DELIM):me.EMPTY_STRING,o=e.base64Decode(i),a=JSON.parse(o);return{userRequestState:s||me.EMPTY_STRING,libraryState:a}}catch{throw Ae(jl)}}}});var uMt,Jh,tk=ce(()=>{"use strict";Wh();Gh();$l();Df();uMt={SW:"sw"},Jh=class{constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateCnf,e.correlationId);let n=await hr(this.generateKid.bind(this),ae.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(ae.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:uMt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:s,resourceRequestUri:o,shrClaims:a,shrNonce:u,shrOptions:c}=n,d=(o?new wr(o):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:hu(),m:s?.toUpperCase(),u:d?.HostNameAndPort,nonce:u||this.cryptoUtils.createNewGuid(),p:d?.AbsolutePath,q:d?.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...i},r,c,n.correlationId)}}});var Ul,Yee=ce(()=>{"use strict";Ul=class{constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}});function DIe(t,e,r,n,i,s,o,a,u,c,l,d){d?.verbose("setCachedAccount called");let f=t.getAccountKeys().find(w=>w.startsWith(r)),h=null;f&&(h=t.getAccount(f,i));let g=h||Kl.createAccount({homeAccountId:r,idTokenClaims:s,clientInfo:o,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,n),_=g.tenantProfiles||[],S=u||g.realm;if(S&&!_.find(w=>w.tenantId===S)){let w=Nw(r,g.localAccountId,S,s);_.push(w)}return g.tenantProfiles=_,g}var os,a9=ce(()=>{"use strict";$i();i9();Pw();Hee();ZD();RIe();gn();tk();Yee();$l();xb();Gee();TD();KD();Wh();Di();os=class t{constructor(e,r,n,i,s,o,a){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=s,this.persistencePlugin=o,this.performanceClient=a}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||me.NOT_AVAILABLE} - Timestamp: ${e.timestamp||me.NOT_AVAILABLE} - Description: ${e.error_description||me.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||me.NOT_AVAILABLE} - Trace ID: ${e.trace_id||me.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,s=new Hd(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=sr.SERVER_ERROR_RANGE_START&&e.status<=sr.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(r&&e.status&&e.status>=sr.CLIENT_ERROR_RANGE_START&&e.status<=sr.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw XD(e.error,e.error_description,e.suberror)?new zd(e.error,e.error_description,e.suberror,e.timestamp||me.EMPTY_STRING,e.trace_id||me.EMPTY_STRING,e.correlation_id||me.EMPTY_STRING,e.claims||me.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,r,n,i,s,o,a,u,c){this.performanceClient?.addQueueMeasurement(ae.HandleServerTokenResponse,e.correlation_id);let l;if(e.id_token){if(l=Of(e.id_token||me.EMPTY_STRING,this.cryptoObj.base64Decode),s&&s.nonce&&l.nonce!==s.nonce)throw Ae(Ly);if(i.maxAge||i.maxAge===0){let h=l.auth_time;if(!h)throw Ae(vf);Fw(h,i.maxAge)}}this.homeAccountIdentifier=Kl.generateHomeAccountId(e.client_info||me.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,l);let d;s&&s.state&&(d=ek.parseRequestState(this.cryptoObj,s.state)),e.key_id=e.key_id||i.sshKid||void 0;let p=this.generateCacheRecord(e,r,n,i,l,o,s),f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new Ul(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!u&&p.account){let h=this.cacheStorage.generateAccountKey(p.account.getAccountInfo());if(!this.cacheStorage.getAccount(h,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,p,!1,i,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(p,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return t.generateAuthenticationResult(this.cryptoObj,r,p,!1,i,l,d,e,c)}generateCacheRecord(e,r,n,i,s,o,a){let u=r.getPreferredCache();if(!u)throw Ae(wf);let c=WD(s),l,d;e.id_token&&s&&(l=Lee(this.homeAccountIdentifier,u,e.id_token,this.clientId,c||""),d=DIe(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,s,e.client_info,u,c,a,void 0,this.logger));let p=null;if(e.access_token){let g=e.scope?Ki.fromString(e.scope):new Ki(i.scopes||[]),_=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,w=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=n+_,A=C+S,O=w&&w>0?n+w:void 0;p=jee(this.homeAccountIdentifier,u,e.access_token,this.clientId,c||r.tenant||"",g.printScopes(),C,A,this.cryptoObj.base64Decode,O,e.token_type,o,e.key_id,i.claims,i.requestedClaimsHash)}let f=null;if(e.refresh_token){let g;if(e.refresh_token_expires_in){let _=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;g=n+_}f=$ee(this.homeAccountIdentifier,u,e.refresh_token,this.clientId,e.foci,o,g)}let h=null;return e.foci&&(h={clientId:this.clientId,environment:u,familyId:e.foci}),{account:d,idToken:l,accessToken:p,refreshToken:f,appMetadata:h}}static async generateAuthenticationResult(e,r,n,i,s,o,a,u,c){let l=me.EMPTY_STRING,d=[],p=null,f,h,g=me.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===or.POP&&!s.popKid){let C=new Jh(e),{secret:A,keyId:O}=n.accessToken;if(!O)throw Ae(Jy);l=await C.signPopToken(A,O,s)}else l=n.accessToken.secret;d=Ki.fromString(n.accessToken.target).asArray(),p=r9(n.accessToken.expiresOn),f=r9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(h=r9(n.accessToken.refreshOn))}n.appMetadata&&(g=n.appMetadata.familyId===Nh?Nh:"");let _=o?.oid||o?.sub||"",S=o?.tid||"";u?.spa_accountid&&n.account&&(n.account.nativeAccountId=u?.spa_accountid);let w=n.account?CD(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:_,tenantId:S,scopes:d,account:w,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:l,fromCache:i,expiresOn:p,extExpiresOn:f,refreshOn:h,correlationId:s.correlationId,requestId:c||me.EMPTY_STRING,familyId:g,tokenType:n.accessToken?.tokenType||me.EMPTY_STRING,state:a?a.userRequestState:me.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||me.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||me.EMPTY_STRING,code:u?.spa_code,fromNativeBroker:!1}}}});async function Qo(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}var rk=ce(()=>{"use strict";});var u9,kIe=ce(()=>{"use strict";o9();Pb();eg();gn();kb();DD();a9();Uh();$i();Gh();tk();Wh();Rb();$w();Zy();$l();Df();rk();HD();Di();Kh();u9=class extends Yo{constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(ae.AuthClientAcquireToken,e.correlationId),!e.code)throw Ae(Ky);let n=hu(),i=await hr(this.executeTokenRequest.bind(this),ae.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=i.headers?.[yn.X_MS_REQUEST_ID],o=new os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(i.body),hr(o.handleServerTokenResponse.bind(o),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw Tn(Ab);let r=this.createLogoutUrlQueryString(e);return wr.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),o;if(r.clientInfo)try{let c=Ib(r.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${c.uid}${_f.CLIENT_INFO_SEPARATOR}${c.utid}`,type:Wo.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}let a=this.createTokenRequestHeaders(o||r.ccsCredential),u=Bb(this.config.authOptions.clientId,r);return hr(this.executePostToTokenEndpoint.bind(this),ae.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,s,a,u,r.correlationId,ae.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(ig(r,e.embeddedClientId||e.tokenBodyParameters?.[Gd]||this.config.authOptions.clientId),this.includeRedirectUri)sg(r,e.redirectUri);else if(!e.redirectUri)throw Tn(bb);if(ng(r,e.scopes,!0,this.oidcDefaultScopes),Mee(r,e.code),Uw(r,this.config.libraryInfo),Vw(r,this.config.telemetry.application),e9(r),this.serverTelemetryManager&&!RD(this.config)&&Zw(r,this.serverTelemetryManager),e.codeVerifier&&Nee(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&Hw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;zw(r,await Qo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ww(r,i.assertionType)}if(Jw(r,Sc.AUTHORIZATION_CODE_GRANT),ug(r),e.authenticationScheme===or.POP){let i=new Jh(this.cryptoUtils,this.performanceClient),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await hr(i.generateCnf.bind(i),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Qw(r,s)}else if(e.authenticationScheme===or.SSH)if(e.sshJwk)Xw(r,e.sshJwk);else throw Tn($h);(!En.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&og(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=Ib(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${_f.CLIENT_INFO_SEPARATOR}${i.utid}`,type:Wo.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case Wo.HOME_ACCOUNT_ID:try{let i=Vd(n.credential);xf(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case Wo.UPN:zh(r,n.credential);break}return e.embeddedClientId&&Rf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&If(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[ND])&&If(r,{[ND]:"1"}),rg(r,e.correlationId,this.performanceClient),Ud(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&xee(r,e.postLogoutRedirectUri),e.correlationId&&ag(r,e.correlationId),e.idTokenHint&&Iee(r,e.idTokenHint),e.state&&Gw(r,e.state),e.logoutHint&&Fee(r,e.logoutHint),e.extraQueryParameters&&If(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&Yw(r),Ud(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}});var cMt,dg,MIe=ce(()=>{"use strict";DD();o9();Pb();eg();gn();kb();a9();tk();Uh();Zy();$i();i9();Wh();Gh();$w();Rb();ZD();$l();Df();rk();HD();Wee();Kh();Di();cMt=300,dg=class extends Yo{constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireToken,e.correlationId);let r=hu(),n=await hr(this.executeTokenRequest.bind(this),ae.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[yn.X_MS_REQUEST_ID],s=new os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(n.body),hr(s.handleServerTokenResponse.bind(s),ae.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw Tn(wb);if(this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Ae(Sf);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof zd&&n.errorCode===cg,s=n instanceof Hd&&n.errorCode===gw.INVALID_GRANT_ERROR&&n.subError===gw.CLIENT_MISMATCH_ERROR;if(i||s)return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return hr(this.acquireTokenWithCachedRefreshToken.bind(this),ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=vIe(this.cacheManager.getRefreshToken.bind(this.cacheManager),ae.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw Jee(cg);if(n.expiresOn&&Nb(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||cMt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Jee(YD);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||or.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Wo.HOME_ACCOUNT_ID}};try{return await hr(this.acquireToken.bind(this),ae.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof zd&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),s.subError===lg)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let o=this.cacheManager.generateCredentialKey(n);this.cacheManager.removeRefreshToken(o,e.correlationId)}throw s}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wr.appendQueryString(r.tokenEndpoint,n),s=await hr(this.createTokenRequestBody.bind(this),ae.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),a=Bb(this.config.authOptions.clientId,e);return hr(this.executePostToTokenEndpoint.bind(this),ae.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,s,o,a,e.correlationId,ae.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ae.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(ig(r,e.embeddedClientId||e.tokenBodyParameters?.[Gd]||this.config.authOptions.clientId),e.redirectUri&&sg(r,e.redirectUri),ng(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Jw(r,Sc.REFRESH_TOKEN_GRANT),ug(r),Uw(r,this.config.libraryInfo),Vw(r,this.config.telemetry.application),e9(r),this.serverTelemetryManager&&!RD(this.config)&&Zw(r,this.serverTelemetryManager),Pee(r,e.refreshToken),this.config.clientCredentials.clientSecret&&Hw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;zw(r,await Qo(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Ww(r,n.assertionType)}if(e.authenticationScheme===or.POP){let n=new Jh(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await hr(n.generateCnf.bind(n),ae.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Qw(r,i)}else if(e.authenticationScheme===or.SSH)if(e.sshJwk)Xw(r,e.sshJwk);else throw Tn($h);if((!En.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&og(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Wo.HOME_ACCOUNT_ID:try{let n=Vd(e.ccsCredential.credential);xf(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case Wo.UPN:zh(r,e.ccsCredential.credential);break}return e.embeddedClientId&&Rf(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&If(r,e.tokenBodyParameters),rg(r,e.correlationId,this.performanceClient),Ud(r)}}});var c9,PIe=ce(()=>{"use strict";o9();Wh();$i();a9();gn();Uh();xb();$l();Df();VD();Di();c9=class extends Yo{constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientAcquireCachedToken,e.correlationId);let r=Cn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!En.isEmptyObj(e.claims))throw this.setCacheOutcome(Cn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Ae(Af);if(!e.account)throw Ae(Sf);let n=e.account.tenantId||wIe(e.authority),i=this.cacheManager.getTokenKeys(),s=this.cacheManager.getAccessToken(e.account,e,i,n);if(s){if(qee(s.cachedAt)||Nb(s.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Cn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Ae(Af);s.refreshOn&&Nb(s.refreshOn,0)&&(r=Cn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Cn.NO_CACHED_ACCESS_TOKEN,e.correlationId),Ae(Af);let o=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:s,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(o)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await hr(this.generateResultFromCacheRecord.bind(this),ae.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==Cn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(ae.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=Of(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw Ae(vf);Fw(i,r.maxAge)}return os.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}}});var l9={};da(l9,{getAuthorizationCodePayload:()=>pMt,getAuthorizeUrl:()=>dMt,getStandardAuthorizeRequestParameters:()=>lMt,validateAuthorizationResponse:()=>NIe});function lMt(t,e,r,n){let i=e.correlationId,s=new Map;ig(s,e.embeddedClientId||e.extraQueryParameters?.[Gd]||t.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(ng(s,o,!0,t.authority.options.OIDCOptions?.defaultScopes),sg(s,e.redirectUri),ag(s,i),Oee(s,e.responseMode),ug(s),e.prompt&&(Dee(s,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(Ree(s,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==pb.SELECT_ACCOUNT)if(e.sid&&e.prompt===pb.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),qD(s,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let a=hMt(e.account),u=mMt(e.account);if(u&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),u=null),u){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Mb(s,u),n?.addFields({loginHintFromClaim:!0},i);try{let c=Vd(e.account.homeAccountId);xf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===pb.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),qD(s,a),n?.addFields({sidFromClaim:!0},i);try{let c=Vd(e.account.homeAccountId);xf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Mb(s,e.loginHint),zh(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Mb(s,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let c=Vd(e.account.homeAccountId);xf(s,c)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Mb(s,e.loginHint),zh(s,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&kee(s,e.nonce),e.state&&Gw(s,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&og(s,e.claims,t.clientCapabilities),e.embeddedClientId&&Rf(s,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Db))&&Yw(s),s}function dMt(t,e,r,n){let i=Ud(e,r,n);return wr.appendQueryString(t.authorizationEndpoint,i)}function pMt(t,e){if(NIe(t,e),!t.code)throw Ae(zy);return t}function NIe(t,e){if(!t.state||!e)throw t.state?Ae(qh,"Cached State"):Ae(qh,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw Ae(jl,t.state)}try{n=decodeURIComponent(e)}catch{throw Ae(jl,t.state)}if(r!==n)throw Ae(qy);if(t.error||t.error_description||t.suberror){let i=fMt(t);throw XD(t.error,t.error_description,t.suberror)?new zd(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new Hd(t.error||"",t.error_description,t.suberror,i)}}function fMt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}function hMt(t){return t.idTokenClaims?.sid||null}function mMt(t){return t.loginHint||t.idTokenClaims?.login_hint||null}var FIe=ce(()=>{"use strict";Pb();kb();gn();Rb();eg();Gh();$i();ZD();i9();Di();});function yMt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:s}=t,o=new Map([[0,[r,n]],[2,[i,s]]]),a=[];if(e?.length){if(a=e.split(BIe),a.length<4)return e}else a=Array.from({length:4},()=>qIe);return o.forEach((u,c)=>{u.length===2&&u[0]?.length&&u[1]?.length&&gMt({skuArr:a,index:c,skuName:u[0],skuVersion:u[1]})}),a.join(BIe)}function gMt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(qIe))}var BIe,qIe,d9,LIe=ce(()=>{"use strict";gn();wc();BIe=",",qIe="|";d9=class t{constructor(e,r){this.cacheOutcome=Cn.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||me.EMPTY_STRING,this.wrapperVer=e.wrapperVer||me.EMPTY_STRING,this.telemetryCacheKey=is.CACHE_KEY+_f.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${is.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(is.VALUE_SEPARATOR),s=this.getRegionDiscoveryFields(),o=[e,s].join(is.VALUE_SEPARATOR);return[is.SCHEMA_VERSION,o,i].join(is.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(is.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(is.VALUE_SEPARATOR),s=e.errors.length,o=r<s?is.OVERFLOW_TRUE:is.OVERFLOW_FALSE,a=[s,o].join(is.VALUE_SEPARATOR);return[is.SCHEMA_VERSION,e.cacheHits,n,i,a].join(is.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=is.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ar?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(is.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,s=e.errors.length;for(r=0;r<s;r++){let o=e.failedRequests[2*r]||me.EMPTY_STRING,a=e.failedRequests[2*r+1]||me.EMPTY_STRING,u=e.errors[r]||me.EMPTY_STRING;if(i+=o.toString().length+a.toString().length+u.length+3,i<is.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||me.EMPTY_STRING),e.push(this.regionSource||me.EMPTY_STRING),e.push(this.regionOutcome||me.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return yMt(e)}}});var mi=ce(()=>{"use strict";kIe();MIe();PIe();o9();$w();VD();hD();jw();$Z();Hee();Gh();FIe();Pb();a9();Pw();dD();wc();$i();Di();gn();Uh();LIe();xb();Vee();KD();Wh();eg();kb();Yee();rk();});var Yh,nk=ce(()=>{"use strict";mi();Yh=class{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(a=>JSON.parse(a)),lastUpdatedAt:Date.now().toString()},o=new Kl;Hh.toObject(o,s),r[n]=o}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],s={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm,lastUpdatedAt:Date.now().toString()};r[n]=s}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}});var jIe=ce(()=>{"use strict";aD();nk();});var TMt,OMt,Mf,vo,Vl,Gl,as,ik,$Ie,KIe,UIe,VIe,sk,Qee,Tc,Qh,Oc,On=ce(()=>{"use strict";mi();TMt="managed_identity",OMt=`https://login.microsoftonline.com/${TMt}/`,Mf={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},vo={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Vl={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},Gl={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},as={GET:"get",POST:"post"},ik={SUCCESS_RANGE_START:sr.SUCCESS_RANGE_START,SUCCESS_RANGE_END:sr.SUCCESS_RANGE_END,SERVER_ERROR:sr.SERVER_ERROR},$Ie="REGION_NAME",KIe="MSAL_FORCE_REGION",UIe=32,VIe={SHA256:"sha256"},sk={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},Qee={KEY_SEPARATOR:"-"},Tc={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},Qh={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},Oc={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"}});var qb,GIe=ce(()=>{"use strict";qb=class{static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}}});var ok,Xee,p9,HIe,zIe,WIe,JIe=ce(()=>{"use strict";mi();On();GIe();ok=Ct(require("http"),1),Xee=Ct(require("https"),1);p9=class{constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?HIe(e,this.proxyUrl,as.GET,r,this.customAgentOptions,n):zIe(e,as.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?HIe(e,this.proxyUrl,as.POST,r,this.customAgentOptions):zIe(e,as.POST,r,this.customAgentOptions)}},HIe=(t,e,r,n,i,s)=>{let o=new URL(t),a=new URL(e),u=n?.headers||{},c={host:a.hostname,port:a.port,method:"CONNECT",path:o.hostname,headers:u};i&&Object.keys(i).length&&(c.agent=new ok.default.Agent(i));let l="";if(r===as.POST){let p=n?.body||"";l=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${p.length}\r
\r
${p}`}else s&&(c.timeout=s);let d=`${r.toUpperCase()} ${o.href} HTTP/1.1\r
Host: ${o.host}\r
Connection: close\r
`+l+`\r
`;return new Promise((p,f)=>{let h=ok.default.request(c);s&&h.on("timeout",()=>{h.destroy(),f(new Error("Request time out"))}),h.end(),h.on("connect",(g,_)=>{let S=g?.statusCode||ik.SERVER_ERROR;(S<ik.SUCCESS_RANGE_START||S>ik.SUCCESS_RANGE_END)&&(h.destroy(),_.destroy(),f(new Error(`Error connecting to proxy. Http status code: ${g.statusCode}. Http status message: ${g?.statusMessage||"Unknown"}`))),_.write(d);let w=[];_.on("data",C=>{w.push(C)}),_.on("end",()=>{let A=Buffer.concat([...w]).toString().split(`\r
`),O=parseInt(A[0].split(" ")[1]),x=A[0].split(" ").slice(2).join(" "),R=A[A.length-1],M=A.slice(1,A.length-2),I=new Map;M.forEach(k=>{let H=k.split(new RegExp(/:\s(.*)/s)),ie=H[0],j=H[1];try{let V=JSON.parse(j);V&&typeof V=="object"&&(j=V)}catch{}I.set(ie,j)});let B=Object.fromEntries(I),U=qb.getNetworkResponse(B,WIe(O,x,B,R),O);(O<sr.SUCCESS_RANGE_START||O>sr.SUCCESS_RANGE_END)&&U.body.error!==Tc.AUTHORIZATION_PENDING&&h.destroy(),p(U)}),_.on("error",C=>{h.destroy(),_.destroy(),f(new Error(C.toString()))})}),h.on("error",g=>{h.destroy(),f(new Error(g.toString()))})})},zIe=(t,e,r,n,i)=>{let s=e===as.POST,o=r?.body||"",a=new URL(t),u=r?.headers||{},c={method:e,headers:u,...qb.urlToHttpOptions(a)};return n&&Object.keys(n).length&&(c.agent=new Xee.default.Agent(n)),s?c.headers={...c.headers,"Content-Length":o.length}:i&&(c.timeout=i),new Promise((l,d)=>{let p;c.protocol==="http:"?p=ok.default.request(c):p=Xee.default.request(c),s&&p.write(o),i&&p.on("timeout",()=>{p.destroy(),d(new Error("Request time out"))}),p.end(),p.on("response",f=>{let h=f.headers,g=f.statusCode,_=f.statusMessage,S=[];f.on("data",w=>{S.push(w)}),f.on("end",()=>{let w=Buffer.concat([...S]).toString(),C=h,A=qb.getNetworkResponse(C,WIe(g,_,C,w),g);(g<sr.SUCCESS_RANGE_START||g>sr.SUCCESS_RANGE_END)&&A.body.error!==Tc.AUTHORIZATION_PENDING&&p.destroy(),l(A)})}),p.on("error",f=>{p.destroy(),d(new Error(f.toString()))})})},WIe=(t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let o,a;t>=sr.CLIENT_ERROR_RANGE_START&&t<=sr.CLIENT_ERROR_RANGE_END?(o="client_error",a="A client"):t>=sr.SERVER_ERROR_RANGE_START&&t<=sr.SERVER_ERROR_RANGE_END?(o="server_error",a="A server"):(o="unknown_error",a="An unknown"),i={error:o,error_description:`${a} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i}});var Zee,ete,f9,tte,YIe,QIe,rte,nte,ite,ste,ote,XIe,ate,ute,pg,fg=ce(()=>{"use strict";On();Zee="invalid_file_extension",ete="invalid_file_path",f9="invalid_managed_identity_id_type",tte="invalid_secret",YIe="missing_client_id",QIe="network_unavailable",rte="platform_not_supported",nte="unable_to_create_azure_arc",ite="unable_to_create_cloud_shell",ste="unable_to_create_source",ote="unable_to_read_secret_file",XIe="user_assigned_not_available_at_runtime",ate="www_authenticate_header_missing",ute="www_authenticate_header_unsupported_format",pg={[vo.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[vo.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[vo.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[vo.MSI_ENDPOINT]:"msi_endpoint_url_malformed"}});function hg(t){return new cte(t)}var xMt,cte,Lb=ce(()=>{"use strict";mi();fg();On();xMt={[Zee]:"The file path in the WWW-Authenticate header does not contain a .key file.",[ete]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[f9]:"More than one ManagedIdentityIdType was provided.",[tte]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[rte]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[YIe]:"A ManagedIdentityId id was not provided.",[pg.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${vo.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[pg.IDENTITY_ENDPOINT]:`The Managed Identity's '${vo.IDENTITY_ENDPOINT}' environment variable is malformed.`,[pg.IMDS_ENDPOINT]:`The Managed Identity's '${vo.IMDS_ENDPOINT}' environment variable is malformed.`,[pg.MSI_ENDPOINT]:`The Managed Identity's '${vo.MSI_ENDPOINT}' environment variable is malformed.`,[QIe]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[nte]:"Azure Arc Managed Identities can only be system assigned.",[ite]:"Cloud Shell Managed Identities can only be system assigned.",[ste]:"Unable to create a Managed Identity source based on environment variables.",[ote]:"Unable to read the secret file.",[XIe]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[ate]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[ute]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},cte=class t extends ar{constructor(e){super(e,xMt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}}});var ZIe=ce(()=>{"use strict";Lb();On();fg();});var us,Xh,h9=ce(()=>{"use strict";mi();us={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."},redirectUriNotSupported:{code:"redirect_uri_not_supported",desc:"RedirectUri is not supported in this scenario. Please remove redirectUri from the request."}},Xh=class t extends ar{constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(us.invalidLoopbackAddressType.code,`${us.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(us.unableToLoadRedirectUri.code,`${us.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(us.noAuthCodeInResponse.code,`${us.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(us.noLoopbackServerExists.code,`${us.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(us.loopbackServerAlreadyExists.code,`${us.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(us.loopbackServerTimeout.code,`${us.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(us.stateNotFoundError.code,us.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(us.thumbprintMissing.code,us.thumbprintMissing.desc)}static createRedirectUriNotSupportedError(){return new t(us.redirectUriNotSupported.code,us.redirectUriNotSupported.desc)}}});function tRe({auth:t,broker:e,cache:r,system:n,telemetry:i}){let s={...DMt,networkClient:new p9(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||eRe,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw Xh.createStateNotFoundError();return{auth:{...IMt,...t},broker:{...e},cache:{...RMt,...r},system:{...s,...n},telemetry:{...kMt,...i}}}var IMt,RMt,eRe,DMt,kMt,lte=ce(()=>{"use strict";mi();JIe();ZIe();h9();IMt={clientId:me.EMPTY_STRING,authority:me.DEFAULT_AUTHORITY,clientSecret:me.EMPTY_STRING,clientAssertion:me.EMPTY_STRING,clientCertificate:{thumbprint:me.EMPTY_STRING,thumbprintSha256:me.EMPTY_STRING,privateKey:me.EMPTY_STRING,x5c:me.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:me.EMPTY_STRING,authorityMetadata:me.EMPTY_STRING,clientCapabilities:[],protocolMode:Ac.AAD,azureCloudOptions:{azureCloudInstance:Yy.None,tenant:me.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},RMt={claimsBasedCachingEnabled:!1},eRe={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ki.Info},DMt={loggerOptions:eRe,networkClient:new p9,proxyUrl:me.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},kMt={application:{appName:me.EMPTY_STRING,appVersion:me.EMPTY_STRING}}});function dte(){return ak>uk.length-16&&(rRe.default.randomFillSync(uk),ak=0),uk.slice(ak,ak+=16)}var rRe,uk,ak,nRe=ce(()=>{rRe=Ct(require("crypto")),uk=new Uint8Array(256),ak=uk.length});var iRe,sRe=ce(()=>{iRe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function MMt(t){return typeof t=="string"&&iRe.test(t)}var oRe,aRe=ce(()=>{sRe();oRe=MMt});function PMt(t,e=0){let r=(Qs[t[e+0]]+Qs[t[e+1]]+Qs[t[e+2]]+Qs[t[e+3]]+"-"+Qs[t[e+4]]+Qs[t[e+5]]+"-"+Qs[t[e+6]]+Qs[t[e+7]]+"-"+Qs[t[e+8]]+Qs[t[e+9]]+"-"+Qs[t[e+10]]+Qs[t[e+11]]+Qs[t[e+12]]+Qs[t[e+13]]+Qs[t[e+14]]+Qs[t[e+15]]).toLowerCase();if(!oRe(r))throw TypeError("Stringified UUID is invalid");return r}var Qs,uRe,cRe=ce(()=>{aRe();Qs=[];for(let t=0;t<256;++t)Qs.push((t+256).toString(16).substr(1));uRe=PMt});function NMt(t,e,r){t=t||{};let n=t.random||(t.rng||dte)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return uRe(n)}var pte,lRe=ce(()=>{nRe();cRe();pte=NMt});var dRe=ce(()=>{lRe()});var jb,fte=ce(()=>{"use strict";dRe();jb=class{generateGuid(){return pte()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}});var mu,m9=ce(()=>{"use strict";mi();mu=class t{static base64Encode(e,r){return Buffer.from(e,r).toString(fu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,me.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,fu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}}});var pRe,mg,ck=ce(()=>{"use strict";On();pRe=Ct(require("crypto"),1);mg=class{sha256(e){return pRe.default.createHash(VIe.SHA256).update(e).digest()}}});var fRe,lk,hRe=ce(()=>{"use strict";mi();On();m9();ck();fRe=Ct(require("crypto"),1);lk=class{constructor(){this.hashUtils=new mg}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%sk.CV_CHARSET.length;for(;e.length<=UIe;){let i=fRe.default.randomBytes(1)[0];if(i>=r)continue;let s=i%sk.CV_CHARSET.length;e.push(sk.CV_CHARSET[s])}let n=e.join(me.EMPTY_STRING);return mu.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return mu.base64EncodeUrl(this.hashUtils.sha256(e).toString(fu.BASE64),fu.BASE64)}}});var Zh,y9=ce(()=>{"use strict";mi();fte();m9();hRe();ck();Zh=class{constructor(){this.pkceGenerator=new lk,this.guidGenerator=new jb,this.hashUtils=new mg}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return mu.base64Encode(e)}base64Decode(e){return mu.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return mu.base64EncodeUrl(this.hashUtils.sha256(e).toString(fu.BASE64),fu.BASE64)}}});var dk=ce(()=>{"use strict";gn();KZ();});function mRe(t){let e=t.credentialType===Jr.REFRESH_TOKEN&&t.familyId||t.clientId,r=t.tokenType&&t.tokenType.toLowerCase()!==or.BEARER.toLowerCase()?t.tokenType.toLowerCase():"";return[t.homeAccountId,t.environment,t.credentialType,e,t.realm||"",t.target||"",t.requestedClaimsHash||"",r].join(Qee.KEY_SEPARATOR).toLowerCase()}function yRe(t){let e=t.homeAccountId.split(".")[1];return[t.homeAccountId,t.environment,e||t.tenantId||""].join(Qee.KEY_SEPARATOR).toLowerCase()}var gRe=ce(()=>{"use strict";mi();On();});var yg,pk=ce(()=>{"use strict";mi();nk();aD();dk();gRe();yg=class extends Hh{constructor(e,r,n,i){super(r,n,e,new tg,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof Kl)r.accounts[n]=i;else if(Jo.isIdTokenEntity(i))r.idTokens[n]=i;else if(Jo.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(Jo.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(Jo.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}generateCredentialKey(e){return mRe(e)}generateAccountKey(e){return yRe(e)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new Kl,this.getItem(e)):null}async setAccount(e){let r=this.generateAccountKey(e.getAccountInfo());this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return Jo.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return Jo.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return Jo.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=this.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return Jo.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=Jo.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&Jo.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&Jo.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&Jo.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return Yh.deserializeAllCache(Yh.deserializeJSONBlob(e))}static generateJsonCache(e){return Iy.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=this.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}});var g9,E9,hte=ce(()=>{"use strict";pk();mi();nk();aD();y9();fte();g9={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},E9=class{constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Iy.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=Yh.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=yg.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new Zh().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new Ul(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new Ul(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(e,r||new jb().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new Ul(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let s=i!==null,o=typeof i=="object",a=!Array.isArray(i),u=typeof e[n]<"u"&&e[n]!==null;s&&o&&a&&u?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,s=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,a=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:s,IdToken:o,AppMetadata:a}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...g9.Account,...e.Account},IdToken:{...g9.IdToken,...e.IdToken},AccessToken:{...g9.AccessToken,...e.AccessToken},RefreshToken:{...g9.RefreshToken,...e.RefreshToken},AppMetadata:{...g9.AppMetadata,...e.AppMetadata}}}}});var mte=m((rCr,ERe)=>{var fk=Bl().Buffer,FMt=require("stream"),BMt=require("util");function hk(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=fk.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=fk.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}BMt.inherits(hk,FMt);hk.prototype.write=function(e){this.buffer=fk.concat([this.buffer,fk.from(e)]),this.emit("data",e)};hk.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};ERe.exports=hk});var _Re=m((nCr,bRe)=>{"use strict";function yte(t){var e=(t/8|0)+(t%8===0?0:1);return e}var qMt={ES256:yte(256),ES384:yte(384),ES512:yte(521)};function LMt(t){var e=qMt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}bRe.exports=LMt});var Ek=m((iCr,TRe)=>{"use strict";var mk=Bl().Buffer,SRe=_Re(),yk=128,wRe=0,jMt=32,$Mt=16,KMt=2,ARe=$Mt|jMt|wRe<<6,gk=KMt|wRe<<6;function UMt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CRe(t){if(mk.isBuffer(t))return t;if(typeof t=="string")return mk.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function VMt(t,e){t=CRe(t);var r=SRe(e),n=r+1,i=t.length,s=0;if(t[s++]!==ARe)throw new Error('Could not find expected "seq"');var o=t[s++];if(o===(yk|1)&&(o=t[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(t[s++]!==gk)throw new Error('Could not find expected "int" for "r"');var a=t[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var u=s;if(s+=a,t[s++]!==gk)throw new Error('Could not find expected "int" for "s"');var c=t[s++];if(i-s!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-s)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=s;if(s+=c,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var d=r-a,p=r-c,f=mk.allocUnsafe(d+a+p+c);for(s=0;s<d;++s)f[s]=0;t.copy(f,s,u+Math.max(-d,0),u+a),s=r;for(var h=s;s<h+p;++s)f[s]=0;return t.copy(f,s,l+Math.max(-p,0),l+c),f=f.toString("base64"),f=UMt(f),f}function vRe(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=yk;return i&&--n,n}function GMt(t,e){t=CRe(t);var r=SRe(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=vRe(t,0,r),s=vRe(t,r,t.length),o=r-i,a=r-s,u=2+o+1+1+a,c=u<yk,l=mk.allocUnsafe((c?2:3)+u),d=0;return l[d++]=ARe,c?l[d++]=u:(l[d++]=yk|1,l[d++]=u&255),l[d++]=gk,l[d++]=o,i<0?(l[d++]=0,d+=t.copy(l,d,0,r)):d+=t.copy(l,d,i,r),l[d++]=gk,l[d++]=a,s<0?(l[d++]=0,t.copy(l,d,r)):t.copy(l,d,r+s),l}TRe.exports={derToJose:VMt,joseToDer:GMt}});var Ete=m((sCr,ORe)=>{"use strict";var b9=require("buffer").Buffer,gte=require("buffer").SlowBuffer;ORe.exports=bk;function bk(t,e){if(!b9.isBuffer(t)||!b9.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}bk.install=function(){b9.prototype.equal=gte.prototype.equal=function(e){return bk(this,e)}};var HMt=b9.prototype.equal,zMt=gte.prototype.equal;bk.restore=function(){b9.prototype.equal=HMt,gte.prototype.equal=zMt}});var Ste=m((oCr,FRe)=>{var Kb=Bl().Buffer,xc=require("crypto"),IRe=Ek(),xRe=require("util"),WMt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,_9="secret must be a string or buffer",$b="key must be a string or a buffer",JMt="key must be a string, a buffer or an object",_te=typeof xc.createPublicKey=="function";_te&&($b+=" or a KeyObject",_9+="or a KeyObject");function RRe(t){if(!Kb.isBuffer(t)&&typeof t!="string"&&(!_te||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw Hl($b)}function DRe(t){if(!Kb.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw Hl(JMt)}function YMt(t){if(!Kb.isBuffer(t)){if(typeof t=="string")return t;if(!_te||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw Hl(_9)}}function vte(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kRe(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function Hl(t){var e=[].slice.call(arguments,1),r=xRe.format.bind(xRe,t).apply(null,e);return new TypeError(r)}function QMt(t){return Kb.isBuffer(t)||typeof t=="string"}function v9(t){return QMt(t)||(t=JSON.stringify(t)),t}function MRe(t){return function(r,n){YMt(n),r=v9(r);var i=xc.createHmac("sha"+t,n),s=(i.update(r),i.digest("base64"));return vte(s)}}var bte,XMt="timingSafeEqual"in xc?function(e,r){return e.byteLength!==r.byteLength?!1:xc.timingSafeEqual(e,r)}:function(e,r){return bte||(bte=Ete()),bte(e,r)};function ZMt(t){return function(r,n,i){var s=MRe(t)(r,i);return XMt(Kb.from(n),Kb.from(s))}}function PRe(t){return function(r,n){DRe(n),r=v9(r);var i=xc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign(n,"base64"));return vte(s)}}function NRe(t){return function(r,n,i){RRe(i),r=v9(r),n=kRe(n);var s=xc.createVerify("RSA-SHA"+t);return s.update(r),s.verify(i,n,"base64")}}function ePt(t){return function(r,n){DRe(n),r=v9(r);var i=xc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign({key:n,padding:xc.constants.RSA_PKCS1_PSS_PADDING,saltLength:xc.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return vte(s)}}function tPt(t){return function(r,n,i){RRe(i),r=v9(r),n=kRe(n);var s=xc.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:i,padding:xc.constants.RSA_PKCS1_PSS_PADDING,saltLength:xc.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function rPt(t){var e=PRe(t);return function(){var n=e.apply(null,arguments);return n=IRe.derToJose(n,"ES"+t),n}}function nPt(t){var e=NRe(t);return function(n,i,s){i=IRe.joseToDer(i,"ES"+t).toString("base64");var o=e(n,i,s);return o}}function iPt(){return function(){return""}}function sPt(){return function(e,r){return r===""}}FRe.exports=function(e){var r={hs:MRe,rs:PRe,ps:ePt,es:rPt,none:iPt},n={hs:ZMt,rs:NRe,ps:tPt,es:nPt,none:sPt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw Hl(WMt,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:r[s](o),verify:n[s](o)}}});var wte=m((aCr,BRe)=>{var oPt=require("buffer").Buffer;BRe.exports=function(e){return typeof e=="string"?e:typeof e=="number"||oPt.isBuffer(e)?e.toString():JSON.stringify(e)}});var URe=m((uCr,KRe)=>{var aPt=Bl().Buffer,qRe=mte(),uPt=Ste(),cPt=require("stream"),LRe=wte(),Ate=require("util");function jRe(t,e){return aPt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lPt(t,e,r){r=r||"utf8";var n=jRe(LRe(t),"binary"),i=jRe(LRe(e),r);return Ate.format("%s.%s",n,i)}function $Re(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=uPt(e.alg),o=lPt(e,r,i),a=s.sign(o,n);return Ate.format("%s.%s",o,a)}function _k(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new qRe(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new qRe(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Ate.inherits(_k,cPt);_k.prototype.sign=function(){try{var e=$Re({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};_k.sign=$Re;KRe.exports=_k});var ZRe=m((cCr,XRe)=>{var GRe=Bl().Buffer,VRe=mte(),dPt=Ste(),pPt=require("stream"),HRe=wte(),fPt=require("util"),hPt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function mPt(t){return Object.prototype.toString.call(t)==="[object Object]"}function yPt(t){if(mPt(t))return t;try{return JSON.parse(t)}catch{return}}function zRe(t){var e=t.split(".",1)[0];return yPt(GRe.from(e,"base64").toString("binary"))}function gPt(t){return t.split(".",2).join(".")}function WRe(t){return t.split(".")[2]}function EPt(t,e){e=e||"utf8";var r=t.split(".")[1];return GRe.from(r,"base64").toString(e)}function JRe(t){return hPt.test(t)&&!!zRe(t)}function YRe(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=HRe(t);var i=WRe(t),s=gPt(t),o=dPt(e);return o.verify(s,i,r)}function QRe(t,e){if(e=e||{},t=HRe(t),!JRe(t))return null;var r=zRe(t);if(!r)return null;var n=EPt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:WRe(t)}}function Ub(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new VRe(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new VRe(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}fPt.inherits(Ub,pPt);Ub.prototype.verify=function(){try{var e=YRe(this.signature.buffer,this.algorithm,this.key.buffer),r=QRe(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Ub.decode=QRe;Ub.isValid=JRe;Ub.verify=YRe;XRe.exports=Ub});var Sk=m(em=>{var eDe=URe(),vk=ZRe(),bPt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];em.ALGORITHMS=bPt;em.sign=eDe.sign;em.verify=vk.verify;em.decode=vk.decode;em.isValid=vk.isValid;em.createSign=function(e){return new eDe(e)};em.createVerify=function(e){return new vk(e)}});var Cte=m((dCr,tDe)=>{var _Pt=Sk();tDe.exports=function(t,e){e=e||{};var r=_Pt.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var S9=m((pCr,rDe)=>{var wk=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};wk.prototype=Object.create(Error.prototype);wk.prototype.constructor=wk;rDe.exports=wk});var Tte=m((fCr,iDe)=>{var nDe=S9(),Ak=function(t,e){nDe.call(this,t),this.name="NotBeforeError",this.date=e};Ak.prototype=Object.create(nDe.prototype);Ak.prototype.constructor=Ak;iDe.exports=Ak});var Ote=m((hCr,oDe)=>{var sDe=S9(),Ck=function(t,e){sDe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};Ck.prototype=Object.create(sDe.prototype);Ck.prototype.constructor=Ck;oDe.exports=Ck});var uDe=m((mCr,aDe)=>{var Vb=1e3,Gb=Vb*60,Hb=Gb*60,gg=Hb*24,vPt=gg*7,SPt=gg*365.25;aDe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return wPt(t);if(r==="number"&&isFinite(t))return e.long?CPt(t):APt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function wPt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*SPt;case"weeks":case"week":case"w":return r*vPt;case"days":case"day":case"d":return r*gg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Hb;case"minutes":case"minute":case"mins":case"min":case"m":return r*Gb;case"seconds":case"second":case"secs":case"sec":case"s":return r*Vb;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function APt(t){var e=Math.abs(t);return e>=gg?Math.round(t/gg)+"d":e>=Hb?Math.round(t/Hb)+"h":e>=Gb?Math.round(t/Gb)+"m":e>=Vb?Math.round(t/Vb)+"s":t+"ms"}function CPt(t){var e=Math.abs(t);return e>=gg?Tk(t,e,gg,"day"):e>=Hb?Tk(t,e,Hb,"hour"):e>=Gb?Tk(t,e,Gb,"minute"):e>=Vb?Tk(t,e,Vb,"second"):t+" ms"}function Tk(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var xte=m((yCr,cDe)=>{var TPt=uDe();cDe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=TPt(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var w9=m((gCr,lDe)=>{"use strict";var OPt="2.0.0",xPt=Number.MAX_SAFE_INTEGER||9007199254740991,IPt=16,RPt=250,DPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];lDe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:IPt,MAX_SAFE_BUILD_LENGTH:RPt,MAX_SAFE_INTEGER:xPt,RELEASE_TYPES:DPt,SEMVER_SPEC_VERSION:OPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var A9=m((ECr,dDe)=>{"use strict";var kPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};dDe.exports=kPt});var zb=m((Wd,pDe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ite,MAX_SAFE_BUILD_LENGTH:MPt,MAX_LENGTH:PPt}=w9(),NPt=A9();Wd=pDe.exports={};var FPt=Wd.re=[],BPt=Wd.safeRe=[],Ye=Wd.src=[],qPt=Wd.safeSrc=[],Qe=Wd.t={},LPt=0,Rte="[a-zA-Z0-9-]",jPt=[["\\s",1],["\\d",PPt],[Rte,MPt]],$Pt=t=>{for(let[e,r]of jPt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Ft=(t,e,r)=>{let n=$Pt(e),i=LPt++;NPt(t,i,e),Qe[t]=i,Ye[i]=e,qPt[i]=n,FPt[i]=new RegExp(e,r?"g":void 0),BPt[i]=new RegExp(n,r?"g":void 0)};Ft("NUMERICIDENTIFIER","0|[1-9]\\d*");Ft("NUMERICIDENTIFIERLOOSE","\\d+");Ft("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Rte}*`);Ft("MAINVERSION",`(${Ye[Qe.NUMERICIDENTIFIER]})\\.(${Ye[Qe.NUMERICIDENTIFIER]})\\.(${Ye[Qe.NUMERICIDENTIFIER]})`);Ft("MAINVERSIONLOOSE",`(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})\\.(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})\\.(${Ye[Qe.NUMERICIDENTIFIERLOOSE]})`);Ft("PRERELEASEIDENTIFIER",`(?:${Ye[Qe.NONNUMERICIDENTIFIER]}|${Ye[Qe.NUMERICIDENTIFIER]})`);Ft("PRERELEASEIDENTIFIERLOOSE",`(?:${Ye[Qe.NONNUMERICIDENTIFIER]}|${Ye[Qe.NUMERICIDENTIFIERLOOSE]})`);Ft("PRERELEASE",`(?:-(${Ye[Qe.PRERELEASEIDENTIFIER]}(?:\\.${Ye[Qe.PRERELEASEIDENTIFIER]})*))`);Ft("PRERELEASELOOSE",`(?:-?(${Ye[Qe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ye[Qe.PRERELEASEIDENTIFIERLOOSE]})*))`);Ft("BUILDIDENTIFIER",`${Rte}+`);Ft("BUILD",`(?:\\+(${Ye[Qe.BUILDIDENTIFIER]}(?:\\.${Ye[Qe.BUILDIDENTIFIER]})*))`);Ft("FULLPLAIN",`v?${Ye[Qe.MAINVERSION]}${Ye[Qe.PRERELEASE]}?${Ye[Qe.BUILD]}?`);Ft("FULL",`^${Ye[Qe.FULLPLAIN]}$`);Ft("LOOSEPLAIN",`[v=\\s]*${Ye[Qe.MAINVERSIONLOOSE]}${Ye[Qe.PRERELEASELOOSE]}?${Ye[Qe.BUILD]}?`);Ft("LOOSE",`^${Ye[Qe.LOOSEPLAIN]}$`);Ft("GTLT","((?:<|>)?=?)");Ft("XRANGEIDENTIFIERLOOSE",`${Ye[Qe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ft("XRANGEIDENTIFIER",`${Ye[Qe.NUMERICIDENTIFIER]}|x|X|\\*`);Ft("XRANGEPLAIN",`[v=\\s]*(${Ye[Qe.XRANGEIDENTIFIER]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIER]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIER]})(?:${Ye[Qe.PRERELEASE]})?${Ye[Qe.BUILD]}?)?)?`);Ft("XRANGEPLAINLOOSE",`[v=\\s]*(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ye[Qe.XRANGEIDENTIFIERLOOSE]})(?:${Ye[Qe.PRERELEASELOOSE]})?${Ye[Qe.BUILD]}?)?)?`);Ft("XRANGE",`^${Ye[Qe.GTLT]}\\s*${Ye[Qe.XRANGEPLAIN]}$`);Ft("XRANGELOOSE",`^${Ye[Qe.GTLT]}\\s*${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ite}})(?:\\.(\\d{1,${Ite}}))?(?:\\.(\\d{1,${Ite}}))?`);Ft("COERCE",`${Ye[Qe.COERCEPLAIN]}(?:$|[^\\d])`);Ft("COERCEFULL",Ye[Qe.COERCEPLAIN]+`(?:${Ye[Qe.PRERELEASE]})?(?:${Ye[Qe.BUILD]})?(?:$|[^\\d])`);Ft("COERCERTL",Ye[Qe.COERCE],!0);Ft("COERCERTLFULL",Ye[Qe.COERCEFULL],!0);Ft("LONETILDE","(?:~>?)");Ft("TILDETRIM",`(\\s*)${Ye[Qe.LONETILDE]}\\s+`,!0);Wd.tildeTrimReplace="$1~";Ft("TILDE",`^${Ye[Qe.LONETILDE]}${Ye[Qe.XRANGEPLAIN]}$`);Ft("TILDELOOSE",`^${Ye[Qe.LONETILDE]}${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("LONECARET","(?:\\^)");Ft("CARETTRIM",`(\\s*)${Ye[Qe.LONECARET]}\\s+`,!0);Wd.caretTrimReplace="$1^";Ft("CARET",`^${Ye[Qe.LONECARET]}${Ye[Qe.XRANGEPLAIN]}$`);Ft("CARETLOOSE",`^${Ye[Qe.LONECARET]}${Ye[Qe.XRANGEPLAINLOOSE]}$`);Ft("COMPARATORLOOSE",`^${Ye[Qe.GTLT]}\\s*(${Ye[Qe.LOOSEPLAIN]})$|^$`);Ft("COMPARATOR",`^${Ye[Qe.GTLT]}\\s*(${Ye[Qe.FULLPLAIN]})$|^$`);Ft("COMPARATORTRIM",`(\\s*)${Ye[Qe.GTLT]}\\s*(${Ye[Qe.LOOSEPLAIN]}|${Ye[Qe.XRANGEPLAIN]})`,!0);Wd.comparatorTrimReplace="$1$2$3";Ft("HYPHENRANGE",`^\\s*(${Ye[Qe.XRANGEPLAIN]})\\s+-\\s+(${Ye[Qe.XRANGEPLAIN]})\\s*$`);Ft("HYPHENRANGELOOSE",`^\\s*(${Ye[Qe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ye[Qe.XRANGEPLAINLOOSE]})\\s*$`);Ft("STAR","(<|>)?=?\\s*\\*");Ft("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ft("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ok=m((bCr,fDe)=>{"use strict";var KPt=Object.freeze({loose:!0}),UPt=Object.freeze({}),VPt=t=>t?typeof t!="object"?KPt:t:UPt;fDe.exports=VPt});var Dte=m((_Cr,yDe)=>{"use strict";var hDe=/^[0-9]+$/,mDe=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=hDe.test(t),n=hDe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},GPt=(t,e)=>mDe(e,t);yDe.exports={compareIdentifiers:mDe,rcompareIdentifiers:GPt}});var So=m((vCr,EDe)=>{"use strict";var xk=A9(),{MAX_LENGTH:gDe,MAX_SAFE_INTEGER:Ik}=w9(),{safeRe:Rk,t:Dk}=zb(),HPt=Ok(),{compareIdentifiers:kte}=Dte(),Mte=class t{constructor(e,r){if(r=HPt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>gDe)throw new TypeError(`version is longer than ${gDe} characters`);xk("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Rk[Dk.LOOSE]:Rk[Dk.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ik||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ik||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ik||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Ik)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(xk("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(xk("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kte(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(xk("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return kte(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?Rk[Dk.PRERELEASELOOSE]:Rk[Dk.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),kte(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};EDe.exports=Mte});var Eg=m((SCr,_De)=>{"use strict";var bDe=So(),zPt=(t,e,r=!1)=>{if(t instanceof bDe)return t;try{return new bDe(t,e)}catch(n){if(!r)return null;throw n}};_De.exports=zPt});var SDe=m((wCr,vDe)=>{"use strict";var WPt=Eg(),JPt=(t,e)=>{let r=WPt(t,e);return r?r.version:null};vDe.exports=JPt});var ADe=m((ACr,wDe)=>{"use strict";var YPt=Eg(),QPt=(t,e)=>{let r=YPt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};wDe.exports=QPt});var ODe=m((CCr,TDe)=>{"use strict";var CDe=So(),XPt=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new CDe(t instanceof CDe?t.version:t,r).inc(e,n,i).version}catch{return null}};TDe.exports=XPt});var RDe=m((TCr,IDe)=>{"use strict";var xDe=Eg(),ZPt=(t,e)=>{let r=xDe(t,null,!0),n=xDe(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};IDe.exports=ZPt});var kDe=m((OCr,DDe)=>{"use strict";var eNt=So(),tNt=(t,e)=>new eNt(t,e).major;DDe.exports=tNt});var PDe=m((xCr,MDe)=>{"use strict";var rNt=So(),nNt=(t,e)=>new rNt(t,e).minor;MDe.exports=nNt});var FDe=m((ICr,NDe)=>{"use strict";var iNt=So(),sNt=(t,e)=>new iNt(t,e).patch;NDe.exports=sNt});var qDe=m((RCr,BDe)=>{"use strict";var oNt=Eg(),aNt=(t,e)=>{let r=oNt(t,e);return r&&r.prerelease.length?r.prerelease:null};BDe.exports=aNt});var Ic=m((DCr,jDe)=>{"use strict";var LDe=So(),uNt=(t,e,r)=>new LDe(t,r).compare(new LDe(e,r));jDe.exports=uNt});var KDe=m((kCr,$De)=>{"use strict";var cNt=Ic(),lNt=(t,e,r)=>cNt(e,t,r);$De.exports=lNt});var VDe=m((MCr,UDe)=>{"use strict";var dNt=Ic(),pNt=(t,e)=>dNt(t,e,!0);UDe.exports=pNt});var kk=m((PCr,HDe)=>{"use strict";var GDe=So(),fNt=(t,e,r)=>{let n=new GDe(t,r),i=new GDe(e,r);return n.compare(i)||n.compareBuild(i)};HDe.exports=fNt});var WDe=m((NCr,zDe)=>{"use strict";var hNt=kk(),mNt=(t,e)=>t.sort((r,n)=>hNt(r,n,e));zDe.exports=mNt});var YDe=m((FCr,JDe)=>{"use strict";var yNt=kk(),gNt=(t,e)=>t.sort((r,n)=>yNt(n,r,e));JDe.exports=gNt});var C9=m((BCr,QDe)=>{"use strict";var ENt=Ic(),bNt=(t,e,r)=>ENt(t,e,r)>0;QDe.exports=bNt});var Mk=m((qCr,XDe)=>{"use strict";var _Nt=Ic(),vNt=(t,e,r)=>_Nt(t,e,r)<0;XDe.exports=vNt});var Pte=m((LCr,ZDe)=>{"use strict";var SNt=Ic(),wNt=(t,e,r)=>SNt(t,e,r)===0;ZDe.exports=wNt});var Nte=m((jCr,eke)=>{"use strict";var ANt=Ic(),CNt=(t,e,r)=>ANt(t,e,r)!==0;eke.exports=CNt});var Pk=m(($Cr,tke)=>{"use strict";var TNt=Ic(),ONt=(t,e,r)=>TNt(t,e,r)>=0;tke.exports=ONt});var Nk=m((KCr,rke)=>{"use strict";var xNt=Ic(),INt=(t,e,r)=>xNt(t,e,r)<=0;rke.exports=INt});var Fte=m((UCr,nke)=>{"use strict";var RNt=Pte(),DNt=Nte(),kNt=C9(),MNt=Pk(),PNt=Mk(),NNt=Nk(),FNt=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return RNt(t,r,n);case"!=":return DNt(t,r,n);case">":return kNt(t,r,n);case">=":return MNt(t,r,n);case"<":return PNt(t,r,n);case"<=":return NNt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};nke.exports=FNt});var ske=m((VCr,ike)=>{"use strict";var BNt=So(),qNt=Eg(),{safeRe:Fk,t:Bk}=zb(),LNt=(t,e)=>{if(t instanceof BNt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Fk[Bk.COERCEFULL]:Fk[Bk.COERCE]);else{let u=e.includePrerelease?Fk[Bk.COERCERTLFULL]:Fk[Bk.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return qNt(`${n}.${i}.${s}${o}${a}`,e)};ike.exports=LNt});var ake=m((GCr,oke)=>{"use strict";var Bte=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};oke.exports=Bte});var Rc=m((HCr,dke)=>{"use strict";var jNt=/\s+/g,qte=class t{constructor(e,r){if(r=KNt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Lte)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(jNt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!cke(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&JNt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&zNt)|(this.options.loose&&WNt))+":"+e,i=uke.get(n);if(i)return i;let s=this.options.loose,o=s?Xo[wo.HYPHENRANGELOOSE]:Xo[wo.HYPHENRANGE];e=e.replace(o,sFt(this.options.includePrerelease)),xn("hyphen replace",e),e=e.replace(Xo[wo.COMPARATORTRIM],VNt),xn("comparator trim",e),e=e.replace(Xo[wo.TILDETRIM],GNt),xn("tilde trim",e),e=e.replace(Xo[wo.CARETTRIM],HNt),xn("caret trim",e);let a=e.split(" ").map(d=>YNt(d,this.options)).join(" ").split(/\s+/).map(d=>iFt(d,this.options));s&&(a=a.filter(d=>(xn("loose invalid filter",d,this.options),!!d.match(Xo[wo.COMPARATORLOOSE])))),xn("range list",a);let u=new Map,c=a.map(d=>new Lte(d,this.options));for(let d of c){if(cke(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return uke.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>lke(n,r)&&e.set.some(i=>lke(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new UNt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(oFt(this.set[r],e,this.options))return!0;return!1}};dke.exports=qte;var $Nt=ake(),uke=new $Nt,KNt=Ok(),Lte=T9(),xn=A9(),UNt=So(),{safeRe:Xo,t:wo,comparatorTrimReplace:VNt,tildeTrimReplace:GNt,caretTrimReplace:HNt}=zb(),{FLAG_INCLUDE_PRERELEASE:zNt,FLAG_LOOSE:WNt}=w9(),cke=t=>t.value==="<0.0.0-0",JNt=t=>t.value==="",lke=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},YNt=(t,e)=>(t=t.replace(Xo[wo.BUILD],""),xn("comp",t,e),t=ZNt(t,e),xn("caret",t),t=QNt(t,e),xn("tildes",t),t=tFt(t,e),xn("xrange",t),t=nFt(t,e),xn("stars",t),t),Zo=t=>!t||t.toLowerCase()==="x"||t==="*",QNt=(t,e)=>t.trim().split(/\s+/).map(r=>XNt(r,e)).join(" "),XNt=(t,e)=>{let r=e.loose?Xo[wo.TILDELOOSE]:Xo[wo.TILDE];return t.replace(r,(n,i,s,o,a)=>{xn("tilde",t,n,i,s,o,a);let u;return Zo(i)?u="":Zo(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Zo(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(xn("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,xn("tilde return",u),u})},ZNt=(t,e)=>t.trim().split(/\s+/).map(r=>eFt(r,e)).join(" "),eFt=(t,e)=>{xn("caret",t,e);let r=e.loose?Xo[wo.CARETLOOSE]:Xo[wo.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{xn("caret",t,i,s,o,a,u);let c;return Zo(s)?c="":Zo(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Zo(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(xn("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(xn("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),xn("caret return",c),c})},tFt=(t,e)=>(xn("replaceXRanges",t,e),t.split(/\s+/).map(r=>rFt(r,e)).join(" ")),rFt=(t,e)=>{t=t.trim();let r=e.loose?Xo[wo.XRANGELOOSE]:Xo[wo.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{xn("xRange",t,n,i,s,o,a,u);let c=Zo(s),l=c||Zo(o),d=l||Zo(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),xn("xRange return",n),n})},nFt=(t,e)=>(xn("replaceStars",t,e),t.trim().replace(Xo[wo.STAR],"")),iFt=(t,e)=>(xn("replaceGTE0",t,e),t.trim().replace(Xo[e.includePrerelease?wo.GTE0PRE:wo.GTE0],"")),sFt=t=>(e,r,n,i,s,o,a,u,c,l,d,p)=>(Zo(n)?r="":Zo(i)?r=`>=${n}.0.0${t?"-0":""}`:Zo(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,Zo(c)?u="":Zo(l)?u=`<${+c+1}.0.0-0`:Zo(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),oFt=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(xn(t[n].semver),t[n].semver!==Lte.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var T9=m((zCr,gke)=>{"use strict";var O9=Symbol("SemVer ANY"),Kte=class t{static get ANY(){return O9}constructor(e,r){if(r=pke(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),$te("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===O9?this.value="":this.value=this.operator+this.semver.version,$te("comp",this)}parse(e){let r=this.options.loose?fke[hke.COMPARATORLOOSE]:fke[hke.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new mke(n[2],this.options.loose):this.semver=O9}toString(){return this.value}test(e){if($te("Comparator.test",e,this.options.loose),this.semver===O9||e===O9)return!0;if(typeof e=="string")try{e=new mke(e,this.options)}catch{return!1}return jte(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new yke(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new yke(this.value,r).test(e.semver):(r=pke(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||jte(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||jte(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};gke.exports=Kte;var pke=Ok(),{safeRe:fke,t:hke}=zb(),jte=Fte(),$te=A9(),mke=So(),yke=Rc()});var x9=m((WCr,Eke)=>{"use strict";var aFt=Rc(),uFt=(t,e,r)=>{try{e=new aFt(e,r)}catch{return!1}return e.test(t)};Eke.exports=uFt});var _ke=m((JCr,bke)=>{"use strict";var cFt=Rc(),lFt=(t,e)=>new cFt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));bke.exports=lFt});var Ske=m((YCr,vke)=>{"use strict";var dFt=So(),pFt=Rc(),fFt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new pFt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new dFt(n,r))}),n};vke.exports=fFt});var Ake=m((QCr,wke)=>{"use strict";var hFt=So(),mFt=Rc(),yFt=(t,e,r)=>{let n=null,i=null,s=null;try{s=new mFt(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new hFt(n,r))}),n};wke.exports=yFt});var Oke=m((XCr,Tke)=>{"use strict";var Ute=So(),gFt=Rc(),Cke=C9(),EFt=(t,e)=>{t=new gFt(t,e);let r=new Ute("0.0.0");if(t.test(r)||(r=new Ute("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new Ute(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Cke(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Cke(r,s))&&(r=s)}return r&&t.test(r)?r:null};Tke.exports=EFt});var Ike=m((ZCr,xke)=>{"use strict";var bFt=Rc(),_Ft=(t,e)=>{try{return new bFt(t,e).range||"*"}catch{return null}};xke.exports=_Ft});var qk=m((e7r,Mke)=>{"use strict";var vFt=So(),kke=T9(),{ANY:SFt}=kke,wFt=Rc(),AFt=x9(),Rke=C9(),Dke=Mk(),CFt=Nk(),TFt=Pk(),OFt=(t,e,r,n)=>{t=new vFt(t,n),e=new wFt(e,n);let i,s,o,a,u;switch(r){case">":i=Rke,s=CFt,o=Dke,a=">",u=">=";break;case"<":i=Dke,s=TFt,o=Rke,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(AFt(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===SFt&&(f=new kke(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===u&&o(t,p.semver))return!1}return!0};Mke.exports=OFt});var Nke=m((t7r,Pke)=>{"use strict";var xFt=qk(),IFt=(t,e,r)=>xFt(t,e,">",r);Pke.exports=IFt});var Bke=m((r7r,Fke)=>{"use strict";var RFt=qk(),DFt=(t,e,r)=>RFt(t,e,"<",r);Fke.exports=DFt});var jke=m((n7r,Lke)=>{"use strict";var qke=Rc(),kFt=(t,e,r)=>(t=new qke(t,r),e=new qke(e,r),t.intersects(e,r));Lke.exports=kFt});var Kke=m((i7r,$ke)=>{"use strict";var MFt=x9(),PFt=Ic();$ke.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,d)=>PFt(l,d,r));for(let l of o)MFt(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var Wke=m((s7r,zke)=>{"use strict";var Uke=Rc(),Gte=T9(),{ANY:Vte}=Gte,I9=x9(),Hte=Ic(),NFt=(t,e,r={})=>{if(t===e)return!0;t=new Uke(t,r),e=new Uke(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=BFt(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},FFt=[new Gte(">=0.0.0-0")],Vke=[new Gte(">=0.0.0")],BFt=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Vte){if(e.length===1&&e[0].semver===Vte)return!0;r.includePrerelease?t=FFt:t=Vke}if(e.length===1&&e[0].semver===Vte){if(r.includePrerelease)return!0;e=Vke}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=Gke(i,f,r):f.operator==="<"||f.operator==="<="?s=Hke(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Hte(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!I9(f,String(i),r)||s&&!I9(f,String(s),r))return null;for(let h of e)if(!I9(f,String(h),r))return!1;return!0}let a,u,c,l,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=Gke(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!I9(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=Hke(s,f,r),u===f&&u!==s)return!1}else if(s.operator==="<="&&!I9(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},Gke=(t,e,r)=>{if(!t)return e;let n=Hte(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Hke=(t,e,r)=>{if(!t)return e;let n=Hte(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};zke.exports=NFt});var Lk=m((o7r,Qke)=>{"use strict";var zte=zb(),Jke=w9(),qFt=So(),Yke=Dte(),LFt=Eg(),jFt=SDe(),$Ft=ADe(),KFt=ODe(),UFt=RDe(),VFt=kDe(),GFt=PDe(),HFt=FDe(),zFt=qDe(),WFt=Ic(),JFt=KDe(),YFt=VDe(),QFt=kk(),XFt=WDe(),ZFt=YDe(),eBt=C9(),tBt=Mk(),rBt=Pte(),nBt=Nte(),iBt=Pk(),sBt=Nk(),oBt=Fte(),aBt=ske(),uBt=T9(),cBt=Rc(),lBt=x9(),dBt=_ke(),pBt=Ske(),fBt=Ake(),hBt=Oke(),mBt=Ike(),yBt=qk(),gBt=Nke(),EBt=Bke(),bBt=jke(),_Bt=Kke(),vBt=Wke();Qke.exports={parse:LFt,valid:jFt,clean:$Ft,inc:KFt,diff:UFt,major:VFt,minor:GFt,patch:HFt,prerelease:zFt,compare:WFt,rcompare:JFt,compareLoose:YFt,compareBuild:QFt,sort:XFt,rsort:ZFt,gt:eBt,lt:tBt,eq:rBt,neq:nBt,gte:iBt,lte:sBt,cmp:oBt,coerce:aBt,Comparator:uBt,Range:cBt,satisfies:lBt,toComparators:dBt,maxSatisfying:pBt,minSatisfying:fBt,minVersion:hBt,validRange:mBt,outside:yBt,gtr:gBt,ltr:EBt,intersects:bBt,simplifyRange:_Bt,subset:vBt,SemVer:qFt,re:zte.re,src:zte.src,tokens:zte.t,SEMVER_SPEC_VERSION:Jke.SEMVER_SPEC_VERSION,RELEASE_TYPES:Jke.RELEASE_TYPES,compareIdentifiers:Yke.compareIdentifiers,rcompareIdentifiers:Yke.rcompareIdentifiers}});var Zke=m((a7r,Xke)=>{var SBt=Lk();Xke.exports=SBt.satisfies(process.version,">=15.7.0")});var tMe=m((u7r,eMe)=>{var wBt=Lk();eMe.exports=wBt.satisfies(process.version,">=16.9.0")});var Wte=m((c7r,rMe)=>{var ABt=Zke(),CBt=tMe(),TBt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},OBt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};rMe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=TBt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(ABt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,s=OBt[t];if(i!==s)throw new Error(`"alg" parameter "${t}" requires curve "${s}".`);break;case"rsa-pss":if(CBt){let o=parseInt(t.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:u,saltLength:c}=e.asymmetricKeyDetails;if(a!==`sha${o}`||u!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(c!==void 0&&c>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Jte=m((l7r,nMe)=>{var xBt=Lk();nMe.exports=xBt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var oMe=m((d7r,sMe)=>{var bn=S9(),IBt=Tte(),iMe=Ote(),RBt=Cte(),DBt=xte(),kBt=Wte(),MBt=Jte(),PBt=Sk(),{KeyObject:NBt,createSecretKey:FBt,createPublicKey:BBt}=require("crypto"),Yte=["RS256","RS384","RS512"],qBt=["ES256","ES384","ES512"],Qte=["RS256","RS384","RS512"],LBt=["HS256","HS384","HS512"];MBt&&(Yte.splice(Yte.length,0,"PS256","PS384","PS512"),Qte.splice(Qte.length,0,"PS256","PS384","PS512"));sMe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=function(l,d){if(l)throw l;return d},r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new bn("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new bn("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new bn("allowInvalidAsymmetricKeyTypes must be a boolean"));let s=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new bn("jwt must be provided"));if(typeof t!="string")return i(new bn("jwt must be a string"));let o=t.split(".");if(o.length!==3)return i(new bn("jwt malformed"));let a;try{a=RBt(t,{complete:!0})}catch(l){return i(l)}if(!a)return i(new bn("invalid token"));let u=a.header,c;if(typeof e=="function"){if(!n)return i(new bn("verify must be called asynchronous if secret or public key is provided as a callback"));c=e}else c=function(l,d){return d(null,e)};return c(u,function(l,d){if(l)return i(new bn("error in secret or public key callback: "+l.message));let p=o[2].trim()!=="";if(!p&&d)return i(new bn("jwt signature is required"));if(p&&!d)return i(new bn("secret or public key must be provided"));if(!p&&!r.algorithms)return i(new bn('please specify "none" in "algorithms" to verify unsigned tokens'));if(d!=null&&!(d instanceof NBt))try{d=BBt(d)}catch{try{d=FBt(typeof d=="string"?Buffer.from(d):d)}catch{return i(new bn("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(d.type==="secret"?r.algorithms=LBt:["rsa","rsa-pss"].includes(d.asymmetricKeyType)?r.algorithms=Qte:d.asymmetricKeyType==="ec"?r.algorithms=qBt:r.algorithms=Yte),r.algorithms.indexOf(a.header.alg)===-1)return i(new bn("invalid algorithm"));if(u.alg.startsWith("HS")&&d.type!=="secret")return i(new bn(`secretOrPublicKey must be a symmetric key when using ${u.alg}`));if(/^(?:RS|PS|ES)/.test(u.alg)&&d.type!=="public")return i(new bn(`secretOrPublicKey must be an asymmetric key when using ${u.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{kBt(u.alg,d)}catch(g){return i(g)}let f;try{f=PBt.verify(t,a.header.alg,d)}catch(g){return i(g)}if(!f)return i(new bn("invalid signature"));let h=a.payload;if(typeof h.nbf<"u"&&!r.ignoreNotBefore){if(typeof h.nbf!="number")return i(new bn("invalid nbf value"));if(h.nbf>s+(r.clockTolerance||0))return i(new IBt("jwt not active",new Date(h.nbf*1e3)))}if(typeof h.exp<"u"&&!r.ignoreExpiration){if(typeof h.exp!="number")return i(new bn("invalid exp value"));if(s>=h.exp+(r.clockTolerance||0))return i(new iMe("jwt expired",new Date(h.exp*1e3)))}if(r.audience){let g=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(h.aud)?h.aud:[h.aud]).some(function(w){return g.some(function(C){return C instanceof RegExp?C.test(w):C===w})}))return i(new bn("jwt audience invalid. expected: "+g.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&h.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(h.iss)===-1))return i(new bn("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&h.sub!==r.subject)return i(new bn("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&h.jti!==r.jwtid)return i(new bn("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&h.nonce!==r.nonce)return i(new bn("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof h.iat!="number")return i(new bn("iat required when maxAge is specified"));let g=DBt(r.maxAge,h.iat);if(typeof g>"u")return i(new bn('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(s>=g+(r.clockTolerance||0))return i(new iMe("maxAge exceeded",new Date(g*1e3)))}if(r.complete===!0){let g=a.signature;return i(null,{header:u,payload:h,signature:g})}return i(null,h)})}});var pMe=m((p7r,dMe)=>{var aMe=1/0,cMe=9007199254740991,jBt=17976931348623157e292,uMe=NaN,$Bt="[object Arguments]",KBt="[object Function]",UBt="[object GeneratorFunction]",VBt="[object String]",GBt="[object Symbol]",HBt=/^\s+|\s+$/g,zBt=/^[-+]0x[0-9a-f]+$/i,WBt=/^0b[01]+$/i,JBt=/^0o[0-7]+$/i,YBt=/^(?:0|[1-9]\d*)$/,QBt=parseInt;function XBt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function ZBt(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function eqt(t,e,r){if(e!==e)return ZBt(t,tqt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function tqt(t){return t!==t}function rqt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function nqt(t,e){return XBt(e,function(r){return t[r]})}function iqt(t,e){return function(r){return t(e(r))}}var jk=Object.prototype,Zte=jk.hasOwnProperty,$k=jk.toString,sqt=jk.propertyIsEnumerable,oqt=iqt(Object.keys,Object),aqt=Math.max;function uqt(t,e){var r=lMe(t)||fqt(t)?rqt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||Zte.call(t,s))&&!(i&&(s=="length"||lqt(s,n)))&&r.push(s);return r}function cqt(t){if(!dqt(t))return oqt(t);var e=[];for(var r in Object(t))Zte.call(t,r)&&r!="constructor"&&e.push(r);return e}function lqt(t,e){return e=e??cMe,!!e&&(typeof t=="number"||YBt.test(t))&&t>-1&&t%1==0&&t<e}function dqt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||jk;return t===r}function pqt(t,e,r,n){t=ere(t)?t:wqt(t),r=r&&!n?_qt(r):0;var i=t.length;return r<0&&(r=aqt(i+r,0)),gqt(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&eqt(t,e,r)>-1}function fqt(t){return hqt(t)&&Zte.call(t,"callee")&&(!sqt.call(t,"callee")||$k.call(t)==$Bt)}var lMe=Array.isArray;function ere(t){return t!=null&&yqt(t.length)&&!mqt(t)}function hqt(t){return tre(t)&&ere(t)}function mqt(t){var e=Xte(t)?$k.call(t):"";return e==KBt||e==UBt}function yqt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=cMe}function Xte(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function tre(t){return!!t&&typeof t=="object"}function gqt(t){return typeof t=="string"||!lMe(t)&&tre(t)&&$k.call(t)==VBt}function Eqt(t){return typeof t=="symbol"||tre(t)&&$k.call(t)==GBt}function bqt(t){if(!t)return t===0?t:0;if(t=vqt(t),t===aMe||t===-aMe){var e=t<0?-1:1;return e*jBt}return t===t?t:0}function _qt(t){var e=bqt(t),r=e%1;return e===e?r?e-r:e:0}function vqt(t){if(typeof t=="number")return t;if(Eqt(t))return uMe;if(Xte(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Xte(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(HBt,"");var r=WBt.test(t);return r||JBt.test(t)?QBt(t.slice(2),r?2:8):zBt.test(t)?uMe:+t}function Sqt(t){return ere(t)?uqt(t):cqt(t)}function wqt(t){return t?nqt(t,Sqt(t)):[]}dMe.exports=pqt});var hMe=m((f7r,fMe)=>{var Aqt="[object Boolean]",Cqt=Object.prototype,Tqt=Cqt.toString;function Oqt(t){return t===!0||t===!1||xqt(t)&&Tqt.call(t)==Aqt}function xqt(t){return!!t&&typeof t=="object"}fMe.exports=Oqt});var bMe=m((h7r,EMe)=>{var mMe=1/0,Iqt=17976931348623157e292,yMe=NaN,Rqt="[object Symbol]",Dqt=/^\s+|\s+$/g,kqt=/^[-+]0x[0-9a-f]+$/i,Mqt=/^0b[01]+$/i,Pqt=/^0o[0-7]+$/i,Nqt=parseInt,Fqt=Object.prototype,Bqt=Fqt.toString;function qqt(t){return typeof t=="number"&&t==Kqt(t)}function gMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Lqt(t){return!!t&&typeof t=="object"}function jqt(t){return typeof t=="symbol"||Lqt(t)&&Bqt.call(t)==Rqt}function $qt(t){if(!t)return t===0?t:0;if(t=Uqt(t),t===mMe||t===-mMe){var e=t<0?-1:1;return e*Iqt}return t===t?t:0}function Kqt(t){var e=$qt(t),r=e%1;return e===e?r?e-r:e:0}function Uqt(t){if(typeof t=="number")return t;if(jqt(t))return yMe;if(gMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Dqt,"");var r=Mqt.test(t);return r||Pqt.test(t)?Nqt(t.slice(2),r?2:8):kqt.test(t)?yMe:+t}EMe.exports=qqt});var vMe=m((m7r,_Me)=>{var Vqt="[object Number]",Gqt=Object.prototype,Hqt=Gqt.toString;function zqt(t){return!!t&&typeof t=="object"}function Wqt(t){return typeof t=="number"||zqt(t)&&Hqt.call(t)==Vqt}_Me.exports=Wqt});var CMe=m((y7r,AMe)=>{var Jqt="[object Object]";function Yqt(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function Qqt(t,e){return function(r){return t(e(r))}}var Xqt=Function.prototype,SMe=Object.prototype,wMe=Xqt.toString,Zqt=SMe.hasOwnProperty,eLt=wMe.call(Object),tLt=SMe.toString,rLt=Qqt(Object.getPrototypeOf,Object);function nLt(t){return!!t&&typeof t=="object"}function iLt(t){if(!nLt(t)||tLt.call(t)!=Jqt||Yqt(t))return!1;var e=rLt(t);if(e===null)return!0;var r=Zqt.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&wMe.call(r)==eLt}AMe.exports=iLt});var OMe=m((g7r,TMe)=>{var sLt="[object String]",oLt=Object.prototype,aLt=oLt.toString,uLt=Array.isArray;function cLt(t){return!!t&&typeof t=="object"}function lLt(t){return typeof t=="string"||!uLt(t)&&cLt(t)&&aLt.call(t)==sLt}TMe.exports=lLt});var kMe=m((E7r,DMe)=>{var dLt="Expected a function",xMe=1/0,pLt=17976931348623157e292,IMe=NaN,fLt="[object Symbol]",hLt=/^\s+|\s+$/g,mLt=/^[-+]0x[0-9a-f]+$/i,yLt=/^0b[01]+$/i,gLt=/^0o[0-7]+$/i,ELt=parseInt,bLt=Object.prototype,_Lt=bLt.toString;function vLt(t,e){var r;if(typeof e!="function")throw new TypeError(dLt);return t=TLt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function SLt(t){return vLt(2,t)}function RMe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function wLt(t){return!!t&&typeof t=="object"}function ALt(t){return typeof t=="symbol"||wLt(t)&&_Lt.call(t)==fLt}function CLt(t){if(!t)return t===0?t:0;if(t=OLt(t),t===xMe||t===-xMe){var e=t<0?-1:1;return e*pLt}return t===t?t:0}function TLt(t){var e=CLt(t),r=e%1;return e===e?r?e-r:e:0}function OLt(t){if(typeof t=="number")return t;if(ALt(t))return IMe;if(RMe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RMe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(hLt,"");var r=yLt.test(t);return r||gLt.test(t)?ELt(t.slice(2),r?2:8):mLt.test(t)?IMe:+t}DMe.exports=SLt});var $Me=m((b7r,jMe)=>{var MMe=xte(),xLt=Jte(),ILt=Wte(),PMe=Sk(),RLt=pMe(),Kk=hMe(),NMe=bMe(),rre=vMe(),BMe=CMe(),tm=OMe(),DLt=kMe(),{KeyObject:kLt,createSecretKey:MLt,createPrivateKey:PLt}=require("crypto"),qMe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];xLt&&qMe.splice(3,0,"PS256","PS384","PS512");var NLt={expiresIn:{isValid:function(t){return NMe(t)||tm(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return NMe(t)||tm(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return tm(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:RLt.bind(null,qMe),message:'"algorithm" must be a valid string enum value'},header:{isValid:BMe,message:'"header" must be an object'},encoding:{isValid:tm,message:'"encoding" must be a string'},issuer:{isValid:tm,message:'"issuer" must be a string'},subject:{isValid:tm,message:'"subject" must be a string'},jwtid:{isValid:tm,message:'"jwtid" must be a string'},noTimestamp:{isValid:Kk,message:'"noTimestamp" must be a boolean'},keyid:{isValid:tm,message:'"keyid" must be a string'},mutatePayload:{isValid:Kk,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Kk,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Kk,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},FLt={iat:{isValid:rre,message:'"iat" should be a number of seconds'},exp:{isValid:rre,message:'"exp" should be a number of seconds'},nbf:{isValid:rre,message:'"nbf" should be a number of seconds'}};function LMe(t,e,r,n){if(!BMe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let s=t[i];if(!s){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!s.isValid(r[i]))throw new Error(s.message)})}function BLt(t){return LMe(NLt,!1,t,"options")}function qLt(t){return LMe(FLt,!0,t,"payload")}var FMe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},LLt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];jMe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),s=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function o(c){if(n)return n(c);throw c}if(!e&&r.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof kLt))try{e=PLt(e)}catch{try{e=MLt(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(s.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${s.alg}`));if(/^(?:RS|PS|ES)/.test(s.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${s.alg}`));if(!r.allowInsecureKeySizes&&!s.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`))}if(typeof t>"u")return o(new Error("payload is required"));if(i){try{qLt(t)}catch(c){return o(c)}r.mutatePayload||(t=Object.assign({},t))}else{let c=LLt.filter(function(l){return typeof r[l]<"u"});if(c.length>0)return o(new Error("invalid "+c.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{BLt(r)}catch(c){return o(c)}if(!r.allowInvalidAsymmetricKeyTypes)try{ILt(s.alg,e)}catch(c){return o(c)}let a=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=a),typeof r.notBefore<"u"){try{t.nbf=MMe(r.notBefore,a)}catch(c){return o(c)}if(typeof t.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=MMe(r.expiresIn,a)}catch(c){return o(c)}if(typeof t.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(FMe).forEach(function(c){let l=FMe[c];if(typeof r[c]<"u"){if(typeof t[l]<"u")return o(new Error('Bad "options.'+c+'" option. The payload already has an "'+l+'" property.'));t[l]=r[c]}});let u=r.encoding||"utf8";if(typeof n=="function")n=n&&DLt(n),PMe.createSign({header:s,privateKey:e,payload:t,encoding:u}).once("error",n).once("done",function(c){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`));n(null,c)});else{let c=PMe.sign({header:s,payload:t,secret:e,encoding:u});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(s.alg)&&c.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${s.alg}`);return c}}});var UMe=m((_7r,KMe)=>{KMe.exports={decode:Cte(),verify:oMe(),sign:$Me(),JsonWebTokenError:S9(),NotBeforeError:Tte(),TokenExpiredError:Ote()}});var VMe,rm,Uk=ce(()=>{"use strict";VMe=Ct(UMe(),1);mi();m9();On();rm=class t{static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw Ae(ss.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Cs.nowSeconds();this.expirationTime=i+600;let o={alg:this.useSha256?Oc.PSS_256:Oc.RSA_256},a=this.useSha256?Oc.X5T_256:Oc.X5T;Object.assign(o,{[a]:mu.base64EncodeUrl(this.thumbprint,fu.HEX)}),this.publicCertificate&&Object.assign(o,{[Oc.X5C]:this.publicCertificate});let u={[Oc.AUDIENCE]:this.jwtAudience,[Oc.EXPIRATION_TIME]:this.expirationTime,[Oc.ISSUER]:this.issuer,[Oc.SUBJECT]:this.issuer,[Oc.NOT_BEFORE]:i,[Oc.JWT_ID]:e.createNewGuid()};return this.jwt=VMe.default.sign(u,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<Cs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,me.EMPTY_STRING));return n}}});var nre,nm,Wb=ce(()=>{"use strict";nre="@azure/msal-node",nm="3.8.0"});var R9,ire=ce(()=>{"use strict";mi();R9=class extends Yo{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Cs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wr.appendQueryString(e.tokenEndpoint,n),s=await this.createTokenRequestBody(r),o=this.createTokenRequestHeaders({credential:r.username,type:Wo.UPN}),a={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,s,o,a,r.correlationId)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addUsername(r,e.username),lt.addPassword(r,e.password),lt.addScopes(r,e.scopes),lt.addResponseType(r,fb.IDTOKEN_TOKEN),lt.addGrantType(r,Sc.RESOURCE_OWNER_PASSWORD_GRANT),lt.addClientInfo(r),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Qo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(!En.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&lt.addCcsUpn(r,e.username),Vh.mapToQueryString(r)}}});function GMe(t,e,r,n){let i=l9.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return lt.addLibraryInfo(i,{sku:Tc.MSAL_SKU,version:nm,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==Ac.OIDC&&lt.addApplicationTelemetry(i,t.telemetry.application),lt.addResponseType(i,fb.CODE),r.codeChallenge&&r.codeChallengeMethod&&lt.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),lt.addExtraQueryParameters(i,r.extraQueryParameters||{}),l9.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}var HMe=ce(()=>{"use strict";mi();On();Wb();});var Jb,Vk=ce(()=>{"use strict";mi();lte();y9();pk();On();hte();Uk();Wb();h9();ire();HMe();Jb=class{constructor(e){this.config=tRe(e),this.cryptoProvider=new Zh,this.logger=new Cf(this.config.system.loggerOptions,nre,nm),this.storage=new yg(this.logger,this.config.auth.clientId,this.cryptoProvider,Kee(this.config.auth)),this.tokenCache=new E9(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||hb.QUERY,authenticationScheme:or.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return GMe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:or.BEARER},i=this.initializeServerTelemetryManager(Qh.acquireTokenByCode,n.correlationId);try{let s=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(s,n.correlationId,n.redirectUri,i),a=new u9(o);return this.logger.verbose("Auth code client created",n.correlationId),await a.acquireToken(n,r)}catch(s){throw s instanceof ar&&s.setCorrelationId(n.correlationId),i.cacheFailedRequest(s),s}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:or.BEARER},n=this.initializeServerTelemetryManager(Qh.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new dg(s);return this.logger.verbose("Refresh token client created",r.correlationId),await o.acquireToken(r)}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(Qh.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),o=new c9(s);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,o,s)}catch(a){if(a instanceof gb&&a.errorCode===ss.tokenRefreshRequired)return new dg(s).acquireTokenByRefreshToken(r);throw a}}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,s]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...vc]});if(s===Cn.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let o=new dg(n);try{await o.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(Qh.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),s=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),o=new R9(s);return this.logger.verbose("Username password client created",r.correlationId),await o.acquireToken(r)}catch(i){throw i instanceof ar&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw Xh.createStateNotFoundError();if(e!==r)throw Ae(ss.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:Tc.MSAL_SKU,version:nm,cpu:process.arch||me.EMPTY_STRING,os:process.platform||me.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=rm.fromAssertion(await Qo(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Tc.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===or.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=or.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!En.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...vc],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new d9(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let s=kf.generateAuthority(e,i||this.config.auth.azureCloudOptions),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return GD.createDiscoveredInstance(s,this.config.system.networkClient,this.storage,o,this.logger,r)}clearCache(){this.storage.clear()}}});var zMe=ce(()=>{"use strict";h9();On();});var sre=ce(()=>{"use strict";});var WMe=ce(()=>{"use strict";On();Vk();h9();zMe();sre();Wb();});var Yb,Gk=ce(()=>{"use strict";mi();Yb=class extends Yo{constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===Cn.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,s,o){let a=r,u=r,c=Cn.NOT_APPLICABLE,l;a.serializableCache&&a.persistencePlugin&&(l=new Ul(a.serializableCache,!1),await a.persistencePlugin.beforeCacheAccess(l));let d=this.readAccessTokenFromCache(i,u.managedIdentityId?.id||a.authOptions.clientId,new Ki(e.scopes||[]),s,e.correlationId);return a.serializableCache&&a.persistencePlugin&&l&&await a.persistencePlugin.afterCacheAccess(l),d?Cs.isTokenExpired(d.expiresOn,a.systemOptions?.tokenRenewalOffsetSeconds||yb)?(o?.setCacheOutcome(Cn.CACHED_ACCESS_TOKEN_EXPIRED),[null,Cn.CACHED_ACCESS_TOKEN_EXPIRED]):(d.refreshOn&&Cs.isTokenExpired(d.refreshOn.toString(),0)&&(c=Cn.PROACTIVELY_REFRESHED,o?.setCacheOutcome(Cn.PROACTIVELY_REFRESHED)),[await os.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:d,refreshToken:null,appMetadata:null},!0,e),c]):(o?.setCacheOutcome(Cn.NO_CACHED_ACCESS_TOKEN),[null,Cn.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,s){let o={homeAccountId:me.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Jr.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Ki.createSearchScopes(n.asArray())},a=i.getAccessTokensByFilter(o,s);if(a.length<1)return null;if(a.length>1)throw Ae(ss.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i,s;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let u={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};s=Cs.nowSeconds();let c=await this.appTokenProvider(u);i={access_token:c.accessToken,expires_in:c.expiresInSeconds,refresh_in:c.refreshInSeconds,token_type:or.BEARER}}else{let u=this.createTokenQueryParameters(e),c=wr.appendQueryString(r.tokenEndpoint,u),l=await this.createTokenRequestBody(e),d=this.createTokenRequestHeaders(),p={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),s=Cs.nowSeconds();let f=await this.executePostToTokenEndpoint(c,l,d,p,e.correlationId);i=f.body,i.status=f.status}let o=new os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i,n),await o.handleServerTokenResponse(i,this.authority,s,e)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addScopes(r,e.scopes,!1),lt.addGrantType(r,Sc.CLIENT_CREDENTIALS_GRANT),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Qo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(!En.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Vh.mapToQueryString(r)}}});var D9,ore=ce(()=>{"use strict";mi();m9();D9=class extends Yo{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Ki(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Cs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(Cn.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Ae(ss.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(Cn.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Ae(ss.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,s=null;if(n){i=OD.extractTokenClaims(n.secret,mu.base64Decode);let o=i.oid||i.sub,a={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:me.EMPTY_STRING,localAccountId:o||me.EMPTY_STRING};s=this.cacheManager.getAccount(this.cacheManager.generateAccountKey(a),e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),os.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:Jr.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||or.BEARER,s={credentialType:n&&n.toLowerCase()!==or.BEARER.toLowerCase()?Jr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Jr.ACCESS_TOKEN,clientId:e,target:Ki.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},o=this.cacheManager.getAccessTokensByFilter(s,r.correlationId),a=o.length;if(a<1)return null;if(a>1)throw Ae(ss.multipleMatchingTokens);return o[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),s=wr.appendQueryString(r.tokenEndpoint,i),o=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),u={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=Cs.nowSeconds(),l=await this.executePostToTokenEndpoint(s,o,a,u,e.correlationId),d=new os(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return d.validateTokenResponse(l.body),await d.handleServerTokenResponse(l.body,this.authority,c,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;lt.addClientId(r,this.config.authOptions.clientId),lt.addScopes(r,e.scopes),lt.addGrantType(r,Sc.JWT_BEARER),lt.addClientInfo(r),lt.addLibraryInfo(r,this.config.libraryInfo),lt.addApplicationTelemetry(r,this.config.telemetry.application),lt.addThrottling(r),this.serverTelemetryManager&&lt.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();lt.addCorrelationId(r,n),lt.addRequestTokenUse(r,BD.ON_BEHALF_OF),lt.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&lt.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(lt.addClientAssertion(r,await Qo(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),lt.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&lt.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),Vh.mapToQueryString(r)}}});var k9,JMe=ce(()=>{"use strict";Vk();Uk();On();mi();Gk();ore();k9=class extends Jb{constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw Ae(ss.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?rm.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):rm.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw Ae(ss.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Qo(e.clientAssertion,this.config.auth.clientId),assertionType:Tc.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(p=>!vc.includes(p))},s={...e,...i,clientAssertion:r},a=new wr(s.authority).getUrlComponents().PathSegments[0];if(Object.values(ja).includes(a))throw Ae(ss.missingTenantIdError);let u=process.env[KIe],c;s.azureRegion!=="DisableMsalForceRegion"&&(!s.azureRegion&&u?c=u:c=s.azureRegion);let l={azureRegion:c,environmentRegion:process.env[$Ie]},d=this.initializeServerTelemetryManager(Qh.acquireTokenByClientCredential,s.correlationId,s.skipCache);try{let p=await this.createAuthority(s.authority,s.correlationId,l,e.azureCloudOptions),f=await this.buildOauthClientConfiguration(p,s.correlationId,"",d),h=new Yb(f,this.appTokenProvider);return this.logger.verbose("Client credential client created",s.correlationId),await h.acquireToken(s)}catch(p){throw p instanceof ar&&p.setCorrelationId(s.correlationId),d.cacheFailedRequest(p),p}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),s=new D9(i);return this.logger.verbose("On behalf of client created",r.correlationId),await s.acquireToken(r)}catch(n){throw n instanceof ar&&n.setCorrelationId(r.correlationId),n}}}});function YMe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}var QMe=ce(()=>{"use strict";});var Hk,XMe=ce(()=>{"use strict";mi();On();Hk=class{constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===as.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let s=0;for(;await this.retryPolicy.pauseForRetry(i.status,s,this.logger,i.headers[yn.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),s++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(as.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(as.POST,e,r)}}});var Qb,Pf,bg=ce(()=>{"use strict";mi();On();Lb();QMe();XMe();fg();Qb={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Pf=class{constructor(e,r,n,i,s){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=s}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(YMe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Cs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let s=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),s.queryParameters[Mf.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let f=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${f}`),s.queryParameters[Mf.XMS_CC]=f}let o=s.headers;o[yn.CONTENT_TYPE]=me.URL_FORM_CONTENT_TYPE;let a={headers:o};Object.keys(s.bodyParameters).length&&(a.body=s.computeParametersBodyString());let u=this.disableInternalRetries?this.networkClient:new Hk(this.networkClient,s.retryPolicy,this.logger),c=Cs.nowSeconds(),l;try{s.httpMethod===as.POST?l=await u.sendPostRequestAsync(s.computeUri(),a):l=await u.sendGetRequestAsync(s.computeUri(),a)}catch(f){throw f instanceof ar?f:Ae(ss.networkError)}let d=new os(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),p=await this.getServerTokenResponseAsync(l,u,s,a);return d.validateTokenResponse(p,i),d.handleServerTokenResponse(p,n,c,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case Gl.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?Qb.MANAGED_IDENTITY_CLIENT_ID_2017:Qb.MANAGED_IDENTITY_CLIENT_ID;case Gl.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?Qb.MANAGED_IDENTITY_RESOURCE_ID_IMDS:Qb.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case Gl.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),Qb.MANAGED_IDENTITY_OBJECT_ID;default:throw hg(f9)}}};Pf.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wr(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),hg(pg[t])}}});var ZMe=ce(()=>{"use strict";});var RTr,ePe=ce(()=>{"use strict";dk();ZMe();RTr=[sr.NOT_FOUND,sr.REQUEST_TIMEOUT,sr.TOO_MANY_REQUESTS,sr.SERVER_ERROR,sr.SERVICE_UNAVAILABLE,sr.GATEWAY_TIMEOUT]});var _g=ce(()=>{"use strict";ePe();});var tPe=ce(()=>{"use strict";bg();On();_g();});var GTr,HTr,rPe=ce(()=>{"use strict";_g();bg();Lb();On();fg();GTr={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},HTr={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"}});var nPe=ce(()=>{"use strict";_g();bg();On();Lb();fg();});var iPe=ce(()=>{"use strict";});var iOr,sOr,sPe=ce(()=>{"use strict";dk();iPe();iOr=[sr.NOT_FOUND,sr.REQUEST_TIMEOUT,sr.GONE,sr.TOO_MANY_REQUESTS],sOr=10*1e3});var $Lt,pOr,oPe=ce(()=>{"use strict";_g();bg();On();sPe();$Lt="/metadata/identity/oauth2/token",pOr=`http://169.254.169.254${$Lt}`});var aPe=ce(()=>{"use strict";_g();bg();On();});var vOr,uPe=ce(()=>{"use strict";bg();On();_g();vOr=`Only client id is supported for user-assigned managed identity in ${Vl.MACHINE_LEARNING}.`});var cPe=ce(()=>{"use strict";tPe();rPe();nPe();oPe();aPe();Lb();On();uPe();fg();});var JOr,lPe=ce(()=>{"use strict";lte();Wb();y9();Gk();cPe();pk();On();ck();JOr=[Vl.SERVICE_FABRIC]});var dPe=ce(()=>{"use strict";});var pPe=ce(()=>{"use strict";jIe();WMe();JMe();Vk();Gk();sre();ore();lPe();ire();Uk();hte();dPe();On();y9();Wb();});var Jn={};da(Jn,{__addDisposableResource:()=>BPe,__assign:()=>zk,__asyncDelegator:()=>IPe,__asyncGenerator:()=>xPe,__asyncValues:()=>RPe,__await:()=>Xb,__awaiter:()=>SPe,__classPrivateFieldGet:()=>PPe,__classPrivateFieldIn:()=>FPe,__classPrivateFieldSet:()=>NPe,__createBinding:()=>Jk,__decorate:()=>mPe,__disposeResources:()=>qPe,__esDecorate:()=>gPe,__exportStar:()=>APe,__extends:()=>fPe,__generator:()=>wPe,__importDefault:()=>MPe,__importStar:()=>kPe,__makeTemplateObject:()=>DPe,__metadata:()=>vPe,__param:()=>yPe,__propKey:()=>bPe,__read:()=>cre,__rest:()=>hPe,__rewriteRelativeImportExtension:()=>LPe,__runInitializers:()=>EPe,__setFunctionName:()=>_Pe,__spread:()=>CPe,__spreadArray:()=>OPe,__spreadArrays:()=>TPe,__values:()=>Wk,default:()=>VLt});function fPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");are(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function hPe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function mPe(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function yPe(t,e){return function(r,n){e(r,n,t)}}function gPe(t,e,r,n,i,s){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]=g==="access"?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(S||null))};var _=(0,r[f])(a==="accessor"?{get:l.get,set:l.set}:l[u],h);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(d=o(_.get))&&(l.get=d),(d=o(_.set))&&(l.set=d),(d=o(_.init))&&i.unshift(d)}else(d=o(_))&&(a==="field"?i.unshift(d):l[u]=d)}c&&Object.defineProperty(c,n.name,l),p=!0}function EPe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function bPe(t){return typeof t=="symbol"?t:"".concat(t)}function _Pe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function vPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function SPe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function wPe(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function APe(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jk(e,t,r)}function Wk(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cre(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function CPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(cre(arguments[e]));return t}function TPe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function OPe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Xb(t){return this instanceof Xb?(this.v=t,this):new Xb(t)}function xPe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof Xb?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function IPe(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Xb(t[i](o)),done:!1}:s?s(o):o}:s}}function RPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Wk=="function"?Wk(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function DPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function kPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=ure(t),n=0;n<r.length;n++)r[n]!=="default"&&Jk(e,t,r[n]);return KLt(e,t),e}function MPe(t){return t&&t.__esModule?t:{default:t}}function PPe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function NPe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function FPe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function BPe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function qPe(t){function e(s){t.error=t.hasError?new ULt(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function LPe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}var are,zk,Jk,KLt,ure,ULt,VLt,Yn=ce(()=>{are=function(t,e){return are=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},are(t,e)};zk=function(){return zk=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},zk.apply(this,arguments)};Jk=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});KLt=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},ure=function(t){return ure=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},ure(t)};ULt=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};VLt={__extends:fPe,__assign:zk,__rest:hPe,__decorate:mPe,__param:yPe,__esDecorate:gPe,__runInitializers:EPe,__propKey:bPe,__setFunctionName:_Pe,__metadata:vPe,__awaiter:SPe,__generator:wPe,__createBinding:Jk,__exportStar:APe,__values:Wk,__read:cre,__spread:CPe,__spreadArrays:TPe,__spreadArray:OPe,__await:Xb,__asyncGenerator:xPe,__asyncDelegator:IPe,__asyncValues:RPe,__makeTemplateObject:DPe,__importStar:kPe,__importDefault:MPe,__classPrivateFieldGet:PPe,__classPrivateFieldSet:NPe,__classPrivateFieldIn:FPe,__addDisposableResource:BPe,__disposeResources:qPe,__rewriteRelativeImportExtension:LPe}});var N9=m(Yk=>{"use strict";Object.defineProperty(Yk,"__esModule",{value:!0});Yk.RequestMethod=void 0;var jPe;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(jPe||(Yk.RequestMethod=jPe={}))});var $Pe=m(Qk=>{"use strict";Object.defineProperty(Qk,"__esModule",{value:!0});Qk.BatchRequestContent=void 0;var Zb=(Yn(),Jt(Jn)),lre=N9(),GLt=(function(){function t(e){if(this.requests=new Map,typeof e<"u"){var r=t.requestLimit;if(e.length>r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}for(var i=0,s=e;i<s.length;i++){var o=s[i];this.addRequest(o)}}}return t.validateDependencies=function(e){var r=function(o){for(var a=o.entries(),u=a.next();!u.done;){var c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;u=a.next()}return!0},n=function(o){var a=o.entries(),u=a.next(),c=u.value[1];if(c.dependsOn!==void 0&&c.dependsOn.length>0)return!1;var l=u;for(u=a.next();!u.done;){var d=u.value[1];if(d.dependsOn===void 0||d.dependsOn.length!==1||d.dependsOn[0]!==l.value[1].id)return!1;l=u,u=a.next()}return!0},i=function(o){var a=o.entries(),u=a.next(),c=u.value[1],l;if(c.dependsOn===void 0||c.dependsOn.length===0)l=c.id;else if(c.dependsOn.length===1){var d=c.dependsOn[0];if(d!==c.id&&o.has(d))l=d;else return!1}else return!1;for(u=a.next();!u.done;){var p=u.value[1];if((p.dependsOn===void 0||p.dependsOn.length===0)&&l!==p.id||p.dependsOn!==void 0&&p.dependsOn.length!==0&&(p.dependsOn.length===1&&(p.id===l||p.dependsOn[0]!==l)||p.dependsOn.length>1))return!1;u=a.next()}return!0};if(e.size===0){var s=new Error("Empty requests map, Please provide at least one request.");throw s.name="Empty Requests Error",s}return r(e)||n(e)||i(e)},t.getRequestData=function(e){return Zb.__awaiter(this,void 0,void 0,function(){var r,n,i,s;return Zb.__generator(this,function(o){switch(o.label){case 0:return r={url:""},n=new RegExp("^https?://"),r.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,r.method=e.method,i={},e.headers.forEach(function(a,u){i[u]=a}),Object.keys(i).length&&(r.headers=i),e.method===lre.RequestMethod.PATCH||e.method===lre.RequestMethod.POST||e.method===lre.RequestMethod.PUT?(s=r,[4,t.getRequestBody(e)]):[3,2];case 1:s.body=o.sent(),o.label=2;case 2:return[2,r]}})})},t.getRequestBody=function(e){return Zb.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u,c;return Zb.__generator(this,function(l){switch(l.label){case 0:r=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),i=e.clone(),[4,i.json()];case 2:return n=l.sent(),r=!0,[3,4];case 3:return s=l.sent(),[3,4];case 4:if(r)return[3,12];l.label=5;case 5:return l.trys.push([5,11,,12]),typeof Blob<"u"?[4,e.blob()]:[3,8];case 6:return o=l.sent(),a=new FileReader,[4,new Promise(function(d){a.addEventListener("load",function(){var p=a.result,f=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$"),h=f.exec(p);d(h[4])},!1),a.readAsDataURL(o)})];case 7:return n=l.sent(),[3,10];case 8:return typeof Buffer<"u"?[4,e.buffer()]:[3,10];case 9:u=l.sent(),n=u.toString("base64"),l.label=10;case 10:return r=!0,[3,12];case 11:return c=l.sent(),[3,12];case 12:return[2,n]}})})},t.prototype.addRequest=function(e){var r=t.requestLimit;if(e.id===""){var n=new Error("Id for a request is empty, Please provide an unique id");throw n.name="Empty Id For Request",n}if(this.requests.size===r){var n=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(r));throw n.name="Limit Exceeded Error",n}if(this.requests.has(e.id)){var n=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw n.name="Duplicate RequestId Error",n}return this.requests.set(e.id,e),e.id},t.prototype.removeRequest=function(e){for(var r=this.requests.delete(e),n=this.requests.entries(),i=n.next();!i.done;){var s=i.value[1].dependsOn;if(typeof s<"u"){var o=s.indexOf(e);o!==-1&&s.splice(o,1),s.length===0&&delete i.value[1].dependsOn}i=n.next()}return r},t.prototype.getContent=function(){return Zb.__awaiter(this,void 0,void 0,function(){var e,r,n,i,a,a,s,o,a;return Zb.__generator(this,function(u){switch(u.label){case 0:if(e=[],r={requests:e},n=this.requests.entries(),i=n.next(),i.done)throw a=new Error("No requests added yet, Please add at least one request."),a.name="Empty Payload",a;if(!t.validateDependencies(this.requests))throw a=new Error(`Invalid dependency found, Dependency should be:
1. Parallel - no individual request states a dependency in the dependsOn property.
2. Serial - all individual requests depend on the previous individual request.
3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.`),a.name="Invalid Dependency",a;u.label=1;case 1:return i.done?[3,3]:(s=i.value[1],[4,t.getRequestData(s.request)]);case 2:if(o=u.sent(),o.body!==void 0&&(o.headers===void 0||o.headers["content-type"]===void 0))throw a=new Error("Content-type header is not mentioned for request #".concat(s.id,", For request having body, Content-type header should be mentioned")),a.name="Invalid Content-type header",a;return o.id=s.id,s.dependsOn!==void 0&&s.dependsOn.length>0&&(o.dependsOn=s.dependsOn),e.push(o),i=n.next(),[3,1];case 3:return r.requests=e,[2,r]}})})},t.prototype.addDependency=function(e,r){if(!this.requests.has(e)){var n=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw n.name="Invalid Dependent",n}if(typeof r<"u"&&!this.requests.has(r)){var n=new Error("Dependency ".concat(r," does not exists, Please check the id"));throw n.name="Invalid Dependency",n}if(typeof r<"u"){var i=this.requests.get(e);if(i.dependsOn===void 0&&(i.dependsOn=[]),i.dependsOn.indexOf(r)!==-1){var n=new Error("Dependency ".concat(r," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}i.dependsOn.push(r)}else{for(var s=this.requests.entries(),o=void 0,a=s.next();!a.done&&a.value[1].id!==e;)o=a,a=s.next();if(typeof o<"u"){var u=o.value[0];if(a.value[1].dependsOn===void 0&&(a.value[1].dependsOn=[]),a.value[1].dependsOn.indexOf(u)!==-1){var n=new Error("Dependency ".concat(u," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}a.value[1].dependsOn.push(u)}else{var n=new Error("Can't add dependency ".concat(r,", There is only a dependent request in the batch"));throw n.name="Invalid Dependency Addition",n}}},t.prototype.removeDependency=function(e,r){var n=this.requests.get(e);if(typeof n>"u"||n.dependsOn===void 0||n.dependsOn.length===0)return!1;if(typeof r<"u"){var i=n.dependsOn.indexOf(r);return i===-1?!1:(n.dependsOn.splice(i,1),!0)}else return delete n.dependsOn,!0},t.requestLimit=20,t})();Qk.BatchRequestContent=GLt});var KPe=m(Xk=>{"use strict";Object.defineProperty(Xk,"__esModule",{value:!0});Xk.BatchResponseContent=void 0;var HLt=(Yn(),Jt(Jn)),zLt=(function(){function t(e){this.responses=new Map,this.update(e)}return t.prototype.createResponseObject=function(e){var r=e.body,n={};if(n.status=e.status,e.statusText!==void 0&&(n.statusText=e.statusText),n.headers=e.headers,n.headers!==void 0&&n.headers["Content-Type"]!==void 0&&n.headers["Content-Type"].split(";")[0]==="application/json"){var i=JSON.stringify(r);return new Response(i,n)}return new Response(r,n)},t.prototype.update=function(e){this.nextLink=e["@odata.nextLink"];for(var r=e.responses,n=0,i=r.length;n<i;n++)this.responses.set(r[n].id,this.createResponseObject(r[n]))},t.prototype.getResponseById=function(e){return this.responses.get(e)},t.prototype.getResponses=function(){return this.responses},t.prototype.getResponsesIterator=function(){var e,r;return HLt.__generator(this,function(n){switch(n.label){case 0:e=this.responses.entries(),r=e.next(),n.label=1;case 1:return r.done?[3,3]:[4,r.value];case 2:return n.sent(),r=e.next(),[3,1];case 3:return[2]}})},t})();Xk.BatchResponseContent=zLt});var dre=m(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.GRAPH_URLS=im.GRAPH_BASE_URL=im.GRAPH_API_VERSION=void 0;im.GRAPH_API_VERSION="v1.0";im.GRAPH_BASE_URL="https://graph.microsoft.com/";im.GRAPH_URLS=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"])});var Nf=m(Zk=>{"use strict";Object.defineProperty(Zk,"__esModule",{value:!0});Zk.GraphClientError=void 0;var WLt=(Yn(),Jt(Jn)),JLt=(function(t){WLt.__extends(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e.setGraphClientError=function(r){var n;return r instanceof Error?n=r:(n=new e,n.customError=r),n},e})(Error);Zk.GraphClientError=JLt});var eM=m(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.isCustomHost=Dc.isGraphURL=Dc.serializeContent=Dc.urlJoin=Dc.oDataQueryNames=void 0;var YLt=dre(),QLt=Nf();Dc.oDataQueryNames=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"];var XLt=function(t){var e=function(s){return s.replace(/\/+$/,"")},r=function(s){return s.replace(/^\/+/,"")},n=function(s,o){return[e(s),r(o)].join("/")},i=Array.prototype.slice.call(t);return i.reduce(n)};Dc.urlJoin=XLt;var ZLt=function(t){var e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t};Dc.serializeContent=ZLt;var ejt=function(t){return UPe(t)};Dc.isGraphURL=ejt;var tjt=function(t,e){return e.forEach(function(r){return rjt(r)}),UPe(t,e)};Dc.isCustomHost=tjt;var UPe=function(t,e){if(e===void 0&&(e=YLt.GRAPH_URLS),t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");var r=t.indexOf(":"),n=t.indexOf("/"),i="";if(n!==-1)return r!==-1&&r<n?(i=t.substring(0,r),e.has(i)):(i=t.substring(0,n),e.has(i))}return!1},rjt=function(t){if(t.indexOf("/")!==-1)throw new QLt.GraphClientError("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")}});var sm=m(tM=>{"use strict";Object.defineProperty(tM,"__esModule",{value:!0});tM.MiddlewareControl=void 0;var njt=(function(){function t(e){e===void 0&&(e=[]),this.middlewareOptions=new Map;for(var r=0,n=e;r<n.length;r++){var i=n[r],s=i.constructor;this.middlewareOptions.set(s,i)}}return t.prototype.getMiddlewareOptions=function(e){return this.middlewareOptions.get(e)},t.prototype.setMiddlewareOptions=function(e,r){this.middlewareOptions.set(e,r)},t})();tM.MiddlewareControl=njt});var e_=m(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.cloneRequestWithNewUrl=kc.appendRequestHeader=kc.setRequestHeader=kc.getRequestHeader=kc.generateUUID=void 0;var VPe=(Yn(),Jt(Jn)),ijt=function(){for(var t="",e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t};kc.generateUUID=ijt;var sjt=function(t,e,r){var n=null;if(typeof Request<"u"&&t instanceof Request)n=t.headers.get(r);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)n=e.headers.get(r);else if(e.headers instanceof Array){for(var i=e.headers,s=0,o=i.length;s<o;s++)if(i[s][0]===r){n=i[s][1];break}}else e.headers[r]!==void 0&&(n=e.headers[r]);return n};kc.getRequestHeader=sjt;var ojt=function(t,e,r,n){var i,s;if(typeof Request<"u"&&t instanceof Request)t.headers.set(r,n);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers((i={},i[r]=n,i));else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(r,n);else if(e.headers instanceof Array){for(var o=0,a=e.headers.length;o<a;o++){var u=e.headers[o];if(u[0]===r){u[1]=n;break}}o===a&&e.headers.push([r,n])}else Object.assign(e.headers,(s={},s[r]=n,s))};kc.setRequestHeader=ojt;var ajt=function(t,e,r,n){var i,s;typeof Request<"u"&&t instanceof Request?t.headers.append(r,n):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers((i={},i[r]=n,i)):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(r,n):e.headers instanceof Array?e.headers.push([r,n]):e.headers===void 0?e.headers=(s={},s[r]=n,s):e.headers[r]===void 0?e.headers[r]=n:e.headers[r]+=", ".concat(n))};kc.appendRequestHeader=ajt;var ujt=function(t,e){return VPe.__awaiter(void 0,void 0,void 0,function(){var r,n,i,s,o,a,u,c,l,d,p,f,h;return VPe.__generator(this,function(g){switch(g.label){case 0:return e.headers.get("Content-Type")?[4,e.blob()]:[3,2];case 1:return n=g.sent(),[3,4];case 2:return[4,Promise.resolve(void 0)];case 3:n=g.sent(),g.label=4;case 4:return r=n,i=e.method,s=e.headers,o=e.referrer,a=e.referrerPolicy,u=e.mode,c=e.credentials,l=e.cache,d=e.redirect,p=e.integrity,f=e.keepalive,h=e.signal,[2,new Request(t,{method:i,headers:s,body:r,referrer:o,referrerPolicy:a,mode:u,credentials:c,cache:l,redirect:d,integrity:p,keepalive:f,signal:h})]}})})};kc.cloneRequestWithNewUrl=ujt});var pre=m(rM=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0});rM.AuthenticationHandlerOptions=void 0;var cjt=(function(){function t(e,r){this.authenticationProvider=e,this.authenticationProviderOptions=r}return t})();rM.AuthenticationHandlerOptions=cjt});var r_=m(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.TelemetryHandlerOptions=t_.FeatureUsageFlag=void 0;var GPe=sm(),fre;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(fre||(t_.FeatureUsageFlag=fre={}));var ljt=(function(){function t(){this.featureUsage=fre.NONE}return t.updateFeatureUsageFlag=function(e,r){var n;e.middlewareControl instanceof GPe.MiddlewareControl?n=e.middlewareControl.getMiddlewareOptions(t):e.middlewareControl=new GPe.MiddlewareControl,typeof n>"u"&&(n=new t,e.middlewareControl.setMiddlewareOptions(t,n)),n.setFeatureUsage(r)},t.prototype.setFeatureUsage=function(e){this.featureUsage=this.featureUsage|e},t.prototype.getFeatureUsage=function(){return this.featureUsage.toString(16)},t})();t_.TelemetryHandlerOptions=ljt});var iM=m(nM=>{"use strict";Object.defineProperty(nM,"__esModule",{value:!0});nM.AuthenticationHandler=void 0;var HPe=(Yn(),Jt(Jn)),zPe=eM(),djt=sm(),pjt=e_(),fjt=pre(),WPe=r_(),hjt=(function(){function t(e){this.authenticationProvider=e}return t.prototype.execute=function(e){return HPe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a;return HPe.__generator(this,function(u){switch(u.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,zPe.isGraphURL)(r)||e.customHosts&&(0,zPe.isCustomHost)(r,e.customHosts)?(n=void 0,e.middlewareControl instanceof djt.MiddlewareControl&&(n=e.middlewareControl.getMiddlewareOptions(fjt.AuthenticationHandlerOptions)),i=void 0,s=void 0,n&&(i=n.authenticationProvider,s=n.authenticationProviderOptions),i||(i=this.authenticationProvider),[4,i.getAccessToken(s)]):[3,2];case 1:return o=u.sent(),a="Bearer ".concat(o),(0,pjt.appendRequestHeader)(e.request,e.options,t.AUTHORIZATION_HEADER,a),WPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,WPe.FeatureUsageFlag.AUTHENTICATION_HANDLER_ENABLED),[3,3];case 2:e.options.headers&&delete e.options.headers[t.AUTHORIZATION_HEADER],u.label=3;case 3:return[4,this.nextMiddleware.execute(e)];case 4:return[2,u.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.AUTHORIZATION_HEADER="Authorization",t})();nM.AuthenticationHandler=hjt});var oM=m(sM=>{"use strict";Object.defineProperty(sM,"__esModule",{value:!0});sM.HTTPMessageHandler=void 0;var JPe=(Yn(),Jt(Jn)),mjt=(function(){function t(){}return t.prototype.execute=function(e){return JPe.__awaiter(this,void 0,void 0,function(){var r;return JPe.__generator(this,function(n){switch(n.label){case 0:return r=e,[4,fetch(e.request,e.options)];case 1:return r.response=n.sent(),[2]}})})},t})();sM.HTTPMessageHandler=mjt});var F9=m(aM=>{"use strict";Object.defineProperty(aM,"__esModule",{value:!0});aM.RetryHandlerOptions=void 0;var yjt=(function(){function t(e,r,n){if(e===void 0&&(e=t.DEFAULT_DELAY),r===void 0&&(r=t.DEFAULT_MAX_RETRIES),n===void 0&&(n=t.defaultShouldRetry),e>t.MAX_DELAY&&r>t.MAX_MAX_RETRIES){var i=new Error("Delay and MaxRetries should not be more than ".concat(t.MAX_DELAY," and ").concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e>t.MAX_DELAY){var i=new Error("Delay should not be more than ".concat(t.MAX_DELAY));throw i.name="MaxLimitExceeded",i}else if(r>t.MAX_MAX_RETRIES){var i=new Error("MaxRetries should not be more than ".concat(t.MAX_MAX_RETRIES));throw i.name="MaxLimitExceeded",i}else if(e<0&&r<0){var i=new Error("Delay and MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}else if(e<0){var i=new Error("Delay should not be negative");throw i.name="MinExpectationNotMet",i}else if(r<0){var i=new Error("MaxRetries should not be negative");throw i.name="MinExpectationNotMet",i}this.delay=Math.min(e,t.MAX_DELAY),this.maxRetries=Math.min(r,t.MAX_MAX_RETRIES),this.shouldRetry=n}return t.prototype.getMaxDelay=function(){return t.MAX_DELAY},t.DEFAULT_DELAY=3,t.DEFAULT_MAX_RETRIES=3,t.MAX_DELAY=180,t.MAX_MAX_RETRIES=10,t.defaultShouldRetry=function(){return!0},t})();aM.RetryHandlerOptions=yjt});var cM=m(uM=>{"use strict";Object.defineProperty(uM,"__esModule",{value:!0});uM.RetryHandler=void 0;var n_=(Yn(),Jt(Jn)),hre=N9(),gjt=sm(),YPe=e_(),QPe=F9(),XPe=r_(),Ejt=(function(){function t(e){e===void 0&&(e=new QPe.RetryHandlerOptions),this.options=e}return t.prototype.isRetry=function(e){return t.RETRY_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.isBuffered=function(e,r){var n=typeof e=="string"?r.method:e.method,i=n===hre.RequestMethod.PUT||n===hre.RequestMethod.PATCH||n===hre.RequestMethod.POST;if(i){var s=(0,YPe.getRequestHeader)(e,r,"Content-Type")==="application/octet-stream";if(s)return!1}return!0},t.prototype.getDelay=function(e,r,n){var i=function(){return Number(Math.random().toFixed(3))},s=e.headers!==void 0?e.headers.get(t.RETRY_AFTER_HEADER):null,o;return s!==null?Number.isNaN(Number(s))?o=Math.round((new Date(s).getTime()-Date.now())/1e3):o=Number(s):o=r>=2?this.getExponentialBackOffTime(r)+n+i():n+i(),Math.min(o,this.options.getMaxDelay()+i())},t.prototype.getExponentialBackOffTime=function(e){return Math.round(1/2*(Math.pow(2,e)-1))},t.prototype.sleep=function(e){return n_.__awaiter(this,void 0,void 0,function(){var r;return n_.__generator(this,function(n){return r=e*1e3,[2,new Promise(function(i){return setTimeout(i,r)})]})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof gjt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof r>"u"&&(r=Object.assign(new QPe.RetryHandlerOptions,this.options)),r},t.prototype.executeWithRetry=function(e,r,n){return n_.__awaiter(this,void 0,void 0,function(){var i;return n_.__generator(this,function(s){switch(s.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return s.sent(),r<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,r,e.request,e.options,e.response)?(++r,(0,YPe.setRequestHeader)(e.request,e.options,t.RETRY_ATTEMPT_HEADER,r.toString()),i=this.getDelay(e.response,r,n.delay),[4,this.sleep(i)]):[3,4];case 2:return s.sent(),[4,this.executeWithRetry(e,r,n)];case 3:return[2,s.sent()];case 4:return[2]}})})},t.prototype.execute=function(e){return n_.__awaiter(this,void 0,void 0,function(){var r,n;return n_.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),XPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,XPe.FeatureUsageFlag.RETRY_HANDLER_ENABLED),[4,this.executeWithRetry(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.RETRY_STATUS_CODES=[429,503,504],t.RETRY_ATTEMPT_HEADER="Retry-Attempt",t.RETRY_AFTER_HEADER="Retry-After",t})();uM.RetryHandler=Ejt});var B9=m(lM=>{"use strict";Object.defineProperty(lM,"__esModule",{value:!0});lM.RedirectHandlerOptions=void 0;var bjt=(function(){function t(e,r){if(e===void 0&&(e=t.DEFAULT_MAX_REDIRECTS),r===void 0&&(r=t.defaultShouldRedirect),e>t.MAX_MAX_REDIRECTS){var n=new Error("MaxRedirects should not be more than ".concat(t.MAX_MAX_REDIRECTS));throw n.name="MaxLimitExceeded",n}if(e<0){var n=new Error("MaxRedirects should not be negative");throw n.name="MinExpectationNotMet",n}this.maxRedirects=e,this.shouldRedirect=r}return t.DEFAULT_MAX_REDIRECTS=5,t.MAX_MAX_REDIRECTS=20,t.defaultShouldRedirect=function(){return!0},t})();lM.RedirectHandlerOptions=bjt});var pM=m(dM=>{"use strict";Object.defineProperty(dM,"__esModule",{value:!0});dM.RedirectHandler=void 0;var i_=(Yn(),Jt(Jn)),_jt=N9(),vjt=sm(),Sjt=e_(),mre=B9(),ZPe=r_(),wjt=(function(){function t(e){e===void 0&&(e=new mre.RedirectHandlerOptions),this.options=e}return t.prototype.isRedirect=function(e){return t.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1},t.prototype.hasLocationHeader=function(e){return e.headers.has(t.LOCATION_HEADER)},t.prototype.getLocationHeader=function(e){return e.headers.get(t.LOCATION_HEADER)},t.prototype.isRelativeURL=function(e){return e.indexOf("://")===-1},t.prototype.shouldDropAuthorizationHeader=function(e,r){var n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,i=n.exec(e),s,o;i!==null&&(s=i[0]);var a=n.exec(r);return a!==null&&(o=a[0]),typeof s<"u"&&typeof o<"u"&&s!==o},t.prototype.updateRequestUrl=function(e,r){return i_.__awaiter(this,void 0,void 0,function(){var n,i;return i_.__generator(this,function(s){switch(s.label){case 0:return n=r,typeof r.request!="string"?[3,1]:(i=e,[3,3]);case 1:return[4,(0,Sjt.cloneRequestWithNewUrl)(e,r.request)];case 2:i=s.sent(),s.label=3;case 3:return n.request=i,[2]}})})},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof vjt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(mre.RedirectHandlerOptions)),typeof r>"u"&&(r=Object.assign(new mre.RedirectHandlerOptions,this.options)),r},t.prototype.executeWithRedirect=function(e,r,n){return i_.__awaiter(this,void 0,void 0,function(){var i,s;return i_.__generator(this,function(o){switch(o.label){case 0:return[4,this.nextMiddleware.execute(e)];case 1:return o.sent(),i=e.response,r<n.maxRedirects&&this.isRedirect(i)&&this.hasLocationHeader(i)&&n.shouldRedirect(i)?(++r,i.status!==t.STATUS_CODE_SEE_OTHER?[3,2]:(e.options.method=_jt.RequestMethod.GET,delete e.options.body,[3,4])):[3,6];case 2:return s=this.getLocationHeader(i),!this.isRelativeURL(s)&&this.shouldDropAuthorizationHeader(i.url,s)&&delete e.options.headers[t.AUTHORIZATION_HEADER],[4,this.updateRequestUrl(s,e)];case 3:o.sent(),o.label=4;case 4:return[4,this.executeWithRedirect(e,r,n)];case 5:return o.sent(),[3,7];case 6:return[2];case 7:return[2]}})})},t.prototype.execute=function(e){return i_.__awaiter(this,void 0,void 0,function(){var r,n;return i_.__generator(this,function(i){switch(i.label){case 0:return r=0,n=this.getOptions(e),e.options.redirect=t.MANUAL_REDIRECT,ZPe.TelemetryHandlerOptions.updateFeatureUsageFlag(e,ZPe.FeatureUsageFlag.REDIRECT_HANDLER_ENABLED),[4,this.executeWithRedirect(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.REDIRECT_STATUS_CODES=[301,302,303,307,308],t.STATUS_CODE_SEE_OTHER=303,t.LOCATION_HEADER="Location",t.AUTHORIZATION_HEADER="Authorization",t.MANUAL_REDIRECT="manual",t})();dM.RedirectHandler=wjt});var eNe=m(fM=>{"use strict";Object.defineProperty(fM,"__esModule",{value:!0});fM.PACKAGE_VERSION=void 0;fM.PACKAGE_VERSION="3.0.7"});var yM=m(mM=>{"use strict";Object.defineProperty(mM,"__esModule",{value:!0});mM.TelemetryHandler=void 0;var tNe=(Yn(),Jt(Jn)),rNe=eM(),Ajt=eNe(),Cjt=sm(),hM=e_(),Tjt=r_(),Ojt=(function(){function t(){}return t.prototype.execute=function(e){return tNe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o;return tNe.__generator(this,function(a){switch(a.label){case 0:return r=typeof e.request=="string"?e.request:e.request.url,(0,rNe.isGraphURL)(r)||e.customHosts&&(0,rNe.isCustomHost)(r,e.customHosts)?(n=(0,hM.getRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER),n||(n=(0,hM.generateUUID)(),(0,hM.setRequestHeader)(e.request,e.options,t.CLIENT_REQUEST_ID_HEADER,n)),i="".concat(t.PRODUCT_NAME,"/").concat(Ajt.PACKAGE_VERSION),s=void 0,e.middlewareControl instanceof Cjt.MiddlewareControl&&(s=e.middlewareControl.getMiddlewareOptions(Tjt.TelemetryHandlerOptions)),s&&(o=s.getFeatureUsage(),i+=" (".concat(t.FEATURE_USAGE_STRING,"=").concat(o,")")),(0,hM.appendRequestHeader)(e.request,e.options,t.SDK_VERSION_HEADER,i)):(delete e.options.headers[t.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[t.SDK_VERSION_HEADER]),[4,this.nextMiddleware.execute(e)];case 1:return[2,a.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t.CLIENT_REQUEST_ID_HEADER="client-request-id",t.SDK_VERSION_HEADER="SdkVersion",t.PRODUCT_NAME="graph-js",t.FEATURE_USAGE_STRING="featureUsage",t})();mM.TelemetryHandler=Ojt});var nNe=m(gM=>{"use strict";Object.defineProperty(gM,"__esModule",{value:!0});gM.MiddlewareFactory=void 0;var xjt=iM(),Ijt=oM(),Rjt=B9(),Djt=F9(),kjt=pM(),Mjt=cM(),Pjt=yM(),Njt=function(){return typeof process=="object"&&typeof require=="function"},Fjt=(function(){function t(){}return t.getDefaultMiddlewareChain=function(e){var r=[],n=new xjt.AuthenticationHandler(e),i=new Mjt.RetryHandler(new Djt.RetryHandlerOptions),s=new Pjt.TelemetryHandler,o=new Ijt.HTTPMessageHandler;if(r.push(n),r.push(i),Njt()){var a=new kjt.RedirectHandler(new Rjt.RedirectHandlerOptions);r.push(a)}return r.push(s),r.push(o),r},t})();gM.MiddlewareFactory=Fjt});var bM=m(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0});EM.ChaosStrategy=void 0;var iNe;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(iNe||(EM.ChaosStrategy=iNe={}))});var yre=m(_M=>{"use strict";Object.defineProperty(_M,"__esModule",{value:!0});_M.ChaosHandlerOptions=void 0;var Bjt=bM(),qjt=(function(){function t(e,r,n,i,s,o){if(e===void 0&&(e=Bjt.ChaosStrategy.RANDOM),r===void 0&&(r="Some error Happened"),this.chaosStrategy=e,this.statusCode=n,this.statusMessage=r,this.chaosPercentage=i!==void 0?i:10,this.responseBody=s,this.headers=o,this.chaosPercentage>100)throw new Error("Error Pecentage can not be more than 100")}return t})();_M.ChaosHandlerOptions=qjt});var sNe=m(s_=>{"use strict";Object.defineProperty(s_,"__esModule",{value:!0});s_.httpStatusCode=s_.methodStatusCode=void 0;s_.methodStatusCode={GET:[429,500,502,503,504],POST:[429,500,502,503,504,507],PUT:[429,500,502,503,504,507],PATCH:[429,500,502,503,504],DELETE:[429,500,502,503,504,507]};s_.httpStatusCode={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}});var uNe=m(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0});SM.ChaosHandler=void 0;var vM=(Yn(),Jt(Jn)),Ljt=sm(),jjt=e_(),oNe=sNe(),gre=yre(),aNe=bM(),$jt=(function(){function t(e,r){e===void 0&&(e=new gre.ChaosHandlerOptions),this.options=e,this.manualMap=r}return t.prototype.createResponseHeaders=function(e,r,n){var i=e.headers?new Headers(e.headers):new Headers;return i.append("Cache-Control","no-store"),i.append("request-id",r),i.append("client-request-id",r),i.append("x-ms-ags-diagnostic",""),i.append("Date",n),i.append("Strict-Transport-Security",""),e.statusCode===429&&i.append("retry-after","3"),i},t.prototype.createResponseBody=function(e,r,n){if(e.responseBody)return e.responseBody;var i;if(e.statusCode>=400){var s=oNe.httpStatusCode[e.statusCode],o=e.statusMessage;i={error:{code:s,message:o,innerError:{"request-id":r,date:n}}}}else i={};return i},t.prototype.createResponse=function(e,r){var n=r.request,i=(0,jjt.generateUUID)(),s=new Date,o=this.createResponseHeaders(e,i,s.toString()),a=this.createResponseBody(e,i,s.toString()),u={url:n,status:e.statusCode,statusText:e.statusMessage,headers:o};r.response=new Response(typeof a=="string"?a:JSON.stringify(a),u)},t.prototype.sendRequest=function(e,r){return vM.__awaiter(this,void 0,void 0,function(){return vM.__generator(this,function(n){switch(n.label){case 0:return this.setStatusCode(e,r.request,r.options.method),e.chaosStrategy===aNe.ChaosStrategy.MANUAL&&!this.nextMiddleware||Math.floor(Math.random()*100)<e.chaosPercentage?(this.createResponse(e,r),[3,3]):[3,1];case 1:return this.nextMiddleware?[4,this.nextMiddleware.execute(r)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.getRandomStatusCode=function(e){var r=oNe.methodStatusCode[e];return r[Math.floor(Math.random()*r.length)]},t.prototype.getRelativeURL=function(e){var r=/https?:\/\/graph\.microsoft\.com\/[^/]+(.+?)(\?|$)/,n;return r.exec(e)!==null&&(n=r.exec(e)[1]),n},t.prototype.setStatusCode=function(e,r,n){var i=this;if(e.chaosStrategy===aNe.ChaosStrategy.MANUAL){if(e.statusCode===void 0){var s=this.getRelativeURL(r);this.manualMap.get(s)!==void 0?this.manualMap.get(s).get(n)!==void 0&&(e.statusCode=this.manualMap.get(s).get(n)):this.manualMap.forEach(function(o,a){var u=new RegExp(a+"$");u.test(s)&&i.manualMap.get(a).get(n)!==void 0&&(e.statusCode=i.manualMap.get(a).get(n))})}}else e.statusCode=this.getRandomStatusCode(n)},t.prototype.getOptions=function(e){var r;return e.middlewareControl instanceof Ljt.MiddlewareControl&&(r=e.middlewareControl.getMiddlewareOptions(gre.ChaosHandlerOptions)),typeof r>"u"&&(r=Object.assign(new gre.ChaosHandlerOptions,this.options)),r},t.prototype.execute=function(e){return vM.__awaiter(this,void 0,void 0,function(){var r;return vM.__generator(this,function(n){switch(n.label){case 0:return r=this.getOptions(e),[4,this.sendRequest(r,e)];case 1:return[2,n.sent()]}})})},t.prototype.setNext=function(e){this.nextMiddleware=e},t})();SM.ChaosHandler=$jt});var q9=m(wM=>{"use strict";Object.defineProperty(wM,"__esModule",{value:!0});wM.ResponseType=void 0;var cNe;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(cNe||(wM.ResponseType=cNe={}))});var bre=m(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.GraphResponseHandler=o_.DocumentType=void 0;var AM=(Yn(),Jt(Jn)),vg=q9(),Ere;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(Ere||(o_.DocumentType=Ere={}));var CM;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(CM||(CM={}));var TM;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(TM||(TM={}));var Kjt=(function(){function t(){}return t.parseDocumentResponse=function(e,r){return typeof DOMParser<"u"?new Promise(function(n,i){e.text().then(function(s){try{var o=new DOMParser,a=o.parseFromString(s,r);n(a)}catch(u){i(u)}})}):Promise.resolve(e.body)},t.convertResponse=function(e,r){return AM.__awaiter(this,void 0,void 0,function(){var n,i,s,o;return AM.__generator(this,function(a){switch(a.label){case 0:if(e.status===204)return[2,Promise.resolve()];switch(i=e.headers.get("Content-type"),s=r,s){case vg.ResponseType.ARRAYBUFFER:return[3,1];case vg.ResponseType.BLOB:return[3,3];case vg.ResponseType.DOCUMENT:return[3,5];case vg.ResponseType.JSON:return[3,7];case vg.ResponseType.STREAM:return[3,9];case vg.ResponseType.TEXT:return[3,11]}return[3,13];case 1:return[4,e.arrayBuffer()];case 2:return n=a.sent(),[3,24];case 3:return[4,e.blob()];case 4:return n=a.sent(),[3,24];case 5:return[4,t.parseDocumentResponse(e,Ere.TEXT_XML)];case 6:return n=a.sent(),[3,24];case 7:return[4,e.json()];case 8:return n=a.sent(),[3,24];case 9:return[4,Promise.resolve(e.body)];case 10:return n=a.sent(),[3,24];case 11:return[4,e.text()];case 12:return n=a.sent(),[3,24];case 13:return i===null?[3,22]:(o=i.split(";")[0],new RegExp(TM.DOCUMENT).test(o)?[4,t.parseDocumentResponse(e,o)]:[3,15]);case 14:return n=a.sent(),[3,21];case 15:return new RegExp(TM.IMAGE).test(o)?(n=e.blob(),[3,21]):[3,16];case 16:return o!==CM.TEXT_PLAIN?[3,18]:[4,e.text()];case 17:return n=a.sent(),[3,21];case 18:return o!==CM.APPLICATION_JSON?[3,20]:[4,e.json()];case 19:return n=a.sent(),[3,21];case 20:n=Promise.resolve(e.body),a.label=21;case 21:return[3,23];case 22:n=Promise.resolve(e.body),a.label=23;case 23:return[3,24];case 24:return[2,n]}})})},t.getResponse=function(e,r,n){return AM.__awaiter(this,void 0,void 0,function(){var i;return AM.__generator(this,function(s){switch(s.label){case 0:return r!==vg.ResponseType.RAW?[3,1]:[2,Promise.resolve(e)];case 1:return[4,t.convertResponse(e,r)];case 2:if(i=s.sent(),e.ok)if(typeof n=="function")n(null,i);else return[2,i];else throw i;s.label=3;case 3:return[2]}})})},t})();o_.GraphResponseHandler=Kjt});var _re=m(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0});OM.Range=void 0;var Ujt=(function(){function t(e,r){e===void 0&&(e=-1),r===void 0&&(r=-1),this.minValue=e,this.maxValue=r}return t})();OM.Range=Ujt});var vre=m(xM=>{"use strict";Object.defineProperty(xM,"__esModule",{value:!0});xM.UploadResult=void 0;var Vjt=(function(){function t(e,r){this._location=r,this._responseBody=e}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){this._location=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"responseBody",{get:function(){return this._responseBody},set:function(e){this._responseBody=e},enumerable:!1,configurable:!0}),t.CreateUploadResult=function(e,r){return new t(e,r.get("location"))},t})();xM.UploadResult=Vjt});var wre=m(RM=>{"use strict";Object.defineProperty(RM,"__esModule",{value:!0});RM.LargeFileUploadTask=void 0;var $a=(Yn(),Jt(Jn)),Sre=Nf(),Gjt=bre(),lNe=q9(),IM=_re(),Hjt=vre(),zjt=(function(){function t(e,r,n,i){if(i===void 0&&(i={}),this.DEFAULT_FILE_SIZE=5*1024*1024,this.client=e,r.sliceFile)this.file=r;else throw new Sre.GraphClientError("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=r,i.rangeSize||(i.rangeSize=this.DEFAULT_FILE_SIZE),this.options=i,this.uploadSession=n,this.nextRange=new IM.Range(0,this.options.rangeSize-1)}return t.createUploadSession=function(e,r,n,i){return i===void 0&&(i={}),$a.__awaiter(this,void 0,void 0,function(){var s,o;return $a.__generator(this,function(a){switch(a.label){case 0:return[4,e.api(r).headers(i).post(n)];case 1:return s=a.sent(),o={url:s.uploadUrl,expiry:new Date(s.expirationDateTime),isCancelled:!1},[2,o]}})})},t.prototype.parseRange=function(e){var r=e[0];if(typeof r>"u"||r==="")return new IM.Range;var n=r.split("-"),i=parseInt(n[0],10),s=parseInt(n[1],10);return Number.isNaN(s)&&(s=this.file.size-1),new IM.Range(i,s)},t.prototype.updateTaskStatus=function(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)},t.prototype.getNextRange=function(){if(this.nextRange.minValue===-1)return this.nextRange;var e=this.nextRange.minValue,r=e+this.options.rangeSize-1;return r>=this.file.size&&(r=this.file.size-1),new IM.Range(e,r)},t.prototype.sliceFile=function(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new Sre.GraphClientError("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")},t.prototype.upload=function(){return $a.__awaiter(this,void 0,void 0,function(){var e,r,n,i,s,o,a;return $a.__generator(this,function(u){switch(u.label){case 0:e=this.options&&this.options.uploadEventHandlers,u.label=1;case 1:if(this.uploadSession.isCancelled)return[3,5];if(r=this.getNextRange(),r.maxValue===-1)throw n=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file"),n.name="Invalid Session",n;return[4,this.file.sliceFile(r)];case 2:return i=u.sent(),[4,this.uploadSliceGetRawResponse(i,r,this.file.size)];case 3:if(s=u.sent(),!s)throw new Sre.GraphClientError("Something went wrong! Large file upload slice response is null.");return[4,Gjt.GraphResponseHandler.getResponse(s)];case 4:return o=u.sent(),s.status===201||s.status===200&&o.id?(this.reportProgress(e,r),[2,Hjt.UploadResult.CreateUploadResult(o,s.headers)]):(a={expirationDateTime:o.expirationDateTime||o.ExpirationDateTime,nextExpectedRanges:o.NextExpectedRanges||o.nextExpectedRanges},this.updateTaskStatus(a),this.reportProgress(e,r),[3,1]);case 5:return[2]}})})},t.prototype.reportProgress=function(e,r){e&&e.progress&&e.progress(r,e.extraCallbackParam)},t.prototype.uploadSlice=function(e,r,n){return $a.__awaiter(this,void 0,void 0,function(){return $a.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.uploadSliceGetRawResponse=function(e,r,n){return $a.__awaiter(this,void 0,void 0,function(){return $a.__generator(this,function(i){switch(i.label){case 0:return[4,this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(r.maxValue-r.minValue+1),"Content-Range":"bytes ".concat(r.minValue,"-").concat(r.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType(lNe.ResponseType.RAW).put(e)];case 1:return[2,i.sent()]}})})},t.prototype.cancel=function(){return $a.__awaiter(this,void 0,void 0,function(){var e;return $a.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).responseType(lNe.ResponseType.RAW).delete()];case 1:return e=r.sent(),e.status===204&&(this.uploadSession.isCancelled=!0),[2,e]}})})},t.prototype.getStatus=function(){return $a.__awaiter(this,void 0,void 0,function(){var e;return $a.__generator(this,function(r){switch(r.label){case 0:return[4,this.client.api(this.uploadSession.url).get()];case 1:return e=r.sent(),this.updateTaskStatus(e),[2,e]}})})},t.prototype.resume=function(){return $a.__awaiter(this,void 0,void 0,function(){return $a.__generator(this,function(e){switch(e.label){case 0:return[4,this.getStatus()];case 1:return e.sent(),[4,this.upload()];case 2:return[2,e.sent()]}})})},t.prototype.getUploadSession=function(){return this.uploadSession},t})();RM.LargeFileUploadTask=zjt});var Are=m(DM=>{"use strict";Object.defineProperty(DM,"__esModule",{value:!0});DM.FileUpload=void 0;var Wjt=Nf(),Jjt=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new Wjt.GraphClientError("Please provide the upload content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return this.content.slice(e.minValue,e.maxValue+1)},t})();DM.FileUpload=Jjt});var Cre=m(kM=>{"use strict";Object.defineProperty(kM,"__esModule",{value:!0});kM.getValidRangeSize=void 0;var Yjt=5*1024*1024,Qjt=function(t){return t>320*1024&&(t=Math.floor(t/(320*1024))*320*1024),t},Xjt=function(t){t===void 0&&(t=Yjt);var e=60*1024*1024;return t>e&&(t=e),Qjt(t)};kM.getValidRangeSize=Xjt});var pNe=m(MM=>{"use strict";Object.defineProperty(MM,"__esModule",{value:!0});MM.OneDriveLargeFileUploadTask=void 0;var Ff=(Yn(),Jt(Jn)),dNe=Nf(),Zjt=Are(),e$t=wre(),t$t=Cre(),r$t=(function(t){Ff.__extends(e,t);function e(r,n,i,s){return t.call(this,r,n,i,s)||this}return e.constructCreateSessionUrl=function(r,n){return n===void 0&&(n=e.DEFAULT_UPLOAD_PATH),r=r.trim(),n=n.trim(),n===""&&(n="/"),n[0]!=="/"&&(n="/".concat(n)),n[n.length-1]!=="/"&&(n="".concat(n,"/")),"/me/drive/root:".concat(n.split("/").map(function(i){return encodeURIComponent(i)}).join("/")).concat(encodeURIComponent(r),":/createUploadSession")},e.getFileInfo=function(r,n){var i,s;if(typeof Blob<"u"&&r instanceof Blob)i=new File([r],n),s=i.size;else if(typeof File<"u"&&r instanceof File)i=r,s=i.size;else if(typeof Uint8Array<"u"&&r instanceof Uint8Array){var o=r;s=o.byteLength,i=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}return{content:i,size:s}},e.create=function(r,n,i){return Ff.__awaiter(this,void 0,void 0,function(){var s,o,a;return Ff.__generator(this,function(u){if(!r||!n||!i)throw new dNe.GraphClientError("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");return s=i.fileName,o=e.getFileInfo(n,s),a=new Zjt.FileUpload(o.content,s,o.size),[2,this.createTaskWithFileObject(r,a,i)]})})},e.createTaskWithFileObject=function(r,n,i){return Ff.__awaiter(this,void 0,void 0,function(){var s,o,a,u;return Ff.__generator(this,function(c){switch(c.label){case 0:if(!r||!n||!i)throw new dNe.GraphClientError("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");return s=i.uploadSessionURL?i.uploadSessionURL:e.constructCreateSessionUrl(i.fileName,i.path),o={fileName:i.fileName,fileDescription:i.fileDescription,conflictBehavior:i.conflictBehavior},[4,e.createUploadSession(r,s,o)];case 1:return a=c.sent(),u=(0,t$t.getValidRangeSize)(i.rangeSize),[2,new e(r,n,a,{rangeSize:u,uploadEventHandlers:i.uploadEventHandlers})]}})})},e.createUploadSession=function(r,n,i){return Ff.__awaiter(this,void 0,void 0,function(){var s;return Ff.__generator(this,function(o){return s={item:{"@microsoft.graph.conflictBehavior":i?.conflictBehavior||"rename",name:i?.fileName,description:i?.fileDescription}},[2,t.createUploadSession.call(this,r,n,s)]})})},e.prototype.commit=function(r,n){return n===void 0&&(n="rename"),Ff.__awaiter(this,void 0,void 0,function(){var i;return Ff.__generator(this,function(s){switch(s.label){case 0:return i={name:this.file.name,"@microsoft.graph.conflictBehavior":n,"@microsoft.graph.sourceUrl":this.uploadSession.url},[4,this.client.api(r).put(i)];case 1:return[2,s.sent()]}})})},e.DEFAULT_UPLOAD_PATH="/",e})(e$t.LargeFileUploadTask);MM.OneDriveLargeFileUploadTask=r$t});var hNe=m(PM=>{"use strict";Object.defineProperty(PM,"__esModule",{value:!0});PM.StreamUpload=void 0;var fNe=(Yn(),Jt(Jn)),L9=Nf(),n$t=(function(){function t(e,r,n){if(this.content=e,this.name=r,this.size=n,!e||!r||!n)throw new L9.GraphClientError("Please provide the Readable Stream content, name of the file and size of the file")}return t.prototype.sliceFile=function(e){return fNe.__awaiter(this,void 0,void 0,function(){var r,n,i,s,o,a,u;return fNe.__generator(this,function(c){switch(c.label){case 0:if(r=e.maxValue-e.minValue+1,n=[],this.previousSlice){if(e.minValue<this.previousSlice.range.minValue)throw new L9.GraphClientError("An error occurred while uploading the stream. Please restart the stream upload from the first byte of the file.");if(e.minValue<this.previousSlice.range.maxValue){if(i=this.previousSlice.range.minValue,s=this.previousSlice.range.maxValue,e.minValue===i&&e.maxValue===s)return[2,this.previousSlice.fileSlice];if(e.maxValue===s)return[2,this.previousSlice.fileSlice.slice(e.minValue,e.maxValue+1)];n.push(this.previousSlice.fileSlice.slice(e.minValue,s+1)),r=e.maxValue-s}}return this.content&&this.content.readable?this.content.readableLength>=r?(n.push(this.content.read(r)),[3,3]):[3,1]:[3,4];case 1:return a=(o=n).push,[4,this.readNBytesFromStream(r)];case 2:a.apply(o,[c.sent()]),c.label=3;case 3:return[3,5];case 4:throw new L9.GraphClientError("Stream is not readable.");case 5:return u=Buffer.concat(n),this.previousSlice={fileSlice:u,range:e},[2,u]}})})},t.prototype.readNBytesFromStream=function(e){var r=this;return new Promise(function(n,i){var s=[],o=e,a=0;r.content.on("end",function(){if(o>0)return i(new L9.GraphClientError("Stream ended before reading required range size"))}),r.content.on("readable",function(){for(var u;a<e&&(u=r.content.read(o))!==null;)a+=u.length,s.push(u),o>0&&(o=e-a);if(a===e)return n(Buffer.concat(s));if(!r.content||!r.content.readable)return i(new L9.GraphClientError("Error encountered while reading the stream during the upload"))})})},t})();PM.StreamUpload=n$t});var mNe=m(NM=>{"use strict";Object.defineProperty(NM,"__esModule",{value:!0});NM.PageIterator=void 0;var a_=(Yn(),Jt(Jn)),i$t=(function(){function t(e,r,n,i){this.client=e,this.collection=r.value,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],this.callback=n,this.cursor=0,this.complete=!1,this.requestOptions=i}return t.prototype.iterationHelper=function(){if(this.collection===void 0)return!1;for(var e=!0;e&&this.cursor<this.collection.length;){var r=this.collection[this.cursor];e=this.callback(r),this.cursor++}return e},t.prototype.fetchAndUpdateNextPageData=function(){return a_.__awaiter(this,void 0,void 0,function(){var e,r;return a_.__generator(this,function(n){switch(n.label){case 0:return e=this.client.api(this.nextLink),this.requestOptions&&(this.requestOptions.headers&&(e=e.headers(this.requestOptions.headers)),this.requestOptions.middlewareOptions&&(e=e.middlewareOptions(this.requestOptions.middlewareOptions)),this.requestOptions.options&&(e=e.options(this.requestOptions.options))),[4,e.get()];case 1:return r=n.sent(),this.collection=r.value,this.cursor=0,this.nextLink=r["@odata.nextLink"],this.deltaLink=r["@odata.deltaLink"],[2]}})})},t.prototype.getDeltaLink=function(){return this.deltaLink},t.prototype.iterate=function(){return a_.__awaiter(this,void 0,void 0,function(){var e;return a_.__generator(this,function(r){switch(r.label){case 0:e=this.iterationHelper(),r.label=1;case 1:return e?this.nextLink===void 0?[3,3]:[4,this.fetchAndUpdateNextPageData()]:[3,5];case 2:return r.sent(),e=this.iterationHelper(),[3,4];case 3:e=!1,r.label=4;case 4:return[3,1];case 5:return this.nextLink===void 0&&this.cursor>=this.collection.length&&(this.complete=!0),[2]}})})},t.prototype.resume=function(){return a_.__awaiter(this,void 0,void 0,function(){return a_.__generator(this,function(e){return[2,this.iterate()]})})},t.prototype.isComplete=function(){return this.complete},t})();NM.PageIterator=i$t});var Tre=m(BM=>{"use strict";Object.defineProperty(BM,"__esModule",{value:!0});BM.CustomAuthenticationProvider=void 0;var FM=(Yn(),Jt(Jn)),yNe=Nf(),s$t=(function(){function t(e){this.provider=e}return t.prototype.getAccessToken=function(){return FM.__awaiter(this,void 0,void 0,function(){var e=this;return FM.__generator(this,function(r){return[2,new Promise(function(n,i){e.provider(function(s,o){return FM.__awaiter(e,void 0,void 0,function(){var a,u;return FM.__generator(this,function(c){switch(c.label){case 0:return o?(n(o),[3,3]):[3,1];case 1:return s||(a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md",s=new yNe.GraphClientError(a)),[4,yNe.GraphClientError.setGraphClientError(s)];case 2:u=c.sent(),i(u),c.label=3;case 3:return[2]}})})})})]})})},t})();BM.CustomAuthenticationProvider=s$t});var Ore=m(qM=>{"use strict";Object.defineProperty(qM,"__esModule",{value:!0});qM.GraphError=void 0;var o$t=(Yn(),Jt(Jn)),a$t=(function(t){o$t.__extends(e,t);function e(r,n,i){r===void 0&&(r=-1);var s=t.call(this,n||i&&i.message)||this;return Object.setPrototypeOf(s,e.prototype),s.statusCode=r,s.code=null,s.requestId=null,s.date=new Date,s.body=null,s.stack=i?i.stack:s.stack,s}return e})(Error);qM.GraphError=a$t});var ENe=m(LM=>{"use strict";Object.defineProperty(LM,"__esModule",{value:!0});LM.GraphErrorHandler=void 0;var gNe=(Yn(),Jt(Jn)),xre=Ore(),u$t=(function(){function t(){}return t.constructError=function(e,r,n){var i=new xre.GraphError(r,"",e);return e.name!==void 0&&(i.code=e.name),i.body=e.toString(),i.date=new Date,i.headers=n?.headers,i},t.constructErrorFromResponse=function(e,r,n){var i=e.error,s=new xre.GraphError(r,i.message);return s.code=i.code,i.innerError!==void 0&&(s.requestId=i.innerError["request-id"],s.date=new Date(i.innerError.date)),s.body=JSON.stringify(i),s.headers=n?.headers,s},t.getError=function(e,r,n,i){return e===void 0&&(e=null),r===void 0&&(r=-1),gNe.__awaiter(this,void 0,void 0,function(){var s;return gNe.__generator(this,function(o){if(e&&e.error?s=t.constructErrorFromResponse(e,r,i):e instanceof Error?s=t.constructError(e,r,i):(s=new xre.GraphError(r),s.body=e),typeof n=="function")n(s,null);else return[2,s];return[2]})})},t})();LM.GraphErrorHandler=u$t});var Ire=m(jM=>{"use strict";Object.defineProperty(jM,"__esModule",{value:!0});jM.GraphRequest=void 0;var In=(Yn(),Jt(Jn)),c$t=Nf(),l$t=ENe(),j9=eM(),d$t=bre(),p$t=sm(),Sg=N9(),f$t=q9(),h$t=(function(){function t(e,r,n){var i=this;this.parsePath=function(s){if(s.indexOf("https://")!==-1){s=s.replace("https://","");var o=s.indexOf("/");o!==-1&&(i.urlComponents.host="https://"+s.substring(0,o),s=s.substring(o+1,s.length));var a=s.indexOf("/");a!==-1&&(i.urlComponents.version=s.substring(0,a),s=s.substring(a+1,s.length))}s.charAt(0)==="/"&&(s=s.substr(1));var u=s.indexOf("?");if(u===-1)i.urlComponents.path=s;else{i.urlComponents.path=s.substr(0,u);for(var c=s.substring(u+1,s.length).split("&"),l=0,d=c;l<d.length;l++){var p=d[l];i.parseQueryParameter(p)}}},this.httpClient=e,this.config=r,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}return t.prototype.addCsvQueryParameter=function(e,r,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";var i=[];n.length>1&&typeof r=="string"?i=Array.prototype.slice.call(n):typeof r=="string"?i.push(r):i=i.concat(r),this.urlComponents.oDataQueryParams[e]+=i.join(",")},t.prototype.buildFullUrl=function(){var e=(0,j9.urlJoin)([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e},t.prototype.createQueryString=function(){var e=this.urlComponents,r=[];if(Object.keys(e.oDataQueryParams).length!==0)for(var n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&r.push(n+"="+e.oDataQueryParams[n]);if(Object.keys(e.otherURLQueryParams).length!==0)for(var n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&r.push(n+"="+e.otherURLQueryParams[n]);if(e.otherURLQueryOptions.length!==0)for(var i=0,s=e.otherURLQueryOptions;i<s.length;i++){var o=s[i];r.push(o)}return r.length>0?"?"+r.join("&"):""},t.prototype.parseQueryParameter=function(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1)for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var s=i[n];this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&this.setURLComponentsQueryParamater(o,e[o]);return this},t.prototype.parseQueryParamenterString=function(e){if(this.isValidQueryKeyValuePair(e)){var r=e.indexOf("="),n=e.substring(0,r),i=e.substring(r+1);this.setURLComponentsQueryParamater(n,i)}else this.urlComponents.otherURLQueryOptions.push(e)},t.prototype.setURLComponentsQueryParamater=function(e,r){if(j9.oDataQueryNames.indexOf(e)!==-1){var n=this.urlComponents.oDataQueryParams[e],i=n&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=i?n+","+r:r}else this.urlComponents.otherURLQueryParams[e]=r},t.prototype.isValidQueryKeyValuePair=function(e){var r=e.indexOf("=");if(r===-1)return!1;var n=e.indexOf("(");return!(n!==-1&&e.indexOf("(")<r)},t.prototype.updateRequestOptions=function(e){var r=In.__assign({},e.headers);if(this.config.fetchOptions!==void 0){var n=In.__assign({},this.config.fetchOptions);Object.assign(e,n),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=In.__assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(r,e.headers),Object.assign(r,this._headers),e.headers=r},t.prototype.send=function(e,r,n){var i;return In.__awaiter(this,void 0,void 0,function(){var s,o,a,u,c,l,d,p;return In.__generator(this,function(f){switch(f.label){case 0:o=new p$t.MiddlewareControl(this._middlewareOptions),this.updateRequestOptions(r),a=(i=this.config)===null||i===void 0?void 0:i.customHosts,f.label=1;case 1:return f.trys.push([1,4,,6]),[4,this.httpClient.sendRequest({request:e,options:r,middlewareControl:o,customHosts:a})];case 2:return u=f.sent(),s=u.response,[4,d$t.GraphResponseHandler.getResponse(s,this._responseType,n)];case 3:return c=f.sent(),[2,c];case 4:if(l=f.sent(),l instanceof c$t.GraphClientError)throw l;return d=void 0,s&&(d=s.status),[4,l$t.GraphErrorHandler.getError(l,d,n,s)];case 5:throw p=f.sent(),p;case 6:return[2]}})})},t.prototype.setHeaderContentType=function(){if(!this._headers){this.header("Content-Type","application/json");return}for(var e=Object.keys(this._headers),r=0,n=e;r<n.length;r++){var i=n[r];if(i.toLowerCase()==="content-type")return}this.header("Content-Type","application/json")},t.prototype.header=function(e,r){return this._headers[e]=r,this},t.prototype.headers=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._headers[r]=e[r]);return this},t.prototype.option=function(e,r){return this._options[e]=r,this},t.prototype.options=function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this._options[r]=e[r]);return this},t.prototype.middlewareOptions=function(e){return this._middlewareOptions=e,this},t.prototype.version=function(e){return this.urlComponents.version=e,this},t.prototype.responseType=function(e){return this._responseType=e,this},t.prototype.select=function(e){return this.addCsvQueryParameter("$select",e,arguments),this},t.prototype.expand=function(e){return this.addCsvQueryParameter("$expand",e,arguments),this},t.prototype.orderby=function(e){return this.addCsvQueryParameter("$orderby",e,arguments),this},t.prototype.filter=function(e){return this.urlComponents.oDataQueryParams.$filter=e,this},t.prototype.search=function(e){return this.urlComponents.oDataQueryParams.$search=e,this},t.prototype.top=function(e){return this.urlComponents.oDataQueryParams.$top=e,this},t.prototype.skip=function(e){return this.urlComponents.oDataQueryParams.$skip=e,this},t.prototype.skipToken=function(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this},t.prototype.count=function(e){return e===void 0&&(e=!0),this.urlComponents.oDataQueryParams.$count=e.toString(),this},t.prototype.query=function(e){return this.parseQueryParameter(e)},t.prototype.get=function(e){return In.__awaiter(this,void 0,void 0,function(){var r,n,i;return In.__generator(this,function(s){switch(s.label){case 0:return r=this.buildFullUrl(),n={method:Sg.RequestMethod.GET},[4,this.send(r,n,e)];case 1:return i=s.sent(),[2,i]}})})},t.prototype.post=function(e,r){return In.__awaiter(this,void 0,void 0,function(){var n,i,s;return In.__generator(this,function(o){switch(o.label){case 0:return n=this.buildFullUrl(),i={method:Sg.RequestMethod.POST,body:(0,j9.serializeContent)(e)},s=e&&e.constructor&&e.constructor.name,s==="FormData"?i.headers={}:(this.setHeaderContentType(),i.headers=this._headers),[4,this.send(n,i,r)];case 1:return[2,o.sent()]}})})},t.prototype.create=function(e,r){return In.__awaiter(this,void 0,void 0,function(){return In.__generator(this,function(n){switch(n.label){case 0:return[4,this.post(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.put=function(e,r){return In.__awaiter(this,void 0,void 0,function(){var n,i;return In.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:Sg.RequestMethod.PUT,body:(0,j9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.patch=function(e,r){return In.__awaiter(this,void 0,void 0,function(){var n,i;return In.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),this.setHeaderContentType(),i={method:Sg.RequestMethod.PATCH,body:(0,j9.serializeContent)(e)},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t.prototype.update=function(e,r){return In.__awaiter(this,void 0,void 0,function(){return In.__generator(this,function(n){switch(n.label){case 0:return[4,this.patch(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.delete=function(e){return In.__awaiter(this,void 0,void 0,function(){var r,n;return In.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:Sg.RequestMethod.DELETE},[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.del=function(e){return In.__awaiter(this,void 0,void 0,function(){return In.__generator(this,function(r){switch(r.label){case 0:return[4,this.delete(e)];case 1:return[2,r.sent()]}})})},t.prototype.getStream=function(e){return In.__awaiter(this,void 0,void 0,function(){var r,n;return In.__generator(this,function(i){switch(i.label){case 0:return r=this.buildFullUrl(),n={method:Sg.RequestMethod.GET},this.responseType(f$t.ResponseType.STREAM),[4,this.send(r,n,e)];case 1:return[2,i.sent()]}})})},t.prototype.putStream=function(e,r){return In.__awaiter(this,void 0,void 0,function(){var n,i;return In.__generator(this,function(s){switch(s.label){case 0:return n=this.buildFullUrl(),i={method:Sg.RequestMethod.PUT,headers:{"Content-Type":"application/octet-stream"},body:e},[4,this.send(n,i,r)];case 1:return[2,s.sent()]}})})},t})();jM.GraphRequest=h$t});var Rre=m($M=>{"use strict";Object.defineProperty($M,"__esModule",{value:!0});$M.HTTPClient=void 0;var bNe=(Yn(),Jt(Jn)),m$t=(function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(!e||!e.length){var n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware.apply(this,e)}return t.prototype.setMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]},t.prototype.parseMiddleWareArray=function(e){e.forEach(function(r,n){n<e.length-1&&r.setNext(e[n+1])}),this.middleware=e[0]},t.prototype.sendRequest=function(e){return bNe.__awaiter(this,void 0,void 0,function(){var r;return bNe.__generator(this,function(n){switch(n.label){case 0:if(typeof e.request=="string"&&e.options===void 0)throw r=new Error,r.name="InvalidRequestOptions",r.message="Unable to execute the middleware, Please provide valid options for a request",r;return[4,this.middleware.execute(e)];case 1:return n.sent(),[2,e]}})})},t})();$M.HTTPClient=m$t});var vNe=m(KM=>{"use strict";Object.defineProperty(KM,"__esModule",{value:!0});KM.HTTPClientFactory=void 0;var y$t=(Yn(),Jt(Jn)),_Ne=Rre(),g$t=iM(),E$t=oM(),b$t=B9(),_$t=F9(),v$t=pM(),S$t=cM(),w$t=yM(),A$t=function(){return typeof process=="object"&&typeof require=="function"},C$t=(function(){function t(){}return t.createWithAuthenticationProvider=function(e){var r=new g$t.AuthenticationHandler(e),n=new S$t.RetryHandler(new _$t.RetryHandlerOptions),i=new w$t.TelemetryHandler,s=new E$t.HTTPMessageHandler;if(r.setNext(n),A$t()){var o=new v$t.RedirectHandler(new b$t.RedirectHandlerOptions);n.setNext(o),o.setNext(i)}else n.setNext(i);return i.setNext(s),t.createWithMiddleware(r)},t.createWithMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(_Ne.HTTPClient.bind.apply(_Ne.HTTPClient,y$t.__spreadArray([void 0],e,!1)))},t})();KM.HTTPClientFactory=C$t});var SNe=m(UM=>{"use strict";Object.defineProperty(UM,"__esModule",{value:!0});UM.validatePolyFilling=void 0;var T$t=function(){if(typeof Promise>"u"&&typeof fetch>"u"){var t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){var t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){var t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};UM.validatePolyFilling=T$t});var CNe=m(VM=>{"use strict";Object.defineProperty(VM,"__esModule",{value:!0});VM.Client=void 0;var O$t=(Yn(),Jt(Jn)),wNe=dre(),x$t=Tre(),I$t=Ire(),ANe=Rre(),R$t=vNe(),D$t=SNe(),k$t=(function(){function t(e){this.config={baseUrl:wNe.GRAPH_BASE_URL,debugLogging:!1,defaultVersion:wNe.GRAPH_API_VERSION},(0,D$t.validatePolyFilling)();for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);var n;if(e.authProvider!==void 0&&e.middleware!==void 0){var i=new Error;throw i.name="AmbiguityInInitialization",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",i}else if(e.authProvider!==void 0)n=R$t.HTTPClientFactory.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new(ANe.HTTPClient.bind.apply(ANe.HTTPClient,O$t.__spreadArray([void 0],[].concat(e.middleware),!1)));else{var i=new Error;throw i.name="InvalidMiddlewareChain",i.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",i}this.httpClient=n}return t.init=function(e){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=n==="authProvider"?new x$t.CustomAuthenticationProvider(e[n]):e[n]);return t.initWithMiddleware(r)},t.initWithMiddleware=function(e){return new t(e)},t.prototype.api=function(e){return new I$t.GraphRequest(this.httpClient,this.config,e)},t})();VM.Client=k$t});var ONe=m(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.ResponseType=nt.GraphRequest=nt.GraphClientError=nt.GraphError=nt.CustomAuthenticationProvider=nt.Client=nt.PageIterator=nt.Range=nt.UploadResult=nt.FileUpload=nt.StreamUpload=nt.getValidRangeSize=nt.OneDriveLargeFileUploadTask=nt.LargeFileUploadTask=nt.ChaosHandler=nt.ChaosStrategy=nt.ChaosHandlerOptions=nt.TelemetryHandlerOptions=nt.FeatureUsageFlag=nt.RedirectHandlerOptions=nt.RetryHandlerOptions=nt.AuthenticationHandlerOptions=nt.MiddlewareFactory=nt.TelemetryHandler=nt.RedirectHandler=nt.RetryHandler=nt.HTTPMessageHandler=nt.AuthenticationHandler=nt.BatchResponseContent=nt.BatchRequestContent=void 0;var M$t=$Pe();Object.defineProperty(nt,"BatchRequestContent",{enumerable:!0,get:function(){return M$t.BatchRequestContent}});var P$t=KPe();Object.defineProperty(nt,"BatchResponseContent",{enumerable:!0,get:function(){return P$t.BatchResponseContent}});var N$t=iM();Object.defineProperty(nt,"AuthenticationHandler",{enumerable:!0,get:function(){return N$t.AuthenticationHandler}});var F$t=oM();Object.defineProperty(nt,"HTTPMessageHandler",{enumerable:!0,get:function(){return F$t.HTTPMessageHandler}});var B$t=cM();Object.defineProperty(nt,"RetryHandler",{enumerable:!0,get:function(){return B$t.RetryHandler}});var q$t=pM();Object.defineProperty(nt,"RedirectHandler",{enumerable:!0,get:function(){return q$t.RedirectHandler}});var L$t=yM();Object.defineProperty(nt,"TelemetryHandler",{enumerable:!0,get:function(){return L$t.TelemetryHandler}});var j$t=nNe();Object.defineProperty(nt,"MiddlewareFactory",{enumerable:!0,get:function(){return j$t.MiddlewareFactory}});var $$t=pre();Object.defineProperty(nt,"AuthenticationHandlerOptions",{enumerable:!0,get:function(){return $$t.AuthenticationHandlerOptions}});var K$t=F9();Object.defineProperty(nt,"RetryHandlerOptions",{enumerable:!0,get:function(){return K$t.RetryHandlerOptions}});var U$t=B9();Object.defineProperty(nt,"RedirectHandlerOptions",{enumerable:!0,get:function(){return U$t.RedirectHandlerOptions}});var TNe=r_();Object.defineProperty(nt,"FeatureUsageFlag",{enumerable:!0,get:function(){return TNe.FeatureUsageFlag}});Object.defineProperty(nt,"TelemetryHandlerOptions",{enumerable:!0,get:function(){return TNe.TelemetryHandlerOptions}});var V$t=yre();Object.defineProperty(nt,"ChaosHandlerOptions",{enumerable:!0,get:function(){return V$t.ChaosHandlerOptions}});var G$t=bM();Object.defineProperty(nt,"ChaosStrategy",{enumerable:!0,get:function(){return G$t.ChaosStrategy}});var H$t=uNe();Object.defineProperty(nt,"ChaosHandler",{enumerable:!0,get:function(){return H$t.ChaosHandler}});var z$t=wre();Object.defineProperty(nt,"LargeFileUploadTask",{enumerable:!0,get:function(){return z$t.LargeFileUploadTask}});var W$t=pNe();Object.defineProperty(nt,"OneDriveLargeFileUploadTask",{enumerable:!0,get:function(){return W$t.OneDriveLargeFileUploadTask}});var J$t=Cre();Object.defineProperty(nt,"getValidRangeSize",{enumerable:!0,get:function(){return J$t.getValidRangeSize}});var Y$t=hNe();Object.defineProperty(nt,"StreamUpload",{enumerable:!0,get:function(){return Y$t.StreamUpload}});var Q$t=Are();Object.defineProperty(nt,"FileUpload",{enumerable:!0,get:function(){return Q$t.FileUpload}});var X$t=vre();Object.defineProperty(nt,"UploadResult",{enumerable:!0,get:function(){return X$t.UploadResult}});var Z$t=_re();Object.defineProperty(nt,"Range",{enumerable:!0,get:function(){return Z$t.Range}});var eKt=mNe();Object.defineProperty(nt,"PageIterator",{enumerable:!0,get:function(){return eKt.PageIterator}});var tKt=CNe();Object.defineProperty(nt,"Client",{enumerable:!0,get:function(){return tKt.Client}});var rKt=Tre();Object.defineProperty(nt,"CustomAuthenticationProvider",{enumerable:!0,get:function(){return rKt.CustomAuthenticationProvider}});var nKt=Ore();Object.defineProperty(nt,"GraphError",{enumerable:!0,get:function(){return nKt.GraphError}});var iKt=Nf();Object.defineProperty(nt,"GraphClientError",{enumerable:!0,get:function(){return iKt.GraphClientError}});var sKt=Ire();Object.defineProperty(nt,"GraphRequest",{enumerable:!0,get:function(){return sKt.GraphRequest}});var oKt=q9();Object.defineProperty(nt,"ResponseType",{enumerable:!0,get:function(){return oKt.ResponseType}})});var Bf,Dre,Rn,kre,$9,K9,U9,GM,on,HM,V9,zM,Xs,qf,WM,om=ce(()=>{"use strict";Bf=class extends Error{constructor(e,r,n,i=!0){super(e),this.statusCode=r,this.code=n,this.isOperational=i,Error.captureStackTrace(this,this.constructor),Object.setPrototypeOf(this,new.target.prototype)}},Dre=class extends Bf{constructor(e="Bad Request",r="BAD_REQUEST"){super(e,400,r)}},Rn=class extends Dre{constructor(e="Invalid input provided"){super(e,"INVALID_INPUT")}},kre=class extends Bf{constructor(e="Access forbidden",r="FORBIDDEN"){super(e,403,r)}},$9=class extends kre{constructor(e="You cannot re-register in the same month you deleted your account."){super(e,"REREGISTRATION_BLOCKED")}},K9=class extends Bf{constructor(e="Resource not found",r="NOT_FOUND"){super(e,404,r)}},U9=class extends K9{constructor(e="User not found"){super(e,"USER_NOT_FOUND")}},GM=class extends Bf{constructor(e="Internal server error",r="SERVER_ERROR"){super(e,500,r,!1)}},on=class extends GM{constructor(e="Database operation failed"){super(e,"DATABASE_ERROR")}},HM=class extends GM{constructor(e="External service error",r="EXTERNAL_SERVICE_ERROR"){super(e,r)}},V9=class extends HM{constructor(e="Azure authentication failed"){super(e,"AZURE_AUTH_ERROR")}},zM=class extends HM{constructor(e="Microsoft Graph API error"){super(e,"GRAPH_API_ERROR")}},Xs=class{static serialize(e){if(e)return e instanceof Bf?{name:e.name,message:e.message,code:e.code,statusCode:e.statusCode,isOperational:e.isOperational,stack:e.stack,...e.errors&&{errors:e.errors}}:e instanceof Error?{name:e.name,message:e.message,stack:e.stack}:typeof e=="object"?{...e}:{value:e}}},qf=class extends Bf{constructor(e="External service returned an error",r="BAD_GATEWAY"){super(e,502,r)}},WM=class extends Bf{constructor(e="External service timed out",r="GATEWAY_TIMEOUT"){super(e,504,r)}}});var xNe=m((sIr,aKt)=>{aKt.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hpexpire:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdelex:{arity:-5,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var u_=m(yu=>{"use strict";var uKt=yu&&yu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yu,"__esModule",{value:!0});yu.getKeyIndexes=yu.hasFlag=yu.exists=yu.list=void 0;var JM=uKt(xNe());yu.list=Object.keys(JM.default);var Mre={};yu.list.forEach(t=>{Mre[t]=JM.default[t].flags.reduce(function(e,r){return e[r]=!0,e},{})});function cKt(t){return!!JM.default[t]}yu.exists=cKt;function lKt(t,e){if(!Mre[t])throw new Error("Unknown command "+t);return!!Mre[t][e]}yu.hasFlag=lKt;function dKt(t,e,r){let n=JM.default[t];if(!n)throw new Error("Unknown command "+t);if(!Array.isArray(e))throw new Error("Expect args to be an array");let i=[],s=!!(r&&r.parseExternalKey),o=(u,c)=>{let l=[],d=Number(u[c]);for(let p=0;p<d;p++)l.push(p+c+1);return l},a=(u,c,l)=>{for(let d=c;d<u.length-1;d+=1)if(String(u[d]).toLowerCase()===l.toLowerCase())return d+1;return null};switch(t){case"zunionstore":case"zinterstore":case"zdiffstore":i.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":i.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{i.push(...o(e,0));break}case"georadius":{i.push(0);let u=a(e,5,"STORE");u&&i.push(u);let c=a(e,5,"STOREDIST");c&&i.push(c);break}case"georadiusbymember":{i.push(0);let u=a(e,4,"STORE");u&&i.push(u);let c=a(e,4,"STOREDIST");c&&i.push(c);break}case"sort":case"sort_ro":i.push(0);for(let u=1;u<e.length-1;u++){let c=e[u];if(typeof c!="string")continue;let l=c.toUpperCase();l==="GET"?(u+=1,c=e[u],c!=="#"&&(s?i.push([u,INe(c)]):i.push(u))):l==="BY"?(u+=1,s?i.push([u,INe(e[u])]):i.push(u)):l==="STORE"&&(u+=1,i.push(u))}break;case"migrate":if(e[2]==="")for(let u=5;u<e.length-1;u++){let c=e[u];if(typeof c=="string"&&c.toUpperCase()==="KEYS"){for(let l=u+1;l<e.length;l++)i.push(l);break}}else i.push(2);break;case"xreadgroup":case"xread":for(let u=t==="xread"?0:3;u<e.length-1;u++)if(String(e[u]).toUpperCase()==="STREAMS"){for(let c=u+1;c<=u+(e.length-1-u)/2;c++)i.push(c);break}break;default:if(n.step>0){let u=n.keyStart-1,c=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let l=u;l<c;l+=n.step)i.push(l)}break}return i}yu.getKeyIndexes=dKt;function INe(t){typeof t!="string"&&(t=String(t));let e=t.indexOf("->");return e===-1?t.length:e}});var RNe=m(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.tryCatch=am.errorObj=void 0;am.errorObj={e:{}};var Pre;function pKt(t,e){try{let r=Pre;return Pre=null,r.apply(this,arguments)}catch(r){return am.errorObj.e=r,am.errorObj}}function fKt(t){return Pre=t,pKt}am.tryCatch=fKt});var um=m(Nre=>{"use strict";Object.defineProperty(Nre,"__esModule",{value:!0});var c_=RNe();function DNe(t){setTimeout(function(){throw t},0)}function hKt(t,e,r){return typeof e=="function"&&t.then(n=>{let i;r!==void 0&&Object(r).spread&&Array.isArray(n)?i=c_.tryCatch(e).apply(void 0,[null].concat(n)):i=n===void 0?c_.tryCatch(e)(null):c_.tryCatch(e)(null,n),i===c_.errorObj&&DNe(i.e)},n=>{if(!n){let s=new Error(n+"");Object.assign(s,{cause:n}),n=s}let i=c_.tryCatch(e)(n);i===c_.errorObj&&DNe(i.e)}),t}Nre.default=hKt});var PNe=m((cIr,MNe)=>{"use strict";var kNe=require("assert"),G9=require("util");function l_(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}G9.inherits(l_,Error);Object.defineProperty(l_.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function Fre(t,e,r){kNe(e),kNe.strictEqual(typeof r,"number"),Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=r,this.buffer=e}G9.inherits(Fre,l_);Object.defineProperty(Fre.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function Bre(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}G9.inherits(Bre,l_);Object.defineProperty(Bre.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function YM(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}G9.inherits(YM,l_);Object.defineProperty(YM.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function qre(t){Object.defineProperty(this,"message",{value:t||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}G9.inherits(qre,YM);Object.defineProperty(qre.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});MNe.exports={RedisError:l_,ParserError:Fre,ReplyError:Bre,AbortError:YM,InterruptError:qre}});var BNe=m((lIr,FNe)=>{"use strict";var NNe=require("assert"),d_=class extends Error{get name(){return this.constructor.name}},Lre=class extends d_{constructor(e,r,n){NNe(r),NNe.strictEqual(typeof n,"number");let i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=n,this.buffer=r}get name(){return this.constructor.name}},jre=class extends d_{constructor(e){let r=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=r}get name(){return this.constructor.name}},QM=class extends d_{get name(){return this.constructor.name}},$re=class extends QM{get name(){return this.constructor.name}};FNe.exports={RedisError:d_,ParserError:Lre,ReplyError:jre,AbortError:QM,InterruptError:$re}});var wg=m((dIr,qNe)=>{"use strict";var mKt=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?PNe():BNe();qNe.exports=mKt});var H9=m((pIr,Kre)=>{var LNe=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],yKt=function(e){for(var r,n=0,i=0,s=[],o=e.length;n<o;n++)r=e.charCodeAt(n),r<128?s[i++]=r:r<2048?(s[i++]=r>>6|192,s[i++]=r&63|128):(r&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++n)&1023),s[i++]=r>>18|240,s[i++]=r>>12&63|128,s[i++]=r>>6&63|128,s[i++]=r&63|128):(s[i++]=r>>12|224,s[i++]=r>>6&63|128,s[i++]=r&63|128);return s},jNe=Kre.exports=function(e){for(var r,n=0,i=-1,s=0,o=0,a=typeof e=="string"?yKt(e):e,u=a.length;n<u;){if(r=a[n++],i===-1)r===123&&(i=n);else if(r!==125)o=LNe[(r^o>>8)&255]^o<<8;else if(n-1!==i)return o&16383;s=LNe[(r^s>>8)&255]^s<<8}return s&16383};Kre.exports.generateMulti=function(e){for(var r=1,n=e.length,i=jNe(e[0]);r<n;)if(jNe(e[r++])!==i)return-1;return i}});var WNe=m((fIr,zNe)=>{var KNe=9007199254740991,gKt="[object Arguments]",EKt="[object Function]",bKt="[object GeneratorFunction]",_Kt=/^(?:0|[1-9]\d*)$/;function UNe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function vKt(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var z9=Object.prototype,W9=z9.hasOwnProperty,VNe=z9.toString,SKt=z9.propertyIsEnumerable,$Ne=Math.max;function wKt(t,e){var r=MKt(t)||kKt(t)?vKt(t.length,String):[],n=r.length,i=!!n;for(var s in t)(e||W9.call(t,s))&&!(i&&(s=="length"||HNe(s,n)))&&r.push(s);return r}function AKt(t,e,r,n){return t===void 0||Ure(t,z9[r])&&!W9.call(n,r)?e:t}function CKt(t,e,r){var n=t[e];(!(W9.call(t,e)&&Ure(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function TKt(t){if(!Gre(t))return DKt(t);var e=RKt(t),r=[];for(var n in t)n=="constructor"&&(e||!W9.call(t,n))||r.push(n);return r}function GNe(t,e){return e=$Ne(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=$Ne(r.length-e,0),s=Array(i);++n<i;)s[n]=r[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=r[n];return o[e]=s,UNe(t,this,o)}}function OKt(t,e,r,n){r||(r={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(r[o],t[o],o,r,t):void 0;CKt(r,o,a===void 0?t[o]:a)}return r}function xKt(t){return GNe(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&IKt(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,s)}return e})}function HNe(t,e){return e=e??KNe,!!e&&(typeof t=="number"||_Kt.test(t))&&t>-1&&t%1==0&&t<e}function IKt(t,e,r){if(!Gre(r))return!1;var n=typeof e;return(n=="number"?Vre(r)&&HNe(e,r.length):n=="string"&&e in r)?Ure(r[e],t):!1}function RKt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||z9;return t===r}function DKt(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Ure(t,e){return t===e||t!==t&&e!==e}function kKt(t){return PKt(t)&&W9.call(t,"callee")&&(!SKt.call(t,"callee")||VNe.call(t)==gKt)}var MKt=Array.isArray;function Vre(t){return t!=null&&FKt(t.length)&&!NKt(t)}function PKt(t){return BKt(t)&&Vre(t)}function NKt(t){var e=Gre(t)?VNe.call(t):"";return e==EKt||e==bKt}function FKt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=KNe}function Gre(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function BKt(t){return!!t&&typeof t=="object"}var qKt=xKt(function(t,e,r,n){OKt(e,jKt(e),t,n)}),LKt=GNe(function(t){return t.push(void 0,AKt),UNe(qKt,void 0,t)});function jKt(t){return Vre(t)?wKt(t,!0):TKt(t)}zNe.exports=LKt});var QNe=m((hIr,YNe)=>{var $Kt=9007199254740991,KKt="[object Arguments]",UKt="[object Function]",VKt="[object GeneratorFunction]",Hre=Object.prototype,GKt=Hre.hasOwnProperty,JNe=Hre.toString,HKt=Hre.propertyIsEnumerable;function zKt(t){return JKt(t)&&GKt.call(t,"callee")&&(!HKt.call(t,"callee")||JNe.call(t)==KKt)}function WKt(t){return t!=null&&QKt(t.length)&&!YKt(t)}function JKt(t){return ZKt(t)&&WKt(t)}function YKt(t){var e=XKt(t)?JNe.call(t):"";return e==UKt||e==VKt}function QKt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$Kt}function XKt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ZKt(t){return!!t&&typeof t=="object"}YNe.exports=zKt});var XM=m(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.isArguments=cm.defaults=cm.noop=void 0;var eUt=WNe();cm.defaults=eUt;var tUt=QNe();cm.isArguments=tUt;function rUt(){}cm.noop=rUt});var ZNe=m((yIr,XNe)=>{var p_=1e3,f_=p_*60,h_=f_*60,Ag=h_*24,nUt=Ag*7,iUt=Ag*365.25;XNe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return sUt(t);if(r==="number"&&isFinite(t))return e.long?aUt(t):oUt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function sUt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*iUt;case"weeks":case"week":case"w":return r*nUt;case"days":case"day":case"d":return r*Ag;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h_;case"minutes":case"minute":case"mins":case"min":case"m":return r*f_;case"seconds":case"second":case"secs":case"sec":case"s":return r*p_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function oUt(t){var e=Math.abs(t);return e>=Ag?Math.round(t/Ag)+"d":e>=h_?Math.round(t/h_)+"h":e>=f_?Math.round(t/f_)+"m":e>=p_?Math.round(t/p_)+"s":t+"ms"}function aUt(t){var e=Math.abs(t);return e>=Ag?ZM(t,e,Ag,"day"):e>=h_?ZM(t,e,h_,"hour"):e>=f_?ZM(t,e,f_,"minute"):e>=p_?ZM(t,e,p_,"second"):t+" ms"}function ZM(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var zre=m((gIr,eFe)=>{function uUt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=ZNe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}eFe.exports=uUt});var tFe=m((Ka,eP)=>{Ka.formatArgs=lUt;Ka.save=dUt;Ka.load=pUt;Ka.useColors=cUt;Ka.storage=fUt();Ka.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ka.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cUt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function lUt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+eP.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Ka.log=console.debug||console.log||(()=>{});function dUt(t){try{t?Ka.storage.setItem("debug",t):Ka.storage.removeItem("debug")}catch{}}function pUt(){let t;try{t=Ka.storage.getItem("debug")||Ka.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function fUt(){try{return localStorage}catch{}}eP.exports=zre()(Ka);var{formatters:hUt}=eP.exports;hUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var nFe=m((Ts,rP)=>{var mUt=require("tty"),tP=require("util");Ts.init=SUt;Ts.log=bUt;Ts.formatArgs=gUt;Ts.save=_Ut;Ts.load=vUt;Ts.useColors=yUt;Ts.destroy=tP.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ts.colors=[6,2,3,4,5,1];try{let t=x3();t&&(t.stderr||t).level>=2&&(Ts.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ts.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function yUt(){return"colors"in Ts.inspectOpts?!!Ts.inspectOpts.colors:mUt.isatty(process.stderr.fd)}function gUt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+rP.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=EUt()+e+" "+t[0]}function EUt(){return Ts.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bUt(...t){return process.stderr.write(tP.formatWithOptions(Ts.inspectOpts,...t)+`
`)}function _Ut(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function vUt(){return process.env.DEBUG}function SUt(t){t.inspectOpts={};let e=Object.keys(Ts.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ts.inspectOpts[e[r]]}rP.exports=zre()(Ts);var{formatters:rFe}=rP.exports;rFe.o=function(t){return this.inspectOpts.colors=this.useColors,tP.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};rFe.O=function(t){return this.inspectOpts.colors=this.useColors,tP.inspect(t,this.inspectOpts)}});var iFe=m((EIr,Wre)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Wre.exports=tFe():Wre.exports=nFe()});var aFe=m(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.genRedactedString=Lf.getStringValue=Lf.MAX_ARGUMENT_LENGTH=void 0;var wUt=iFe(),Jre=200;Lf.MAX_ARGUMENT_LENGTH=Jre;var AUt="ioredis";function sFe(t){if(t!==null)switch(typeof t){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(t))return t.toString("hex");if(Array.isArray(t))return t.join(",");try{return JSON.stringify(t)}catch{return}case"string":return t}}Lf.getStringValue=sFe;function oFe(t,e){let{length:r}=t;return r<=e?t:t.slice(0,e)+' ... <REDACTED full-length="'+r+'">'}Lf.genRedactedString=oFe;function CUt(t){let e=(0,wUt.default)(`${AUt}:${t}`);function r(...n){if(e.enabled){for(let i=1;i<n.length;i++){let s=sFe(n[i]);typeof s=="string"&&s.length>Jre&&(n[i]=oFe(s,Jre))}return e.apply(null,n)}}return Object.defineProperties(r,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),r}Lf.default=CUt});var cFe=m(Yre=>{"use strict";Object.defineProperty(Yre,"__esModule",{value:!0});var uFe=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,TUt={RedisCloudFixed:{ca:uFe},RedisCloudFlexible:{ca:uFe}};Yre.default=TUt});var cs=m(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.noop=Gt.defaults=Gt.Debug=Gt.getPackageMeta=Gt.zipMap=Gt.CONNECTION_CLOSED_ERROR_MSG=Gt.shuffle=Gt.sample=Gt.resolveTLSProfile=Gt.parseURL=Gt.optimizeErrorStack=Gt.toArg=Gt.convertMapToArray=Gt.convertObjectToArray=Gt.timeout=Gt.packObject=Gt.isInt=Gt.wrapMultiResult=Gt.convertBufferToString=void 0;var OUt=require("fs"),xUt=require("path"),lFe=require("url"),Qre=XM();Object.defineProperty(Gt,"defaults",{enumerable:!0,get:function(){return Qre.defaults}});Object.defineProperty(Gt,"noop",{enumerable:!0,get:function(){return Qre.noop}});var IUt=aFe();Gt.Debug=IUt.default;var RUt=cFe();function dFe(t,e){if(t instanceof Buffer)return t.toString(e);if(Array.isArray(t)){let r=t.length,n=Array(r);for(let i=0;i<r;++i)n[i]=t[i]instanceof Buffer&&e==="utf8"?t[i].toString():dFe(t[i],e);return n}return t}Gt.convertBufferToString=dFe;function DUt(t){if(!t)return null;let e=[],r=t.length;for(let n=0;n<r;++n){let i=t[n];i instanceof Error?e.push([i]):e.push([null,i])}return e}Gt.wrapMultiResult=DUt;function pFe(t){let e=parseFloat(t);return!isNaN(t)&&(e|0)===e}Gt.isInt=pFe;function kUt(t){let e={},r=t.length;for(let n=1;n<r;n+=2)e[t[n-1]]=t[n];return e}Gt.packObject=kUt;function MUt(t,e){let r=null,n=function(){r&&(clearTimeout(r),r=null,t.apply(this,arguments))};return r=setTimeout(n,e,new Error("timeout")),n}Gt.timeout=MUt;function PUt(t){let e=[],r=Object.keys(t);for(let n=0,i=r.length;n<i;n++)e.push(r[n],t[r[n]]);return e}Gt.convertObjectToArray=PUt;function NUt(t){let e=[],r=0;return t.forEach(function(n,i){e[r]=i,e[r+1]=n,r+=2}),e}Gt.convertMapToArray=NUt;function FUt(t){return t===null||typeof t>"u"?"":String(t)}Gt.toArg=FUt;function BUt(t,e,r){let n=e.split(`
`),i="",s;for(s=1;s<n.length&&n[s].indexOf(r)!==-1;++s);for(let o=s;o<n.length;++o)i+=`
`+n[o];if(t.stack){let o=t.stack.indexOf(`
`);t.stack=t.stack.slice(0,o)+i}return t}Gt.optimizeErrorStack=BUt;function qUt(t){if(pFe(t))return{port:t};let e=(0,lFe.parse)(t,!0,!0);!e.slashes&&t[0]!=="/"&&(t="//"+t,e=(0,lFe.parse)(t,!0,!0));let r=e.query||{},n={};if(e.auth){let i=e.auth.indexOf(":");n.username=i===-1?e.auth:e.auth.slice(0,i),n.password=i===-1?"":e.auth.slice(i+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof r.family=="string"){let i=Number.parseInt(r.family,10);Number.isNaN(i)||(n.family=i)}return(0,Qre.defaults)(n,r),n}Gt.parseURL=qUt;function LUt(t){let e=t?.tls;typeof e=="string"&&(e={profile:e});let r=RUt.default[e?.profile];return r&&(e=Object.assign({},r,e),delete e.profile,t=Object.assign({},t,{tls:e})),t}Gt.resolveTLSProfile=LUt;function jUt(t,e=0){let r=t.length;return e>=r?null:t[e+Math.floor(Math.random()*(r-e))]}Gt.sample=jUt;function $Ut(t){let e=t.length;for(;e>0;){let r=Math.floor(Math.random()*e);e--,[t[e],t[r]]=[t[r],t[e]]}return t}Gt.shuffle=$Ut;Gt.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function KUt(t,e){let r=new Map;return t.forEach((n,i)=>{r.set(n,e[i])}),r}Gt.zipMap=KUt;var m_=null;async function UUt(){if(m_)return m_;try{let t=(0,xUt.resolve)(__dirname,"..","..","package.json"),e=await OUt.promises.readFile(t,"utf8");return m_={version:JSON.parse(e).version},m_}catch{return m_={version:"error-fetching-version"},m_}}Gt.getPackageMeta=UUt});var jf=m(Zre=>{"use strict";Object.defineProperty(Zre,"__esModule",{value:!0});var fFe=u_(),VUt=H9(),GUt=um(),Cg=cs(),Jd=class t{constructor(e,r=[],n={},i){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=r.flat(),this.callback=i,this.initPromise(),n.keyPrefix){let s=n.keyPrefix instanceof Buffer,o=s?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(n.keyPrefix)),Buffer.concat([o,a])):s?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,r){return!!this.getFlagMap()[e][r]}static setArgumentTransformer(e,r){this._transformer.argument[e]=r}static setReplyTransformer(e,r){this._transformer.reply[e]=r}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(t.FLAGS).reduce((e,r)=>(e[r]={},t.FLAGS[r].forEach(n=>{e[r][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:VUt(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let r,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let i=new Xre;i.push(n);for(let s=0;s<this.args.length;++s){let o=this.args[s];o instanceof Buffer?o.length===0?i.push(`$0\r
\r
`):(i.push("$"+o.length+`\r
`),i.push(o),i.push(`\r
`)):i.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}r=i.toBuffer()}else{r=n;for(let i=0;i<this.args.length;++i){let s=this.args[i];r+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return r}stringifyArguments(){for(let e=0;e<this.args.length;++e){let r=this.args[e];typeof r=="string"||(r instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,Cg.toArg)(r))}}transformReply(e){this.replyEncoding&&(e=(0,Cg.convertBufferToString)(e,this.replyEncoding));let r=t._transformer.reply[this.name];return r&&(e=r(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}initPromise(){let e=new Promise((r,n)=>{if(!this.transformed){this.transformed=!0;let i=t._transformer.argument[this.name];i&&(this.args=i(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(r),this.errorStack?this.reject=i=>{n((0,Cg.optimizeErrorStack)(i,this.errorStack.stack,__dirname))}:this.reject=n});this.promise=(0,GUt.default)(e,this.callback)}_iterateKeys(e=r=>r){if(typeof this.keys>"u"&&(this.keys=[],(0,fFe.exists)(this.name))){let r=(0,fFe.getKeyIndexes)(this.name,this.args);for(let n of r)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return r=>{try{let n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(r)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};Zre.default=Jd;Jd.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"],HANDSHAKE_COMMANDS:["auth","select","client","readonly","info"],IGNORE_RECONNECT_ON_ERROR:["client"]};Jd._transformer={argument:{},reply:{}};var hFe=function(t){if(t.length===1){if(t[0]instanceof Map)return(0,Cg.convertMapToArray)(t[0]);if(typeof t[0]=="object"&&t[0]!==null)return(0,Cg.convertObjectToArray)(t[0])}return t},mFe=function(t){if(t.length===2){if(t[1]instanceof Map)return[t[0]].concat((0,Cg.convertMapToArray)(t[1]));if(typeof t[1]=="object"&&t[1]!==null)return[t[0]].concat((0,Cg.convertObjectToArray)(t[1]))}return t};Jd.setArgumentTransformer("mset",hFe);Jd.setArgumentTransformer("msetnx",hFe);Jd.setArgumentTransformer("hset",mFe);Jd.setArgumentTransformer("hmset",mFe);Jd.setReplyTransformer("hgetall",function(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2){let n=t[r],i=t[r+1];n in e?Object.defineProperty(e,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):e[n]=i}return e}return t});var Xre=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),r=0;for(let n of this.items){let i=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,r):e.write(n,r,i),r+=i}return e}}});var yFe=m(ene=>{"use strict";Object.defineProperty(ene,"__esModule",{value:!0});var HUt=wg(),nP=class extends HUt.RedisError{constructor(e,r){super(e),this.lastNodeError=r,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};ene.default=nP;nP.defaultMessage="Failed to refresh slots cache."});var iP=m(rne=>{"use strict";Object.defineProperty(rne,"__esModule",{value:!0});var zUt=require("stream"),tne=class extends zUt.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.noValues&&e.push("NOVALUES"),this.opt.redis[this.opt.command](e,(r,n)=>{if(r){this.emit("error",r);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};rne.default=tne});var SFe=m(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.executeWithAutoPipelining=yi.getFirstValueInFlattenedArray=yi.shouldUseAutoPipelining=yi.notAllowedAutoPipelineCommands=yi.kCallbacks=yi.kExec=void 0;var EFe=XM(),WUt=H9(),gFe=um();yi.kExec=Symbol("exec");yi.kCallbacks=Symbol("callbacks");yi.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select","client"];function bFe(t,e){if(t._runningAutoPipelines.has(e)||!t._autoPipelines.has(e))return;t._runningAutoPipelines.add(e);let r=t._autoPipelines.get(e);t._autoPipelines.delete(e);let n=r[yi.kCallbacks];r[yi.kCallbacks]=null,r.exec(function(i,s){if(t._runningAutoPipelines.delete(e),i)for(let o=0;o<n.length;o++)process.nextTick(n[o],i);else for(let o=0;o<n.length;o++)process.nextTick(n[o],...s[o]);t._autoPipelines.has(e)&&bFe(t,e)})}function JUt(t,e,r){return e&&t.options.enableAutoPipelining&&!t.isPipeline&&!yi.notAllowedAutoPipelineCommands.includes(r)&&!t.options.autoPipeliningIgnoredCommands.includes(r)}yi.shouldUseAutoPipelining=JUt;function _Fe(t){for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="string")return r;if(Array.isArray(r)||(0,EFe.isArguments)(r)){if(r.length===0)continue;return r[0]}let n=[r].flat();if(n.length>0)return n[0]}}yi.getFirstValueInFlattenedArray=_Fe;function vFe(t,e,r,n,i){if(t.isCluster&&!t.slots.length)return t.status==="wait"&&t.connect().catch(EFe.noop),(0,gFe.default)(new Promise(function(c,l){t.delayUntilReady(d=>{if(d){l(d);return}vFe(t,e,r,n,null).then(c,l)})}),i);let s=t.options.keyPrefix||"",o=t.isCluster?t.slots[WUt(`${s}${_Fe(n)}`)].join(","):"main";if(!t._autoPipelines.has(o)){let c=t.pipeline();c[yi.kExec]=!1,c[yi.kCallbacks]=[],t._autoPipelines.set(o,c)}let a=t._autoPipelines.get(o);a[yi.kExec]||(a[yi.kExec]=!0,setImmediate(bFe,t,o));let u=new Promise(function(c,l){a[yi.kCallbacks].push(function(d,p){if(d){l(d);return}c(p)}),e==="call"&&n.unshift(r),a[e](...n)});return(0,gFe.default)(u,i)}yi.executeWithAutoPipelining=vFe});var wFe=m(ine=>{"use strict";Object.defineProperty(ine,"__esModule",{value:!0});var YUt=require("crypto"),QUt=jf(),XUt=um(),nne=class{constructor(e,r=null,n="",i=!1){this.lua=e,this.numberOfKeys=r,this.keyPrefix=n,this.readOnly=i,this.sha=(0,YUt.createHash)("sha1").update(e).digest("hex");let s=this.sha,o=new WeakSet;this.Command=class extends QUt.default{toWritable(u){let c=this.reject;return this.reject=l=>{l.message.indexOf("NOSCRIPT")!==-1&&o.delete(u),c.call(this,l)},o.has(u)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(o.add(u),this.name="eval",this.args[0]=e),super.toWritable(u)}}}execute(e,r,n,i){typeof this.numberOfKeys=="number"&&r.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...r],n);return s.promise=s.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...r],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,XUt.default)(s.promise,i),e.sendCommand(s)}};ine.default=nne});var oP=m(one=>{"use strict";Object.defineProperty(one,"__esModule",{value:!0});var ZUt=u_(),sP=SFe(),eVt=jf(),tVt=wFe(),$f=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return sne.slice(0)}createBuiltinCommand(e){return{string:lm(null,e,"utf8"),buffer:lm(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=lm(e,e,"utf8"),this[e+"Buffer"]=lm(e+"Buffer",e,null)}defineCommand(e,r){let n=new tVt.default(r.lua,r.numberOfKeys,this.options.keyPrefix,r.readOnly);this.scriptsSet[e]=n,this[e]=AFe(e,e,n,"utf8"),this[e+"Buffer"]=AFe(e+"Buffer",e,n,null)}sendCommand(e,r,n){throw new Error('"sendCommand" is not implemented')}},sne=ZUt.list.filter(t=>t!=="monitor");sne.push("sentinel");sne.forEach(function(t){$f.prototype[t]=lm(t,t,"utf8"),$f.prototype[t+"Buffer"]=lm(t+"Buffer",t,null)});$f.prototype.call=lm("call","utf8");$f.prototype.callBuffer=lm("callBuffer",null);$f.prototype.send_command=$f.prototype.call;function lm(t,e,r){return typeof r>"u"&&(r=e,e=null),function(...n){let i=e||n.shift(),s=n[n.length-1];typeof s=="function"?n.pop():s=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:r};return(0,sP.shouldUseAutoPipelining)(this,t,i)?(0,sP.executeWithAutoPipelining)(this,t,i,n,s):this.sendCommand(new eVt.default(i,n,o,s))}}function AFe(t,e,r,n){return function(...i){let s=typeof i[i.length-1]=="function"?i.pop():void 0,o={replyEncoding:n};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,sP.shouldUseAutoPipelining)(this,t,e)?(0,sP.executeWithAutoPipelining)(this,t,e,i,s):r.execute(this,i,o,s)}}one.default=$f});var cne=m(une=>{"use strict";Object.defineProperty(une,"__esModule",{value:!0});var ane=H9(),CFe=u_(),TFe=um(),rVt=require("util"),nVt=jf(),iVt=cs(),sVt=oP();function oVt(t,e){let r=ane(e[0]),n=t._groupsBySlot[r];for(let i=1;i<e.length;i++)if(t._groupsBySlot[ane(e[i])]!==n)return-1;return r}var dm=class extends sVt.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let i=e.scriptsSet[n];this._shaToScript[i.sha]=i,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i});let r=this;Object.defineProperty(this,"length",{get:function(){return r._queue.length}})}fillResult(e,r){if(this._queue[r].name==="exec"&&Array.isArray(e[1])){let i=e[1].length;for(let s=0;s<i;s++){if(e[1][s]instanceof Error)continue;let o=this._queue[r-(i-s)];try{e[1][s]=o.transformReply(e[1][s])}catch(a){e[1][s]=a}}}if(this._result[r]=e,--this.replyPending)return;if(this.isCluster){let i=!0,s;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],u=this._queue[o];if(a){if(u.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:a.name,message:a.message};else if(s.name!==a.name||s.message!==a.message){i=!1;break}}else if(!u.inTransaction&&!((0,CFe.exists)(u.name)&&(0,CFe.hasFlag)(u.name,"readonly"))){i=!1;break}}if(s&&i){let o=this,a=s.message.split(" "),u=this._queue,c=!1;this._queue=[];for(let f=0;f<u.length;++f){if(a[0]==="ASK"&&!c&&u[f].name!=="asking"&&(!u[f-1]||u[f-1].name!=="asking")){let h=new nVt.default("asking");h.ignore=!0,this.sendCommand(h)}u[f].initPromise(),this.sendCommand(u[f]),c=u[f].inTransaction}let l=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let d=function(){o.exec()},p=this.redis;if(p.handleError(s,this.leftRedirections,{moved:function(f,h){o.preferKey=h,p.slots[a[1]]=[h],p._groupsBySlot[a[1]]=p._groupsIds[p.slots[a[1]].join(";")],p.refreshSlotsCache(),o.exec()},ask:function(f,h){o.preferKey=h,o.exec()},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:()=>{l=!1},defaults:()=>{l=!1}}),l)return}}let n=0;for(let i=0;i<this._queue.length-n;++i)this._queue[i+n].ignore&&(n+=1),this._result[i]=this._result[i+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let r=this._queue.length;return e.pipelineIndex=r,e.promise.then(n=>{this.fillResult([null,n],r)}).catch(n=>{this.fillResult([n],r)}),this._queue.push(e),this}addBatch(e){let r,n,i;for(let s=0;s<e.length;++s)r=e[s],n=r[0],i=r.slice(1),this[n].apply(this,i);return this}};une.default=dm;var aVt=dm.prototype.multi;dm.prototype.multi=function(){return this._transactions+=1,aVt.apply(this,arguments)};var OFe=dm.prototype.execBuffer;dm.prototype.execBuffer=(0,rVt.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),OFe.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");dm.prototype.exec=function(t){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(iVt.noop),t&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,TFe.default)(this.promise,t)),this.redis.delayUntilReady(i=>{if(i){this.reject(i);return}this.exec(t)}),this.promise;if(this._transactions>0)return this._transactions-=1,OFe.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,TFe.default)(this.promise,t)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let i=[];for(let s=0;s<this._queue.length;s++){let o=this._queue[s].getKeys();if(o.length&&i.push(o[0]),o.length&&ane.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(i.length){if(e=oVt(this.redis,i),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let r=this;return n(),this.promise;function n(){let i=r.replyPending=r._queue.length,s;r.isCluster&&(s={slot:e,redis:r.redis.connectionPool.nodes.all[r.preferKey]});let o="",a,u={isPipeline:!0,destination:r.isCluster?s:{redis:r.redis},write(c){typeof c!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(c)):o+=c,--i||(a?(o&&a.push(Buffer.from(o,"utf8")),u.destination.redis.stream.write(Buffer.concat(a))):u.destination.redis.stream.write(o),i=r._queue.length,o="",a=void 0)}};for(let c=0;c<r._queue.length;++c)r.redis.sendCommand(r._queue[c],u,s);return r.promise}}});var pne=m(aP=>{"use strict";Object.defineProperty(aP,"__esModule",{value:!0});aP.addTransactionSupport=void 0;var lne=cs(),dne=um(),xFe=cne();function uVt(t){t.pipeline=function(n){let i=new xFe.default(this);return Array.isArray(n)&&i.addBatch(n),i};let{multi:e}=t;t.multi=function(n,i){if(typeof i>"u"&&!Array.isArray(n)&&(i=n,n=null),i&&i.pipeline===!1)return e.call(this);let s=new xFe.default(this);s.multi(),Array.isArray(n)&&s.addBatch(n);let o=s.exec;s.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(lne.noop),(0,dne.default)(new Promise((l,d)=>{this.redis.delayUntilReady(p=>{if(p){d(p);return}this.exec(s).then(l,d)})}),u);if(this._transactions>0&&o.call(s),this.nodeifiedPromise)return o.call(s);let c=o.call(s);return(0,dne.default)(c.then(function(l){let d=l[l.length-1];if(typeof d>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(d[0]){d[0].previousErrors=[];for(let p=0;p<l.length-1;++p)l[p][0]&&d[0].previousErrors.push(l[p][0]);throw d[0]}return(0,lne.wrapMultiResult)(d[1])}),u)};let{execBuffer:a}=s;return s.execBuffer=function(u){return this._transactions>0&&a.call(s),s.exec(u)},s};let{exec:r}=t;t.exec=function(n){return(0,dne.default)(r.call(this).then(function(i){return Array.isArray(i)&&(i=(0,lne.wrapMultiResult)(i)),i}),n)}}aP.addTransactionSupport=uVt});var hne=m(fne=>{"use strict";Object.defineProperty(fne,"__esModule",{value:!0});function cVt(t,e){Object.getOwnPropertyNames(e.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))})}fne.default=cVt});var RFe=m(uP=>{"use strict";Object.defineProperty(uP,"__esModule",{value:!0});uP.DEFAULT_CLUSTER_OPTIONS=void 0;var IFe=require("dns");uP.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:t=>Math.min(100+t*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:IFe.resolveSrv,dnsLookup:IFe.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],shardedSubscribers:!1}});var J9=m(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getConnectionName=Ao.weightSrvRecords=Ao.groupSrvRecords=Ao.getUniqueHostnamesFromOptions=Ao.normalizeNodeOptions=Ao.nodeKeyToRedisOptions=Ao.getNodeKey=void 0;var DFe=cs(),lVt=require("net");function dVt(t){return t.port=t.port||6379,t.host=t.host||"127.0.0.1",t.host+":"+t.port}Ao.getNodeKey=dVt;function pVt(t){let e=t.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${t}`);return{host:t.slice(0,e),port:Number(t.slice(e+1))}}Ao.nodeKeyToRedisOptions=pVt;function fVt(t){return t.map(e=>{let r={};if(typeof e=="object")Object.assign(r,e);else if(typeof e=="string")Object.assign(r,(0,DFe.parseURL)(e));else if(typeof e=="number")r.port=e;else throw new Error("Invalid argument "+e);return typeof r.port=="string"&&(r.port=parseInt(r.port,10)),delete r.db,r.port||(r.port=6379),r.host||(r.host="127.0.0.1"),(0,DFe.resolveTLSProfile)(r)})}Ao.normalizeNodeOptions=fVt;function hVt(t){let e={};return t.forEach(r=>{e[r.host]=!0}),Object.keys(e).filter(r=>!(0,lVt.isIP)(r))}Ao.getUniqueHostnamesFromOptions=hVt;function mVt(t){let e={};for(let r of t)e.hasOwnProperty(r.priority)?(e[r.priority].totalWeight+=r.weight,e[r.priority].records.push(r)):e[r.priority]={totalWeight:r.weight,records:[r]};return e}Ao.groupSrvRecords=mVt;function yVt(t){if(t.records.length===1)return t.totalWeight=0,t.records.shift();let e=Math.floor(Math.random()*(t.totalWeight+t.records.length)),r=0;for(let[n,i]of t.records.entries())if(r+=1+i.weight,r>e)return t.totalWeight-=i.weight,t.records.splice(n,1),i}Ao.weightSrvRecords=yVt;function gVt(t,e){let r=`ioredis-cluster(${t})`;return e?`${r}:${e}`:r}Ao.getConnectionName=gVt});var Ene=m(gne=>{"use strict";Object.defineProperty(gne,"__esModule",{value:!0});var kFe=J9(),mne=cs(),EVt=pm(),Yd=(0,mne.Debug)("cluster:subscriber"),yne=class{constructor(e,r,n=!1){this.connectionPool=e,this.emitter=r,this.isSharded=n,this.started=!1,this.subscriber=null,this.slotRange=[],this.onSubscriberEnd=()=>{if(!this.started){Yd("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Yd("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(i,s)=>{!this.started||!this.subscriber||(0,kFe.getNodeKey)(this.subscriber.options)===s&&(Yd("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Yd("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}associateSlotRange(e){return this.isSharded&&(this.slotRange=e),this.slotRange}start(){this.started=!0,this.selectSubscriber(),Yd("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null)}isStarted(){return this.started}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let r=(0,mne.sample)(this.connectionPool.getNodes());if(!r){Yd("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=r;Yd("selected a subscriber %s:%s",n.host,n.port);let i="subscriber";this.isSharded&&(i="ssubscriber"),this.subscriber=new EVt.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,kFe.getConnectionName)(i,n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",mne.noop),this.subscriber.on("moved",()=>{this.emitter.emit("forceRefresh")}),this.subscriber.once("end",this.onSubscriberEnd);let s={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let o=e.condition||e.prevCondition;o&&o.subscriber&&(s.subscribe=o.subscriber.channels("subscribe"),s.psubscribe=o.subscriber.channels("psubscribe"),s.ssubscribe=o.subscriber.channels("ssubscribe"))}if(s.subscribe.length||s.psubscribe.length||s.ssubscribe.length){let o=0;for(let a of["subscribe","psubscribe","ssubscribe"]){let u=s[a];if(u.length!=0)if(Yd("%s %d channels",a,u.length),a==="ssubscribe")for(let c of u)o+=1,this.subscriber[a](c).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Yd("failed to ssubscribe to channel: %s",c)});else o+=1,this.subscriber[a](u).then(()=>{--o||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Yd("failed to %s %d channels",a,u.length)})}}else this.lastActiveSubscriber=this.subscriber;for(let o of["message","messageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)});for(let o of["pmessage","pmessageBuffer"])this.subscriber.on(o,(a,u,c)=>{this.emitter.emit(o,a,u,c)});if(this.isSharded==!0)for(let o of["smessage","smessageBuffer"])this.subscriber.on(o,(a,u)=>{this.emitter.emit(o,a,u)})}};gne.default=yne});var Sne=m(vne=>{"use strict";Object.defineProperty(vne,"__esModule",{value:!0});var bVt=require("events"),cP=cs(),bne=J9(),_Vt=pm(),Y9=(0,cP.Debug)("cluster:connectionPool"),_ne=class extends bVt.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let r=this.nodes[e];return Object.keys(r).map(n=>r[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let r=Object.keys(this.nodes[e]),n=(0,cP.sample)(r);return this.nodes[e][n]}addMasterNode(e){let r=(0,bne.getNodeKey)(e.options),n=this.createRedisFromOptions(e,e.options.readOnly);return e.options.readOnly?!1:(this.nodes.all[r]=n,this.nodes.master[r]=n,!0)}createRedisFromOptions(e,r){return new _Vt.default((0,cP.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:r},e,this.redisOptions,{lazyConnect:!0}))}findOrCreate(e,r=!1){let n=(0,bne.getNodeKey)(e);r=!!r,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let i;return this.nodes.all[n]?(i=this.nodes.all[n],i.options.readOnly!==r&&(i.options.readOnly=r,Y9("Change role of %s to %s",n,r?"slave":"master"),i[r?"readonly":"readwrite"]().catch(cP.noop),r?(delete this.nodes.master[n],this.nodes.slave[n]=i):(delete this.nodes.slave[n],this.nodes.master[n]=i))):(Y9("Connecting to %s as %s",n,r?"slave":"master"),i=this.createRedisFromOptions(e,r),this.nodes.all[n]=i,this.nodes[r?"slave":"master"][n]=i,i.once("end",()=>{this.removeNode(n),this.emit("-node",i,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",i,n),i.on("error",function(s){this.emit("nodeError",s,n)})),i}reset(e){Y9("Reset with %O",e);let r={};e.forEach(n=>{let i=(0,bne.getNodeKey)(n);n.readOnly&&r[i]||(r[i]=n)}),Object.keys(this.nodes.all).forEach(n=>{r[n]||(Y9("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(r).forEach(n=>{let i=r[n];this.findOrCreate(i,i.readOnly)})}removeNode(e){let{nodes:r}=this;r.all[e]&&(Y9("Remove %s from the pool",e),delete r.all[e]),delete r.master[e],delete r.slave[e]}};vne.default=_ne});var lP=m((FIr,MFe)=>{"use strict";function Qn(t,r){var r=r||{};this._capacity=r.capacity,this._head=0,this._tail=0,Array.isArray(t)?this._fromArray(t):(this._capacityMask=3,this._list=new Array(4))}Qn.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}};Qn.prototype.get=function(e){return this.peekAt(e)};Qn.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};Qn.prototype.peekFront=function(){return this.peek()};Qn.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(Qn.prototype,"length",{get:function(){return this.size()}});Qn.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Qn.prototype.unshift=function(e){if(arguments.length===0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Qn.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};Qn.prototype.push=function(e){if(arguments.length===0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Qn.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),n}};Qn.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<n/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};Qn.prototype.remove=function(e,r){var n=e,i,s=r;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||r<1)){if(n<0&&(n+=o),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=o)return i=this.toArray(),this.clear(),i;n+r>o&&(r=o-n);var u;for(i=new Array(r),u=0;u<r;u++)i[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,u=r;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+r+a&this._capacityMask,u=r-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+e+r+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+a&this._capacityMask,u=o-(r+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};Qn.prototype.splice=function(e,r){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,u=arguments.length,c=this._list.length,l=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._head=this._head+n+c&this._capacityMask);u>l;)this.unshift(arguments[--u]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+n+r+s&this._capacityMask];for(r===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,r),this._tail=this._tail-d+c&this._capacityMask);l<u;)this.push(arguments[l++]);for(s=0;s<d;s++)this.push(o[s])}return a}else return this.remove(n,r)}};Qn.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Qn.prototype.isEmpty=function(){return this._head===this._tail};Qn.prototype.toArray=function(){return this._copyArray(!1)};Qn.prototype._fromArray=function(e){var r=e.length,n=this._nextPowerOf2(r);this._list=new Array(n),this._capacityMask=n-1,this._tail=r;for(var i=0;i<r;i++)this._list[i]=e[i]};Qn.prototype._copyArray=function(e,r){var n=this._list,i=n.length,s=this.length;if(r=r|s,r==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(r),a=0,u;if(e||this._head>this._tail){for(u=this._head;u<i;u++)o[a++]=n[u];for(u=0;u<this._tail;u++)o[a++]=n[u]}else for(u=this._head;u<this._tail;u++)o[a++]=n[u];return o};Qn.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Qn.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};Qn.prototype._nextPowerOf2=function(e){var r=Math.log(e)/Math.log(2),n=1<<r+1;return Math.max(n,4)};MFe.exports=Qn});var PFe=m(Ane=>{"use strict";Object.defineProperty(Ane,"__esModule",{value:!0});var vVt=cs(),SVt=lP(),wVt=(0,vVt.Debug)("delayqueue"),wne=class{constructor(){this.queues={},this.timeouts={}}push(e,r,n){let i=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new SVt),this.queues[e].push(r),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let r=this.queues[e];if(!r)return;let{length:n}=r;if(n)for(wVt("send %d commands in %s queue",n,e),this.queues[e]=null;r.length>0;)r.shift()()}};Ane.default=wne});var BFe=m(Tne=>{"use strict";Object.defineProperty(Tne,"__esModule",{value:!0});var AVt=cs(),CVt=Ene(),TVt=Sne(),NFe=J9(),dP=H9(),FFe=(0,AVt.Debug)("cluster:subscriberGroup"),Cne=class{constructor(e,r){this.cluster=e,this.shardedSubscribers=new Map,this.clusterSlots=[],this.subscriberToSlotsIndex=new Map,this.channels=new Map,e.on("+node",n=>{this._addSubscriber(n)}),e.on("-node",n=>{this._removeSubscriber(n)}),e.on("refresh",()=>{this._refreshSlots(e)}),e.on("forceRefresh",()=>{r()})}getResponsibleSubscriber(e){let r=this.clusterSlots[e][0];return this.shardedSubscribers.get(r)}addChannels(e){let r=dP(e[0]);e.forEach(i=>{if(dP(i)!=r)return-1});let n=this.channels.get(r);return n?this.channels.set(r,n.concat(e)):this.channels.set(r,e),[...this.channels.values()].flatMap(i=>i).length}removeChannels(e){let r=dP(e[0]);e.forEach(i=>{if(dP(i)!=r)return-1});let n=this.channels.get(r);if(n){let i=n.filter(s=>!e.includes(s));this.channels.set(r,i)}return[...this.channels.values()].flatMap(i=>i).length}stop(){for(let e of this.shardedSubscribers.values())e.stop()}start(){for(let e of this.shardedSubscribers.values())e.isStarted()||e.start()}_addSubscriber(e){let r=new TVt.default(e.options);if(r.addMasterNode(e)){let n=new CVt.default(r,this.cluster,!0),i=(0,NFe.getNodeKey)(e.options);return this.shardedSubscribers.set(i,n),n.start(),this._resubscribe(),this.cluster.emit("+subscriber"),n}return null}_removeSubscriber(e){let r=(0,NFe.getNodeKey)(e.options),n=this.shardedSubscribers.get(r);return n&&(n.stop(),this.shardedSubscribers.delete(r),this._resubscribe(),this.cluster.emit("-subscriber")),this.shardedSubscribers}_refreshSlots(e){if(this._slotsAreEqual(e.slots))FFe("Nothing to refresh because the new cluster map is equal to the previous one.");else{FFe("Refreshing the slots of the subscriber group."),this.subscriberToSlotsIndex=new Map;for(let r=0;r<e.slots.length;r++){let n=e.slots[r][0];this.subscriberToSlotsIndex.has(n)||this.subscriberToSlotsIndex.set(n,[]),this.subscriberToSlotsIndex.get(n).push(Number(r))}return this._resubscribe(),this.clusterSlots=JSON.parse(JSON.stringify(e.slots)),this.cluster.emit("subscribersReady"),!0}return!1}_resubscribe(){this.shardedSubscribers&&this.shardedSubscribers.forEach((e,r)=>{let n=this.subscriberToSlotsIndex.get(r);n&&(e.associateSlotRange(n),n.forEach(i=>{let s=e.getInstance(),o=this.channels.get(i);o&&o.length>0&&s&&(s.ssubscribe(o),s.on("ready",()=>{s.ssubscribe(o)}))}))})}_slotsAreEqual(e){return this.clusterSlots===void 0?!1:JSON.stringify(this.clusterSlots)===JSON.stringify(e)}};Tne.default=Cne});var Ine=m(xne=>{"use strict";Object.defineProperty(xne,"__esModule",{value:!0});var qFe=u_(),UFe=require("events"),Q9=wg(),LFe=um(),jFe=jf(),One=yFe(),OVt=pm(),xVt=iP(),IVt=pne(),gu=cs(),RVt=hne(),DVt=oP(),kVt=RFe(),MVt=Ene(),PVt=Sne(),NVt=PFe(),y_=J9(),$Fe=lP(),FVt=BFe(),Xn=(0,gu.Debug)("cluster"),KFe=new WeakSet,X9=class t extends DVt.default{constructor(e,r={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new NVt.default,this.offlineQueue=new $Fe,this.isRefreshing=!1,this._refreshSlotsCacheCallbacks=[],this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,UFe.EventEmitter.call(this),this.startupNodes=e,this.options=(0,gu.defaults)({},r,kVt.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.shardedSubscribers==!0&&(this.shardedSubscribers=new FVt.default(this,this.refreshSlotsCache.bind(this))),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new PVt.default(this.options.redisOptions),this.connectionPool.on("-node",(n,i)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,i)=>{this.emit("node error",n,i)}),this.subscriber=new MVt.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,i])=>{this.defineCommand(n,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{Xn("connecting failed: %s",n)})}connect(){return new Promise((e,r)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){r(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(i=>{if(this.connectionEpoch!==n){Xn("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),r(new Q9.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){Xn("discard connecting after resolving startup nodes because the status changed to %s",this.status),r(new Q9.RedisError("Connection is aborted"));return}this.connectionPool.reset(i);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((u,c)=>{u||c?(Xn("Ready check failed (%s). Reconnecting...",u||c),this.status==="connect"&&this.disconnect(!0)):s()}):s()};o=()=>{let u=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(u),r(u)},this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(u=>{u&&u.message===One.default.defaultMessage&&(OVt.default.prototype.silentEmit.call(this,"error",u),this.connectionPool.reset([]))}),this.subscriber.start(),this.options.shardedSubscribers&&this.shardedSubscribers.start()}).catch(i=>{this.setStatus("close"),this.handleCloseEvent(i),this.invokeReadyDelayedCallbacks(i),r(i)})})}disconnect(e=!1){let r=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,Xn("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let r=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),this.options.shardedSubscribers&&this.shardedSubscribers.stop(),r==="wait"){let n=(0,LFe.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,LFe.default)(Promise.all(this.nodes().map(n=>n.quit().catch(i=>{if(i.message===gu.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw i}))).then(()=>"OK"),e)}duplicate(e=[],r={}){let n=e.length>0?e:this.startupNodes.slice(0),i=Object.assign({},this.options,r);return new t(n,i)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}refreshSlotsCache(e){if(e&&this._refreshSlotsCacheCallbacks.push(e),this.isRefreshing)return;this.isRefreshing=!0;let r=this,n=a=>{this.isRefreshing=!1;for(let u of this._refreshSlotsCacheCallbacks)u(a);this._refreshSlotsCacheCallbacks=[]},i=(0,gu.shuffle)(this.connectionPool.getNodes()),s=null;function o(a){if(a===i.length){let l=new One.default(One.default.defaultMessage,s);return n(l)}let u=i[a],c=`${u.options.host}:${u.options.port}`;Xn("getting slot cache from %s",c),r.getInfoFromNode(u,function(l){switch(r.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}l?(r.emit("node error",l,c),s=l,o(a+1)):(r.emit("refresh"),n())})}o(0)}sendCommand(e,r,n){if(this.status==="wait"&&this.connect().catch(gu.noop),this.status==="end")return e.reject(new Error(gu.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;i!=="master"&&(e.isReadOnly||(0,qFe.exists)(e.name)&&(0,qFe.hasFlag)(e.name,"readonly")||(i="master"));let s=n?n.slot:e.getSlot(),o={},a=this;if(!n&&!KFe.has(e)){KFe.add(e);let c=e.reject;e.reject=function(l){let d=u.bind(null,!0);a.handleError(l,o,{moved:function(p,f){Xn("command %s is moved to %s",e.name,f),s=Number(p),a.slots[p]?a.slots[p][0]=f:a.slots[p]=[f],a._groupsBySlot[p]=a._groupsIds[a.slots[p].join(";")],a.connectionPool.findOrCreate(a.natMapper(f)),u(),Xn("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(p,f){Xn("command %s is required to ask %s:%s",e.name,f);let h=a.natMapper(f);a.connectionPool.findOrCreate(h),u(!1,`${h.host}:${h.port}`)},tryagain:d,clusterDown:d,connectionClosed:d,maxRedirections:function(p){c.call(e,p)},defaults:function(){c.call(e,l)}})}}u();function u(c,l){if(a.status==="end"){e.reject(new Q9.AbortError("Cluster is ended."));return}let d;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)d=n.redis;else if(jFe.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||jFe.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(a.options.shardedSubscribers==!0&&(e.name=="ssubscribe"||e.name=="sunsubscribe")){let p=a.shardedSubscribers.getResponsibleSubscriber(s),f=-1;e.name=="ssubscribe"&&(f=a.shardedSubscribers.addChannels(e.getKeys())),e.name=="sunsubscribe"&&(f=a.shardedSubscribers.removeChannels(e.getKeys())),f!==-1?d=p.getInstance():e.reject(new Q9.AbortError("Can't add or remove the given channels. Are they in the same slot?"))}else d=a.subscriber.getInstance();if(!d){e.reject(new Q9.AbortError("No subscriber for the cluster"));return}}else{if(!c){if(typeof s=="number"&&a.slots[s]){let p=a.slots[s];if(typeof i=="function"){let f=p.map(function(h){return a.connectionPool.getInstanceByKey(h)});d=i(f,e),Array.isArray(d)&&(d=(0,gu.sample)(d)),d||(d=f[0])}else{let f;i==="all"?f=(0,gu.sample)(p):i==="slave"&&p.length>1?f=(0,gu.sample)(p,1):f=p[0],d=a.connectionPool.getInstanceByKey(f)}}l&&(d=a.connectionPool.getInstanceByKey(l),d.asking())}d||(d=(typeof i=="function"?null:a.connectionPool.getSampleInstance(i))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=d)}d?d.sendCommand(e,r):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:r,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}handleError(e,r,n){if(typeof r.value>"u"?r.value=this.options.maxRedirections:r.value-=1,r.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let i=e.message.split(" ");if(i[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",n.moved.bind(null,i[1],i[2]),{timeout:s}):n.moved(i[1],i[2])}else i[0]==="ASK"?n.ask(i[1],i[2]):i[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):i[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===gu.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new $Fe}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{Xn('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){Xn("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){e&&Xn("closed because %s",e);let r;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(r=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof r=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,Xn("Cluster is disconnected. Retrying after %dms",r),this.connect().catch(function(n){Xn("Got error %s when reconnecting. Ignoring...",n)})},r)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let r;for(;r=this.offlineQueue.shift();)r.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){Xn("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let r;for(;r=e.shift();)this.sendCommand(r.command,r.stream,r.node)}}natMapper(e){let r=typeof e=="string"?e:`${e.host}:${e.port}`,n=null;return this.options.natMap&&typeof this.options.natMap=="function"?n=this.options.natMap(r):this.options.natMap&&typeof this.options.natMap=="object"&&(n=this.options.natMap[r]),n?(Xn("NAT mapping %s -> %O",r,n),Object.assign({},n)):typeof e=="string"?(0,y_.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,r){if(!e)return r(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,y_.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",gu.noop),n.cluster("SLOTS",(0,gu.timeout)((i,s)=>{if(n.disconnect(),i)return Xn("error encountered running CLUSTER.SLOTS: %s",i),r(i);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){Xn("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),r();return}let o=[];Xn("cluster slots result count: %d",s.length);for(let u=0;u<s.length;++u){let c=s[u],l=c[0],d=c[1],p=[];for(let f=2;f<c.length;f++){if(!c[f][0])continue;let h=this.natMapper({host:c[f][0],port:c[f][1]});h.readOnly=f!==2,o.push(h),p.push(h.host+":"+h.port)}Xn("cluster slots result [%d]: slots %d~%d served by %s",u,l,d,p);for(let f=l;f<=d;f++)this.slots[f]=p}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){let c=(this.slots[u]||[]).join(";");if(!c.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[c]||(this._groupsIds[c]=++a),this._groupsBySlot[u]=this._groupsIds[c]}this.connectionPool.reset(o),r()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let r of this._readyDelayedCallbacks)process.nextTick(r,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(r,n)=>{if(r)return e(r);if(typeof n!="string")return e();let i,s=n.split(`\r
`);for(let o=0;o<s.length;++o){let a=s[o].split(":");if(a[0]==="cluster_state"){i=a[1];break}}i==="fail"?(Xn("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((r,n)=>{this.options.resolveSrv(e,(i,s)=>{if(i)return n(i);let o=this,a=(0,y_.groupSrvRecords)(s),u=Object.keys(a).sort((l,d)=>parseInt(l)-parseInt(d));function c(l){if(!u.length)return n(l);let d=u[0],p=a[d],f=(0,y_.weightSrvRecords)(p);p.records.length||u.shift(),o.dnsLookup(f.name).then(h=>r({host:h,port:f.port}),c)}c()})})}dnsLookup(e){return new Promise((r,n)=>{this.options.dnsLookup(e,(i,s)=>{i?(Xn("failed to resolve hostname %s to IP: %s",e,i.message),n(i)):(Xn("resolved hostname %s to IP %s",e,s),r(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,y_.normalizeNodeOptions)(this.startupNodes),r=(0,y_.getUniqueHostnamesFromOptions)(e);if(r.length===0)return e;let n=await Promise.all(r.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),i=(0,gu.zipMap)(r,n);return e.map(s=>{let o=i.get(s.host);return o?this.options.useSRVRecords?Object.assign({},s,o):Object.assign({},s,{host:o}):s})}createScanStream(e,{key:r,options:n={}}){return new xVt.default({objectMode:!0,key:r,redis:this,command:e,...n})}};(0,RVt.default)(X9,UFe.EventEmitter);(0,IVt.addTransactionSupport)(X9.prototype);xne.default=X9});var pP=m(Dne=>{"use strict";Object.defineProperty(Dne,"__esModule",{value:!0});var BVt=cs(),qVt=(0,BVt.Debug)("AbstractConnector"),Rne=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,r=setTimeout(()=>{qVt("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(r)),e.end()}}};Dne.default=Rne});var VFe=m(Mne=>{"use strict";Object.defineProperty(Mne,"__esModule",{value:!0});var LVt=require("net"),jVt=require("tls"),$Vt=cs(),KVt=pP(),kne=class extends KVt.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:r}=this;this.connecting=!0;let n;return"path"in r&&r.path?n={path:r.path}:(n={},"port"in r&&r.port!=null&&(n.port=r.port),"host"in r&&r.host!=null&&(n.host=r.host),"family"in r&&r.family!=null&&(n.family=r.family)),r.tls&&Object.assign(n,r.tls),new Promise((i,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error($Vt.CONNECTION_CLOSED_ERROR_MSG));return}try{r.tls?this.stream=(0,jVt.connect)(n):this.stream=(0,LVt.createConnection)(n)}catch(o){s(o);return}this.stream.once("error",o=>{this.firstError=o}),i(this.stream)})})}};Mne.default=kne});var GFe=m(Nne=>{"use strict";Object.defineProperty(Nne,"__esModule",{value:!0});function UVt(t,e){return(t.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(t.port||26379)===(e.port||26379)}var Pne=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let r=0;r<this.sentinels.length;r++)if(UVt(e,this.sentinels[r]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};Nne.default=Pne});var zFe=m(fP=>{"use strict";Object.defineProperty(fP,"__esModule",{value:!0});fP.FailoverDetector=void 0;var VVt=cs(),Fne=(0,VVt.Debug)("FailoverDetector"),HFe="+switch-master",Bne=class{constructor(e,r){this.isDisconnected=!1,this.connector=e,this.sentinels=r}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){Fne("Starting FailoverDetector");let e=[];for(let r of this.sentinels){let n=r.client.subscribe(HFe).catch(i=>{Fne("Failed to subscribe to failover messages on sentinel %s:%s (%s)",r.address.host||"127.0.0.1",r.address.port||26739,i.message)});e.push(n),r.client.on("message",i=>{!this.isDisconnected&&i===HFe&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,Fne("Failover detected, disconnecting"),this.connector.disconnect()}};fP.FailoverDetector=Bne});var hP=m(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});eA.SentinelIterator=void 0;var GVt=require("net"),Z9=cs(),HVt=require("tls"),WFe=GFe();eA.SentinelIterator=WFe.default;var zVt=pP(),WVt=pm(),JVt=zFe(),g_=(0,Z9.Debug)("SentinelConnector"),qne=class extends zVt.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new WFe.default(this.options.sentinels)}check(e){let r=!e.role||this.options.role===e.role;return r||(g_("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),r}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let r,n=async()=>{let i=this.sentinelIterator.next();if(i.done){this.sentinelIterator.reset(!1);let u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,c=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;r&&(c+=` Last error: ${r.message}`),g_(c);let l=new Error(c);if(typeof u=="number")return e("error",l),await new Promise(d=>setTimeout(d,u)),n();throw l}let s=null,o=null;try{s=await this.resolve(i.value)}catch(u){o=u}if(!this.connecting)throw new Error(Z9.CONNECTION_CLOSED_ERROR_MSG);let a=i.value.host+":"+i.value.port;if(s)return g_("resolved: %s:%s from sentinel %s",s.host,s.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,HVt.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,GVt.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",u=>{this.firstError=u}),this.stream;{let u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+s;return g_(u),e("sentinelError",new Error(u)),o&&(r=o),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let r=await e.sentinel("sentinels",this.options.name);Array.isArray(r)&&(r.map(Z9.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let s=this.sentinelNatResolve(JFe(n));this.sentinelIterator.add(s)&&g_("adding sentinel %s:%s",s.host,s.port)}}),g_("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let r=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(r)?{host:r[0],port:Number(r[1])}:null)}async resolveSlave(e){let r=await e.sentinel("slaves",this.options.name);if(!Array.isArray(r))return null;let n=r.map(Z9.packObject).filter(i=>i.flags&&!i.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(YVt(n,this.options.preferredSlaves))}sentinelNatResolve(e){if(!e||!this.options.natMap)return e;let r=`${e.host}:${e.port}`,n=e;return typeof this.options.natMap=="function"?n=this.options.natMap(r)||e:typeof this.options.natMap=="object"&&(n=this.options.natMap[r]||e),n}connectToSentinel(e,r){return new WVt.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...r})}async resolve(e){let r=this.connectToSentinel(e);r.on("error",QVt);try{return this.options.role==="slave"?await this.resolveSlave(r):await this.resolveMaster(r)}finally{r.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let r=[];for(;r.length<this.options.sentinelMaxConnections;){let{done:n,value:i}=this.sentinelIterator.next();if(n)break;let s=this.connectToSentinel(i,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),r.push({address:i,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new JVt.FailoverDetector(this,r),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};eA.default=qne;function YVt(t,e){if(t.length===0)return null;let r;if(typeof e=="function")r=e(t);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((i,s)=>(i.prio||(i.prio=1),s.prio||(s.prio=1),i.prio<s.prio?-1:i.prio>s.prio?1:0));for(let i=0;i<n.length;i++){for(let s=0;s<t.length;s++){let o=t[s];if(o.ip===n[i].ip&&o.port===n[i].port){r=o;break}}if(r)break}}return r||(r=(0,Z9.sample)(t)),JFe(r)}function JFe(t){return{host:t.ip,port:Number(t.port)}}function QVt(){}});var YFe=m(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});E_.SentinelConnector=E_.StandaloneConnector=void 0;var XVt=VFe();E_.StandaloneConnector=XVt.default;var ZVt=hP();E_.SentinelConnector=ZVt.default});var QFe=m(jne=>{"use strict";Object.defineProperty(jne,"__esModule",{value:!0});var eGt=wg(),Lne=class extends eGt.AbortError{constructor(e){let r=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(r),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};jne.default=Lne});var XFe=m(mP=>{"use strict";Object.defineProperty(mP,"__esModule",{value:!0});mP.MaxRetriesPerRequestError=void 0;var tGt=QFe();mP.MaxRetriesPerRequestError=tGt.default});var sBe=m((WIr,iBe)=>{"use strict";var Hne=require("buffer").Buffer,rGt=require("string_decoder").StringDecoder,$ne=new rGt,ZFe=wg(),nGt=ZFe.ReplyError,iGt=ZFe.ParserError,zl=Hne.allocUnsafe(32*1024),ea=0,yP=null,tA=0,Kne=0;function sGt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i=1;for(t.buffer[r]===45&&(i=-1,r++);r<e;){let s=t.buffer[r++];if(s===13)return t.offset=r+1,i*n;n=n*10+(s-48)}}function oGt(t){let e=t.buffer.length-1;var r=t.offset,n=0,i="";for(t.buffer[r]===45&&(i+="-",r++);r<e;){var s=t.buffer[r++];if(s===13)return t.offset=r+1,n!==0&&(i+=n),i;n>429496728?(i+=n*10+(s-48),n=0):s===48&&n===0?i+=0:n=n*10+(s-48)}}function eBe(t){let e=t.offset,r=t.buffer,n=r.length-1;for(var i=e;i<n;)if(r[i++]===13)return t.offset=i+1,t.optionReturnBuffers===!0?t.buffer.slice(e,i-1):t.buffer.toString("utf8",e,i-1)}function tBe(t){let e=t.buffer.length-1;for(var r=t.offset,n=0;r<e;){let i=t.buffer[r++];if(i===13)return t.offset=r+1,n;n=n*10+(i-48)}}function aGt(t){return t.optionStringNumbers===!0?oGt(t):sGt(t)}function uGt(t){let e=tBe(t);if(e===void 0)return;if(e<0)return null;let r=t.offset+e;if(r+2>t.buffer.length){t.bigStrSize=r+2,t.totalChunkSize=t.buffer.length,t.bufferCache.push(t.buffer);return}let n=t.offset;return t.offset=r+2,t.optionReturnBuffers===!0?t.buffer.slice(n,r):t.buffer.toString("utf8",n,r)}function cGt(t){var e=eBe(t);if(e!==void 0)return t.optionReturnBuffers===!0&&(e=e.toString()),new nGt(e)}function lGt(t,e){let r=new iGt("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(t.buffer),t.offset);t.buffer=null,t.returnFatalError(r)}function dGt(t){let e=tBe(t);if(e===void 0)return;if(e<0)return null;let r=new Array(e);return rBe(t,r,0)}function Une(t,e,r){t.arrayCache.push(e),t.arrayPos.push(r)}function Vne(t){let e=t.arrayCache.pop();var r=t.arrayPos.pop();if(t.arrayCache.length){let n=Vne(t);if(n===void 0){Une(t,e,r);return}e[r++]=n}return rBe(t,e,r)}function rBe(t,e,r){let n=t.buffer.length;for(;r<e.length;){let i=t.offset;if(t.offset>=n){Une(t,e,r);return}let s=nBe(t,t.buffer[t.offset++]);if(s===void 0){t.arrayCache.length||t.bufferCache.length||(t.offset=i),Une(t,e,r);return}e[r]=s,r++}return e}function nBe(t,e){switch(e){case 36:return uGt(t);case 43:return eBe(t);case 42:return dGt(t);case 58:return aGt(t);case 45:return cGt(t);default:return lGt(t,e)}}function pGt(){if(zl.length>50*1024)if(tA===1||Kne>tA*2){let t=Math.floor(zl.length/10),e=t<ea?ea:t;ea=0,zl=zl.slice(e,zl.length)}else Kne++,tA--;else clearInterval(yP),tA=0,Kne=0,yP=null}function fGt(t){if(zl.length<t+ea){let e=t>78643200?2:3;ea>1024*1024*111&&(ea=1024*1024*50),zl=Hne.allocUnsafe(t*e+ea),ea=0,tA++,yP===null&&(yP=setInterval(pGt,50))}}function hGt(t){let e=t.bufferCache,r=t.offset;var n=e.length,i=t.bigStrSize-t.totalChunkSize;if(t.offset=i,i<=2){if(n===2)return e[0].toString("utf8",r,e[0].length+i-2);n--,i=e[e.length-2].length+i}for(var s=$ne.write(e[0].slice(r)),o=1;o<n-1;o++)s+=$ne.write(e[o]);return s+=$ne.end(e[o].slice(0,i-2)),s}function mGt(t){let e=t.bufferCache,r=t.offset,n=t.bigStrSize-r-2;var i=e.length,s=t.bigStrSize-t.totalChunkSize;if(t.offset=s,s<=2){if(i===2)return e[0].slice(r,e[0].length+s-2);i--,s=e[e.length-2].length+s}fGt(n);let o=ea;e[0].copy(zl,o,r,e[0].length),ea+=e[0].length-r;for(var a=1;a<i-1;a++)e[a].copy(zl,ea),ea+=e[a].length;return e[a].copy(zl,ea,0,s-2),ea+=s-2,zl.slice(o,ea)}var Gne=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,i=n-this.offset,s=Hne.allocUnsafe(i+e.length);if(this.buffer.copy(s,0,this.offset,n),e.copy(s,i,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){let o=Vne(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var r=this.optionReturnBuffers?mGt(this):hGt(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=r,r=Vne(this),r===void 0))return;this.returnReply(r)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,i=this.buffer[this.offset++],s=nBe(this,i);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}i===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};iBe.exports=Gne});var aBe=m((JIr,oBe)=>{"use strict";oBe.exports=sBe()});var uBe=m(Jne=>{"use strict";Object.defineProperty(Jne,"__esModule",{value:!0});var Wne=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,r){this.set[zne(e)][r]=!0}del(e,r){delete this.set[zne(e)][r]}channels(e){return Object.keys(this.set[zne(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};Jne.default=Wne;function zne(t){return t==="unsubscribe"?"subscribe":t==="punsubscribe"?"psubscribe":t==="sunsubscribe"?"ssubscribe":t}});var pBe=m(Qne=>{"use strict";Object.defineProperty(Qne,"__esModule",{value:!0});var cBe=jf(),yGt=cs(),gGt=aBe(),EGt=uBe(),bGt=(0,yGt.Debug)("dataHandler"),Yne=class{constructor(e,r){this.redis=e;let n=new gGt({stringNumbers:r.stringNumbers,returnBuffers:!0,returnError:i=>{this.returnError(i)},returnFatalError:i=>{this.returnFatalError(i)},returnReply:i=>{this.returnReply(i)}});e.stream.prependListener("data",i=>{n.execute(i)}),e.stream.resume()}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let r=this.shiftCommand(e);if(r){if(e.command={name:r.command.name,args:r.command.args},r.command.name=="ssubscribe"&&e.message.includes("MOVED")){this.redis.emit("moved");return}this.redis.handleReconnection(e,r)}}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let r=this.shiftCommand(e);r&&(cBe.default.checkFlag("ENTER_SUBSCRIBER_MODE",r.command.name)?(this.redis.condition.subscriber=new EGt.default,this.redis.condition.subscriber.add(r.command.name,e[1].toString()),lBe(r.command,e[2])||this.redis.commandQueue.unshift(r)):cBe.default.checkFlag("EXIT_SUBSCRIBER_MODE",r.command.name)?dBe(r.command,e[2])||this.redis.commandQueue.unshift(r):r.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let r=Array.isArray(e)?e[0].toString():null;switch(bGt('receive reply "%s" in subscriber mode',r),r){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(r,n);let i=this.shiftCommand(e);if(!i)return;lBe(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(r,n);let i=e[2];Number(i)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(e);if(!s)return;dBe(s.command,i)||this.redis.commandQueue.unshift(s);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let r=e.toString();if(r==="OK")return!1;let n=r.indexOf(" "),i=r.slice(0,n),s=r.indexOf('"'),o=r.slice(s+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=r.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",i,o,a[1],a[0]),!0}shiftCommand(e){let r=this.redis.commandQueue.shift();if(!r){let n="Command queue state error. If you can reproduce this, please report it.",i=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",i),null}return r}};Qne.default=Yne;var fm=new WeakMap;function lBe(t,e){let r=fm.has(t)?fm.get(t):t.args.length;return r-=1,r<=0?(t.resolve(e),fm.delete(t),!0):(fm.set(t,r),!1)}function dBe(t,e){let r=fm.has(t)?fm.get(t):t.args.length;return r===0?Number(e)===0?(fm.delete(t),t.resolve(e),!0):!1:(r-=1,r<=0?(t.resolve(e),!0):(fm.set(t,r),!1))}});var fBe=m(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.readyHandler=Mc.errorHandler=Mc.closeHandler=Mc.connectHandler=void 0;var _Gt=wg(),vGt=jf(),SGt=XFe(),Qd=cs(),wGt=pBe(),Zs=(0,Qd.Debug)("connection");function AGt(t){return function(){var e;t.setStatus("connect"),t.resetCommandQueue();let r=!1,{connectionEpoch:n}=t;t.condition.auth&&t.auth(t.condition.auth,function(s){n===t.connectionEpoch&&s&&(s.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):s.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):s.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(r=!0,t.recoverFromFatalError(s,s)))}),t.condition.select&&t.select(t.condition.select).catch(s=>{t.silentEmit("error",s)}),new wGt.default(t,{stringNumbers:t.options.stringNumbers});let i=[];t.options.connectionName&&(Zs("set the connection name [%s]",t.options.connectionName),i.push(t.client("setname",t.options.connectionName).catch(Qd.noop))),t.options.disableClientInfo||(Zs("set the client info"),i.push((0,Qd.getPackageMeta)().then(s=>t.client("SETINFO","LIB-VER",s.version).catch(Qd.noop)).catch(Qd.noop)),i.push(t.client("SETINFO","LIB-NAME",!((e=t.options)===null||e===void 0)&&e.clientInfoTag?`ioredis(${t.options.clientInfoTag})`:"ioredis").catch(Qd.noop))),Promise.all(i).catch(Qd.noop).finally(()=>{t.options.enableReadyCheck||Mc.readyHandler(t)(),t.options.enableReadyCheck&&t._readyCheck(function(s,o){n===t.connectionEpoch&&(s?r||t.recoverFromFatalError(new Error("Ready check failed: "+s.message),s):t.connector.check(o)?Mc.readyHandler(t)():t.disconnect(!0))})})}}Mc.connectHandler=AGt;function Xne(t){let e=new _Gt.AbortError("Command aborted due to connection close");return e.command={name:t.name,args:t.args},e}function CGt(t){var e;let r=0;for(let n=0;n<t.length;){let i=(e=t.peekAt(n))===null||e===void 0?void 0:e.command,s=i.pipelineIndex;if((s===void 0||s===0)&&(r=0),s!==void 0&&s!==r++){t.remove(n,1),i.reject(Xne(i));continue}n++}}function TGt(t){var e;for(let r=0;r<t.length;){let n=(e=t.peekAt(r))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){t.remove(r,1),n.reject(Xne(n));break}n.inTransaction?(t.remove(r,1),n.reject(Xne(n))):r++}}function OGt(t){return function(){let r=t.status;if(t.setStatus("close"),t.commandQueue.length&&CGt(t.commandQueue),t.offlineQueue.length&&TGt(t.offlineQueue),r==="ready"&&(t.prevCondition||(t.prevCondition=t.condition),t.commandQueue.length&&(t.prevCommandQueue=t.commandQueue)),t.manuallyClosing)return t.manuallyClosing=!1,Zs("skip reconnecting since the connection is manually closed."),e();if(typeof t.options.retryStrategy!="function")return Zs("skip reconnecting because `retryStrategy` is not a function"),e();let n=t.options.retryStrategy(++t.retryAttempts);if(typeof n!="number")return Zs("skip reconnecting because `retryStrategy` doesn't return a number"),e();Zs("reconnect in %sms",n),t.setStatus("reconnecting",n),t.reconnectTimeout=setTimeout(function(){t.reconnectTimeout=null,t.connect().catch(Qd.noop)},n);let{maxRetriesPerRequest:i}=t.options;typeof i=="number"&&(i<0?Zs("maxRetriesPerRequest is negative, ignoring..."):t.retryAttempts%(i+1)===0&&(Zs("reach maxRetriesPerRequest limitation, flushing command queue..."),t.flushQueue(new SGt.MaxRetriesPerRequestError(i))))};function e(){t.setStatus("end"),t.flushQueue(new Error(Qd.CONNECTION_CLOSED_ERROR_MSG))}}Mc.closeHandler=OGt;function xGt(t){return function(e){Zs("error: %s",e),t.silentEmit("error",e)}}Mc.errorHandler=xGt;function IGt(t){return function(){if(t.setStatus("ready"),t.retryAttempts=0,t.options.monitor){t.call("monitor").then(()=>t.setStatus("monitoring"),n=>t.emit("error",n));let{sendCommand:r}=t;t.sendCommand=function(n){return vGt.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?r.call(t,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},t.once("close",function(){delete t.sendCommand});return}let e=t.prevCondition?t.prevCondition.select:t.condition.select;if(t.options.readOnly&&(Zs("set the connection to readonly mode"),t.readonly().catch(Qd.noop)),t.prevCondition){let r=t.prevCondition;if(t.prevCondition=null,r.subscriber&&t.options.autoResubscribe){t.condition.select!==e&&(Zs("connect to db [%d]",e),t.select(e));let n=r.subscriber.channels("subscribe");n.length&&(Zs("subscribe %d channels",n.length),t.subscribe(n));let i=r.subscriber.channels("psubscribe");i.length&&(Zs("psubscribe %d channels",i.length),t.psubscribe(i));let s=r.subscriber.channels("ssubscribe");if(s.length){Zs("ssubscribe %s",s.length);for(let o of s)t.ssubscribe(o)}}}if(t.prevCommandQueue)if(t.options.autoResendUnfulfilledCommands)for(Zs("resend %d unfulfilled commands",t.prevCommandQueue.length);t.prevCommandQueue.length>0;){let r=t.prevCommandQueue.shift();r.select!==t.condition.select&&r.command.name!=="select"&&t.select(r.select),t.sendCommand(r.command,r.stream)}else t.prevCommandQueue=null;if(t.offlineQueue.length){Zs("send %d commands in offline queue",t.offlineQueue.length);let r=t.offlineQueue;for(t.resetOfflineQueue();r.length>0;){let n=r.shift();n.select!==t.condition.select&&n.command.name!=="select"&&t.select(n.select),t.sendCommand(n.command,n.stream)}}t.condition.select!==e&&(Zs("connect to db [%d]",e),t.select(e))}}Mc.readyHandler=IGt});var hBe=m(gP=>{"use strict";Object.defineProperty(gP,"__esModule",{value:!0});gP.DEFAULT_REDIS_OPTIONS=void 0;gP.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:0,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(t){return Math.min(t*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,disableClientInfo:!1,clientInfoTag:void 0,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(t){return Math.min(t*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var pm=m(eie=>{"use strict";Object.defineProperty(eie,"__esModule",{value:!0});var mBe=u_(),gBe=require("events"),Zne=um(),RGt=Ine(),rA=jf(),DGt=YFe(),kGt=hP(),hm=fBe(),MGt=hBe(),PGt=iP(),NGt=pne(),Tg=cs(),FGt=hne(),BGt=oP(),mm=XM(),yBe=lP(),ym=(0,Tg.Debug)("redis"),gm=class t extends BGt.default{constructor(e,r,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,r,n),gBe.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let i=new kGt.default(this.options);i.emitter=this,this.connector=i}else this.connector=new DGt.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,s])=>{this.defineCommand(i,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(mm.noop)}static createClient(...e){return new t(...e)}get autoPipelineQueueSize(){let e=0;for(let r of this._autoPipelines.values())e+=r.length;return e}connect(e){let r=new Promise((n,i)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){i(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let o=this;(0,Zne.default)(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),i(a),o.setStatus("end");return}let c=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(c="connect"),o.stream=u,s.noDelay&&u.setNoDelay(!0),typeof s.keepAlive=="number"&&(u.connecting?u.once(c,()=>{u.setKeepAlive(!0,s.keepAlive)}):u.setKeepAlive(!0,s.keepAlive)),u.connecting){if(u.once(c,hm.connectHandler(o)),s.connectTimeout){let p=!1;u.setTimeout(s.connectTimeout,function(){if(p)return;u.setTimeout(0),u.destroy();let f=new Error("connect ETIMEDOUT");f.errorno="ETIMEDOUT",f.code="ETIMEDOUT",f.syscall="connect",hm.errorHandler(o)(f)}),u.once(c,function(){p=!0,u.setTimeout(0)})}}else if(u.destroyed){let p=o.connector.firstError;p&&process.nextTick(()=>{hm.errorHandler(o)(p)}),process.nextTick(hm.closeHandler(o))}else process.nextTick(hm.connectHandler(o));u.destroyed||(u.once("error",hm.errorHandler(o)),u.once("close",hm.closeHandler(o)));let l=function(){o.removeListener("close",d),n()};var d=function(){o.removeListener("ready",l),i(new Error(Tg.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",l),o.once("close",d)})});return(0,Zne.default)(r,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?hm.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new t({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let r=this.duplicate({monitor:!0,lazyConnect:!1});return(0,Zne.default)(new Promise(function(n,i){r.once("error",i),r.once("monitoring",function(){n(r)})}),e)}sendCommand(e,r){var n,i;if(this.status==="wait"&&this.connect().catch(mm.noop),this.status==="end")return e.reject(new Error(Tg.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!rA.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!r&&this.status==="connect"&&(0,mBe.exists)(e.name)&&((0,mBe.hasFlag)(e.name,"loading")||rA.default.checkFlag("HANDSHAKE_COMMANDS",e.name));if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)ym.enabled&&ym("write command[%s]: %d -> %s(%o)",this._getDescription(),(i=this.condition)===null||i===void 0?void 0:i.select,e.name,e.args),r?"isPipeline"in r&&r.isPipeline?r.write(e.toWritable(r.destination.redis.stream)):r.write(e.toWritable(r)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:r,select:this.condition.select}),rA.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0),this.options.socketTimeout!==void 0&&this.socketTimeoutTimer===void 0&&this.setSocketTimeout();else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;ym.enabled&&ym("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:r,select:this.condition.select})}if(e.name==="select"&&(0,Tg.isInt)(e.args[0])){let o=parseInt(e.args[0],10);this.condition.select!==o&&(this.condition.select=o,this.emit("select",o),ym("switch to db [%d]",this.condition.select))}return e.promise}setSocketTimeout(){this.socketTimeoutTimer=setTimeout(()=>{this.stream.destroy(new Error(`Socket timeout. Expecting data, but didn't receive any in ${this.options.socketTimeout}ms.`)),this.socketTimeoutTimer=void 0},this.options.socketTimeout),this.stream.once("data",()=>{clearTimeout(this.socketTimeoutTimer),this.socketTimeoutTimer=void 0,this.commandQueue.length!==0&&this.setSocketTimeout()})}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,r){return this.createScanStream("sscan",{key:e,options:r})}sscanBufferStream(e,r){return this.createScanStream("sscanBuffer",{key:e,options:r})}hscanStream(e,r){return this.createScanStream("hscan",{key:e,options:r})}hscanBufferStream(e,r){return this.createScanStream("hscanBuffer",{key:e,options:r})}zscanStream(e,r){return this.createScanStream("zscan",{key:e,options:r})}zscanBufferStream(e,r){return this.createScanStream("zscanBuffer",{key:e,options:r})}silentEmit(e,r){let n;if(!(e==="error"&&(n=r,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===Tg.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,r,n){this.flushQueue(r,n),this.silentEmit("error",r),this.disconnect(!0)}handleReconnection(e,r){var n;let i=!1;switch(this.options.reconnectOnError&&!rA.default.checkFlag("IGNORE_RECONNECT_ON_ERROR",r.command.name)&&(i=this.options.reconnectOnError(e)),i){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),r.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==r.select&&r.command.name!=="select"&&this.select(r.select),this.sendCommand(r.command);break;default:r.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new yBe}resetOfflineQueue(){this.offlineQueue=new yBe}parseOptions(...e){let r={},n=!1;for(let i=0;i<e.length;++i){let s=e[i];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,mm.defaults)(r,s);else if(typeof s=="string")(0,mm.defaults)(r,(0,Tg.parseURL)(s)),s.startsWith("rediss://")&&(n=!0);else if(typeof s=="number")r.port=s;else throw new Error("Invalid argument "+s)}n&&(0,mm.defaults)(r,{tls:!0}),(0,mm.defaults)(r,t.defaultOptions),typeof r.port=="string"&&(r.port=parseInt(r.port,10)),typeof r.db=="string"&&(r.db=parseInt(r.db,10)),this.options=(0,Tg.resolveTLSProfile)(r)}setStatus(e,r){ym.enabled&&ym("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,r))}createScanStream(e,{key:r,options:n={}}){return new PGt.default({objectMode:!0,key:r,redis:this,command:e,...n})}flushQueue(e,r){r=(0,mm.defaults)({},r,{offlineQueue:!0,commandQueue:!0});let n;if(r.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(r.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let r=this;this.info(function(n,i){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof i!="string")return e(null,i);let s={},o=i.split(`\r
`);for(let a=0;a<o.length;++a){let[u,...c]=o[a].split(":"),l=c.join(":");l&&(s[u]=l)}if(!s.loading||s.loading==="0")e(null,s);else{let a=(s.loading_eta_seconds||1)*1e3,u=r.options.maxLoadingRetryTime&&r.options.maxLoadingRetryTime<a?r.options.maxLoadingRetryTime:a;ym("Redis server still loading, trying again in "+u+"ms"),setTimeout(function(){r._readyCheck(e)},u)}}).catch(mm.noop)}};gm.Cluster=RGt.default;gm.Command=rA.default;gm.defaultOptions=MGt.DEFAULT_REDIS_OPTIONS;(0,FGt.default)(gm,gBe.EventEmitter);(0,NGt.addTransactionSupport)(gm.prototype);eie.default=gm});var EP=m((_n,bBe)=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.print=_n.ReplyError=_n.SentinelIterator=_n.SentinelConnector=_n.AbstractConnector=_n.Pipeline=_n.ScanStream=_n.Command=_n.Cluster=_n.Redis=_n.default=void 0;_n=bBe.exports=pm().default;var qGt=pm();Object.defineProperty(_n,"default",{enumerable:!0,get:function(){return qGt.default}});var LGt=pm();Object.defineProperty(_n,"Redis",{enumerable:!0,get:function(){return LGt.default}});var jGt=Ine();Object.defineProperty(_n,"Cluster",{enumerable:!0,get:function(){return jGt.default}});var $Gt=jf();Object.defineProperty(_n,"Command",{enumerable:!0,get:function(){return $Gt.default}});var KGt=iP();Object.defineProperty(_n,"ScanStream",{enumerable:!0,get:function(){return KGt.default}});var UGt=cne();Object.defineProperty(_n,"Pipeline",{enumerable:!0,get:function(){return UGt.default}});var VGt=pP();Object.defineProperty(_n,"AbstractConnector",{enumerable:!0,get:function(){return VGt.default}});var EBe=hP();Object.defineProperty(_n,"SentinelConnector",{enumerable:!0,get:function(){return EBe.default}});Object.defineProperty(_n,"SentinelIterator",{enumerable:!0,get:function(){return EBe.SentinelIterator}});_n.ReplyError=wg().ReplyError;Object.defineProperty(_n,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(t){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function GGt(t,e){console.log(t?"Error: "+t:"Reply: "+e)}_n.print=GGt});var _Be,tie,Ln,rie=ce(()=>{"use strict";_Be=Ct(EP());bf();om();tie=new _Be.default({host:"127.0.0.1",port:6379});tie.on("connect",()=>qe.info(" Redis connected"));tie.on("error",t=>qe.error("Redis error:",{error:Xs.serialize(t)}));Ln=tie});var nie,gi,iie=ce(()=>{"use strict";rie();bf();nie=class{constructor(){this.pendingRequests=new Map;this.circuitBreakerOpen=!1;this.BASE_TTL=3600;this.MAX_JITTER=300}async get(e){if(this.circuitBreakerOpen)return qe.warn("Redis circuit breaker open, skipping cache"),null;try{let r=await Ln.get(e);return r?JSON.parse(r):null}catch(r){return qe.error("Redis get error",{key:e,error:r}),this.openCircuitBreaker(),null}}async hgetall(e){if(this.circuitBreakerOpen)return null;try{let r=await Ln.hgetall(e);return!r||Object.keys(r).length===0?null:this.parseHashData(r)}catch(r){return qe.error("Redis hgetall error",{key:e,error:r}),this.openCircuitBreaker(),null}}async set(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i=this.getTTLWithJitter(n);return await Ln.set(e,JSON.stringify(r),"EX",i),!0}catch(i){return qe.error("Redis set error",{key:e,error:i}),this.openCircuitBreaker(),!1}}async hset(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i=typeof n=="object"?JSON.stringify(n):n;return await Ln.hset(e,r,i),!0}catch(i){return qe.error("Redis hset error",{key:e,field:r,error:i}),this.openCircuitBreaker(),!1}}async hmset(e,r,n){if(this.circuitBreakerOpen)return!1;try{let i={};for(let[o,a]of Object.entries(r))i[o]=typeof a=="object"?JSON.stringify(a):String(a);await Ln.hset(e,i);let s=this.getTTLWithJitter(n);return await Ln.expire(e,s),!0}catch(i){return qe.error("Redis hmset error",{key:e,error:i}),this.openCircuitBreaker(),!1}}async delete(e){if(this.circuitBreakerOpen)return!1;try{return await Ln.del(e),!0}catch(r){return qe.error("Redis delete error",{key:e,error:r}),this.openCircuitBreaker(),!1}}async deleteMany(e){if(this.circuitBreakerOpen||e.length===0)return!1;try{return await Ln.del(...e),!0}catch(r){return qe.error("Redis deleteMany error",{keys:e,error:r}),this.openCircuitBreaker(),!1}}async addToTag(e,r){if(this.circuitBreakerOpen)return!1;try{return await Ln.sadd(e,r),!0}catch(n){return qe.error("Redis addToTag error",{tag:e,key:r,error:n}),!1}}async invalidateTag(e){if(this.circuitBreakerOpen)return!1;try{let r=await Ln.smembers(e);return r.length>0&&await Ln.del(...r),await Ln.del(e),!0}catch(r){return qe.error("Redis invalidateTag error",{tag:e,error:r}),!1}}async getOrFetch(e,r,n){let i=await this.get(e);if(i!==null)return i;if(this.pendingRequests.has(e))return qe.info("Request coalescing: waiting for pending fetch",{key:e}),this.pendingRequests.get(e);let s=(async()=>{try{let o=await r();return o&&await this.set(e,o,n),o}finally{this.pendingRequests.delete(e)}})();return this.pendingRequests.set(e,s),s}getTTLWithJitter(e){let r=e||this.BASE_TTL,n=Math.floor(Math.random()*this.MAX_JITTER);return r+n}parseHashData(e){let r={};for(let[n,i]of Object.entries(e))try{r[n]=JSON.parse(i)}catch{r[n]=i}return r}openCircuitBreaker(){this.circuitBreakerOpen||(this.circuitBreakerOpen=!0,qe.error("Redis circuit breaker opened"),setTimeout(()=>{this.circuitBreakerOpen=!1,qe.info("Redis circuit breaker closed")},3e4))}},gi=new nie});var b_,nA,sie,HGt,oie,Wl,bP=ce(()=>{"use strict";b_=Ct(hy());nA={free:{max:20,min:0,current:20},standard:{max:10,min:0,current:10},premium:{max:5,min:0,current:5}},sie=new b_.Schema({max:{type:Number,default:0},min:{type:Number,default:0},current:{type:Number,default:0}},{_id:!1}),HGt=new b_.Schema({premium:{type:sie},standard:{type:sie},free:{type:sie}},{_id:!1}),oie=new b_.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},chatBotPrompt:{type:HGt,default:()=>({premium:nA.premium,standard:nA.standard,free:nA.free})},title:{type:String,default:""},sender:{type:String,default:""},receivedDate:{type:Date},summary:{type:String,default:""},translatedText:{type:String,default:""},pdfBlobStorage:{type:Boolean,required:!0},targetLanguage:{type:String,default:""},structuredTranslatedText:{type:Map,of:String,default:{}},actionPlan:{type:[{title:String,reason:String}],default:[]},actionPlans:{type:[{id:{type:String,required:[!0,"Action Plan ID is required"]},title:{type:String,default:""},dueDate:{type:Date},completed:{type:Boolean,default:!1},location:{type:String,default:""}}],default:[],_id:!1}},{timestamps:!0});oie.index({userId:1,createdAt:1});oie.index({userId:1,docId:1},{unique:!0});Wl=(0,b_.model)("Document",oie)});var vBe,SBe=ce(()=>{"use strict";BI();bP();vBe=t=>({limits:wh[t],botLimits:nA[t]})});var wBe,ABe,CBe,__,TBe=ce(()=>{"use strict";BI();wBe=Ct(r0());bf();hw();pPe();ABe=Ct(ONe());om();iie();CBe=Ct(hy());SBe();bP();__=class{constructor(){this.config={auth:{clientId:As.AZURE_CLIENT_ID,clientSecret:As.AZURE_CLIENT_SECRETE,authority:As.AZURE_CLIENT_AUTHORITY}}}getStartOfNextMonth(){let e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,1)}mapUserToDTO(e){return{userId:String(e.userId),plan:e.plan,lengthOfDocs:e.lengthOfDocs,email:e.email}}async deleteUserFromEntraId(e){if(!e)throw new Rn("Valid userId is required");try{let n=await new k9(this.config).acquireTokenByClientCredential({scopes:["https://graph.microsoft.com/.default"]});if(!n?.accessToken)throw qe.error("Failed to acquire Graph token for Entra ID deletion",{userId:e}),new V9("Failed to acquire Graph token");return await ABe.Client.init({authProvider:s=>s(null,n.accessToken)}).api(`/users/${e}`).delete(),!0}catch(r){if(r.statusCode===404)return qe.warn("User not found in Entra ID for deletion",{userId:e}),!1;throw r instanceof V9?r:(qe.error("Failed to delete user from Entra ID",{userId:e,error:r}),new zM("Failed to delete user from Entra ID"))}}async deleteUser(e){let r=this.getStartOfNextMonth();try{(await GE.updateOne({userId:e},{$set:{status:"deleted",deletedAt:new Date,permanentDeleteAt:r}}).exec()).matchedCount===0?qe.warn("Attempted to delete non-existent user",{userId:e}):qe.info("User status successfully changed to delete",{userId:e,permanentDeleteAt:r}),await gi.delete(`user:${e}`),await gi.invalidateTag(`tag:user:${e}`)}catch(n){throw qe.error("Error deleting user",{userId:e,error:n}),new on("Failed to delete user")}}async updateUser(e,r){try{let n=`lengthOfDocs.${r}.current`;await GE.updateOne({userId:e,status:"active",[n]:{$gt:0}},{$inc:{[n]:-1},$set:{updatedAt:new Date}}).exec(),await gi.delete(`user:${e}`),await gi.invalidateTag(`tag:user:${e}`)}catch(n){throw qe.error("Failed to decrease user docs limit after document processing",{userId:e,plan:r,error:n}),new on("Failed to update user details")}}async checkIfUserExist(e){let r=e.userId,n=e.email,i=`user:${r}`;return gi.getOrFetch(i,async()=>{qe.info("Cache miss: fetching user from DB",{userEmail:n});let s=await GE.findOne({email:n}).select("-__v").lean().exec();if(!s)return null;if(s.status==="deleted")throw qe.warn("Blocked user attempted access in the same month of deletion",{userId:r}),new $9;return this.mapUserToDTO(s)},3600)}async createUserFromToken(e){let r=e.userId,n=e.email,i=e.username;try{await GE.create({userId:r,email:n,username:i})}catch(s){throw s.code===11e3?(qe.warn("User creation failed: Email exists (Duplicate Key)",{email:n}),new $9):(qe.error("Error creating user",{userId:r,email:n,error:Xs.serialize(s)}),new on("Failed to create user"))}}async changeUserPlan(e,r){let n=await CBe.default.startSession();n.startTransaction();try{let{limits:i,botLimits:s}=vBe(r);if(!await GE.findOneAndUpdate({userId:e,status:"active"},{$set:{plan:r,lengthOfDocs:{[r]:i},updatedAt:new Date}},{session:n,new:!0}).exec())throw new U9;await Wl.updateMany({userId:e},{$set:{chatBotPrompt:{[r]:s}}},{session:n}),await n.commitTransaction(),await gi.delete(`user:${e}`),await gi.invalidateTag(`tag:user:${e}`),qe.info(`Plan changed to ${r} for user ${e}`)}catch(i){throw await n.abortTransaction(),qe.error("Plan change failed, transaction rolled back",{userId:e,error:i}),i instanceof U9?i:new on("Failed to change user plan")}finally{n.endSession()}}};__=E1([(0,wBe.injectable)()],__)});function OBe(t,e=0){return(eo[t[e+0]]+eo[t[e+1]]+eo[t[e+2]]+eo[t[e+3]]+"-"+eo[t[e+4]]+eo[t[e+5]]+"-"+eo[t[e+6]]+eo[t[e+7]]+"-"+eo[t[e+8]]+eo[t[e+9]]+"-"+eo[t[e+10]]+eo[t[e+11]]+eo[t[e+12]]+eo[t[e+13]]+eo[t[e+14]]+eo[t[e+15]]).toLowerCase()}var eo,xBe=ce(()=>{eo=[];for(let t=0;t<256;++t)eo.push((t+256).toString(16).slice(1))});function aie(){return _P>vP.length-16&&((0,IBe.randomFillSync)(vP),_P=0),vP.slice(_P,_P+=16)}var IBe,vP,_P,RBe=ce(()=>{IBe=require("crypto"),vP=new Uint8Array(256),_P=vP.length});var DBe,uie,kBe=ce(()=>{DBe=require("crypto"),uie={randomUUID:DBe.randomUUID}});function zGt(t,e,r){if(uie.randomUUID&&!e&&!t)return uie.randomUUID();t=t||{};let n=t.random??t.rng?.()??aie();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return OBe(n)}var Og,MBe=ce(()=>{kBe();RBe();xBe();Og=zGt});var SP=ce(()=>{MBe()});var wP,PBe,v_,NBe=ce(()=>{"use strict";bP();wP=Ct(r0());SP();bf();om();iie();PBe=Ct(hy()),v_=class{constructor(e){this.userService=e}getDocumentCacheKey(e,r){return`doc:${e}:${r}`}getDocumentListCacheKey(e){return`docs:list:${e}`}getDocumentTag(e){return`tag:docs:${e}`}async deleteAllDocuments(e){if(!e)throw new Rn("Valid userId is required");try{let r=await Wl.deleteMany({userId:e}).exec();await gi.invalidateTag(this.getDocumentTag(e)),await gi.delete(this.getDocumentListCacheKey(e)),qe.info("Document history cleanup completed",{userId:e,deletedCount:r.deletedCount})}catch(r){throw qe.error("Failed to delete all documents",{userId:e,error:r}),new on("Failed to delete all documents")}}async getAllDocumentsByUserId(e,r,n){if(!e.userId)throw new Rn("Valid userId is required");try{let i=e.userId,s=`${this.getDocumentListCacheKey(i)}:${r}:${n}`;return await gi.getOrFetch(s,async()=>{qe.info("Cache miss: fetching documents from DB",{userId:i,limit:r,offset:n});let[a,u]=await Promise.all([Wl.countDocuments({userId:i}),Wl.find({userId:i}).sort({createdAt:1}).select("-__v").limit(r).skip(n).lean().exec()]);return await gi.addToTag(this.getDocumentTag(i),s),{total:a,documents:u}},1800)}catch(i){throw qe.error("Failed to fetch documents",{userId:e.userId,error:i}),new on("Failed to retrieve documents")}}async createDocumentAndUpdatePlanLimit(e,r){if(!e?.userId||!e?.docId)throw new Rn("Valid document data with userId and docId required");let n=await PBe.default.startSession();n.startTransaction();try{await Wl.create([e],{session:n}),await this.userService.updateUser(e.userId,r),await n.commitTransaction(),await gi.invalidateTag(this.getDocumentTag(e.userId))}catch(i){throw await n.abortTransaction(),qe.error("Atomic document creation failed",{userId:e.userId,error:i}),i instanceof on||i instanceof Rn?i:new on("Failed to create document and update limits")}finally{n.endSession()}}async getDocument(e,r){if(!e.userId||!r)throw new Rn("Valid userId and docId are required");try{let n=this.getDocumentCacheKey(e.userId,r);return gi.getOrFetch(n,async()=>{qe.info("Cache miss: fetching document from DB",{userId:e.userId,docId:r});let i=await Wl.findOne({userId:e.userId,docId:r}).select("-__v").exec();return i&&await gi.addToTag(this.getDocumentTag(e.userId),n),i},3600)}catch(n){throw qe.error("Failed to fetch document",{userId:e.userId,docId:r,error:n}),new on("Failed to retrieve document")}}async deleteDocument(e,r){if(!e||!r)throw new Rn("Valid userId and docId are required");try{let n=await Wl.deleteOne({userId:e,docId:r}).exec();return n.deletedCount>0&&(await gi.delete(this.getDocumentCacheKey(e,r)),await gi.invalidateTag(this.getDocumentTag(e))),n.deletedCount>0}catch(n){throw qe.error("Failed to delete document",{userId:e,docId:r,error:n}),new on("Failed to delete document")}}async updateDocument(e,r,n){if(!e||!r)throw new Rn("Valid userId and docId are required");if(!n||Object.keys(n).length===0)throw new Rn("Valid update data is required");try{let i="$inc"in n?{...n,$set:{updatedAt:new Date}}:{$set:{...n,updatedAt:new Date}},s=await Wl.findOneAndUpdate({userId:e,docId:r},i,{new:!0,runValidators:!0,select:"-__v"}).lean().exec();return s&&(await gi.delete(this.getDocumentCacheKey(e,r)),await gi.invalidateTag(this.getDocumentTag(e))),s}catch(i){throw qe.error("Failed to update document",{userId:e,docId:r,error:i}),new on("Failed to update document")}}async updateActionPlan(e,r,n,i,s){if(!e||!r)throw new Rn("Valid userId and docId are required");try{let o=this.buildActionPlanUpdate(n,i,s),a=n==="update"&&s?{arrayFilters:[{"elem.id":s}]}:{},u=await Wl.findOneAndUpdate({userId:e,docId:r},o,{new:!0,runValidators:!0,select:"-__v",...a}).lean().exec();return u&&(await gi.delete(this.getDocumentCacheKey(e,r)),await gi.invalidateTag(this.getDocumentTag(e))),u}catch(o){throw qe.error("Failed to update action plan",{userId:e,docId:r,action:n,error:o}),new on("Failed to update action plan")}}buildActionPlanUpdate(e,r,n){switch(e){case"create":if(!r?.title)throw new Rn("Title is required for creating an action plan");return{$push:{actionPlans:{id:Og(),title:r.title,dueDate:r.dueDate?new Date(r.dueDate):new Date,completed:!1,location:r.location??""}},$set:{updatedAt:new Date}};case"delete":if(!n)throw new Rn("Action plan ID is required for deletion");return{$pull:{actionPlans:{id:n}},$set:{updatedAt:new Date}};case"update":if(!n)throw new Rn("Action plan ID is required for update");if(!r||Object.keys(r).length===0)throw new Rn("At least one field must be provided for update");let i={updatedAt:new Date};return r.title&&(i["actionPlans.$[elem].title"]=r.title),r.dueDate&&(i["actionPlans.$[elem].dueDate"]=new Date(r.dueDate)),r.completed!==void 0&&(i["actionPlans.$[elem].completed"]=r.completed),r.location&&(i["actionPlans.$[elem].location"]=r.location),{$set:i};default:throw new Rn('Invalid action type. Must be "create", "delete", or "update"')}}};v_=E1([(0,wP.injectable)(),Nde(0,(0,wP.inject)("IUserService"))],v_)});var AP,FBe,S_,BBe=ce(()=>{"use strict";AP=Ct(hy());FBe=new AP.Schema({userId:{type:String,required:[!0,"User ID is required"]},docId:{type:String,required:[!0,"Document ID is required"]},translatedText:{type:String,default:""},chats:{type:[{userPrompt:{type:String,required:[!0,"Prompt is required"]},response:{type:String,required:[!0,"Response is required"]},time:{type:Date,default:Date.now}}],default:[],_id:!1}},{timestamps:!0});FBe.index({userId:1,docId:1},{unique:!0});S_=(0,AP.model)("ChatBotHistory",FBe)});var qBe,w_,LBe=ce(()=>{"use strict";BBe();qBe=Ct(r0());bf();om();w_=class{async getDocumentChatBotCollection(e,r){if(!e||!r)throw new Rn("Valid userId and docId are required");try{return await S_.findOne({userId:e,docId:r}).select("-__v").lean().exec()}catch(n){throw qe.error("Failed to retrieve chat history collection",{error:n,userId:e,docId:r}),new on("Failed to retrieve chat history")}}async updateDocumentChatBotHistory(e,r,n){try{if(!e||!r||!n||!n.userPrompt||!n.response)throw new Rn("User ID, Document ID, and valid chat data are required");if((await S_.updateOne({userId:e,docId:r},{$push:{chats:n}}).exec()).matchedCount===0)throw qe.error("Chat history collection not found for update for user:",{userId:e,docId:r}),new K9("Chat history collection not found for update");qe.info("Chat history collection updated successfully",{userId:e,docId:r})}catch(i){throw qe.error("Failed to update chat history collection",{error:i,userId:e,docId:r}),new on("Failed to update chat history collection")}}async createChatHistory(e){try{if(!e||!e.userId||!e.docId)throw new Error("Valid chat history data is required");return(await S_.create(e)).toObject()}catch(r){throw r.code===11e3?(qe.error("Chat history already exists for this document",{userId:e.userId,docId:e.docId}),new Error("Chat history already exists for this document")):(qe.error("Failed to create chat history collection",{error:r}),new Error(`Failed to create chat history collection: ${r}`))}}async deleteChatHistoryByUserId(e){if(!e)throw new Rn("User ID is required");try{let r=await S_.deleteMany({userId:e}).exec();qe.info("Chat history cleanup completed",{userId:e,deletedCount:r.deletedCount})}catch(r){throw qe.error("Failed to delete chat history",{userId:e,error:r}),new on("Failed to delete chat history")}}async deleteChatHistoryByDocument(e,r){if(!e||!r)throw new Error("User ID is required");try{return(await S_.deleteOne({userId:e,docId:r}).exec()).deletedCount>0}catch(n){throw qe.error("Failed to delete chat history",{error:n,userId:e}),new on("Failed to delete chat history")}}};w_=E1([(0,qBe.injectable)()],w_)});var UBe=m(cie=>{var jBe=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,WGt=/^[\u0020-\u007e\u0080-\u00ff]+$/,KBe=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,JGt=/\\([\u0000-\u007f])/g,YGt=/([\\"])/g,QGt=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,$Be=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,XGt=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;cie.format=ZGt;cie.parse=eHt;function ZGt(t){if(!t||typeof t!="object")throw new TypeError("argument obj is required");var e=t.parameters,r=t.subtype,n=t.suffix,i=t.type;if(!i||!$Be.test(i))throw new TypeError("invalid type");if(!r||!QGt.test(r))throw new TypeError("invalid subtype");var s=i+"/"+r;if(n){if(!$Be.test(n))throw new TypeError("invalid suffix");s+="+"+n}if(e&&typeof e=="object")for(var o,a=Object.keys(e).sort(),u=0;u<a.length;u++){if(o=a[u],!KBe.test(o))throw new TypeError("invalid parameter name");s+="; "+o+"="+rHt(e[o])}return s}function eHt(t){if(!t)throw new TypeError("argument string is required");if(typeof t=="object"&&(t=tHt(t)),typeof t!="string")throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),r=e!==-1?t.substr(0,e):t,n,i,s=nHt(r),o={},a;for(jBe.lastIndex=e;i=jBe.exec(t);){if(i.index!==e)throw new TypeError("invalid parameter format");e+=i[0].length,n=i[1].toLowerCase(),a=i[2],a[0]==='"'&&(a=a.substr(1,a.length-2).replace(JGt,"$1")),o[n]=a}if(e!==-1&&e!==t.length)throw new TypeError("invalid parameter format");return s.parameters=o,s}function tHt(t){if(typeof t.getHeader=="function")return t.getHeader("content-type");if(typeof t.headers=="object")return t.headers&&t.headers["content-type"]}function rHt(t){var e=String(t);if(KBe.test(e))return e;if(e.length>0&&!WGt.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(YGt,"\\$1")+'"'}function nHt(t){var e=XGt.exec(t.toLowerCase());if(!e)throw new TypeError("invalid media type");var r=e[1],n=e[2],i,s=n.lastIndexOf("+");s!==-1&&(i=n.substr(s+1),n=n.substr(0,s));var o={type:r,subtype:n,suffix:i};return o}});var VBe=m((YRr,iHt)=>{iHt.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var HBe=m((QRr,GBe)=>{GBe.exports=VBe()});var JBe=m(Ua=>{"use strict";var CP=HBe(),sHt=require("path").extname,zBe=/^\s*([^;\s]*)(?:;|\s|$)/,oHt=/^text\//i;Ua.charset=WBe;Ua.charsets={lookup:WBe};Ua.contentType=aHt;Ua.extension=uHt;Ua.extensions=Object.create(null);Ua.lookup=cHt;Ua.types=Object.create(null);lHt(Ua.extensions,Ua.types);function WBe(t){if(!t||typeof t!="string")return!1;var e=zBe.exec(t),r=e&&CP[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&oHt.test(e[1])?"UTF-8":!1}function aHt(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?Ua.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=Ua.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function uHt(t){if(!t||typeof t!="string")return!1;var e=zBe.exec(t),r=e&&Ua.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function cHt(t){if(!t||typeof t!="string")return!1;var e=sHt("x."+t).toLowerCase().substr(1);return e&&Ua.types[e]||!1}function lHt(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(CP).forEach(function(i){var s=CP[i],o=s.extensions;if(!(!o||!o.length)){t[i]=o;for(var a=0;a<o.length;a++){var u=o[a];if(e[u]){var c=r.indexOf(CP[e[u]].source),l=r.indexOf(s.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=i}}})}});var tqe=m((ZRr,A_)=>{"use strict";var YBe=UBe(),dHt=JBe();A_.exports=pHt;A_.exports.is=QBe;A_.exports.hasBody=XBe;A_.exports.normalize=ZBe;A_.exports.match=eqe;function QBe(t,e){var r,n=e,i=hHt(t);if(!i)return!1;if(n&&!Array.isArray(n))for(n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];if(!n||!n.length)return i;var s;for(r=0;r<n.length;r++)if(eqe(ZBe(s=n[r]),i))return s[0]==="+"||s.indexOf("*")!==-1?i:s;return!1}function XBe(t){return t.headers["transfer-encoding"]!==void 0||!isNaN(t.headers["content-length"])}function pHt(t,e){var r=e;if(!XBe(t))return null;if(arguments.length>2){r=new Array(arguments.length-1);for(var n=0;n<r.length;n++)r[n]=arguments[n+1]}var i=t.headers["content-type"];return QBe(i,r)}function ZBe(t){if(typeof t!="string")return!1;switch(t){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return t[0]==="+"?"*/*"+t:t.indexOf("/")===-1?dHt.lookup(t):t}function eqe(t,e){if(t===!1)return!1;var r=e.split("/"),n=t.split("/");return r.length!==2||n.length!==2||n[0]!=="*"&&n[0]!==r[0]?!1:n[1].substr(0,2)==="*+"?n[1].length<=r[1].length+1&&n[1].substr(1)===r[1].substr(1-n[1].length):!(n[1]!=="*"&&n[1]!==r[1])}function fHt(t){var e=YBe.parse(t);return e.parameters=void 0,YBe.format(e)}function hHt(t){if(!t)return null;try{return fHt(t)}catch{return null}}});var TP=m((oqe,aqe)=>{"use strict";function mHt(t){if(t.length===0)return;let e=Object.create(null),r=0;for(;r<t.length;++r){let o=t.charCodeAt(r);if(xg[o]!==1){if(o!==47||r===0)return;break}}if(r===t.length)return;let n=t.slice(0,r).toLowerCase(),i=++r;for(;r<t.length;++r){let o=t.charCodeAt(r);if(xg[o]!==1){if(r===i||yHt(t,r,e)===void 0)return;break}}if(r===i)return;let s=t.slice(i,r).toLowerCase();return{type:n,subtype:s,params:e}}function yHt(t,e,r){for(;e<t.length;){for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let a=t.charCodeAt(e);if(a!==32&&a!==9)break}if(e===t.length)return;let n,i=e;for(;e<t.length;++e){let a=t.charCodeAt(e);if(xg[a]!==1){if(a!==61)return;break}}if(e===t.length||(n=t.slice(i,e),++e,e===t.length))return;let s="",o;if(t.charCodeAt(e)===34){o=++e;let a=!1;for(;e<t.length;++e){let u=t.charCodeAt(e);if(u===92){a?(o=e,a=!1):(s+=t.slice(o,e),a=!0);continue}if(u===34){if(a){o=e,a=!1;continue}s+=t.slice(o,e);break}if(a&&(o=e-1,a=!1),sqe[u]!==1)return}if(e===t.length)return;++e}else{for(o=e;e<t.length;++e){let a=t.charCodeAt(e);if(xg[a]!==1){if(e===o)return;break}}s=t.slice(o,e)}n=n.toLowerCase(),r[n]===void 0&&(r[n]=s)}return r}function gHt(t,e){if(t.length===0)return;let r=Object.create(null),n=0;for(;n<t.length;++n){let s=t.charCodeAt(n);if(xg[s]!==1){if(EHt(t,n,r,e)===void 0)return;break}}return{type:t.slice(0,n).toLowerCase(),params:r}}function EHt(t,e,r,n){for(;e<t.length;){for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let c=t.charCodeAt(e);if(c!==32&&c!==9)break}if(e===t.length)return;let i,s=e;for(;e<t.length;++e){let c=t.charCodeAt(e);if(xg[c]!==1){if(c===61)break;return}}if(e===t.length)return;let o="",a,u;if(i=t.slice(s,e),i.charCodeAt(i.length-1)===42){let c=++e;for(;e<t.length;++e){let d=t.charCodeAt(e);if(_Ht[d]!==1){if(d!==39)return;break}}if(e===t.length)return;for(u=t.slice(c,e),++e;e<t.length&&t.charCodeAt(e)!==39;++e);if(e===t.length||(++e,e===t.length))return;a=e;let l=0;for(;e<t.length;++e){let d=t.charCodeAt(e);if(vHt[d]!==1){if(d===37){let p,f;if(e+2<t.length&&(p=rqe[t.charCodeAt(e+1)])!==-1&&(f=rqe[t.charCodeAt(e+2)])!==-1){let h=(p<<4)+f;o+=t.slice(a,e),o+=String.fromCharCode(h),e+=2,a=e+1,h>=128?l=2:l===0&&(l=1);continue}return}break}}if(o+=t.slice(a,e),o=iqe(o,u,l),o===void 0)return}else{if(++e,e===t.length)return;if(t.charCodeAt(e)===34){a=++e;let c=!1;for(;e<t.length;++e){let l=t.charCodeAt(e);if(l===92){c?(a=e,c=!1):(o+=t.slice(a,e),c=!0);continue}if(l===34){if(c){a=e,c=!1;continue}o+=t.slice(a,e);break}if(c&&(a=e-1,c=!1),sqe[l]!==1)return}if(e===t.length)return;++e}else{for(a=e;e<t.length;++e){let c=t.charCodeAt(e);if(xg[c]!==1){if(e===a)return;break}}o=t.slice(a,e)}if(o=n(o,2),o===void 0)return}i=i.toLowerCase(),r[i]===void 0&&(r[i]=o)}return r}function nqe(t){let e;for(;;)switch(t){case"utf-8":case"utf8":return iA.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return iA.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return iA.utf16le;case"base64":return iA.base64;default:if(e===void 0){e=!0,t=t.toLowerCase();continue}return iA.other.bind(t)}}var iA={utf8:(t,e)=>{if(t.length===0)return"";if(typeof t=="string"){if(e<2)return t;t=Buffer.from(t,"latin1")}return t.utf8Slice(0,t.length)},latin1:(t,e)=>t.length===0?"":typeof t=="string"?t:t.latin1Slice(0,t.length),utf16le:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.ucs2Slice(0,t.length)),base64:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=Buffer.from(t,"latin1")),t.base64Slice(0,t.length)),other:(t,e)=>{if(t.length===0)return"";typeof t=="string"&&(t=Buffer.from(t,"latin1"));try{return new TextDecoder(oqe).decode(t)}catch{}}};function iqe(t,e,r){let n=nqe(e);if(n)return n(t,r)}function bHt(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;--e)switch(t.charCodeAt(e)){case 47:case 92:return t=t.slice(e+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}var xg=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sqe=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],_Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],vHt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rqe=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];aqe.exports={basename:bHt,convertToUTF8:iqe,getDecoder:nqe,parseContentType:mHt,parseDisposition:gHt}});var dqe=m((eDr,lqe)=>{"use strict";function uqe(t,e,r,n,i){for(let s=0;s<i;++s)if(t[e+s]!==r[n+s])return!1;return!0}var lie=class{constructor(e,r){if(typeof r!="function")throw new Error("Missing match callback");if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw new Error(`Expected Buffer for needle, got ${typeof e}`);let n=e.length;if(this.maxMatches=1/0,this.matches=0,this._cb=r,this._lookbehindSize=0,this._needle=e,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(n),this._occ=[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n],n>1)for(let i=0;i<n-1;++i)this._occ[e[i]]=n-1-i}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(e,r){let n;Buffer.isBuffer(e)||(e=Buffer.from(e,"latin1"));let i=e.length;for(this._bufPos=r||0;n!==i&&this.matches<this.maxMatches;)n=SHt(this,e);return n}destroy(){let e=this._lookbehindSize;e&&this._cb(!1,this._lookbehind,0,e,!1),this.reset()}};function SHt(t,e){let r=e.length,n=t._needle,i=n.length,s=-t._lookbehindSize,o=i-1,a=n[o],u=r-i,c=t._occ,l=t._lookbehind;if(s<0){for(;s<0&&s<=u;){let p=s+o,f=p<0?l[t._lookbehindSize+p]:e[p];if(f===a&&cqe(t,e,s,o))return t._lookbehindSize=0,++t.matches,s>-t._lookbehindSize?t._cb(!0,l,0,t._lookbehindSize+s,!1):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[f]}for(;s<0&&!cqe(t,e,s,r-s);)++s;if(s<0){let p=t._lookbehindSize+s;return p>0&&t._cb(!1,l,0,p,!1),t._lookbehindSize-=p,l.copy(l,0,p,t._lookbehindSize),l.set(e,t._lookbehindSize),t._lookbehindSize+=r,t._bufPos=r,r}t._cb(!1,l,0,t._lookbehindSize,!1),t._lookbehindSize=0}s+=t._bufPos;let d=n[0];for(;s<=u;){let p=e[s+o];if(p===a&&e[s]===d&&uqe(n,0,e,s,o))return++t.matches,s>0?t._cb(!0,e,t._bufPos,s,!0):t._cb(!0,void 0,0,0,!0),t._bufPos=s+i;s+=c[p]}for(;s<r;){if(e[s]!==d||!uqe(e,s,n,0,r-s)){++s;continue}e.copy(l,0,s,r),t._lookbehindSize=r-s;break}return s>0&&t._cb(!1,e,t._bufPos,s<r?s:r,!0),t._bufPos=r,r}function cqe(t,e,r,n){let i=t._lookbehind,s=t._lookbehindSize,o=t._needle;for(let a=0;a<n;++a,++r)if((r<0?i[s+r]:e[r])!==o[a])return!1;return!0}lqe.exports=lie});var _qe=m((tDr,bqe)=>{"use strict";var{Readable:wHt,Writable:AHt}=require("stream"),CHt=dqe(),{basename:THt,convertToUTF8:pqe,getDecoder:OHt,parseContentType:xHt,parseDisposition:IHt}=TP(),RHt=Buffer.from(`\r
`),DHt=Buffer.from("\r"),kHt=Buffer.from("-");function fqe(){}var MHt=2e3,C_=16*1024,OP=0,hqe=1,mqe=2,die=class{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=OP,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=OP,this.name="",this.value="",this.crlf=0}push(e,r,n){let i=r;for(;r<n;)switch(this.state){case OP:{let s=!1;for(;r<n;++r){if(this.byteCount===C_)return-1;++this.byteCount;let o=e[r];if(FHt[o]!==1){if(o!==58||(this.name+=e.latin1Slice(i,r),this.name.length===0))return-1;++r,s=!0,this.state=hqe;break}}if(!s){this.name+=e.latin1Slice(i,r);break}}case hqe:{let s=!1;for(;r<n;++r){if(this.byteCount===C_)return-1;++this.byteCount;let o=e[r];if(o!==32&&o!==9){i=r,s=!0,this.state=mqe;break}}if(!s)break}case mqe:switch(this.crlf){case 0:for(;r<n;++r){if(this.byteCount===C_)return-1;++this.byteCount;let s=e[r];if(BHt[s]!==1){if(s!==13)return-1;++this.crlf;break}}this.value+=e.latin1Slice(i,r++);break;case 1:if(this.byteCount===C_||(++this.byteCount,e[r++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===C_)return-1;++this.byteCount;let s=e[r];s===32||s===9?(i=r,this.crlf=0):(++this.pairCount<MHt&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),s===13?(++this.crlf,++r):(i=r,this.crlf=0,this.state=OP,this.name="",this.value=""));break}case 3:{if(this.byteCount===C_||(++this.byteCount,e[r++]!==10))return-1;let s=this.header;return this.reset(),this.cb(s),r}}break}return r}},pie=class extends wHt{constructor(e,r){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--r._fileEndsLeft===0&&r._finalcb){let n=r._finalcb;r._finalcb=null,process.nextTick(n)}})}_read(e){let r=this._readcb;r&&(this._readcb=null,r())}},yqe={push:(t,e)=>{},destroy:()=>{}};function PHt(t,e){let r=t._writecb;t._writecb=null,e?t.destroy(e):r&&r()}function NHt(t,e){return t}var fie=class extends AHt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};if(super(r),!e.conType.params||typeof e.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let n=e.conType.params.boundary,i=typeof e.defParamCharset=="string"&&e.defParamCharset?OHt(e.defParamCharset):NHt,s=e.defCharset||"utf8",o=e.preservePath,a={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.fileHwm=="number"?e.fileHwm:void 0},u=e.limits,c=u&&typeof u.fieldSize=="number"?u.fieldSize:1*1024*1024,l=u&&typeof u.fileSize=="number"?u.fileSize:1/0,d=u&&typeof u.files=="number"?u.files:1/0,p=u&&typeof u.fields=="number"?u.fields:1/0,f=u&&typeof u.parts=="number"?u.parts:1/0,h=-1,g=0,_=0,S=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let w=0,C,A=0,O,x,R,M,I=!1,F=!1,B=!1;this._hparser=null;let U=new die(ie=>{this._hparser=null,S=!1,R="text/plain",O=s,x="7bit",M=void 0,I=!1;let j;if(!ie["content-disposition"]){S=!0;return}let V=IHt(ie["content-disposition"][0],i);if(!V||V.type!=="form-data"){S=!0;return}if(V.params&&(V.params.name&&(M=V.params.name),V.params["filename*"]?j=V.params["filename*"]:V.params.filename&&(j=V.params.filename),j!==void 0&&!o&&(j=THt(j))),ie["content-type"]){let Ee=xHt(ie["content-type"][0]);Ee&&(R=`${Ee.type}/${Ee.subtype}`,Ee.params&&typeof Ee.params.charset=="string"&&(O=Ee.params.charset.toLowerCase()))}if(ie["content-transfer-encoding"]&&(x=ie["content-transfer-encoding"][0].toLowerCase()),R==="application/octet-stream"||j!==void 0){if(_===d){F||(F=!0,this.emit("filesLimit")),S=!0;return}if(++_,this.listenerCount("file")===0){S=!0;return}w=0,this._fileStream=new pie(a,this),++this._fileEndsLeft,this.emit("file",M,this._fileStream,{filename:j,encoding:x,mimeType:R})}else{if(g===p){B||(B=!0,this.emit("fieldsLimit")),S=!0;return}if(++g,this.listenerCount("field")===0){S=!0;return}C=[],A=0}}),k=0,H=(ie,j,V,Ee,Re)=>{e:for(;j;){if(this._hparser!==null){let fe=this._hparser.push(j,V,Ee);if(fe===-1){this._hparser=null,U.reset(),this.emit("error",new Error("Malformed part header"));break}V=fe}if(V===Ee)break;if(k!==0){if(k===1){switch(j[V]){case 45:k=2,++V;break;case 13:k=3,++V;break;default:k=0}if(V===Ee)return}if(k===2){if(k=0,j[V]===45){this._complete=!0,this._bparser=yqe;return}let fe=this._writecb;this._writecb=fqe,H(!1,kHt,0,1,!1),this._writecb=fe}else if(k===3)if(k=0,j[V]===10){if(++V,h>=f||(this._hparser=U,V===Ee))break;continue e}else{let fe=this._writecb;this._writecb=fqe,H(!1,DHt,0,1,!1),this._writecb=fe}}if(!S){if(this._fileStream){let fe,Ge=Math.min(Ee-V,l-w);Re?fe=j.slice(V,V+Ge):(fe=Buffer.allocUnsafe(Ge),j.copy(fe,0,V,V+Ge)),w+=fe.length,w===l?(fe.length>0&&this._fileStream.push(fe),this._fileStream.emit("limit"),this._fileStream.truncated=!0,S=!0):this._fileStream.push(fe)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(C!==void 0){let fe,Ge=Math.min(Ee-V,c-A);Re?fe=j.slice(V,V+Ge):(fe=Buffer.allocUnsafe(Ge),j.copy(fe,0,V,V+Ge)),A+=Ge,C.push(fe),A===c&&(S=!0,I=!0)}}break}if(ie){if(k=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(C!==void 0){let fe;switch(C.length){case 0:fe="";break;case 1:fe=pqe(C[0],O,0);break;default:fe=pqe(Buffer.concat(C,A),O,0)}C=void 0,A=0,this.emit("field",M,fe,{nameTruncated:!1,valueTruncated:I,encoding:x,mimeType:R})}++h===f&&this.emit("partsLimit")}};this._bparser=new CHt(`\r
--${n}`,H),this._writecb=null,this._finalcb=null,this.write(RHt)}static detect(e){return e.type==="multipart"&&e.subtype==="form-data"}_write(e,r,n){this._writecb=n,this._bparser.push(e,0),this._writecb&&PHt(this)}_destroy(e,r){this._hparser=null,this._bparser=yqe,e||(e=Eqe(this));let n=this._fileStream;n&&(this._fileStream=null,n.destroy(e)),r(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=gqe.bind(null,this,e):gqe(this,e)}};function gqe(t,e,r){if(r)return e(r);r=Eqe(t),e(r)}function Eqe(t){if(t._hparser)return new Error("Malformed part header");let e=t._fileStream;if(e&&(t._fileStream=null,e.destroy(new Error("Unexpected end of file"))),!t._complete)return new Error("Unexpected end of form")}var FHt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],BHt=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];bqe.exports=fie});var Sqe=m((rDr,vqe)=>{"use strict";var{Writable:qHt}=require("stream"),{getDecoder:LHt}=TP(),Eie=class extends qHt{constructor(e){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};super(r);let n=e.defCharset||"utf8";e.conType.params&&typeof e.conType.params.charset=="string"&&(n=e.conType.params.charset),this.charset=n;let i=e.limits;this.fieldSizeLimit=i&&typeof i.fieldSize=="number"?i.fieldSize:1*1024*1024,this.fieldsLimit=i&&typeof i.fields=="number"?i.fields:1/0,this.fieldNameSizeLimit=i&&typeof i.fieldNameSize=="number"?i.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=LHt(n)}static detect(e){return e.type==="application"&&e.subtype==="x-www-form-urlencoded"}_write(e,r,n){if(this._fields>=this.fieldsLimit)return n();let i=0,s=e.length;if(this._lastPos=0,this._byte!==-2){if(i=hie(this,e,i,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;i<s;)if(this._inKey){for(i=mie(this,e,i,s);i<s;){switch(e[i]){case 61:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue;case 43:this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._key+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=hie(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesKey,i=mie(this,e,i,s);continue}++i,++this._bytesKey,i=mie(this,e,i,s)}this._lastPos<i&&(this._key+=e.latin1Slice(this._lastPos,i))}else{for(i=yie(this,e,i,s);i<s;){switch(e[i]){case 38:if(this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=++i,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),n();continue e;case 43:this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._val+=" ",this._lastPos=i+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i)),this._lastPos=i+1,this._byte=-1,i=hie(this,e,i+1,s),i===-1)return n(new Error("Malformed urlencoded form"));if(i>=s)return n();++this._bytesVal,i=yie(this,e,i,s);continue}++i,++this._bytesVal,i=yie(this,e,i,s)}this._lastPos<i&&(this._val+=e.latin1Slice(this._lastPos,i))}n()}_final(e){if(this._byte!==-2)return e(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}};function hie(t,e,r,n){if(r>=n)return n;if(t._byte===-1){let i=gie[e[r++]];if(i===-1)return-1;if(i>=8&&(t._encode=2),r<n){let s=gie[e[r++]];if(s===-1)return-1;t._inKey?t._key+=String.fromCharCode((i<<4)+s):t._val+=String.fromCharCode((i<<4)+s),t._byte=-2,t._lastPos=r}else t._byte=i}else{let i=gie[e[r++]];if(i===-1)return-1;t._inKey?t._key+=String.fromCharCode((t._byte<<4)+i):t._val+=String.fromCharCode((t._byte<<4)+i),t._byte=-2,t._lastPos=r}return r}function mie(t,e,r,n){if(t._bytesKey>t.fieldNameSizeLimit){for(t._keyTrunc||t._lastPos<r&&(t._key+=e.latin1Slice(t._lastPos,r-1)),t._keyTrunc=!0;r<n;++r){let i=e[r];if(i===61||i===38)break;++t._bytesKey}t._lastPos=r}return r}function yie(t,e,r,n){if(t._bytesVal>t.fieldSizeLimit){for(t._valTrunc||t._lastPos<r&&(t._val+=e.latin1Slice(t._lastPos,r-1)),t._valTrunc=!0;r<n&&e[r]!==38;++r)++t._bytesVal;t._lastPos=r}return r}var gie=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];vqe.exports=Eie});var Aqe=m((nDr,wqe)=>{"use strict";var{parseContentType:jHt}=TP();function $Ht(t){let e=t.headers,r=jHt(e["content-type"]);if(!r)throw new Error("Malformed content type");for(let n of KHt){if(!n.detect(r))continue;let s={limits:t.limits,headers:e,conType:r,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return t.highWaterMark&&(s.highWaterMark=t.highWaterMark),t.fileHwm&&(s.fileHwm=t.fileHwm),s.defCharset=t.defCharset,s.defParamCharset=t.defParamCharset,s.preservePath=t.preservePath,new n(s)}throw new Error(`Unsupported content type: ${e["content-type"]}`)}var KHt=[_qe(),Sqe()].filter(function(t){return typeof t.detect=="function"});wqe.exports=t=>{if((typeof t!="object"||t===null)&&(t={}),typeof t.headers!="object"||t.headers===null||typeof t.headers["content-type"]!="string")throw new Error("Missing Content-Type");return $Ht(t)}});var Tqe=m((iDr,Cqe)=>{Cqe.exports=VHt;var UHt=Object.prototype.hasOwnProperty;function VHt(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)UHt.call(r,n)&&(t[n]=r[n])}return t}});var xqe=m((sDr,Oqe)=>{var GHt=/^[^\[]*/,HHt=/^\[(\d+)\]/,zHt=/^\[([^\]]+)\]/;function WHt(t){function e(){return[{type:"object",key:t,last:!0}]}var r=GHt.exec(t)[0];if(!r)return e();for(var n=t.length,i=r.length,s={type:"object",key:r},o=[s];i<n;){var a;if(t[i]==="["&&t[i+1]==="]"){if(i+=2,s.append=!0,i!==n)return e();continue}if(a=HHt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="array",s={type:"array",key:parseInt(a[1],10)},o.push(s);continue}if(a=zHt.exec(t.substring(i)),a!==null){i+=a[0].length,s.nextType="object",s={type:"object",key:a[1]},o.push(s);continue}return e()}return s.last=!0,o}Oqe.exports=WHt});var kqe=m((oDr,Dqe)=>{function Iqe(t){return t===void 0?"undefined":Array.isArray(t)?"array":typeof t=="object"?"object":"scalar"}function Rqe(t,e,r,n){switch(Iqe(r)){case"undefined":e.append?t[e.key]=[n]:t[e.key]=n;break;case"array":t[e.key].push(n);break;case"object":return Rqe(r,{type:"object",key:"",last:!0},r[""],n);case"scalar":t[e.key]=[t[e.key],n];break}return t}function JHt(t,e,r,n){if(e.last)return Rqe(t,e,r,n);var i;switch(Iqe(r)){case"undefined":return e.nextType==="array"?t[e.key]=[]:t[e.key]=Object.create(null),t[e.key];case"object":return t[e.key];case"array":return e.nextType==="array"?r:(i=Object.create(null),t[e.key]=i,r.forEach(function(s,o){s!==void 0&&(i[""+o]=s)}),i);case"scalar":return i=Object.create(null),i[""]=r,t[e.key]=i,i}}Dqe.exports=JHt});var Pqe=m((aDr,Mqe)=>{var YHt=xqe(),QHt=kqe();function XHt(t,e,r){var n=YHt(e);n.reduce(function(i,s){return QHt(i,s,i[s.key],r)},t)}Mqe.exports=XHt});var Bqe=m((uDr,Fqe)=>{var Nqe=require("events").EventEmitter;function T_(){Nqe.call(this),this.value=0}T_.prototype=Object.create(Nqe.prototype);T_.prototype.increment=function(){this.value++};T_.prototype.decrement=function(){--this.value===0&&this.emit("zero")};T_.prototype.isZero=function(){return this.value===0};T_.prototype.onceZero=function(e){if(this.isZero())return e();this.once("zero",e)};Fqe.exports=T_});var bie=m((cDr,Lqe)=>{var ZHt=require("util"),ezt={LIMIT_PART_COUNT:"Too many parts",LIMIT_FILE_SIZE:"File too large",LIMIT_FILE_COUNT:"Too many files",LIMIT_FIELD_KEY:"Field name too long",LIMIT_FIELD_VALUE:"Field value too long",LIMIT_FIELD_COUNT:"Too many fields",LIMIT_UNEXPECTED_FILE:"Unexpected field",MISSING_FIELD_NAME:"Field name missing"};function qqe(t,e){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=ezt[t],this.code=t,e&&(this.field=e)}ZHt.inherits(qqe,Error);Lqe.exports=qqe});var Kqe=m((lDr,$qe)=>{"use strict";var jqe=Object.getOwnPropertySymbols,tzt=Object.prototype.hasOwnProperty,rzt=Object.prototype.propertyIsEnumerable;function nzt(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function izt(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}$qe.exports=izt()?Object.assign:function(t,e){for(var r,n=nzt(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)tzt.call(r,o)&&(n[o]=r[o]);if(jqe){i=jqe(r);for(var a=0;a<i.length;a++)rzt.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var Gqe=m((dDr,Vqe)=>{var szt=Kqe();function Uqe(t,e){var r=t.indexOf(e);~r&&t.splice(r,1)}function xP(t,e){switch(this.strategy=t,this.req=e,t){case"NONE":break;case"VALUE":break;case"ARRAY":e.files=[];break;case"OBJECT":e.files=Object.create(null);break;default:throw new Error("Unknown file strategy: "+t)}}xP.prototype.insertPlaceholder=function(t){var e={fieldname:t.fieldname};switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":this.req.files.push(e);break;case"OBJECT":this.req.files[t.fieldname]?this.req.files[t.fieldname].push(e):this.req.files[t.fieldname]=[e];break}return e};xP.prototype.removePlaceholder=function(t){switch(this.strategy){case"NONE":break;case"VALUE":break;case"ARRAY":Uqe(this.req.files,t);break;case"OBJECT":this.req.files[t.fieldname].length===1?delete this.req.files[t.fieldname]:Uqe(this.req.files[t.fieldname],t);break}};xP.prototype.replacePlaceholder=function(t,e){if(this.strategy==="VALUE"){this.req.file=e;return}delete t.fieldname,szt(t,e)};Vqe.exports=xP});var zqe=m((pDr,Hqe)=>{function ozt(t,e,r){var n=t.length,i=[];if(n===0)return r(null,i);function s(o){var a=t[o];e(a,function(u){u&&(u.file=a,u.field=a.fieldname,i.push(u)),o<n-1?s(o+1):r(null,i)})}s(0)}Hqe.exports=ozt});var Yqe=m((fDr,Jqe)=>{var azt=tqe(),uzt=Aqe(),Wqe=Tqe(),czt=Pqe(),lzt=Bqe(),dzt=bie(),pzt=Gqe(),fzt=zqe();function hzt(t){t.on("readable",()=>{for(;t.read()!==null;);})}function mzt(t){return function(r,n,i){if(!azt(r,["multipart"]))return i();var s=t(),o=s.limits,a=s.storage,u=s.fileFilter,c=s.fileStrategy,l=s.preservePath;r.body=Object.create(null),r.on("error",function(x){A(x)});var d;try{d=uzt({headers:r.headers,limits:o,preservePath:l})}catch(x){return i(x)}var p=new pzt(c,r),f=!1,h=!1,g=!1,_=new lzt,S=[];function w(x){f||(f=!0,r.unpipe(d),hzt(r),r.resume(),setImmediate(()=>{d.removeAllListeners()}),i(x))}function C(){h&&_.isZero()&&!g&&w()}function A(x){g||(g=!0,_.onceZero(function(){function R(M,I){a._removeFile(r,M,I)}fzt(S,R,function(M,I){if(M)return w(M);x.storageErrors=I,w(x)})}))}function O(x,R){A(new dzt(x,R))}d.on("field",function(x,R,{nameTruncated:M,valueTruncated:I}){if(x==null)return O("MISSING_FIELD_NAME");if(M)return O("LIMIT_FIELD_KEY");if(I)return O("LIMIT_FIELD_VALUE",x);if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return O("LIMIT_FIELD_KEY");czt(r.body,x,R)}),d.on("file",function(x,R,{filename:M,encoding:I,mimeType:F}){var B=!1;if(R.on("error",function(H){B&&_.decrement(),A(H)}),x==null)return O("MISSING_FIELD_NAME");if(!M)return R.resume();if(o&&Object.prototype.hasOwnProperty.call(o,"fieldNameSize")&&x.length>o.fieldNameSize)return O("LIMIT_FIELD_KEY");var U={fieldname:x,originalname:M,encoding:I,mimetype:F},k=p.insertPlaceholder(U);u(r,U,function(H,ie){if(H)return p.removePlaceholder(k),A(H);if(!ie)return p.removePlaceholder(k),R.resume();var j=!1;B=!0,_.increment(),Object.defineProperty(U,"stream",{configurable:!0,enumerable:!1,value:R}),R.on("limit",function(){j=!0,O("LIMIT_FILE_SIZE",x)}),a._handleFile(r,U,function(V,Ee){if(j)return p.removePlaceholder(k),S.push(Wqe(U,Ee)),_.decrement();if(V)return p.removePlaceholder(k),_.decrement(),A(V);var Re=Wqe(U,Ee);p.replacePlaceholder(k,Re),S.push(Re),_.decrement(),C()})})}),d.on("error",function(x){A(x)}),d.on("partsLimit",function(){O("LIMIT_PART_COUNT")}),d.on("filesLimit",function(){O("LIMIT_FILE_COUNT")}),d.on("fieldsLimit",function(){O("LIMIT_FIELD_COUNT")}),d.on("close",function(){h=!0,C()}),r.pipe(d)}}Jqe.exports=mzt});var eLe=m((hDr,Zqe)=>{var sA=require("path"),Qqe=require("fs"),Xqe=parseInt("0777",8);Zqe.exports=O_.mkdirp=O_.mkdirP=O_;function O_(t,e,r,n){typeof e=="function"?(r=e,e={}):(!e||typeof e!="object")&&(e={mode:e});var i=e.mode,s=e.fs||Qqe;i===void 0&&(i=Xqe),n||(n=null);var o=r||function(){};t=sA.resolve(t),s.mkdir(t,i,function(a){if(!a)return n=n||t,o(null,n);switch(a.code){case"ENOENT":if(sA.dirname(t)===t)return o(a);O_(sA.dirname(t),e,function(u,c){u?o(u,c):O_(t,e,o,c)});break;default:s.stat(t,function(u,c){u||!c.isDirectory()?o(a,n):o(null,n)});break}})}O_.sync=function t(e,r,n){(!r||typeof r!="object")&&(r={mode:r});var i=r.mode,s=r.fs||Qqe;i===void 0&&(i=Xqe),n||(n=null),e=sA.resolve(e);try{s.mkdirSync(e,i),n=n||e}catch(a){switch(a.code){case"ENOENT":n=t(sA.dirname(e),r,n),t(e,r,n);break;default:var o;try{o=s.statSync(e)}catch{throw a}if(!o.isDirectory())throw a;break}}return n}});var nLe=m((mDr,rLe)=>{var tLe=require("fs"),yzt=require("os"),gzt=require("path"),Ezt=require("crypto"),bzt=eLe();function _zt(t,e,r){Ezt.randomBytes(16,function(n,i){r(n,n?void 0:i.toString("hex"))})}function vzt(t,e,r){r(null,yzt.tmpdir())}function _ie(t){this.getFilename=t.filename||_zt,typeof t.destination=="string"?(bzt.sync(t.destination),this.getDestination=function(e,r,n){n(null,t.destination)}):this.getDestination=t.destination||vzt}_ie.prototype._handleFile=function(e,r,n){var i=this;i.getDestination(e,r,function(s,o){if(s)return n(s);i.getFilename(e,r,function(a,u){if(a)return n(a);var c=gzt.join(o,u),l=tLe.createWriteStream(c);r.stream.pipe(l),l.on("error",n),l.on("finish",function(){n(null,{destination:o,filename:u,path:c,size:l.bytesWritten})})})})};_ie.prototype._removeFile=function(e,r,n){var i=r.path;delete r.destination,delete r.filename,delete r.path,tLe.unlink(i,n)};rLe.exports=function(t){return new _ie(t)}});var sLe=m((yDr,iLe)=>{var Szt=Object.prototype.toString,vie=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function wzt(t){return Szt.call(t).slice(8,-1)==="ArrayBuffer"}function Azt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return vie?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function Czt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return vie?Buffer.from(t,e):new Buffer(t,e)}function Tzt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return wzt(t)?Azt(t,e,r):typeof t=="string"?Czt(t,e):vie?Buffer.from(t):new Buffer(t)}iLe.exports=Tzt});var dLe=m(St=>{var oLe=void 0,Ozt=1e5,jn=(function(){var t=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(r){return t.call(r).replace(/^\[object *|\]$/g,"")},HasProperty:function(r,n){return n in r},HasOwnProperty:function(r,n){return e.call(r,n)},IsCallable:function(r){return typeof r=="function"},ToInt32:function(r){return r>>0},ToUint32:function(r){return r>>>0}}})(),xzt=Math.LN2,Izt=Math.abs,IP=Math.floor,Rzt=Math.log,Dzt=Math.min,Jl=Math.pow,kzt=Math.round;function Sie(t){if(aLe&&x_){var e=aLe(t),r;for(r=0;r<e.length;r+=1)x_(t,e[r],{value:t[e[r]],writable:!1,enumerable:!1,configurable:!1})}}var x_;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?x_=Object.defineProperty:x_=function(t,e,r){if(!t===Object(t))throw new TypeError("Object.defineProperty called on non-object");return jn.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(t,e,r.get),jn.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(t,e,r.set),jn.HasProperty(r,"value")&&(t[e]=r.value),t};var aLe=Object.getOwnPropertyNames||function(t){if(t!==Object(t))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],r;for(r in t)jn.HasOwnProperty(t,r)&&e.push(r);return e};function Mzt(t){if(!x_)return;if(t.length>Ozt)throw new RangeError("Array too large for polyfill");function e(n){x_(t,n,{get:function(){return t._getter(n)},set:function(i){t._setter(n,i)},enumerable:!0,configurable:!1})}var r;for(r=0;r<t.length;r+=1)e(r)}function wie(t,e){var r=32-e;return t<<r>>r}function Aie(t,e){var r=32-e;return t<<r>>>r}function Pzt(t){return[t&255]}function Nzt(t){return wie(t[0],8)}function Fzt(t){return[t&255]}function uLe(t){return Aie(t[0],8)}function Bzt(t){return t=kzt(Number(t)),[t<0?0:t>255?255:t&255]}function qzt(t){return[t>>8&255,t&255]}function Lzt(t){return wie(t[0]<<8|t[1],16)}function jzt(t){return[t>>8&255,t&255]}function $zt(t){return Aie(t[0]<<8|t[1],16)}function Kzt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function Uzt(t){return wie(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function Vzt(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]}function Gzt(t){return Aie(t[0]<<24|t[1]<<16|t[2]<<8|t[3],32)}function cLe(t,e,r){var n=(1<<e-1)-1,i,s,o,a,u,c,l,d;function p(f){var h=IP(f),g=f-h;return g<.5?h:g>.5||h%2?h+1:h}for(t!==t?(s=(1<<e)-1,o=Jl(2,r-1),i=0):t===1/0||t===-1/0?(s=(1<<e)-1,o=0,i=t<0?1:0):t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Izt(t),t>=Jl(2,1-n)?(s=Dzt(IP(Rzt(t)/xzt),1023),o=p(t/Jl(2,s)*Jl(2,r)),o/Jl(2,r)>=2&&(s=s+1,o=1),s>n?(s=(1<<e)-1,o=0):(s=s+n,o=o-Jl(2,r))):(s=0,o=p(t/Jl(2,1-n-r)))),c=[],u=r;u;u-=1)c.push(o%2?1:0),o=IP(o/2);for(u=e;u;u-=1)c.push(s%2?1:0),s=IP(s/2);for(c.push(i?1:0),c.reverse(),l=c.join(""),d=[];l.length;)d.push(parseInt(l.substring(0,8),2)),l=l.substring(8);return d}function lLe(t,e,r){var n=[],i,s,o,a,u,c,l,d;for(i=t.length;i;i-=1)for(o=t[i-1],s=8;s;s-=1)n.push(o%2?1:0),o=o>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,l=parseInt(a.substring(1,1+e),2),d=parseInt(a.substring(1+e),2),l===(1<<e)-1?d!==0?NaN:c*(1/0):l>0?c*Jl(2,l-u)*(1+d/Jl(2,r)):d!==0?c*Jl(2,-(u-1))*(d/Jl(2,r)):c<0?-0:0}function Hzt(t){return lLe(t,11,52)}function zzt(t){return cLe(t,11,52)}function Wzt(t){return lLe(t,8,23)}function Jzt(t){return cLe(t,8,23)}(function(){var t=function(f){if(f=jn.ToInt32(f),f<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=f,this._bytes=[],this._bytes.length=f;var h;for(h=0;h<this.byteLength;h+=1)this._bytes[h]=0;Sie(this)};St.ArrayBuffer=St.ArrayBuffer||t;var e=function(){};function r(p,f,h){var g;return g=function(_,S,w){var C,A,O,x;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=jn.ToInt32(arguments[0]),w<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===g)for(C=arguments[0],this.length=C.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,O=0;O<this.length;O+=1)this._setter(O,C._getter(O));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof t||jn.Class(arguments[0])==="ArrayBuffer"))for(A=arguments[0],this.length=jn.ToUint32(A.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,O=0;O<this.length;O+=1)x=A[O],this._setter(O,Number(x));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof t||jn.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=_,this.byteOffset=jn.ToUint32(S),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=jn.ToUint32(w),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=g,Sie(this),Mzt(this)},g.prototype=new e,g.prototype.BYTES_PER_ELEMENT=p,g.prototype._pack=f,g.prototype._unpack=h,g.BYTES_PER_ELEMENT=p,g.prototype._getter=function(_){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(_=jn.ToUint32(_),_>=this.length)return oLe;var S=[],w,C;for(w=0,C=this.byteOffset+_*this.BYTES_PER_ELEMENT;w<this.BYTES_PER_ELEMENT;w+=1,C+=1)S.push(this.buffer._bytes[C]);return this._unpack(S)},g.prototype.get=g.prototype._getter,g.prototype._setter=function(_,S){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(_=jn.ToUint32(_),_>=this.length)return oLe;var w=this._pack(S),C,A;for(C=0,A=this.byteOffset+_*this.BYTES_PER_ELEMENT;C<this.BYTES_PER_ELEMENT;C+=1,A+=1)this.buffer._bytes[A]=w[C]},g.prototype.set=function(_,S){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var w,C,A,O,x,R,M,I,F,B;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(w=arguments[0],A=jn.ToUint32(arguments[1]),A+w.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(I=this.byteOffset+A*this.BYTES_PER_ELEMENT,F=w.length*this.BYTES_PER_ELEMENT,w.buffer===this.buffer){for(B=[],x=0,R=w.byteOffset;x<F;x+=1,R+=1)B[x]=w.buffer._bytes[R];for(x=0,M=I;x<F;x+=1,M+=1)this.buffer._bytes[M]=B[x]}else for(x=0,R=w.byteOffset,M=I;x<F;x+=1,R+=1,M+=1)this.buffer._bytes[M]=w.buffer._bytes[R]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(C=arguments[0],O=jn.ToUint32(C.length),A=jn.ToUint32(arguments[1]),A+O>this.length)throw new RangeError("Offset plus length of array is out of range");for(x=0;x<O;x+=1)R=C[x],this._setter(A+x,Number(R))}else throw new TypeError("Unexpected argument type(s)")},g.prototype.subarray=function(_,S){function w(A,O,x){return A<O?O:A>x?x:A}_=jn.ToInt32(_),S=jn.ToInt32(S),arguments.length<1&&(_=0),arguments.length<2&&(S=this.length),_<0&&(_=this.length+_),S<0&&(S=this.length+S),_=w(_,0,this.length),S=w(S,0,this.length);var C=S-_;return C<0&&(C=0),new this.constructor(this.buffer,this.byteOffset+_*this.BYTES_PER_ELEMENT,C)},g}var n=r(1,Pzt,Nzt),i=r(1,Fzt,uLe),s=r(1,Bzt,uLe),o=r(2,qzt,Lzt),a=r(2,jzt,$zt),u=r(4,Kzt,Uzt),c=r(4,Vzt,Gzt),l=r(4,Jzt,Wzt),d=r(8,zzt,Hzt);St.Int8Array=St.Int8Array||n,St.Uint8Array=St.Uint8Array||i,St.Uint8ClampedArray=St.Uint8ClampedArray||s,St.Int16Array=St.Int16Array||o,St.Uint16Array=St.Uint16Array||a,St.Int32Array=St.Int32Array||u,St.Uint32Array=St.Uint32Array||c,St.Float32Array=St.Float32Array||l,St.Float64Array=St.Float64Array||d})();(function(){function t(s,o){return jn.IsCallable(s.get)?s.get(o):s[o]}var e=(function(){var s=new St.Uint16Array([4660]),o=new St.Uint8Array(s.buffer);return t(o,0)===18})(),r=function(o,a,u){if(arguments.length===0)o=new St.ArrayBuffer(0);else if(!(o instanceof St.ArrayBuffer||jn.Class(o)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=o||new St.ArrayBuffer(0),this.byteOffset=jn.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=jn.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");Sie(this)};function n(s){return function(o,a){if(o=jn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");o+=this.byteOffset;var u=new St.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),c=[],l;for(l=0;l<s.BYTES_PER_ELEMENT;l+=1)c.push(t(u,l));return!!a==!!e&&c.reverse(),t(new s(new St.Uint8Array(c).buffer),0)}}r.prototype.getUint8=n(St.Uint8Array),r.prototype.getInt8=n(St.Int8Array),r.prototype.getUint16=n(St.Uint16Array),r.prototype.getInt16=n(St.Int16Array),r.prototype.getUint32=n(St.Uint32Array),r.prototype.getInt32=n(St.Int32Array),r.prototype.getFloat32=n(St.Float32Array),r.prototype.getFloat64=n(St.Float64Array);function i(s){return function(o,a,u){if(o=jn.ToUint32(o),o+s.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new s([a]),l=new St.Uint8Array(c.buffer),d=[],p,f;for(p=0;p<s.BYTES_PER_ELEMENT;p+=1)d.push(t(l,p));!!u==!!e&&d.reverse(),f=new St.Uint8Array(this.buffer,o,s.BYTES_PER_ELEMENT),f.set(d)}}r.prototype.setUint8=i(St.Uint8Array),r.prototype.setInt8=i(St.Int8Array),r.prototype.setUint16=i(St.Uint16Array),r.prototype.setInt16=i(St.Int16Array),r.prototype.setUint32=i(St.Uint32Array),r.prototype.setInt32=i(St.Int32Array),r.prototype.setFloat32=i(St.Float32Array),r.prototype.setFloat64=i(St.Float64Array),St.DataView=St.DataView||r})()});var mLe=m((EDr,hLe)=>{var pLe=Dh().Writable,Yzt=by(),oA=sLe();typeof Uint8Array>"u"?RP=dLe().Uint8Array:RP=Uint8Array;var RP;function Ig(t,e){if(!(this instanceof Ig))return new Ig(t,e);typeof t=="function"&&(e=t,t={}),t||(t={});var r=t.encoding,n=!1;r?(r=String(r).toLowerCase(),(r==="u8"||r==="uint8")&&(r="uint8array")):n=!0,pLe.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}hLe.exports=Ig;Yzt(Ig,pLe);Ig.prototype._write=function(t,e,r){this.body.push(t),r()};Ig.prototype.inferEncoding=function(t){var e=t===void 0?this.body[0]:t;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};Ig.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?eWt(this.body):this.encoding==="string"?Xzt(this.body):this.encoding==="buffer"?Zzt(this.body):this.encoding==="uint8array"?tWt(this.body):this.body)};function Qzt(t){return/Array\]$/.test(Object.prototype.toString.call(t))}function fLe(t){return typeof t=="string"||Qzt(t)||t&&typeof t.subarray=="function"}function Xzt(t){for(var e=[],r=!1,n=0;n<t.length;n++){var i=t[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):fLe(i)?e.push(oA(i)):e.push(oA(String(i)))}return Buffer.isBuffer(t[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function Zzt(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];Buffer.isBuffer(n)?e.push(n):fLe(n)?e.push(oA(n)):e.push(oA(String(n)))}return Buffer.concat(e)}function eWt(t){for(var e=[],r=0;r<t.length;r++)e.push.apply(e,t[r]);return e}function tWt(t){for(var e=0,r=0;r<t.length;r++)typeof t[r]=="string"&&(t[r]=oA(t[r])),e+=t[r].length;for(var n=new RP(e),r=0,i=0;r<t.length;r++)for(var s=t[r],o=0;o<s.length;o++)n[i++]=s[o];return n}});var gLe=m((bDr,yLe)=>{var rWt=mLe();function Cie(t){}Cie.prototype._handleFile=function(e,r,n){r.stream.pipe(rWt({encoding:"buffer"},function(i){n(null,{buffer:i,size:i.length})}))};Cie.prototype._removeFile=function(e,r,n){delete r.buffer,n(null)};yLe.exports=function(t){return new Cie(t)}});var SLe=m((_Dr,aA)=>{var ELe=Yqe(),bLe=nLe(),_Le=gLe(),vLe=bie();function nWt(t,e,r){r(null,!0)}function Em(t){t.storage?this.storage=t.storage:t.dest?this.storage=bLe({destination:t.dest}):this.storage=_Le(),this.limits=t.limits,this.preservePath=t.preservePath,this.fileFilter=t.fileFilter||nWt}Em.prototype._makeMiddleware=function(t,e){function r(){var n=this.fileFilter,i=Object.create(null);t.forEach(function(o){typeof o.maxCount=="number"?i[o.name]=o.maxCount:i[o.name]=1/0});function s(o,a,u){if((i[a.fieldname]||0)<=0)return u(new vLe("LIMIT_UNEXPECTED_FILE",a.fieldname));i[a.fieldname]-=1,n(o,a,u)}return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:s,fileStrategy:e}}return ELe(r.bind(this))};Em.prototype.single=function(t){return this._makeMiddleware([{name:t,maxCount:1}],"VALUE")};Em.prototype.array=function(t,e){return this._makeMiddleware([{name:t,maxCount:e}],"ARRAY")};Em.prototype.fields=function(t){return this._makeMiddleware(t,"OBJECT")};Em.prototype.none=function(){return this._makeMiddleware([],"NONE")};Em.prototype.any=function(){function t(){return{limits:this.limits,preservePath:this.preservePath,storage:this.storage,fileFilter:this.fileFilter,fileStrategy:"ARRAY"}}return ELe(t.bind(this))};function iWt(t){if(t===void 0)return new Em({});if(typeof t=="object"&&t!==null)return new Em(t);throw new TypeError("Expected object for argument options")}aA.exports=iWt;aA.exports.diskStorage=bLe;aA.exports.memoryStorage=_Le;aA.exports.MulterError=vLe});var wLe=m((vDr,sWt)=>{sWt.exports={name:"gaxios",version:"7.1.2",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:"googleapis/gaxios",keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^4.0.0","jsdoc-region-tag":"^3.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^3.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2"}}});var CLe=m((SDr,ALe)=>{"use strict";var oWt=wLe();ALe.exports={pkg:oWt}});var xie=m(Pc=>{"use strict";var OLe=Pc&&Pc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.GaxiosError=Pc.GAXIOS_ERROR_SYMBOL=void 0;Pc.defaultErrorRedactor=xLe;var TLe=OLe(gC()),aWt=OLe(CLe()),Tie=aWt.default.pkg;Pc.GAXIOS_ERROR_SYMBOL=Symbol.for(`${Tie.name}-gaxios-error`);var Oie=class t extends Error{config;response;code;status;error;[Pc.GAXIOS_ERROR_SYMBOL]=Tie.version;static[Symbol.hasInstance](e){return e&&typeof e=="object"&&Pc.GAXIOS_ERROR_SYMBOL in e&&e[Pc.GAXIOS_ERROR_SYMBOL]===Tie.version?!0:Function.prototype[Symbol.hasInstance].call(t,e)}constructor(e,r,n,i){if(super(e,{cause:i}),this.config=r,this.response=n,this.error=i instanceof Error?i:void 0,this.config=(0,TLe.default)(!0,{},r),this.response&&(this.response.config=(0,TLe.default)(!0,{},this.response.config)),this.response){try{this.response.data=uWt(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}i instanceof DOMException?this.code=i.name:i&&typeof i=="object"&&"code"in i&&(typeof i.code=="string"||typeof i.code=="number")&&(this.code=i.code)}static extractAPIErrorFromResponse(e,r="The request failed"){let n=r;if(typeof e.data=="string"&&(n=e.data),e.data&&typeof e.data=="object"&&"error"in e.data&&e.data.error&&!e.ok){if(typeof e.data.error=="string")return{message:e.data.error,code:e.status,status:e.statusText};if(typeof e.data.error=="object"){n="message"in e.data.error&&typeof e.data.error.message=="string"?e.data.error.message:n;let i="status"in e.data.error&&typeof e.data.error.status=="string"?e.data.error.status:e.statusText,s="code"in e.data.error&&typeof e.data.error.code=="number"?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let o=[];for(let a of e.data.error.errors)typeof a=="object"&&"message"in a&&typeof a.message=="string"&&o.push(a.message);return Object.assign({message:o.join(`
`)||n,code:s,status:i},e.data.error)}return Object.assign({message:n,code:s,status:i},e.data.error)}}return{message:n,code:e.status,status:e.statusText}}};Pc.GaxiosError=Oie;function uWt(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}function xLe(t){let e="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function r(s){s&&s.forEach((o,a)=>{(/^authentication$/i.test(a)||/^authorization$/i.test(a)||/secret/i.test(a))&&s.set(a,e)})}function n(s,o){if(typeof s=="object"&&s!==null&&typeof s[o]=="string"){let a=s[o];(/grant_type=/i.test(a)||/assertion=/i.test(a)||/secret/i.test(a))&&(s[o]=e)}}function i(s){!s||typeof s!="object"||(s instanceof FormData||s instanceof URLSearchParams||"forEach"in s&&"set"in s?s.forEach((o,a)=>{(["grant_type","assertion"].includes(a)||/secret/.test(a))&&s.set(a,e)}):("grant_type"in s&&(s.grant_type=e),"assertion"in s&&(s.assertion=e),"client_secret"in s&&(s.client_secret=e)))}return t.config&&(r(t.config.headers),n(t.config,"data"),i(t.config.data),n(t.config,"body"),i(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",e),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",e)),t.response&&(xLe({config:t.response.config}),r(t.response.headers),t.response.bodyUsed&&(n(t.response,"data"),i(t.response.data))),t}});var RLe=m(Iie=>{"use strict";Object.defineProperty(Iie,"__esModule",{value:!0});Iie.getRetryConfig=cWt;async function cWt(t){let e=ILe(t);if(!t||!t.config||!e&&!t.config.retry)return{shouldRetry:!1};e=e||{},e.currentRetryAttempt=e.currentRetryAttempt||0,e.retry=e.retry===void 0||e.retry===null?3:e.retry,e.httpMethodsToRetry=e.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],e.noResponseRetries=e.noResponseRetries===void 0||e.noResponseRetries===null?2:e.noResponseRetries,e.retryDelayMultiplier=e.retryDelayMultiplier?e.retryDelayMultiplier:2,e.timeOfFirstRequest=e.timeOfFirstRequest?e.timeOfFirstRequest:Date.now(),e.totalTimeout=e.totalTimeout?e.totalTimeout:Number.MAX_SAFE_INTEGER,e.maxRetryDelay=e.maxRetryDelay?e.maxRetryDelay:Number.MAX_SAFE_INTEGER;let r=[[100,199],[408,408],[429,429],[500,599]];if(e.statusCodesToRetry=e.statusCodesToRetry||r,t.config.retryConfig=e,!await(e.shouldRetry||lWt)(t))return{shouldRetry:!1,config:t.config};let i=dWt(e);t.config.retryConfig.currentRetryAttempt+=1;let s=e.retryBackoff?e.retryBackoff(t,i):new Promise(o=>{setTimeout(o,i)});return e.onRetryAttempt&&await e.onRetryAttempt(t),await s,{shouldRetry:!0,config:t.config}}function lWt(t){let e=ILe(t);if(t.config.signal?.aborted&&t.code!=="TimeoutError"||t.code==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!e.httpMethodsToRetry||!e.httpMethodsToRetry.includes(t.config.method?.toUpperCase()||"GET"))return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let s=t.response.status;if(s>=n&&s<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function ILe(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}function dWt(t){let r=(t.currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,n=t.totalTimeout-(Date.now()-t.timeOfFirstRequest);return Math.min(r,n,t.maxRetryDelay)}});var Die=m(DP=>{"use strict";Object.defineProperty(DP,"__esModule",{value:!0});DP.GaxiosInterceptorManager=void 0;var Rie=class extends Set{};DP.GaxiosInterceptorManager=Rie});var kLe=m((TDr,DLe)=>{var I_=1e3,R_=I_*60,D_=R_*60,Rg=D_*24,pWt=Rg*7,fWt=Rg*365.25;DLe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return hWt(t);if(r==="number"&&isFinite(t))return e.long?yWt(t):mWt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function hWt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*fWt;case"weeks":case"week":case"w":return r*pWt;case"days":case"day":case"d":return r*Rg;case"hours":case"hour":case"hrs":case"hr":case"h":return r*D_;case"minutes":case"minute":case"mins":case"min":case"m":return r*R_;case"seconds":case"second":case"secs":case"sec":case"s":return r*I_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function mWt(t){var e=Math.abs(t);return e>=Rg?Math.round(t/Rg)+"d":e>=D_?Math.round(t/D_)+"h":e>=R_?Math.round(t/R_)+"m":e>=I_?Math.round(t/I_)+"s":t+"ms"}function yWt(t){var e=Math.abs(t);return e>=Rg?kP(t,e,Rg,"day"):e>=D_?kP(t,e,D_,"hour"):e>=R_?kP(t,e,R_,"minute"):e>=I_?kP(t,e,I_,"second"):t+" ms"}function kP(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var kie=m((ODr,MLe)=>{function gWt(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=kLe(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(l){let d,p=null,f,h;function g(..._){if(!g.enabled)return;let S=g,w=Number(new Date),C=w-(d||w);S.diff=C,S.prev=d,S.curr=w,d=w,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,R)=>{if(x==="%%")return"%";A++;let M=r.formatters[R];if(typeof M=="function"){let I=_[A];x=M.call(S,I),_.splice(A,1),A--}return x}),r.formatArgs.call(S,_),(S.log||r.log).apply(S,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==r.namespaces&&(f=r.namespaces,h=r.enabled(l)),h),set:_=>{p=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,d){let p=r(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let d=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of d)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(l,d){let p=0,f=0,h=-1,g=0;for(;p<l.length;)if(f<d.length&&(d[f]===l[p]||d[f]==="*"))d[f]==="*"?(h=f,g=p,f++):(p++,f++);else if(h!==-1)f=h+1,g++,p=g;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let l=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),l}function a(l){for(let d of r.skips)if(s(l,d))return!1;for(let d of r.names)if(s(l,d))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}MLe.exports=gWt});var PLe=m((Va,MP)=>{Va.formatArgs=bWt;Va.save=_Wt;Va.load=vWt;Va.useColors=EWt;Va.storage=SWt();Va.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Va.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function EWt(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function bWt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+MP.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Va.log=console.debug||console.log||(()=>{});function _Wt(t){try{t?Va.storage.setItem("debug",t):Va.storage.removeItem("debug")}catch{}}function vWt(){let t;try{t=Va.storage.getItem("debug")||Va.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function SWt(){try{return localStorage}catch{}}MP.exports=kie()(Va);var{formatters:wWt}=MP.exports;wWt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var FLe=m((Os,NP)=>{var AWt=require("tty"),PP=require("util");Os.init=DWt;Os.log=xWt;Os.formatArgs=TWt;Os.save=IWt;Os.load=RWt;Os.useColors=CWt;Os.destroy=PP.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Os.colors=[6,2,3,4,5,1];try{let t=x3();t&&(t.stderr||t).level>=2&&(Os.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Os.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function CWt(){return"colors"in Os.inspectOpts?!!Os.inspectOpts.colors:AWt.isatty(process.stderr.fd)}function TWt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+NP.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=OWt()+e+" "+t[0]}function OWt(){return Os.inspectOpts.hideDate?"":new Date().toISOString()+" "}function xWt(...t){return process.stderr.write(PP.formatWithOptions(Os.inspectOpts,...t)+`
`)}function IWt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function RWt(){return process.env.DEBUG}function DWt(t){t.inspectOpts={};let e=Object.keys(Os.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Os.inspectOpts[e[r]]}NP.exports=kie()(Os);var{formatters:NLe}=NP.exports;NLe.o=function(t){return this.inspectOpts.colors=this.useColors,PP.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};NLe.O=function(t){return this.inspectOpts.colors=this.useColors,PP.inspect(t,this.inspectOpts)}});var Pie=m((xDr,Mie)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Mie.exports=PLe():Mie.exports=FLe()});var LLe=m(Ga=>{"use strict";var kWt=Ga&&Ga.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),MWt=Ga&&Ga.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),BLe=Ga&&Ga.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kWt(e,t,r);return MWt(e,t),e};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.req=Ga.json=Ga.toBuffer=void 0;var PWt=BLe(require("http")),NWt=BLe(require("https"));async function qLe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}Ga.toBuffer=qLe;async function FWt(t){let r=(await qLe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}Ga.json=FWt;function BWt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?NWt:PWt).request(t,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}Ga.req=BWt});var ULe=m(Eu=>{"use strict";var $Le=Eu&&Eu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),qWt=Eu&&Eu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),KLe=Eu&&Eu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Le(e,t,r);return qWt(e,t),e},LWt=Eu&&Eu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$Le(e,t,r)};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Agent=void 0;var jWt=KLe(require("net")),jLe=KLe(require("http")),$Wt=require("https");LWt(LLe(),Eu);var Xd=Symbol("AgentBaseInternalState"),Nie=class extends jLe.Agent{constructor(e){super(e),this[Xd]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new jWt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?$Wt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(i),o=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,i)).then(a=>{if(this.decrementSockets(s,o),a instanceof jLe.Agent)try{return a.addRequest(e,i)}catch(u){return n(u)}this[Xd].currentSocket=a,super.createSocket(e,r,n)},a=>{this.decrementSockets(s,o),n(a)})}createConnection(){let e=this[Xd].currentSocket;if(this[Xd].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Xd].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Xd]&&(this[Xd].defaultPort=e)}get protocol(){return this[Xd].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Xd]&&(this[Xd].protocol=e)}};Eu.Agent=Nie});var VLe=m(k_=>{"use strict";var KWt=k_&&k_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(k_,"__esModule",{value:!0});k_.parseProxyResponse=void 0;var UWt=KWt(Pie()),FP=(0,UWt.default)("https-proxy-agent:parse-proxy-response");function VWt(t){return new Promise((e,r)=>{let n=0,i=[];function s(){let l=t.read();l?c(l):t.once("readable",s)}function o(){t.removeListener("end",a),t.removeListener("error",u),t.removeListener("readable",s)}function a(){o(),FP("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function u(l){o(),FP("onerror %o",l),r(l)}function c(l){i.push(l),n+=l.length;let d=Buffer.concat(i,n),p=d.indexOf(`\r
\r
`);if(p===-1){FP("have not received end of HTTP headers yet..."),s();return}let f=d.slice(0,p).toString("ascii").split(`\r
`),h=f.shift();if(!h)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let g=h.split(" "),_=+g[1],S=g.slice(2).join(" "),w={};for(let C of f){if(!C)continue;let A=C.indexOf(":");if(A===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${C}"`));let O=C.slice(0,A).toLowerCase(),x=C.slice(A+1).trimStart(),R=w[O];typeof R=="string"?w[O]=[R,x]:Array.isArray(R)?R.push(x):w[O]=x}FP("got proxy server response: %o %o",h,w),o(),e({connect:{statusCode:_,statusText:S,headers:w},buffered:d})}t.on("error",u),t.on("end",a),s()})}k_.parseProxyResponse=VWt});var YLe=m(Nc=>{"use strict";var GWt=Nc&&Nc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),HWt=Nc&&Nc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),WLe=Nc&&Nc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&GWt(e,t,r);return HWt(e,t),e},JLe=Nc&&Nc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.HttpsProxyAgent=void 0;var BP=WLe(require("net")),GLe=WLe(require("tls")),zWt=JLe(require("assert")),WWt=JLe(Pie()),JWt=ULe(),YWt=require("url"),QWt=VLe(),uA=(0,WWt.default)("https-proxy-agent"),HLe=t=>t.servername===void 0&&t.host&&!BP.isIP(t.host)?{...t,servername:t.host}:t,qP=class extends JWt.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new YWt.URL(e):e,this.proxyHeaders=r?.headers??{},uA("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?zLe(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;n.protocol==="https:"?(uA("Creating `tls.Socket`: %o",this.connectOpts),i=GLe.connect(HLe(this.connectOpts))):(uA("Creating `net.Socket`: %o",this.connectOpts),i=BP.connect(this.connectOpts));let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=BP.isIPv6(r.host)?`[${r.host}]`:r.host,a=`CONNECT ${o}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${o}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))a+=`${p}: ${s[p]}\r
`;let u=(0,QWt.parseProxyResponse)(i);i.write(`${a}\r
`);let{connect:c,buffered:l}=await u;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200)return e.once("socket",XWt),r.secureEndpoint?(uA("Upgrading socket connection to TLS"),GLe.connect({...zLe(HLe(r),"host","path","port"),socket:i})):i;i.destroy();let d=new BP.Socket({writable:!1});return d.readable=!0,e.once("socket",p=>{uA("Replaying proxy buffer for failed request"),(0,zWt.default)(p.listenerCount("data")>0),p.push(l),p.push(null)}),d}};qP.protocols=["http","https"];Nc.HttpsProxyAgent=qP;function XWt(t){t.resume()}function zLe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});function ZWt(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,s=r[0]||"text/plain",o=s;for(let l=1;l<r.length;l++)r[l]==="base64"?i=!0:r[l]&&(o+=`;${r[l]}`,r[l].indexOf("charset=")===0&&(n=r[l].substring(8)));!r[0]&&!n.length&&(o+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",u=unescape(t.substring(e+1)),c=Buffer.from(u,a);return c.type=s,c.typeFull=o,c.charset=n,c}var QLe,XLe=ce(()=>{QLe=ZWt});var eje=m((LP,ZLe)=>{(function(t,e){typeof LP=="object"&&typeof ZLe<"u"?e(LP):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(LP,(function(t){"use strict";function e(){}function r(E){return typeof E=="object"&&E!==null||typeof E=="function"}let n=e;function i(E,v){try{Object.defineProperty(E,"name",{value:v,configurable:!0})}catch{}}let s=Promise,o=Promise.prototype.then,a=Promise.reject.bind(s);function u(E){return new s(E)}function c(E){return u(v=>v(E))}function l(E){return a(E)}function d(E,v,T){return o.call(E,v,T)}function p(E,v,T){d(d(E,v,T),void 0,n)}function f(E,v){p(E,v)}function h(E,v){p(E,void 0,v)}function g(E,v,T){return d(E,v,T)}function _(E){d(E,void 0,n)}let S=E=>{if(typeof queueMicrotask=="function")S=queueMicrotask;else{let v=c(void 0);S=T=>d(v,T)}return S(E)};function w(E,v,T){if(typeof E!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(E,v,T)}function C(E,v,T){try{return c(w(E,v,T))}catch(q){return l(q)}}let A=16384;class O{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(v){let T=this._back,q=T;T._elements.length===A-1&&(q={_elements:[],_next:void 0}),T._elements.push(v),q!==T&&(this._back=q,T._next=q),++this._size}shift(){let v=this._front,T=v,q=this._cursor,W=q+1,he=v._elements,_e=he[q];return W===A&&(T=v._next,W=0),--this._size,this._cursor=W,v!==T&&(this._front=T),he[q]=void 0,_e}forEach(v){let T=this._cursor,q=this._front,W=q._elements;for(;(T!==W.length||q._next!==void 0)&&!(T===W.length&&(q=q._next,W=q._elements,T=0,W.length===0));)v(W[T]),++T}peek(){let v=this._front,T=this._cursor;return v._elements[T]}}let x=Symbol("[[AbortSteps]]"),R=Symbol("[[ErrorSteps]]"),M=Symbol("[[CancelSteps]]"),I=Symbol("[[PullSteps]]"),F=Symbol("[[ReleaseSteps]]");function B(E,v){E._ownerReadableStream=v,v._reader=E,v._state==="readable"?ie(E):v._state==="closed"?V(E):j(E,v._storedError)}function U(E,v){let T=E._ownerReadableStream;return Zc(T,v)}function k(E){let v=E._ownerReadableStream;v._state==="readable"?Ee(E,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Re(E,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),v._readableStreamController[F](),v._reader=void 0,E._ownerReadableStream=void 0}function H(E){return new TypeError("Cannot "+E+" a stream using a released reader")}function ie(E){E._closedPromise=u((v,T)=>{E._closedPromise_resolve=v,E._closedPromise_reject=T})}function j(E,v){ie(E),Ee(E,v)}function V(E){ie(E),fe(E)}function Ee(E,v){E._closedPromise_reject!==void 0&&(_(E._closedPromise),E._closedPromise_reject(v),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0)}function Re(E,v){j(E,v)}function fe(E){E._closedPromise_resolve!==void 0&&(E._closedPromise_resolve(void 0),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0)}let Ge=Number.isFinite||function(E){return typeof E=="number"&&isFinite(E)},Me=Math.trunc||function(E){return E<0?Math.ceil(E):Math.floor(E)};function Ce(E){return typeof E=="object"||typeof E=="function"}function Rr(E,v){if(E!==void 0&&!Ce(E))throw new TypeError(`${v} is not an object.`)}function _t(E,v){if(typeof E!="function")throw new TypeError(`${v} is not a function.`)}function ca(E){return typeof E=="object"&&E!==null||typeof E=="function"}function Ei(E,v){if(!ca(E))throw new TypeError(`${v} is not an object.`)}function tr(E,v,T){if(E===void 0)throw new TypeError(`Parameter ${v} is required in '${T}'.`)}function P(E,v,T){if(E===void 0)throw new TypeError(`${v} is required in '${T}'.`)}function $(E){return Number(E)}function G(E){return E===0?0:E}function ne(E){return G(Me(E))}function Y(E,v){let q=Number.MAX_SAFE_INTEGER,W=Number(E);if(W=G(W),!Ge(W))throw new TypeError(`${v} is not a finite number`);if(W=ne(W),W<0||W>q)throw new TypeError(`${v} is outside the accepted range of 0 to ${q}, inclusive`);return!Ge(W)||W===0?0:W}function te(E,v){if(!h1(E))throw new TypeError(`${v} is not a ReadableStream.`)}function de(E){return new Se(E)}function z(E,v){E._reader._readRequests.push(v)}function X(E,v,T){let W=E._reader._readRequests.shift();T?W._closeSteps():W._chunkSteps(v)}function ue(E){return E._reader._readRequests.length}function se(E){let v=E._reader;return!(v===void 0||!He(v))}class Se{constructor(v){if(tr(v,1,"ReadableStreamDefaultReader"),te(v,"First parameter"),m1(v))throw new TypeError("This stream has already been locked for exclusive reading by another reader");B(this,v),this._readRequests=new O}get closed(){return He(this)?this._closedPromise:l(Lr("closed"))}cancel(v=void 0){return He(this)?this._ownerReadableStream===void 0?l(H("cancel")):U(this,v):l(Lr("cancel"))}read(){if(!He(this))return l(Lr("read"));if(this._ownerReadableStream===void 0)return l(H("read from"));let v,T,q=u((he,_e)=>{v=he,T=_e});return tt(this,{_chunkSteps:he=>v({value:he,done:!1}),_closeSteps:()=>v({value:void 0,done:!0}),_errorSteps:he=>T(he)}),q}releaseLock(){if(!He(this))throw Lr("releaseLock");this._ownerReadableStream!==void 0&&zt(this)}}Object.defineProperties(Se.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(Se.prototype.cancel,"cancel"),i(Se.prototype.read,"read"),i(Se.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Se.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function He(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readRequests")?!1:E instanceof Se}function tt(E,v){let T=E._ownerReadableStream;T._disturbed=!0,T._state==="closed"?v._closeSteps():T._state==="errored"?v._errorSteps(T._storedError):T._readableStreamController[I](v)}function zt(E){k(E);let v=new TypeError("Reader was released");Nr(E,v)}function Nr(E,v){let T=E._readRequests;E._readRequests=new O,T.forEach(q=>{q._errorSteps(v)})}function Lr(E){return new TypeError(`ReadableStreamDefaultReader.prototype.${E} can only be used on a ReadableStreamDefaultReader`)}let Dt=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ur{constructor(v,T){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=v,this._preventCancel=T}next(){let v=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?g(this._ongoingPromise,v,v):v(),this._ongoingPromise}return(v){let T=()=>this._returnSteps(v);return this._ongoingPromise?g(this._ongoingPromise,T,T):T()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let v=this._reader,T,q,W=u((_e,ze)=>{T=_e,q=ze});return tt(v,{_chunkSteps:_e=>{this._ongoingPromise=void 0,S(()=>T({value:_e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,k(v),T({value:void 0,done:!0})},_errorSteps:_e=>{this._ongoingPromise=void 0,this._isFinished=!0,k(v),q(_e)}}),W}_returnSteps(v){if(this._isFinished)return Promise.resolve({value:v,done:!0});this._isFinished=!0;let T=this._reader;if(!this._preventCancel){let q=U(T,v);return k(T),g(q,()=>({value:v,done:!0}))}return k(T),c({value:v,done:!0})}}let Pn={next(){return ju(this)?this._asyncIteratorImpl.next():l(Z("next"))},return(E){return ju(this)?this._asyncIteratorImpl.return(E):l(Z("return"))}};Object.setPrototypeOf(Pn,Dt);function Qc(E,v){let T=de(E),q=new ur(T,v),W=Object.create(Pn);return W._asyncIteratorImpl=q,W}function ju(E){if(!r(E)||!Object.prototype.hasOwnProperty.call(E,"_asyncIteratorImpl"))return!1;try{return E._asyncIteratorImpl instanceof ur}catch{return!1}}function Z(E){return new TypeError(`ReadableStreamAsyncIterator.${E} can only be used on a ReadableSteamAsyncIterator`)}let oe=Number.isNaN||function(E){return E!==E};var D,N,K;function Q(E){return E.slice()}function Oe(E,v,T,q,W){new Uint8Array(E).set(new Uint8Array(T,q,W),v)}let Ie=E=>(typeof E.transfer=="function"?Ie=v=>v.transfer():typeof structuredClone=="function"?Ie=v=>structuredClone(v,{transfer:[v]}):Ie=v=>v,Ie(E)),be=E=>(typeof E.detached=="boolean"?be=v=>v.detached:be=v=>v.byteLength===0,be(E));function xe(E,v,T){if(E.slice)return E.slice(v,T);let q=T-v,W=new ArrayBuffer(q);return Oe(W,0,E,v,q),W}function Fe(E,v){let T=E[v];if(T!=null){if(typeof T!="function")throw new TypeError(`${String(v)} is not a function`);return T}}function $e(E){let v={[Symbol.iterator]:()=>E.iterator},T=(async function*(){return yield*v})(),q=T.next;return{iterator:T,nextMethod:q,done:!1}}let ft=(K=(D=Symbol.asyncIterator)!==null&&D!==void 0?D:(N=Symbol.for)===null||N===void 0?void 0:N.call(Symbol,"Symbol.asyncIterator"))!==null&&K!==void 0?K:"@@asyncIterator";function cr(E,v="sync",T){if(T===void 0)if(v==="async"){if(T=Fe(E,ft),T===void 0){let he=Fe(E,Symbol.iterator),_e=cr(E,"sync",he);return $e(_e)}}else T=Fe(E,Symbol.iterator);if(T===void 0)throw new TypeError("The object is not iterable");let q=w(T,E,[]);if(!r(q))throw new TypeError("The iterator method must return an object");let W=q.next;return{iterator:q,nextMethod:W,done:!1}}function Sn(E){let v=w(E.nextMethod,E.iterator,[]);if(!r(v))throw new TypeError("The iterator.next() method must return an object");return v}function Ja(E){return!!E.done}function D8(E){return E.value}function Xq(E){return!(typeof E!="number"||oe(E)||E<0)}function k8(E){let v=xe(E.buffer,E.byteOffset,E.byteOffset+E.byteLength);return new Uint8Array(v)}function Zq(E){let v=E._queue.shift();return E._queueTotalSize-=v.size,E._queueTotalSize<0&&(E._queueTotalSize=0),v.value}function eL(E,v,T){if(!Xq(T)||T===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");E._queue.push({value:v,size:T}),E._queueTotalSize+=T}function dtt(E){return E._queue.peek().value}function d1(E){E._queue=new O,E._queueTotalSize=0}function Nle(E){return E===DataView}function ptt(E){return Nle(E.constructor)}function ftt(E){return Nle(E)?1:E.BYTES_PER_ELEMENT}class Gm{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!tL(this))throw oL("view");return this._view}respond(v){if(!tL(this))throw oL("respond");if(tr(v,1,"respond"),v=Y(v,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(be(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");F8(this._associatedReadableByteStreamController,v)}respondWithNewView(v){if(!tL(this))throw oL("respondWithNewView");if(tr(v,1,"respondWithNewView"),!ArrayBuffer.isView(v))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(be(v.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");B8(this._associatedReadableByteStreamController,v)}}Object.defineProperties(Gm.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(Gm.prototype.respond,"respond"),i(Gm.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Gm.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class yp{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Hm(this))throw L4("byobRequest");return sL(this)}get desiredSize(){if(!Hm(this))throw L4("desiredSize");return Gle(this)}close(){if(!Hm(this))throw L4("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let v=this._controlledReadableByteStream._state;if(v!=="readable")throw new TypeError(`The stream (in ${v} state) is not in the readable state and cannot be closed`);q4(this)}enqueue(v){if(!Hm(this))throw L4("enqueue");if(tr(v,1,"enqueue"),!ArrayBuffer.isView(v))throw new TypeError("chunk must be an array buffer view");if(v.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(v.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError(`The stream (in ${T} state) is not in the readable state and cannot be enqueued to`);N8(this,v)}error(v=void 0){if(!Hm(this))throw L4("error");$u(this,v)}[M](v){Fle(this),d1(this);let T=this._cancelAlgorithm(v);return P8(this),T}[I](v){let T=this._controlledReadableByteStream;if(this._queueTotalSize>0){Vle(this,v);return}let q=this._autoAllocateChunkSize;if(q!==void 0){let W;try{W=new ArrayBuffer(q)}catch(_e){v._errorSteps(_e);return}let he={buffer:W,bufferByteLength:q,byteOffset:0,byteLength:q,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(he)}z(T,v),zm(this)}[F](){if(this._pendingPullIntos.length>0){let v=this._pendingPullIntos.peek();v.readerType="none",this._pendingPullIntos=new O,this._pendingPullIntos.push(v)}}}Object.defineProperties(yp.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(yp.prototype.close,"close"),i(yp.prototype.enqueue,"enqueue"),i(yp.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(yp.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Hm(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledReadableByteStream")?!1:E instanceof yp}function tL(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_associatedReadableByteStreamController")?!1:E instanceof Gm}function zm(E){if(!Ett(E))return;if(E._pulling){E._pullAgain=!0;return}E._pulling=!0;let T=E._pullAlgorithm();p(T,()=>(E._pulling=!1,E._pullAgain&&(E._pullAgain=!1,zm(E)),null),q=>($u(E,q),null))}function Fle(E){nL(E),E._pendingPullIntos=new O}function rL(E,v){let T=!1;E._state==="closed"&&(T=!0);let q=Ble(v);v.readerType==="default"?X(E,q,T):Att(E,q,T)}function Ble(E){let v=E.bytesFilled,T=E.elementSize;return new E.viewConstructor(E.buffer,E.byteOffset,v/T)}function M8(E,v,T,q){E._queue.push({buffer:v,byteOffset:T,byteLength:q}),E._queueTotalSize+=q}function qle(E,v,T,q){let W;try{W=xe(v,T,T+q)}catch(he){throw $u(E,he),he}M8(E,W,0,q)}function Lle(E,v){v.bytesFilled>0&&qle(E,v.buffer,v.byteOffset,v.bytesFilled),w2(E)}function jle(E,v){let T=Math.min(E._queueTotalSize,v.byteLength-v.bytesFilled),q=v.bytesFilled+T,W=T,he=!1,_e=q%v.elementSize,ze=q-_e;ze>=v.minimumFill&&(W=ze-v.bytesFilled,he=!0);let wt=E._queue;for(;W>0;){let ct=wt.peek(),kt=Math.min(W,ct.byteLength),Wt=v.byteOffset+v.bytesFilled;Oe(v.buffer,Wt,ct.buffer,ct.byteOffset,kt),ct.byteLength===kt?wt.shift():(ct.byteOffset+=kt,ct.byteLength-=kt),E._queueTotalSize-=kt,$le(E,kt,v),W-=kt}return he}function $le(E,v,T){T.bytesFilled+=v}function Kle(E){E._queueTotalSize===0&&E._closeRequested?(P8(E),G4(E._controlledReadableByteStream)):zm(E)}function nL(E){E._byobRequest!==null&&(E._byobRequest._associatedReadableByteStreamController=void 0,E._byobRequest._view=null,E._byobRequest=null)}function iL(E){for(;E._pendingPullIntos.length>0;){if(E._queueTotalSize===0)return;let v=E._pendingPullIntos.peek();jle(E,v)&&(w2(E),rL(E._controlledReadableByteStream,v))}}function htt(E){let v=E._controlledReadableByteStream._reader;for(;v._readRequests.length>0;){if(E._queueTotalSize===0)return;let T=v._readRequests.shift();Vle(E,T)}}function mtt(E,v,T,q){let W=E._controlledReadableByteStream,he=v.constructor,_e=ftt(he),{byteOffset:ze,byteLength:wt}=v,ct=T*_e,kt;try{kt=Ie(v.buffer)}catch(Qr){q._errorSteps(Qr);return}let Wt={buffer:kt,bufferByteLength:kt.byteLength,byteOffset:ze,byteLength:wt,bytesFilled:0,minimumFill:ct,elementSize:_e,viewConstructor:he,readerType:"byob"};if(E._pendingPullIntos.length>0){E._pendingPullIntos.push(Wt),Wle(W,q);return}if(W._state==="closed"){let Qr=new he(Wt.buffer,Wt.byteOffset,0);q._closeSteps(Qr);return}if(E._queueTotalSize>0){if(jle(E,Wt)){let Qr=Ble(Wt);Kle(E),q._chunkSteps(Qr);return}if(E._closeRequested){let Qr=new TypeError("Insufficient bytes to fill elements in the given buffer");$u(E,Qr),q._errorSteps(Qr);return}}E._pendingPullIntos.push(Wt),Wle(W,q),zm(E)}function ytt(E,v){v.readerType==="none"&&w2(E);let T=E._controlledReadableByteStream;if(aL(T))for(;Jle(T)>0;){let q=w2(E);rL(T,q)}}function gtt(E,v,T){if($le(E,v,T),T.readerType==="none"){Lle(E,T),iL(E);return}if(T.bytesFilled<T.minimumFill)return;w2(E);let q=T.bytesFilled%T.elementSize;if(q>0){let W=T.byteOffset+T.bytesFilled;qle(E,T.buffer,W-q,q)}T.bytesFilled-=q,rL(E._controlledReadableByteStream,T),iL(E)}function Ule(E,v){let T=E._pendingPullIntos.peek();nL(E),E._controlledReadableByteStream._state==="closed"?ytt(E,T):gtt(E,v,T),zm(E)}function w2(E){return E._pendingPullIntos.shift()}function Ett(E){let v=E._controlledReadableByteStream;return v._state!=="readable"||E._closeRequested||!E._started?!1:!!(se(v)&&ue(v)>0||aL(v)&&Jle(v)>0||Gle(E)>0)}function P8(E){E._pullAlgorithm=void 0,E._cancelAlgorithm=void 0}function q4(E){let v=E._controlledReadableByteStream;if(!(E._closeRequested||v._state!=="readable")){if(E._queueTotalSize>0){E._closeRequested=!0;return}if(E._pendingPullIntos.length>0){let T=E._pendingPullIntos.peek();if(T.bytesFilled%T.elementSize!==0){let q=new TypeError("Insufficient bytes to fill elements in the given buffer");throw $u(E,q),q}}P8(E),G4(v)}}function N8(E,v){let T=E._controlledReadableByteStream;if(E._closeRequested||T._state!=="readable")return;let{buffer:q,byteOffset:W,byteLength:he}=v;if(be(q))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let _e=Ie(q);if(E._pendingPullIntos.length>0){let ze=E._pendingPullIntos.peek();if(be(ze.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");nL(E),ze.buffer=Ie(ze.buffer),ze.readerType==="none"&&Lle(E,ze)}if(se(T))if(htt(E),ue(T)===0)M8(E,_e,W,he);else{E._pendingPullIntos.length>0&&w2(E);let ze=new Uint8Array(_e,W,he);X(T,ze,!1)}else aL(T)?(M8(E,_e,W,he),iL(E)):M8(E,_e,W,he);zm(E)}function $u(E,v){let T=E._controlledReadableByteStream;T._state==="readable"&&(Fle(E),d1(E),P8(E),bde(T,v))}function Vle(E,v){let T=E._queue.shift();E._queueTotalSize-=T.byteLength,Kle(E);let q=new Uint8Array(T.buffer,T.byteOffset,T.byteLength);v._chunkSteps(q)}function sL(E){if(E._byobRequest===null&&E._pendingPullIntos.length>0){let v=E._pendingPullIntos.peek(),T=new Uint8Array(v.buffer,v.byteOffset+v.bytesFilled,v.byteLength-v.bytesFilled),q=Object.create(Gm.prototype);_tt(q,E,T),E._byobRequest=q}return E._byobRequest}function Gle(E){let v=E._controlledReadableByteStream._state;return v==="errored"?null:v==="closed"?0:E._strategyHWM-E._queueTotalSize}function F8(E,v){let T=E._pendingPullIntos.peek();if(E._controlledReadableByteStream._state==="closed"){if(v!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(v===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(T.bytesFilled+v>T.byteLength)throw new RangeError("bytesWritten out of range")}T.buffer=Ie(T.buffer),Ule(E,v)}function B8(E,v){let T=E._pendingPullIntos.peek();if(E._controlledReadableByteStream._state==="closed"){if(v.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(v.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(T.byteOffset+T.bytesFilled!==v.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(T.bufferByteLength!==v.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(T.bytesFilled+v.byteLength>T.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let W=v.byteLength;T.buffer=Ie(v.buffer),Ule(E,W)}function Hle(E,v,T,q,W,he,_e){v._controlledReadableByteStream=E,v._pullAgain=!1,v._pulling=!1,v._byobRequest=null,v._queue=v._queueTotalSize=void 0,d1(v),v._closeRequested=!1,v._started=!1,v._strategyHWM=he,v._pullAlgorithm=q,v._cancelAlgorithm=W,v._autoAllocateChunkSize=_e,v._pendingPullIntos=new O,E._readableStreamController=v;let ze=T();p(c(ze),()=>(v._started=!0,zm(v),null),wt=>($u(v,wt),null))}function btt(E,v,T){let q=Object.create(yp.prototype),W,he,_e;v.start!==void 0?W=()=>v.start(q):W=()=>{},v.pull!==void 0?he=()=>v.pull(q):he=()=>c(void 0),v.cancel!==void 0?_e=wt=>v.cancel(wt):_e=()=>c(void 0);let ze=v.autoAllocateChunkSize;if(ze===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Hle(E,q,W,he,_e,T,ze)}function _tt(E,v,T){E._associatedReadableByteStreamController=v,E._view=T}function oL(E){return new TypeError(`ReadableStreamBYOBRequest.prototype.${E} can only be used on a ReadableStreamBYOBRequest`)}function L4(E){return new TypeError(`ReadableByteStreamController.prototype.${E} can only be used on a ReadableByteStreamController`)}function vtt(E,v){Rr(E,v);let T=E?.mode;return{mode:T===void 0?void 0:Stt(T,`${v} has member 'mode' that`)}}function Stt(E,v){if(E=`${E}`,E!=="byob")throw new TypeError(`${v} '${E}' is not a valid enumeration value for ReadableStreamReaderMode`);return E}function wtt(E,v){var T;Rr(E,v);let q=(T=E?.min)!==null&&T!==void 0?T:1;return{min:Y(q,`${v} has member 'min' that`)}}function zle(E){return new p1(E)}function Wle(E,v){E._reader._readIntoRequests.push(v)}function Att(E,v,T){let W=E._reader._readIntoRequests.shift();T?W._closeSteps(v):W._chunkSteps(v)}function Jle(E){return E._reader._readIntoRequests.length}function aL(E){let v=E._reader;return!(v===void 0||!Wm(v))}class p1{constructor(v){if(tr(v,1,"ReadableStreamBYOBReader"),te(v,"First parameter"),m1(v))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Hm(v._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");B(this,v),this._readIntoRequests=new O}get closed(){return Wm(this)?this._closedPromise:l(q8("closed"))}cancel(v=void 0){return Wm(this)?this._ownerReadableStream===void 0?l(H("cancel")):U(this,v):l(q8("cancel"))}read(v,T={}){if(!Wm(this))return l(q8("read"));if(!ArrayBuffer.isView(v))return l(new TypeError("view must be an array buffer view"));if(v.byteLength===0)return l(new TypeError("view must have non-zero byteLength"));if(v.buffer.byteLength===0)return l(new TypeError("view's buffer must have non-zero byteLength"));if(be(v.buffer))return l(new TypeError("view's buffer has been detached"));let q;try{q=wtt(T,"options")}catch(ct){return l(ct)}let W=q.min;if(W===0)return l(new TypeError("options.min must be greater than 0"));if(ptt(v)){if(W>v.byteLength)return l(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(W>v.length)return l(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return l(H("read from"));let he,_e,ze=u((ct,kt)=>{he=ct,_e=kt});return Yle(this,v,W,{_chunkSteps:ct=>he({value:ct,done:!1}),_closeSteps:ct=>he({value:ct,done:!0}),_errorSteps:ct=>_e(ct)}),ze}releaseLock(){if(!Wm(this))throw q8("releaseLock");this._ownerReadableStream!==void 0&&Ctt(this)}}Object.defineProperties(p1.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(p1.prototype.cancel,"cancel"),i(p1.prototype.read,"read"),i(p1.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(p1.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Wm(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readIntoRequests")?!1:E instanceof p1}function Yle(E,v,T,q){let W=E._ownerReadableStream;W._disturbed=!0,W._state==="errored"?q._errorSteps(W._storedError):mtt(W._readableStreamController,v,T,q)}function Ctt(E){k(E);let v=new TypeError("Reader was released");Qle(E,v)}function Qle(E,v){let T=E._readIntoRequests;E._readIntoRequests=new O,T.forEach(q=>{q._errorSteps(v)})}function q8(E){return new TypeError(`ReadableStreamBYOBReader.prototype.${E} can only be used on a ReadableStreamBYOBReader`)}function j4(E,v){let{highWaterMark:T}=E;if(T===void 0)return v;if(oe(T)||T<0)throw new RangeError("Invalid highWaterMark");return T}function L8(E){let{size:v}=E;return v||(()=>1)}function j8(E,v){Rr(E,v);let T=E?.highWaterMark,q=E?.size;return{highWaterMark:T===void 0?void 0:$(T),size:q===void 0?void 0:Ttt(q,`${v} has member 'size' that`)}}function Ttt(E,v){return _t(E,v),T=>$(E(T))}function Ott(E,v){Rr(E,v);let T=E?.abort,q=E?.close,W=E?.start,he=E?.type,_e=E?.write;return{abort:T===void 0?void 0:xtt(T,E,`${v} has member 'abort' that`),close:q===void 0?void 0:Itt(q,E,`${v} has member 'close' that`),start:W===void 0?void 0:Rtt(W,E,`${v} has member 'start' that`),write:_e===void 0?void 0:Dtt(_e,E,`${v} has member 'write' that`),type:he}}function xtt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function Itt(E,v,T){return _t(E,T),()=>C(E,v,[])}function Rtt(E,v,T){return _t(E,T),q=>w(E,v,[q])}function Dtt(E,v,T){return _t(E,T),(q,W)=>C(E,v,[q,W])}function Xle(E,v){if(!A2(E))throw new TypeError(`${v} is not a WritableStream.`)}function ktt(E){if(typeof E!="object"||E===null)return!1;try{return typeof E.aborted=="boolean"}catch{return!1}}let Mtt=typeof AbortController=="function";function Ptt(){if(Mtt)return new AbortController}class f1{constructor(v={},T={}){v===void 0?v=null:Ei(v,"First parameter");let q=j8(T,"Second parameter"),W=Ott(v,"First parameter");if(ede(this),W.type!==void 0)throw new RangeError("Invalid type is specified");let _e=L8(q),ze=j4(q,1);Wtt(this,W,ze,_e)}get locked(){if(!A2(this))throw G8("locked");return C2(this)}abort(v=void 0){return A2(this)?C2(this)?l(new TypeError("Cannot abort a stream that already has a writer")):$8(this,v):l(G8("abort"))}close(){return A2(this)?C2(this)?l(new TypeError("Cannot close a stream that already has a writer")):fd(this)?l(new TypeError("Cannot close an already-closing stream")):tde(this):l(G8("close"))}getWriter(){if(!A2(this))throw G8("getWriter");return Zle(this)}}Object.defineProperties(f1.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(f1.prototype.abort,"abort"),i(f1.prototype.close,"close"),i(f1.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(f1.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Zle(E){return new gp(E)}function Ntt(E,v,T,q,W=1,he=()=>1){let _e=Object.create(f1.prototype);ede(_e);let ze=Object.create(T2.prototype);return ade(_e,ze,E,v,T,q,W,he),_e}function ede(E){E._state="writable",E._storedError=void 0,E._writer=void 0,E._writableStreamController=void 0,E._writeRequests=new O,E._inFlightWriteRequest=void 0,E._closeRequest=void 0,E._inFlightCloseRequest=void 0,E._pendingAbortRequest=void 0,E._backpressure=!1}function A2(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_writableStreamController")?!1:E instanceof f1}function C2(E){return E._writer!==void 0}function $8(E,v){var T;if(E._state==="closed"||E._state==="errored")return c(void 0);E._writableStreamController._abortReason=v,(T=E._writableStreamController._abortController)===null||T===void 0||T.abort(v);let q=E._state;if(q==="closed"||q==="errored")return c(void 0);if(E._pendingAbortRequest!==void 0)return E._pendingAbortRequest._promise;let W=!1;q==="erroring"&&(W=!0,v=void 0);let he=u((_e,ze)=>{E._pendingAbortRequest={_promise:void 0,_resolve:_e,_reject:ze,_reason:v,_wasAlreadyErroring:W}});return E._pendingAbortRequest._promise=he,W||cL(E,v),he}function tde(E){let v=E._state;if(v==="closed"||v==="errored")return l(new TypeError(`The stream (in ${v} state) is not in the writable state and cannot be closed`));let T=u((W,he)=>{let _e={_resolve:W,_reject:he};E._closeRequest=_e}),q=E._writer;return q!==void 0&&E._backpressure&&v==="writable"&&gL(q),Jtt(E._writableStreamController),T}function Ftt(E){return u((T,q)=>{let W={_resolve:T,_reject:q};E._writeRequests.push(W)})}function uL(E,v){if(E._state==="writable"){cL(E,v);return}lL(E)}function cL(E,v){let T=E._writableStreamController;E._state="erroring",E._storedError=v;let q=E._writer;q!==void 0&&nde(q,v),!$tt(E)&&T._started&&lL(E)}function lL(E){E._state="errored",E._writableStreamController[R]();let v=E._storedError;if(E._writeRequests.forEach(W=>{W._reject(v)}),E._writeRequests=new O,E._pendingAbortRequest===void 0){K8(E);return}let T=E._pendingAbortRequest;if(E._pendingAbortRequest=void 0,T._wasAlreadyErroring){T._reject(v),K8(E);return}let q=E._writableStreamController[x](T._reason);p(q,()=>(T._resolve(),K8(E),null),W=>(T._reject(W),K8(E),null))}function Btt(E){E._inFlightWriteRequest._resolve(void 0),E._inFlightWriteRequest=void 0}function qtt(E,v){E._inFlightWriteRequest._reject(v),E._inFlightWriteRequest=void 0,uL(E,v)}function Ltt(E){E._inFlightCloseRequest._resolve(void 0),E._inFlightCloseRequest=void 0,E._state==="erroring"&&(E._storedError=void 0,E._pendingAbortRequest!==void 0&&(E._pendingAbortRequest._resolve(),E._pendingAbortRequest=void 0)),E._state="closed";let T=E._writer;T!==void 0&&dde(T)}function jtt(E,v){E._inFlightCloseRequest._reject(v),E._inFlightCloseRequest=void 0,E._pendingAbortRequest!==void 0&&(E._pendingAbortRequest._reject(v),E._pendingAbortRequest=void 0),uL(E,v)}function fd(E){return!(E._closeRequest===void 0&&E._inFlightCloseRequest===void 0)}function $tt(E){return!(E._inFlightWriteRequest===void 0&&E._inFlightCloseRequest===void 0)}function Ktt(E){E._inFlightCloseRequest=E._closeRequest,E._closeRequest=void 0}function Utt(E){E._inFlightWriteRequest=E._writeRequests.shift()}function K8(E){E._closeRequest!==void 0&&(E._closeRequest._reject(E._storedError),E._closeRequest=void 0);let v=E._writer;v!==void 0&&mL(v,E._storedError)}function dL(E,v){let T=E._writer;T!==void 0&&v!==E._backpressure&&(v?rrt(T):gL(T)),E._backpressure=v}class gp{constructor(v){if(tr(v,1,"WritableStreamDefaultWriter"),Xle(v,"First parameter"),C2(v))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=v,v._writer=this;let T=v._state;if(T==="writable")!fd(v)&&v._backpressure?z8(this):pde(this),H8(this);else if(T==="erroring")yL(this,v._storedError),H8(this);else if(T==="closed")pde(this),ert(this);else{let q=v._storedError;yL(this,q),lde(this,q)}}get closed(){return Jm(this)?this._closedPromise:l(Ym("closed"))}get desiredSize(){if(!Jm(this))throw Ym("desiredSize");if(this._ownerWritableStream===void 0)throw K4("desiredSize");return ztt(this)}get ready(){return Jm(this)?this._readyPromise:l(Ym("ready"))}abort(v=void 0){return Jm(this)?this._ownerWritableStream===void 0?l(K4("abort")):Vtt(this,v):l(Ym("abort"))}close(){if(!Jm(this))return l(Ym("close"));let v=this._ownerWritableStream;return v===void 0?l(K4("close")):fd(v)?l(new TypeError("Cannot close an already-closing stream")):rde(this)}releaseLock(){if(!Jm(this))throw Ym("releaseLock");this._ownerWritableStream!==void 0&&ide(this)}write(v=void 0){return Jm(this)?this._ownerWritableStream===void 0?l(K4("write to")):sde(this,v):l(Ym("write"))}}Object.defineProperties(gp.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(gp.prototype.abort,"abort"),i(gp.prototype.close,"close"),i(gp.prototype.releaseLock,"releaseLock"),i(gp.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(gp.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Jm(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_ownerWritableStream")?!1:E instanceof gp}function Vtt(E,v){let T=E._ownerWritableStream;return $8(T,v)}function rde(E){let v=E._ownerWritableStream;return tde(v)}function Gtt(E){let v=E._ownerWritableStream,T=v._state;return fd(v)||T==="closed"?c(void 0):T==="errored"?l(v._storedError):rde(E)}function Htt(E,v){E._closedPromiseState==="pending"?mL(E,v):trt(E,v)}function nde(E,v){E._readyPromiseState==="pending"?fde(E,v):nrt(E,v)}function ztt(E){let v=E._ownerWritableStream,T=v._state;return T==="errored"||T==="erroring"?null:T==="closed"?0:ude(v._writableStreamController)}function ide(E){let v=E._ownerWritableStream,T=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");nde(E,T),Htt(E,T),v._writer=void 0,E._ownerWritableStream=void 0}function sde(E,v){let T=E._ownerWritableStream,q=T._writableStreamController,W=Ytt(q,v);if(T!==E._ownerWritableStream)return l(K4("write to"));let he=T._state;if(he==="errored")return l(T._storedError);if(fd(T)||he==="closed")return l(new TypeError("The stream is closing or closed and cannot be written to"));if(he==="erroring")return l(T._storedError);let _e=Ftt(T);return Qtt(q,v,W),_e}let ode={};class T2{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!pL(this))throw hL("abortReason");return this._abortReason}get signal(){if(!pL(this))throw hL("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(v=void 0){if(!pL(this))throw hL("error");this._controlledWritableStream._state==="writable"&&cde(this,v)}[x](v){let T=this._abortAlgorithm(v);return U8(this),T}[R](){d1(this)}}Object.defineProperties(T2.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(T2.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function pL(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledWritableStream")?!1:E instanceof T2}function ade(E,v,T,q,W,he,_e,ze){v._controlledWritableStream=E,E._writableStreamController=v,v._queue=void 0,v._queueTotalSize=void 0,d1(v),v._abortReason=void 0,v._abortController=Ptt(),v._started=!1,v._strategySizeAlgorithm=ze,v._strategyHWM=_e,v._writeAlgorithm=q,v._closeAlgorithm=W,v._abortAlgorithm=he;let wt=fL(v);dL(E,wt);let ct=T(),kt=c(ct);p(kt,()=>(v._started=!0,V8(v),null),Wt=>(v._started=!0,uL(E,Wt),null))}function Wtt(E,v,T,q){let W=Object.create(T2.prototype),he,_e,ze,wt;v.start!==void 0?he=()=>v.start(W):he=()=>{},v.write!==void 0?_e=ct=>v.write(ct,W):_e=()=>c(void 0),v.close!==void 0?ze=()=>v.close():ze=()=>c(void 0),v.abort!==void 0?wt=ct=>v.abort(ct):wt=()=>c(void 0),ade(E,W,he,_e,ze,wt,T,q)}function U8(E){E._writeAlgorithm=void 0,E._closeAlgorithm=void 0,E._abortAlgorithm=void 0,E._strategySizeAlgorithm=void 0}function Jtt(E){eL(E,ode,0),V8(E)}function Ytt(E,v){try{return E._strategySizeAlgorithm(v)}catch(T){return $4(E,T),1}}function ude(E){return E._strategyHWM-E._queueTotalSize}function Qtt(E,v,T){try{eL(E,v,T)}catch(W){$4(E,W);return}let q=E._controlledWritableStream;if(!fd(q)&&q._state==="writable"){let W=fL(E);dL(q,W)}V8(E)}function V8(E){let v=E._controlledWritableStream;if(!E._started||v._inFlightWriteRequest!==void 0)return;if(v._state==="erroring"){lL(v);return}if(E._queue.length===0)return;let q=dtt(E);q===ode?Xtt(E):Ztt(E,q)}function $4(E,v){E._controlledWritableStream._state==="writable"&&cde(E,v)}function Xtt(E){let v=E._controlledWritableStream;Ktt(v),Zq(E);let T=E._closeAlgorithm();U8(E),p(T,()=>(Ltt(v),null),q=>(jtt(v,q),null))}function Ztt(E,v){let T=E._controlledWritableStream;Utt(T);let q=E._writeAlgorithm(v);p(q,()=>{Btt(T);let W=T._state;if(Zq(E),!fd(T)&&W==="writable"){let he=fL(E);dL(T,he)}return V8(E),null},W=>(T._state==="writable"&&U8(E),qtt(T,W),null))}function fL(E){return ude(E)<=0}function cde(E,v){let T=E._controlledWritableStream;U8(E),cL(T,v)}function G8(E){return new TypeError(`WritableStream.prototype.${E} can only be used on a WritableStream`)}function hL(E){return new TypeError(`WritableStreamDefaultController.prototype.${E} can only be used on a WritableStreamDefaultController`)}function Ym(E){return new TypeError(`WritableStreamDefaultWriter.prototype.${E} can only be used on a WritableStreamDefaultWriter`)}function K4(E){return new TypeError("Cannot "+E+" a stream using a released writer")}function H8(E){E._closedPromise=u((v,T)=>{E._closedPromise_resolve=v,E._closedPromise_reject=T,E._closedPromiseState="pending"})}function lde(E,v){H8(E),mL(E,v)}function ert(E){H8(E),dde(E)}function mL(E,v){E._closedPromise_reject!==void 0&&(_(E._closedPromise),E._closedPromise_reject(v),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0,E._closedPromiseState="rejected")}function trt(E,v){lde(E,v)}function dde(E){E._closedPromise_resolve!==void 0&&(E._closedPromise_resolve(void 0),E._closedPromise_resolve=void 0,E._closedPromise_reject=void 0,E._closedPromiseState="resolved")}function z8(E){E._readyPromise=u((v,T)=>{E._readyPromise_resolve=v,E._readyPromise_reject=T}),E._readyPromiseState="pending"}function yL(E,v){z8(E),fde(E,v)}function pde(E){z8(E),gL(E)}function fde(E,v){E._readyPromise_reject!==void 0&&(_(E._readyPromise),E._readyPromise_reject(v),E._readyPromise_resolve=void 0,E._readyPromise_reject=void 0,E._readyPromiseState="rejected")}function rrt(E){z8(E)}function nrt(E,v){yL(E,v)}function gL(E){E._readyPromise_resolve!==void 0&&(E._readyPromise_resolve(void 0),E._readyPromise_resolve=void 0,E._readyPromise_reject=void 0,E._readyPromiseState="fulfilled")}function irt(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let EL=irt();function srt(E){if(!(typeof E=="function"||typeof E=="object")||E.name!=="DOMException")return!1;try{return new E,!0}catch{return!1}}function ort(){let E=EL?.DOMException;return srt(E)?E:void 0}function art(){let E=function(T,q){this.message=T||"",this.name=q||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(E,"DOMException"),E.prototype=Object.create(Error.prototype),Object.defineProperty(E.prototype,"constructor",{value:E,writable:!0,configurable:!0}),E}let urt=ort()||art();function hde(E,v,T,q,W,he){let _e=de(E),ze=Zle(v);E._disturbed=!0;let wt=!1,ct=c(void 0);return u((kt,Wt)=>{let Qr;if(he!==void 0){if(Qr=()=>{let dt=he.reason!==void 0?he.reason:new urt("Aborted","AbortError"),lr=[];q||lr.push(()=>v._state==="writable"?$8(v,dt):c(void 0)),W||lr.push(()=>E._state==="readable"?Zc(E,dt):c(void 0)),la(()=>Promise.all(lr.map(ln=>ln())),!0,dt)},he.aborted){Qr();return}he.addEventListener("abort",Qr)}function el(){return u((dt,lr)=>{function ln(Ya){Ya?dt():d(R2(),ln,lr)}ln(!1)})}function R2(){return wt?c(!0):d(ze._readyPromise,()=>u((dt,lr)=>{tt(_e,{_chunkSteps:ln=>{ct=d(sde(ze,ln),void 0,e),dt(!1)},_closeSteps:()=>dt(!0),_errorSteps:lr})}))}if(bp(E,_e._closedPromise,dt=>(q?Ku(!0,dt):la(()=>$8(v,dt),!0,dt),null)),bp(v,ze._closedPromise,dt=>(W?Ku(!0,dt):la(()=>Zc(E,dt),!0,dt),null)),Do(E,_e._closedPromise,()=>(T?Ku():la(()=>Gtt(ze)),null)),fd(v)||v._state==="closed"){let dt=new TypeError("the destination writable stream closed before all data could be piped to it");W?Ku(!0,dt):la(()=>Zc(E,dt),!0,dt)}_(el());function g1(){let dt=ct;return d(ct,()=>dt!==ct?g1():void 0)}function bp(dt,lr,ln){dt._state==="errored"?ln(dt._storedError):h(lr,ln)}function Do(dt,lr,ln){dt._state==="closed"?ln():f(lr,ln)}function la(dt,lr,ln){if(wt)return;wt=!0,v._state==="writable"&&!fd(v)?f(g1(),Ya):Ya();function Ya(){return p(dt(),()=>_p(lr,ln),D2=>_p(!0,D2)),null}}function Ku(dt,lr){wt||(wt=!0,v._state==="writable"&&!fd(v)?f(g1(),()=>_p(dt,lr)):_p(dt,lr))}function _p(dt,lr){return ide(ze),k(_e),he!==void 0&&he.removeEventListener("abort",Qr),dt?Wt(lr):kt(void 0),null}})}class Ep{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!W8(this))throw Y8("desiredSize");return bL(this)}close(){if(!W8(this))throw Y8("close");if(!x2(this))throw new TypeError("The stream is not in a state that permits close");Qm(this)}enqueue(v=void 0){if(!W8(this))throw Y8("enqueue");if(!x2(this))throw new TypeError("The stream is not in a state that permits enqueue");return O2(this,v)}error(v=void 0){if(!W8(this))throw Y8("error");Xc(this,v)}[M](v){d1(this);let T=this._cancelAlgorithm(v);return J8(this),T}[I](v){let T=this._controlledReadableStream;if(this._queue.length>0){let q=Zq(this);this._closeRequested&&this._queue.length===0?(J8(this),G4(T)):U4(this),v._chunkSteps(q)}else z(T,v),U4(this)}[F](){}}Object.defineProperties(Ep.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Ep.prototype.close,"close"),i(Ep.prototype.enqueue,"enqueue"),i(Ep.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ep.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function W8(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledReadableStream")?!1:E instanceof Ep}function U4(E){if(!mde(E))return;if(E._pulling){E._pullAgain=!0;return}E._pulling=!0;let T=E._pullAlgorithm();p(T,()=>(E._pulling=!1,E._pullAgain&&(E._pullAgain=!1,U4(E)),null),q=>(Xc(E,q),null))}function mde(E){let v=E._controlledReadableStream;return!x2(E)||!E._started?!1:!!(m1(v)&&ue(v)>0||bL(E)>0)}function J8(E){E._pullAlgorithm=void 0,E._cancelAlgorithm=void 0,E._strategySizeAlgorithm=void 0}function Qm(E){if(!x2(E))return;let v=E._controlledReadableStream;E._closeRequested=!0,E._queue.length===0&&(J8(E),G4(v))}function O2(E,v){if(!x2(E))return;let T=E._controlledReadableStream;if(m1(T)&&ue(T)>0)X(T,v,!1);else{let q;try{q=E._strategySizeAlgorithm(v)}catch(W){throw Xc(E,W),W}try{eL(E,v,q)}catch(W){throw Xc(E,W),W}}U4(E)}function Xc(E,v){let T=E._controlledReadableStream;T._state==="readable"&&(d1(E),J8(E),bde(T,v))}function bL(E){let v=E._controlledReadableStream._state;return v==="errored"?null:v==="closed"?0:E._strategyHWM-E._queueTotalSize}function crt(E){return!mde(E)}function x2(E){let v=E._controlledReadableStream._state;return!E._closeRequested&&v==="readable"}function yde(E,v,T,q,W,he,_e){v._controlledReadableStream=E,v._queue=void 0,v._queueTotalSize=void 0,d1(v),v._started=!1,v._closeRequested=!1,v._pullAgain=!1,v._pulling=!1,v._strategySizeAlgorithm=_e,v._strategyHWM=he,v._pullAlgorithm=q,v._cancelAlgorithm=W,E._readableStreamController=v;let ze=T();p(c(ze),()=>(v._started=!0,U4(v),null),wt=>(Xc(v,wt),null))}function lrt(E,v,T,q){let W=Object.create(Ep.prototype),he,_e,ze;v.start!==void 0?he=()=>v.start(W):he=()=>{},v.pull!==void 0?_e=()=>v.pull(W):_e=()=>c(void 0),v.cancel!==void 0?ze=wt=>v.cancel(wt):ze=()=>c(void 0),yde(E,W,he,_e,ze,T,q)}function Y8(E){return new TypeError(`ReadableStreamDefaultController.prototype.${E} can only be used on a ReadableStreamDefaultController`)}function drt(E,v){return Hm(E._readableStreamController)?frt(E):prt(E)}function prt(E,v){let T=de(E),q=!1,W=!1,he=!1,_e=!1,ze,wt,ct,kt,Wt,Qr=u(Do=>{Wt=Do});function el(){return q?(W=!0,c(void 0)):(q=!0,tt(T,{_chunkSteps:la=>{S(()=>{W=!1;let Ku=la,_p=la;he||O2(ct._readableStreamController,Ku),_e||O2(kt._readableStreamController,_p),q=!1,W&&el()})},_closeSteps:()=>{q=!1,he||Qm(ct._readableStreamController),_e||Qm(kt._readableStreamController),(!he||!_e)&&Wt(void 0)},_errorSteps:()=>{q=!1}}),c(void 0))}function R2(Do){if(he=!0,ze=Do,_e){let la=Q([ze,wt]),Ku=Zc(E,la);Wt(Ku)}return Qr}function g1(Do){if(_e=!0,wt=Do,he){let la=Q([ze,wt]),Ku=Zc(E,la);Wt(Ku)}return Qr}function bp(){}return ct=V4(bp,el,R2),kt=V4(bp,el,g1),h(T._closedPromise,Do=>(Xc(ct._readableStreamController,Do),Xc(kt._readableStreamController,Do),(!he||!_e)&&Wt(void 0),null)),[ct,kt]}function frt(E){let v=de(E),T=!1,q=!1,W=!1,he=!1,_e=!1,ze,wt,ct,kt,Wt,Qr=u(dt=>{Wt=dt});function el(dt){h(dt._closedPromise,lr=>(dt!==v||($u(ct._readableStreamController,lr),$u(kt._readableStreamController,lr),(!he||!_e)&&Wt(void 0)),null))}function R2(){Wm(v)&&(k(v),v=de(E),el(v)),tt(v,{_chunkSteps:lr=>{S(()=>{q=!1,W=!1;let ln=lr,Ya=lr;if(!he&&!_e)try{Ya=k8(lr)}catch(D2){$u(ct._readableStreamController,D2),$u(kt._readableStreamController,D2),Wt(Zc(E,D2));return}he||N8(ct._readableStreamController,ln),_e||N8(kt._readableStreamController,Ya),T=!1,q?bp():W&&Do()})},_closeSteps:()=>{T=!1,he||q4(ct._readableStreamController),_e||q4(kt._readableStreamController),ct._readableStreamController._pendingPullIntos.length>0&&F8(ct._readableStreamController,0),kt._readableStreamController._pendingPullIntos.length>0&&F8(kt._readableStreamController,0),(!he||!_e)&&Wt(void 0)},_errorSteps:()=>{T=!1}})}function g1(dt,lr){He(v)&&(k(v),v=zle(E),el(v));let ln=lr?kt:ct,Ya=lr?ct:kt;Yle(v,dt,1,{_chunkSteps:k2=>{S(()=>{q=!1,W=!1;let M2=lr?_e:he;if(lr?he:_e)M2||B8(ln._readableStreamController,k2);else{let kde;try{kde=k8(k2)}catch(AL){$u(ln._readableStreamController,AL),$u(Ya._readableStreamController,AL),Wt(Zc(E,AL));return}M2||B8(ln._readableStreamController,k2),N8(Ya._readableStreamController,kde)}T=!1,q?bp():W&&Do()})},_closeSteps:k2=>{T=!1;let M2=lr?_e:he,i5=lr?he:_e;M2||q4(ln._readableStreamController),i5||q4(Ya._readableStreamController),k2!==void 0&&(M2||B8(ln._readableStreamController,k2),!i5&&Ya._readableStreamController._pendingPullIntos.length>0&&F8(Ya._readableStreamController,0)),(!M2||!i5)&&Wt(void 0)},_errorSteps:()=>{T=!1}})}function bp(){if(T)return q=!0,c(void 0);T=!0;let dt=sL(ct._readableStreamController);return dt===null?R2():g1(dt._view,!1),c(void 0)}function Do(){if(T)return W=!0,c(void 0);T=!0;let dt=sL(kt._readableStreamController);return dt===null?R2():g1(dt._view,!0),c(void 0)}function la(dt){if(he=!0,ze=dt,_e){let lr=Q([ze,wt]),ln=Zc(E,lr);Wt(ln)}return Qr}function Ku(dt){if(_e=!0,wt=dt,he){let lr=Q([ze,wt]),ln=Zc(E,lr);Wt(ln)}return Qr}function _p(){}return ct=Ede(_p,bp,la),kt=Ede(_p,Do,Ku),el(v),[ct,kt]}function hrt(E){return r(E)&&typeof E.getReader<"u"}function mrt(E){return hrt(E)?grt(E.getReader()):yrt(E)}function yrt(E){let v,T=cr(E,"async"),q=e;function W(){let _e;try{_e=Sn(T)}catch(wt){return l(wt)}let ze=c(_e);return g(ze,wt=>{if(!r(wt))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Ja(wt))Qm(v._readableStreamController);else{let kt=D8(wt);O2(v._readableStreamController,kt)}})}function he(_e){let ze=T.iterator,wt;try{wt=Fe(ze,"return")}catch(Wt){return l(Wt)}if(wt===void 0)return c(void 0);let ct;try{ct=w(wt,ze,[_e])}catch(Wt){return l(Wt)}let kt=c(ct);return g(kt,Wt=>{if(!r(Wt))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return v=V4(q,W,he,0),v}function grt(E){let v,T=e;function q(){let he;try{he=E.read()}catch(_e){return l(_e)}return g(he,_e=>{if(!r(_e))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(_e.done)Qm(v._readableStreamController);else{let ze=_e.value;O2(v._readableStreamController,ze)}})}function W(he){try{return c(E.cancel(he))}catch(_e){return l(_e)}}return v=V4(T,q,W,0),v}function Ert(E,v){Rr(E,v);let T=E,q=T?.autoAllocateChunkSize,W=T?.cancel,he=T?.pull,_e=T?.start,ze=T?.type;return{autoAllocateChunkSize:q===void 0?void 0:Y(q,`${v} has member 'autoAllocateChunkSize' that`),cancel:W===void 0?void 0:brt(W,T,`${v} has member 'cancel' that`),pull:he===void 0?void 0:_rt(he,T,`${v} has member 'pull' that`),start:_e===void 0?void 0:vrt(_e,T,`${v} has member 'start' that`),type:ze===void 0?void 0:Srt(ze,`${v} has member 'type' that`)}}function brt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function _rt(E,v,T){return _t(E,T),q=>C(E,v,[q])}function vrt(E,v,T){return _t(E,T),q=>w(E,v,[q])}function Srt(E,v){if(E=`${E}`,E!=="bytes")throw new TypeError(`${v} '${E}' is not a valid enumeration value for ReadableStreamType`);return E}function wrt(E,v){return Rr(E,v),{preventCancel:!!E?.preventCancel}}function gde(E,v){Rr(E,v);let T=E?.preventAbort,q=E?.preventCancel,W=E?.preventClose,he=E?.signal;return he!==void 0&&Art(he,`${v} has member 'signal' that`),{preventAbort:!!T,preventCancel:!!q,preventClose:!!W,signal:he}}function Art(E,v){if(!ktt(E))throw new TypeError(`${v} is not an AbortSignal.`)}function Crt(E,v){Rr(E,v);let T=E?.readable;P(T,"readable","ReadableWritablePair"),te(T,`${v} has member 'readable' that`);let q=E?.writable;return P(q,"writable","ReadableWritablePair"),Xle(q,`${v} has member 'writable' that`),{readable:T,writable:q}}class no{constructor(v={},T={}){v===void 0?v=null:Ei(v,"First parameter");let q=j8(T,"Second parameter"),W=Ert(v,"First parameter");if(_L(this),W.type==="bytes"){if(q.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let he=j4(q,0);btt(this,W,he)}else{let he=L8(q),_e=j4(q,1);lrt(this,W,_e,he)}}get locked(){if(!h1(this))throw Xm("locked");return m1(this)}cancel(v=void 0){return h1(this)?m1(this)?l(new TypeError("Cannot cancel a stream that already has a reader")):Zc(this,v):l(Xm("cancel"))}getReader(v=void 0){if(!h1(this))throw Xm("getReader");return vtt(v,"First parameter").mode===void 0?de(this):zle(this)}pipeThrough(v,T={}){if(!h1(this))throw Xm("pipeThrough");tr(v,1,"pipeThrough");let q=Crt(v,"First parameter"),W=gde(T,"Second parameter");if(m1(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(C2(q.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let he=hde(this,q.writable,W.preventClose,W.preventAbort,W.preventCancel,W.signal);return _(he),q.readable}pipeTo(v,T={}){if(!h1(this))return l(Xm("pipeTo"));if(v===void 0)return l("Parameter 1 is required in 'pipeTo'.");if(!A2(v))return l(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let q;try{q=gde(T,"Second parameter")}catch(W){return l(W)}return m1(this)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):C2(v)?l(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):hde(this,v,q.preventClose,q.preventAbort,q.preventCancel,q.signal)}tee(){if(!h1(this))throw Xm("tee");let v=drt(this);return Q(v)}values(v=void 0){if(!h1(this))throw Xm("values");let T=wrt(v,"First parameter");return Qc(this,T.preventCancel)}[ft](v){return this.values(v)}static from(v){return mrt(v)}}Object.defineProperties(no,{from:{enumerable:!0}}),Object.defineProperties(no.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(no.from,"from"),i(no.prototype.cancel,"cancel"),i(no.prototype.getReader,"getReader"),i(no.prototype.pipeThrough,"pipeThrough"),i(no.prototype.pipeTo,"pipeTo"),i(no.prototype.tee,"tee"),i(no.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(no.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(no.prototype,ft,{value:no.prototype.values,writable:!0,configurable:!0});function V4(E,v,T,q=1,W=()=>1){let he=Object.create(no.prototype);_L(he);let _e=Object.create(Ep.prototype);return yde(he,_e,E,v,T,q,W),he}function Ede(E,v,T){let q=Object.create(no.prototype);_L(q);let W=Object.create(yp.prototype);return Hle(q,W,E,v,T,0,void 0),q}function _L(E){E._state="readable",E._reader=void 0,E._storedError=void 0,E._disturbed=!1}function h1(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_readableStreamController")?!1:E instanceof no}function m1(E){return E._reader!==void 0}function Zc(E,v){if(E._disturbed=!0,E._state==="closed")return c(void 0);if(E._state==="errored")return l(E._storedError);G4(E);let T=E._reader;if(T!==void 0&&Wm(T)){let W=T._readIntoRequests;T._readIntoRequests=new O,W.forEach(he=>{he._closeSteps(void 0)})}let q=E._readableStreamController[M](v);return g(q,e)}function G4(E){E._state="closed";let v=E._reader;if(v!==void 0&&(fe(v),He(v))){let T=v._readRequests;v._readRequests=new O,T.forEach(q=>{q._closeSteps()})}}function bde(E,v){E._state="errored",E._storedError=v;let T=E._reader;T!==void 0&&(Ee(T,v),He(T)?Nr(T,v):Qle(T,v))}function Xm(E){return new TypeError(`ReadableStream.prototype.${E} can only be used on a ReadableStream`)}function _de(E,v){Rr(E,v);let T=E?.highWaterMark;return P(T,"highWaterMark","QueuingStrategyInit"),{highWaterMark:$(T)}}let vde=E=>E.byteLength;i(vde,"size");class Q8{constructor(v){tr(v,1,"ByteLengthQueuingStrategy"),v=_de(v,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=v.highWaterMark}get highWaterMark(){if(!wde(this))throw Sde("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!wde(this))throw Sde("size");return vde}}Object.defineProperties(Q8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Q8.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Sde(E){return new TypeError(`ByteLengthQueuingStrategy.prototype.${E} can only be used on a ByteLengthQueuingStrategy`)}function wde(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_byteLengthQueuingStrategyHighWaterMark")?!1:E instanceof Q8}let Ade=()=>1;i(Ade,"size");class X8{constructor(v){tr(v,1,"CountQueuingStrategy"),v=_de(v,"First parameter"),this._countQueuingStrategyHighWaterMark=v.highWaterMark}get highWaterMark(){if(!Tde(this))throw Cde("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Tde(this))throw Cde("size");return Ade}}Object.defineProperties(X8.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(X8.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Cde(E){return new TypeError(`CountQueuingStrategy.prototype.${E} can only be used on a CountQueuingStrategy`)}function Tde(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_countQueuingStrategyHighWaterMark")?!1:E instanceof X8}function Trt(E,v){Rr(E,v);let T=E?.cancel,q=E?.flush,W=E?.readableType,he=E?.start,_e=E?.transform,ze=E?.writableType;return{cancel:T===void 0?void 0:Rrt(T,E,`${v} has member 'cancel' that`),flush:q===void 0?void 0:Ort(q,E,`${v} has member 'flush' that`),readableType:W,start:he===void 0?void 0:xrt(he,E,`${v} has member 'start' that`),transform:_e===void 0?void 0:Irt(_e,E,`${v} has member 'transform' that`),writableType:ze}}function Ort(E,v,T){return _t(E,T),q=>C(E,v,[q])}function xrt(E,v,T){return _t(E,T),q=>w(E,v,[q])}function Irt(E,v,T){return _t(E,T),(q,W)=>C(E,v,[q,W])}function Rrt(E,v,T){return _t(E,T),q=>C(E,v,[q])}class Z8{constructor(v={},T={},q={}){v===void 0&&(v=null);let W=j8(T,"Second parameter"),he=j8(q,"Third parameter"),_e=Trt(v,"First parameter");if(_e.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(_e.writableType!==void 0)throw new RangeError("Invalid writableType specified");let ze=j4(he,0),wt=L8(he),ct=j4(W,1),kt=L8(W),Wt,Qr=u(el=>{Wt=el});Drt(this,Qr,ct,kt,ze,wt),Mrt(this,_e),_e.start!==void 0?Wt(_e.start(this._transformStreamController)):Wt(void 0)}get readable(){if(!Ode(this))throw Dde("readable");return this._readable}get writable(){if(!Ode(this))throw Dde("writable");return this._writable}}Object.defineProperties(Z8.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Z8.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Drt(E,v,T,q,W,he){function _e(){return v}function ze(Qr){return Frt(E,Qr)}function wt(Qr){return Brt(E,Qr)}function ct(){return qrt(E)}E._writable=Ntt(_e,ze,ct,wt,T,q);function kt(){return Lrt(E)}function Wt(Qr){return jrt(E,Qr)}E._readable=V4(_e,kt,Wt,W,he),E._backpressure=void 0,E._backpressureChangePromise=void 0,E._backpressureChangePromise_resolve=void 0,e5(E,!0),E._transformStreamController=void 0}function Ode(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_transformStreamController")?!1:E instanceof Z8}function xde(E,v){Xc(E._readable._readableStreamController,v),vL(E,v)}function vL(E,v){r5(E._transformStreamController),$4(E._writable._writableStreamController,v),SL(E)}function SL(E){E._backpressure&&e5(E,!1)}function e5(E,v){E._backpressureChangePromise!==void 0&&E._backpressureChangePromise_resolve(),E._backpressureChangePromise=u(T=>{E._backpressureChangePromise_resolve=T}),E._backpressure=v}class y1{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!t5(this))throw n5("desiredSize");let v=this._controlledTransformStream._readable._readableStreamController;return bL(v)}enqueue(v=void 0){if(!t5(this))throw n5("enqueue");Ide(this,v)}error(v=void 0){if(!t5(this))throw n5("error");Prt(this,v)}terminate(){if(!t5(this))throw n5("terminate");Nrt(this)}}Object.defineProperties(y1.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(y1.prototype.enqueue,"enqueue"),i(y1.prototype.error,"error"),i(y1.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(y1.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function t5(E){return!r(E)||!Object.prototype.hasOwnProperty.call(E,"_controlledTransformStream")?!1:E instanceof y1}function krt(E,v,T,q,W){v._controlledTransformStream=E,E._transformStreamController=v,v._transformAlgorithm=T,v._flushAlgorithm=q,v._cancelAlgorithm=W,v._finishPromise=void 0,v._finishPromise_resolve=void 0,v._finishPromise_reject=void 0}function Mrt(E,v){let T=Object.create(y1.prototype),q,W,he;v.transform!==void 0?q=_e=>v.transform(_e,T):q=_e=>{try{return Ide(T,_e),c(void 0)}catch(ze){return l(ze)}},v.flush!==void 0?W=()=>v.flush(T):W=()=>c(void 0),v.cancel!==void 0?he=_e=>v.cancel(_e):he=()=>c(void 0),krt(E,T,q,W,he)}function r5(E){E._transformAlgorithm=void 0,E._flushAlgorithm=void 0,E._cancelAlgorithm=void 0}function Ide(E,v){let T=E._controlledTransformStream,q=T._readable._readableStreamController;if(!x2(q))throw new TypeError("Readable side is not in a state that permits enqueue");try{O2(q,v)}catch(he){throw vL(T,he),T._readable._storedError}crt(q)!==T._backpressure&&e5(T,!0)}function Prt(E,v){xde(E._controlledTransformStream,v)}function Rde(E,v){let T=E._transformAlgorithm(v);return g(T,void 0,q=>{throw xde(E._controlledTransformStream,q),q})}function Nrt(E){let v=E._controlledTransformStream,T=v._readable._readableStreamController;Qm(T);let q=new TypeError("TransformStream terminated");vL(v,q)}function Frt(E,v){let T=E._transformStreamController;if(E._backpressure){let q=E._backpressureChangePromise;return g(q,()=>{let W=E._writable;if(W._state==="erroring")throw W._storedError;return Rde(T,v)})}return Rde(T,v)}function Brt(E,v){let T=E._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let q=E._readable;T._finishPromise=u((he,_e)=>{T._finishPromise_resolve=he,T._finishPromise_reject=_e});let W=T._cancelAlgorithm(v);return r5(T),p(W,()=>(q._state==="errored"?I2(T,q._storedError):(Xc(q._readableStreamController,v),wL(T)),null),he=>(Xc(q._readableStreamController,he),I2(T,he),null)),T._finishPromise}function qrt(E){let v=E._transformStreamController;if(v._finishPromise!==void 0)return v._finishPromise;let T=E._readable;v._finishPromise=u((W,he)=>{v._finishPromise_resolve=W,v._finishPromise_reject=he});let q=v._flushAlgorithm();return r5(v),p(q,()=>(T._state==="errored"?I2(v,T._storedError):(Qm(T._readableStreamController),wL(v)),null),W=>(Xc(T._readableStreamController,W),I2(v,W),null)),v._finishPromise}function Lrt(E){return e5(E,!1),E._backpressureChangePromise}function jrt(E,v){let T=E._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let q=E._writable;T._finishPromise=u((he,_e)=>{T._finishPromise_resolve=he,T._finishPromise_reject=_e});let W=T._cancelAlgorithm(v);return r5(T),p(W,()=>(q._state==="errored"?I2(T,q._storedError):($4(q._writableStreamController,v),SL(E),wL(T)),null),he=>($4(q._writableStreamController,he),SL(E),I2(T,he),null)),T._finishPromise}function n5(E){return new TypeError(`TransformStreamDefaultController.prototype.${E} can only be used on a TransformStreamDefaultController`)}function wL(E){E._finishPromise_resolve!==void 0&&(E._finishPromise_resolve(),E._finishPromise_resolve=void 0,E._finishPromise_reject=void 0)}function I2(E,v){E._finishPromise_reject!==void 0&&(_(E._finishPromise),E._finishPromise_reject(v),E._finishPromise_resolve=void 0,E._finishPromise_reject=void 0)}function Dde(E){return new TypeError(`TransformStream.prototype.${E} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Q8,t.CountQueuingStrategy=X8,t.ReadableByteStreamController=yp,t.ReadableStream=no,t.ReadableStreamBYOBReader=p1,t.ReadableStreamBYOBRequest=Gm,t.ReadableStreamDefaultController=Ep,t.ReadableStreamDefaultReader=Se,t.TransformStream=Z8,t.TransformStreamDefaultController=y1,t.WritableStream=f1,t.WritableStreamDefaultController=T2,t.WritableStreamDefaultWriter=gp}))});var tje=m(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,eje())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let a=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=a.byteLength,s.enqueue(new Uint8Array(a)),n===i.size&&s.close()}})})}catch{}});async function*Fie(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let s=Math.min(i-n,rje),o=r.buffer.slice(n,n+s);n+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let o=await i.slice(n,Math.min(i.size,n+rje)).arrayBuffer();n+=o.byteLength,yield new Uint8Array(o)}}}var FDr,rje,nje,eJt,Yl,cA=ce(()=>{FDr=Ct(tje(),1);rje=65536;nje=class Bie{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let s of e){let o;ArrayBuffer.isView(s)?o=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?o=new Uint8Array(s.slice(0)):s instanceof Bie?o=s:o=n.encode(`${s}`),this.#r+=ArrayBuffer.isView(o)?o.byteLength:o.size,this.#e.push(o)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let i=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of Fie(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of Fie(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=Fie(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),o=r<0?Math.max(i+r,0):Math.min(r,i),a=Math.max(o-s,0),u=this.#e,c=[],l=0;for(let p of u){if(l>=a)break;let f=ArrayBuffer.isView(p)?p.byteLength:p.size;if(s&&f<=s)s-=f,o-=f;else{let h;ArrayBuffer.isView(p)?(h=p.subarray(s,Math.min(f,o)),l+=h.byteLength):(h=p.slice(s,Math.min(f,o)),l+=h.size),o-=f,c.push(h),s=0}}let d=new Bie([],{type:String(n).toLowerCase()});return d.#r=a,d.#e=c,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(nje.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});eJt=nje,Yl=eJt});var tJt,rJt,bm,qie=ce(()=>{cA();tJt=class extends Yl{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Yl&&/^(File)$/.test(e[Symbol.toStringTag])}},rJt=tJt,bm=rJt});function oje(t,e=Yl){var r=`${ije()}${ije()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,o)=>typeof s=="string"?n.push(i+Lie(o)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Lie(o)+`"; filename="${Lie(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var lA,nJt,iJt,ije,sJt,sje,Lie,Dg,_m,jP=ce(()=>{cA();qie();({toStringTag:lA,iterator:nJt,hasInstance:iJt}=Symbol),ije=Math.random,sJt="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),sje=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[lA])?[(r=r!==void 0?r+"":e[lA]=="File"?e.name:"blob",t),e.name!==r||e[lA]=="blob"?new bm([e],r,e):e]:[t,e+""]),Lie=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Dg=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},_m=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[lA](){return"FormData"}[nJt](){return this.entries()}static[iJt](e){return e&&typeof e=="object"&&e[lA]==="FormData"&&!sJt.some(r=>typeof e[r]!="function")}append(...e){Dg("append",arguments,2),this.#e.push(sje(...e))}delete(e){Dg("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){Dg("get",arguments,1),e+="";for(var r=this.#e,n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return Dg("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return Dg("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){Dg("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){Dg("set",arguments,2);var r=[],n=!0;e=sje(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Kf,$P=ce(()=>{Kf=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var ta,jie=ce(()=>{$P();ta=class extends Kf{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}});var KP,$ie,dA,aje,uje,cje,UP=ce(()=>{KP=Symbol.toStringTag,$ie=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[KP]==="URLSearchParams",dA=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[KP]),aje=t=>typeof t=="object"&&(t[KP]==="AbortSignal"||t[KP]==="EventTarget"),uje=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},cje=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n}});var dje=m((JDr,lje)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}lje.exports=globalThis.DOMException});var kg,pje,fje,Kie,hje,mje,yje,gje,Eje,bje,VP,Uie=ce(()=>{kg=require("node:fs"),pje=require("node:path"),fje=Ct(dje(),1);qie();cA();({stat:Kie}=kg.promises),hje=(t,e)=>Eje((0,kg.statSync)(t),t,e),mje=(t,e)=>Kie(t).then(r=>Eje(r,t,e)),yje=(t,e)=>Kie(t).then(r=>bje(r,t,e)),gje=(t,e)=>bje((0,kg.statSync)(t),t,e),Eje=(t,e,r="")=>new Yl([new VP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:r}),bje=(t,e,r="")=>new bm([new VP({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],(0,pje.basename)(e),{type:r,lastModified:t.mtimeMs}),VP=class t{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new t({path:this.#e,lastModified:this.lastModified,size:r-e,start:this.#t+e})}async*stream(){let{mtimeMs:e}=await Kie(this.#e);if(e>this.lastModified)throw new fje.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,kg.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var vje={};da(vje,{toFormData:()=>pJt});function dJt(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function pJt(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Vie(r[1]||r[2]),i,s,o,a,u,c,l=[],d=new _m,p=S=>{o+=_.decode(S,{stream:!0})},f=S=>{l.push(S)},h=()=>{let S=new bm(l,c,{type:u});d.append(a,S)},g=()=>{d.append(a,o)},_=new TextDecoder("utf-8");_.decode(),n.onPartBegin=function(){n.onPartData=p,n.onPartEnd=g,i="",s="",o="",a="",u="",c=null,l.length=0},n.onHeaderField=function(S){i+=_.decode(S,{stream:!0})},n.onHeaderValue=function(S){s+=_.decode(S,{stream:!0})},n.onHeaderEnd=function(){if(s+=_.decode(),i=i.toLowerCase(),i==="content-disposition"){let S=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);S&&(a=S[2]||S[3]||""),c=dJt(s),c&&(n.onPartData=f,n.onPartEnd=h)}else i==="content-type"&&(u=s);s="",i=""};for await(let S of t)n.write(S);return n.end(),d}var Zd,vn,_je,vm,GP,HP,oJt,pA,aJt,uJt,cJt,lJt,Mg,Vie,Sje=ce(()=>{Uie();jP();Zd=0,vn={START_BOUNDARY:Zd++,HEADER_FIELD_START:Zd++,HEADER_FIELD:Zd++,HEADER_VALUE_START:Zd++,HEADER_VALUE:Zd++,HEADER_VALUE_ALMOST_DONE:Zd++,HEADERS_ALMOST_DONE:Zd++,PART_DATA_START:Zd++,PART_DATA:Zd++,END:Zd++},_je=1,vm={PART_BOUNDARY:_je,LAST_BOUNDARY:_je*=2},GP=10,HP=13,oJt=32,pA=45,aJt=58,uJt=97,cJt=122,lJt=t=>t|32,Mg=()=>{},Vie=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Mg,this.onHeaderField=Mg,this.onHeadersEnd=Mg,this.onHeaderValue=Mg,this.onPartBegin=Mg,this.onPartData=Mg,this.onPartEnd=Mg,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=vn.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:s,boundary:o,boundaryChars:a,index:u,state:c,flags:l}=this,d=this.boundary.length,p=d-1,f=e.length,h,g,_=A=>{this[A+"Mark"]=r},S=A=>{delete this[A+"Mark"]},w=(A,O,x,R)=>{(O===void 0||O!==x)&&this[A](R&&R.subarray(O,x))},C=(A,O)=>{let x=A+"Mark";x in this&&(O?(w(A,this[x],r,e),delete this[x]):(w(A,this[x],e.length,e),this[x]=0))};for(r=0;r<n;r++)switch(h=e[r],c){case vn.START_BOUNDARY:if(u===o.length-2){if(h===pA)l|=vm.LAST_BOUNDARY;else if(h!==HP)return;u++;break}else if(u-1===o.length-2){if(l&vm.LAST_BOUNDARY&&h===pA)c=vn.END,l=0;else if(!(l&vm.LAST_BOUNDARY)&&h===GP)u=0,w("onPartBegin"),c=vn.HEADER_FIELD_START;else return;break}h!==o[u+2]&&(u=-2),h===o[u+2]&&u++;break;case vn.HEADER_FIELD_START:c=vn.HEADER_FIELD,_("onHeaderField"),u=0;case vn.HEADER_FIELD:if(h===HP){S("onHeaderField"),c=vn.HEADERS_ALMOST_DONE;break}if(u++,h===pA)break;if(h===aJt){if(u===1)return;C("onHeaderField",!0),c=vn.HEADER_VALUE_START;break}if(g=lJt(h),g<uJt||g>cJt)return;break;case vn.HEADER_VALUE_START:if(h===oJt)break;_("onHeaderValue"),c=vn.HEADER_VALUE;case vn.HEADER_VALUE:h===HP&&(C("onHeaderValue",!0),w("onHeaderEnd"),c=vn.HEADER_VALUE_ALMOST_DONE);break;case vn.HEADER_VALUE_ALMOST_DONE:if(h!==GP)return;c=vn.HEADER_FIELD_START;break;case vn.HEADERS_ALMOST_DONE:if(h!==GP)return;w("onHeadersEnd"),c=vn.PART_DATA_START;break;case vn.PART_DATA_START:c=vn.PART_DATA,_("onPartData");case vn.PART_DATA:if(i=u,u===0){for(r+=p;r<f&&!(e[r]in a);)r+=d;r-=p,h=e[r]}if(u<o.length)o[u]===h?(u===0&&C("onPartData",!0),u++):u=0;else if(u===o.length)u++,h===HP?l|=vm.PART_BOUNDARY:h===pA?l|=vm.LAST_BOUNDARY:u=0;else if(u-1===o.length)if(l&vm.PART_BOUNDARY){if(u=0,h===GP){l&=~vm.PART_BOUNDARY,w("onPartEnd"),w("onPartBegin"),c=vn.HEADER_FIELD_START;break}}else l&vm.LAST_BOUNDARY&&h===pA?(w("onPartEnd"),c=vn.END,l=0):u=0;if(u>0)s[u-1]=h;else if(i>0){let A=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);w("onPartData",0,i,A),i=0,_("onPartData"),r--}break;case vn.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}C("onHeaderField"),C("onHeaderValue"),C("onPartData"),this.index=u,this.state=c,this.flags=l}end(){if(this.state===vn.HEADER_FIELD_START&&this.index===0||this.state===vn.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==vn.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function Gie(t){if(t[Ha].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Ha].disturbed=!0,t[Ha].error)throw t[Ha].error;let{body:e}=t;if(e===null)return bu.Buffer.alloc(0);if(!(e instanceof Fc.default))return bu.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let s=new ta(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Kf?i:new ta(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?bu.Buffer.from(r.join("")):bu.Buffer.concat(r,n)}catch(i){throw new ta(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new ta(`Premature close of server response while trying to fetch ${t.url}`)}var Fc,Uf,bu,fJt,Ha,ep,M_,hJt,zP,wje,Aje,WP=ce(()=>{Fc=Ct(require("node:stream"),1),Uf=require("node:util"),bu=require("node:buffer");cA();jP();jie();$P();UP();fJt=(0,Uf.promisify)(Fc.default.pipeline),Ha=Symbol("Body internals"),ep=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:$ie(e)?e=bu.Buffer.from(e.toString()):dA(e)||bu.Buffer.isBuffer(e)||(Uf.types.isAnyArrayBuffer(e)?e=bu.Buffer.from(e):ArrayBuffer.isView(e)?e=bu.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Fc.default||(e instanceof _m?(e=oje(e),n=e.type.split("=")[1]):e=bu.Buffer.from(String(e))));let i=e;bu.Buffer.isBuffer(e)?i=Fc.default.Readable.from(e):dA(e)&&(i=Fc.default.Readable.from(e.stream())),this[Ha]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Fc.default&&e.on("error",s=>{let o=s instanceof Kf?s:new ta(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[Ha].error=o})}get body(){return this[Ha].stream}get bodyUsed(){return this[Ha].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await Gie(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new _m,i=new URLSearchParams(await this.text());for(let[s,o]of i)n.append(s,o);return n}let{toFormData:r}=await Promise.resolve().then(()=>(Sje(),vje));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Ha].body&&this[Ha].body.type||"",r=await this.arrayBuffer();return new Yl([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Gie(this);return new TextDecoder().decode(e)}buffer(){return Gie(this)}};ep.prototype.buffer=(0,Uf.deprecate)(ep.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ep.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Uf.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});M_=(t,e)=>{let r,n,{body:i}=t[Ha];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Fc.default&&typeof i.getBoundary!="function"&&(r=new Fc.PassThrough({highWaterMark:e}),n=new Fc.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Ha].stream=r,i=n),i},hJt=(0,Uf.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),zP=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":$ie(t)?"application/x-www-form-urlencoded;charset=UTF-8":dA(t)?t.type||null:bu.Buffer.isBuffer(t)||Uf.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof _m?`multipart/form-data; boundary=${e[Ha].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${hJt(t)}`:t instanceof Fc.default?null:"text/plain;charset=UTF-8",wje=t=>{let{body:e}=t[Ha];return e===null?0:dA(e)?e.size:bu.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},Aje=async(t,{body:e})=>{e===null?t.end():await fJt(e,t)}});function Cje(t=[]){return new za(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return JP(e),zie(e,String(r)),!0}catch{return!1}}))}var Hie,fA,JP,zie,za,YP=ce(()=>{Hie=require("node:util"),fA=Ct(require("node:http"),1),JP=typeof fA.default.validateHeaderName=="function"?fA.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},zie=typeof fA.default.validateHeaderValue=="function"?fA.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},za=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,s]of Object.entries(n))r.push(...s.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!Hie.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Hie.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(JP(n),zie(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(o,a)=>(JP(o),zie(o,String(a)),URLSearchParams.prototype[i].call(n,String(o).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return o=>(JP(o),URLSearchParams.prototype[i].call(n,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(za.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}))});var mJt,hA,Wie=ce(()=>{mJt=new Set([301,302,303,307,308]),hA=t=>mJt.has(t)});var Ql,_u,Tje=ce(()=>{YP();WP();Wie();Ql=Symbol("Response internals"),_u=class t extends ep{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new za(r.headers);if(e!==null&&!i.has("Content-Type")){let s=zP(e,this);s&&i.append("Content-Type",s)}this[Ql]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Ql].type}get url(){return this[Ql].url||""}get status(){return this[Ql].status}get ok(){return this[Ql].status>=200&&this[Ql].status<300}get redirected(){return this[Ql].counter>0}get statusText(){return this[Ql].statusText}get headers(){return this[Ql].headers}get highWaterMark(){return this[Ql].highWaterMark}clone(){return new t(M_(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!hA(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[Ql].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new za(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(_u.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var Oje,xje=ce(()=>{Oje=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""}});function Ije(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function Mje(t){if(!Dje.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function yJt(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,Rje.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function P_(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:yJt(t)}function Pje(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,s=Ije(i),o=Ije(i,!0);s.toString().length>4096&&(s=o),e&&(s=e(s)),r&&(o=r(o));let a=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return o;case"unsafe-url":return s;case"strict-origin":return P_(s)&&!P_(a)?"no-referrer":o.toString();case"strict-origin-when-cross-origin":return s.origin===a.origin?s:P_(s)&&!P_(a)?"no-referrer":o;case"same-origin":return s.origin===a.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===a.origin?s:o;case"no-referrer-when-downgrade":return P_(s)&&!P_(a)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function Nje(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&Dje.has(n)&&(r=n);return r}var Rje,Dje,kje,Jie=ce(()=>{Rje=require("node:net");Dje=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),kje="strict-origin-when-cross-origin"});var Fje,Bje,xs,mA,gJt,Sm,qje,Lje=ce(()=>{Fje=require("node:url"),Bje=require("node:util");YP();WP();UP();xje();Jie();xs=Symbol("Request internals"),mA=t=>typeof t=="object"&&typeof t[xs]=="object",gJt=(0,Bje.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Sm=class t extends ep{constructor(e,r={}){let n;if(mA(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!mA(r)&&"data"in r&&gJt(),(r.body!=null||mA(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:mA(e)&&e.body!==null?M_(e):null;super(s,{size:r.size||e.size||0});let o=new za(r.headers||e.headers||{});if(s!==null&&!o.has("Content-Type")){let c=zP(s,this);c&&o.set("Content-Type",c)}let a=mA(e)?e.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!aje(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let u=r.referrer==null?e.referrer:r.referrer;if(u==="")u="no-referrer";else if(u){let c=new URL(u);u=/^about:(\/\/)?client$/.test(c)?"client":c}else u=void 0;this[xs]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:a,referrer:u},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[xs].method}get url(){return(0,Fje.format)(this[xs].parsedURL)}get headers(){return this[xs].headers}get redirect(){return this[xs].redirect}get signal(){return this[xs].signal}get referrer(){if(this[xs].referrer==="no-referrer")return"";if(this[xs].referrer==="client")return"about:client";if(this[xs].referrer)return this[xs].referrer.toString()}get referrerPolicy(){return this[xs].referrerPolicy}set referrerPolicy(e){this[xs].referrerPolicy=Mje(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Sm.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});qje=t=>{let{parsedURL:e}=t[xs],r=new za(t[xs].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let a=wje(t);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=kje),t.referrer&&t.referrer!=="no-referrer"?t[xs].referrer=Pje(t):t[xs].referrer="no-referrer",t[xs].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e));let s=Oje(e),o={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:o}}});var yA,jje=ce(()=>{$P();yA=class extends Kf{constructor(e,r="aborted"){super(e,r)}}});var Uje={};da(Uje,{AbortError:()=>yA,Blob:()=>Yl,FetchError:()=>ta,File:()=>bm,FormData:()=>_m,Headers:()=>za,Request:()=>Sm,Response:()=>_u,blobFrom:()=>mje,blobFromSync:()=>hje,default:()=>Yie,fileFrom:()=>yje,fileFromSync:()=>gje,isRedirect:()=>hA});async function Yie(t,e){return new Promise((r,n)=>{let i=new Sm(t,e),{parsedURL:s,options:o}=qje(i);if(!EJt.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let h=QLe(i.url),g=new _u(h,{headers:{"Content-Type":h.typeFull}});r(g);return}let a=(s.protocol==="https:"?Kje.default:$je.default).request,{signal:u}=i,c=null,l=()=>{let h=new yA("The operation was aborted.");n(h),i.body&&i.body instanceof vu.default.Readable&&i.body.destroy(h),!(!c||!c.body)&&c.body.emit("error",h)};if(u&&u.aborted){l();return}let d=()=>{l(),f()},p=a(s.toString(),o);u&&u.addEventListener("abort",d);let f=()=>{p.abort(),u&&u.removeEventListener("abort",d)};p.on("error",h=>{n(new ta(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),f()}),bJt(p,h=>{c&&c.body&&c.body.destroy(h)}),process.version<"v14"&&p.on("socket",h=>{let g;h.prependListener("end",()=>{g=h._eventsCount}),h.prependListener("close",_=>{if(c&&g<h._eventsCount&&!_){let S=new Error("Premature close");S.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",S)}})}),p.on("response",h=>{p.setTimeout(0);let g=Cje(h.rawHeaders);if(hA(h.statusCode)){let A=g.get("Location"),O=null;try{O=A===null?null:new URL(A,i.url)}catch{if(i.redirect!=="manual"){n(new ta(`uri requested responds with an invalid redirect URL: ${A}`,"invalid-redirect")),f();return}}switch(i.redirect){case"error":n(new ta(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":break;case"follow":{if(O===null)break;if(i.counter>=i.follow){n(new ta(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}let x={headers:new za(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:M_(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!uje(i.url,O)||!cje(i.url,O))for(let M of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(M);if(h.statusCode!==303&&i.body&&e.body instanceof vu.default.Readable){n(new ta("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));let R=Nje(g);R&&(x.referrerPolicy=R),r(Yie(new Sm(O,x))),f();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}u&&h.once("end",()=>{u.removeEventListener("abort",d)});let _=(0,vu.pipeline)(h,new vu.PassThrough,A=>{A&&n(A)});process.version<"v12.10"&&h.on("aborted",d);let S={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:g,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},w=g.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||w===null||h.statusCode===204||h.statusCode===304){c=new _u(_,S),r(c);return}let C={flush:Pg.default.Z_SYNC_FLUSH,finishFlush:Pg.default.Z_SYNC_FLUSH};if(w==="gzip"||w==="x-gzip"){_=(0,vu.pipeline)(_,Pg.default.createGunzip(C),A=>{A&&n(A)}),c=new _u(_,S),r(c);return}if(w==="deflate"||w==="x-deflate"){let A=(0,vu.pipeline)(h,new vu.PassThrough,O=>{O&&n(O)});A.once("data",O=>{(O[0]&15)===8?_=(0,vu.pipeline)(_,Pg.default.createInflate(),x=>{x&&n(x)}):_=(0,vu.pipeline)(_,Pg.default.createInflateRaw(),x=>{x&&n(x)}),c=new _u(_,S),r(c)}),A.once("end",()=>{c||(c=new _u(_,S),r(c))});return}if(w==="br"){_=(0,vu.pipeline)(_,Pg.default.createBrotliDecompress(),A=>{A&&n(A)}),c=new _u(_,S),r(c);return}c=new _u(_,S),r(c)}),Aje(p,i).catch(n)})}function bJt(t,e){let r=gA.Buffer.from(`0\r
\r
`),n=!1,i=!1,s;t.on("response",o=>{let{headers:a}=o;n=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),t.on("socket",o=>{let a=()=>{if(n&&!i){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}},u=c=>{i=gA.Buffer.compare(c.slice(-5),r)===0,!i&&s&&(i=gA.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&gA.Buffer.compare(c.slice(-2),r.slice(3))===0),s=c};o.prependListener("close",a),o.on("data",u),t.on("close",()=>{o.removeListener("close",a),o.removeListener("data",u)})})}var $je,Kje,Pg,vu,gA,EJt,Vje=ce(()=>{$je=Ct(require("node:http"),1),Kje=Ct(require("node:https"),1),Pg=Ct(require("node:zlib"),1),vu=Ct(require("node:stream"),1),gA=require("node:buffer");XLe();WP();Tje();YP();Lje();jie();jje();Wie();jP();UP();Jie();Uie();EJt=new Set(["data:","http:","https:"])});var zje=m(F_=>{"use strict";var _Jt=F_&&F_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},N_;Object.defineProperty(F_,"__esModule",{value:!0});F_.Gaxios=void 0;var vJt=_Jt(gC()),SJt=require("https"),Ng=xie(),wJt=RLe(),Gje=require("stream"),Hje=Die(),AJt=async()=>globalThis.crypto?.randomUUID()||(await import("crypto")).randomUUID(),QP=class{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new Hje.GaxiosInterceptorManager,response:new Hje.GaxiosInterceptorManager}}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&N_.mergeHeaders(s,r.headers),n&&N_.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}async request(e={}){let r=await this.#n(e);return r=await this.#t(r),this.#r(this._request(r))}async _defaultAdapter(e){let r=e.fetchImplementation||this.defaults.fetchImplementation||await N_.#u(),n={...e};delete n.data;let i=await r(e.url,n),s=await this.getResponseData(e,i);return Object.getOwnPropertyDescriptor(i,"data")?.configurable||Object.defineProperties(i,{data:{configurable:!0,writable:!0,enumerable:!0,value:s}}),Object.assign(i,{config:e,data:s})}async _request(e){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let i=[];for await(let s of r.data)i.push(s);r.data=i.toString()}let n=Ng.GaxiosError.extractAPIErrorFromResponse(r,`Request failed with status code ${r.status}`);throw new Ng.GaxiosError(n?.message,e,r,n)}return r}catch(r){let n;r instanceof Ng.GaxiosError?n=r:r instanceof Error?n=new Ng.GaxiosError(r.message,e,void 0,r):n=new Ng.GaxiosError("Unexpected Gaxios Error",e,void 0,r);let{shouldRetry:i,config:s}=await(0,wJt.getRetryConfig)(n);if(i&&s)return n.config.retryConfig.currentRetryAttempt=s.retryConfig.currentRetryAttempt,e.retryConfig=n.config?.retryConfig,this.#i(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(n),n}}async getResponseData(e,r){if(e.maxContentLength&&r.headers.has("content-length")&&e.maxContentLength<Number.parseInt(r.headers?.get("content-length")||""))throw new Ng.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(r,{config:e}));switch(e.responseType){case"stream":return r.body;case"json":return r.json();case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"text":return r.text();default:return this.getResponseDataFromContentType(r)}}#e(e,r=[]){let n=new URL(e),i=[...r],s=(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[];for(let o of s)i.push(o.trim());for(let o of i)if(o instanceof RegExp){if(o.test(n.toString()))return!1}else if(o instanceof URL){if(o.origin===n.origin)return!1}else if(o.startsWith("*.")||o.startsWith(".")){let a=o.replace(/^\*\./,".");if(n.hostname.endsWith(a))return!1}else if(o===n.origin||o===n.hostname||o===n.href)return!1;return!0}async#t(e){let r=Promise.resolve(e);for(let n of this.interceptors.request.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#r(e){let r=Promise.resolve(e);for(let n of this.interceptors.response.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#n(e){let r=new Headers(this.defaults.headers);N_.mergeHeaders(r,e.headers);let n=(0,vJt.default)(!0,{},this.defaults,e);if(!n.url)throw new Error("URL is required.");if(n.baseURL&&(n.url=new URL(n.url,n.baseURL)),n.url=new URL(n.url),n.params)if(n.paramsSerializer){let o=n.paramsSerializer(n.params);o.startsWith("?")&&(o=o.slice(1));let a=n.url.toString().includes("?")?"&":"?";n.url=n.url+a+o}else{let o=n.url instanceof URL?n.url:new URL(n.url);for(let[a,u]of new URLSearchParams(n.params))o.searchParams.append(a,u);n.url=o}typeof e.maxContentLength=="number"&&(n.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(n.follow=e.maxRedirects);let i=typeof n.data=="string"||n.data instanceof ArrayBuffer||n.data instanceof Blob||globalThis.File&&n.data instanceof File||n.data instanceof FormData||n.data instanceof Gje.Readable||n.data instanceof ReadableStream||n.data instanceof String||n.data instanceof URLSearchParams||ArrayBuffer.isView(n.data)||["Blob","File","FormData"].includes(n.data?.constructor?.name||"");if(n.multipart?.length){let o=await AJt();r.set("content-type",`multipart/related; boundary=${o}`),n.body=Gje.Readable.from(this.getMultipartRequest(n.multipart,o))}else i?n.body=n.data:typeof n.data=="object"?r.get("Content-Type")==="application/x-www-form-urlencoded"?n.body=n.paramsSerializer?n.paramsSerializer(n.data):new URLSearchParams(n.data):(r.has("content-type")||r.set("content-type","application/json"),n.body=JSON.stringify(n.data)):n.data&&(n.body=n.data);n.validateStatus=n.validateStatus||this.validateStatus,n.responseType=n.responseType||"unknown",!r.has("accept")&&n.responseType==="json"&&r.set("accept","application/json");let s=n.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(!n.agent)if(s&&this.#e(n.url,n.noProxy)){let o=await N_.#a();this.agentCache.has(s)?n.agent=this.agentCache.get(s):(n.agent=new o(s,{cert:n.cert,key:n.key}),this.agentCache.set(s,n.agent))}else n.cert&&n.key&&(this.agentCache.has(n.key)?n.agent=this.agentCache.get(n.key):(n.agent=new SJt.Agent({cert:n.cert,key:n.key}),this.agentCache.set(n.key,n.agent)));return typeof n.errorRedactor!="function"&&n.errorRedactor!==!1&&(n.errorRedactor=Ng.defaultErrorRedactor),n.body&&!("duplex"in n)&&(n.duplex="half"),this.#i(n),Object.assign(n,{headers:r,url:n.url instanceof URL?n.url:new URL(n.url)})}#i(e){if(e.timeout){let r=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,r]):e.signal=r}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let r=e.headers.get("Content-Type");if(r===null)return e.text();if(r=r.toLowerCase(),r.includes("application/json")){let n=await e.text();try{n=JSON.parse(n)}catch{}return n}else return r.match(/^text\//)?e.text():e.blob()}async*getMultipartRequest(e,r){let n=`--${r}--`;for(let i of e){let s=i.headers.get("Content-Type")||"application/octet-stream";yield`--${r}\r
Content-Type: ${s}\r
\r
`,typeof i.content=="string"?yield i.content:yield*i.content,yield`\r
`}yield n}static#s;static#o;static async#a(){return this.#s||=(await Promise.resolve().then(()=>Ct(YLe()))).HttpsProxyAgent,this.#s}static async#u(){let e=typeof window<"u"&&!!window;return this.#o||=e?window.fetch:(await Promise.resolve().then(()=>(Vje(),Uje))).default,this.#o}static mergeHeaders(e,...r){e=e instanceof Headers?e:new Headers(e);for(let n of r)(n instanceof Headers?n:new Headers(n)).forEach((s,o)=>{o==="set-cookie"?e.append(o,s):e.set(o,s)});return e}};F_.Gaxios=QP;N_=QP});var to=m(ra=>{"use strict";var CJt=ra&&ra.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),TJt=ra&&ra.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&CJt(e,t,r)};Object.defineProperty(ra,"__esModule",{value:!0});ra.instance=ra.Gaxios=ra.GaxiosError=void 0;ra.request=xJt;var Wje=zje();Object.defineProperty(ra,"Gaxios",{enumerable:!0,get:function(){return Wje.Gaxios}});var OJt=xie();Object.defineProperty(ra,"GaxiosError",{enumerable:!0,get:function(){return OJt.GaxiosError}});TJt(Die(),ra);ra.instance=new Wje.Gaxios;async function xJt(t){return ra.instance.request(t)}});var Qie=m(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.GCE_LINUX_BIOS_PATHS=void 0;Xl.isGoogleCloudServerless=Qje;Xl.isGoogleComputeEngineLinux=Xje;Xl.isGoogleComputeEngineMACAddress=Zje;Xl.isGoogleComputeEngine=e$e;Xl.detectGCPResidency=RJt;var Jje=require("fs"),Yje=require("os");Xl.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var IJt=/^42:01/;function Qje(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function Xje(){if((0,Yje.platform)()!=="linux")return!1;try{(0,Jje.statSync)(Xl.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,Jje.readFileSync)(Xl.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}function Zje(){let t=(0,Yje.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(IJt.test(r))return!0}return!1}function e$e(){return Xje()||Zje()}function RJt(){return Qje()||e$e()}});var t$e=m(XP=>{"use strict";Object.defineProperty(XP,"__esModule",{value:!0});XP.Colours=void 0;var Co=class t{static isEnabled(e){return e&&e.isTTY&&(typeof e.getColorDepth=="function"?e.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process==null?void 0:process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}};XP.Colours=Co;Co.enabled=!1;Co.reset="";Co.bright="";Co.dim="";Co.red="";Co.green="";Co.yellow="";Co.blue="";Co.magenta="";Co.cyan="";Co.white="";Co.grey="";Co.refresh()});var s$e=m(Yr=>{"use strict";var DJt=Yr&&Yr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),kJt=Yr&&Yr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),r$e=Yr&&Yr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&DJt(r,e,n[i]);return kJt(r,e),r}})();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.env=Yr.DebugLogBackendBase=Yr.placeholder=Yr.AdhocDebugLogger=Yr.LogSeverity=void 0;Yr.getNodeBackend=Zie;Yr.getDebugBackend=PJt;Yr.getStructuredBackend=NJt;Yr.setBackend=FJt;Yr.log=i$e;var MJt=require("events"),EA=r$e(require("process")),n$e=r$e(require("util")),Su=t$e(),Zl;(function(t){t.DEFAULT="DEFAULT",t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR"})(Zl||(Yr.LogSeverity=Zl={}));var bA=class extends MJt.EventEmitter{constructor(e,r){super(),this.namespace=e,this.upstream=r,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(n,i)=>this.on(n,i)}),this.func.debug=(...n)=>this.invokeSeverity(Zl.DEBUG,...n),this.func.info=(...n)=>this.invokeSeverity(Zl.INFO,...n),this.func.warn=(...n)=>this.invokeSeverity(Zl.WARNING,...n),this.func.error=(...n)=>this.invokeSeverity(Zl.ERROR,...n),this.func.sublog=n=>i$e(n,this.func)}invoke(e,...r){if(this.upstream)try{this.upstream(e,...r)}catch{}try{this.emit("log",e,r)}catch{}}invokeSeverity(e,...r){this.invoke({severity:e},...r)}};Yr.AdhocDebugLogger=bA;Yr.placeholder=new bA("",()=>{}).func;var B_=class{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let r=(e=EA.env[Yr.env.nodeEnables])!==null&&e!==void 0?e:"*";r==="all"&&(r="*"),this.filters=r.split(",")}log(e,r,...n){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let i=this.cached.get(e);i||(i=this.makeLogger(e),this.cached.set(e,i)),i(r,...n)}catch(i){console.error(i)}}};Yr.DebugLogBackendBase=B_;var Xie=class extends B_{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(r,...n)=>{var i;let s=`${Su.Colours.green}${e}${Su.Colours.reset}`,o=`${Su.Colours.yellow}${EA.pid}${Su.Colours.reset}`,a;switch(r.severity){case Zl.ERROR:a=`${Su.Colours.red}${r.severity}${Su.Colours.reset}`;break;case Zl.INFO:a=`${Su.Colours.magenta}${r.severity}${Su.Colours.reset}`;break;case Zl.WARNING:a=`${Su.Colours.yellow}${r.severity}${Su.Colours.reset}`;break;default:a=(i=r.severity)!==null&&i!==void 0?i:Zl.DEFAULT;break}let u=n$e.formatWithOptions({colors:Su.Colours.enabled},...n),c=Object.assign({},r);delete c.severity;let l=Object.getOwnPropertyNames(c).length?JSON.stringify(c):"",d=l?`${Su.Colours.grey}${l}${Su.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",o,s,a,u,l?` ${d}`:"")}:()=>{}}setFilters(){let r=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${r}$`,"i")}};function Zie(){return new Xie}var ese=class extends B_{constructor(e){super(),this.debugPkg=e}makeLogger(e){let r=this.debugPkg(e);return(n,...i)=>{r(i[0],...i.slice(1))}}setFilters(){var e;let r=(e=EA.env.NODE_DEBUG)!==null&&e!==void 0?e:"";EA.env.NODE_DEBUG=`${r}${r?",":""}${this.filters.join(",")}`}};function PJt(t){return new ese(t)}var tse=class extends B_{constructor(e){var r;super(),this.upstream=(r=e)!==null&&r!==void 0?r:void 0}makeLogger(e){var r;let n=(r=this.upstream)===null||r===void 0?void 0:r.makeLogger(e);return(i,...s)=>{var o;let a=(o=i.severity)!==null&&o!==void 0?o:Zl.INFO,u=Object.assign({severity:a,message:n$e.format(...s)},i),c=JSON.stringify(u);n?n(i,c):console.log("%s",c)}}setFilters(){var e;(e=this.upstream)===null||e===void 0||e.setFilters()}};function NJt(t){return new tse(t)}Yr.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var rse=new Map,wu;function FJt(t){wu=t,rse.clear()}function i$e(t,e){if(!wu&&!EA.env[Yr.env.nodeEnables]||!t)return Yr.placeholder;e&&(t=`${e.instance.namespace}:${t}`);let r=rse.get(t);if(r)return r.func;if(wu===null)return Yr.placeholder;wu===void 0&&(wu=Zie());let n=(()=>{let i;return new bA(t,(o,...a)=>{if(i!==wu){if(wu===null)return;wu===void 0&&(wu=Zie()),i=wu}wu?.log(t,o,...a)})})();return rse.set(t,n),n.func}});var nse=m(Fg=>{"use strict";var BJt=Fg&&Fg.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),qJt=Fg&&Fg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BJt(e,t,r)};Object.defineProperty(Fg,"__esModule",{value:!0});qJt(s$e(),Fg)});var vA=m(yt=>{"use strict";var a$e=yt&&yt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),LJt=yt&&yt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),jJt=yt&&yt.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&a$e(r,e,n[i]);return LJt(r,e),r}})(),$Jt=yt&&yt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&a$e(e,t,r)};Object.defineProperty(yt,"__esModule",{value:!0});yt.gcpResidencyCache=yt.METADATA_SERVER_DETECTION=yt.HEADERS=yt.HEADER_VALUE=yt.HEADER_NAME=yt.SECONDARY_HOST_ADDRESS=yt.HOST_ADDRESS=yt.BASE_PATH=void 0;yt.instance=zJt;yt.project=WJt;yt.universe=JJt;yt.bulk=YJt;yt.isAvailable=XJt;yt.resetIsAvailableCache=ZJt;yt.getGCPResidency=ose;yt.setGCPResidency=u$e;yt.requestTimeout=c$e;var ise=to(),KJt=HK(),UJt=Qie(),VJt=jJt(nse());yt.BASE_PATH="/computeMetadata/v1";yt.HOST_ADDRESS="http://169.254.169.254";yt.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";yt.HEADER_NAME="Metadata-Flavor";yt.HEADER_VALUE="Google";yt.HEADERS=Object.freeze({[yt.HEADER_NAME]:yt.HEADER_VALUE});var o$e=VJt.log("gcp-metadata");yt.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function sse(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||yt.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(yt.BASE_PATH,t).href}function GJt(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function _A(t,e={},r=3,n=!1){let i=new Headers(yt.HEADERS),s="",o={};if(typeof t=="object"){let d=t;new Headers(d.headers).forEach((p,f)=>i.set(f,p)),s=d.metadataKey,o=d.params||o,r=d.noResponseRetries||r,n=d.fastFail||n}else s=t;typeof e=="string"?s+=`/${e}`:(GJt(e),e.property&&(s+=`/${e.property}`),new Headers(e.headers).forEach((d,p)=>i.set(p,d)),o=e.params||o);let a=n?HJt:ise.request,u={url:`${sse()}/${s}`,headers:i,retryConfig:{noResponseRetries:r},params:o,responseType:"text",timeout:c$e()};o$e.info("instance request %j",u);let c=await a(u);o$e.info("instance metadata is %s",c.data);let l=c.headers.get(yt.HEADER_NAME);if(l!==yt.HEADER_VALUE)throw new RangeError(`Invalid response from metadata service: incorrect ${yt.HEADER_NAME} header. Expected '${yt.HEADER_VALUE}', got ${l?`'${l}'`:"no header"}`);if(typeof c.data=="string")try{return KJt.parse(c.data)}catch{}return c.data}async function HJt(t){let e={...t,url:t.url?.toString().replace(sse(),sse(yt.SECONDARY_HOST_ADDRESS))},r=(0,ise.request)(t),n=(0,ise.request)(e);return Promise.any([r,n])}function zJt(t){return _A("instance",t)}function WJt(t){return _A("project",t)}function JJt(t){return _A("universe",t)}async function YJt(t){let e={};return await Promise.all(t.map(r=>(async()=>{let n=await _A(r),i=r.metadataKey;e[i]=n})())),e}function QJt(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var ZP;async function XJt(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in yt.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(yt.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return ose();case"ping-only":}}try{return ZP===void 0&&(ZP=_A("instance",void 0,QJt(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await ZP,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let r="UNKNOWN";e.code&&(r=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}function ZJt(){ZP=void 0}yt.gcpResidencyCache=null;function ose(){return yt.gcpResidencyCache===null&&u$e(),yt.gcpResidencyCache}function u$e(t=null){yt.gcpResidencyCache=t!==null?t:(0,UJt.detectGCPResidency)()}function c$e(){return ose()?0:3e3}$Jt(Qie(),yt)});var p$e=m(eN=>{"use strict";eN.byteLength=tYt;eN.toByteArray=nYt;eN.fromByteArray=oYt;var tp=[],Bc=[],eYt=typeof Uint8Array<"u"?Uint8Array:Array,ase="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Bg=0,l$e=ase.length;Bg<l$e;++Bg)tp[Bg]=ase[Bg],Bc[ase.charCodeAt(Bg)]=Bg;var Bg,l$e;Bc[45]=62;Bc[95]=63;function d$e(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function tYt(t){var e=d$e(t),r=e[0],n=e[1];return(r+n)*3/4-n}function rYt(t,e,r){return(e+r)*3/4-r}function nYt(t){var e,r=d$e(t),n=r[0],i=r[1],s=new eYt(rYt(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Bc[t.charCodeAt(u)]<<18|Bc[t.charCodeAt(u+1)]<<12|Bc[t.charCodeAt(u+2)]<<6|Bc[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Bc[t.charCodeAt(u)]<<2|Bc[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Bc[t.charCodeAt(u)]<<10|Bc[t.charCodeAt(u+1)]<<4|Bc[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function iYt(t){return tp[t>>18&63]+tp[t>>12&63]+tp[t>>6&63]+tp[t&63]}function sYt(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(iYt(n));return i.join("")}function oYt(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(sYt(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(tp[e>>2]+tp[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(tp[e>>10]+tp[e>>4&63]+tp[e<<2&63]+"=")),i.join("")}});var cse=m(use=>{"use strict";Object.defineProperty(use,"__esModule",{value:!0});use.fromArrayBufferToHex=aYt;function aYt(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}});var f$e=m(tN=>{"use strict";Object.defineProperty(tN,"__esModule",{value:!0});tN.BrowserCrypto=void 0;var q_=p$e(),uYt=cse(),lse=class t{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return q_.fromByteArray(new Uint8Array(n))}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),q_.fromByteArray(r)}static padBase64(e){for(;e.length%4!==0;)e+="=";return e}async verify(e,r,n){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s=new TextEncoder().encode(r),o=q_.toByteArray(t.padBase64(n)),a=await window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return await window.crypto.subtle.verify(i,a,o,s)}async sign(e,r){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),s=await window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),o=await window.crypto.subtle.sign(n,s,i);return q_.fromByteArray(new Uint8Array(o))}decodeBase64StringUtf8(e){let r=q_.toByteArray(t.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return q_.fromByteArray(r)}async sha256DigestHex(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return(0,uYt.fromArrayBufferToHex)(n)}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,s=await window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",s,i.encode(r))}};tN.BrowserCrypto=lse});var h$e=m(rN=>{"use strict";Object.defineProperty(rN,"__esModule",{value:!0});rN.NodeCrypto=void 0;var L_=require("crypto"),dse=class{async sha256DigestBase64(e){return L_.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return L_.randomBytes(e).toString("base64")}async verify(e,r,n){let i=L_.createVerify("RSA-SHA256");return i.update(r),i.end(),i.verify(e,n,"base64")}async sign(e,r){let n=L_.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return L_.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:lYt(e);return cYt(L_.createHmac("sha256",n).update(r).digest())}};rN.NodeCrypto=dse;function cYt(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function lYt(t){return Buffer.from(t)}});var SA=m(Vf=>{"use strict";var dYt=Vf&&Vf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pYt=Vf&&Vf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&dYt(e,t,r)};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.createCrypto=mYt;Vf.hasBrowserCrypto=m$e;var fYt=f$e(),hYt=h$e();pYt(cse(),Vf);function mYt(){return m$e()?new fYt.BrowserCrypto:new hYt.NodeCrypto}function m$e(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}});var ed=m(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.LRUCache=void 0;Gf.snakeToCamel=g$e;Gf.originalOrCamelOptions=bYt;Gf.removeUndefinedValuesInObject=_Yt;Gf.isValidFile=vYt;Gf.getWellKnownCertificateConfigFileLocation=SYt;var yYt=require("fs"),gYt=require("os"),pse=require("path"),EYt="certificate_config.json",y$e="gcloud";function g$e(t){return t.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}function bYt(t){function e(r){let n=t||{};return n[r]??n[g$e(r)]}return{get:e}}var fse=class{capacity;#e=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#t(e,r){this.#e.delete(e),this.#e.set(e,{value:r,lastAccessed:Date.now()})}set(e,r){this.#t(e,r),this.#r()}get(e){let r=this.#e.get(e);if(r)return this.#t(e,r.value),this.#r(),r.value}#r(){let e=this.maxAge?Date.now()-this.maxAge:0,r=this.#e.entries().next();for(;!r.done&&(this.#e.size>this.capacity||r.value[1].lastAccessed<e);)this.#e.delete(r.value[0]),r=this.#e.entries().next()}};Gf.LRUCache=fse;function _Yt(t){return Object.entries(t).forEach(([e,r])=>{(r===void 0||r==="undefined")&&delete t[e]}),t}async function vYt(t){try{return(await yYt.promises.lstat(t)).isFile()}catch{return!1}}function SYt(){let t=process.env.CLOUDSDK_CONFIG||(wYt()?pse.join(process.env.APPDATA||"",y$e):pse.join(process.env.HOME||"",".config",y$e));return pse.join(t,EYt)}function wYt(){return gYt.platform().startsWith("win")}});var E$e=m((Wkr,AYt)=>{AYt.exports={name:"google-auth-library",version:"10.4.2",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var hse=m(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.USER_AGENT=wm.PRODUCT_NAME=wm.pkg=void 0;var b$e=E$e();wm.pkg=b$e;var _$e="google-api-nodejs-client";wm.PRODUCT_NAME=_$e;var CYt=`${_$e}/${b$e.version}`;wm.USER_AGENT=CYt});var Au=m(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.AuthClient=td.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=td.DEFAULT_UNIVERSE=void 0;var TYt=require("events"),mse=to(),OYt=ed(),xYt=nse(),yse=hse();td.DEFAULT_UNIVERSE="googleapis.com";td.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300*1e3;var gse=class t extends TYt.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=td.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=td.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();let r=(0,OYt.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=r.get("project_id")??null,this.quotaProjectId=r.get("quota_project_id"),this.credentials=r.get("credentials")??{},this.universeDomain=r.get("universe_domain")??td.DEFAULT_UNIVERSE,this.transporter=e.transporter??new mse.Gaxios(e.transporterOptions),r.get("useAuthRequestParameters")!==!1&&(this.transporter.interceptors.request.add(t.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(t.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let r=e[0],n=e[1],i,s=new Headers;return typeof r=="string"?i=new URL(r):r instanceof URL?i=r:r&&r.url&&(i=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&mse.Gaxios.mergeHeaders(s,r.headers),n&&mse.Gaxios.mergeHeaders(s,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:s,url:i}):this.request({...n,headers:s,url:i})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,r){let n=r.get("x-goog-user-project"),i=r.get("authorization");return n&&e.set("x-goog-user-project",n),i&&e.set("authorization",i),e}static log=(0,xYt.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let n=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${n}`)}let r=e.headers.get("User-Agent");r?r.includes(`${yse.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${r} ${yse.USER_AGENT}`):e.headers.set("User-Agent",yse.USER_AGENT);try{let n=e,i=n[t.RequestMethodNameSymbol],s=`${Math.floor(Math.random()*1e3)}`;n[t.RequestLogIdSymbol]=s;let o={url:e.url,headers:e.headers};i?t.log.info("%s [%s] request %j",i,s,o):t.log.info("[%s] request %j",s,o)}catch{}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] response %j",n,i,e.data):t.log.info("[%s] response %j",i,e.data)}catch{}return e},rejected:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],i=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] error %j",n,i,e.response?.data):t.log.error("[%s] error %j",i,e.response?.data)}catch{}throw e}};static setMethodName(e,r){try{let n=e;n[t.RequestMethodNameSymbol]=r}catch{}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};td.AuthClient=gse});var bse=m(nN=>{"use strict";Object.defineProperty(nN,"__esModule",{value:!0});nN.LoginTicket=void 0;var Ese=class{envelope;payload;constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};nN.LoginTicket=Ese});var qg=m(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.OAuth2Client=rp.ClientAuthentication=rp.CertificateFormat=rp.CodeChallengeMethod=void 0;var v$e=to(),IYt=require("querystring"),RYt=require("stream"),DYt=Ek(),S$e=ed(),_se=SA(),j_=Au(),kYt=bse(),w$e;(function(t){t.Plain="plain",t.S256="S256"})(w$e||(rp.CodeChallengeMethod=w$e={}));var Hf;(function(t){t.PEM="PEM",t.JWK="JWK"})(Hf||(rp.CertificateFormat=Hf={}));var wA;(function(t){t.ClientSecretPost="ClientSecretPost",t.ClientSecretBasic="ClientSecretBasic",t.None="None"})(wA||(rp.ClientAuthentication=wA={}));var vse=class t extends j_.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=Hf.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},r,n){super(typeof e=="object"?e:{}),typeof e!="object"&&(e={clientId:e,clientSecret:r,redirectUri:n}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||wA.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+IYt.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,_se.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),s=(await e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:s}}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}async getTokenAsync(e){let r=this.endpoints.oauth2TokenUrl.toString(),n=new Headers,i={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===wA.ClientSecretBasic){let u=Buffer.from(`${this._clientId}:${this._clientSecret}`);n.set("authorization",`Basic ${u.toString("base64")}`)}this.clientAuthentication===wA.ClientSecretPost&&(i.client_secret=this._clientSecret);let s={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,S$e.removeUndefinedValuesInObject)(i)),headers:n};j_.AuthClient.setMethodName(s,"getTokenAsync");let o=await this.transporter.request(s),a=o.data;return o.data&&o.data.expires_in&&(a.expiry_date=new Date().getTime()+o.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:o}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r}async refreshTokenNoCache(e){if(!e)throw new Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i;try{let o={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,S$e.removeUndefinedValuesInObject)(n))};j_.AuthClient.setMethodName(o,"refreshTokenNoCache"),i=await this.transporter.request(o)}catch(o){throw o instanceof v$e.GaxiosError&&o.message==="invalid_grant"&&o.response?.data&&/ReAuth/i.test(o.response.data.error_description)&&(o.message=JSON.stringify(o.response.data)),o}let s=i.data;return i.data&&i.data.expires_in&&(s.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete s.expires_in),this.emit("tokens",s),{tokens:s,res:i}}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=await this.processAndValidateRefreshHandler();if(n?.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=await this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let a=new Headers({authorization:r.token_type+" "+r.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let u=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let n=null,i=null;try{n=await this.refreshToken(r.refresh_token),i=n.tokens}catch(a){let u=a;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let s=this.credentials;s.token_type=s.token_type||"Bearer",i.refresh_token=s.refresh_token,this.credentials=i;let o=new Headers({authorization:s.token_type+" "+i.access_token});return{headers:this.addSharedMetadataHeaders(o),res:n.res}}static getRevokeTokenUrl(e){return new t().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let r=new URL(this.endpoints.oauth2RevokeUrl);return r.searchParams.append("token",e),r}revokeToken(e,r){let n={...t.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(j_.AuthClient.setMethodName(n,"revokeToken"),r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){try{let n=await this.getRequestMetadataAsync();return e.headers=v$e.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,n.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(n){let i=n.response;if(i){let s=i.status,o=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),a=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,u=i.config.data instanceof RYt.Readable,c=s===401||s===403;if(!r&&c&&!u&&o)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&c&&!u&&a){let l=await this.processAndValidateRefreshHandler();return l?.access_token&&this.setCredentials(l),this.requestAsync(e,!0)}}throw n}}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}async verifyIdTokenAsync(e){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:r}=await this.transporter.request({...t.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let e=new Date().getTime(),r=(0,_se.hasBrowserCrypto)()?Hf.JWK:Hf.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case Hf.PEM:i=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case Hf.JWK:i=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${r}`)}try{let c={...t.RETRY_CONFIG,url:i};j_.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),n=await this.transporter.request(c)}catch(c){throw c instanceof Error&&(c.message=`Failed to retrieve verification certificates: ${c.message}`),c}let s=n?.headers.get("cache-control"),o=-1;if(s){let c=/max-age=(?<maxAge>[0-9]+)/.exec(s)?.groups?.maxAge;c&&(o=Number(c)*1e3)}let a={};switch(r){case Hf.PEM:a=n.data;break;case Hf.JWK:for(let c of n.data.keys)a[c.kid]=c;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=o===-1?null:new Date(u.getTime()+o),this.certificateCache=a,this.certificateCacheFormat=r,{certs:a,format:r,res:n}}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let e,r=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let n={...t.RETRY_CONFIG,url:r};j_.AuthClient.setMethodName(n,"getIapPublicKeysAsync"),e=await this.transporter.request(n)}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,r,n,i,s){let o=(0,_se.createCrypto)();s||(s=t.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let a=e.split(".");if(a.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=a[0]+"."+a[1],c=a[2],l,d;try{l=JSON.parse(o.decodeBase64StringUtf8(a[0]))}catch(C){throw C instanceof Error&&(C.message=`Can't parse token envelope: ${a[0]}': ${C.message}`),C}if(!l)throw new Error("Can't parse token envelope: "+a[0]);try{d=JSON.parse(o.decodeBase64StringUtf8(a[1]))}catch(C){throw C instanceof Error&&(C.message=`Can't parse token payload '${a[0]}`),C}if(!d)throw new Error("Can't parse token payload: "+a[1]);if(!Object.prototype.hasOwnProperty.call(r,l.kid))throw new Error("No pem found for envelope: "+JSON.stringify(l));let p=r[l.kid];if(l.alg==="ES256"&&(c=DYt.joseToDer(c,"ES256").toString("base64")),!await o.verify(p,u,c))throw new Error("Invalid token signature: "+e);if(!d.iat)throw new Error("No issue time in token: "+JSON.stringify(d));if(!d.exp)throw new Error("No expiration time in token: "+JSON.stringify(d));let h=Number(d.iat);if(isNaN(h))throw new Error("iat field using invalid format");let g=Number(d.exp);if(isNaN(g))throw new Error("exp field using invalid format");let _=new Date().getTime()/1e3;if(g>=_+s)throw new Error("Expiration time too far in future: "+JSON.stringify(d));let S=h-t.CLOCK_SKEW_SECS_,w=g+t.CLOCK_SKEW_SECS_;if(_<S)throw new Error("Token used too early, "+_+" < "+S+": "+JSON.stringify(d));if(_>w)throw new Error("Token used too late, "+_+" > "+w+": "+JSON.stringify(d));if(i&&i.indexOf(d.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+d.iss);if(typeof n<"u"&&n!==null){let C=d.aud,A=!1;if(n.constructor===Array?A=n.indexOf(C)>-1:A=C===n,!A)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new kYt.LoginTicket(l,d)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};rp.OAuth2Client=vse});var wse=m(iN=>{"use strict";Object.defineProperty(iN,"__esModule",{value:!0});iN.Compute=void 0;var MYt=to(),A$e=vA(),PYt=qg(),Sse=class extends PYt.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let i={property:e};this.scopes.length>0&&(i.params={scopes:this.scopes.join(",")}),r=await A$e.instance(i)}catch(i){throw i instanceof MYt.GaxiosError&&(i.message=`Could not refresh access token: ${i.message}`,this.wrapError(i)),i}let n=r;return r&&r.expires_in&&(n.expiry_date=new Date().getTime()+r.expires_in*1e3,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:null}}async fetchIdToken(e){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=await A$e.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n}wrapError(e){let r=e.response;r&&r.status&&(e.status=r.status,r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};iN.Compute=Sse});var Cse=m(sN=>{"use strict";Object.defineProperty(sN,"__esModule",{value:!0});sN.IdTokenClient=void 0;var NYt=qg(),Ase=class extends NYt.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let r=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};sN.IdTokenClient=Ase});var Tse=m($_=>{"use strict";Object.defineProperty($_,"__esModule",{value:!0});$_.GCPEnv=void 0;$_.clear=FYt;$_.getEnv=BYt;var C$e=vA(),np;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",t.NONE="NONE"})(np||($_.GCPEnv=np={}));var AA;function FYt(){AA=void 0}async function BYt(){return AA||(AA=qYt(),AA)}async function qYt(){let t=np.NONE;return LYt()?t=np.APP_ENGINE:jYt()?t=np.CLOUD_FUNCTIONS:await VYt()?await UYt()?t=np.KUBERNETES_ENGINE:$Yt()?t=np.CLOUD_RUN:KYt()?t=np.CLOUD_RUN_JOBS:t=np.COMPUTE_ENGINE:t=np.NONE,t}function LYt(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function jYt(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function $Yt(){return!!process.env.K_CONFIGURATION}function KYt(){return!!process.env.CLOUD_RUN_JOB}async function UYt(){try{return await C$e.instance("attributes/cluster-name"),!0}catch{return!1}}async function VYt(){return C$e.isAvailable()}});var Ose=m((rMr,T$e)=>{var oN=Bl().Buffer,GYt=require("stream"),HYt=require("util");function aN(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=oN.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=oN.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}HYt.inherits(aN,GYt);aN.prototype.write=function(e){this.buffer=oN.concat([this.buffer,oN.from(e)]),this.emit("data",e)};aN.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};T$e.exports=aN});var Dse=m((nMr,N$e)=>{var U_=Bl().Buffer,qc=require("crypto"),x$e=Ek(),O$e=require("util"),zYt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,CA="secret must be a string or buffer",K_="key must be a string or a buffer",WYt="key must be a string, a buffer or an object",Ise=typeof qc.createPublicKey=="function";Ise&&(K_+=" or a KeyObject",CA+="or a KeyObject");function I$e(t){if(!U_.isBuffer(t)&&typeof t!="string"&&(!Ise||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw rd(K_)}function R$e(t){if(!U_.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw rd(WYt)}function JYt(t){if(!U_.isBuffer(t)){if(typeof t=="string")return t;if(!Ise||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw rd(CA)}}function Rse(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function D$e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function rd(t){var e=[].slice.call(arguments,1),r=O$e.format.bind(O$e,t).apply(null,e);return new TypeError(r)}function YYt(t){return U_.isBuffer(t)||typeof t=="string"}function TA(t){return YYt(t)||(t=JSON.stringify(t)),t}function k$e(t){return function(r,n){JYt(n),r=TA(r);var i=qc.createHmac("sha"+t,n),s=(i.update(r),i.digest("base64"));return Rse(s)}}var xse,QYt="timingSafeEqual"in qc?function(e,r){return e.byteLength!==r.byteLength?!1:qc.timingSafeEqual(e,r)}:function(e,r){return xse||(xse=Ete()),xse(e,r)};function XYt(t){return function(r,n,i){var s=k$e(t)(r,i);return QYt(U_.from(n),U_.from(s))}}function M$e(t){return function(r,n){R$e(n),r=TA(r);var i=qc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign(n,"base64"));return Rse(s)}}function P$e(t){return function(r,n,i){I$e(i),r=TA(r),n=D$e(n);var s=qc.createVerify("RSA-SHA"+t);return s.update(r),s.verify(i,n,"base64")}}function ZYt(t){return function(r,n){R$e(n),r=TA(r);var i=qc.createSign("RSA-SHA"+t),s=(i.update(r),i.sign({key:n,padding:qc.constants.RSA_PKCS1_PSS_PADDING,saltLength:qc.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Rse(s)}}function eQt(t){return function(r,n,i){I$e(i),r=TA(r),n=D$e(n);var s=qc.createVerify("RSA-SHA"+t);return s.update(r),s.verify({key:i,padding:qc.constants.RSA_PKCS1_PSS_PADDING,saltLength:qc.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function tQt(t){var e=M$e(t);return function(){var n=e.apply(null,arguments);return n=x$e.derToJose(n,"ES"+t),n}}function rQt(t){var e=P$e(t);return function(n,i,s){i=x$e.joseToDer(i,"ES"+t).toString("base64");var o=e(n,i,s);return o}}function nQt(){return function(){return""}}function iQt(){return function(e,r){return r===""}}N$e.exports=function(e){var r={hs:k$e,rs:M$e,ps:ZYt,es:tQt,none:nQt},n={hs:XYt,rs:P$e,ps:eQt,es:rQt,none:iQt},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw rd(zYt,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:r[s](o),verify:n[s](o)}}});var kse=m((iMr,F$e)=>{var sQt=require("buffer").Buffer;F$e.exports=function(e){return typeof e=="string"?e:typeof e=="number"||sQt.isBuffer(e)?e.toString():JSON.stringify(e)}});var K$e=m((sMr,$$e)=>{var oQt=Bl().Buffer,B$e=Ose(),aQt=Dse(),uQt=require("stream"),q$e=kse(),Mse=require("util");function L$e(t,e){return oQt.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cQt(t,e,r){r=r||"utf8";var n=L$e(q$e(t),"binary"),i=L$e(q$e(e),r);return Mse.format("%s.%s",n,i)}function j$e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,s=aQt(e.alg),o=cQt(e,r,i),a=s.sign(o,n);return Mse.format("%s.%s",o,a)}function uN(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new B$e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new B$e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Mse.inherits(uN,uQt);uN.prototype.sign=function(){try{var e=j$e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};uN.sign=j$e;$$e.exports=uN});var X$e=m((oMr,Q$e)=>{var V$e=Bl().Buffer,U$e=Ose(),lQt=Dse(),dQt=require("stream"),G$e=kse(),pQt=require("util"),fQt=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function hQt(t){return Object.prototype.toString.call(t)==="[object Object]"}function mQt(t){if(hQt(t))return t;try{return JSON.parse(t)}catch{return}}function H$e(t){var e=t.split(".",1)[0];return mQt(V$e.from(e,"base64").toString("binary"))}function yQt(t){return t.split(".",2).join(".")}function z$e(t){return t.split(".")[2]}function gQt(t,e){e=e||"utf8";var r=t.split(".")[1];return V$e.from(r,"base64").toString(e)}function W$e(t){return fQt.test(t)&&!!H$e(t)}function J$e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=G$e(t);var i=z$e(t),s=yQt(t),o=lQt(e);return o.verify(s,i,r)}function Y$e(t,e){if(e=e||{},t=G$e(t),!W$e(t))return null;var r=H$e(t);if(!r)return null;var n=gQt(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:z$e(t)}}function V_(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new U$e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new U$e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}pQt.inherits(V_,dQt);V_.prototype.verify=function(){try{var e=J$e(this.signature.buffer,this.algorithm,this.key.buffer),r=Y$e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};V_.decode=Y$e;V_.isValid=W$e;V_.verify=J$e;Q$e.exports=V_});var Pse=m(Am=>{var Z$e=K$e(),cN=X$e(),EQt=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Am.ALGORITHMS=EQt;Am.sign=Z$e.sign;Am.verify=cN.verify;Am.decode=cN.decode;Am.isValid=cN.isValid;Am.createSign=function(e){return new Z$e(e)};Am.createVerify=function(e){return new cN(e)}});var hKe=m(dN=>{"use strict";Object.defineProperty(dN,"__esModule",{value:!0});dN.GoogleToken=void 0;var eKe=lN(require("fs")),bQt=to(),_Qt=lN(Pse()),vQt=lN(require("path")),SQt=require("util");function lN(t,e){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(lN=function(s,o){if(!o&&s&&s.__esModule)return s;var a,u,c={__proto__:null,default:s};if(s===null||zf(s)!="object"&&typeof s!="function")return c;if(a=o?n:r){if(a.has(s))return a.get(s);a.set(s,c)}for(var l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((u=(a=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(u.get||u.set)?a(c,l,u):c[l]=s[l]);return c})(t,e)}function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function wQt(t,e){cKe(t,e),e.add(t)}function AQt(t,e,r){cKe(t,e),e.set(t,r)}function cKe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tKe(t,e,r){return t.set(nd(t,e),r),r}function rKe(t,e){return t.get(nd(t,e))}function nd(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function nKe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pKe(n.key),n)}}function lKe(t,e,r){return e&&nKe(t.prototype,e),r&&nKe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CQt(t,e,r){return e=RA(e),TQt(t,jse()?Reflect.construct(e,r||[],RA(t).constructor):e.apply(t,r))}function TQt(t,e){if(e&&(zf(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OQt(t)}function OQt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IA(t,e)}function Nse(t){var e=typeof Map=="function"?new Map:void 0;return Nse=function(n){if(n===null||!RQt(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return IQt(n,arguments,RA(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),IA(i,n)},Nse(t)}function IQt(t,e,r){if(jse())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&IA(i,r.prototype),i}function jse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jse=function(){return!!t})()}function RQt(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function IA(t,e){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},IA(t,e)}function RA(t){return RA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},RA(t)}function Cu(t,e,r){return(e=pKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pKe(t){var e=DQt(t,"string");return zf(e)=="symbol"?e:e+""}function DQt(t,e){if(zf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ou(){var t,e,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(f,h,g,_){var S=h&&h.prototype instanceof a?h:a,w=Object.create(S.prototype);return Tu(w,"_invoke",(function(C,A,O){var x,R,M,I=0,F=O||[],B=!1,U={p:0,n:0,v:t,a:k,f:k.bind(t,4),d:function(ie,j){return x=ie,R=0,M=t,U.n=j,o}};function k(H,ie){for(R=H,M=ie,e=0;!B&&I&&!j&&e<F.length;e++){var j,V=F[e],Ee=U.p,Re=V[2];H>3?(j=Re===ie)&&(M=V[(R=V[4])?5:(R=3,3)],V[4]=V[5]=t):V[0]<=Ee&&((j=H<2&&Ee<V[1])?(R=0,U.v=ie,U.n=V[1]):Ee<Re&&(j=H<3||V[0]>ie||ie>Re)&&(V[4]=H,V[5]=ie,U.n=Re,R=0))}if(j||H>1)return o;throw B=!0,ie}return function(H,ie,j){if(I>1)throw TypeError("Generator is already running");for(B&&ie===1&&k(ie,j),R=ie,M=j;(e=R<2?t:M)||!B;){x||(R?R<3?(R>1&&(U.n=-1),k(R,M)):U.n=M:U.v=M);try{if(I=2,x){if(R||(H="next"),e=x[H]){if(!(e=e.call(x,M)))throw TypeError("iterator result is not an object");if(!e.done)return e;M=e.value,R<2&&(R=0)}else R===1&&(e=x.return)&&e.call(x),R<2&&(M=TypeError("The iterator does not provide a '"+H+"' method"),R=1);x=t}else if((e=(B=U.n<0)?M:C.call(A,U))!==o)break}catch(V){x=t,R=1,M=V}finally{I=1}}return{value:e,done:B}}})(f,g,_),!0),w}var o={};function a(){}function u(){}function c(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(Tu(e={},n,function(){return this}),e),d=c.prototype=a.prototype=Object.create(l);function p(f){return Object.setPrototypeOf?Object.setPrototypeOf(f,c):(f.__proto__=c,Tu(f,i,"GeneratorFunction")),f.prototype=Object.create(d),f}return u.prototype=c,Tu(d,"constructor",c),Tu(c,"constructor",u),u.displayName="GeneratorFunction",Tu(c,i,"GeneratorFunction"),Tu(d),Tu(d,i,"Generator"),Tu(d,n,function(){return this}),Tu(d,"toString",function(){return"[object Generator]"}),(Ou=function(){return{w:s,m:p}})()}function Tu(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Tu=function(o,a,u,c){if(a)i?i(o,a,{value:u,enumerable:!c,configurable:!c,writable:!c}):o[a]=u;else{var l=function(p,f){Tu(o,p,function(h){return this._invoke(p,f,h)})};l("next",0),l("throw",1),l("return",2)}},Tu(t,e,r,n)}function iKe(t,e,r,n,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void r(c)}a.done?e(u):Promise.resolve(u).then(n,i)}function G_(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(u){iKe(s,n,i,o,a,"next",u)}function a(u){iKe(s,n,i,o,a,"throw",u)}o(void 0)})}}var sKe=eKe.readFile?(0,SQt.promisify)(eKe.readFile):G_(Ou().m(function t(){return Ou().w(function(e){for(;;)switch(e.n){case 0:throw new xA("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},t)})),oKe="https://oauth2.googleapis.com/token",kQt="https://oauth2.googleapis.com/revoke?token=",xA=(function(t){function e(r,n){var i;return dKe(this,e),i=CQt(this,e,[r]),Cu(i,"code",void 0),i.code=n,i}return xQt(e,t),lKe(e)})(Nse(Error)),OA=new WeakMap,ip=new WeakSet,uMr=dN.GoogleToken=(function(){function t(e){dKe(this,t),wQt(this,ip),Cu(this,"expiresAt",void 0),Cu(this,"key",void 0),Cu(this,"keyFile",void 0),Cu(this,"iss",void 0),Cu(this,"sub",void 0),Cu(this,"scope",void 0),Cu(this,"rawToken",void 0),Cu(this,"tokenExpires",void 0),Cu(this,"email",void 0),Cu(this,"additionalClaims",void 0),Cu(this,"eagerRefreshThresholdMillis",void 0),Cu(this,"transporter",{request:function(n){return(0,bQt.request)(n)}}),AQt(this,OA,void 0),nd(ip,this,fKe).call(this,e)}return lKe(t,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var r=new Date().getTime();return this.rawToken&&this.expiresAt?r>=this.expiresAt:!0}},{key:"isTokenExpiring",value:function(){var r,n=new Date().getTime(),i=(r=this.eagerRefreshThresholdMillis)!==null&&r!==void 0?r:0;return this.rawToken&&this.expiresAt?this.expiresAt<=n+i:!0}},{key:"getToken",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zf(r)==="object"&&(n=r,r=void 0),n=Object.assign({forceRefresh:!1},n),r){var i=r;nd(ip,this,aKe).call(this,n).then(function(s){return i(null,s)},r);return}return nd(ip,this,aKe).call(this,n)}},{key:"getCredentials",value:(function(){var e=G_(Ou().m(function n(i){var s,o,a,u,c,l,d;return Ou().w(function(p){for(;;)switch(p.n){case 0:s=vQt.extname(i),d=s,p.n=d===".json"?1:d===".der"||d===".crt"||d===".pem"?4:d===".p12"||d===".pfx"?6:7;break;case 1:return p.n=2,sKe(i,"utf8");case 2:if(o=p.v,a=JSON.parse(o),u=a.private_key,c=a.client_email,!(!u||!c)){p.n=3;break}throw new xA("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return p.a(2,{privateKey:u,clientEmail:c});case 4:return p.n=5,sKe(i,"utf8");case 5:return l=p.v,p.a(2,{privateKey:l});case 6:throw new xA("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new xA("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return p.a(2)}},n)}));function r(n){return e.apply(this,arguments)}return r})()},{key:"revokeToken",value:function(r){if(r){nd(ip,this,uKe).call(this).then(function(){return r()},r);return}return nd(ip,this,uKe).call(this)}}])})();function aKe(t){return Fse.apply(this,arguments)}function Fse(){return Fse=G_(Ou().m(function t(e){return Ou().w(function(r){for(;;)switch(r.n){case 0:if(!(rKe(OA,this)&&!e.forceRefresh)){r.n=1;break}return r.a(2,rKe(OA,this));case 1:return r.p=1,r.n=2,tKe(OA,this,nd(ip,this,MQt).call(this,e));case 2:return r.a(2,r.v);case 3:return r.p=3,tKe(OA,this,void 0),r.f(3);case 4:return r.a(2)}},t,this,[[1,,3,4]])})),Fse.apply(this,arguments)}function MQt(t){return Bse.apply(this,arguments)}function Bse(){return Bse=G_(Ou().m(function t(e){var r;return Ou().w(function(n){for(;;)switch(n.n){case 0:if(!(this.isTokenExpiring()===!1&&e.forceRefresh===!1)){n.n=1;break}return n.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){n.n=2;break}throw new Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){n.n=4;break}return n.n=3,this.getCredentials(this.keyFile);case 3:r=n.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||nd(ip,this,PQt).call(this);case 4:return n.a(2,nd(ip,this,NQt).call(this))}},t,this)})),Bse.apply(this,arguments)}function PQt(){if(!this.iss)throw new xA("email is required.","MISSING_CREDENTIALS")}function uKe(){return qse.apply(this,arguments)}function qse(){return qse=G_(Ou().m(function t(){var e;return Ou().w(function(r){for(;;)switch(r.n){case 0:if(this.accessToken){r.n=1;break}throw new Error("No token to revoke.");case 1:return e=kQt+this.accessToken,r.n=2,this.transporter.request({url:e,retry:!0});case 2:nd(ip,this,fKe).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return r.a(2)}},t,this)})),qse.apply(this,arguments)}function fKe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,zf(t.scope)==="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis,t.transporter&&(this.transporter=t.transporter)}function NQt(){return Lse.apply(this,arguments)}function Lse(){return Lse=G_(Ou().m(function t(){var e,r,n,i,s,o,a,u,c,l;return Ou().w(function(d){for(;;)switch(d.n){case 0:return e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:oKe,exp:e+3600,iat:e,sub:this.sub},r),i=_Qt.sign({header:{alg:"RS256"},payload:n,secret:this.key}),d.p=1,d.n=2,this.transporter.request({method:"POST",url:oKe,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return s=d.v,this.rawToken=s.data,this.expiresAt=s.data.expires_in===null||s.data.expires_in===void 0?void 0:(e+s.data.expires_in)*1e3,d.a(2,this.rawToken);case 3:throw d.p=3,l=d.v,this.rawToken=void 0,this.tokenExpires=void 0,u=l.response&&(o=l.response)!==null&&o!==void 0&&o.data?(a=l.response)===null||a===void 0?void 0:a.data:{},u.error&&(c=u.error_description?": ".concat(u.error_description):"",l.message="".concat(u.error).concat(c)),l;case 4:return d.a(2)}},t,this,[[1,3]])})),Lse.apply(this,arguments)}});var Kse=m(pN=>{"use strict";Object.defineProperty(pN,"__esModule",{value:!0});pN.JWTAccess=void 0;var FQt=Pse(),BQt=ed(),mKe={alg:"RS256",typ:"JWT"},$se=class t{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new BQt.LRUCache({capacity:500,maxAge:3600*1e3});constructor(e,r,n,i){this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i??300*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),s=this.cache.get(i),o=Date.now();if(s&&s.expiration-o>this.eagerRefreshThresholdMillis)return new Headers(s.headers);let a=Math.floor(Date.now()/1e3),u=t.getExpirationTime(a),c;if(Array.isArray(n)&&(n=n.join(" ")),n?c={iss:this.email,sub:this.email,scope:n,exp:u,iat:a}:c={iss:this.email,sub:this.email,aud:e,exp:u,iat:a},r){for(let h in c)if(r[h])throw new Error(`The '${h}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let l=this.keyId?{...mKe,kid:this.keyId}:mKe,d=Object.assign(c,r),p=FQt.sign({header:l,payload:d,secret:this.key}),f=new Headers({authorization:`Bearer ${p}`});return this.cache.set(i,{expiration:u*1e3,headers:f}),f}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",s=>i+=s).on("error",n).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}};pN.JWTAccess=$se});var Vse=m(hN=>{"use strict";Object.defineProperty(hN,"__esModule",{value:!0});hN.JWT=void 0;var yKe=hKe(),qQt=Kse(),LQt=qg(),fN=Au(),Use=class t extends LQt.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let r=new t(this);return r.scopes=e,r}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let r=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==fN.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==fN.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${fN.DEFAULT_UNIVERSE}`);if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:n}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${n.id_token}`}))}}else{this.access||(this.access=new qQt.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let n;this.hasUserScopes()?n=this.scopes:e||(n=this.defaultScopes);let i=this.useJWTAccessWithScope||this.universeDomain!==fN.DEFAULT_UNIVERSE,s=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,i?n:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let r=new yKe.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),n={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",n),{res:null,tokens:n}}createGToken(){return this.gtoken||(this.gtoken=new yKe.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);this.fromJSON(s),r()}catch(s){n(s)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}};hN.JWT=Use});var Hse=m(H_=>{"use strict";Object.defineProperty(H_,"__esModule",{value:!0});H_.UserRefreshClient=H_.USER_REFRESH_ACCOUNT_TYPE=void 0;var jQt=qg(),$Qt=Au();H_.USER_REFRESH_ACCOUNT_TYPE="authorized_user";var Gse=class t extends jQt.OAuth2Client{_refreshToken;constructor(e,r,n,i,s){let o=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:s};super(o),this._refreshToken=o.refreshToken,this.credentials.refresh_token=o.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let r={...t.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return $Qt.AuthClient.setMethodName(r,"fetchIdToken"),(await this.transporter.request(r)).data.id_token}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}async fromStreamAsync(e){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",s=>i+=s).on("end",()=>{try{let s=JSON.parse(i);return this.fromJSON(s),r()}catch(s){return n(s)}})})}static fromJSON(e){let r=new t;return r.fromJSON(e),r}};H_.UserRefreshClient=Gse});var Wse=m(z_=>{"use strict";Object.defineProperty(z_,"__esModule",{value:!0});z_.Impersonated=z_.IMPERSONATED_ACCOUNT_TYPE=void 0;var gKe=qg(),KQt=to(),UQt=ed();z_.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";var zse=class t extends gKe.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new gKe.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,!!!(0,UQt.originalOrCamelOptions)(e).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,n=`${this.endpoint}/v1/${r}:signBlob`,i={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:n,data:i,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,r=`${this.endpoint}/v1/${e}:generateAccessToken`,n={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},i=await this.sourceClient.request({...t.RETRY_CONFIG,url:r,data:n,method:"POST"}),s=i.data;return this.credentials.access_token=s.accessToken,this.credentials.expiry_date=Date.parse(s.expireTime),{tokens:this.credentials,res:i}}catch(e){if(!(e instanceof Error))throw e;let r=0,n="";throw e instanceof KQt.GaxiosError&&(r=e?.response?.data?.error?.status,n=e?.response?.data?.error?.message),r&&n?(e.message=`${r}: unable to impersonate: ${n}`,e):(e.message=`unable to impersonate: ${e}`,e)}}async fetchIdToken(e,r){await this.sourceClient.getAccessToken();let n=`projects/-/serviceAccounts/${this.targetPrincipal}`,i=`${this.endpoint}/v1/${n}:generateIdToken`,s={delegates:this.delegates,audience:e,includeEmail:r?.includeEmail??!0,useEmailAzp:r?.includeEmail??!0};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:i,data:s,method:"POST"})).data.token}};z_.Impersonated=zse});var Yse=m(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});DA.OAuthClientAuthHandler=void 0;DA.getErrorFromOAuthErrorResponse=HQt;var W_=to(),VQt=SA(),GQt=["PUT","POST","PATCH"],Jse=class{#e=(0,VQt.createCrypto)();#t;transporter;constructor(e){e&&"clientId"in e?(this.#t=e,this.transporter=new W_.Gaxios):(this.#t=e?.clientAuthentication,this.transporter=e?.transporter||new W_.Gaxios)}applyClientAuthenticationOptions(e,r){e.headers=W_.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){if(r)e.headers=W_.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${r}`});else if(this.#t?.confidentialClientType==="basic"){e.headers=W_.Gaxios.mergeHeaders(e.headers);let n=this.#t.clientId,i=this.#t.clientSecret||"",s=this.#e.encodeBase64StringUtf8(`${n}:${i}`);W_.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){if(this.#t?.confidentialClientType==="request-body"){let r=(e.method||"GET").toUpperCase();if(!GQt.includes(r))throw new Error(`${r} HTTP method does not support ${this.#t.confidentialClientType} client authentication`);let i=new Headers(e.headers).get("content-type");if(i?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let s=new URLSearchParams(e.data??"");s.append("client_id",this.#t.clientId),s.append("client_secret",this.#t.clientSecret||""),e.data=s}else if(i?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#t.clientId,client_secret:this.#t.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.#t.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};DA.OAuthClientAuthHandler=Jse;function HQt(t,e){let r=t.error,n=t.error_description,i=t.error_uri,s=`Error code ${r}`;typeof n<"u"&&(s+=`: ${n}`),typeof i<"u"&&(s+=` - ${i}`);let o=new Error(s);if(e){let a=Object.keys(e);e.stack&&a.push("stack"),a.forEach(u=>{u!=="message"&&Object.defineProperty(o,u,{value:e[u],writable:!1,enumerable:!0})})}return o}});var yN=m(mN=>{"use strict";Object.defineProperty(mN,"__esModule",{value:!0});mN.StsCredentials=void 0;var zQt=to(),WQt=Au(),EKe=Yse(),JQt=ed(),Qse=class t extends EKe.OAuthClientAuthHandler{#e;constructor(e={tokenExchangeEndpoint:""},r){(typeof e!="object"||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:r}),super(e),this.#e=e.tokenExchangeEndpoint}async exchangeToken(e,r,n){let i={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:n&&JSON.stringify(n)},s={...t.RETRY_CONFIG,url:this.#e.toString(),method:"POST",headers:r,data:new URLSearchParams((0,JQt.removeUndefinedValuesInObject)(i))};WQt.AuthClient.setMethodName(s,"exchangeToken"),this.applyClientAuthenticationOptions(s);try{let o=await this.transporter.request(s),a=o.data;return a.res=o,a}catch(o){throw o instanceof zQt.GaxiosError&&o.response?(0,EKe.getErrorFromOAuthErrorResponse)(o.response.data,o):o}}};mN.StsCredentials=Qse});var Cm=m(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.BaseExternalAccountClient=Lc.CLOUD_RESOURCE_MANAGER=Lc.EXTERNAL_ACCOUNT_TYPE=Lc.EXPIRATION_TIME_OFFSET=void 0;var YQt=to(),QQt=require("stream"),Xse=Au(),XQt=yN(),bKe=ed(),ZQt=hse(),eXt="urn:ietf:params:oauth:grant-type:token-exchange",tXt="urn:ietf:params:oauth:token-type:access_token",Zse="https://www.googleapis.com/auth/cloud-platform",rXt=3600;Lc.EXPIRATION_TIME_OFFSET=300*1e3;Lc.EXTERNAL_ACCOUNT_TYPE="external_account";Lc.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var nXt="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",iXt="https://sts.{universeDomain}/v1/token",eoe=class t extends Xse.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#e=null;constructor(e){super(e);let r=(0,bKe.originalOrCamelOptions)(e),n=r.get("type");if(n&&n!==Lc.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Lc.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);let i=r.get("client_id"),s=r.get("client_secret");this.tokenUrl=r.get("token_url")??iXt.replace("{universeDomain}",this.universeDomain);let o=r.get("subject_token_type"),a=r.get("workforce_pool_user_project"),u=r.get("service_account_impersonation_url"),c=r.get("service_account_impersonation"),l=(0,bKe.originalOrCamelOptions)(c).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(r.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),i&&(this.clientAuth={confidentialClientType:"basic",clientId:i,clientSecret:s}),this.stsCredential=new XQt.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=r.get("scopes")||[Zse],this.cachedAccessToken=null,this.audience=r.get("audience"),this.subjectTokenType=o,this.workforcePoolUserProject=a;let d=new RegExp(nXt);if(this.workforcePoolUserProject&&!this.audience.match(d))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=u,this.serviceAccountImpersonationLifetime=l,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=rXt),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);return/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl)?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=await this.getRequestHeaders(),n={...t.RETRY_CONFIG,headers:r,url:`${this.cloudResourceManagerURL.toString()}${e}`};Xse.AuthClient.setMethodName(n,"getProjectId");let i=await this.transporter.request(n);return this.projectId=i.data.projectId,this.projectId}return null}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=YQt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof QQt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){this.#e=this.#e||this.#t();try{return await this.#e}finally{this.#e=null}}async#t(){let e=await this.retrieveSubjectToken(),r={grantType:eXt,audience:this.audience,requestedTokenType:tXt,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Zse]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),s=await this.stsCredential.exchangeToken(r,i,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(s.access_token):s.expires_in?this.cachedAccessToken={access_token:s.access_token,expiry_date:new Date().getTime()+s.expires_in*1e3,res:s.res}:this.cachedAccessToken={access_token:s.access_token,res:s.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}async getImpersonatedAccessToken(e){let r={...t.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};Xse.AuthClient.setMethodName(r,"getImpersonatedAccessToken");let n=await this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[Zse]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),r=this.serviceAccountImpersonationUrl!==void 0,n=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${ZQt.pkg.version} google-byoid-sdk source/${n} sa-impersonation/${r} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}};Lc.BaseExternalAccountClient=eoe});var _Ke=m(gN=>{"use strict";Object.defineProperty(gN,"__esModule",{value:!0});gN.FileSubjectTokenSupplier=void 0;var roe=require("util"),noe=require("fs"),sXt=(0,roe.promisify)(noe.readFile??(()=>{})),oXt=(0,roe.promisify)(noe.realpath??(()=>{})),aXt=(0,roe.promisify)(noe.lstat??(()=>{})),toe=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e=this.filePath;try{if(e=await oXt(e),!(await aXt(e)).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let r,n=await sXt(e,{encoding:"utf8"});if(this.formatType==="text"?r=n:this.formatType==="json"&&this.subjectTokenFieldName&&(r=JSON.parse(n)[this.subjectTokenFieldName]),!r)throw new Error("Unable to parse the subject_token from the credential_source file");return r}};gN.FileSubjectTokenSupplier=toe});var vKe=m(EN=>{"use strict";Object.defineProperty(EN,"__esModule",{value:!0});EN.UrlSubjectTokenSupplier=void 0;var uXt=Au(),ioe=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};uXt.AuthClient.setMethodName(r,"getSubjectToken");let n;if(this.formatType==="text"?n=(await e.transporter.request(r)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(n=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!n)throw new Error("Unable to parse the subject_token from the credential_source URL");return n}};EN.UrlSubjectTokenSupplier=ioe});var SKe=m(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.CertificateSubjectTokenSupplier=xu.InvalidConfigurationError=xu.CertificateSourceUnavailableError=xu.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var bN=ed(),_N=require("fs"),vN=require("crypto"),cXt=require("https");xu.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";var sp=class extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}};xu.CertificateSourceUnavailableError=sp;var jc=class extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}};xu.InvalidConfigurationError=jc;var soe=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new jc("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new jc("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new jc("Cannot create mTLS Agent with missing certificate or key");return new cXt.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#e();let{certPath:e,keyPath:r}=await this.#t();return{cert:this.cert,key:this.key}=await this.#r(e,r),await this.#n(this.cert)}async#e(){let e=this.certificateConfigPath;if(e){if(await(0,bN.isValidFile)(e))return e;throw new sp(`Provided certificate config path is invalid: ${e}`)}let r=process.env[xu.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(r){if(await(0,bN.isValidFile)(r))return r;throw new sp(`Path from environment variable "${xu.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${r}`)}let n=(0,bN.getWellKnownCertificateConfigFileLocation)();if(await(0,bN.isValidFile)(n))return n;throw new sp(`Could not find certificate configuration file. Searched override path, the "${xu.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${n}).`)}async#t(){let e=this.certificateConfigPath,r;try{r=await _N.promises.readFile(e,"utf8")}catch{throw new sp(`Failed to read certificate config file at: ${e}`)}try{let n=JSON.parse(r),i=n?.cert_configs?.workload?.cert_path,s=n?.cert_configs?.workload?.key_path;if(!i||!s)throw new jc(`Certificate config file (${e}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:i,keyPath:s}}catch(n){throw n instanceof jc?n:new jc(`Failed to parse certificate config from ${e}: ${n.message}`)}}async#r(e,r){let n,i;try{n=await _N.promises.readFile(e),new vN.X509Certificate(n)}catch(s){let o=s instanceof Error?s.message:String(s);throw new sp(`Failed to read certificate file at ${e}: ${o}`)}try{i=await _N.promises.readFile(r),(0,vN.createPrivateKey)(i)}catch(s){let o=s instanceof Error?s.message:String(s);throw new sp(`Failed to read private key file at ${r}: ${o}`)}return{cert:n,key:i}}async#n(e){let r=new vN.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([r.raw.toString("base64")]);try{let s=((await _N.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((u,c)=>{try{return new vN.X509Certificate(u)}catch(l){let d=l instanceof Error?l.message:String(l);throw new jc(`Failed to parse certificate at index ${c} in trust chain file ${this.trustChainPath}: ${d}`)}}),o=s.findIndex(u=>r.raw.equals(u.raw)),a;if(o===-1)a=[r,...s];else if(o===0)a=s;else throw new jc(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${o}).`);return JSON.stringify(a.map(u=>u.raw.toString("base64")))}catch(n){if(n instanceof jc)throw n;let i=n instanceof Error?n.message:String(n);throw new sp(`Failed to process certificate chain from ${this.trustChainPath}: ${i}`)}}};xu.CertificateSubjectTokenSupplier=soe});var uoe=m(SN=>{"use strict";Object.defineProperty(SN,"__esModule",{value:!0});SN.IdentityPoolClient=void 0;var lXt=Cm(),ooe=ed(),dXt=_Ke(),pXt=vKe(),wKe=SKe(),fXt=yN(),AKe=to(),aoe=class t extends lXt.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);let r=(0,ooe.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("subject_token_supplier");if(!n&&!i)throw new Error("A credential source or subject token supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or subject token supplier can be specified.");if(i)this.subjectTokenSupplier=i,this.credentialSourceType="programmatic";else{let s=(0,ooe.originalOrCamelOptions)(n),o=(0,ooe.originalOrCamelOptions)(s.get("format")),a=o.get("type")||"text",u=o.get("subject_token_field_name");if(a!=="json"&&a!=="text")throw new Error(`Invalid credential_source format "${a}"`);if(a==="json"&&!u)throw new Error("Missing subject_token_field_name for JSON credential_source format");let c=s.get("file"),l=s.get("url"),d=s.get("certificate"),p=s.get("headers");if(c&&l||l&&d||c&&d)throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(c)this.credentialSourceType="file",this.subjectTokenSupplier=new dXt.FileSubjectTokenSupplier({filePath:c,formatType:a,subjectTokenFieldName:u});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new pXt.UrlSubjectTokenSupplier({url:l,formatType:a,subjectTokenFieldName:u,headers:p,additionalGaxiosOptions:t.RETRY_CONFIG});else if(d){this.credentialSourceType="certificate";let f=new wKe.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:d.use_default_certificate_config,certificateConfigLocation:d.certificate_config_location,trustChainPath:d.trust_chain_path});this.subjectTokenSupplier=f}else throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof wKe.CertificateSubjectTokenSupplier){let r=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new fXt.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new AKe.Gaxios({agent:r})}),this.transporter=new AKe.Gaxios({...this.transporter.defaults||{},agent:r})}return e}};SN.IdentityPoolClient=aoe});var loe=m(AN=>{"use strict";Object.defineProperty(AN,"__esModule",{value:!0});AN.AwsRequestSigner=void 0;var wN=to(),TKe=SA(),CKe="AWS4-HMAC-SHA256",hXt="aws4_request",coe=class{getCredentials;region;crypto;constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,TKe.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new RangeError('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",s=e.body||r,o=e.headers,a=await this.getCredentials(),u=new URL(n);if(typeof s!="string"&&s!==void 0)throw new TypeError(`'requestPayload' is expected to be a string if provided. Got: ${s}`);let c=await yXt({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.slice(1),method:i,region:this.region,securityCredentials:a,requestPayload:s,additionalAmzHeaders:o}),l=wN.Gaxios.mergeHeaders(c.amzDate?{"x-amz-date":c.amzDate}:{},{authorization:c.authorizationHeader,host:u.host},o||{});a.token&&wN.Gaxios.mergeHeaders(l,{"x-amz-security-token":a.token});let d={url:n,method:i,headers:l};return s!==void 0&&(d.body=s),d}};AN.AwsRequestSigner=coe;async function kA(t,e,r){return await t.signWithHmacSha256(e,r)}async function mXt(t,e,r,n,i){let s=await kA(t,`AWS4${e}`,r),o=await kA(t,s,n),a=await kA(t,o,i);return await kA(t,a,"aws4_request")}async function yXt(t){let e=wN.Gaxios.mergeHeaders(t.additionalAmzHeaders),r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,s=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),o=i.toISOString().replace(/[-]/g,"").replace(/T.*/,"");t.securityCredentials.token&&e.set("x-amz-security-token",t.securityCredentials.token);let a=wN.Gaxios.mergeHeaders({host:t.host},e.has("date")?{}:{"x-amz-date":s},e),u="",c=[...a.keys()].sort();c.forEach(w=>{u+=`${w}:${a.get(w)}
`});let l=c.join(";"),d=await t.crypto.sha256DigestHex(r),p=`${t.method.toUpperCase()}
${t.canonicalUri}
${t.canonicalQuerystring}
${u}
${l}
${d}`,f=`${o}/${t.region}/${n}/${hXt}`,h=`${CKe}
${s}
${f}
`+await t.crypto.sha256DigestHex(p),g=await mXt(t.crypto,t.securityCredentials.secretAccessKey,o,t.region,n),_=await kA(t.crypto,g,h),S=`${CKe} Credential=${t.securityCredentials.accessKeyId}/${f}, SignedHeaders=${l}, Signature=${(0,TKe.fromArrayBufferToHex)(_)}`;return{amzDate:e.has("date")?void 0:s,authorizationHeader:S,canonicalQuerystring:t.canonicalQuerystring}}});var OKe=m(TN=>{"use strict";Object.defineProperty(TN,"__esModule",{value:!0});TN.DefaultAwsSecurityCredentialsSupplier=void 0;var CN=Au(),doe=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#n)return this.#n;let r=new Headers;if(!this.#n&&this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter)),!this.regionUrl)throw new RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let n={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:r};CN.AuthClient.setMethodName(n,"getAwsRegion");let i=await e.transporter.request(n);return i.data.substr(0,i.data.length-1)}async getAwsSecurityCredentials(e){if(this.#i)return this.#i;let r=new Headers;this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter));let n=await this.#t(r,e.transporter),i=await this.#r(n,r,e.transporter);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,token:i.Token}}async#e(e){let r={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return CN.AuthClient.setMethodName(r,"#getImdsV2SessionToken"),(await e.request(r)).data}async#t(e,r){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let n={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return CN.AuthClient.setMethodName(n,"#getAwsRoleName"),(await r.request(n)).data}async#r(e,r,n){let i={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:r};return CN.AuthClient.setMethodName(i,"#retrieveAwsSecurityCredentials"),(await n.request(i)).data}get#n(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get#i(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}};TN.DefaultAwsSecurityCredentialsSupplier=doe});var foe=m(ON=>{"use strict";Object.defineProperty(ON,"__esModule",{value:!0});ON.AwsClient=void 0;var gXt=loe(),EXt=Cm(),bXt=OKe(),xKe=ed(),_Xt=to(),poe=class t extends EXt.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static#e="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);let r=(0,xKe.originalOrCamelOptions)(e),n=r.get("credential_source"),i=r.get("aws_security_credentials_supplier");if(!n&&!i)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(n&&i)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(i)this.awsSecurityCredentialsSupplier=i,this.regionalCredVerificationUrl=t.#e,this.credentialSourceType="programmatic";else{let s=(0,xKe.originalOrCamelOptions)(n);this.environmentId=s.get("environment_id");let o=s.get("region_url"),a=s.get("url"),u=s.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new bXt.DefaultAwsSecurityCredentialsSupplier({regionUrl:o,securityCredentialsUrl:a,imdsV2SessionTokenUrl:u}),this.regionalCredVerificationUrl=s.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(!e||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(e[2],10)!==1)throw new Error(`aws version "${e[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new gXt.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...t.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[];return _Xt.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((i,s)=>r.push({key:s,value:i})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))}};ON.AwsClient=poe});var Eoe=m(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.InvalidSubjectTokenError=Ui.InvalidMessageFieldError=Ui.InvalidCodeFieldError=Ui.InvalidTokenTypeFieldError=Ui.InvalidExpirationTimeFieldError=Ui.InvalidSuccessFieldError=Ui.InvalidVersionFieldError=Ui.ExecutableResponseError=Ui.ExecutableResponse=void 0;var xN="urn:ietf:params:oauth:token-type:saml2",hoe="urn:ietf:params:oauth:token-type:id_token",moe="urn:ietf:params:oauth:token-type:jwt",yoe=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new IN("Executable response must contain a 'version' field.");if(e.success===void 0)throw new RN("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==xN&&this.tokenType!==hoe&&this.tokenType!==moe)throw new DN(`Executable response must contain a 'token_type' field when successful and it must be one of ${hoe}, ${moe}, or ${xN}.`);if(this.tokenType===xN){if(!e.saml_response)throw new MA(`Executable response must contain a 'saml_response' field when token_type=${xN}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new MA(`Executable response must contain a 'id_token' field when token_type=${hoe} or ${moe}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new kN("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new MN("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}};Ui.ExecutableResponse=yoe;var op=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};Ui.ExecutableResponseError=op;var IN=class extends op{};Ui.InvalidVersionFieldError=IN;var RN=class extends op{};Ui.InvalidSuccessFieldError=RN;var goe=class extends op{};Ui.InvalidExpirationTimeFieldError=goe;var DN=class extends op{};Ui.InvalidTokenTypeFieldError=DN;var kN=class extends op{};Ui.InvalidCodeFieldError=kN;var MN=class extends op{};Ui.InvalidMessageFieldError=MN;var MA=class extends op{};Ui.InvalidSubjectTokenError=MA});var voe=m(J_=>{"use strict";Object.defineProperty(J_,"__esModule",{value:!0});J_.PluggableAuthHandler=J_.ExecutableError=void 0;var Lg=Eoe(),vXt=require("child_process"),boe=require("fs"),PN=class extends Error{code;constructor(e,r){super(`The executable failed with exit code: ${r} and error message: ${e}.`),this.code=r,Object.setPrototypeOf(this,new.target.prototype)}};J_.ExecutableError=PN;var _oe=class t{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw new Error("No command provided.");if(this.commandComponents=t.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((r,n)=>{let i=vXt.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),s="";i.stdout.on("data",a=>{s+=a}),i.stderr.on("data",a=>{s+=a});let o=setTimeout(()=>(i.removeAllListeners(),i.kill(),n(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);i.on("close",a=>{if(clearTimeout(o),a===0)try{let u=JSON.parse(s),c=new Lg.ExecutableResponse(u);return r(c)}catch(u){return u instanceof Lg.ExecutableResponseError?n(u):n(new Lg.ExecutableResponseError(`The executable returned an invalid response: ${s}`))}else return n(new PN(s,a.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let e;try{e=await boe.promises.realpath(this.outputFile)}catch{return}if(!(await boe.promises.lstat(e)).isFile())return;let r=await boe.promises.readFile(e,{encoding:"utf8"});if(r!=="")try{let n=JSON.parse(r);return new Lg.ExecutableResponse(n).isValid()?new Lg.ExecutableResponse(n):void 0}catch(n){throw n instanceof Lg.ExecutableResponseError?n:new Lg.ExecutableResponseError(`The output file contained an invalid response: ${r}`)}}static parseCommand(e){let r=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!r)throw new Error(`Provided command: "${e}" could not be parsed.`);for(let n=0;n<r.length;n++)r[n][0]==='"'&&r[n].slice(-1)==='"'&&(r[n]=r[n].slice(1,-1));return r}};J_.PluggableAuthHandler=_oe});var woe=m(Y_=>{"use strict";Object.defineProperty(Y_,"__esModule",{value:!0});Y_.PluggableAuthClient=Y_.ExecutableError=void 0;var SXt=Cm(),wXt=Eoe(),IKe=voe(),AXt=voe();Object.defineProperty(Y_,"ExecutableError",{enumerable:!0,get:function(){return AXt.ExecutableError}});var CXt=30*1e3,RKe=5*1e3,DKe=120*1e3,TXt="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",kKe=1,Soe=class extends SXt.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=e.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(e.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=CXt;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<RKe||this.timeoutMillis>DKe)throw new Error(`Timeout must be between ${RKe} and ${DKe} milliseconds.`);this.outputFile=e.credential_source.executable.output_file,this.handler=new IKe.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[TXt]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let e;if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let r=new Map;r.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),r.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),r.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&r.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let n=this.getServiceAccountEmail();n&&r.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",n),e=await this.handler.retrieveResponseFromExecutable(r)}if(e.version>kKe)throw new Error(`Version of executable is not currently supported, maximum supported version is ${kKe}.`);if(!e.success)throw new IKe.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new wXt.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw new Error("Executable response is expired.");return e.subjectToken}};Y_.PluggableAuthClient=Soe});var Coe=m(NN=>{"use strict";Object.defineProperty(NN,"__esModule",{value:!0});NN.ExternalAccountClient=void 0;var OXt=Cm(),xXt=uoe(),IXt=foe(),RXt=woe(),Aoe=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===OXt.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new IXt.AwsClient(e):e.credential_source?.executable?new RXt.PluggableAuthClient(e):new xXt.IdentityPoolClient(e):null}};NN.ExternalAccountClient=Aoe});var xoe=m(Q_=>{"use strict";Object.defineProperty(Q_,"__esModule",{value:!0});Q_.ExternalAccountAuthorizedUserClient=Q_.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var PKe=Au(),MKe=Yse(),NKe=to(),DXt=require("stream"),kXt=Cm();Q_.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var MXt="https://sts.{universeDomain}/v1/oauthtoken",Toe=class t extends MKe.OAuthClientAuthHandler{#e;constructor(e){super(e),this.#e=e.tokenRefreshEndpoint}async refreshToken(e,r){let n={...t.RETRY_CONFIG,url:this.#e,method:"POST",headers:r,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};PKe.AuthClient.setMethodName(n,"refreshToken"),this.applyClientAuthenticationOptions(n);try{let i=await this.transporter.request(n),s=i.data;return s.res=i,s}catch(i){throw i instanceof NKe.GaxiosError&&i.response?(0,MKe.getErrorFromOAuthErrorResponse)(i.response.data,i):i}}},Ooe=class extends PKe.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;let r={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new Toe({tokenRefreshEndpoint:e.token_url??MXt.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:r}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,typeof e?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=kXt.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=NKe.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof DXt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+e.expires_in*1e3,res:e.res},e.refresh_token!==void 0&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Q_.ExternalAccountAuthorizedUserClient=Ooe});var LKe=m(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.GoogleAuth=id.GoogleAuthExceptionMessages=void 0;var PXt=require("child_process"),PA=require("fs"),NXt=to(),NA=vA(),FXt=require("os"),Ioe=require("path"),BXt=SA(),qXt=wse(),LXt=Cse(),jXt=Tse(),X_=Vse(),FKe=Hse(),Z_=Wse(),$Xt=Coe(),FA=Cm(),Roe=Au(),BKe=xoe(),qKe=ed();id.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};var Doe=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#e=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(id.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===id.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId(),e)return this._cachedProjectId=e,e;throw new Error(id.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await NA.universe("universe-domain"),e||=Roe.DEFAULT_UNIVERSE}catch(r){if(r&&r?.response?.status===404)e=Roe.DEFAULT_UNIVERSE;else throw r}return e}async getUniverseDomain(){let e=(0,qKe.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=Roe.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await this.#t(this.cachedCredential,null);let r;if(r=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof X_.JWT?r.scopes=this.scopes:r instanceof FA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(r=await this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof X_.JWT?r.scopes=this.scopes:r instanceof FA.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#t(new qXt.Compute(e));throw new Error(id.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async#t(e,r=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let n=await this.getProjectIdOptional();return r&&(e.quotaProjectId=r),this.cachedCredential=e,{credential:e,projectId:n}}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=NA.getGCPResidency()||await NA.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=Ioe.join(i,".config"))}return r&&(r=Ioe.join(r,"gcloud","application_default_credentials.json"),PA.existsSync(r)||(r=null)),r?await this._getApplicationCredentialsFromFilePath(r,e):null}async _getApplicationCredentialsFromFilePath(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=PA.realpathSync(e),!PA.lstatSync(e).isFile())throw new Error}catch(i){throw i instanceof Error&&(i.message=`The file at ${e} does not exist, or it is not a file. ${i.message}`),i}let n=PA.createReadStream(e);return this.fromStream(n,r)}fromImpersonatedJSON(e){if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==Z_.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${Z_.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");let r=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw new RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let n=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!n)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let i=this.getAnyScopes()??[];return new Z_.Impersonated({...e,sourceClient:r,targetPrincipal:n,targetScopes:Array.isArray(i)?i:[i]})}fromJSON(e,r={}){let n,i=(0,qKe.originalOrCamelOptions)(r).get("universe_domain");return e.type===FKe.USER_REFRESH_ACCOUNT_TYPE?(n=new FKe.UserRefreshClient(r),n.fromJSON(e)):e.type===Z_.IMPERSONATED_ACCOUNT_TYPE?n=this.fromImpersonatedJSON(e):e.type===FA.EXTERNAL_ACCOUNT_TYPE?(n=$Xt.ExternalAccountClient.fromJSON({...e,...r}),n.scopes=this.getAnyScopes()):e.type===BKe.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?n=new BKe.ExternalAccountAuthorizedUserClient({...e,...r}):(r.scopes=this.scopes,n=new X_.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),i&&(n.universeDomain=i),n}_cacheClientFromJSON(e,r){let n=this.fromJSON(e,r);return this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(s=>n(null,s),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let s=[];e.setEncoding("utf8").on("error",i).on("data",o=>s.push(o)).on("end",()=>{try{try{let o=JSON.parse(s.join("")),a=this._cacheClientFromJSON(o,r);return n(a)}catch(o){if(!this.keyFilename)throw o;let a=new X_.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),n(a)}}catch(o){return i(o)}})})}fromAPIKey(e,r={}){return new X_.JWT({...r,apiKey:e})}_isWindows(){let e=FXt.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,PXt.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch{}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=await this.getClient();if(r&&r.projectId)return r.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==FA.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await NA.project("project-id")}catch{return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof Z_.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof FA.BaseExternalAccountClient){let r=e.getServiceAccountEmail();if(r)return{client_email:r,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[r,n]=await Promise.all([NA.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:r,universe_domain:n}}throw new Error(id.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#e=this.#e||this.#r();try{return await this.#e}finally{this.#e=null}}async#r(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=Ioe.resolve(this.keyFilename),r=PA.createReadStream(e);return await this.fromStreamAsync(r,this.clientOptions)}else if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:r}=await this.#t(e);return r}else{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let r=await this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new LXt.IdTokenClient({targetAudience:e,idTokenProvider:r})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let r=e.url,i=await(await this.getClient()).getRequestHeaders(r);return e.headers=NXt.Gaxios.mergeHeaders(e.headers,i),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,jXt.getEnv)()}async sign(e,r){let n=await this.getClient(),i=await this.getUniverseDomain();if(r=r||`https://iamcredentials.${i}/v1/projects/-/serviceAccounts/`,n instanceof Z_.Impersonated)return(await n.sign(e)).signedBlob;let s=(0,BXt.createCrypto)();if(n instanceof X_.JWT&&n.key)return await s.sign(n.key,e);let o=await this.getCredentials();if(!o.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(s,o.client_email,e,r)}async signBlob(e,r,n,i){let s=new URL(i+`${r}:signBlob`);return(await this.request({method:"POST",url:s.href,data:{payload:e.encodeBase64StringUtf8(n)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}};id.GoogleAuth=Doe});var jKe=m(FN=>{"use strict";Object.defineProperty(FN,"__esModule",{value:!0});FN.IAMAuth=void 0;var koe=class{selector;token;constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};FN.IAMAuth=koe});var $Ke=m(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.DownscopedClient=ap.EXPIRATION_TIME_OFFSET=ap.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var KXt=to(),UXt=require("stream"),Moe=Au(),VXt=yN(),GXt="urn:ietf:params:oauth:grant-type:token-exchange",HXt="urn:ietf:params:oauth:token-type:access_token",zXt="urn:ietf:params:oauth:token-type:access_token";ap.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;ap.EXPIRATION_TIME_OFFSET=300*1e3;var Poe=class extends Moe.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,r={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof Moe.AuthClient?{}:e),e instanceof Moe.AuthClient?(this.authClient=e,this.credentialAccessBoundary=r):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>ap.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${ap.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let n of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(n.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new VXt.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let i=await this.getRequestHeaders();e.headers=KXt.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,i),n=await this.transporter.request(e)}catch(i){let s=i.response;if(s){let o=s.status,a=s.config.data instanceof UXt.Readable;if(!r&&(o===401||o===403)&&!a&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw i}return n}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,r={grantType:GXt,requestedTokenType:HXt,subjectToken:e,subjectTokenType:zXt},n=await this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),i=this.authClient.credentials?.expiry_date||null,s=n.expires_in?new Date().getTime()+n.expires_in*1e3:i;return this.cachedDownscopedAccessToken={access_token:n.access_token,expiry_date:s,res:n.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};ap.DownscopedClient=Poe});var KKe=m(BN=>{"use strict";Object.defineProperty(BN,"__esModule",{value:!0});BN.PassThroughClient=void 0;var WXt=Au(),Noe=class extends WXt.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}};BN.PassThroughClient=Noe});var zKe=m(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.GoogleAuth=st.auth=st.PassThroughClient=st.ExternalAccountAuthorizedUserClient=st.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=st.ExecutableError=st.PluggableAuthClient=st.DownscopedClient=st.BaseExternalAccountClient=st.ExternalAccountClient=st.IdentityPoolClient=st.AwsRequestSigner=st.AwsClient=st.UserRefreshClient=st.LoginTicket=st.ClientAuthentication=st.OAuth2Client=st.CodeChallengeMethod=st.Impersonated=st.JWT=st.JWTAccess=st.IdTokenClient=st.IAMAuth=st.GCPEnv=st.Compute=st.DEFAULT_UNIVERSE=st.AuthClient=st.gaxios=st.gcpMetadata=void 0;var UKe=LKe();Object.defineProperty(st,"GoogleAuth",{enumerable:!0,get:function(){return UKe.GoogleAuth}});st.gcpMetadata=vA();st.gaxios=to();var VKe=Au();Object.defineProperty(st,"AuthClient",{enumerable:!0,get:function(){return VKe.AuthClient}});Object.defineProperty(st,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return VKe.DEFAULT_UNIVERSE}});var JXt=wse();Object.defineProperty(st,"Compute",{enumerable:!0,get:function(){return JXt.Compute}});var YXt=Tse();Object.defineProperty(st,"GCPEnv",{enumerable:!0,get:function(){return YXt.GCPEnv}});var QXt=jKe();Object.defineProperty(st,"IAMAuth",{enumerable:!0,get:function(){return QXt.IAMAuth}});var XXt=Cse();Object.defineProperty(st,"IdTokenClient",{enumerable:!0,get:function(){return XXt.IdTokenClient}});var ZXt=Kse();Object.defineProperty(st,"JWTAccess",{enumerable:!0,get:function(){return ZXt.JWTAccess}});var eZt=Vse();Object.defineProperty(st,"JWT",{enumerable:!0,get:function(){return eZt.JWT}});var tZt=Wse();Object.defineProperty(st,"Impersonated",{enumerable:!0,get:function(){return tZt.Impersonated}});var Foe=qg();Object.defineProperty(st,"CodeChallengeMethod",{enumerable:!0,get:function(){return Foe.CodeChallengeMethod}});Object.defineProperty(st,"OAuth2Client",{enumerable:!0,get:function(){return Foe.OAuth2Client}});Object.defineProperty(st,"ClientAuthentication",{enumerable:!0,get:function(){return Foe.ClientAuthentication}});var rZt=bse();Object.defineProperty(st,"LoginTicket",{enumerable:!0,get:function(){return rZt.LoginTicket}});var nZt=Hse();Object.defineProperty(st,"UserRefreshClient",{enumerable:!0,get:function(){return nZt.UserRefreshClient}});var iZt=foe();Object.defineProperty(st,"AwsClient",{enumerable:!0,get:function(){return iZt.AwsClient}});var sZt=loe();Object.defineProperty(st,"AwsRequestSigner",{enumerable:!0,get:function(){return sZt.AwsRequestSigner}});var oZt=uoe();Object.defineProperty(st,"IdentityPoolClient",{enumerable:!0,get:function(){return oZt.IdentityPoolClient}});var aZt=Coe();Object.defineProperty(st,"ExternalAccountClient",{enumerable:!0,get:function(){return aZt.ExternalAccountClient}});var uZt=Cm();Object.defineProperty(st,"BaseExternalAccountClient",{enumerable:!0,get:function(){return uZt.BaseExternalAccountClient}});var cZt=$Ke();Object.defineProperty(st,"DownscopedClient",{enumerable:!0,get:function(){return cZt.DownscopedClient}});var GKe=woe();Object.defineProperty(st,"PluggableAuthClient",{enumerable:!0,get:function(){return GKe.PluggableAuthClient}});Object.defineProperty(st,"ExecutableError",{enumerable:!0,get:function(){return GKe.ExecutableError}});var HKe=xoe();Object.defineProperty(st,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return HKe.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(st,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return HKe.ExternalAccountAuthorizedUserClient}});var lZt=KKe();Object.defineProperty(st,"PassThroughClient",{enumerable:!0,get:function(){return lZt.PassThroughClient}});var dZt=new UKe.GoogleAuth;st.auth=dZt});var Wf=m((PMr,YKe)=>{"use strict";var WKe=["nodebuffer","arraybuffer","fragments"],JKe=typeof Blob<"u";JKe&&WKe.push("blob");YKe.exports={BINARY_TYPES:WKe,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:JKe,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var BA=m((NMr,qN)=>{"use strict";var{EMPTY_BUFFER:pZt}=Wf(),Boe=Buffer[Symbol.species];function fZt(t,e){if(t.length===0)return pZt;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return n<e?new Boe(r.buffer,r.byteOffset,n):r}function QKe(t,e,r,n,i){for(let s=0;s<i;s++)r[n+s]=t[s]^e[s&3]}function XKe(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function hZt(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function qoe(t){if(qoe.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Boe(t):ArrayBuffer.isView(t)?e=new Boe(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),qoe.readOnly=!1),e}qN.exports={concat:fZt,mask:QKe,toArrayBuffer:hZt,toBuffer:qoe,unmask:XKe};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");qN.exports.mask=function(e,r,n,i,s){s<48?QKe(e,r,n,i,s):t.mask(e,r,n,i,s)},qN.exports.unmask=function(e,r){e.length<32?XKe(e,r):t.unmask(e,r)}}catch{}});var tUe=m((FMr,eUe)=>{"use strict";var ZKe=Symbol("kDone"),Loe=Symbol("kRun"),joe=class{constructor(e){this[ZKe]=()=>{this.pending--,this[Loe]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Loe]()}[Loe](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[ZKe])}}};eUe.exports=joe});var LA=m((BMr,sUe)=>{"use strict";var qA=require("zlib"),rUe=BA(),mZt=tUe(),{kStatusCode:nUe}=Wf(),yZt=Buffer[Symbol.species],gZt=Buffer.from([0,0,255,255]),jN=Symbol("permessage-deflate"),Jf=Symbol("total-length"),e4=Symbol("callback"),Tm=Symbol("buffers"),t4=Symbol("error"),LN,$oe=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!LN){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;LN=new mZt(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[e4];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){LN.add(i=>{this._decompress(e,r,(s,o)=>{i(),n(s,o)})})}compress(e,r,n){LN.add(i=>{this._compress(e,r,(s,o)=>{i(),n(s,o)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?qA.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=qA.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[jN]=this,this._inflate[Jf]=0,this._inflate[Tm]=[],this._inflate.on("error",bZt),this._inflate.on("data",iUe)}this._inflate[e4]=n,this._inflate.write(e),r&&this._inflate.write(gZt),this._inflate.flush(()=>{let s=this._inflate[t4];if(s){this._inflate.close(),this._inflate=null,n(s);return}let o=rUe.concat(this._inflate[Tm],this._inflate[Jf]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Jf]=0,this._inflate[Tm]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?qA.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=qA.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[Jf]=0,this._deflate[Tm]=[],this._deflate.on("data",EZt)}this._deflate[e4]=n,this._deflate.write(e),this._deflate.flush(qA.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=rUe.concat(this._deflate[Tm],this._deflate[Jf]);r&&(s=new yZt(s.buffer,s.byteOffset,s.length-4)),this._deflate[e4]=null,this._deflate[Jf]=0,this._deflate[Tm]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}};sUe.exports=$oe;function EZt(t){this[Tm].push(t),this[Jf]+=t.length}function iUe(t){if(this[Jf]+=t.length,this[jN]._maxPayload<1||this[Jf]<=this[jN]._maxPayload){this[Tm].push(t);return}this[t4]=new RangeError("Max payload size exceeded"),this[t4].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[t4][nUe]=1009,this.removeListener("data",iUe),this.reset()}function bZt(t){if(this[jN]._inflate=null,this[t4]){this[e4](this[t4]);return}t[nUe]=1007,this[e4](t)}});var r4=m((qMr,$N)=>{"use strict";var{isUtf8:oUe}=require("buffer"),{hasBlob:_Zt}=Wf(),vZt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function SZt(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Koe(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function wZt(t){return _Zt&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}$N.exports={isBlob:wZt,isValidStatusCode:SZt,isValidUTF8:Koe,tokenChars:vZt};if(oUe)$N.exports.isValidUTF8=function(t){return t.length<24?Koe(t):oUe(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");$N.exports.isValidUTF8=function(e){return e.length<32?Koe(e):t(e)}}catch{}});var zoe=m((LMr,fUe)=>{"use strict";var{Writable:AZt}=require("stream"),aUe=LA(),{BINARY_TYPES:CZt,EMPTY_BUFFER:uUe,kStatusCode:TZt,kWebSocket:OZt}=Wf(),{concat:Uoe,toArrayBuffer:xZt,unmask:IZt}=BA(),{isValidStatusCode:RZt,isValidUTF8:cUe}=r4(),KN=Buffer[Symbol.species],$c=0,lUe=1,dUe=2,pUe=3,Voe=4,Goe=5,UN=6,Hoe=class extends AZt{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||CZt[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[OZt]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=$c}_write(e,r,n){if(this._opcode===8&&this._state==$c)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new KN(n.buffer,n.byteOffset+e,n.length-e),new KN(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new KN(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case $c:this.getInfo(e);break;case lUe:this.getPayloadLength16(e);break;case dUe:this.getPayloadLength64(e);break;case pUe:this.getMask();break;case Voe:this.getData(e);break;case Goe:case UN:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let i=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(i);return}let n=(r[0]&64)===64;if(n&&!this._extensions[aUe.extensionName]){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(!this._fragmented){let i=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let i=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(i);return}if(n){let i=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(i);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let i=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(i);return}}else{let i=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(i);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let i=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(i);return}}else if(this._masked){let i=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(i);return}this._payloadLength===126?this._state=lUe:this._payloadLength===127?this._state=dUe:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let i=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(i);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=pUe:this._state=Voe}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Voe}getData(e){let r=uUe;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&IZt(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Goe,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[aUe.extensionName].decompress(e,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===$c&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=$c;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let i;this._binaryType==="nodebuffer"?i=Uoe(n,r):this._binaryType==="arraybuffer"?i=xZt(Uoe(n,r)):this._binaryType==="blob"?i=new Blob(n):i=n,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=$c):(this._state=UN,setImmediate(()=>{this.emit("message",i,!0),this._state=$c,this.startLoop(e)}))}else{let i=Uoe(n,r);if(!this._skipUTF8Validation&&!cUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===Goe||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=$c):(this._state=UN,setImmediate(()=>{this.emit("message",i,!1),this._state=$c,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,uUe),this.end();else{let n=e.readUInt16BE(0);if(!RZt(n)){let s=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let i=new KN(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!cUe(i)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",n,i),this.end()}this._state=$c;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=$c):(this._state=UN,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=$c,this.startLoop(r)}))}createError(e,r,n,i,s){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[TZt]=i,o}};fUe.exports=Hoe});var Yoe=m(($Mr,yUe)=>{"use strict";var{Duplex:jMr}=require("stream"),{randomFillSync:DZt}=require("crypto"),hUe=LA(),{EMPTY_BUFFER:kZt,kWebSocket:MZt,NOOP:PZt}=Wf(),{isBlob:n4,isValidStatusCode:NZt}=r4(),{mask:mUe,toBuffer:jg}=BA(),Kc=Symbol("kByteLength"),FZt=Buffer.alloc(4),VN=8*1024,$g,i4=VN,sd=0,BZt=1,qZt=2,Woe=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=sd,this.onerror=PZt,this[MZt]=void 0}static frame(e,r){let n,i=!1,s=2,o=!1;r.mask&&(n=r.maskBuffer||FZt,r.generateMask?r.generateMask(n):(i4===VN&&($g===void 0&&($g=Buffer.alloc(VN)),DZt($g,0,VN),i4=0),n[0]=$g[i4++],n[1]=$g[i4++],n[2]=$g[i4++],n[3]=$g[i4++]),o=(n[0]|n[1]|n[2]|n[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Kc]!==void 0?a=r[Kc]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(s+=8,u=127):a>125&&(s+=2,u=126);let c=Buffer.allocUnsafe(i?a+s:s);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[s-4]=n[0],c[s-3]=n[1],c[s-2]=n[2],c[s-1]=n[3],o?[c,e]:i?(mUe(e,n,c,s,a),[c]):(mUe(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let s;if(e===void 0)s=kZt;else{if(typeof e!="number"||!NZt(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Kc]:s.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==sd?this.enqueue([this.dispatch,s,!1,o,i]):this.sendFrame(t.frame(s,o),i)}ping(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):n4(e)?(i=e.size,s=!1):(e=jg(e),i=e.length,s=jg.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Kc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};n4(e)?this._state!==sd?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==sd?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let i,s;if(typeof e=="string"?(i=Buffer.byteLength(e),s=!1):n4(e)?(i=e.size,s=!1):(e=jg(e),i=e.length,s=jg.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Kc]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};n4(e)?this._state!==sd?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==sd?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let i=this._extensions[hUe.extensionName],s=r.binary?2:1,o=r.compress,a,u;typeof e=="string"?(a=Buffer.byteLength(e),u=!1):n4(e)?(a=e.size,u=!1):(e=jg(e),a=e.length,u=jg.readOnly),this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=i._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let c={[Kc]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:u,rsv1:o};n4(e)?this._state!==sd?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==sd?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,i){this._bufferedBytes+=n[Kc],this._state=qZt,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Joe,this,a,i);return}this._bufferedBytes-=n[Kc];let o=jg(s);r?this.dispatch(o,r,n,i):(this._state=sd,this.sendFrame(t.frame(o,n),i),this.dequeue())}).catch(s=>{process.nextTick(LZt,this,s,i)})}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let s=this._extensions[hUe.extensionName];this._bufferedBytes+=n[Kc],this._state=BZt,s.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");Joe(this,u,i);return}this._bufferedBytes-=n[Kc],this._state=sd,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;this._state===sd&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Kc],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Kc],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};yUe.exports=Woe;function Joe(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let i=t._queue[n],s=i[i.length-1];typeof s=="function"&&s(e)}}function LZt(t,e,r){Joe(t,e,r),t.onerror(e)}});var CUe=m((KMr,AUe)=>{"use strict";var{kForOnEventAttribute:jA,kListener:Qoe}=Wf(),gUe=Symbol("kCode"),EUe=Symbol("kData"),bUe=Symbol("kError"),_Ue=Symbol("kMessage"),vUe=Symbol("kReason"),s4=Symbol("kTarget"),SUe=Symbol("kType"),wUe=Symbol("kWasClean"),Yf=class{constructor(e){this[s4]=null,this[SUe]=e}get target(){return this[s4]}get type(){return this[SUe]}};Object.defineProperty(Yf.prototype,"target",{enumerable:!0});Object.defineProperty(Yf.prototype,"type",{enumerable:!0});var Kg=class extends Yf{constructor(e,r={}){super(e),this[gUe]=r.code===void 0?0:r.code,this[vUe]=r.reason===void 0?"":r.reason,this[wUe]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[gUe]}get reason(){return this[vUe]}get wasClean(){return this[wUe]}};Object.defineProperty(Kg.prototype,"code",{enumerable:!0});Object.defineProperty(Kg.prototype,"reason",{enumerable:!0});Object.defineProperty(Kg.prototype,"wasClean",{enumerable:!0});var o4=class extends Yf{constructor(e,r={}){super(e),this[bUe]=r.error===void 0?null:r.error,this[_Ue]=r.message===void 0?"":r.message}get error(){return this[bUe]}get message(){return this[_Ue]}};Object.defineProperty(o4.prototype,"error",{enumerable:!0});Object.defineProperty(o4.prototype,"message",{enumerable:!0});var $A=class extends Yf{constructor(e,r={}){super(e),this[EUe]=r.data===void 0?null:r.data}get data(){return this[EUe]}};Object.defineProperty($A.prototype,"data",{enumerable:!0});var jZt={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[jA]&&i[Qoe]===e&&!i[jA])return;let n;if(t==="message")n=function(s,o){let a=new $A("message",{data:o?s:s.toString()});a[s4]=this,GN(e,this,a)};else if(t==="close")n=function(s,o){let a=new Kg("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[s4]=this,GN(e,this,a)};else if(t==="error")n=function(s){let o=new o4("error",{error:s,message:s.message});o[s4]=this,GN(e,this,o)};else if(t==="open")n=function(){let s=new Yf("open");s[s4]=this,GN(e,this,s)};else return;n[jA]=!!r[jA],n[Qoe]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Qoe]===e&&!r[jA]){this.removeListener(t,r);break}}};AUe.exports={CloseEvent:Kg,ErrorEvent:o4,Event:Yf,EventTarget:jZt,MessageEvent:$A};function GN(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Xoe=m((UMr,TUe)=>{"use strict";var{tokenChars:KA}=r4();function up(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function $Zt(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,s=!1,o,a,u=-1,c=-1,l=-1,d=0;for(;d<t.length;d++)if(c=t.charCodeAt(d),o===void 0)if(l===-1&&KA[c]===1)u===-1&&(u=d);else if(d!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);c===44?(up(e,f,r),r=Object.create(null)):o=f,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(l===-1&&KA[c]===1)u===-1&&(u=d);else if(c===32||c===9)l===-1&&u!==-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d),up(r,t.slice(u,l),!0),c===44&&(up(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,d),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(i){if(KA[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1?u=d:n||(n=!0),i=!1}else if(s)if(KA[c]===1)u===-1&&(u=d);else if(c===34&&u!==-1)s=!1,l=d;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&t.charCodeAt(d-1)===61)s=!0;else if(l===-1&&KA[c]===1)u===-1&&(u=d);else if(u!==-1&&(c===32||c===9))l===-1&&(l=d);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1&&(l=d);let f=t.slice(u,l);n&&(f=f.replace(/\\/g,""),n=!1),up(r,a,f),c===44&&(up(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(u===-1||s||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=d);let p=t.slice(u,l);return o===void 0?up(e,p,r):(a===void 0?up(r,p,!0):n?up(r,a,p.replace(/\\/g,"")):up(r,a,p),up(e,o,r)),e}function KZt(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}TUe.exports={format:KZt,parse:$Zt}});var JN=m((HMr,qUe)=>{"use strict";var UZt=require("events"),VZt=require("https"),GZt=require("http"),IUe=require("net"),HZt=require("tls"),{randomBytes:zZt,createHash:WZt}=require("crypto"),{Duplex:VMr,Readable:GMr}=require("stream"),{URL:Zoe}=require("url"),Om=LA(),JZt=zoe(),YZt=Yoe(),{isBlob:QZt}=r4(),{BINARY_TYPES:OUe,EMPTY_BUFFER:HN,GUID:XZt,kForOnEventAttribute:eae,kListener:ZZt,kStatusCode:eer,kWebSocket:Is,NOOP:RUe}=Wf(),{EventTarget:{addEventListener:ter,removeEventListener:rer}}=CUe(),{format:ner,parse:ier}=Xoe(),{toBuffer:ser}=BA(),oer=30*1e3,DUe=Symbol("kAborted"),tae=[8,13],Qf=["CONNECTING","OPEN","CLOSING","CLOSED"],aer=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,$n=class t extends UZt{constructor(e,r,n){super(),this._binaryType=OUe[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=HN,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),kUe(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){OUe.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new JZt({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),s=new YZt(e,this._extensions,n.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[Is]=this,s[Is]=this,e[Is]=this,i.on("conclude",ler),i.on("drain",der),i.on("error",per),i.on("message",fer),i.on("ping",her),i.on("pong",mer),s.onerror=yer,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",NUe),e.on("data",WN),e.on("end",FUe),e.on("error",BUe),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Om.extensionName]&&this._extensions[Om.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Iu(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),PUe(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){rae(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||HN,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){rae(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||HN,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){rae(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Om.extensionName]||(i.compress=!1),this._sender.send(e||HN,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Iu(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty($n,"CONNECTING",{enumerable:!0,value:Qf.indexOf("CONNECTING")});Object.defineProperty($n.prototype,"CONNECTING",{enumerable:!0,value:Qf.indexOf("CONNECTING")});Object.defineProperty($n,"OPEN",{enumerable:!0,value:Qf.indexOf("OPEN")});Object.defineProperty($n.prototype,"OPEN",{enumerable:!0,value:Qf.indexOf("OPEN")});Object.defineProperty($n,"CLOSING",{enumerable:!0,value:Qf.indexOf("CLOSING")});Object.defineProperty($n.prototype,"CLOSING",{enumerable:!0,value:Qf.indexOf("CLOSING")});Object.defineProperty($n,"CLOSED",{enumerable:!0,value:Qf.indexOf("CLOSED")});Object.defineProperty($n.prototype,"CLOSED",{enumerable:!0,value:Qf.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty($n.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty($n.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[eae])return e[ZZt];return null},set(e){for(let r of this.listeners(t))if(r[eae]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[eae]:!0})}})});$n.prototype.addEventListener=ter;$n.prototype.removeEventListener=rer;qUe.exports=$n;function kUe(t,e,r,n){let i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:tae[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=i.autoPong,!tae.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${tae.join(", ")})`);let s;if(e instanceof Zoe)s=e;else try{s=new Zoe(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",u;if(s.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!s.pathname?u="The URL's pathname is empty":s.hash&&(u="The URL contains a fragment identifier"),u){let g=new SyntaxError(u);if(t._redirects===0)throw g;zN(t,g);return}let c=o?443:80,l=zZt(16).toString("base64"),d=o?VZt.request:GZt.request,p=new Set,f;if(i.createConnection=i.createConnection||(o?cer:uer),i.defaultPort=i.defaultPort||c,i.port=s.port||c,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new Om(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=ner({[Om.extensionName]:f.offer()})),r.length){for(let g of r){if(typeof g!="string"||!aer.test(g)||p.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(g)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){let g=i.path.split(":");i.socketPath=g[0],i.path=g[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?i.socketPath:s.host;let g=n&&n.headers;if(n={...n,headers:{}},g)for(let[_,S]of Object.entries(g))n.headers[_.toLowerCase()]=S}else if(t.listenerCount("redirect")===0){let g=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!g||t._originalSecure&&!o)&&(delete i.headers.authorization,delete i.headers.cookie,g||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=d(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=d(i);i.timeout&&h.on("timeout",()=>{Iu(t,h,"Opening handshake has timed out")}),h.on("error",g=>{h===null||h[DUe]||(h=t._req=null,zN(t,g))}),h.on("response",g=>{let _=g.headers.location,S=g.statusCode;if(_&&i.followRedirects&&S>=300&&S<400){if(++t._redirects>i.maxRedirects){Iu(t,h,"Maximum redirects exceeded");return}h.abort();let w;try{w=new Zoe(_,e)}catch{let A=new SyntaxError(`Invalid URL: ${_}`);zN(t,A);return}kUe(t,w,r,n)}else t.emit("unexpected-response",h,g)||Iu(t,h,`Unexpected server response: ${g.statusCode}`)}),h.on("upgrade",(g,_,S)=>{if(t.emit("upgrade",g),t.readyState!==$n.CONNECTING)return;h=t._req=null;let w=g.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){Iu(t,_,"Invalid Upgrade header");return}let C=WZt("sha1").update(l+XZt).digest("base64");if(g.headers["sec-websocket-accept"]!==C){Iu(t,_,"Invalid Sec-WebSocket-Accept header");return}let A=g.headers["sec-websocket-protocol"],O;if(A!==void 0?p.size?p.has(A)||(O="Server sent an invalid subprotocol"):O="Server sent a subprotocol but none was requested":p.size&&(O="Server sent no subprotocol"),O){Iu(t,_,O);return}A&&(t._protocol=A);let x=g.headers["sec-websocket-extensions"];if(x!==void 0){if(!f){Iu(t,_,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let R;try{R=ier(x)}catch{Iu(t,_,"Invalid Sec-WebSocket-Extensions header");return}let M=Object.keys(R);if(M.length!==1||M[0]!==Om.extensionName){Iu(t,_,"Server indicated an extension that was not requested");return}try{f.accept(R[Om.extensionName])}catch{Iu(t,_,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Om.extensionName]=f}t.setSocket(_,S,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function zN(t,e){t._readyState=$n.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function uer(t){return t.path=t.socketPath,IUe.connect(t)}function cer(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=IUe.isIP(t.host)?"":t.host),HZt.connect(t)}function Iu(t,e,r){t._readyState=$n.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Iu),e.setHeader?(e[DUe]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(zN,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function rae(t,e,r){if(e){let n=QZt(e)?e.size:ser(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${Qf[t.readyState]})`);process.nextTick(r,n)}}function ler(t,e){let r=this[Is];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Is]!==void 0&&(r._socket.removeListener("data",WN),process.nextTick(MUe,r._socket),t===1005?r.close():r.close(t,e))}function der(){let t=this[Is];t.isPaused||t._socket.resume()}function per(t){let e=this[Is];e._socket[Is]!==void 0&&(e._socket.removeListener("data",WN),process.nextTick(MUe,e._socket),e.close(t[eer])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function xUe(){this[Is].emitClose()}function fer(t,e){this[Is].emit("message",t,e)}function her(t){let e=this[Is];e._autoPong&&e.pong(t,!this._isServer,RUe),e.emit("ping",t)}function mer(t){this[Is].emit("pong",t)}function MUe(t){t.resume()}function yer(t){let e=this[Is];e.readyState!==$n.CLOSED&&(e.readyState===$n.OPEN&&(e._readyState=$n.CLOSING,PUe(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function PUe(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),oer)}function NUe(){let t=this[Is];this.removeListener("close",NUe),this.removeListener("data",WN),this.removeListener("end",FUe),t._readyState=$n.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[Is]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",xUe),t._receiver.on("finish",xUe))}function WN(t){this[Is]._receiver.write(t)||this.pause()}function FUe(){let t=this[Is];t._readyState=$n.CLOSING,t._receiver.end(),this.end()}function BUe(){let t=this[Is];this.removeListener("error",BUe),this.on("error",RUe),t&&(t._readyState=$n.CLOSING,this.destroy())}});var KUe=m((WMr,$Ue)=>{"use strict";var zMr=JN(),{Duplex:ger}=require("stream");function LUe(t){t.emit("close")}function Eer(){!this.destroyed&&this._writableState.finished&&this.destroy()}function jUe(t){this.removeListener("error",jUe),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function ber(t,e){let r=!0,n=new ger({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&n._readableState.objectMode?s.toString():s;n.push(a)||t.pause()}),t.once("error",function(s){n.destroyed||(r=!1,n.destroy(s))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,s){if(t.readyState===t.CLOSED){s(i),process.nextTick(LUe,n);return}let o=!1;t.once("error",function(u){o=!0,s(u)}),t.once("close",function(){o||s(i),process.nextTick(LUe,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,s,o)});return}t.send(i,o)},n.on("end",Eer),n.on("error",jUe),n}$Ue.exports=ber});var VUe=m((JMr,UUe)=>{"use strict";var{tokenChars:_er}=r4();function ver(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let o=t.charCodeAt(i);if(n===-1&&_er[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,i);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}UUe.exports={parse:ver}});var QUe=m((QMr,YUe)=>{"use strict";var Ser=require("events"),YN=require("http"),{Duplex:YMr}=require("stream"),{createHash:wer}=require("crypto"),GUe=Xoe(),Ug=LA(),Aer=VUe(),Cer=JN(),{GUID:Ter,kWebSocket:Oer}=Wf(),xer=/^[+/0-9A-Za-z]{22}==$/,HUe=0,zUe=1,JUe=2,nae=class extends Ser{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Cer,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=YN.createServer((n,i)=>{let s=YN.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Ier(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=HUe}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===JUe){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(UA,this);return}if(e&&this.once("close",e),this._state!==zUe)if(this._state=zUe,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(UA,this):process.nextTick(UA,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{UA(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",WUe);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){Vg(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){Vg(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!xer.test(s)){Vg(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==13&&a!==8){Vg(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){VA(r,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(u!==void 0)try{c=Aer.parse(u)}catch{Vg(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&l!==void 0){let p=new Ug(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let f=GUe.parse(l);f[Ug.extensionName]&&(p.accept(f[Ug.extensionName]),d[Ug.extensionName]=p)}catch{Vg(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let p={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(p,(f,h,g,_)=>{if(!f)return VA(r,h||401,g,_);this.completeUpgrade(d,s,c,e,r,n,i)});return}if(!this.options.verifyClient(p))return VA(r,401)}this.completeUpgrade(d,s,c,e,r,n,i)}completeUpgrade(e,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[Oer])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>HUe)return VA(s,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${wer("sha1").update(r+Ter).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let d=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),l._protocol=d)}if(e[Ug.extensionName]){let d=e[Ug.extensionName].params,p=GUe.format({[Ug.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=e}this.emit("headers",c,i),s.write(c.concat(`\r
`).join(`\r
`)),s.removeListener("error",WUe),l.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(UA,this)})),a(l,i)}};YUe.exports=nae;function Ier(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function UA(t){t._state=JUe,t.emit("close")}function WUe(){this.destroy()}function VA(t,e,r,n){r=r||YN.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${YN.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function Vg(t,e,r,n,i,s){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,Vg),t.emit("wsClientError",o,r,e)}else VA(r,n,i,s)}});var Rer,Der,ker,iae,Mer,XUe=ce(()=>{Rer=Ct(KUe(),1),Der=Ct(zoe(),1),ker=Ct(Yoe(),1),iae=Ct(JN(),1),Mer=Ct(QUe(),1)});function Ber(){return{geminiUrl:Ner,vertexUrl:Fer}}function qer(t,e,r,n){var i,s;if(!t?.baseUrl){let o=Ber();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:r:(s=o.geminiUrl)!==null&&s!==void 0?s:n}return t.baseUrl}function rt(t,e){let r=/\{([^}]+)\}/g;return t.replace(r,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function b(t,e,r){for(let s=0;s<e.length-1;s++){let o=e[s];if(o.endsWith("[]")){let a=o.slice(0,-2);if(!(a in t))if(Array.isArray(r))t[a]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){let u=t[a];if(Array.isArray(r))for(let c=0;c<u.length;c++){let l=u[c];b(l,e.slice(s+1),r[c])}else for(let c of u)b(c,e.slice(s+1),r)}return}else if(o.endsWith("[0]")){let a=o.slice(0,-3);a in t||(t[a]=[{}]);let u=t[a];b(u[0],e.slice(s+1),r);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}let n=e[e.length-1],i=t[n];if(i!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===i)return;if(typeof i=="object"&&typeof r=="object"&&i!==null&&r!==null)Object.assign(i,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function y(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;let i=e[n];if(i.endsWith("[]")){let s=i.slice(0,-2);if(s in t){let o=t[s];return Array.isArray(o)?o.map(a=>y(a,e.slice(n+1),r)):r}else return r}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function Ler(t,e){for(let[r,n]of Object.entries(e)){let i=r.split("."),s=n.split("."),o=new Set,a=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){a=u;break}if(a!==-1&&s.length>a)for(let u=a;u<s.length;u++){let c=s[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}sae(t,i,s,0,o)}}function sae(t,e,r,n,i){if(n>=e.length||typeof t!="object"||t===null)return;let s=e[n];if(s.endsWith("[]")){let o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(let u of a[o])sae(u,e,r,n+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(let c of a)u[c]=o[c];for(let[c,l]of Object.entries(u)){let d=[];for(let p of r.slice(n))p==="*"?d.push(c):d.push(p);b(o,d,l)}for(let c of a)delete o[c]}}else{let o=t;s in o&&sae(o[s],e,r,n+1,i)}}function Uae(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function jer(t){let e={},r=y(t,["operationName"]);r!=null&&b(e,["operationName"],r);let n=y(t,["resourceName"]);return n!=null&&b(e,["_url","resourceName"],n),e}function $er(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],Uer(o)),e}function Ker(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response"]);return o!=null&&b(e,["response"],Ver(o)),e}function Uer(t){let e={},r=y(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Ger(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function Ver(t){let e={},r=y(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Her(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function Ger(t){let e={},r=y(t,["video"]);return r!=null&&b(e,["video"],Jer(r)),e}function Her(t){let e={},r=y(t,["_self"]);return r!=null&&b(e,["video"],Yer(r)),e}function zer(t){let e={},r=y(t,["operationName"]);return r!=null&&b(e,["_url","operationName"],r),e}function Wer(t){let e={},r=y(t,["operationName"]);return r!=null&&b(e,["_url","operationName"],r),e}function Jer(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["encodedVideo"]);n!=null&&b(e,["videoBytes"],Uae(n));let i=y(t,["encoding"]);return i!=null&&b(e,["mimeType"],i),e}function Yer(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["uri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],Uae(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Mr(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cGe(t,e){let r=Mr(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function lGe(t){return Array.isArray(t)?t.map(e=>lF(e)):[lF(t)]}function lF(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dGe(t){let e=lF(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pGe(t){let e=lF(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VVe(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fGe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>VVe(e)):[VVe(t)]}function gae(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function GVe(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function HVe(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function To(t){if(t==null)throw new Error("ContentUnion is required");return gae(t)?t:{role:"user",parts:fGe(t)}}function Vae(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{let n=To(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){let r=To(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>To(r)):[To(e)]}function Uc(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(GVe(t)||HVe(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[To(t)]}let e=[],r=[],n=gae(t[0]);for(let i of t){let s=gae(i);if(s!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(GVe(i)||HVe(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(i)}}return n||e.push({role:"user",parts:fGe(r)}),e}function Qer(t,e){t.includes("null")&&(e.nullable=!0);let r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(xm).includes(r[0].toUpperCase())?r[0].toUpperCase():xm.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let n of r)e.anyOf.push({type:Object.values(xm).includes(n.toUpperCase())?n.toUpperCase():xm.TYPE_UNSPECIFIED})}}function u4(t){let e={},r=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Qer(t.type,e);for(let[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(xm).includes(a.toUpperCase())?a.toUpperCase():xm.TYPE_UNSPECIFIED}else if(r.includes(o))e[o]=u4(a);else if(n.includes(o)){let u=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(u4(c))}e[o]=u}else if(i.includes(o)){let u={};for(let[c,l]of Object.entries(a))u[c]=u4(l);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Gae(t){return u4(t)}function Hae(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function zae(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function p4(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=u4(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=u4(e.response));return t}function f4(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let r of t)e.push(r);return e}function Xer(t,e,r,n=1){let i=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:i?`${r}/${e}`:e}function Zf(t,e){if(typeof e!="string")throw new Error("name must be a string");return Xer(t,e,"cachedContents")}function hGe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Im(t){return Uae(t)}function Zer(t){return t!=null&&typeof t=="object"&&"name"in t}function mGe(t){return t!=null&&typeof t=="object"&&"video"in t}function yGe(t){return t!=null&&typeof t=="object"&&"uri"in t}function Wae(t){var e;let r;if(Zer(t)&&(r=t.name),!(yGe(t)&&(r=t.uri,r===void 0))&&!(mGe(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){let i=r.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${r}`);r=i[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function gGe(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function EGe(t){for(let e of["models","tunedModels","publisherModels"])if(etr(t,e))return t[e];return[]}function etr(t,e){return t!==null&&typeof t=="object"&&e in t}function ttr(t,e={}){let r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function rtr(t,e={}){let r=[],n=new Set;for(let i of t){let s=i.name;if(n.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);n.add(s);let o=ttr(i,e);o.functionDeclarations&&r.push(...o.functionDeclarations)}return{functionDeclarations:r}}function bGe(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;let n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function ntr(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _Ge(t){if(typeof t!="object"||t===null)return{};let e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;let i=r.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(let o of i){if(typeof o!="object"||o===null)continue;let u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function h4(t,e){let r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function vGe(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function itr(t){let e={},r=y(t,["responsesFile"]);r!=null&&b(e,["fileName"],r);let n=y(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Ntr(o))),b(e,["inlinedResponses"],s)}let i=y(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["inlinedEmbedContentResponses"],s)}return e}function str(t){let e={},r=y(t,["predictionsFormat"]);r!=null&&b(e,["format"],r);let n=y(t,["gcsDestination","outputUriPrefix"]);n!=null&&b(e,["gcsUri"],n);let i=y(t,["bigqueryDestination","outputUri"]);return i!=null&&b(e,["bigqueryUri"],i),e}function otr(t){let e={},r=y(t,["format"]);r!=null&&b(e,["predictionsFormat"],r);let n=y(t,["gcsUri"]);n!=null&&b(e,["gcsDestination","outputUriPrefix"],n);let i=y(t,["bigqueryUri"]);if(i!=null&&b(e,["bigqueryDestination","outputUri"],i),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function QN(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata","displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["metadata","state"]);i!=null&&b(e,["state"],vGe(i));let s=y(t,["metadata","createTime"]);s!=null&&b(e,["createTime"],s);let o=y(t,["metadata","endTime"]);o!=null&&b(e,["endTime"],o);let a=y(t,["metadata","updateTime"]);a!=null&&b(e,["updateTime"],a);let u=y(t,["metadata","model"]);u!=null&&b(e,["model"],u);let c=y(t,["metadata","output"]);return c!=null&&b(e,["dest"],itr(_Ge(c))),e}function Eae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["state"]);i!=null&&b(e,["state"],vGe(i));let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["createTime"]);o!=null&&b(e,["createTime"],o);let a=y(t,["startTime"]);a!=null&&b(e,["startTime"],a);let u=y(t,["endTime"]);u!=null&&b(e,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(e,["updateTime"],c);let l=y(t,["model"]);l!=null&&b(e,["model"],l);let d=y(t,["inputConfig"]);d!=null&&b(e,["src"],atr(d));let p=y(t,["outputConfig"]);return p!=null&&b(e,["dest"],str(_Ge(p))),e}function atr(t){let e={},r=y(t,["instancesFormat"]);r!=null&&b(e,["format"],r);let n=y(t,["gcsSource","uris"]);n!=null&&b(e,["gcsUri"],n);let i=y(t,["bigquerySource","inputUri"]);return i!=null&&b(e,["bigqueryUri"],i),e}function utr(t,e){let r={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let n=y(e,["fileName"]);n!=null&&b(r,["fileName"],n);let i=y(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ptr(t,o))),b(r,["requests","requests"],s)}return r}function ctr(t){let e={},r=y(t,["format"]);r!=null&&b(e,["instancesFormat"],r);let n=y(t,["gcsUri"]);n!=null&&b(e,["gcsSource","uris"],n);let i=y(t,["bigqueryUri"]);if(i!=null&&b(e,["bigquerySource","inputUri"],i),y(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ltr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function dtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function ptr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function ftr(t){let e={},r=y(t,["content"]);r!=null&&b(e,["content"],r);let n=y(t,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],htr(n));let i=y(t,["tokenCount"]);i!=null&&b(e,["tokenCount"],i);let s=y(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);let o=y(t,["urlContextMetadata"]);o!=null&&b(e,["urlContextMetadata"],o);let a=y(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);let u=y(t,["groundingMetadata"]);u!=null&&b(e,["groundingMetadata"],u);let c=y(t,["index"]);c!=null&&b(e,["index"],c);let l=y(t,["logprobsResult"]);l!=null&&b(e,["logprobsResult"],l);let d=y(t,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>f)),b(e,["safetyRatings"],p)}return e}function htr(t){let e={},r=y(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["citations"],n)}return e}function SGe(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Ktr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function mtr(t,e){let r={},n=y(t,["displayName"]);if(e!==void 0&&n!=null&&b(e,["batch","displayName"],n),y(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function ytr(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["dest"]);return e!==void 0&&i!=null&&b(e,["outputConfig"],otr(ntr(i))),r}function zVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["batch","inputConfig"],utr(t,bGe(t,i)));let s=y(e,["config"]);return s!=null&&mtr(s,r),r}function gtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["inputConfig"],ctr(bGe(t,i)));let s=y(e,["config"]);return s!=null&&ytr(s,r),r}function Etr(t,e){let r={},n=y(t,["displayName"]);return e!==void 0&&n!=null&&b(e,["batch","displayName"],n),r}function btr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["src"]);i!=null&&b(r,["batch","inputConfig"],Ttr(t,i));let s=y(e,["config"]);return s!=null&&Etr(s,r),r}function _tr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function vtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function Str(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);return s!=null&&b(e,["error"],s),e}function wtr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);return s!=null&&b(e,["error"],s),e}function Atr(t,e){let r={},n=y(e,["contents"]);if(n!=null){let s=Vae(t,n);Array.isArray(s)&&(s=s.map(o=>o)),b(r,["requests[]","request","content"],s)}let i=y(e,["config"]);return i!=null&&(b(r,["_self"],Ctr(i,r)),Ler(r,{"requests[].*":"requests[].request.*"})),r}function Ctr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["requests[]","title"],i);let s=y(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Ttr(t,e){let r={},n=y(e,["fileName"]);n!=null&&b(r,["file_name"],n);let i=y(e,["inlinedRequests"]);return i!=null&&b(r,["requests"],Atr(t,i)),r}function Otr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function xtr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],SGe(To(i)));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],Gae(S));let w=y(e,["responseJsonSchema"]);if(w!=null&&b(n,["responseJsonSchema"],w),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let C=y(e,["safetySettings"]);if(r!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(k=>Utr(k))),b(r,["safetySettings"],U)}let A=y(e,["tools"]);if(r!==void 0&&A!=null){let U=f4(A);Array.isArray(U)&&(U=U.map(k=>Vtr(p4(k)))),b(r,["tools"],U)}let O=y(e,["toolConfig"]);if(r!==void 0&&O!=null&&b(r,["toolConfig"],O),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=y(e,["cachedContent"]);r!==void 0&&x!=null&&b(r,["cachedContent"],Zf(t,x));let R=y(e,["responseModalities"]);R!=null&&b(n,["responseModalities"],R);let M=y(e,["mediaResolution"]);M!=null&&b(n,["mediaResolution"],M);let I=y(e,["speechConfig"]);if(I!=null&&b(n,["speechConfig"],Hae(I)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let F=y(e,["thinkingConfig"]);F!=null&&b(n,["thinkingConfig"],F);let B=y(e,["imageConfig"]);return B!=null&&b(n,["imageConfig"],B),n}function Itr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>ftr(c))),b(e,["candidates"],u)}let i=y(t,["modelVersion"]);i!=null&&b(e,["modelVersion"],i);let s=y(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);let o=y(t,["responseId"]);o!=null&&b(e,["responseId"],o);let a=y(t,["usageMetadata"]);return a!=null&&b(e,["usageMetadata"],a),e}function Rtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function Dtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],h4(t,n)),r}function ktr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Mtr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ptr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["request","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let a=Uc(i);Array.isArray(a)&&(a=a.map(u=>SGe(u))),b(r,["request","contents"],a)}let s=y(e,["metadata"]);s!=null&&b(r,["metadata"],s);let o=y(e,["config"]);return o!=null&&b(r,["request","generationConfig"],xtr(t,o,y(r,["request"],{}))),r}function Ntr(t){let e={},r=y(t,["response"]);r!=null&&b(e,["response"],Itr(r));let n=y(t,["error"]);return n!=null&&b(e,["error"],n),e}function Ftr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);if(e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),y(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function Btr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);e!==void 0&&i!=null&&b(e,["_query","pageToken"],i);let s=y(t,["filter"]);return e!==void 0&&s!=null&&b(e,["_query","filter"],s),r}function qtr(t){let e={},r=y(t,["config"]);return r!=null&&Ftr(r,e),e}function Ltr(t){let e={},r=y(t,["config"]);return r!=null&&Btr(r,e),e}function jtr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>QN(o))),b(e,["batchJobs"],s)}return e}function $tr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Eae(o))),b(e,["batchJobs"],s)}return e}function Ktr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],ltr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],Otr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function Utr(t){let e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=y(t,["category"]);r!=null&&b(e,["category"],r);let n=y(t,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function Vtr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Mtr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],ktr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function Gtr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function WVe(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>prr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function Htr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);e!==void 0&&i!=null&&b(e,["expireTime"],i);let s=y(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);let o=y(t,["contents"]);if(e!==void 0&&o!=null){let l=Uc(o);Array.isArray(l)&&(l=l.map(d=>WVe(d))),b(e,["contents"],l)}let a=y(t,["systemInstruction"]);e!==void 0&&a!=null&&b(e,["systemInstruction"],WVe(To(a)));let u=y(t,["tools"]);if(e!==void 0&&u!=null){let l=u;Array.isArray(l)&&(l=l.map(d=>frr(d))),b(e,["tools"],l)}let c=y(t,["toolConfig"]);if(e!==void 0&&c!=null&&b(e,["toolConfig"],c),y(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function ztr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);e!==void 0&&i!=null&&b(e,["expireTime"],i);let s=y(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);let o=y(t,["contents"]);if(e!==void 0&&o!=null){let d=Uc(o);Array.isArray(d)&&(d=d.map(p=>p)),b(e,["contents"],d)}let a=y(t,["systemInstruction"]);e!==void 0&&a!=null&&b(e,["systemInstruction"],To(a));let u=y(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>hrr(p))),b(e,["tools"],d)}let c=y(t,["toolConfig"]);e!==void 0&&c!=null&&b(e,["toolConfig"],c);let l=y(t,["kmsKeyName"]);return e!==void 0&&l!=null&&b(e,["encryption_spec","kmsKeyName"],l),r}function Wtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],cGe(t,n));let i=y(e,["config"]);return i!=null&&Htr(i,r),r}function Jtr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["model"],cGe(t,n));let i=y(e,["config"]);return i!=null&&ztr(i,r),r}function Ytr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Zf(t,n)),r}function Qtr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Zf(t,n)),r}function Xtr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function Ztr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function err(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function trr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function rrr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Zf(t,n)),r}function nrr(t,e){let r={},n=y(e,["name"]);return n!=null&&b(r,["_url","name"],Zf(t,n)),r}function irr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function srr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function orr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function arr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function urr(t){let e={},r=y(t,["config"]);return r!=null&&orr(r,e),e}function crr(t){let e={},r=y(t,["config"]);return r!=null&&arr(r,e),e}function lrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["cachedContents"],s)}return e}function drr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["cachedContents"],s)}return e}function prr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],Gtr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],err(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function frr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],srr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],irr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function hrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>trr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function mrr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);return e!==void 0&&i!=null&&b(e,["expireTime"],i),r}function yrr(t,e){let r={},n=y(t,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);let i=y(t,["expireTime"]);return e!==void 0&&i!=null&&b(e,["expireTime"],i),r}function grr(t,e){let r={},n=y(e,["name"]);n!=null&&b(r,["_url","name"],Zf(t,n));let i=y(e,["config"]);return i!=null&&mrr(i,r),r}function Err(t,e){let r={},n=y(e,["name"]);n!=null&&b(r,["_url","name"],Zf(t,n));let i=y(e,["config"]);return i!=null&&yrr(i,r),r}function JVe(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dn(t){return this instanceof Dn?(this.v=t,this):new Dn(t)}function c4(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof Dn?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function HA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof JVe=="function"?JVe(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function brr(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:wGe(r)}function wGe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function _rr(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function YVe(t){if(t===void 0||t.length===0)return[];let e=[],r=t.length,n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{let i=[],s=!0;for(;n<r&&t[n].role==="model";)i.push(t[n]),s&&!wGe(t[n])&&(s=!1),n++;s?e.push(...i):e.pop()}return e}function vrr(t){let e={},r=y(t,["file"]);return r!=null&&b(e,["file"],r),e}function Srr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function wrr(t){let e={},r=y(t,["name"]);return r!=null&&b(e,["_url","file"],Wae(r)),e}function Arr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function Crr(t){let e={},r=y(t,["name"]);return r!=null&&b(e,["_url","file"],Wae(r)),e}function Trr(t,e){let r={},n=y(t,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);let i=y(t,["pageToken"]);return e!==void 0&&i!=null&&b(e,["_query","pageToken"],i),r}function Orr(t){let e={},r=y(t,["config"]);return r!=null&&Trr(r,e),e}function xrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["files"],s)}return e}function XN(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Irr(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Vrr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function Rrr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Drr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function krr(t){let e={},r=y(t,["modelSelectionConfig"]);r!=null&&b(e,["modelConfig"],r);let n=y(t,["audioTimestamp"]);n!=null&&b(e,["audioTimestamp"],n);let i=y(t,["candidateCount"]);i!=null&&b(e,["candidateCount"],i);let s=y(t,["enableAffectiveDialog"]);s!=null&&b(e,["enableAffectiveDialog"],s);let o=y(t,["frequencyPenalty"]);o!=null&&b(e,["frequencyPenalty"],o);let a=y(t,["logprobs"]);a!=null&&b(e,["logprobs"],a);let u=y(t,["maxOutputTokens"]);u!=null&&b(e,["maxOutputTokens"],u);let c=y(t,["mediaResolution"]);c!=null&&b(e,["mediaResolution"],c);let l=y(t,["presencePenalty"]);l!=null&&b(e,["presencePenalty"],l);let d=y(t,["responseJsonSchema"]);d!=null&&b(e,["responseJsonSchema"],d);let p=y(t,["responseLogprobs"]);p!=null&&b(e,["responseLogprobs"],p);let f=y(t,["responseMimeType"]);f!=null&&b(e,["responseMimeType"],f);let h=y(t,["responseModalities"]);h!=null&&b(e,["responseModalities"],h);let g=y(t,["responseSchema"]);g!=null&&b(e,["responseSchema"],g);let _=y(t,["routingConfig"]);_!=null&&b(e,["routingConfig"],_);let S=y(t,["seed"]);S!=null&&b(e,["seed"],S);let w=y(t,["speechConfig"]);w!=null&&b(e,["speechConfig"],AGe(w));let C=y(t,["stopSequences"]);C!=null&&b(e,["stopSequences"],C);let A=y(t,["temperature"]);A!=null&&b(e,["temperature"],A);let O=y(t,["thinkingConfig"]);O!=null&&b(e,["thinkingConfig"],O);let x=y(t,["topK"]);x!=null&&b(e,["topK"],x);let R=y(t,["topP"]);if(R!=null&&b(e,["topP"],R),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mrr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Prr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nrr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],zae(d));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],Irr(To(h)));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=f4(g);Array.isArray(x)&&(x=x.map(R=>Hrr(p4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],Grr(_));let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function Frr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],krr(n));let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],AGe(zae(d)));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],To(h));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=f4(g);Array.isArray(x)&&(x=x.map(R=>zrr(p4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],_);let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function Brr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],Nrr(i,r)),r}function qrr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],Frr(i,r)),r}function Lrr(t){let e={},r=y(t,["musicGenerationConfig"]);return r!=null&&b(e,["musicGenerationConfig"],r),e}function jrr(t){let e={},r=y(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["weightedPrompts"],n)}return e}function $rr(t){let e={},r=y(t,["media"]);if(r!=null){let c=lGe(r);Array.isArray(c)&&(c=c.map(l=>XN(l))),b(e,["mediaChunks"],c)}let n=y(t,["audio"]);n!=null&&b(e,["audio"],XN(pGe(n)));let i=y(t,["audioStreamEnd"]);i!=null&&b(e,["audioStreamEnd"],i);let s=y(t,["video"]);s!=null&&b(e,["video"],XN(dGe(s)));let o=y(t,["text"]);o!=null&&b(e,["text"],o);let a=y(t,["activityStart"]);a!=null&&b(e,["activityStart"],a);let u=y(t,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function Krr(t){let e={},r=y(t,["media"]);if(r!=null){let c=lGe(r);Array.isArray(c)&&(c=c.map(l=>l)),b(e,["mediaChunks"],c)}let n=y(t,["audio"]);n!=null&&b(e,["audio"],pGe(n));let i=y(t,["audioStreamEnd"]);i!=null&&b(e,["audioStreamEnd"],i);let s=y(t,["video"]);s!=null&&b(e,["video"],dGe(s));let o=y(t,["text"]);o!=null&&b(e,["text"],o);let a=y(t,["activityStart"]);a!=null&&b(e,["activityStart"],a);let u=y(t,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function Urr(t){let e={},r=y(t,["setupComplete"]);r!=null&&b(e,["setupComplete"],r);let n=y(t,["serverContent"]);n!=null&&b(e,["serverContent"],n);let i=y(t,["toolCall"]);i!=null&&b(e,["toolCall"],i);let s=y(t,["toolCallCancellation"]);s!=null&&b(e,["toolCallCancellation"],s);let o=y(t,["usageMetadata"]);o!=null&&b(e,["usageMetadata"],Wrr(o));let a=y(t,["goAway"]);a!=null&&b(e,["goAway"],a);let u=y(t,["sessionResumptionUpdate"]);return u!=null&&b(e,["sessionResumptionUpdate"],u),e}function Vrr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],XN(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],Rrr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function Grr(t){let e={},r=y(t,["handle"]);if(r!=null&&b(e,["handle"],r),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AGe(t){let e={},r=y(t,["voiceConfig"]);if(r!=null&&b(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let n=y(t,["languageCode"]);return n!=null&&b(e,["languageCode"],n),e}function Hrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Prr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],Mrr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function zrr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Drr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function Wrr(t){let e={},r=y(t,["promptTokenCount"]);r!=null&&b(e,["promptTokenCount"],r);let n=y(t,["cachedContentTokenCount"]);n!=null&&b(e,["cachedContentTokenCount"],n);let i=y(t,["candidatesTokenCount"]);i!=null&&b(e,["responseTokenCount"],i);let s=y(t,["toolUsePromptTokenCount"]);s!=null&&b(e,["toolUsePromptTokenCount"],s);let o=y(t,["thoughtsTokenCount"]);o!=null&&b(e,["thoughtsTokenCount"],o);let a=y(t,["totalTokenCount"]);a!=null&&b(e,["totalTokenCount"],a);let u=y(t,["promptTokensDetails"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["promptTokensDetails"],f)}let c=y(t,["cacheTokensDetails"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["cacheTokensDetails"],f)}let l=y(t,["candidatesTokensDetails"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["responseTokensDetails"],f)}let d=y(t,["toolUsePromptTokensDetails"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>h)),b(e,["toolUsePromptTokensDetails"],f)}let p=y(t,["trafficType"]);return p!=null&&b(e,["trafficType"],p),e}function Jrr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Yrr(t){let e={},r=y(t,["content"]);r!=null&&b(e,["content"],r);let n=y(t,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],Qrr(n));let i=y(t,["tokenCount"]);i!=null&&b(e,["tokenCount"],i);let s=y(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);let o=y(t,["urlContextMetadata"]);o!=null&&b(e,["urlContextMetadata"],o);let a=y(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);let u=y(t,["groundingMetadata"]);u!=null&&b(e,["groundingMetadata"],u);let c=y(t,["index"]);c!=null&&b(e,["index"],c);let l=y(t,["logprobsResult"]);l!=null&&b(e,["logprobsResult"],l);let d=y(t,["safetyRatings"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>f)),b(e,["safetyRatings"],p)}return e}function Qrr(t){let e={},r=y(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),b(e,["citations"],n)}return e}function Xrr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let s=Uc(i);Array.isArray(s)&&(s=s.map(o=>o)),b(r,["contents"],s)}return r}function Zrr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["tokensInfo"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["tokensInfo"],i)}return e}function enr(t){let e={},r=y(t,["values"]);r!=null&&b(e,["values"],r);let n=y(t,["statistics"]);return n!=null&&b(e,["statistics"],tnr(n)),e}function tnr(t){let e={},r=y(t,["truncated"]);r!=null&&b(e,["truncated"],r);let n=y(t,["token_count"]);return n!=null&&b(e,["tokenCount"],n),e}function mF(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>oir(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function rnr(t){let e={},r=y(t,["controlType"]);r!=null&&b(e,["controlType"],r);let n=y(t,["enableControlImageComputation"]);return n!=null&&b(e,["computeControl"],n),e}function nnr(t){let e={};if(y(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function inr(t,e){let r={},n=y(t,["systemInstruction"]);e!==void 0&&n!=null&&b(e,["systemInstruction"],To(n));let i=y(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>IGe(a))),b(e,["tools"],o)}let s=y(t,["generationConfig"]);return e!==void 0&&s!=null&&b(e,["generationConfig"],znr(s)),r}function snr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Uc(i);Array.isArray(o)&&(o=o.map(a=>mF(a))),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&nnr(s),r}function onr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Uc(i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&inr(s,r),r}function anr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["totalTokens"]);n!=null&&b(e,["totalTokens"],n);let i=y(t,["cachedContentTokenCount"]);return i!=null&&b(e,["cachedContentTokenCount"],i),e}function unr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["totalTokens"]);return n!=null&&b(e,["totalTokens"],n),e}function cnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function lnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function dnr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function pnr(t){let e={},r=y(t,["sdkHttpResponse"]);return r!=null&&b(e,["sdkHttpResponse"],r),e}function fnr(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["negativePrompt"]);e!==void 0&&i!=null&&b(e,["parameters","negativePrompt"],i);let s=y(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);let o=y(t,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);let a=y(t,["guidanceScale"]);e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a);let u=y(t,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);let c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&b(e,["parameters","includeSafetyAttributes"],d);let p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);let f=y(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);let h=y(t,["outputMimeType"]);e!==void 0&&h!=null&&b(e,["parameters","outputOptions","mimeType"],h);let g=y(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g);let _=y(t,["addWatermark"]);e!==void 0&&_!=null&&b(e,["parameters","addWatermark"],_);let S=y(t,["labels"]);e!==void 0&&S!=null&&b(e,["labels"],S);let w=y(t,["editMode"]);e!==void 0&&w!=null&&b(e,["parameters","editMode"],w);let C=y(t,["baseSteps"]);return e!==void 0&&C!=null&&b(e,["parameters","editConfig","baseSteps"],C),r}function hnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>pir(u))),b(r,["instances[0]","referenceImages"],a)}let o=y(e,["config"]);return o!=null&&fnr(o,r),r}function mnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>yF(s))),b(e,["generatedImages"],i)}return e}function ynr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["requests[]","title"],i);let s=y(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),y(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function gnr(t,e){let r={},n=y(t,["taskType"]);e!==void 0&&n!=null&&b(e,["instances[]","task_type"],n);let i=y(t,["title"]);e!==void 0&&i!=null&&b(e,["instances[]","title"],i);let s=y(t,["outputDimensionality"]);e!==void 0&&s!=null&&b(e,["parameters","outputDimensionality"],s);let o=y(t,["mimeType"]);e!==void 0&&o!=null&&b(e,["instances[]","mimeType"],o);let a=y(t,["autoTruncate"]);return e!==void 0&&a!=null&&b(e,["parameters","autoTruncate"],a),r}function Enr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let a=Vae(t,i);Array.isArray(a)&&(a=a.map(u=>u)),b(r,["requests[]","content"],a)}let s=y(e,["config"]);s!=null&&ynr(s,r);let o=y(e,["model"]);return o!==void 0&&b(r,["requests[]","model"],Mr(t,o)),r}function bnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Vae(t,i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["instances[]","content"],o)}let s=y(e,["config"]);return s!=null&&gnr(s,r),r}function _nr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>o)),b(e,["embeddings"],s)}let i=y(t,["metadata"]);return i!=null&&b(e,["metadata"],i),e}function vnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions[]","embeddings"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>enr(o))),b(e,["embeddings"],s)}let i=y(t,["metadata"]);return i!=null&&b(e,["metadata"],i),e}function Snr(t){let e={},r=y(t,["endpoint"]);r!=null&&b(e,["name"],r);let n=y(t,["deployedModelId"]);return n!=null&&b(e,["deployedModelId"],n),e}function wnr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Anr(t){let e={};if(y(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let r=y(t,["description"]);r!=null&&b(e,["description"],r);let n=y(t,["name"]);n!=null&&b(e,["name"],n);let i=y(t,["parameters"]);i!=null&&b(e,["parameters"],i);let s=y(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);let o=y(t,["response"]);o!=null&&b(e,["response"],o);let a=y(t,["responseJsonSchema"]);return a!=null&&b(e,["responseJsonSchema"],a),e}function Cnr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],mF(To(i)));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],Gae(S));let w=y(e,["responseJsonSchema"]);if(w!=null&&b(n,["responseJsonSchema"],w),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let C=y(e,["safetySettings"]);if(r!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(k=>fir(k))),b(r,["safetySettings"],U)}let A=y(e,["tools"]);if(r!==void 0&&A!=null){let U=f4(A);Array.isArray(U)&&(U=U.map(k=>bir(p4(k)))),b(r,["tools"],U)}let O=y(e,["toolConfig"]);if(r!==void 0&&O!=null&&b(r,["toolConfig"],O),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let x=y(e,["cachedContent"]);r!==void 0&&x!=null&&b(r,["cachedContent"],Zf(t,x));let R=y(e,["responseModalities"]);R!=null&&b(n,["responseModalities"],R);let M=y(e,["mediaResolution"]);M!=null&&b(n,["mediaResolution"],M);let I=y(e,["speechConfig"]);if(I!=null&&b(n,["speechConfig"],Hae(I)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let F=y(e,["thinkingConfig"]);F!=null&&b(n,["thinkingConfig"],F);let B=y(e,["imageConfig"]);return B!=null&&b(n,["imageConfig"],B),n}function Tnr(t,e,r){let n={},i=y(e,["systemInstruction"]);r!==void 0&&i!=null&&b(r,["systemInstruction"],To(i));let s=y(e,["temperature"]);s!=null&&b(n,["temperature"],s);let o=y(e,["topP"]);o!=null&&b(n,["topP"],o);let a=y(e,["topK"]);a!=null&&b(n,["topK"],a);let u=y(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);let c=y(e,["maxOutputTokens"]);c!=null&&b(n,["maxOutputTokens"],c);let l=y(e,["stopSequences"]);l!=null&&b(n,["stopSequences"],l);let d=y(e,["responseLogprobs"]);d!=null&&b(n,["responseLogprobs"],d);let p=y(e,["logprobs"]);p!=null&&b(n,["logprobs"],p);let f=y(e,["presencePenalty"]);f!=null&&b(n,["presencePenalty"],f);let h=y(e,["frequencyPenalty"]);h!=null&&b(n,["frequencyPenalty"],h);let g=y(e,["seed"]);g!=null&&b(n,["seed"],g);let _=y(e,["responseMimeType"]);_!=null&&b(n,["responseMimeType"],_);let S=y(e,["responseSchema"]);S!=null&&b(n,["responseSchema"],Gae(S));let w=y(e,["responseJsonSchema"]);w!=null&&b(n,["responseJsonSchema"],w);let C=y(e,["routingConfig"]);C!=null&&b(n,["routingConfig"],C);let A=y(e,["modelSelectionConfig"]);A!=null&&b(n,["modelConfig"],A);let O=y(e,["safetySettings"]);if(r!==void 0&&O!=null){let j=O;Array.isArray(j)&&(j=j.map(V=>V)),b(r,["safetySettings"],j)}let x=y(e,["tools"]);if(r!==void 0&&x!=null){let j=f4(x);Array.isArray(j)&&(j=j.map(V=>IGe(p4(V)))),b(r,["tools"],j)}let R=y(e,["toolConfig"]);r!==void 0&&R!=null&&b(r,["toolConfig"],R);let M=y(e,["labels"]);r!==void 0&&M!=null&&b(r,["labels"],M);let I=y(e,["cachedContent"]);r!==void 0&&I!=null&&b(r,["cachedContent"],Zf(t,I));let F=y(e,["responseModalities"]);F!=null&&b(n,["responseModalities"],F);let B=y(e,["mediaResolution"]);B!=null&&b(n,["mediaResolution"],B);let U=y(e,["speechConfig"]);U!=null&&b(n,["speechConfig"],xGe(Hae(U)));let k=y(e,["audioTimestamp"]);k!=null&&b(n,["audioTimestamp"],k);let H=y(e,["thinkingConfig"]);H!=null&&b(n,["thinkingConfig"],H);let ie=y(e,["imageConfig"]);return ie!=null&&b(n,["imageConfig"],ie),n}function QVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Uc(i);Array.isArray(o)&&(o=o.map(a=>mF(a))),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&b(r,["generationConfig"],Cnr(t,s,r)),r}function XVe(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["contents"]);if(i!=null){let o=Uc(i);Array.isArray(o)&&(o=o.map(a=>a)),b(r,["contents"],o)}let s=y(e,["config"]);return s!=null&&b(r,["generationConfig"],Tnr(t,s,r)),r}function ZVe(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>Yrr(c))),b(e,["candidates"],u)}let i=y(t,["modelVersion"]);i!=null&&b(e,["modelVersion"],i);let s=y(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);let o=y(t,["responseId"]);o!=null&&b(e,["responseId"],o);let a=y(t,["usageMetadata"]);return a!=null&&b(e,["usageMetadata"],a),e}function eGe(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["candidates"],c)}let i=y(t,["createTime"]);i!=null&&b(e,["createTime"],i);let s=y(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);let o=y(t,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);let a=y(t,["responseId"]);a!=null&&b(e,["responseId"],a);let u=y(t,["usageMetadata"]);return u!=null&&b(e,["usageMetadata"],u),e}function Onr(t,e){let r={};if(y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let n=y(t,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["aspectRatio"]);e!==void 0&&i!=null&&b(e,["parameters","aspectRatio"],i);let s=y(t,["guidanceScale"]);if(e!==void 0&&s!=null&&b(e,["parameters","guidanceScale"],s),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=y(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&b(e,["parameters","safetySetting"],o);let a=y(t,["personGeneration"]);e!==void 0&&a!=null&&b(e,["parameters","personGeneration"],a);let u=y(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&b(e,["parameters","includeSafetyAttributes"],u);let c=y(t,["includeRaiReason"]);e!==void 0&&c!=null&&b(e,["parameters","includeRaiReason"],c);let l=y(t,["language"]);e!==void 0&&l!=null&&b(e,["parameters","language"],l);let d=y(t,["outputMimeType"]);e!==void 0&&d!=null&&b(e,["parameters","outputOptions","mimeType"],d);let p=y(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&b(e,["parameters","outputOptions","compressionQuality"],p),y(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let f=y(t,["imageSize"]);if(e!==void 0&&f!=null&&b(e,["parameters","sampleImageSize"],f),y(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function xnr(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["negativePrompt"]);e!==void 0&&i!=null&&b(e,["parameters","negativePrompt"],i);let s=y(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);let o=y(t,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);let a=y(t,["guidanceScale"]);e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a);let u=y(t,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);let c=y(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&b(e,["parameters","includeSafetyAttributes"],d);let p=y(t,["includeRaiReason"]);e!==void 0&&p!=null&&b(e,["parameters","includeRaiReason"],p);let f=y(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);let h=y(t,["outputMimeType"]);e!==void 0&&h!=null&&b(e,["parameters","outputOptions","mimeType"],h);let g=y(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g);let _=y(t,["addWatermark"]);e!==void 0&&_!=null&&b(e,["parameters","addWatermark"],_);let S=y(t,["labels"]);e!==void 0&&S!=null&&b(e,["labels"],S);let w=y(t,["imageSize"]);e!==void 0&&w!=null&&b(e,["parameters","sampleImageSize"],w);let C=y(t,["enhancePrompt"]);return e!==void 0&&C!=null&&b(e,["parameters","enhancePrompt"],C),r}function Inr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["config"]);return s!=null&&Onr(s,r),r}function Rnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["config"]);return s!=null&&xnr(s,r),r}function Dnr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Unr(o))),b(e,["generatedImages"],s)}let i=y(t,["positivePromptSafetyAttributes"]);return i!=null&&b(e,["positivePromptSafetyAttributes"],TGe(i)),e}function knr(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>yF(o))),b(e,["generatedImages"],s)}let i=y(t,["positivePromptSafetyAttributes"]);return i!=null&&b(e,["positivePromptSafetyAttributes"],OGe(i)),e}function Mnr(t,e){let r={},n=y(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n),y(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=y(t,["durationSeconds"]);if(e!==void 0&&i!=null&&b(e,["parameters","durationSeconds"],i),y(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=y(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);let o=y(t,["resolution"]);e!==void 0&&o!=null&&b(e,["parameters","resolution"],o);let a=y(t,["personGeneration"]);if(e!==void 0&&a!=null&&b(e,["parameters","personGeneration"],a),y(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=y(t,["negativePrompt"]);e!==void 0&&u!=null&&b(e,["parameters","negativePrompt"],u);let c=y(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&b(e,["parameters","enhancePrompt"],c),y(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let l=y(t,["lastFrame"]);e!==void 0&&l!=null&&b(e,["instances[0]","lastFrame"],gF(l));let d=y(t,["referenceImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>kir(f))),b(e,["instances[0]","referenceImages"],p)}if(y(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Pnr(t,e){let r={},n=y(t,["numberOfVideos"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);let s=y(t,["fps"]);e!==void 0&&s!=null&&b(e,["parameters","fps"],s);let o=y(t,["durationSeconds"]);e!==void 0&&o!=null&&b(e,["parameters","durationSeconds"],o);let a=y(t,["seed"]);e!==void 0&&a!=null&&b(e,["parameters","seed"],a);let u=y(t,["aspectRatio"]);e!==void 0&&u!=null&&b(e,["parameters","aspectRatio"],u);let c=y(t,["resolution"]);e!==void 0&&c!=null&&b(e,["parameters","resolution"],c);let l=y(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);let d=y(t,["pubsubTopic"]);e!==void 0&&d!=null&&b(e,["parameters","pubsubTopic"],d);let p=y(t,["negativePrompt"]);e!==void 0&&p!=null&&b(e,["parameters","negativePrompt"],p);let f=y(t,["enhancePrompt"]);e!==void 0&&f!=null&&b(e,["parameters","enhancePrompt"],f);let h=y(t,["generateAudio"]);e!==void 0&&h!=null&&b(e,["parameters","generateAudio"],h);let g=y(t,["lastFrame"]);e!==void 0&&g!=null&&b(e,["instances[0]","lastFrame"],od(g));let _=y(t,["referenceImages"]);if(e!==void 0&&_!=null){let C=_;Array.isArray(C)&&(C=C.map(A=>Mir(A))),b(e,["instances[0]","referenceImages"],C)}let S=y(t,["mask"]);e!==void 0&&S!=null&&b(e,["instances[0]","mask"],Dir(S));let w=y(t,["compressionQuality"]);return e!==void 0&&w!=null&&b(e,["parameters","compressionQuality"],w),r}function Nnr(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],Lnr(o)),e}function Fnr(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["metadata"]);n!=null&&b(e,["metadata"],n);let i=y(t,["done"]);i!=null&&b(e,["done"],i);let s=y(t,["error"]);s!=null&&b(e,["error"],s);let o=y(t,["response"]);return o!=null&&b(e,["response"],jnr(o)),e}function Bnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["image"]);s!=null&&b(r,["instances[0]","image"],gF(s));let o=y(e,["video"]);o!=null&&b(r,["instances[0]","video"],RGe(o));let a=y(e,["source"]);a!=null&&$nr(a,r);let u=y(e,["config"]);return u!=null&&Mnr(u,r),r}function qnr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["prompt"]);i!=null&&b(r,["instances[0]","prompt"],i);let s=y(e,["image"]);s!=null&&b(r,["instances[0]","image"],od(s));let o=y(e,["video"]);o!=null&&b(r,["instances[0]","video"],DGe(o));let a=y(e,["source"]);a!=null&&Knr(a,r);let u=y(e,["config"]);return u!=null&&Pnr(u,r),r}function Lnr(t){let e={},r=y(t,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Gnr(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function jnr(t){let e={},r=y(t,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Hnr(o))),b(e,["generatedVideos"],s)}let n=y(t,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);let i=y(t,["raiMediaFilteredReasons"]);return i!=null&&b(e,["raiMediaFilteredReasons"],i),e}function $nr(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],gF(i));let s=y(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],RGe(s)),r}function Knr(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],od(i));let s=y(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],DGe(s)),r}function Unr(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["image"],Xnr(r));let n=y(t,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);let i=y(t,["_self"]);return i!=null&&b(e,["safetyAttributes"],TGe(i)),e}function yF(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["image"],CGe(r));let n=y(t,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);let i=y(t,["_self"]);i!=null&&b(e,["safetyAttributes"],OGe(i));let s=y(t,["prompt"]);return s!=null&&b(e,["enhancedPrompt"],s),e}function Vnr(t){let e={},r=y(t,["_self"]);r!=null&&b(e,["mask"],CGe(r));let n=y(t,["labels"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(e,["labels"],i)}return e}function Gnr(t){let e={},r=y(t,["video"]);return r!=null&&b(e,["video"],Iir(r)),e}function Hnr(t){let e={},r=y(t,["_self"]);return r!=null&&b(e,["video"],Rir(r)),e}function znr(t){let e={},r=y(t,["modelSelectionConfig"]);r!=null&&b(e,["modelConfig"],r);let n=y(t,["audioTimestamp"]);n!=null&&b(e,["audioTimestamp"],n);let i=y(t,["candidateCount"]);i!=null&&b(e,["candidateCount"],i);let s=y(t,["enableAffectiveDialog"]);s!=null&&b(e,["enableAffectiveDialog"],s);let o=y(t,["frequencyPenalty"]);o!=null&&b(e,["frequencyPenalty"],o);let a=y(t,["logprobs"]);a!=null&&b(e,["logprobs"],a);let u=y(t,["maxOutputTokens"]);u!=null&&b(e,["maxOutputTokens"],u);let c=y(t,["mediaResolution"]);c!=null&&b(e,["mediaResolution"],c);let l=y(t,["presencePenalty"]);l!=null&&b(e,["presencePenalty"],l);let d=y(t,["responseJsonSchema"]);d!=null&&b(e,["responseJsonSchema"],d);let p=y(t,["responseLogprobs"]);p!=null&&b(e,["responseLogprobs"],p);let f=y(t,["responseMimeType"]);f!=null&&b(e,["responseMimeType"],f);let h=y(t,["responseModalities"]);h!=null&&b(e,["responseModalities"],h);let g=y(t,["responseSchema"]);g!=null&&b(e,["responseSchema"],g);let _=y(t,["routingConfig"]);_!=null&&b(e,["routingConfig"],_);let S=y(t,["seed"]);S!=null&&b(e,["seed"],S);let w=y(t,["speechConfig"]);w!=null&&b(e,["speechConfig"],xGe(w));let C=y(t,["stopSequences"]);C!=null&&b(e,["stopSequences"],C);let A=y(t,["temperature"]);A!=null&&b(e,["temperature"],A);let O=y(t,["thinkingConfig"]);O!=null&&b(e,["thinkingConfig"],O);let x=y(t,["topK"]);x!=null&&b(e,["topK"],x);let R=y(t,["topP"]);if(R!=null&&b(e,["topP"],R),y(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Wnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function Jnr(t,e){let r={},n=y(e,["model"]);return n!=null&&b(r,["_url","name"],Mr(t,n)),r}function Ynr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function Qnr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Xnr(t){let e={},r=y(t,["bytesBase64Encoded"]);r!=null&&b(e,["imageBytes"],Im(r));let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function CGe(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],Im(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function gF(t){let e={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=y(t,["imageBytes"]);r!=null&&b(e,["bytesBase64Encoded"],Im(r));let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function od(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],Im(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Znr(t,e,r){let n={},i=y(e,["pageSize"]);r!==void 0&&i!=null&&b(r,["_query","pageSize"],i);let s=y(e,["pageToken"]);r!==void 0&&s!=null&&b(r,["_query","pageToken"],s);let o=y(e,["filter"]);r!==void 0&&o!=null&&b(r,["_query","filter"],o);let a=y(e,["queryBase"]);return r!==void 0&&a!=null&&b(r,["_url","models_url"],gGe(t,a)),n}function eir(t,e,r){let n={},i=y(e,["pageSize"]);r!==void 0&&i!=null&&b(r,["_query","pageSize"],i);let s=y(e,["pageToken"]);r!==void 0&&s!=null&&b(r,["_query","pageToken"],s);let o=y(e,["filter"]);r!==void 0&&o!=null&&b(r,["_query","filter"],o);let a=y(e,["queryBase"]);return r!==void 0&&a!=null&&b(r,["_url","models_url"],gGe(t,a)),n}function tir(t,e){let r={},n=y(e,["config"]);return n!=null&&Znr(t,n,r),r}function rir(t,e){let r={},n=y(e,["config"]);return n!=null&&eir(t,n,r),r}function nir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["_self"]);if(i!=null){let s=EGe(i);Array.isArray(s)&&(s=s.map(o=>Aae(o))),b(e,["models"],s)}return e}function iir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);let i=y(t,["_self"]);if(i!=null){let s=EGe(i);Array.isArray(s)&&(s=s.map(o=>Cae(o))),b(e,["models"],s)}return e}function sir(t){let e={},r=y(t,["maskMode"]);r!=null&&b(e,["maskMode"],r);let n=y(t,["segmentationClasses"]);n!=null&&b(e,["maskClasses"],n);let i=y(t,["maskDilation"]);return i!=null&&b(e,["dilation"],i),e}function Aae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);i!=null&&b(e,["description"],i);let s=y(t,["version"]);s!=null&&b(e,["version"],s);let o=y(t,["_self"]);o!=null&&b(e,["tunedModelInfo"],_ir(o));let a=y(t,["inputTokenLimit"]);a!=null&&b(e,["inputTokenLimit"],a);let u=y(t,["outputTokenLimit"]);u!=null&&b(e,["outputTokenLimit"],u);let c=y(t,["supportedGenerationMethods"]);return c!=null&&b(e,["supportedActions"],c),e}function Cae(t){let e={},r=y(t,["name"]);r!=null&&b(e,["name"],r);let n=y(t,["displayName"]);n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);i!=null&&b(e,["description"],i);let s=y(t,["versionId"]);s!=null&&b(e,["version"],s);let o=y(t,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>Snr(p))),b(e,["endpoints"],d)}let a=y(t,["labels"]);a!=null&&b(e,["labels"],a);let u=y(t,["_self"]);u!=null&&b(e,["tunedModelInfo"],vir(u));let c=y(t,["defaultCheckpointId"]);c!=null&&b(e,["defaultCheckpointId"],c);let l=y(t,["checkpoints"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>p)),b(e,["checkpoints"],d)}return e}function oir(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],Jrr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],wnr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function air(t){let e={},r=y(t,["productImage"]);return r!=null&&b(e,["image"],od(r)),e}function uir(t,e){let r={},n=y(t,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);let i=y(t,["baseSteps"]);e!==void 0&&i!=null&&b(e,["parameters","editConfig","baseSteps"],i);let s=y(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);let o=y(t,["seed"]);e!==void 0&&o!=null&&b(e,["parameters","seed"],o);let a=y(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&b(e,["parameters","safetySetting"],a);let u=y(t,["personGeneration"]);e!==void 0&&u!=null&&b(e,["parameters","personGeneration"],u);let c=y(t,["addWatermark"]);e!==void 0&&c!=null&&b(e,["parameters","addWatermark"],c);let l=y(t,["outputMimeType"]);e!==void 0&&l!=null&&b(e,["parameters","outputOptions","mimeType"],l);let d=y(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&b(e,["parameters","outputOptions","compressionQuality"],d);let p=y(t,["enhancePrompt"]);e!==void 0&&p!=null&&b(e,["parameters","enhancePrompt"],p);let f=y(t,["labels"]);return e!==void 0&&f!=null&&b(e,["labels"],f),r}function cir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["source"]);i!=null&&dir(i,r);let s=y(e,["config"]);return s!=null&&uir(s,r),r}function lir(t){let e={},r=y(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>yF(i))),b(e,["generatedImages"],n)}return e}function dir(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["personImage"]);e!==void 0&&i!=null&&b(e,["instances[0]","personImage","image"],od(i));let s=y(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>air(a))),b(e,["instances[0]","productImages"],o)}return r}function pir(t){let e={},r=y(t,["referenceImage"]);r!=null&&b(e,["referenceImage"],od(r));let n=y(t,["referenceId"]);n!=null&&b(e,["referenceId"],n);let i=y(t,["referenceType"]);i!=null&&b(e,["referenceType"],i);let s=y(t,["maskImageConfig"]);s!=null&&b(e,["maskImageConfig"],sir(s));let o=y(t,["controlImageConfig"]);o!=null&&b(e,["controlImageConfig"],rnr(o));let a=y(t,["styleImageConfig"]);a!=null&&b(e,["styleImageConfig"],a);let u=y(t,["subjectImageConfig"]);return u!=null&&b(e,["subjectImageConfig"],u),e}function TGe(t){let e={},r=y(t,["safetyAttributes","categories"]);r!=null&&b(e,["categories"],r);let n=y(t,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);let i=y(t,["contentType"]);return i!=null&&b(e,["contentType"],i),e}function OGe(t){let e={},r=y(t,["safetyAttributes","categories"]);r!=null&&b(e,["categories"],r);let n=y(t,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);let i=y(t,["contentType"]);return i!=null&&b(e,["contentType"],i),e}function fir(t){let e={};if(y(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=y(t,["category"]);r!=null&&b(e,["category"],r);let n=y(t,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function hir(t){let e={},r=y(t,["image"]);return r!=null&&b(e,["image"],od(r)),e}function mir(t,e){let r={},n=y(t,["mode"]);e!==void 0&&n!=null&&b(e,["parameters","mode"],n);let i=y(t,["maxPredictions"]);e!==void 0&&i!=null&&b(e,["parameters","maxPredictions"],i);let s=y(t,["confidenceThreshold"]);e!==void 0&&s!=null&&b(e,["parameters","confidenceThreshold"],s);let o=y(t,["maskDilation"]);e!==void 0&&o!=null&&b(e,["parameters","maskDilation"],o);let a=y(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&b(e,["parameters","binaryColorThreshold"],a);let u=y(t,["labels"]);return e!==void 0&&u!=null&&b(e,["labels"],u),r}function yir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["source"]);i!=null&&Eir(i,r);let s=y(e,["config"]);return s!=null&&mir(s,r),r}function gir(t){let e={},r=y(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>Vnr(i))),b(e,["generatedMasks"],n)}return e}function Eir(t,e){let r={},n=y(t,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);let i=y(t,["image"]);e!==void 0&&i!=null&&b(e,["instances[0]","image"],od(i));let s=y(t,["scribbleImage"]);return e!==void 0&&s!=null&&b(e,["instances[0]","scribble"],hir(s)),r}function xGe(t){let e={},r=y(t,["voiceConfig"]);if(r!=null&&b(e,["voiceConfig"],r),y(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let n=y(t,["languageCode"]);return n!=null&&b(e,["languageCode"],n),e}function bir(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],Qnr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],Ynr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function IGe(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Anr(p))),b(e,["functionDeclarations"],d)}let n=y(t,["retrieval"]);n!=null&&b(e,["retrieval"],n);let i=y(t,["googleSearch"]);i!=null&&b(e,["googleSearch"],i);let s=y(t,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);let o=y(t,["enterpriseWebSearch"]);o!=null&&b(e,["enterpriseWebSearch"],o);let a=y(t,["googleMaps"]);a!=null&&b(e,["googleMaps"],a);let u=y(t,["urlContext"]);u!=null&&b(e,["urlContext"],u);let c=y(t,["computerUse"]);c!=null&&b(e,["computerUse"],c);let l=y(t,["codeExecution"]);return l!=null&&b(e,["codeExecution"],l),e}function _ir(t){let e={},r=y(t,["baseModel"]);r!=null&&b(e,["baseModel"],r);let n=y(t,["createTime"]);n!=null&&b(e,["createTime"],n);let i=y(t,["updateTime"]);return i!=null&&b(e,["updateTime"],i),e}function vir(t){let e={},r=y(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&b(e,["baseModel"],r);let n=y(t,["createTime"]);n!=null&&b(e,["createTime"],n);let i=y(t,["updateTime"]);return i!=null&&b(e,["updateTime"],i),e}function Sir(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);e!==void 0&&i!=null&&b(e,["description"],i);let s=y(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),r}function wir(t,e){let r={},n=y(t,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);let i=y(t,["description"]);e!==void 0&&i!=null&&b(e,["description"],i);let s=y(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),r}function Air(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","name"],Mr(t,n));let i=y(e,["config"]);return i!=null&&Sir(i,r),r}function Cir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&wir(i,r),r}function Tir(t,e){let r={},n=y(t,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);let i=y(t,["includeRaiReason"]);e!==void 0&&i!=null&&b(e,["parameters","includeRaiReason"],i);let s=y(t,["outputMimeType"]);e!==void 0&&s!=null&&b(e,["parameters","outputOptions","mimeType"],s);let o=y(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&b(e,["parameters","outputOptions","compressionQuality"],o);let a=y(t,["enhanceInputImage"]);e!==void 0&&a!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],a);let u=y(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],u);let c=y(t,["labels"]);e!==void 0&&c!=null&&b(e,["labels"],c);let l=y(t,["numberOfImages"]);e!==void 0&&l!=null&&b(e,["parameters","sampleCount"],l);let d=y(t,["mode"]);return e!==void 0&&d!=null&&b(e,["parameters","mode"],d),r}function Oir(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["_url","model"],Mr(t,n));let i=y(e,["image"]);i!=null&&b(r,["instances[0]","image"],od(i));let s=y(e,["upscaleFactor"]);s!=null&&b(r,["parameters","upscaleConfig","upscaleFactor"],s);let o=y(e,["config"]);return o!=null&&Tir(o,r),r}function xir(t){let e={},r=y(t,["sdkHttpResponse"]);r!=null&&b(e,["sdkHttpResponse"],r);let n=y(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>yF(s))),b(e,["generatedImages"],i)}return e}function Iir(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["encodedVideo"]);n!=null&&b(e,["videoBytes"],Im(n));let i=y(t,["encoding"]);return i!=null&&b(e,["mimeType"],i),e}function Rir(t){let e={},r=y(t,["gcsUri"]);r!=null&&b(e,["uri"],r);let n=y(t,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],Im(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function Dir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["_self"],od(r));let n=y(t,["maskMode"]);return n!=null&&b(e,["maskMode"],n),e}function kir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["image"],gF(r));let n=y(t,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function Mir(t){let e={},r=y(t,["image"]);r!=null&&b(e,["image"],od(r));let n=y(t,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function RGe(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["uri"],r);let n=y(t,["videoBytes"]);n!=null&&b(e,["encodedVideo"],Im(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["encoding"],i),e}function DGe(t){let e={},r=y(t,["uri"]);r!=null&&b(e,["gcsUri"],r);let n=y(t,["videoBytes"]);n!=null&&b(e,["bytesBase64Encoded"],Im(n));let i=y(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}async function rGe(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let r=t.status,n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(n);throw r>=400&&r<600?new dF({message:i,status:r}):new Error(i)}}function $ir(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))r=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(s,o){let a=Object.assign({},s);for(let u in o)if(Object.prototype.hasOwnProperty.call(o,u)){let c=o[u],l=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&l&&typeof l=="object"&&!Array.isArray(l)?a[u]=n(l,c):(l&&c&&typeof l!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof l}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}let i=n(r,e);t.body=JSON.stringify(i)}function kGe(t){for(let e of t)if(Vir(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Uir}function MGe(t){var e;let r=(e=t[Tae])!==null&&e!==void 0?e:"";t[Tae]=(r+` ${Kir}`).trimStart()}function Vir(t){return t!==null&&typeof t=="object"&&t instanceof xae}function Gir(t,e=100){return c4(this,arguments,function*(){let n,i=0;for(;i<e;){let s=yield Dn(t.listTools({cursor:n}));for(let o of s.tools)yield yield Dn(o),i++;if(!s.nextCursor)break;n=s.nextCursor}})}async function Hir(t,e,r){let n=new yae,i;r.data instanceof Blob?i=JSON.parse(await r.data.text()):i=JSON.parse(r.data),Object.assign(n,i),e(n)}function zir(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Wir(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}async function Yir(t,e,r){let n=new mae,i;r.data instanceof Blob?i=await r.data.text():r.data instanceof ArrayBuffer?i=new TextDecoder().decode(r.data):i=r.data;let s=JSON.parse(i);if(t.isVertexAI()){let o=Urr(s);Object.assign(n,o)}else Object.assign(n,s);e(n)}function Xir(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function Zir(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}function iGe(t){var e,r,n;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let o of(r=t?.tools)!==null&&r!==void 0?r:[])if(l4(o)){i=!0;break}if(!i)return!0;let s=(n=t?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function l4(t){return"callTool"in t&&typeof t.callTool=="function"}function esr(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>l4(i)))!==null&&n!==void 0?n:!1}function tsr(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>!l4(i)))!==null&&n!==void 0?n:!1}function sGe(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}function rsr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["data"]);r!=null&&b(e,["data"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function nsr(t){let e={},r=y(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>dsr(s))),b(e,["parts"],i)}let n=y(t,["role"]);return n!=null&&b(e,["role"],n),e}function isr(t,e,r){let n={},i=y(e,["expireTime"]);r!==void 0&&i!=null&&b(r,["expireTime"],i);let s=y(e,["newSessionExpireTime"]);r!==void 0&&s!=null&&b(r,["newSessionExpireTime"],s);let o=y(e,["uses"]);r!==void 0&&o!=null&&b(r,["uses"],o);let a=y(e,["liveConnectConstraints"]);r!==void 0&&a!=null&&b(r,["bidiGenerateContentSetup"],lsr(t,a));let u=y(e,["lockAdditionalFields"]);return r!==void 0&&u!=null&&b(r,["fieldMask"],u),n}function ssr(t,e){let r={},n=y(e,["config"]);return n!=null&&b(r,["config"],isr(t,n,r)),r}function osr(t){let e={};if(y(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=y(t,["fileUri"]);r!=null&&b(e,["fileUri"],r);let n=y(t,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function asr(t){let e={};if(y(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=y(t,["enableWidget"]);return r!=null&&b(e,["enableWidget"],r),e}function usr(t){let e={},r=y(t,["timeRangeFilter"]);if(r!=null&&b(e,["timeRangeFilter"],r),y(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function csr(t,e){let r={},n=y(t,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);let i=y(t,["responseModalities"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig","responseModalities"],i);let s=y(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);let o=y(t,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);let a=y(t,["topK"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topK"],a);let u=y(t,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);let c=y(t,["mediaResolution"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","mediaResolution"],c);let l=y(t,["seed"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","seed"],l);let d=y(t,["speechConfig"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","speechConfig"],zae(d));let p=y(t,["thinkingConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","thinkingConfig"],p);let f=y(t,["enableAffectiveDialog"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],f);let h=y(t,["systemInstruction"]);e!==void 0&&h!=null&&b(e,["setup","systemInstruction"],nsr(To(h)));let g=y(t,["tools"]);if(e!==void 0&&g!=null){let x=f4(g);Array.isArray(x)&&(x=x.map(R=>fsr(p4(R)))),b(e,["setup","tools"],x)}let _=y(t,["sessionResumption"]);e!==void 0&&_!=null&&b(e,["setup","sessionResumption"],psr(_));let S=y(t,["inputAudioTranscription"]);e!==void 0&&S!=null&&b(e,["setup","inputAudioTranscription"],S);let w=y(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&b(e,["setup","outputAudioTranscription"],w);let C=y(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&b(e,["setup","realtimeInputConfig"],C);let A=y(t,["contextWindowCompression"]);e!==void 0&&A!=null&&b(e,["setup","contextWindowCompression"],A);let O=y(t,["proactivity"]);return e!==void 0&&O!=null&&b(e,["setup","proactivity"],O),r}function lsr(t,e){let r={},n=y(e,["model"]);n!=null&&b(r,["setup","model"],Mr(t,n));let i=y(e,["config"]);return i!=null&&b(r,["config"],csr(i,r)),r}function dsr(t){let e={},r=y(t,["videoMetadata"]);r!=null&&b(e,["videoMetadata"],r);let n=y(t,["thought"]);n!=null&&b(e,["thought"],n);let i=y(t,["inlineData"]);i!=null&&b(e,["inlineData"],rsr(i));let s=y(t,["fileData"]);s!=null&&b(e,["fileData"],osr(s));let o=y(t,["thoughtSignature"]);o!=null&&b(e,["thoughtSignature"],o);let a=y(t,["functionCall"]);a!=null&&b(e,["functionCall"],a);let u=y(t,["codeExecutionResult"]);u!=null&&b(e,["codeExecutionResult"],u);let c=y(t,["executableCode"]);c!=null&&b(e,["executableCode"],c);let l=y(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);let d=y(t,["text"]);return d!=null&&b(e,["text"],d),e}function psr(t){let e={},r=y(t,["handle"]);if(r!=null&&b(e,["handle"],r),y(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fsr(t){let e={},r=y(t,["functionDeclarations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(l=>l)),b(e,["functionDeclarations"],c)}if(y(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=y(t,["googleSearch"]);n!=null&&b(e,["googleSearch"],usr(n));let i=y(t,["googleSearchRetrieval"]);if(i!=null&&b(e,["googleSearchRetrieval"],i),y(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=y(t,["googleMaps"]);s!=null&&b(e,["googleMaps"],asr(s));let o=y(t,["urlContext"]);o!=null&&b(e,["urlContext"],o);let a=y(t,["computerUse"]);a!=null&&b(e,["computerUse"],a);let u=y(t,["codeExecution"]);return u!=null&&b(e,["codeExecution"],u),e}function hsr(t){let e=[];for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){let i=Object.keys(n).map(s=>`${r}.${s}`);e.push(...i)}else e.push(r)}return e.join(",")}function msr(t,e){let r=null,n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){let s=n.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,r=s):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(r){let s=hsr(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));let u=[];s&&u.push(s),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}function ysr(t){let e;if(t){if(e=t,e.scopes){if(typeof e.scopes=="string"&&e.scopes!==GA||Array.isArray(e.scopes)&&e.scopes.indexOf(GA)<0)throw new Error(`Invalid auth scopes. Scopes must include: ${GA}`)}else return e.scopes=[GA],e;return e}else return e={scopes:[GA]},e}async function gsr(t,e){var r,n,i;let s=Wae(t.file);if(s!==void 0)return await e.request({path:`files/${s}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal});if(mGe(t.file)){let o=(i=t.file.video)===null||i===void 0?void 0:i.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download generated video, Uri or videoBytes not found.")}else if(yGe(t.file)){let o=t.file.videoBytes;if(typeof o=="string")return o;throw new Error("Failed to download video, Uri or videoBytes not found.")}else throw new Error("Unsupported file type")}function Esr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function bsr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function _sr(t,e,r){let n={};if(y(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=y(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&b(e,["displayName"],i),y(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=y(t,["epochCount"]);e!==void 0&&s!=null&&b(e,["tuningTask","hyperparameters","epochCount"],s);let o=y(t,["learningRateMultiplier"]);if(o!=null&&b(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),y(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=y(t,["batchSize"]);e!==void 0&&a!=null&&b(e,["tuningTask","hyperparameters","batchSize"],a);let u=y(t,["learningRate"]);if(e!==void 0&&u!=null&&b(e,["tuningTask","hyperparameters","learningRate"],u),y(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function vsr(t,e,r){let n={},i=y(t,["validationDataset"]);e!==void 0&&i!=null&&b(e,["supervisedTuningSpec"],Fsr(i));let s=y(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&b(e,["tunedModelDisplayName"],s);let o=y(t,["description"]);e!==void 0&&o!=null&&b(e,["description"],o);let a=y(t,["epochCount"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);let u=y(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);let c=y(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);let l=y(t,["adapterSize"]);if(e!==void 0&&l!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],l),y(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let d=y(t,["labels"]);return e!==void 0&&d!=null&&b(e,["labels"],d),n}function Ssr(t,e){let r={},n=y(t,["baseModel"]);n!=null&&b(r,["baseModel"],n);let i=y(t,["preTunedModel"]);i!=null&&b(r,["preTunedModel"],i);let s=y(t,["trainingDataset"]);s!=null&&b(r,["tuningTask","trainingData"],Msr(s));let o=y(t,["config"]);return o!=null&&_sr(o,r),r}function wsr(t,e){let r={},n=y(t,["baseModel"]);n!=null&&b(r,["baseModel"],n);let i=y(t,["preTunedModel"]);i!=null&&b(r,["preTunedModel"],i);let s=y(t,["trainingDataset"]);s!=null&&Psr(s,r);let o=y(t,["config"]);return o!=null&&vsr(o,r),r}function Asr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function Csr(t,e){let r={},n=y(t,["name"]);return n!=null&&b(r,["_url","name"],n),r}function Tsr(t,e,r){let n={},i=y(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);let s=y(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);let o=y(t,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function Osr(t,e,r){let n={},i=y(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);let s=y(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);let o=y(t,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function xsr(t,e){let r={},n=y(t,["config"]);return n!=null&&Tsr(n,r),r}function Isr(t,e){let r={},n=y(t,["config"]);return n!=null&&Osr(n,r),r}function Rsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["nextPageToken"]);i!=null&&b(r,["nextPageToken"],i);let s=y(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>PGe(a))),b(r,["tuningJobs"],o)}return r}function Dsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["nextPageToken"]);i!=null&&b(r,["nextPageToken"],i);let s=y(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>jae(a))),b(r,["tuningJobs"],o)}return r}function ksr(t,e){let r={},n=y(t,["name"]);n!=null&&b(r,["model"],n);let i=y(t,["name"]);return i!=null&&b(r,["endpoint"],i),r}function Msr(t,e){let r={};if(y(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=y(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),b(r,["examples","examples"],i)}return r}function Psr(t,e,r){let n={},i=y(t,["gcsUri"]);e!==void 0&&i!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],i);let s=y(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],s),y(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function PGe(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["state"]);s!=null&&b(r,["state"],hGe(s));let o=y(t,["createTime"]);o!=null&&b(r,["createTime"],o);let a=y(t,["tuningTask","startTime"]);a!=null&&b(r,["startTime"],a);let u=y(t,["tuningTask","completeTime"]);u!=null&&b(r,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(r,["updateTime"],c);let l=y(t,["description"]);l!=null&&b(r,["description"],l);let d=y(t,["baseModel"]);d!=null&&b(r,["baseModel"],d);let p=y(t,["_self"]);return p!=null&&b(r,["tunedModel"],ksr(p)),r}function jae(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["state"]);s!=null&&b(r,["state"],hGe(s));let o=y(t,["createTime"]);o!=null&&b(r,["createTime"],o);let a=y(t,["startTime"]);a!=null&&b(r,["startTime"],a);let u=y(t,["endTime"]);u!=null&&b(r,["endTime"],u);let c=y(t,["updateTime"]);c!=null&&b(r,["updateTime"],c);let l=y(t,["error"]);l!=null&&b(r,["error"],l);let d=y(t,["description"]);d!=null&&b(r,["description"],d);let p=y(t,["baseModel"]);p!=null&&b(r,["baseModel"],p);let f=y(t,["tunedModel"]);f!=null&&b(r,["tunedModel"],f);let h=y(t,["preTunedModel"]);h!=null&&b(r,["preTunedModel"],h);let g=y(t,["supervisedTuningSpec"]);g!=null&&b(r,["supervisedTuningSpec"],g);let _=y(t,["tuningDataStats"]);_!=null&&b(r,["tuningDataStats"],_);let S=y(t,["encryptionSpec"]);S!=null&&b(r,["encryptionSpec"],S);let w=y(t,["partnerModelTuningSpec"]);w!=null&&b(r,["partnerModelTuningSpec"],w);let C=y(t,["customBaseModel"]);C!=null&&b(r,["customBaseModel"],C);let A=y(t,["experiment"]);A!=null&&b(r,["experiment"],A);let O=y(t,["labels"]);O!=null&&b(r,["labels"],O);let x=y(t,["outputUri"]);x!=null&&b(r,["outputUri"],x);let R=y(t,["pipelineJob"]);R!=null&&b(r,["pipelineJob"],R);let M=y(t,["serviceAccount"]);M!=null&&b(r,["serviceAccount"],M);let I=y(t,["tunedModelDisplayName"]);I!=null&&b(r,["tunedModelDisplayName"],I);let F=y(t,["veoTuningSpec"]);return F!=null&&b(r,["veoTuningSpec"],F),r}function Nsr(t,e){let r={},n=y(t,["sdkHttpResponse"]);n!=null&&b(r,["sdkHttpResponse"],n);let i=y(t,["name"]);i!=null&&b(r,["name"],i);let s=y(t,["metadata"]);s!=null&&b(r,["metadata"],s);let o=y(t,["done"]);o!=null&&b(r,["done"],o);let a=y(t,["error"]);return a!=null&&b(r,["error"],a),r}function Fsr(t,e){let r={},n=y(t,["gcsUri"]);n!=null&&b(r,["validationDatasetUri"],n);let i=y(t,["vertexDatasetResource"]);return i!=null&&b(r,["validationDatasetUri"],i),r}async function Bsr(t,e,r){var n,i,s;let o=0,a=0,u=new zg(new Response),c="upload";for(o=t.size;a<o;){let d=Math.min(NGe,o-a),p=t.slice(a,a+d);a+d>=o&&(c+=", finalize");let f=0,h=BGe;for(;f<FGe&&(u=await r.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((n=u?.headers)===null||n===void 0)&&n[d4]));)f++,await LGe(h),h=h*qGe;if(a+=d,((i=u?.headers)===null||i===void 0?void 0:i[d4])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let l=await u?.json();if(((s=u?.headers)===null||s===void 0?void 0:s[d4])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function qsr(t){return{size:t.size,type:t.type}}function LGe(t){return new Promise(e=>setTimeout(e,t))}function Hg(t){var e,r,n;return(n=(r=(e=process==null?void 0:process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0}function jsr(t){return $sr(Hg(t))}function $sr(t){return t===void 0?!1:t.toLowerCase()==="true"}function Ksr(){let t=Hg("GOOGLE_API_KEY"),e=Hg("GEMINI_API_KEY");return t&&e&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),t||e||void 0}var aGe,fF,uGe,hF,Ner,Fer,Xf,ZUe,eVe,tVe,xm,rVe,nVe,iVe,sVe,oVe,aVe,uVe,cVe,lVe,dVe,pVe,fVe,ZN,hVe,oae,mVe,yVe,gVe,EVe,bVe,_Ve,vVe,SVe,wVe,AVe,CVe,TVe,OVe,xVe,IVe,RVe,DVe,kVe,MVe,PVe,NVe,FVe,BVe,qVe,LVe,jVe,$Ve,KVe,UVe,a4,zg,Gg,eF,tF,aae,uae,cae,lae,rF,nF,iF,dae,sF,oF,aF,uF,pae,fae,hae,cF,mae,yae,Wg,Jg,bae,_ae,vae,Sae,dF,wae,Pir,Nir,Fir,Tae,Bir,qir,Lir,jir,tGe,Oae,Kir,Uir,xae,Iae,Rae,Jir,Dae,Qir,kae,nGe,Mae,Pae,Nae,oGe,GA,Fae,Bae,qae,Lae,$ae,NGe,FGe,BGe,qGe,d4,Kae,Lsr,pF,jGe=ce(()=>{aGe=Ct(zKe(),1),fF=require("fs"),uGe=require("node:stream");XUe();hF=Ct(require("fs/promises"),1);Xf=class{};(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ZUe||(ZUe={}));(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(eVe||(eVe={}));(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(tVe||(tVe={}));(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xm||(xm={}));(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rVe||(rVe={}));(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(nVe||(nVe={}));(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(iVe||(iVe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(sVe||(sVe={}));(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(oVe||(oVe={}));(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(aVe||(aVe={}));(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uVe||(uVe={}));(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(cVe||(cVe={}));(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(lVe||(lVe={}));(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dVe||(dVe={}));(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(pVe||(pVe={}));(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(fVe||(fVe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ZN||(ZN={}));(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(hVe||(hVe={}));(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(oae||(oae={}));(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(mVe||(mVe={}));(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yVe||(yVe={}));(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(gVe||(gVe={}));(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(EVe||(EVe={}));(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(bVe||(bVe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_Ve||(_Ve={}));(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vVe||(vVe={}));(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(SVe||(SVe={}));(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(wVe||(wVe={}));(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(AVe||(AVe={}));(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(CVe||(CVe={}));(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(TVe||(TVe={}));(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(OVe||(OVe={}));(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xVe||(xVe={}));(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(IVe||(IVe={}));(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(RVe||(RVe={}));(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(DVe||(DVe={}));(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(kVe||(kVe={}));(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(MVe||(MVe={}));(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(PVe||(PVe={}));(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(NVe||(NVe={}));(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(FVe||(FVe={}));(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(BVe||(BVe={}));(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qVe||(qVe={}));(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(LVe||(LVe={}));(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(jVe||(jVe={}));(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($Ve||($Ve={}));(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(KVe||(KVe={}));(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(UVe||(UVe={}));(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(a4||(a4={}));zg=class{constructor(e){let r={};for(let n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}},Gg=class{get text(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",l=!1,d=[];for(let p of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[f,h]of Object.entries(p))f!=="text"&&f!=="thought"&&(h!==null||h!==void 0)&&d.push(f);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;l=!0,c+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?c:void 0}get data(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",l=[];for(let d of(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(let[p,f]of Object.entries(d))p!=="inlineData"&&(f!==null||f!==void 0)&&l.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(c+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,i,s,o,a,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(l=>l.functionCall).map(l=>l.functionCall).filter(l=>l!==void 0);if(c?.length!==0)return c}get executableCode(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,i,s,o,a,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let l=(u=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if(l?.length!==0)return(c=l?.[0])===null||c===void 0?void 0:c.output}},eF=class{},tF=class{},aae=class{},uae=class{},cae=class{},lae=class{},rF=class{},nF=class{},iF=class{},dae=class{},sF=class t{_fromAPIResponse({apiResponse:e,isVertexAI:r}){let n=new t,i,s=e;return r?i=Ker(s):i=$er(s),Object.assign(n,i),n}},oF=class{},aF=class{},uF=class{},pae=class{},fae=class{},hae=class{},cF=class{},mae=class{get text(){var e,r,n;let i="",s=!1,o=[];for(let a of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&o.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,r,n;let i="",s=[];for(let o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[a,u]of Object.entries(o))a!=="inlineData"&&u!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}},yae=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Wg||(Wg={}));Jg=class{constructor(e,r,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,i)}init(e,r,n){var i,s;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=r.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};bae=class extends Xf{constructor(e){super(),this.apiClient=e,this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)},this.list=async(r={})=>new Jg(Wg.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}createInlinedGenerateContentRequest(e){let r=zVe(this.apiClient,e),n=r._url,i=rt("{model}:batchGenerateContent",n),a=r.batch.inputConfig.requests,u=a.requests,c=[];for(let l of u){let d=Object.assign({},l);if(d.systemInstruction){let p=d.systemInstruction;delete d.systemInstruction;let f=d.request;f.systemInstruction=p,d.request=f}c.push(d)}return a.requests=c,delete r.config,delete r._url,delete r._query,{path:i,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){let n=r?Object.assign({},r):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){let s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?n.dest=`${s.slice(0,-6)}/dest`:n.dest=`${s}_dest_${i}`;else if(o)n.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=gtr(this.apiClient,e);return a=rt("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>Eae(l))}else{let c=zVe(this.apiClient,e);return a=rt("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>QN(l))}}async createEmbeddingsInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=btr(this.apiClient,e);return s=rt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>QN(u))}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Dtr(this.apiClient,e);return a=rt("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>Eae(l))}else{let c=Rtr(this.apiClient,e);return a=rt("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>QN(l))}}async cancel(e){var r,n,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let u=ptr(this.apiClient,e);o=rt("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let u=dtr(this.apiClient,e);o=rt("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Ltr(e);return a=rt("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=$tr(l),p=new cF;return Object.assign(p,d),p})}else{let c=qtr(e);return a=rt("batches",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=jtr(l),p=new cF;return Object.assign(p,d),p})}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=vtr(this.apiClient,e);return a=rt("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>wtr(l))}else{let c=_tr(this.apiClient,e);return a=rt("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>Str(l))}}};_ae=class extends Xf{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Jg(Wg.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Jtr(this.apiClient,e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=Wtr(this.apiClient,e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=nrr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=rrr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Qtr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Ztr(l),p=new aF;return Object.assign(p,d),p})}else{let c=Ytr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Xtr(l),p=new aF;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Err(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>l)}else{let c=grr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=crr(e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=drr(l),p=new uF;return Object.assign(p,d),p})}else{let c=urr(e);return a=rt("cachedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=lrr(l),p=new uF;return Object.assign(p,d),p})}}};vae=class{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Sae(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Sae=class{constructor(e,r,n,i={},s=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),_rr(s)}async sendMessage(e){var r;await this.sendPromise;let n=To(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var s,o,a;let u=await i,c=(o=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,l=u.automaticFunctionCallingHistory,d=this.getHistory(!0).length,p=[];l!=null&&(p=(a=l.slice(d))!==null&&a!==void 0?a:[]);let f=c?[c]:[];this.recordHistory(n,f,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var r;await this.sendPromise;let n=To(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let s=await i;return this.processStreamResponse(s,n)}getHistory(e=!1){let r=e?YVe(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,i;return c4(this,arguments,function*(){var o,a,u,c;let l=[];try{for(var d=!0,p=HA(e),f;f=yield Dn(p.next()),o=f.done,!o;d=!0){c=f.value,d=!1;let h=c;if(brr(h)){let g=(i=(n=h.candidates)===null||n===void 0?void 0:n[0])===null||i===void 0?void 0:i.content;g!==void 0&&l.push(g)}yield yield Dn(h)}}catch(h){a={error:h}}finally{try{!d&&!o&&(u=p.return)&&(yield Dn(u.call(p)))}finally{if(a)throw a.error}}this.recordHistory(r,l)})}recordHistory(e,r,n){let i=[];r.length>0&&r.every(s=>s.role!==void 0)?i=r:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...YVe(n)):this.history.push(e),this.history.push(...i)}};dF=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};wae=class extends Xf{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Jg(Wg.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Orr(e);return s=rt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=xrr(u),l=new pae;return Object.assign(l,c),l})}}async createInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=vrr(e);return s=rt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=Srr(u),l=new fae;return Object.assign(l,c),l})}}async get(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Crr(e);return s=rt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=wrr(e);return s=rt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=Arr(u),l=new hae;return Object.assign(l,c),l})}}};Pir="Content-Type",Nir="X-Server-Timeout",Fir="User-Agent",Tae="x-goog-api-client",Bir="1.27.0",qir=`google-genai-sdk/${Bir}`,Lir="v1beta1",jir="v1beta",tGe=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,Oae=class{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let i={};this.clientOptions.vertexai?(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Lir,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jir,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){let i=[this.getRequestUrlInternal(r)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);if(e.queryParams)for(let[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,r){let n=JSON.parse(JSON.stringify(e));for(let[i,s]of Object.entries(r))typeof s=="object"?n[i]=Object.assign(Object.assign({},n[i]),s):s!==void 0&&(n[i]=s);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,r,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,i){if(r&&r.timeout||i){let s=new AbortController,o=s.signal;if(r.timeout&&r?.timeout>0){let a=setTimeout(()=>s.abort(),r.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return r&&r.extraBody!==null&&$ir(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await rGe(i),new zg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await rGe(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var r;return c4(this,arguments,function*(){let i=(r=e?.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){let{done:a,value:u}=yield Dn(i.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let c=s.decode(u,{stream:!0});try{let d=JSON.parse(c);if("error"in d){let p=JSON.parse(JSON.stringify(d.error)),f=p.status,h=p.code,g=`got status: ${f}. ${JSON.stringify(d)}`;if(h>=400&&h<600)throw new dF({message:g,status:h})}}catch(d){if(d.name==="ApiError")throw d}o+=c;let l=o.match(tGe);for(;l;){let d=l[1];try{let p=new Response(d,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Dn(new zg(p)),o=o.slice(l[0].length),l=o.match(tGe)}catch(p){throw new Error(`exception parsing stream chunk ${d}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){let e={},r=qir+" "+this.clientOptions.userAgentExtra;return e[Fir]=r,e[Tae]=r,e[Pir]="application/json",e}async getHeadersInternal(e,r){let n=new Headers;if(e&&e.headers){for(let[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(Nir,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}async uploadFile(e,r){var n;let i={};r!=null&&(i.mimeType=r.mimeType,i.name=r.name,i.displayName=r.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);let a=(n=r?.mimeType)!==null&&n!==void 0?n:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let u=await this.fetchUploadUrl(i,r);return s.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let i={};r?.httpOptions?i=r.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let s={file:e},o=await this.request({path:rt("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:i});if(!o||!o?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let a=(n=o?.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}};Kir="mcp_used/unknown",Uir=!1;xae=class t{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new t(e,r)}async initialize(){var e,r,n,i;if(this.mcpTools.length>0)return;let s={},o=[];for(let l of this.mcpClients)try{for(var a=!0,u=(r=void 0,HA(Gir(l))),c;c=await u.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let d=i;o.push(d);let p=d.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=l}}catch(d){r={error:d}}finally{try{!a&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),rtr(this.mcpTools,this.config)}async callTool(e){await this.initialize();let r=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[n.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let o=await i.callTool({name:n.name,arguments:n.args},void 0,s);r.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return r}};Iae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Wir(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},l=new Promise(C=>{c=C}),d=e.callbacks,p=function(){c({})},f=this.apiClient,h={onopen:p,onmessage:C=>{Hir(f,d.onmessage,C)},onerror:(r=d?.onerror)!==null&&r!==void 0?r:function(C){},onclose:(n=d?.onclose)!==null&&n!==void 0?n:function(C){}},g=this.webSocketFactory.create(u,zir(o),h);g.connect(),await l;let w={setup:{model:Mr(this.apiClient,e.model)}};return g.send(JSON.stringify(w)),new Rae(g,this.apiClient)}},Rae=class{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let r=jrr(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let r=Lrr(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){let r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(a4.PLAY)}pause(){this.sendPlaybackControl(a4.PAUSE)}stop(){this.sendPlaybackControl(a4.STOP)}resetContext(){this.sendPlaybackControl(a4.RESET_CONTEXT)}close(){this.conn.close()}};Jir="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";Dae=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new Iae(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),l,d=this.apiClient.getHeaders();e.config&&e.config.tools&&kGe(e.config.tools)&&MGe(d);let p=Zir(d);if(this.apiClient.isVertexAI())l=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,l);else{let I=this.apiClient.getApiKey(),F="BidiGenerateContent",B="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",B="access_token"),l=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${F}?${B}=${I}`}let f=()=>{},h=new Promise(I=>{f=I}),g=e.callbacks,_=function(){var I;(I=g?.onopen)===null||I===void 0||I.call(g),f({})},S=this.apiClient,w={onopen:_,onmessage:I=>{Yir(S,g.onmessage,I)},onerror:(r=g?.onerror)!==null&&r!==void 0?r:function(I){},onclose:(n=g?.onclose)!==null&&n!==void 0?n:function(I){}},C=this.webSocketFactory.create(l,Xir(p),w);C.connect(),await h;let A=Mr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let I=this.apiClient.getProject(),F=this.apiClient.getLocation();A=`projects/${I}/locations/${F}/`+A}let O={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ZN.AUDIO]}:e.config.responseModalities=[ZN.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],R=[];for(let I of x)if(this.isCallableTool(I)){let F=I;R.push(await F.tool())}else R.push(I);R.length>0&&(e.config.tools=R);let M={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=qrr(this.apiClient,M):O=Brr(this.apiClient,M),delete O.config,C.send(JSON.stringify(O)),new kae(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Qir={turnComplete:!0},kae=class{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Uc(r.turns),e.isVertexAI()||(n=n.map(i=>mF(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(let s of n){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Jir)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Qir),e);let r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:Krr(e)}:r={realtimeInput:$rr(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}};nGe=10;Mae=class extends Xf{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,i,s,o,a;let u=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!esr(r)||iGe(r.config))return await this.generateContentInternal(u);if(tsr(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,l,d=Uc(u.contents),p=(s=(i=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:nGe,f=0;for(;f<p&&(c=await this.generateContentInternal(u),!(!c.functionCalls||c.functionCalls.length===0));){let h=c.candidates[0].content,g=[];for(let _ of(a=(o=r.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(l4(_)){let w=await _.callTool(c.functionCalls);g.push(...w)}f++,l={role:"user",parts:g},u.contents=Uc(u.contents),u.contents.push(h),u.contents.push(l),sGe(u.config)&&(d.push(h),d.push(l))}return sGe(u.config)&&(c.automaticFunctionCallingHistory=d),c},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),iGe(r.config)){let n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var i;let s,o=[];if(n?.generatedImages)for(let u of n.generatedImages)u&&u?.safetyAttributes&&((i=u?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=u?.safetyAttributes:o.push(u);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:n.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},a}),this.list=async r=>{var n;let o={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Jg(Wg.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async r=>{let n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));let i={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async r=>{var n,i,s,o,a,u;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((i=r.video)===null||i===void 0)&&i.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((o=(s=r.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((u=(a=r.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,i;let s=(r=e.config)===null||r===void 0?void 0:r.tools;if(!s)return e;let o=await Promise.all(s.map(async u=>l4(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&kGe(e.config.tools)){let u=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{},c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),MGe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var r,n,i;let s=new Map;for(let o of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(l4(o)){let a=o,u=await a.tool();for(let c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var r,n,i;let s=(i=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:nGe,o=!1,a=0,u=await this.initAfcToolsMap(e);return(function(c,l,d){var p,f;return c4(this,arguments,function*(){for(var h,g,_,S;a<s;){o&&(a++,o=!1);let O=yield Dn(c.processParamsMaybeAddMcpUsage(d)),x=yield Dn(c.generateContentStreamInternal(O)),R=[],M=[];try{for(var w=!0,C=(g=void 0,HA(x)),A;A=yield Dn(C.next()),h=A.done,!h;w=!0){S=A.value,w=!1;let I=S;if(yield yield Dn(I),I.candidates&&(!((p=I.candidates[0])===null||p===void 0)&&p.content)){M.push(I.candidates[0].content);for(let F of(f=I.candidates[0].content.parts)!==null&&f!==void 0?f:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(l.has(F.functionCall.name)){let B=yield Dn(l.get(F.functionCall.name).callTool([F.functionCall]));R.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${l.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!w&&!h&&(_=C.return)&&(yield Dn(_.call(C)))}finally{if(g)throw g.error}}if(R.length>0){o=!0;let I=new Gg;I.candidates=[{content:{role:"user",parts:R}}],yield yield Dn(I);let F=[];F.push(...M),F.push({role:"user",parts:R});let B=Uc(d.contents).concat(F);d.contents=B}else break}})})(this,u,e)}async generateContentInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=XVe(this.apiClient,e);return a=rt("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=eGe(l),p=new Gg;return Object.assign(p,d),p})}else{let c=QVe(this.apiClient,e);return a=rt("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=ZVe(l),p=new Gg;return Object.assign(p,d),p})}}async generateContentStreamInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=XVe(this.apiClient,e);return a=rt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(d){return c4(this,arguments,function*(){var p,f,h,g;try{for(var _=!0,S=HA(d),w;w=yield Dn(S.next()),p=w.done,!p;_=!0){g=w.value,_=!1;let C=g,A=eGe(yield Dn(C.json()));A.sdkHttpResponse={headers:C.headers};let O=new Gg;Object.assign(O,A),yield yield Dn(O)}}catch(C){f={error:C}}finally{try{!_&&!p&&(h=S.return)&&(yield Dn(h.call(S)))}finally{if(f)throw f.error}}})})}else{let c=QVe(this.apiClient,e);return a=rt("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return c4(this,arguments,function*(){var p,f,h,g;try{for(var _=!0,S=HA(d),w;w=yield Dn(S.next()),p=w.done,!p;_=!0){g=w.value,_=!1;let C=g,A=ZVe(yield Dn(C.json()));A.sdkHttpResponse={headers:C.headers};let O=new Gg;Object.assign(O,A),yield yield Dn(O)}}catch(C){f={error:C}}finally{try{!_&&!p&&(h=S.return)&&(yield Dn(h.call(S)))}finally{if(f)throw f.error}}})})}}async embedContent(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=bnr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=vnr(l),p=new eF;return Object.assign(p,d),p})}else{let c=Enr(this.apiClient,e);return a=rt("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=_nr(l),p=new eF;return Object.assign(p,d),p})}}async generateImagesInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Rnr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=knr(l),p=new tF;return Object.assign(p,d),p})}else{let c=Inr(this.apiClient,e);return a=rt("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Dnr(l),p=new tF;return Object.assign(p,d),p})}}async editImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=hnr(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=mnr(u),l=new aae;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Oir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=xir(u),l=new uae;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=cir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=lir(u),l=new cae;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=yir(this.apiClient,e);return s=rt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{let c=gir(u),l=new lae;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Jnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>Cae(l))}else{let c=Wnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>Aae(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=rir(this.apiClient,e);return a=rt("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=iir(l),p=new rF;return Object.assign(p,d),p})}else{let c=tir(this.apiClient,e);return a=rt("{models_url}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=nir(l),p=new rF;return Object.assign(p,d),p})}}async update(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Cir(this.apiClient,e);return a=rt("{model}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>Cae(l))}else{let c=Air(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>Aae(l))}}async delete(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=lnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=pnr(l),p=new nF;return Object.assign(p,d),p})}else{let c=cnr(this.apiClient,e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=dnr(l),p=new nF;return Object.assign(p,d),p})}}async countTokens(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=onr(this.apiClient,e);return a=rt("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=unr(l),p=new iF;return Object.assign(p,d),p})}else{let c=snr(this.apiClient,e);return a=rt("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=anr(l),p=new iF;return Object.assign(p,d),p})}}async computeTokens(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=Xrr(this.apiClient,e);return s=rt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>{let c=Zrr(u),l=new dae;return Object.assign(l,c),l})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=qnr(this.apiClient,e);return a=rt("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Fnr(l),p=new sF;return Object.assign(p,d),p})}else{let c=Bnr(this.apiClient,e);return a=rt("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o.then(l=>{let d=Nnr(l),p=new sF;return Object.assign(p,d),p})}}};Pae=class extends Xf{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=r.name.split("/operations/")[0],s;n&&"httpOptions"in n&&(s=n.httpOptions);let o=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:s}});return r._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Wer(e);return a=rt("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),o}else{let c=zer(e);return a=rt("{operationName}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json()),o}}async fetchPredictVideosOperationInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=jer(e);return s=rt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};Nae=class extends Xf{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=ssr(this.apiClient,e);s=rt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;let u=msr(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};oGe="x-goog-api-key",GA="https://www.googleapis.com/auth/cloud-platform",Fae=class{constructor(e){if(e.apiKey!==void 0){this.apiKey=e.apiKey;return}let r=ysr(e.googleAuthOptions);this.googleAuth=new aGe.GoogleAuth(r)}async addAuthHeaders(e,r){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,r)}addKeyHeader(e){if(e.get(oGe)===null){if(this.apiKey===void 0)throw new Error("Trying to set API key header but apiKey is not set");e.append(oGe,this.apiKey)}}async addGoogleAuthHeaders(e,r){if(this.googleAuth===void 0)throw new Error("Trying to set google-auth headers but googleAuth is unset");let n=await this.googleAuth.getRequestHeaders(r);for(let[i,s]of n)e.get(i)===null&&e.append(i,s)}};Bae=class{async download(e,r){if(e.downloadPath){let n=await gsr(e,r);if(n instanceof zg){let i=(0,fF.createWriteStream)(e.downloadPath);uGe.Readable.fromWeb(n.responseInternal.body).pipe(i)}else(0,fF.writeFile)(e.downloadPath,n,{encoding:"base64"},i=>{if(i)throw new Error(`Failed to write file to ${e.downloadPath}: ${i}`)})}}};qae=class{create(e,r,n){return new Lae(e,r,n)}},Lae=class{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new iae.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};$ae=class extends Xf{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new Jg(Wg.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){let i={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=r.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},r),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{let i=Object.assign({},r);return await this.tuneInternal(i)}else{let i=Object.assign({},r),s=await this.tuneMldevInternal(i),o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:oae.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Csr(e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>jae(l))}else{let c=Asr(e);return a=rt("{name}",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>PGe(l))}}async listInternal(e){var r,n,i,s;let o,a="",u={};if(this.apiClient.isVertexAI()){let c=Isr(e);return a=rt("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Dsr(l),p=new oF;return Object.assign(p,d),p})}else{let c=xsr(e);return a=rt("tunedModels",c._url),u=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(l=>l.json().then(d=>{let p=d;return p.sdkHttpResponse={headers:l.headers},p})),o.then(l=>{let d=Rsr(l),p=new oF;return Object.assign(p,d),p})}}async cancel(e){var r,n,i,s;let o="",a={};if(this.apiClient.isVertexAI()){let u=bsr(e);o=rt("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let u=Esr(e);o=rt("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI()){let a=wsr(e);return s=rt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>jae(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ssr(e);return s=rt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{let l=c;return l.sdkHttpResponse={headers:u.headers},l})),i.then(u=>Nsr(u))}}},NGe=1024*1024*8,FGe=3,BGe=1e3,qGe=2,d4="x-goog-upload-status";Kae=class{async stat(e){let r={size:0,type:void 0};if(typeof e=="string"){let n=await hF.stat(e);return r.size=n.size,r.type=this.inferMimeType(e),r}else return await qsr(e)}async upload(e,r,n){return typeof e=="string"?await this.uploadFileFromPath(e,r,n):Bsr(e,r,n)}inferMimeType(e){let r=e.slice(e.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[r.toLowerCase()]}async uploadFileFromPath(e,r,n){var i,s,o;let a=0,u=0,c=new zg(new Response),l="upload",d;try{if(d=await hF.open(e,"r"),!d)throw new Error("Failed to open file");for(a=(await d.stat()).size;u<a;){let f=Math.min(NGe,a-u);u+f>=a&&(l+=", finalize");let h=new Uint8Array(f),{bytesRead:g}=await d.read(h,0,f,u);if(g!==f)throw new Error(`Failed to read ${f} bytes from file at offset ${u}. bytes actually read: ${g}`);let _=new Blob([h]),S=0,w=BGe;for(;S<FGe&&(c=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:r,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(u),"Content-Length":String(g)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[d4]));)S++,await LGe(w),w=w*qGe;if(u+=g,((s=c?.headers)===null||s===void 0?void 0:s[d4])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let p=await c?.json();if(((o=c?.headers)===null||o===void 0?void 0:o[d4])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}finally{d&&await d.close()}}};Lsr="gl-node/",pF=class{constructor(e){var r,n,i,s,o,a;if((e.project||e.location)&&e.apiKey)throw new Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(n=(r=e.vertexai)!==null&&r!==void 0?r:jsr("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&n!==void 0?n:!1;let u=Ksr(),c=Hg("GOOGLE_CLOUD_PROJECT"),l=Hg("GOOGLE_CLOUD_LOCATION");this.apiKey=(i=e.apiKey)!==null&&i!==void 0?i:u,this.project=(s=e.project)!==null&&s!==void 0?s:c,this.location=(o=e.location)!==null&&o!==void 0?o:l,e.vertexai&&(!((a=e.googleAuthOptions)===null||a===void 0)&&a.credentials&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(c||l)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&u?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(c||l)&&u&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0));let d=qer(e.httpOptions,e.vertexai,Hg("GOOGLE_VERTEX_BASE_URL"),Hg("GOOGLE_GEMINI_BASE_URL"));d&&(e.httpOptions?e.httpOptions.baseUrl=d:e.httpOptions={baseUrl:d}),this.apiVersion=e.apiVersion;let p=new Fae({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new Oae({auth:p,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Lsr+process.version,uploader:new Kae,downloader:new Bae}),this.models=new Mae(this.apiClient),this.live=new Dae(this.apiClient,p,new qae),this.batches=new bae(this.apiClient),this.chats=new vae(this.models,this.apiClient),this.caches=new _ae(this.apiClient),this.files=new wae(this.apiClient),this.operations=new Pae(this.apiClient),this.authTokens=new Nae(this.apiClient),this.tunings=new $ae(this.apiClient)}}});var EF,$Ge=ce(()=>{"use strict";EF=class{buildPromptForTranslateDocument(e){return`
      You are a translation assistant. ALL OUTPUT MUST BE IN ${e}. 
      If you ever include any text that is not in ${e}, the response will be considered INVALID.

      Task:
      Analyze the document provided. Ignore all images, photos, logos, diagrams, and visual artifacts. 
      Extract only the legible text, translate it into ${e}, and produce a JSON object with the following properties only:

      - "translatedText": a single string containing the FULL translated document text in ${e}.
      - "structuredTranslatedText": an object mapping page keys to HTML strings for each page, e.g. { "page1": "...", "page2": "..." }.
        Each page string must be valid HTML (semantic tags) and include only the translated text (no original-language text), with inline Tailwind CSS classes allowed.

      REQUIRED FORMAT (must be raw JSON only):
      - Respond with raw JSON only. Do NOT add any surrounding text, Markdown, or code fences.
      - The JSON must parse with JSON.parse() without error.
      - Property names must be exactly: translatedText, structuredTranslatedText.

      IMPORTANT BEHAVIORAL RULES:
      1. ALL textual content (including inside structuredTranslatedText HTML) MUST BE IN ${e}. Do NOT include any original-language fragments or English.
      2. The value of translatedText MUST EXACTLY MATCH the textual content inside the structuredTranslatedText HTML (ignoring HTML tags). They must contain the same translation.
      3. Use semantic HTML elements (p, h1-h6, ul/li, etc.). You may include inline Tailwind classes on those tags.
      4. Do NOT include any additional properties, metadata, comments, or explanatory text.
      5. If you cannot translate or detect the language, return this JSON with an "error" property explaining the issue, and no other text: { "error": "explanation in ${e}" }.
      6. If the translation would be identical to the input (e.g., input already in ${e}), still return the JSON object with translatedText in ${e}.
      
      7. **STRICTLY IGNORE IMAGES AND GRAPHICS**: 
         - Do NOT attempt to translate text inside complex logos, stamps, or low-quality images.
         - Do NOT write descriptions of images (e.g., do NOT write "[Logo]", "[Signature]", or "[Image of house]"). 
         - Do NOT use HTML <img> tags. 
         - Focus ONLY on the main body text, headers, and tables.

      PLACEHOLDER EXAMPLE (do NOT return this example; output must be real JSON as specified):
      {
        "translatedText": "<TRANSLATED_TEXT_IN_${e}>",
        "structuredTranslatedText": {
          "page1": "<p class="text-base">&lt;TRANSLATED_TEXT_FOR_PAGE_1_IN_${e}&gt;</p>"
        }
      }

      Remember:
      - Raw JSON only. No markdown, no code fences, no explanation.
      - All content must be in ${e}.
      - IGNORE IMAGES.
      `}buildPromptForSummarizeDocument(e,r){return`
You are a multilingual document analysis assistant.

Your task:
1. Carefully read the following document written in ${r}.
2. Extract structured information and produce a concise, factual JSON summary.
3. **All textual fields (title, sender, summary, action plan, action plans, etc.) must be written fully in ${r}.**

---

### DOCUMENT CONTENT
${e}

---

### OUTPUT FORMAT
Return only **raw JSON** (no markdown, no code fences, no explanations).
The JSON must include these exact keys and meanings:

{
  "title": "string \u2014 short descriptive title of the document (in ${r})",
  "receivedDate": "string \u2014 date when the document was received (ISO 8601 format, e.g. ${new Date().toISOString()})",
  "sender": "string \u2014 name of the person, organization, or institution that sent or authored the document (in ${r})",
  "summary": "string \u2014 comprehensive and factual summary of the document\u2019s full content (in ${r})",

  "actionPlan": [
    {
      "title": "string \u2014 key point, recommendation, or insight derived from the document (in ${r})",
      "reason": "string \u2014 explanation or context for why this key point or recommendation is important (in ${r})"
    }
  ],

  "actionPlans": [
    {
      "title": "string \u2014 specific actionable task the user should perform based on this document (in ${r})",
      "due_date": "string \u2014 ISO 8601 date by which this task should be completed",
      "completed": false,
      "location": "string \u2014 where or in what context this action should take place (in ${r})"
    }
  ]
}

---

### DIFFERENCE BETWEEN actionPlan AND actionPlans
- **actionPlan** = Key insights or recommendations *summarized from* the document. Think of them as what the document is *telling or advising* the reader.
  - Example: \u201CRenew your ID before expiry.\u201D / \u201CKeep record of transaction history.\u201D
- **actionPlans** = Specific actionable tasks the *user needs to do* as a result of the document.
  - Example: \u201CVisit the municipal office to renew ID before 2025-12-31.\u201D / \u201CSend follow-up email to finance department.\u201D

---

### CRITICAL INSTRUCTIONS
- All text must be written fully in ${r}.
- If the document is already in ${r}, keep it in that same language.
- Avoid English or mixed-language responses.
- Ensure the JSON is valid and can be parsed directly with \`JSON.parse()\`.
- Do NOT include markdown, explanations, or text outside the JSON.
- If any information is missing, infer it if possible, or leave the field as an empty string ("").

---

### EXAMPLE (placeholders only \u2014 do not output in English):
{
  "title": "<TITOLO_DEL_DOCUMENTO>",
  "receivedDate": "${new Date().toISOString()}",
  "sender": "<MITTENTE>",
  "summary": "<RIASSUNTO_COMPLETO_IN_${r.toUpperCase()}>",
  "actionPlan": [
    { "title": "<PUNTO_CHIAVE>", "reason": "<SPIEGAZIONE>" }
  ],
  "actionPlans": [
    { "title": "<AZIONE_DA_FARE>", "due_date": "${new Date().toISOString()}", "completed": false, "location": "<LUOGO>" }
  ]
}
`}buildChatBotPrompt(e,r,n){let i=!!n,s=`
You are an expert, highly knowledgeable assistant helping the user understand and discuss a document${i?" and an attached file":""}.

Your goal is to provide clear, accurate, comprehensive, and genuinely helpful responses that enable the user to fully understand the topic and make informed decisions.

Context:
- Translated document text: ${e.translatedText||"No translated text available"}
${i?"- The user has attached a specific file for you to analyze.":""}

Guidelines:
- Base your answers strictly on the translated text, the conversation history${i?", and the content of the attached file":""}.
- Provide thorough and well-structured explanations when needed, not just brief summaries.
- Be factual, precise, and technically accurate.
- Anticipate follow-up questions and proactively clarify complex points.
- When appropriate, include links to official documentation, specifications, or trusted technical resources to guide the user further.
- Do not hallucinate information or fabricate sources.

Language Rule:
- Always respond in the same language as the user's current prompt (${r}), even if the document or attached file is written in a different language.
`.trim(),o=[];e.chats.forEach(c=>{o.push({role:"user",parts:[{text:c.userPrompt}]}),c.response&&o.push({role:"model",parts:[{text:c.response}]})});let a=[];n&&a.push({inlineData:{mimeType:n.mimetype,data:n.buffer.toString("base64")}});let u=r;return i&&(u=`${r}

[System Note: User has attached a file. Analyze it in context. Respond in the language of this prompt.]`),a.push({text:u}),o.push({role:"user",parts:a}),{systemInstruction:s,contents:o}}}});var ePr,KGe,m4,UGe=ce(()=>{"use strict";ePr=Ct(SLe());jGe();SP();KGe=Ct(r0());bf();hw();$Ge();om();m4=class{constructor(){this.model="gemini-2.5-flash";this.geminiAi=new pF({apiKey:As.GEMINI_API_KEY}),this.userPrompt=new EF}async translateDocument(e,r){if(!e||!e.buffer)throw new Rn("A valid file is required for translation");let i=[{text:this.userPrompt.buildPromptForTranslateDocument(r)},{inlineData:{mimeType:e.mimetype,data:e.buffer.toString("base64")}}];try{let s=await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json",httpOptions:{timeout:12e4}}});if(!s)throw qe.error("Upstream Gemini AI provider returned a null response object"),new qf("The translation service failed to generate a response. Please try again with a valid document.");let o=s.text;if(!o)throw qe.error("Upstream AI provider response contained no text content",{response:s}),new qf("The translation service failed to generate a response. Please try again with a valid document.");return this.parseResponse(o)}catch(s){if(s.isOperational)throw s;this.handleGeminiError(s,"document translation")}}async summarizeDocument(e,r){let n=this.userPrompt.buildPromptForSummarizeDocument(e,r);try{let i=[{text:n}],o=(await this.geminiAi.models.generateContent({model:this.model,contents:i,config:{responseMimeType:"application/json"}})).text;if(!o)throw new Error("No response received from Gemini AI");return this.parseResponse(o)}catch(i){throw qe.error("Gemini document summarization failed",{message:i.message,name:i.name,stack:i.stack,cause:i.cause,isNetworkError:i.message?.includes("fetch failed"),hint:i.message?.includes("fetch failed")?"Likely a network or API connection issue (check endpoint and key).":"Internal Gemini processing error."}),new Error(i||"Gemini summarization translation failed")}}parseResponse(e){try{let r=e.trim(),n=r.match(/```(?:json)?\s*([\s\S]*?)\s*```/i);if(n&&n[1])r=n[1].trim();else{let s=r.indexOf("{"),o=r.lastIndexOf("}");s!==-1&&o!==-1&&o>s&&(r=r.substring(s,o+1))}let i=JSON.parse(r);return{translatedText:i.translatedText??"",structuredTranslatedText:i.structuredTranslatedText??{},title:i.title??"",sender:i.sender??"",receivedDate:i.receivedDate??new Date().toISOString(),summary:i.summary??"",actionPlan:i.actionPlan??[],actionPlans:Array.isArray(i.actionPlans)?i.actionPlans.map(s=>({id:Og(),title:s.title??"",dueDate:s.due_date??new Date().toISOString(),completed:s.completed??!1,location:s.location??""})):[]}}catch(r){throw qe.error("Failed to parse AI JSON response",{originalResponse:e,error:Xs.serialize(r)}),new qf("The translation service returned an unreadable result. Please try again with a valid document.")}}async*chatBotStream(e,r,n){try{let{systemInstruction:i,contents:s}=this.userPrompt.buildChatBotPrompt(e,r,n),o=await this.geminiAi.models.generateContentStream({model:this.model,contents:s,config:{systemInstruction:i}});for await(let a of o){let u=a.text;u&&(yield u)}}catch(i){this.handleGeminiError(i,"chat")}}handleGeminiError(e,r){let n=e.message||"";throw qe.error(`Upstream AI Provider Error during ${r}`,{provider:"Google Gemini",technicalMessage:n,stack:e.stack,status:e.status}),n.includes("deadline exceeded")||n.includes("timeout")?new WM("The request took too long to process. Please try again with a smaller file.","AI_PROCESSING_TIMEOUT"):n.includes("fetch failed")||n.includes("network")?new qf("The AI processing service is temporarily unreachable. Please try again later."):e.status===429?new qf("AI processing limit reached. Please try again in a moment.","AI_RATE_LIMIT_EXCEEDED"):new qf("An error occurred while processing the document.","AI_PROVIDER_ERROR")}};m4=E1([(0,KGe.injectable)()],m4)});var VGe=m(()=>{"use strict";var zA=Ct(r0());TBe();NBe();LBe();UGe();zA.container.register("IUserService",{useClass:__});zA.container.register("IDocumentService",{useClass:v_});zA.container.register("IGeminiAIService",{useClass:m4});zA.container.register("IChatBotService",{useClass:w_})});var na={};da(na,{__addDisposableResource:()=>mHe,__assign:()=>bF,__asyncDelegator:()=>aHe,__asyncGenerator:()=>oHe,__asyncValues:()=>uHe,__await:()=>y4,__awaiter:()=>eHe,__classPrivateFieldGet:()=>pHe,__classPrivateFieldIn:()=>hHe,__classPrivateFieldSet:()=>fHe,__createBinding:()=>vF,__decorate:()=>zGe,__disposeResources:()=>yHe,__esDecorate:()=>JGe,__exportStar:()=>rHe,__extends:()=>GGe,__generator:()=>tHe,__importDefault:()=>dHe,__importStar:()=>lHe,__makeTemplateObject:()=>cHe,__metadata:()=>ZGe,__param:()=>WGe,__propKey:()=>QGe,__read:()=>Qae,__rest:()=>HGe,__rewriteRelativeImportExtension:()=>gHe,__runInitializers:()=>YGe,__setFunctionName:()=>XGe,__spread:()=>nHe,__spreadArray:()=>sHe,__spreadArrays:()=>iHe,__values:()=>_F,default:()=>Gsr});function GGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jae(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function HGe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function zGe(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function WGe(t,e){return function(r,n){e(r,n,t)}}function JGe(t,e,r,n,i,s){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,l=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,p=!1,f=r.length-1;f>=0;f--){var h={};for(var g in n)h[g]=g==="access"?{}:n[g];for(var g in n.access)h.access[g]=n.access[g];h.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(S||null))};var _=(0,r[f])(a==="accessor"?{get:l.get,set:l.set}:l[u],h);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(d=o(_.get))&&(l.get=d),(d=o(_.set))&&(l.set=d),(d=o(_.init))&&i.unshift(d)}else(d=o(_))&&(a==="field"?i.unshift(d):l[u]=d)}c&&Object.defineProperty(c,n.name,l),p=!0}function YGe(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function QGe(t){return typeof t=="symbol"?t:"".concat(t)}function XGe(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function ZGe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function eHe(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function tHe(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function rHe(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vF(e,t,r)}function _F(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qae(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function nHe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qae(arguments[e]));return t}function iHe(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function sHe(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function y4(t){return this instanceof y4?(this.v=t,this):new y4(t)}function oHe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function a(f,h){n[f]&&(i[f]=function(g){return new Promise(function(_,S){s.push([f,g,_,S])>1||u(f,g)})},h&&(i[f]=h(i[f])))}function u(f,h){try{c(n[f](h))}catch(g){p(s[0][3],g)}}function c(f){f.value instanceof y4?Promise.resolve(f.value.v).then(l,d):p(s[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function p(f,h){f(h),s.shift(),s.length&&u(s[0][0],s[0][1])}}function aHe(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:y4(t[i](o)),done:!1}:s?s(o):o}:s}}function uHe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof _F=="function"?_F(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function cHe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function lHe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Yae(t),n=0;n<r.length;n++)r[n]!=="default"&&vF(e,t,r[n]);return Usr(e,t),e}function dHe(t){return t&&t.__esModule?t:{default:t}}function pHe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function fHe(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function hHe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function mHe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function yHe(t){function e(s){t.error=t.hasError?new Vsr(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function gHe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,s,o){return n?e?".jsx":".js":i&&(!s||!o)?r:i+s+"."+o.toLowerCase()+"js"}):t}var Jae,bF,vF,Usr,Yae,Vsr,Gsr,ia=ce(()=>{Jae=function(t,e){return Jae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Jae(t,e)};bF=function(){return bF=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bF.apply(this,arguments)};vF=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});Usr=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Yae=function(t){return Yae=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Yae(t)};Vsr=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};Gsr={__extends:GGe,__assign:bF,__rest:HGe,__decorate:zGe,__param:WGe,__esDecorate:JGe,__runInitializers:YGe,__propKey:QGe,__setFunctionName:XGe,__metadata:ZGe,__awaiter:eHe,__generator:tHe,__createBinding:vF,__exportStar:rHe,__values:_F,__read:Qae,__spread:nHe,__spreadArrays:iHe,__spreadArray:sHe,__await:y4,__asyncGenerator:oHe,__asyncDelegator:aHe,__asyncValues:uHe,__makeTemplateObject:cHe,__importStar:lHe,__importDefault:dHe,__classPrivateFieldGet:pHe,__classPrivateFieldSet:fHe,__classPrivateFieldIn:hHe,__addDisposableResource:mHe,__disposeResources:yHe,__rewriteRelativeImportExtension:gHe}});var tue=m(SF=>{"use strict";Object.defineProperty(SF,"__esModule",{value:!0});SF.AsyncFifoQueue=void 0;var Xae=class{constructor(e){this.value=void 0,this.next=null,this.value=e}},Zae=class{constructor(){this.length=0,this.head=null,this.tail=null}push(e){let r=new Xae(e);return this.length?this.tail.next=r:this.head=r,this.tail=r,this.length+=1,r}shift(){if(this.length){let e=this.head;return this.head=this.head.next,this.length-=1,e}else return null}},eue=class{constructor(e=!1){this.ignoreErrors=e,this.queue=new Zae,this.pending=new Set,this.newPromise()}add(e){this.pending.add(e),e.then(r=>{this.pending.delete(e),this.queue.length===0&&this.resolvePromise(r),this.queue.push(r)}).catch(r=>{this.ignoreErrors&&this.queue.push(void 0),this.pending.delete(e),this.rejectPromise(r)})}async waitAll(){await Promise.all(this.pending)}numTotal(){return this.pending.size+this.queue.length}numPending(){return this.pending.size}numQueued(){return this.queue.length}resolvePromise(e){this.resolve(e),this.newPromise()}rejectPromise(e){this.reject(e),this.newPromise()}newPromise(){this.nextPromise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}async wait(){return this.nextPromise}async fetch(){var e;if(!(this.pending.size===0&&this.queue.length===0)){for(;this.queue.length===0;)try{await this.wait()}catch(r){this.ignoreErrors||console.error("Unexpected Error in AsyncFifoQueue",r)}return(e=this.queue.shift())===null||e===void 0?void 0:e.value}}};SF.AsyncFifoQueue=eue});var rue=m(wF=>{"use strict";Object.defineProperty(wF,"__esModule",{value:!0});wF.Backoffs=void 0;var g4=class{static normalize(e){if(Number.isFinite(e))return{type:"fixed",delay:e};if(e)return e}static calculate(e,r,n,i,s){if(e)return Hsr(e,s)(r,e.type,n,i)}};wF.Backoffs=g4;g4.builtinStrategies={fixed:function(t,e=0){return function(){if(e>0){let r=t*(1-e);return Math.floor(Math.random()*t*e+r)}else return t}},exponential:function(t,e=0){return function(r){if(e>0){let n=Math.round(Math.pow(2,r-1)*t),i=n*(1-e);return Math.floor(Math.random()*n*e+i)}else return Math.round(Math.pow(2,r-1)*t)}}};function Hsr(t,e){if(t.type in g4.builtinStrategies)return g4.builtinStrategies[t.type](t.delay,t.jitter);if(e)return e;throw new Error(`Unknown backoff strategy ${t.type}.
      If a custom backoff strategy is used, specify it when the queue is created.`)}});var bHe=m(AF=>{"use strict";Object.defineProperty(AF,"__esModule",{value:!0});AF.ChildCommand=void 0;var EHe;(function(t){t[t.Init=0]="Init",t[t.Start=1]="Start",t[t.Stop=2]="Stop",t[t.GetChildrenValuesResponse=3]="GetChildrenValuesResponse",t[t.GetIgnoredChildrenFailuresResponse=4]="GetIgnoredChildrenFailuresResponse",t[t.MoveToWaitingChildrenResponse=5]="MoveToWaitingChildrenResponse"})(EHe||(AF.ChildCommand=EHe={}))});var vHe=m(CF=>{"use strict";Object.defineProperty(CF,"__esModule",{value:!0});CF.ErrorCode=void 0;var _He;(function(t){t[t.JobNotExist=-1]="JobNotExist",t[t.JobLockNotExist=-2]="JobLockNotExist",t[t.JobNotInState=-3]="JobNotInState",t[t.JobPendingChildren=-4]="JobPendingChildren",t[t.ParentJobNotExist=-5]="ParentJobNotExist",t[t.JobLockMismatch=-6]="JobLockMismatch",t[t.ParentJobCannotBeReplaced=-7]="ParentJobCannotBeReplaced",t[t.JobBelongsToJobScheduler=-8]="JobBelongsToJobScheduler",t[t.JobHasFailedChildren=-9]="JobHasFailedChildren",t[t.SchedulerJobIdCollision=-10]="SchedulerJobIdCollision",t[t.SchedulerJobSlotsBusy=-11]="SchedulerJobSlotsBusy"})(_He||(CF.ErrorCode=_He={}))});var wHe=m(TF=>{"use strict";Object.defineProperty(TF,"__esModule",{value:!0});TF.ParentCommand=void 0;var SHe;(function(t){t[t.Completed=0]="Completed",t[t.Error=1]="Error",t[t.Failed=2]="Failed",t[t.InitFailed=3]="InitFailed",t[t.InitCompleted=4]="InitCompleted",t[t.Log=5]="Log",t[t.MoveToDelayed=6]="MoveToDelayed",t[t.MoveToWait=7]="MoveToWait",t[t.Progress=8]="Progress",t[t.Update=9]="Update",t[t.GetChildrenValues=10]="GetChildrenValues",t[t.GetIgnoredChildrenFailures=11]="GetIgnoredChildrenFailures",t[t.MoveToWaitingChildren=12]="MoveToWaitingChildren"})(SHe||(TF.ParentCommand=SHe={}))});var CHe=m(OF=>{"use strict";Object.defineProperty(OF,"__esModule",{value:!0});OF.MetricsTime=void 0;var AHe;(function(t){t[t.ONE_MINUTE=1]="ONE_MINUTE",t[t.FIVE_MINUTES=5]="FIVE_MINUTES",t[t.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",t[t.THIRTY_MINUTES=30]="THIRTY_MINUTES",t[t.ONE_HOUR=60]="ONE_HOUR",t[t.ONE_WEEK=10080]="ONE_WEEK",t[t.TWO_WEEKS=20160]="TWO_WEEKS",t[t.ONE_MONTH=80640]="ONE_MONTH"})(AHe||(OF.MetricsTime=AHe={}))});var xHe=m(E4=>{"use strict";Object.defineProperty(E4,"__esModule",{value:!0});E4.SpanKind=E4.TelemetryAttributes=void 0;var THe;(function(t){t.QueueName="bullmq.queue.name",t.QueueOperation="bullmq.queue.operation",t.BulkCount="bullmq.job.bulk.count",t.BulkNames="bullmq.job.bulk.names",t.JobName="bullmq.job.name",t.JobId="bullmq.job.id",t.JobKey="bullmq.job.key",t.JobIds="bullmq.job.ids",t.JobAttemptsMade="bullmq.job.attempts.made",t.DeduplicationKey="bullmq.job.deduplication.key",t.JobOptions="bullmq.job.options",t.JobProgress="bullmq.job.progress",t.QueueDrainDelay="bullmq.queue.drain.delay",t.QueueGrace="bullmq.queue.grace",t.QueueCleanLimit="bullmq.queue.clean.limit",t.QueueRateLimit="bullmq.queue.rate.limit",t.JobType="bullmq.job.type",t.QueueOptions="bullmq.queue.options",t.QueueEventMaxLength="bullmq.queue.event.max.length",t.WorkerOptions="bullmq.worker.options",t.WorkerName="bullmq.worker.name",t.WorkerId="bullmq.worker.id",t.WorkerRateLimit="bullmq.worker.rate.limit",t.WorkerDoNotWaitActive="bullmq.worker.do.not.wait.active",t.WorkerForceClose="bullmq.worker.force.close",t.WorkerStalledJobs="bullmq.worker.stalled.jobs",t.WorkerFailedJobs="bullmq.worker.failed.jobs",t.WorkerJobsToExtendLocks="bullmq.worker.jobs.to.extend.locks",t.JobFinishedTimestamp="bullmq.job.finished.timestamp",t.JobProcessedTimestamp="bullmq.job.processed.timestamp",t.JobResult="bullmq.job.result",t.JobFailedReason="bullmq.job.failed.reason",t.FlowName="bullmq.flow.name",t.JobSchedulerId="bullmq.job.scheduler.id"})(THe||(E4.TelemetryAttributes=THe={}));var OHe;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(OHe||(E4.SpanKind=OHe={}))});var Ru=m(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});var WA=(ia(),Jt(na));WA.__exportStar(bHe(),Yg);WA.__exportStar(vHe(),Yg);WA.__exportStar(wHe(),Yg);WA.__exportStar(CHe(),Yg);WA.__exportStar(xHe(),Yg)});var sue=m(xF=>{"use strict";Object.defineProperty(xF,"__esModule",{value:!0});xF.Child=void 0;var zsr=require("child_process"),Wsr=require("net"),Jsr=require("worker_threads"),nue=Ru(),Ysr=require("events"),Qsr={1:"Uncaught Fatal Exception",2:"Unused",3:"Internal JavaScript Parse Error",4:"Internal JavaScript Evaluation Failure",5:"Fatal Error",6:"Non-function Internal Exception Handler",7:"Internal Exception Handler Run-Time Failure",8:"Unused",9:"Invalid Argument",10:"Internal JavaScript Run-Time Failure",12:"Invalid Debug Argument",13:"Unfinished Top-Level Await"},iue=class extends Ysr.EventEmitter{constructor(e,r,n={useWorkerThreads:!1}){super(),this.mainFile=e,this.processFile=r,this.opts=n,this._exitCode=null,this._signalCode=null,this._killed=!1}get pid(){if(this.childProcess)return this.childProcess.pid;if(this.worker)return Math.abs(this.worker.threadId);throw new Error("No child process or worker thread")}get exitCode(){return this._exitCode}get signalCode(){return this._signalCode}get killed(){return this.childProcess?this.childProcess.killed:this._killed}async init(){let e=await eor(process.execArgv),r;this.opts.useWorkerThreads?this.worker=r=new Jsr.Worker(this.mainFile,Object.assign({execArgv:e,stdin:!0,stdout:!0,stderr:!0},this.opts.workerThreadsOptions?this.opts.workerThreadsOptions:{})):this.childProcess=r=(0,zsr.fork)(this.mainFile,[],Object.assign({execArgv:e,stdio:"pipe"},this.opts.workerForkOptions?this.opts.workerForkOptions:{})),r.on("exit",(n,i)=>{this._exitCode=n,i=typeof i>"u"?null:i,this._signalCode=i,this._killed=!0,this.emit("exit",n,i),r.removeAllListeners(),this.removeAllListeners()}),r.on("error",(...n)=>this.emit("error",...n)),r.on("message",(...n)=>this.emit("message",...n)),r.on("close",(...n)=>this.emit("close",...n)),r.stdout.pipe(process.stdout),r.stderr.pipe(process.stderr),await this.initChild()}async send(e){return new Promise((r,n)=>{this.childProcess?this.childProcess.send(e,i=>{i?n(i):r()}):this.worker?r(this.worker.postMessage(e)):r()})}killProcess(e="SIGKILL"){this.childProcess?this.childProcess.kill(e):this.worker&&this.worker.terminate()}async kill(e="SIGKILL",r){if(this.hasProcessExited())return;let n=Xsr(this.childProcess||this.worker);if(this.killProcess(e),r!==void 0&&(r===0||isFinite(r))){let i=setTimeout(()=>{this.hasProcessExited()||this.killProcess("SIGKILL")},r);await n,clearTimeout(i)}await n}async initChild(){let e=new Promise((r,n)=>{let i=o=>{if(o.cmd===nue.ParentCommand.InitCompleted)r();else if(o.cmd===nue.ParentCommand.InitFailed){let a=new Error;a.stack=o.err.stack,a.message=o.err.message,n(a)}this.off("message",i),this.off("close",s)},s=(o,a)=>{o>128&&(o-=128);let u=Qsr[o]||`Unknown exit code ${o}`;n(new Error(`Error initializing child: ${u} and signal ${a}`)),this.off("message",i),this.off("close",s)};this.on("message",i),this.on("close",s)});await this.send({cmd:nue.ChildCommand.Init,value:this.processFile}),await e}hasProcessExited(){return!!(this.exitCode!==null||this.signalCode)}};xF.Child=iue;function Xsr(t){return new Promise(e=>{t.once("exit",()=>e())})}var Zsr=async()=>new Promise(t=>{let e=(0,Wsr.createServer)();e.listen(0,()=>{let{port:r}=e.address();e.close(()=>t(r))})}),eor=async t=>{let e=[],r=[];for(let n=0;n<t.length;n++){let i=t[n];if(i.indexOf("--inspect")===-1)e.push(i);else{let s=i.split("=")[0],o=await Zsr();r.push(`${s}=${o}`)}}return e.concat(r)}});var uue=m((IF,aue)=>{"use strict";Object.defineProperty(IF,"__esModule",{value:!0});IF.ChildPool=void 0;var IHe=require("path"),tor=sue(),ror=3e4,nor=()=>typeof require=="function"&&typeof aue=="object"&&typeof aue.exports=="object",oue=class{constructor({mainFile:e=nor()?IHe.join(process.cwd(),"dist/cjs/classes/main.js"):IHe.join(process.cwd(),"dist/esm/classes/main.js"),useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}){this.retained={},this.free={},this.opts={mainFile:e,useWorkerThreads:r,workerForkOptions:n,workerThreadsOptions:i}}async retain(e){let r=this.getFree(e).pop();if(r)return this.retained[r.pid]=r,r;r=new tor.Child(this.opts.mainFile,e,{useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),r.on("exit",this.remove.bind(this,r));try{if(await r.init(),r.exitCode!==null||r.signalCode!==null)throw new Error("Child exited before it could be retained");return this.retained[r.pid]=r,r}catch(n){throw console.error(n),this.release(r),n}}release(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)}remove(e){delete this.retained[e.pid];let r=this.getFree(e.processFile),n=r.indexOf(e);n>-1&&r.splice(n,1)}async kill(e,r="SIGKILL"){return this.remove(e),e.kill(r,ror)}async clean(){let e=Object.values(this.retained).concat(this.getAllFree());this.retained={},this.free={},await Promise.all(e.map(r=>this.kill(r,"SIGTERM")))}getFree(e){return this.free[e]=this.free[e]||[]}getAllFree(){return Object.values(this.free).reduce((e,r)=>e.concat(r),[])}};IF.ChildPool=oue});var JA=m((APr,RHe)=>{"use strict";var ior="2.0.0",sor=Number.MAX_SAFE_INTEGER||9007199254740991,oor=16,aor=250,uor=["major","premajor","minor","preminor","patch","prepatch","prerelease"];RHe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:oor,MAX_SAFE_BUILD_LENGTH:aor,MAX_SAFE_INTEGER:sor,RELEASE_TYPES:uor,SEMVER_SPEC_VERSION:ior,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var YA=m((CPr,DHe)=>{"use strict";var cor=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};DHe.exports=cor});var b4=m((cp,kHe)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:cue,MAX_SAFE_BUILD_LENGTH:lor,MAX_LENGTH:dor}=JA(),por=YA();cp=kHe.exports={};var hor=cp.re=[],mor=cp.safeRe=[],Xe=cp.src=[],yor=cp.safeSrc=[],Ze=cp.t={},gor=0,lue="[a-zA-Z0-9-]",Eor=[["\\s",1],["\\d",dor],[lue,lor]],bor=t=>{for(let[e,r]of Eor)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Bt=(t,e,r)=>{let n=bor(e),i=gor++;por(t,i,e),Ze[t]=i,Xe[i]=e,yor[i]=n,hor[i]=new RegExp(e,r?"g":void 0),mor[i]=new RegExp(n,r?"g":void 0)};Bt("NUMERICIDENTIFIER","0|[1-9]\\d*");Bt("NUMERICIDENTIFIERLOOSE","\\d+");Bt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${lue}*`);Bt("MAINVERSION",`(${Xe[Ze.NUMERICIDENTIFIER]})\\.(${Xe[Ze.NUMERICIDENTIFIER]})\\.(${Xe[Ze.NUMERICIDENTIFIER]})`);Bt("MAINVERSIONLOOSE",`(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})\\.(${Xe[Ze.NUMERICIDENTIFIERLOOSE]})`);Bt("PRERELEASEIDENTIFIER",`(?:${Xe[Ze.NONNUMERICIDENTIFIER]}|${Xe[Ze.NUMERICIDENTIFIER]})`);Bt("PRERELEASEIDENTIFIERLOOSE",`(?:${Xe[Ze.NONNUMERICIDENTIFIER]}|${Xe[Ze.NUMERICIDENTIFIERLOOSE]})`);Bt("PRERELEASE",`(?:-(${Xe[Ze.PRERELEASEIDENTIFIER]}(?:\\.${Xe[Ze.PRERELEASEIDENTIFIER]})*))`);Bt("PRERELEASELOOSE",`(?:-?(${Xe[Ze.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Xe[Ze.PRERELEASEIDENTIFIERLOOSE]})*))`);Bt("BUILDIDENTIFIER",`${lue}+`);Bt("BUILD",`(?:\\+(${Xe[Ze.BUILDIDENTIFIER]}(?:\\.${Xe[Ze.BUILDIDENTIFIER]})*))`);Bt("FULLPLAIN",`v?${Xe[Ze.MAINVERSION]}${Xe[Ze.PRERELEASE]}?${Xe[Ze.BUILD]}?`);Bt("FULL",`^${Xe[Ze.FULLPLAIN]}$`);Bt("LOOSEPLAIN",`[v=\\s]*${Xe[Ze.MAINVERSIONLOOSE]}${Xe[Ze.PRERELEASELOOSE]}?${Xe[Ze.BUILD]}?`);Bt("LOOSE",`^${Xe[Ze.LOOSEPLAIN]}$`);Bt("GTLT","((?:<|>)?=?)");Bt("XRANGEIDENTIFIERLOOSE",`${Xe[Ze.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Bt("XRANGEIDENTIFIER",`${Xe[Ze.NUMERICIDENTIFIER]}|x|X|\\*`);Bt("XRANGEPLAIN",`[v=\\s]*(${Xe[Ze.XRANGEIDENTIFIER]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIER]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIER]})(?:${Xe[Ze.PRERELEASE]})?${Xe[Ze.BUILD]}?)?)?`);Bt("XRANGEPLAINLOOSE",`[v=\\s]*(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Xe[Ze.XRANGEIDENTIFIERLOOSE]})(?:${Xe[Ze.PRERELEASELOOSE]})?${Xe[Ze.BUILD]}?)?)?`);Bt("XRANGE",`^${Xe[Ze.GTLT]}\\s*${Xe[Ze.XRANGEPLAIN]}$`);Bt("XRANGELOOSE",`^${Xe[Ze.GTLT]}\\s*${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${cue}})(?:\\.(\\d{1,${cue}}))?(?:\\.(\\d{1,${cue}}))?`);Bt("COERCE",`${Xe[Ze.COERCEPLAIN]}(?:$|[^\\d])`);Bt("COERCEFULL",Xe[Ze.COERCEPLAIN]+`(?:${Xe[Ze.PRERELEASE]})?(?:${Xe[Ze.BUILD]})?(?:$|[^\\d])`);Bt("COERCERTL",Xe[Ze.COERCE],!0);Bt("COERCERTLFULL",Xe[Ze.COERCEFULL],!0);Bt("LONETILDE","(?:~>?)");Bt("TILDETRIM",`(\\s*)${Xe[Ze.LONETILDE]}\\s+`,!0);cp.tildeTrimReplace="$1~";Bt("TILDE",`^${Xe[Ze.LONETILDE]}${Xe[Ze.XRANGEPLAIN]}$`);Bt("TILDELOOSE",`^${Xe[Ze.LONETILDE]}${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("LONECARET","(?:\\^)");Bt("CARETTRIM",`(\\s*)${Xe[Ze.LONECARET]}\\s+`,!0);cp.caretTrimReplace="$1^";Bt("CARET",`^${Xe[Ze.LONECARET]}${Xe[Ze.XRANGEPLAIN]}$`);Bt("CARETLOOSE",`^${Xe[Ze.LONECARET]}${Xe[Ze.XRANGEPLAINLOOSE]}$`);Bt("COMPARATORLOOSE",`^${Xe[Ze.GTLT]}\\s*(${Xe[Ze.LOOSEPLAIN]})$|^$`);Bt("COMPARATOR",`^${Xe[Ze.GTLT]}\\s*(${Xe[Ze.FULLPLAIN]})$|^$`);Bt("COMPARATORTRIM",`(\\s*)${Xe[Ze.GTLT]}\\s*(${Xe[Ze.LOOSEPLAIN]}|${Xe[Ze.XRANGEPLAIN]})`,!0);cp.comparatorTrimReplace="$1$2$3";Bt("HYPHENRANGE",`^\\s*(${Xe[Ze.XRANGEPLAIN]})\\s+-\\s+(${Xe[Ze.XRANGEPLAIN]})\\s*$`);Bt("HYPHENRANGELOOSE",`^\\s*(${Xe[Ze.XRANGEPLAINLOOSE]})\\s+-\\s+(${Xe[Ze.XRANGEPLAINLOOSE]})\\s*$`);Bt("STAR","(<|>)?=?\\s*\\*");Bt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Bt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var RF=m((TPr,MHe)=>{"use strict";var _or=Object.freeze({loose:!0}),vor=Object.freeze({}),Sor=t=>t?typeof t!="object"?_or:t:vor;MHe.exports=Sor});var due=m((OPr,FHe)=>{"use strict";var PHe=/^[0-9]+$/,NHe=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=PHe.test(t),n=PHe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},wor=(t,e)=>NHe(e,t);FHe.exports={compareIdentifiers:NHe,rcompareIdentifiers:wor}});var Oo=m((xPr,qHe)=>{"use strict";var DF=YA(),{MAX_LENGTH:BHe,MAX_SAFE_INTEGER:kF}=JA(),{safeRe:MF,t:PF}=b4(),Aor=RF(),{compareIdentifiers:pue}=due(),fue=class t{constructor(e,r){if(r=Aor(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>BHe)throw new TypeError(`version is longer than ${BHe} characters`);DF("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?MF[PF.LOOSE]:MF[PF.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>kF||this.major<0)throw new TypeError("Invalid major version");if(this.minor>kF||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>kF||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<kF)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(DF("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(DF("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return pue(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(DF("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return pue(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?MF[PF.PRERELEASELOOSE]:MF[PF.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),pue(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};qHe.exports=fue});var Qg=m((IPr,jHe)=>{"use strict";var LHe=Oo(),Cor=(t,e,r=!1)=>{if(t instanceof LHe)return t;try{return new LHe(t,e)}catch(n){if(!r)return null;throw n}};jHe.exports=Cor});var KHe=m((RPr,$He)=>{"use strict";var Tor=Qg(),Oor=(t,e)=>{let r=Tor(t,e);return r?r.version:null};$He.exports=Oor});var VHe=m((DPr,UHe)=>{"use strict";var xor=Qg(),Ior=(t,e)=>{let r=xor(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};UHe.exports=Ior});var zHe=m((kPr,HHe)=>{"use strict";var GHe=Oo(),Ror=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new GHe(t instanceof GHe?t.version:t,r).inc(e,n,i).version}catch{return null}};HHe.exports=Ror});var YHe=m((MPr,JHe)=>{"use strict";var WHe=Qg(),Dor=(t,e)=>{let r=WHe(t,null,!0),n=WHe(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,o=s?r:n,a=s?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};JHe.exports=Dor});var XHe=m((PPr,QHe)=>{"use strict";var kor=Oo(),Mor=(t,e)=>new kor(t,e).major;QHe.exports=Mor});var eze=m((NPr,ZHe)=>{"use strict";var Por=Oo(),Nor=(t,e)=>new Por(t,e).minor;ZHe.exports=Nor});var rze=m((FPr,tze)=>{"use strict";var For=Oo(),Bor=(t,e)=>new For(t,e).patch;tze.exports=Bor});var ize=m((BPr,nze)=>{"use strict";var qor=Qg(),Lor=(t,e)=>{let r=qor(t,e);return r&&r.prerelease.length?r.prerelease:null};nze.exports=Lor});var Vc=m((qPr,oze)=>{"use strict";var sze=Oo(),jor=(t,e,r)=>new sze(t,r).compare(new sze(e,r));oze.exports=jor});var uze=m((LPr,aze)=>{"use strict";var $or=Vc(),Kor=(t,e,r)=>$or(e,t,r);aze.exports=Kor});var lze=m((jPr,cze)=>{"use strict";var Uor=Vc(),Vor=(t,e)=>Uor(t,e,!0);cze.exports=Vor});var NF=m(($Pr,pze)=>{"use strict";var dze=Oo(),Gor=(t,e,r)=>{let n=new dze(t,r),i=new dze(e,r);return n.compare(i)||n.compareBuild(i)};pze.exports=Gor});var hze=m((KPr,fze)=>{"use strict";var Hor=NF(),zor=(t,e)=>t.sort((r,n)=>Hor(r,n,e));fze.exports=zor});var yze=m((UPr,mze)=>{"use strict";var Wor=NF(),Jor=(t,e)=>t.sort((r,n)=>Wor(n,r,e));mze.exports=Jor});var QA=m((VPr,gze)=>{"use strict";var Yor=Vc(),Qor=(t,e,r)=>Yor(t,e,r)>0;gze.exports=Qor});var FF=m((GPr,Eze)=>{"use strict";var Xor=Vc(),Zor=(t,e,r)=>Xor(t,e,r)<0;Eze.exports=Zor});var hue=m((HPr,bze)=>{"use strict";var ear=Vc(),tar=(t,e,r)=>ear(t,e,r)===0;bze.exports=tar});var mue=m((zPr,_ze)=>{"use strict";var rar=Vc(),nar=(t,e,r)=>rar(t,e,r)!==0;_ze.exports=nar});var BF=m((WPr,vze)=>{"use strict";var iar=Vc(),sar=(t,e,r)=>iar(t,e,r)>=0;vze.exports=sar});var qF=m((JPr,Sze)=>{"use strict";var oar=Vc(),aar=(t,e,r)=>oar(t,e,r)<=0;Sze.exports=aar});var yue=m((YPr,wze)=>{"use strict";var uar=hue(),car=mue(),lar=QA(),dar=BF(),par=FF(),far=qF(),har=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return uar(t,r,n);case"!=":return car(t,r,n);case">":return lar(t,r,n);case">=":return dar(t,r,n);case"<":return par(t,r,n);case"<=":return far(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};wze.exports=har});var Cze=m((QPr,Aze)=>{"use strict";var mar=Oo(),yar=Qg(),{safeRe:LF,t:jF}=b4(),gar=(t,e)=>{if(t instanceof mar)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?LF[jF.COERCEFULL]:LF[jF.COERCE]);else{let u=e.includePrerelease?LF[jF.COERCERTLFULL]:LF[jF.COERCERTL],c;for(;(c=u.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return yar(`${n}.${i}.${s}${o}${a}`,e)};Aze.exports=gar});var Oze=m((XPr,Tze)=>{"use strict";var gue=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};Tze.exports=gue});var Gc=m((ZPr,Dze)=>{"use strict";var Ear=/\s+/g,Eue=class t{constructor(e,r){if(r=_ar(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof bue)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Ear," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Ize(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&xar(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Tar)|(this.options.loose&&Oar))+":"+e,i=xze.get(n);if(i)return i;let s=this.options.loose,o=s?sa[xo.HYPHENRANGELOOSE]:sa[xo.HYPHENRANGE];e=e.replace(o,qar(this.options.includePrerelease)),kn("hyphen replace",e),e=e.replace(sa[xo.COMPARATORTRIM],war),kn("comparator trim",e),e=e.replace(sa[xo.TILDETRIM],Aar),kn("tilde trim",e),e=e.replace(sa[xo.CARETTRIM],Car),kn("caret trim",e);let a=e.split(" ").map(d=>Iar(d,this.options)).join(" ").split(/\s+/).map(d=>Bar(d,this.options));s&&(a=a.filter(d=>(kn("loose invalid filter",d,this.options),!!d.match(sa[xo.COMPARATORLOOSE])))),kn("range list",a);let u=new Map,c=a.map(d=>new bue(d,this.options));for(let d of c){if(Ize(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return xze.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>Rze(n,r)&&e.set.some(i=>Rze(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Sar(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Lar(this.set[r],e,this.options))return!0;return!1}};Dze.exports=Eue;var bar=Oze(),xze=new bar,_ar=RF(),bue=XA(),kn=YA(),Sar=Oo(),{safeRe:sa,t:xo,comparatorTrimReplace:war,tildeTrimReplace:Aar,caretTrimReplace:Car}=b4(),{FLAG_INCLUDE_PRERELEASE:Tar,FLAG_LOOSE:Oar}=JA(),Ize=t=>t.value==="<0.0.0-0",xar=t=>t.value==="",Rze=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},Iar=(t,e)=>(t=t.replace(sa[xo.BUILD],""),kn("comp",t,e),t=kar(t,e),kn("caret",t),t=Rar(t,e),kn("tildes",t),t=Par(t,e),kn("xrange",t),t=Far(t,e),kn("stars",t),t),oa=t=>!t||t.toLowerCase()==="x"||t==="*",Rar=(t,e)=>t.trim().split(/\s+/).map(r=>Dar(r,e)).join(" "),Dar=(t,e)=>{let r=e.loose?sa[xo.TILDELOOSE]:sa[xo.TILDE];return t.replace(r,(n,i,s,o,a)=>{kn("tilde",t,n,i,s,o,a);let u;return oa(i)?u="":oa(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:oa(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(kn("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,kn("tilde return",u),u})},kar=(t,e)=>t.trim().split(/\s+/).map(r=>Mar(r,e)).join(" "),Mar=(t,e)=>{kn("caret",t,e);let r=e.loose?sa[xo.CARETLOOSE]:sa[xo.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,u)=>{kn("caret",t,i,s,o,a,u);let c;return oa(s)?c="":oa(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:oa(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(kn("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(kn("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),kn("caret return",c),c})},Par=(t,e)=>(kn("replaceXRanges",t,e),t.split(/\s+/).map(r=>Nar(r,e)).join(" ")),Nar=(t,e)=>{t=t.trim();let r=e.loose?sa[xo.XRANGELOOSE]:sa[xo.XRANGE];return t.replace(r,(n,i,s,o,a,u)=>{kn("xRange",t,n,i,s,o,a,u);let c=oa(s),l=c||oa(o),d=l||oa(a),p=d;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):l?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:d&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),kn("xRange return",n),n})},Far=(t,e)=>(kn("replaceStars",t,e),t.trim().replace(sa[xo.STAR],"")),Bar=(t,e)=>(kn("replaceGTE0",t,e),t.trim().replace(sa[e.includePrerelease?xo.GTE0PRE:xo.GTE0],"")),qar=t=>(e,r,n,i,s,o,a,u,c,l,d,p)=>(oa(n)?r="":oa(i)?r=`>=${n}.0.0${t?"-0":""}`:oa(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,oa(c)?u="":oa(l)?u=`<${+c+1}.0.0-0`:oa(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:t?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),Lar=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(kn(t[n].semver),t[n].semver!==bue.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var XA=m((eNr,Bze)=>{"use strict";var ZA=Symbol("SemVer ANY"),Sue=class t{static get ANY(){return ZA}constructor(e,r){if(r=kze(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),vue("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ZA?this.value="":this.value=this.operator+this.semver.version,vue("comp",this)}parse(e){let r=this.options.loose?Mze[Pze.COMPARATORLOOSE]:Mze[Pze.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Nze(n[2],this.options.loose):this.semver=ZA}toString(){return this.value}test(e){if(vue("Comparator.test",e,this.options.loose),this.semver===ZA||e===ZA)return!0;if(typeof e=="string")try{e=new Nze(e,this.options)}catch{return!1}return _ue(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Fze(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Fze(this.value,r).test(e.semver):(r=kze(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||_ue(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||_ue(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Bze.exports=Sue;var kze=RF(),{safeRe:Mze,t:Pze}=b4(),_ue=yue(),vue=YA(),Nze=Oo(),Fze=Gc()});var e8=m((tNr,qze)=>{"use strict";var jar=Gc(),$ar=(t,e,r)=>{try{e=new jar(e,r)}catch{return!1}return e.test(t)};qze.exports=$ar});var jze=m((rNr,Lze)=>{"use strict";var Kar=Gc(),Uar=(t,e)=>new Kar(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Lze.exports=Uar});var Kze=m((nNr,$ze)=>{"use strict";var Var=Oo(),Gar=Gc(),Har=(t,e,r)=>{let n=null,i=null,s=null;try{s=new Gar(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Var(n,r))}),n};$ze.exports=Har});var Vze=m((iNr,Uze)=>{"use strict";var zar=Oo(),War=Gc(),Jar=(t,e,r)=>{let n=null,i=null,s=null;try{s=new War(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new zar(n,r))}),n};Uze.exports=Jar});var zze=m((sNr,Hze)=>{"use strict";var wue=Oo(),Yar=Gc(),Gze=QA(),Qar=(t,e)=>{t=new Yar(t,e);let r=new wue("0.0.0");if(t.test(r)||(r=new wue("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new wue(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Gze(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Gze(r,s))&&(r=s)}return r&&t.test(r)?r:null};Hze.exports=Qar});var Jze=m((oNr,Wze)=>{"use strict";var Xar=Gc(),Zar=(t,e)=>{try{return new Xar(t,e).range||"*"}catch{return null}};Wze.exports=Zar});var $F=m((aNr,Zze)=>{"use strict";var eur=Oo(),Xze=XA(),{ANY:tur}=Xze,rur=Gc(),nur=e8(),Yze=QA(),Qze=FF(),iur=qF(),sur=BF(),our=(t,e,r,n)=>{t=new eur(t,n),e=new rur(e,n);let i,s,o,a,u;switch(r){case">":i=Yze,s=iur,o=Qze,a=">",u=">=";break;case"<":i=Qze,s=sur,o=Yze,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nur(t,e,n))return!1;for(let c=0;c<e.set.length;++c){let l=e.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===tur&&(f=new Xze(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&s(t,p.semver))return!1;if(p.operator===u&&o(t,p.semver))return!1}return!0};Zze.exports=our});var tWe=m((uNr,eWe)=>{"use strict";var aur=$F(),uur=(t,e,r)=>aur(t,e,">",r);eWe.exports=uur});var nWe=m((cNr,rWe)=>{"use strict";var cur=$F(),lur=(t,e,r)=>cur(t,e,"<",r);rWe.exports=lur});var oWe=m((lNr,sWe)=>{"use strict";var iWe=Gc(),dur=(t,e,r)=>(t=new iWe(t,r),e=new iWe(e,r),t.intersects(e,r));sWe.exports=dur});var uWe=m((dNr,aWe)=>{"use strict";var pur=e8(),fur=Vc();aWe.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,d)=>fur(l,d,r));for(let l of o)pur(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var hWe=m((pNr,fWe)=>{"use strict";var cWe=Gc(),Cue=XA(),{ANY:Aue}=Cue,t8=e8(),Tue=Vc(),hur=(t,e,r={})=>{if(t===e)return!0;t=new cWe(t,r),e=new cWe(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=yur(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},mur=[new Cue(">=0.0.0-0")],lWe=[new Cue(">=0.0.0")],yur=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Aue){if(e.length===1&&e[0].semver===Aue)return!0;r.includePrerelease?t=mur:t=lWe}if(e.length===1&&e[0].semver===Aue){if(r.includePrerelease)return!0;e=lWe}let n=new Set,i,s;for(let f of t)f.operator===">"||f.operator===">="?i=dWe(i,f,r):f.operator==="<"||f.operator==="<="?s=pWe(s,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Tue(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let f of n){if(i&&!t8(f,String(i),r)||s&&!t8(f,String(s),r))return null;for(let h of e)if(!t8(f,String(h),r))return!1;return!0}let a,u,c,l,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of e){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=dWe(i,f,r),a===f&&a!==i)return!1}else if(i.operator===">="&&!t8(i.semver,String(f),r))return!1}if(s){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=pWe(s,f,r),u===f&&u!==s)return!1}else if(s.operator==="<="&&!t8(s.semver,String(f),r))return!1}if(!f.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&l&&!i&&o!==0||p||d)},dWe=(t,e,r)=>{if(!t)return e;let n=Tue(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},pWe=(t,e,r)=>{if(!t)return e;let n=Tue(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};fWe.exports=hur});var EWe=m((fNr,gWe)=>{"use strict";var Oue=b4(),mWe=JA(),gur=Oo(),yWe=due(),Eur=Qg(),bur=KHe(),_ur=VHe(),vur=zHe(),Sur=YHe(),wur=XHe(),Aur=eze(),Cur=rze(),Tur=ize(),Our=Vc(),xur=uze(),Iur=lze(),Rur=NF(),Dur=hze(),kur=yze(),Mur=QA(),Pur=FF(),Nur=hue(),Fur=mue(),Bur=BF(),qur=qF(),Lur=yue(),jur=Cze(),$ur=XA(),Kur=Gc(),Uur=e8(),Vur=jze(),Gur=Kze(),Hur=Vze(),zur=zze(),Wur=Jze(),Jur=$F(),Yur=tWe(),Qur=nWe(),Xur=oWe(),Zur=uWe(),ecr=hWe();gWe.exports={parse:Eur,valid:bur,clean:_ur,inc:vur,diff:Sur,major:wur,minor:Aur,patch:Cur,prerelease:Tur,compare:Our,rcompare:xur,compareLoose:Iur,compareBuild:Rur,sort:Dur,rsort:kur,gt:Mur,lt:Pur,eq:Nur,neq:Fur,gte:Bur,lte:qur,cmp:Lur,coerce:jur,Comparator:$ur,Range:Kur,satisfies:Uur,toComparators:Vur,maxSatisfying:Gur,minSatisfying:Hur,minVersion:zur,validRange:Wur,outside:Jur,gtr:Yur,ltr:Qur,intersects:Xur,simplifyRange:Zur,subset:ecr,SemVer:gur,re:Oue.re,src:Oue.src,tokens:Oue.t,SEMVER_SPEC_VERSION:mWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:mWe.RELEASE_TYPES,compareIdentifiers:yWe.compareIdentifiers,rcompareIdentifiers:yWe.rcompareIdentifiers}});var Hc=m(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.QUEUE_EVENT_SUFFIX=bt.toString=bt.errorToJSON=bt.parseObjectValues=bt.isRedisVersionLowerThan=bt.childSend=bt.asyncSend=bt.DELAY_TIME_1=bt.DELAY_TIME_5=bt.clientCommandMessageReg=bt.optsEncodeMap=bt.optsDecodeMap=bt.errorObject=void 0;bt.tryCatch=ncr;bt.lengthInUtf8Bytes=icr;bt.isEmpty=scr;bt.array2obj=ocr;bt.objectToFlatArray=acr;bt.delay=ucr;bt.increaseMaxListeners=bWe;bt.invertObject=_We;bt.isRedisInstance=vWe;bt.isRedisCluster=ccr;bt.decreaseMaxListeners=lcr;bt.removeAllQueueData=dcr;bt.getParentKey=pcr;bt.isNotConnectionError=fcr;bt.removeUndefinedFields=Scr;bt.trace=wcr;var tcr=EP(),rcr=cs(),xue=EWe(),Iue=Ru();bt.errorObject={value:null};function ncr(t,e,r){try{return t.apply(e,r)}catch(n){return bt.errorObject.value=n,bt.errorObject}}function icr(t){return Buffer.byteLength(t,"utf8")}function scr(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ocr(t){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}function acr(t){let e=[];for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&t[r]!==void 0&&(e[e.length]=r,e[e.length]=t[r]);return e}function ucr(t,e){return new Promise(r=>{let n,i=()=>{e?.signal.removeEventListener("abort",i),clearTimeout(n),r()};n=setTimeout(i,t),e?.signal.addEventListener("abort",i)})}function bWe(t,e){let r=t.getMaxListeners();t.setMaxListeners(r+e)}function _We(t){return Object.entries(t).reduce((e,[r,n])=>(e[n]=r,e),{})}bt.optsDecodeMap={de:"deduplication",fpof:"failParentOnFailure",cpof:"continueParentOnFailure",idof:"ignoreDependencyOnFailure",kl:"keepLogs",rdof:"removeDependencyOnFailure"};bt.optsEncodeMap=Object.assign(Object.assign({},_We(bt.optsDecodeMap)),{debounce:"de"});function vWe(t){return t?["connect","disconnect","duplicate"].every(r=>typeof t[r]=="function"):!1}function ccr(t){return vWe(t)&&t.isCluster}function lcr(t,e){bWe(t,-e)}async function dcr(t,e,r=process.env.BULLMQ_TEST_PREFIX||"bull"){if(t instanceof tcr.Cluster)return Promise.resolve(!1);let n=`${r}:${e}:*`;await await new Promise((s,o)=>{let a=t.scanStream({match:n});a.on("data",u=>{if(u.length){let c=t.pipeline();u.forEach(l=>{c.del(l)}),c.exec().catch(l=>{o(l)})}}),a.on("end",()=>s()),a.on("error",u=>o(u))}),await t.quit()}function pcr(t){if(t)return`${t.queue}:${t.id}`}bt.clientCommandMessageReg=/ERR unknown command ['`]\s*client\s*['`]/;bt.DELAY_TIME_5=5e3;bt.DELAY_TIME_1=100;function fcr(t){let{code:e,message:r}=t;return r!==rcr.CONNECTION_CLOSED_ERROR_MSG&&!r.includes("ECONNREFUSED")&&e!=="ECONNREFUSED"}var hcr=(t,e)=>new Promise((r,n)=>{typeof t.send=="function"?t.send(e,i=>{i?n(i):r()}):typeof t.postMessage=="function"?r(t.postMessage(e)):r()});bt.asyncSend=hcr;var mcr=(t,e)=>(0,bt.asyncSend)(t,e);bt.childSend=mcr;var ycr=(t,e)=>{let r=xue.valid(xue.coerce(t));return xue.lt(r,e)};bt.isRedisVersionLowerThan=ycr;var gcr=t=>{let e={};for(let r of Object.entries(t))e[r[0]]=JSON.parse(r[1]);return e};bt.parseObjectValues=gcr;var Ecr=t=>{let e=new WeakSet;return e.add(t),(r,n)=>{if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular]";e.add(n)}return n}},bcr=t=>{let e={};return Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]}),JSON.parse(JSON.stringify(e,Ecr(t)))};bt.errorToJSON=bcr;var _cr=1/0,vcr=t=>{if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return`${t.map(r=>r==null?r:(0,bt.toString)(r))}`;if(typeof t=="symbol"||Object.prototype.toString.call(t)=="[object Symbol]")return t.toString();let e=`${t}`;return e==="0"&&1/t===-_cr?"-0":e};bt.toString=vcr;bt.QUEUE_EVENT_SUFFIX=":qe";function Scr(t){let e={};for(let r in t)t[r]!==void 0&&(e[r]=t[r]);return e}async function wcr(t,e,r,n,i,s,o){if(t){let{tracer:a,contextManager:u}=t,c=u.active(),l;o&&(l=u.fromMetadata(c,o));let d=i?`${n} ${i}`:n,p=a.startSpan(d,{kind:e},l);try{p.setAttributes({[Iue.TelemetryAttributes.QueueName]:r,[Iue.TelemetryAttributes.QueueOperation]:n});let f,h;return e===Iue.SpanKind.CONSUMER&&l?f=p.setSpanOnContext(l):f=p.setSpanOnContext(c),s.length==2&&(h=u.getMetadata(f)),await u.with(f,()=>s(p,h))}catch(f){throw p.recordException(f),f}finally{p.end()}}else return s()}});var SWe=m(KF=>{"use strict";Object.defineProperty(KF,"__esModule",{value:!0});KF.ChildProcessor=void 0;var Du=Ru(),Rue=Hc(),Rm;(function(t){t[t.Idle=0]="Idle",t[t.Started=1]="Started",t[t.Terminating=2]="Terminating",t[t.Errored=3]="Errored"})(Rm||(Rm={}));var Due=process.env.NODE_ENV==="test"?500:5e3,Mue=class{constructor(e,r){this.send=e,this.receiver=r}async init(e){let r;try{let{default:i}=await import(e);if(r=i,r.default&&(r=r.default),typeof r!="function")throw new Error("No function is exported in processor file")}catch(i){return this.status=Rm.Errored,this.send({cmd:Du.ParentCommand.InitFailed,err:(0,Rue.errorToJSON)(i)})}let n=r;r=function(i,s){try{return Promise.resolve(n(i,s))}catch(o){return Promise.reject(o)}},this.processor=r,this.status=Rm.Idle,await this.send({cmd:Du.ParentCommand.InitCompleted})}async start(e,r){if(this.status!==Rm.Idle)return this.send({cmd:Du.ParentCommand.Error,err:(0,Rue.errorToJSON)(new Error("cannot start a not idling child process"))});this.status=Rm.Started,this.currentJobPromise=(async()=>{try{let n=this.wrapJob(e,this.send),i=await this.processor(n,r);await this.send({cmd:Du.ParentCommand.Completed,value:typeof i>"u"?null:i})}catch(n){await this.send({cmd:Du.ParentCommand.Failed,value:(0,Rue.errorToJSON)(n.message?n:new Error(n))})}finally{this.status=Rm.Idle,this.currentJobPromise=void 0}})()}async stop(){}async waitForCurrentJobAndExit(){this.status=Rm.Terminating;try{await this.currentJobPromise}finally{process.exit(process.exitCode||0)}}wrapJob(e,r){let n=Object.assign(Object.assign({},e),{queueQualifiedName:e.queueQualifiedName,data:JSON.parse(e.data||"{}"),opts:e.opts,returnValue:JSON.parse(e.returnvalue||"{}"),async updateProgress(i){this.progress=i,await r({cmd:Du.ParentCommand.Progress,value:i})},log:async i=>{await r({cmd:Du.ParentCommand.Log,value:i})},moveToDelayed:async(i,s)=>{await r({cmd:Du.ParentCommand.MoveToDelayed,value:{timestamp:i,token:s}})},moveToWait:async i=>{await r({cmd:Du.ParentCommand.MoveToWait,value:{token:i}})},moveToWaitingChildren:async(i,s)=>{let o=Math.random().toString(36).substring(2,15);return await r({requestId:o,cmd:Du.ParentCommand.MoveToWaitingChildren,value:{token:i,opts:s}}),kue(o,this.receiver,Due,"moveToWaitingChildren")},updateData:async i=>{await r({cmd:Du.ParentCommand.Update,value:i}),n.data=i},getChildrenValues:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Du.ParentCommand.GetChildrenValues}),kue(i,this.receiver,Due,"getChildrenValues")},getIgnoredChildrenFailures:async()=>{let i=Math.random().toString(36).substring(2,15);return await r({requestId:i,cmd:Du.ParentCommand.GetIgnoredChildrenFailures}),kue(i,this.receiver,Due,"getIgnoredChildrenFailures")}});return n}};KF.ChildProcessor=Mue;var kue=async(t,e,r,n)=>new Promise((i,s)=>{let o=a=>{a.requestId===t&&(i(a.value),e.off("message",o))};e.on("message",o),setTimeout(()=>{e.off("message",o),s(new Error(`TimeoutError: ${n} timed out in (${r}ms)`))},r)})});var wWe=m(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.DelayedError=Xg.DELAYED_ERROR=void 0;Xg.DELAYED_ERROR="bullmq:movedToDelayed";var Pue=class extends Error{constructor(e=Xg.DELAYED_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Xg.DelayedError=Pue});var AWe=m(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.RateLimitError=Zg.RATE_LIMIT_ERROR=void 0;Zg.RATE_LIMIT_ERROR="bullmq:rateLimitExceeded";var Nue=class extends Error{constructor(e=Zg.RATE_LIMIT_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Zg.RateLimitError=Nue});var Bue=m(e2=>{"use strict";Object.defineProperty(e2,"__esModule",{value:!0});e2.UnrecoverableError=e2.UNRECOVERABLE_ERROR=void 0;e2.UNRECOVERABLE_ERROR="bullmq:unrecoverable";var Fue=class extends Error{constructor(e=e2.UNRECOVERABLE_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};e2.UnrecoverableError=Fue});var CWe=m(t2=>{"use strict";Object.defineProperty(t2,"__esModule",{value:!0});t2.WaitingChildrenError=t2.WAITING_CHILDREN_ERROR=void 0;t2.WAITING_CHILDREN_ERROR="bullmq:movedToWaitingChildren";var que=class extends Error{constructor(e=t2.WAITING_CHILDREN_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};t2.WaitingChildrenError=que});var TWe=m(r2=>{"use strict";Object.defineProperty(r2,"__esModule",{value:!0});r2.WaitingError=r2.WAITING_ERROR=void 0;r2.WAITING_ERROR="bullmq:movedToWait";var Lue=class extends Error{constructor(e=r2.WAITING_ERROR){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};r2.WaitingError=Lue});var UF=m(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});var r8=(ia(),Jt(na));r8.__exportStar(wWe(),n2);r8.__exportStar(AWe(),n2);r8.__exportStar(Bue(),n2);r8.__exportStar(CWe(),n2);r8.__exportStar(TWe(),n2)});var OWe=m(jue=>{"use strict";Object.defineProperty(jue,"__esModule",{value:!0});jue.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var xWe=m($ue=>{"use strict";Object.defineProperty($ue,"__esModule",{value:!0});$ue.default="00000000-0000-0000-0000-000000000000"});var IWe=m(Kue=>{"use strict";Object.defineProperty(Kue,"__esModule",{value:!0});Kue.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var n8=m(Uue=>{"use strict";Object.defineProperty(Uue,"__esModule",{value:!0});var Acr=IWe();function Ccr(t){return typeof t=="string"&&Acr.default.test(t)}Uue.default=Ccr});var i8=m(Vue=>{"use strict";Object.defineProperty(Vue,"__esModule",{value:!0});var Tcr=n8();function Ocr(t){if(!(0,Tcr.default)(t))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(t.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(t.slice(9,13),16))>>>8,e&255,(e=parseInt(t.slice(14,18),16))>>>8,e&255,(e=parseInt(t.slice(19,23),16))>>>8,e&255,(e=parseInt(t.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}Vue.default=Ocr});var e1=m(s8=>{"use strict";Object.defineProperty(s8,"__esModule",{value:!0});s8.unsafeStringify=void 0;var xcr=n8(),ro=[];for(let t=0;t<256;++t)ro.push((t+256).toString(16).slice(1));function RWe(t,e=0){return(ro[t[e+0]]+ro[t[e+1]]+ro[t[e+2]]+ro[t[e+3]]+"-"+ro[t[e+4]]+ro[t[e+5]]+"-"+ro[t[e+6]]+ro[t[e+7]]+"-"+ro[t[e+8]]+ro[t[e+9]]+"-"+ro[t[e+10]]+ro[t[e+11]]+ro[t[e+12]]+ro[t[e+13]]+ro[t[e+14]]+ro[t[e+15]]).toLowerCase()}s8.unsafeStringify=RWe;function Icr(t,e=0){let r=RWe(t,e);if(!(0,xcr.default)(r))throw TypeError("Stringified UUID is invalid");return r}s8.default=Icr});var HF=m(Gue=>{"use strict";Object.defineProperty(Gue,"__esModule",{value:!0});var Rcr=require("crypto"),GF=new Uint8Array(256),VF=GF.length;function Dcr(){return VF>GF.length-16&&((0,Rcr.randomFillSync)(GF),VF=0),GF.slice(VF,VF+=16)}Gue.default=Dcr});var Hue=m(a8=>{"use strict";Object.defineProperty(a8,"__esModule",{value:!0});a8.updateV1State=void 0;var DWe=HF(),kcr=e1(),o8={};function Mcr(t,e,r){let n,i=t?._v6??!1;if(t){let s=Object.keys(t);s.length===1&&s[0]==="_v6"&&(t=void 0)}if(t)n=kWe(t.random??t.rng?.()??(0,DWe.default)(),t.msecs,t.nsecs,t.clockseq,t.node,e,r);else{let s=Date.now(),o=(0,DWe.default)();MWe(o8,s,o),n=kWe(o,o8.msecs,o8.nsecs,i?void 0:o8.clockseq,i?void 0:o8.node,e,r)}return e??(0,kcr.unsafeStringify)(n)}function MWe(t,e,r){return t.msecs??=-1/0,t.nsecs??=0,e===t.msecs?(t.nsecs++,t.nsecs>=1e4&&(t.node=void 0,t.nsecs=0)):e>t.msecs?t.nsecs=0:e<t.msecs&&(t.node=void 0),t.node||(t.node=r.slice(10,16),t.node[0]|=1,t.clockseq=(r[8]<<8|r[9])&16383),t.msecs=e,t}a8.updateV1State=MWe;function kWe(t,e,r,n,i,s,o=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),o=0;else if(o<0||o+16>s.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);e??=Date.now(),r??=0,n??=(t[8]<<8|t[9])&16383,i??=t.slice(10,16),e+=122192928e5;let a=((e&268435455)*1e4+r)%4294967296;s[o++]=a>>>24&255,s[o++]=a>>>16&255,s[o++]=a>>>8&255,s[o++]=a&255;let u=e/4294967296*1e4&268435455;s[o++]=u>>>8&255,s[o++]=u&255,s[o++]=u>>>24&15|16,s[o++]=u>>>16&255,s[o++]=n>>>8|128,s[o++]=n&255;for(let c=0;c<6;++c)s[o++]=i[c];return s}a8.default=Mcr});var Wue=m(zue=>{"use strict";Object.defineProperty(zue,"__esModule",{value:!0});var Pcr=i8(),Ncr=e1();function Fcr(t){let e=typeof t=="string"?(0,Pcr.default)(t):t,r=Bcr(e);return typeof t=="string"?(0,Ncr.unsafeStringify)(r):r}zue.default=Fcr;function Bcr(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var PWe=m(Jue=>{"use strict";Object.defineProperty(Jue,"__esModule",{value:!0});var qcr=require("crypto");function Lcr(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,qcr.createHash)("md5").update(t).digest()}Jue.default=Lcr});var u8=m(t1=>{"use strict";Object.defineProperty(t1,"__esModule",{value:!0});t1.URL=t1.DNS=t1.stringToBytes=void 0;var NWe=i8(),jcr=e1();function FWe(t){t=unescape(encodeURIComponent(t));let e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}t1.stringToBytes=FWe;t1.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t1.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $cr(t,e,r,n,i,s){let o=typeof r=="string"?FWe(r):r,a=typeof n=="string"?(0,NWe.default)(n):n;if(typeof n=="string"&&(n=(0,NWe.default)(n)),n?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(a),u.set(o,a.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){s=s||0;for(let c=0;c<16;++c)i[s+c]=u[c];return i}return(0,jcr.unsafeStringify)(u)}t1.default=$cr});var qWe=m(i2=>{"use strict";Object.defineProperty(i2,"__esModule",{value:!0});i2.URL=i2.DNS=void 0;var Kcr=PWe(),Yue=u8(),BWe=u8();Object.defineProperty(i2,"DNS",{enumerable:!0,get:function(){return BWe.DNS}});Object.defineProperty(i2,"URL",{enumerable:!0,get:function(){return BWe.URL}});function Que(t,e,r,n){return(0,Yue.default)(48,Kcr.default,t,e,r,n)}Que.DNS=Yue.DNS;Que.URL=Yue.URL;i2.default=Que});var LWe=m(Xue=>{"use strict";Object.defineProperty(Xue,"__esModule",{value:!0});var Ucr=require("crypto");Xue.default={randomUUID:Ucr.randomUUID}});var $We=m(Zue=>{"use strict";Object.defineProperty(Zue,"__esModule",{value:!0});var jWe=LWe(),Vcr=HF(),Gcr=e1();function Hcr(t,e,r){if(jWe.default.randomUUID&&!e&&!t)return jWe.default.randomUUID();t=t||{};let n=t.random??t.rng?.()??(0,Vcr.default)();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,Gcr.unsafeStringify)(n)}Zue.default=Hcr});var KWe=m(ece=>{"use strict";Object.defineProperty(ece,"__esModule",{value:!0});var zcr=require("crypto");function Wcr(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),(0,zcr.createHash)("sha1").update(t).digest()}ece.default=Wcr});var VWe=m(s2=>{"use strict";Object.defineProperty(s2,"__esModule",{value:!0});s2.URL=s2.DNS=void 0;var Jcr=KWe(),tce=u8(),UWe=u8();Object.defineProperty(s2,"DNS",{enumerable:!0,get:function(){return UWe.DNS}});Object.defineProperty(s2,"URL",{enumerable:!0,get:function(){return UWe.URL}});function rce(t,e,r,n){return(0,tce.default)(80,Jcr.default,t,e,r,n)}rce.DNS=tce.DNS;rce.URL=tce.URL;s2.default=rce});var GWe=m(nce=>{"use strict";Object.defineProperty(nce,"__esModule",{value:!0});var Ycr=e1(),Qcr=Hue(),Xcr=Wue();function Zcr(t,e,r){t??={},r??=0;let n=(0,Qcr.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,Xcr.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,Ycr.unsafeStringify)(n)}nce.default=Zcr});var HWe=m(ice=>{"use strict";Object.defineProperty(ice,"__esModule",{value:!0});var elr=i8(),tlr=e1();function rlr(t){let e=typeof t=="string"?(0,elr.default)(t):t,r=nlr(e);return typeof t=="string"?(0,tlr.unsafeStringify)(r):r}ice.default=rlr;function nlr(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var YWe=m(c8=>{"use strict";Object.defineProperty(c8,"__esModule",{value:!0});c8.updateV7State=void 0;var zWe=HF(),ilr=e1(),sce={};function slr(t,e,r){let n;if(t)n=WWe(t.random??t.rng?.()??(0,zWe.default)(),t.msecs,t.seq,e,r);else{let i=Date.now(),s=(0,zWe.default)();JWe(sce,i,s),n=WWe(s,sce.msecs,sce.seq,e,r)}return e??(0,ilr.unsafeStringify)(n)}function JWe(t,e,r){return t.msecs??=-1/0,t.seq??=0,e>t.msecs?(t.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],t.msecs=e):(t.seq=t.seq+1|0,t.seq===0&&t.msecs++),t}c8.updateV7State=JWe;function WWe(t,e,r,n,i=0){if(t.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),r??=t[6]*127<<24|t[7]<<16|t[8]<<8|t[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|t[10]&3,n[i++]=t[11],n[i++]=t[12],n[i++]=t[13],n[i++]=t[14],n[i++]=t[15],n}c8.default=slr});var QWe=m(oce=>{"use strict";Object.defineProperty(oce,"__esModule",{value:!0});var olr=n8();function alr(t){if(!(0,olr.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}oce.default=alr});var zF=m(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.version=qr.validate=qr.v7=qr.v6ToV1=qr.v6=qr.v5=qr.v4=qr.v3=qr.v1ToV6=qr.v1=qr.stringify=qr.parse=qr.NIL=qr.MAX=void 0;var ulr=OWe();Object.defineProperty(qr,"MAX",{enumerable:!0,get:function(){return ulr.default}});var clr=xWe();Object.defineProperty(qr,"NIL",{enumerable:!0,get:function(){return clr.default}});var llr=i8();Object.defineProperty(qr,"parse",{enumerable:!0,get:function(){return llr.default}});var dlr=e1();Object.defineProperty(qr,"stringify",{enumerable:!0,get:function(){return dlr.default}});var plr=Hue();Object.defineProperty(qr,"v1",{enumerable:!0,get:function(){return plr.default}});var flr=Wue();Object.defineProperty(qr,"v1ToV6",{enumerable:!0,get:function(){return flr.default}});var hlr=qWe();Object.defineProperty(qr,"v3",{enumerable:!0,get:function(){return hlr.default}});var mlr=$We();Object.defineProperty(qr,"v4",{enumerable:!0,get:function(){return mlr.default}});var ylr=VWe();Object.defineProperty(qr,"v5",{enumerable:!0,get:function(){return ylr.default}});var glr=GWe();Object.defineProperty(qr,"v6",{enumerable:!0,get:function(){return glr.default}});var Elr=HWe();Object.defineProperty(qr,"v6ToV1",{enumerable:!0,get:function(){return Elr.default}});var blr=YWe();Object.defineProperty(qr,"v7",{enumerable:!0,get:function(){return blr.default}});var _lr=n8();Object.defineProperty(qr,"validate",{enumerable:!0,get:function(){return _lr.default}});var vlr=QWe();Object.defineProperty(qr,"version",{enumerable:!0,get:function(){return vlr.default}})});var eJe=m((UNr,ZWe)=>{"use strict";var XWe=()=>process.platform==="linux",WF=null,Slr=()=>{if(!WF)if(XWe()&&process.report){let t=process.report.excludeNetwork;process.report.excludeNetwork=!0,WF=process.report.getReport(),process.report.excludeNetwork=t}else WF={};return WF};ZWe.exports={isLinux:XWe,getReport:Slr}});var rJe=m((VNr,tJe)=>{"use strict";var _4=require("fs"),wlr="/usr/bin/ldd",Alr="/proc/self/exe",JF=2048,Clr=t=>{let e=_4.openSync(t,"r"),r=Buffer.alloc(JF),n=_4.readSync(e,r,0,JF,0);return _4.close(e,()=>{}),r.subarray(0,n)},Tlr=t=>new Promise((e,r)=>{_4.open(t,"r",(n,i)=>{if(n)r(n);else{let s=Buffer.alloc(JF);_4.read(i,s,0,JF,0,(o,a)=>{e(s.subarray(0,a)),_4.close(i,()=>{})})}})});tJe.exports={LDD_PATH:wlr,SELF_PATH:Alr,readFileSync:Clr,readFile:Tlr}});var iJe=m((GNr,nJe)=>{"use strict";var Olr=t=>{if(t.length<64||t.readUInt32BE(0)!==2135247942||t.readUInt8(4)!==2||t.readUInt8(5)!==1)return null;let e=t.readUInt32LE(32),r=t.readUInt16LE(54),n=t.readUInt16LE(56);for(let i=0;i<n;i++){let s=e+i*r;if(t.readUInt32LE(s)===3){let a=t.readUInt32LE(s+8),u=t.readUInt32LE(s+32);return t.subarray(a,a+u).toString().replace(/\0.*$/g,"")}}return null};nJe.exports={interpreterPath:Olr}});var wJe=m((HNr,SJe)=>{"use strict";var oJe=require("child_process"),{isLinux:v4,getReport:aJe}=eJe(),{LDD_PATH:YF,SELF_PATH:uJe,readFile:ace,readFileSync:uce}=rJe(),{interpreterPath:cJe}=iJe(),lp,dp,pp,lJe="getconf GNU_LIBC_VERSION 2>&1 || true; ldd --version 2>&1 || true",Dm="",dJe=()=>Dm||new Promise(t=>{oJe.exec(lJe,(e,r)=>{Dm=e?" ":r,t(Dm)})}),pJe=()=>{if(!Dm)try{Dm=oJe.execSync(lJe,{encoding:"utf8"})}catch{Dm=" "}return Dm},r1="glibc",fJe=/LIBC[a-z0-9 \-).]*?(\d+\.\d+)/i,o2="musl",xlr=t=>t.includes("libc.musl-")||t.includes("ld-musl-"),hJe=()=>{let t=aJe();return t.header&&t.header.glibcVersionRuntime?r1:Array.isArray(t.sharedObjects)&&t.sharedObjects.some(xlr)?o2:null},mJe=t=>{let[e,r]=t.split(/[\r\n]+/);return e&&e.includes(r1)?r1:r&&r.includes(o2)?o2:null},yJe=t=>{if(t){if(t.includes("/ld-musl-"))return o2;if(t.includes("/ld-linux-"))return r1}return null},gJe=t=>(t=t.toString(),t.includes("musl")?o2:t.includes("GNU C Library")?r1:null),Ilr=async()=>{if(dp!==void 0)return dp;dp=null;try{let t=await ace(YF);dp=gJe(t)}catch{}return dp},Rlr=()=>{if(dp!==void 0)return dp;dp=null;try{let t=uce(YF);dp=gJe(t)}catch{}return dp},Dlr=async()=>{if(lp!==void 0)return lp;lp=null;try{let t=await ace(uJe),e=cJe(t);lp=yJe(e)}catch{}return lp},klr=()=>{if(lp!==void 0)return lp;lp=null;try{let t=uce(uJe),e=cJe(t);lp=yJe(e)}catch{}return lp},EJe=async()=>{let t=null;if(v4()&&(t=await Dlr(),!t&&(t=await Ilr(),t||(t=hJe()),!t))){let e=await dJe();t=mJe(e)}return t},bJe=()=>{let t=null;if(v4()&&(t=klr(),!t&&(t=Rlr(),t||(t=hJe()),!t))){let e=pJe();t=mJe(e)}return t},Mlr=async()=>v4()&&await EJe()!==r1,Plr=()=>v4()&&bJe()!==r1,Nlr=async()=>{if(pp!==void 0)return pp;pp=null;try{let e=(await ace(YF)).match(fJe);e&&(pp=e[1])}catch{}return pp},Flr=()=>{if(pp!==void 0)return pp;pp=null;try{let e=uce(YF).match(fJe);e&&(pp=e[1])}catch{}return pp},_Je=()=>{let t=aJe();return t.header&&t.header.glibcVersionRuntime?t.header.glibcVersionRuntime:null},sJe=t=>t.trim().split(/\s+/)[1],vJe=t=>{let[e,r,n]=t.split(/[\r\n]+/);return e&&e.includes(r1)?sJe(e):r&&n&&r.includes(o2)?sJe(n):null},Blr=async()=>{let t=null;if(v4()&&(t=await Nlr(),t||(t=_Je()),!t)){let e=await dJe();t=vJe(e)}return t},qlr=()=>{let t=null;if(v4()&&(t=Flr(),t||(t=_Je()),!t)){let e=pJe();t=vJe(e)}return t};SJe.exports={GLIBC:r1,MUSL:o2,family:EJe,familySync:bJe,isNonGlibcLinux:Mlr,isNonGlibcLinuxSync:Plr,version:Blr,versionSync:qlr}});var BJe=m((zNr,FJe)=>{var Llr=require("fs"),ad=require("path"),jlr=require("url"),TJe=require("os"),OJe=typeof __webpack_require__=="function"?__non_webpack_require__:require,$lr=process.config&&process.config.variables||{},Klr=!!process.env.PREBUILDS_ONLY,fce=process.versions,lce=fce.modules;(fce.deno||process.isBun)&&(lce="unsupported");var cce=Glr()?"electron":Vlr()?"node-webkit":"node",QF=process.env.npm_config_arch||TJe.arch(),XF=process.env.npm_config_platform||TJe.platform(),xJe=process.env.LIBC||(Hlr(XF)?"musl":"glibc"),dce=process.env.ARM_VERSION||(QF==="arm64"?"8":$lr.arm_version)||"",IJe=(fce.uv||"").split(".")[0];FJe.exports=fp;function fp(t){return OJe(fp.resolve(t))}fp.resolve=fp.path=function(t){t=ad.resolve(t||".");var e="",r;try{e=OJe(ad.join(t,"package.json")).name;var n=e.toUpperCase().replace(/-/g,"_");process.env[n+"_PREBUILD"]&&(t=process.env[n+"_PREBUILD"])}catch(g){r=g}if(!Klr){var i=AJe(ad.join(t,"build/Release"),CJe);if(i)return i;var s=AJe(ad.join(t,"build/Debug"),CJe);if(s)return s}var o=f(t);if(o)return o;var a=f(ad.dirname(process.execPath));if(a)return a;var u=(e[0]=="@"?"":"@"+e+"/")+e+"-"+XF+"-"+QF,c;try{var l=ad.dirname(require("module").createRequire(jlr.pathToFileURL(ad.join(t,"package.json"))).resolve(u));return h(l)}catch(g){c=g}var d=["platform="+XF,"arch="+QF,"runtime="+cce,"abi="+lce,"uv="+IJe,dce?"armv="+dce:"","libc="+xJe,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");let p="No native build was found for "+d+`
    attempted loading from: `+t+" and package: "+u+`
`;throw r&&(p+="Error finding package.json: "+r.message+`
`),c&&(p+="Error resolving package: "+c.message+`
`),new Error(p);function f(g){var _=pce(ad.join(g,"prebuilds")).map(RJe),S=_.filter(DJe(XF,QF)).sort(kJe)[0];if(S)return h(ad.join(g,"prebuilds",S.name))}function h(g){var _=pce(g).map(MJe),S=_.filter(PJe(cce,lce)),w=S.sort(NJe(cce))[0];if(w)return ad.join(g,w.file)}};function pce(t){try{return Llr.readdirSync(t)}catch{return[]}}function AJe(t,e){var r=pce(t).filter(e);return r[0]&&ad.join(t,r[0])}function CJe(t){return/\.node$/.test(t)}function RJe(t){var e=t.split("-");if(e.length===2){var r=e[0],n=e[1].split("+");if(r&&n.length&&n.every(Boolean))return{name:t,platform:r,architectures:n}}}function DJe(t,e){return function(r){return r==null||r.platform!==t?!1:r.architectures.includes(e)}}function kJe(t,e){return t.architectures.length-e.architectures.length}function MJe(t){var e=t.split("."),r=e.pop(),n={file:t,specificity:0};if(r==="node"){for(var i=0;i<e.length;i++){var s=e[i];if(s==="node"||s==="electron"||s==="node-webkit")n.runtime=s;else if(s==="napi")n.napi=!0;else if(s.slice(0,3)==="abi")n.abi=s.slice(3);else if(s.slice(0,2)==="uv")n.uv=s.slice(2);else if(s.slice(0,4)==="armv")n.armv=s.slice(4);else if(s==="glibc"||s==="musl")n.libc=s;else continue;n.specificity++}return n}}function PJe(t,e){return function(r){return!(r==null||r.runtime!==t&&!Ulr(r)||r.abi!==e&&!r.napi||r.uv&&r.uv!==IJe||r.armv&&r.armv!==dce||r.libc&&r.libc!==xJe)}}function Ulr(t){return t.runtime==="node"&&t.napi}function NJe(t){return function(e,r){return e.runtime!==r.runtime?e.runtime===t?-1:1:e.abi!==r.abi?e.abi?-1:1:e.specificity!==r.specificity?e.specificity>r.specificity?-1:1:0}}function Vlr(){return!!(process.versions&&process.versions.nw)}function Glr(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function Hlr(t){if(t!=="linux")return!1;let{familySync:e,MUSL:r}=wJe();return e()===r}fp.parseTags=MJe;fp.matchTags=PJe;fp.compareTags=NJe;fp.parseTuple=RJe;fp.matchTuple=DJe;fp.compareTuples=kJe});var qJe=m((WNr,mce)=>{var hce=typeof __webpack_require__=="function"?__non_webpack_require__:require;typeof hce.addon=="function"?mce.exports=hce.addon.bind(hce):mce.exports=BJe()});var jJe=m((JNr,LJe)=>{LJe.exports=qJe()(__dirname)});var vYe=m(Ur=>{"use strict";var tYe=require("stream"),zlr=require("module"),bce;try{bce=new TextDecoder}catch{}var Le,Mu,J=0,Cce=[],c2=Cce,p8=0,un={},_r,i1,ku=0,zc=0,ls,s1,Ro=[],mr,$Je={useRecords:!1,mapsAsObjects:!0},iB=class{},Tce=new iB;Tce.name="MessagePack 0xC1";var km=!1,rYe=2,_ce,vce,Sce;try{new Function("")}catch{rYe=1/0}var Mm=class t{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,r){if(Le)return dYe(()=>(oB(),this?this.unpack(e,r):t.prototype.unpack.call($Je,e,r)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Buffer<"u"?Buffer.from(e):new Uint8Array(e)),typeof r=="object"?(Mu=r.end||e.length,J=r.start||0):(J=0,Mu=r>-1?r:e.length),p8=0,zc=0,i1=null,c2=Cce,ls=null,Le=e;try{mr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw Le=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof t){if(un=this,this.structures)return _r=this.structures,ZF(r);(!_r||_r.length>0)&&(_r=[])}else un=$Je,(!_r||_r.length>0)&&(_r=[]);return ZF(r)}unpackMultiple(e,r){let n,i=0;try{km=!0;let s=e.length,o=this?this.unpack(e,s):lB.unpack(e,s);if(r){if(r(o,i,J)===!1)return;for(;J<s;)if(i=J,r(ZF(),i,J)===!1)return}else{for(n=[o];J<s;)i=J,n.push(ZF());return n}}catch(s){throw s.lastPosition=i,s.values=n,s}finally{km=!1,oB()}}_mergeStructures(e,r){vce&&(e=vce.call(this,e)),e=e||[],Object.isFrozen(e)&&(e=e.map(n=>n.slice(0)));for(let n=0,i=e.length;n<i;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let i=e[n],s=r[n];s&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=s)}return this.structures=e}decode(e,r){return this.unpack(e,r)}};function ZF(t){try{if(!un.trusted&&!km){let r=_r.sharedLength||0;r<_r.length&&(_r.length=r)}let e;if(un.randomAccessStructure&&Le[J]<64&&Le[J]>=32&&_ce?(e=_ce(Le,J,Mu,un),Le=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),J=Mu):e=Mi(),ls&&(J=ls.postBundlePosition,ls=null),km&&(_r.restoreStructures=null),J==Mu)_r&&_r.restoreStructures&&KJe(),_r=null,Le=null,s1&&(s1=null);else{if(J>Mu)throw new Error("Unexpected end of MessagePack data");if(!km){let r;try{r=JSON.stringify(e,(n,i)=>typeof i=="bigint"?`${i}n`:i).slice(0,100)}catch(n){r="(JSON view not available "+n+")"}throw new Error("Data read, but end of buffer not reached "+r)}}return e}catch(e){throw _r&&_r.restoreStructures&&KJe(),oB(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||J>Mu)&&(e.incomplete=!0),e}}function KJe(){for(let t in _r.restoreStructures)_r[t]=_r.restoreStructures[t];_r.restoreStructures=null}function Mi(){let t=Le[J++];if(t<160)if(t<128){if(t<64)return t;{let e=_r[t&63]||un.getStructures&&nYe()[t&63];return e?(e.read||(e.read=Oce(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,un.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=uYe();n==="__proto__"&&(n="__proto_"),e[n]=Mi()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Mi(),Mi());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=Mi();return un.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(zc>=J)return i1.slice(J-ku,(J+=e)-ku);if(zc==0&&Mu<140){let r=e<16?xce(e):aYe(e);if(r!=null)return r}return sB(e)}else{let e;switch(t){case 192:return null;case 193:return ls?(e=Mi(),e>0?ls[1].slice(ls.position1,ls.position1+=e):ls[0].slice(ls.position0,ls.position0-=e)):Tce;case 194:return!1;case 195:return!0;case 196:if(e=Le[J++],e===void 0)throw new Error("Unexpected end of buffer");return yce(e);case 197:return e=mr.getUint16(J),J+=2,yce(e);case 198:return e=mr.getUint32(J),J+=4,yce(e);case 199:return a2(Le[J++]);case 200:return e=mr.getUint16(J),J+=2,a2(e);case 201:return e=mr.getUint32(J),J+=4,a2(e);case 202:if(e=mr.getFloat32(J),un.useFloat32>2){let r=C4[(Le[J]&127)<<1|Le[J+1]>>7];return J+=4,(r*e+(e>0?.5:-.5)>>0)/r}return J+=4,e;case 203:return e=mr.getFloat64(J),J+=8,e;case 204:return Le[J++];case 205:return e=mr.getUint16(J),J+=2,e;case 206:return e=mr.getUint32(J),J+=4,e;case 207:return un.int64AsType==="number"?(e=mr.getUint32(J)*4294967296,e+=mr.getUint32(J+4)):un.int64AsType==="string"?e=mr.getBigUint64(J).toString():un.int64AsType==="auto"?(e=mr.getBigUint64(J),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigUint64(J),J+=8,e;case 208:return mr.getInt8(J++);case 209:return e=mr.getInt16(J),J+=2,e;case 210:return e=mr.getInt32(J),J+=4,e;case 211:return un.int64AsType==="number"?(e=mr.getInt32(J)*4294967296,e+=mr.getUint32(J+4)):un.int64AsType==="string"?e=mr.getBigInt64(J).toString():un.int64AsType==="auto"?(e=mr.getBigInt64(J),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=mr.getBigInt64(J),J+=8,e;case 212:if(e=Le[J++],e==114)return WJe(Le[J++]&63);{let r=Ro[e];if(r)return r.read?(J++,r.read(Mi())):r.noBuffer?(J++,r()):r(Le.subarray(J,++J));throw new Error("Unknown extension "+e)}case 213:return e=Le[J],e==114?(J++,WJe(Le[J++]&63,Le[J++])):a2(2);case 214:return a2(4);case 215:return a2(8);case 216:return a2(16);case 217:return e=Le[J++],zc>=J?i1.slice(J-ku,(J+=e)-ku):iYe(e);case 218:return e=mr.getUint16(J),J+=2,zc>=J?i1.slice(J-ku,(J+=e)-ku):sYe(e);case 219:return e=mr.getUint32(J),J+=4,zc>=J?i1.slice(J-ku,(J+=e)-ku):oYe(e);case 220:return e=mr.getUint16(J),J+=2,VJe(e);case 221:return e=mr.getUint32(J),J+=4,VJe(e);case 222:return e=mr.getUint16(J),J+=2,GJe(e);case 223:return e=mr.getUint32(J),J+=4,GJe(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}var Wlr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Oce(t,e){function r(){if(r.count++>rYe){let i=t.read=new Function("r","return function(){return "+(un.freezeData?"Object.freeze":"")+"({"+t.map(s=>s==="__proto__"?"__proto_:r()":Wlr.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Mi);return t.highByte===0&&(t.read=UJe(e,t.read)),i()}let n={};for(let i=0,s=t.length;i<s;i++){let o=t[i];o==="__proto__"&&(o="__proto_"),n[o]=Mi()}return un.freezeData?Object.freeze(n):n}return r.count=0,t.highByte===0?UJe(e,r):r}var UJe=(t,e)=>function(){let r=Le[J++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),i=_r[n]||nYe()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=Oce(i,t)),i.read()};function nYe(){let t=dYe(()=>(Le=null,un.getStructures()));return _r=un._mergeStructures(t,_r)}var sB=l2,iYe=l2,sYe=l2,oYe=l2;Ur.isNativeAccelerationEnabled=!1;function Jlr(t){Ur.isNativeAccelerationEnabled=!0,sB=e(1),iYe=e(2),sYe=e(3),oYe=e(5);function e(r){return function(i){let s=c2[p8++];if(s==null){if(ls)return l2(i);let a=Le.byteOffset,u=t(J-r+a,Mu+a,Le.buffer);if(typeof u=="string")s=u,c2=Cce;else if(c2=u,p8=1,zc=1,s=c2[0],s===void 0)throw new Error("Unexpected end of buffer")}let o=s.length;return o<=i?(J+=i,s):(i1=s,ku=J,zc=J+o,J+=i,s.slice(0,i))}}}function l2(t){let e;if(t<16&&(e=xce(t)))return e;if(t>64&&bce)return bce.decode(Le.subarray(J,J+=t));let r=J+t,n=[];for(e="";J<r;){let i=Le[J++];if((i&128)===0)n.push(i);else if((i&224)===192){let s=Le[J++]&63;n.push((i&31)<<6|s)}else if((i&240)===224){let s=Le[J++]&63,o=Le[J++]&63;n.push((i&31)<<12|s<<6|o)}else if((i&248)===240){let s=Le[J++]&63,o=Le[J++]&63,a=Le[J++]&63,u=(i&7)<<18|s<<12|o<<6|a;u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u)}else n.push(i);n.length>=4096&&(e+=Rs.apply(String,n),n.length=0)}return n.length>0&&(e+=Rs.apply(String,n)),e}function Ylr(t,e,r){let n=Le;Le=t,J=e;try{return l2(r)}finally{Le=n}}function VJe(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=Mi();return un.freezeData?Object.freeze(e):e}function GJe(t){if(un.mapsAsObjects){let e={};for(let r=0;r<t;r++){let n=uYe();n==="__proto__"&&(n="__proto_"),e[n]=Mi()}return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(Mi(),Mi());return e}}var Rs=String.fromCharCode;function aYe(t){let e=J,r=new Array(t);for(let n=0;n<t;n++){let i=Le[J++];if((i&128)>0){J=e;return}r[n]=i}return Rs.apply(String,r)}function xce(t){if(t<4)if(t<2){if(t===0)return"";{let e=Le[J++];if((e&128)>1){J-=1;return}return Rs(e)}}else{let e=Le[J++],r=Le[J++];if((e&128)>0||(r&128)>0){J-=2;return}if(t<3)return Rs(e,r);let n=Le[J++];if((n&128)>0){J-=3;return}return Rs(e,r,n)}else{let e=Le[J++],r=Le[J++],n=Le[J++],i=Le[J++];if((e&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){J-=4;return}if(t<6){if(t===4)return Rs(e,r,n,i);{let s=Le[J++];if((s&128)>0){J-=5;return}return Rs(e,r,n,i,s)}}else if(t<8){let s=Le[J++],o=Le[J++];if((s&128)>0||(o&128)>0){J-=6;return}if(t<7)return Rs(e,r,n,i,s,o);let a=Le[J++];if((a&128)>0){J-=7;return}return Rs(e,r,n,i,s,o,a)}else{let s=Le[J++],o=Le[J++],a=Le[J++],u=Le[J++];if((s&128)>0||(o&128)>0||(a&128)>0||(u&128)>0){J-=8;return}if(t<10){if(t===8)return Rs(e,r,n,i,s,o,a,u);{let c=Le[J++];if((c&128)>0){J-=9;return}return Rs(e,r,n,i,s,o,a,u,c)}}else if(t<12){let c=Le[J++],l=Le[J++];if((c&128)>0||(l&128)>0){J-=10;return}if(t<11)return Rs(e,r,n,i,s,o,a,u,c,l);let d=Le[J++];if((d&128)>0){J-=11;return}return Rs(e,r,n,i,s,o,a,u,c,l,d)}else{let c=Le[J++],l=Le[J++],d=Le[J++],p=Le[J++];if((c&128)>0||(l&128)>0||(d&128)>0||(p&128)>0){J-=12;return}if(t<14){if(t===12)return Rs(e,r,n,i,s,o,a,u,c,l,d,p);{let f=Le[J++];if((f&128)>0){J-=13;return}return Rs(e,r,n,i,s,o,a,u,c,l,d,p,f)}}else{let f=Le[J++],h=Le[J++];if((f&128)>0||(h&128)>0){J-=14;return}if(t<15)return Rs(e,r,n,i,s,o,a,u,c,l,d,p,f,h);let g=Le[J++];if((g&128)>0){J-=15;return}return Rs(e,r,n,i,s,o,a,u,c,l,d,p,f,h,g)}}}}}function HJe(){let t=Le[J++],e;if(t<192)e=t-160;else switch(t){case 217:e=Le[J++];break;case 218:e=mr.getUint16(J),J+=2;break;case 219:e=mr.getUint32(J),J+=4;break;default:throw new Error("Expected string")}return l2(e)}function yce(t){return un.copyBuffers?Uint8Array.prototype.slice.call(Le,J,J+=t):Le.subarray(J,J+=t)}function a2(t){let e=Le[J++];if(Ro[e]){let r;return Ro[e](Le.subarray(J,r=J+=t),n=>{J=n;try{return Mi()}finally{J=r}})}else throw new Error("Unknown extension type "+e)}var zJe=new Array(4096);function uYe(){let t=Le[J++];if(t>=160&&t<192){if(t=t-160,zc>=J)return i1.slice(J-ku,(J+=t)-ku);if(!(zc==0&&Mu<180))return sB(t)}else return J--,cYe(Mi());let e=(t<<5^(t>1?mr.getUint16(J):t>0?Le[J]:0))&4095,r=zJe[e],n=J,i=J+t-3,s,o=0;if(r&&r.bytes==t){for(;n<i;){if(s=mr.getUint32(n),s!=r[o++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(s=Le[n++],s!=r[o++]){n=1879048192;break}if(n===i)return J=n,r.string;i-=3,n=J}for(r=[],zJe[e]=r,r.bytes=t;n<i;)s=mr.getUint32(n),r.push(s),n+=4;for(i+=3;n<i;)s=Le[n++],r.push(s);let a=t<16?xce(t):aYe(t);return a!=null?r.string=a:r.string=sB(t)}function cYe(t){if(typeof t=="string")return t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";if(un.allowArraysInMapKeys&&Array.isArray(t)&&t.flat().every(e=>["string","number","boolean","bigint"].includes(typeof e)))return t.flat().toString();throw new Error(`Invalid property type for record: ${typeof t}`)}var WJe=(t,e)=>{let r=Mi().map(cYe),n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let i=_r[t];return i&&(i.isShared||km)&&((_r.restoreStructures||(_r.restoreStructures=[]))[t]=i),_r[t]=r,r.read=Oce(r,n),r.read()};Ro[0]=()=>{};Ro[0].noBuffer=!0;Ro[66]=t=>{let e=t.byteLength%8||8,r=BigInt(t[0]&128?t[0]-256:t[0]);for(let n=1;n<e;n++)r<<=BigInt(8),r+=BigInt(t[n]);if(t.byteLength!==e){let n=new DataView(t.buffer,t.byteOffset,t.byteLength),i=(s,o)=>{let a=o-s;if(a<=40){let d=n.getBigUint64(s);for(let p=s+8;p<o;p+=8)d<<=64n,d|=n.getBigUint64(p);return d}let u=s+(a>>4<<3),c=i(s,u),l=i(u,o);return c<<BigInt((o-u)*8)|l};r=r<<BigInt((n.byteLength-e)*8)|i(e,n.byteLength)}return r};var JJe={Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError:typeof AggregateError=="function"?AggregateError:null};Ro[101]=()=>{let t=Mi();if(!JJe[t[0]]){let e=Error(t[1],{cause:t[2]});return e.name=t[0],e}return JJe[t[0]](t[1],{cause:t[2]})};Ro[105]=t=>{if(un.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4);s1||(s1=new Map);let r=Le[J],n;r>=144&&r<160||r==220||r==221?n=[]:r>=128&&r<144||r==222||r==223?n=new Map:(r>=199&&r<=201||r>=212&&r<=216)&&Le[J+1]===115?n=new Set:n={};let i={target:n};s1.set(e,i);let s=Mi();if(i.used)Object.assign(n,s);else return i.target=s;if(n instanceof Map)for(let[o,a]of s.entries())n.set(o,a);if(n instanceof Set)for(let o of Array.from(s))n.add(o);return n};Ro[112]=t=>{if(un.structuredClone===!1)throw new Error("Structured clone extension is disabled");let e=mr.getUint32(J-4),r=s1.get(e);return r.used=!0,r.target};Ro[115]=()=>new Set(Mi());var lYe=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array"),Qlr=typeof globalThis=="object"?globalThis:window;Ro[116]=t=>{let e=t[0],r=Uint8Array.prototype.slice.call(t,1).buffer,n=lYe[e];if(!n){if(e===16)return r;if(e===17)return new DataView(r);throw new Error("Could not find typed array for code "+e)}return new Qlr[n](r)};Ro[120]=()=>{let t=Mi();return new RegExp(t[0],t[1])};var Xlr=[];Ro[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=J;return J+=e-t.length,ls=Xlr,ls=[HJe(),HJe()],ls.position0=0,ls.position1=0,ls.postBundlePosition=J,J=r,Mi()};Ro[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function dYe(t){Sce&&Sce();let e=Mu,r=J,n=p8,i=ku,s=zc,o=i1,a=c2,u=s1,c=ls,l=new Uint8Array(Le.slice(0,Mu)),d=_r,p=_r.slice(0,_r.length),f=un,h=km,g=t();return Mu=e,J=r,p8=n,ku=i,zc=s,i1=o,c2=a,s1=u,ls=c,Le=l,km=h,_r=d,_r.splice(0,_r.length,...p),un=f,mr=new DataView(Le.buffer,Le.byteOffset,Le.byteLength),g}function oB(){Le=null,s1=null,_r=null}function Zlr(t){t.unpack?Ro[t.type]=t.unpack:Ro[t.type]=t}var C4=new Array(147);for(let t=0;t<256;t++)C4[t]=+("1e"+Math.floor(45.15-t*.30103));var edr=Mm,lB=new Mm({useRecords:!1}),tdr=lB.unpack,rdr=lB.unpackMultiple,ndr=lB.unpack,pYe={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},fYe=new Float32Array(1),YJe=new Uint8Array(fYe.buffer,0,4);function idr(t){fYe[0]=t;let e=C4[(YJe[3]&127)<<1|YJe[2]>>7];return(e*t+(t>0?.5:-.5)>>0)/e}function sdr(t,e,r){_ce=t,vce=e,Sce=r}var tB;try{tB=new TextEncoder}catch{}var aB,Ice,A4=typeof Buffer<"u",eB=A4?function(t){return Buffer.allocUnsafeSlow(t)}:Uint8Array,hYe=A4?Buffer:Uint8Array,QJe=A4?4294967296:2144337920,pe,l8,an,ee=0,Io,Zn=null,mYe,odr=21760,adr=/[\u0080-\uFFFF]/,n1=Symbol("record-id"),Pm=class extends Mm{constructor(e){super(e),this.offset=0;let r,n,i,s,o=hYe.prototype.utf8Write?function(k,H){return pe.utf8Write(k,H,pe.byteLength-H)}:tB&&tB.encodeInto?function(k,H){return tB.encodeInto(k,pe.subarray(H)).written}:!1,a=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,l=e.maxSharedStructures;if(l==null&&(l=c?32:0),l>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let d=e.maxOwnStructures;d==null&&(d=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let p=l>32||d+l>64,f=l+64,h=l+d+64;if(h>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],_=0,S=0;this.pack=this.encode=function(k,H){if(pe||(pe=new eB(8192),an=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,8192)),ee=0),Io=pe.length-10,Io-ee<2048?(pe=new eB(pe.length),an=pe.dataView||(pe.dataView=new DataView(pe.buffer,0,pe.length)),Io=pe.length-10,ee=0):ee=ee+7&2147483640,r=ee,H&_dr&&(ee+=H&255),s=a.structuredClone?new Map:null,a.bundleStrings&&typeof k!="string"?(Zn=[],Zn.size=1/0):Zn=null,i=a.structures,i){i.uninitialized&&(i=a._mergeStructures(a.getStructures()));let j=i.sharedLength||0;if(j>l)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let V=0;V<j;V++){let Ee=i[V];if(!Ee)continue;let Re,fe=i.transitions;for(let Ge=0,Me=Ee.length;Ge<Me;Ge++){let Ce=Ee[Ge];Re=fe[Ce],Re||(Re=fe[Ce]=Object.create(null)),fe=Re}fe[n1]=V+64}this.lastNamedStructuresLength=j}u||(i.nextId=j+64)}n&&(n=!1);let ie;try{a.randomAccessStructure&&k&&k.constructor&&k.constructor===Object?U(k):A(k);let j=Zn;if(Zn&&ZJe(r,A,0),s&&s.idsToInsert){let V=s.idsToInsert.sort((Ge,Me)=>Ge.offset>Me.offset?1:-1),Ee=V.length,Re=-1;for(;j&&Ee>0;){let Ge=V[--Ee].offset+r;Ge<j.stringsPosition+r&&Re===-1&&(Re=0),Ge>j.position+r?Re>=0&&(Re+=6):(Re>=0&&(an.setUint32(j.position+r,an.getUint32(j.position+r)+Re),Re=-1),j=j.previous,Ee++)}Re>=0&&j&&an.setUint32(j.position+r,an.getUint32(j.position+r)+Re),ee+=V.length*6,ee>Io&&I(ee),a.offset=ee;let fe=udr(pe.subarray(r,ee),V);return s=null,fe}return a.offset=ee,H&Edr?(pe.start=r,pe.end=ee,pe):pe.subarray(r,ee)}catch(j){throw ie=j,j}finally{if(i&&(w(),n&&a.saveStructures)){let j=i.sharedLength||0,V=pe.subarray(r,ee),Ee=yYe(i,a);if(!ie)return a.saveStructures(Ee,Ee.isCompatible)===!1?a.pack(k,H):(a.lastNamedStructuresLength=j,pe.length>1073741824&&(pe=null),V)}pe.length>1073741824&&(pe=null),H&bdr&&(ee=r)}};let w=()=>{S<10&&S++;let k=i.sharedLength||0;if(i.length>k&&!u&&(i.length=k),_>1e4)i.transitions=null,S=0,_=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let H=0,ie=g.length;H<ie;H++)g[H][n1]=0;g=[]}},C=k=>{var H=k.length;H<16?pe[ee++]=144|H:H<65536?(pe[ee++]=220,pe[ee++]=H>>8,pe[ee++]=H&255):(pe[ee++]=221,an.setUint32(ee,H),ee+=4);for(let ie=0;ie<H;ie++)A(k[ie])},A=k=>{ee>Io&&(pe=I(ee));var H=typeof k,ie;if(H==="string"){let j=k.length;if(Zn&&j>=4&&j<4096){if((Zn.size+=j)>odr){let fe,Ge=(Zn[0]?Zn[0].length*3+Zn[1].length:0)+10;ee+Ge>Io&&(pe=I(ee+Ge));let Me;Zn.position?(Me=Zn,pe[ee]=200,ee+=3,pe[ee++]=98,fe=ee-r,ee+=4,ZJe(r,A,0),an.setUint16(fe+r-3,ee-r-fe)):(pe[ee++]=214,pe[ee++]=98,fe=ee-r,ee+=4),Zn=["",""],Zn.previous=Me,Zn.size=0,Zn.position=fe}let Re=adr.test(k);Zn[Re?0:1]+=k,pe[ee++]=193,A(Re?-j:j);return}let V;j<32?V=1:j<256?V=2:j<65536?V=3:V=5;let Ee=j*3;if(ee+Ee>Io&&(pe=I(ee+Ee)),j<64||!o){let Re,fe,Ge,Me=ee+V;for(Re=0;Re<j;Re++)fe=k.charCodeAt(Re),fe<128?pe[Me++]=fe:fe<2048?(pe[Me++]=fe>>6|192,pe[Me++]=fe&63|128):(fe&64512)===55296&&((Ge=k.charCodeAt(Re+1))&64512)===56320?(fe=65536+((fe&1023)<<10)+(Ge&1023),Re++,pe[Me++]=fe>>18|240,pe[Me++]=fe>>12&63|128,pe[Me++]=fe>>6&63|128,pe[Me++]=fe&63|128):(pe[Me++]=fe>>12|224,pe[Me++]=fe>>6&63|128,pe[Me++]=fe&63|128);ie=Me-ee-V}else ie=o(k,ee+V);ie<32?pe[ee++]=160|ie:ie<256?(V<2&&pe.copyWithin(ee+2,ee+1,ee+1+ie),pe[ee++]=217,pe[ee++]=ie):ie<65536?(V<3&&pe.copyWithin(ee+3,ee+2,ee+2+ie),pe[ee++]=218,pe[ee++]=ie>>8,pe[ee++]=ie&255):(V<5&&pe.copyWithin(ee+5,ee+3,ee+3+ie),pe[ee++]=219,an.setUint32(ee,ie),ee+=4),ee+=ie}else if(H==="number")if(k>>>0===k)k<32||k<128&&this.useRecords===!1||k<64&&!this.randomAccessStructure?pe[ee++]=k:k<256?(pe[ee++]=204,pe[ee++]=k):k<65536?(pe[ee++]=205,pe[ee++]=k>>8,pe[ee++]=k&255):(pe[ee++]=206,an.setUint32(ee,k),ee+=4);else if(k>>0===k)k>=-32?pe[ee++]=256+k:k>=-128?(pe[ee++]=208,pe[ee++]=k+256):k>=-32768?(pe[ee++]=209,an.setInt16(ee,k),ee+=2):(pe[ee++]=210,an.setInt32(ee,k),ee+=4);else{let j;if((j=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){pe[ee++]=202,an.setFloat32(ee,k);let V;if(j<4||(V=k*C4[(pe[ee]&127)<<1|pe[ee+1]>>7])>>0===V){ee+=4;return}else ee--}pe[ee++]=203,an.setFloat64(ee,k),ee+=8}else if(H==="object"||H==="function")if(!k)pe[ee++]=192;else{if(s){let V=s.get(k);if(V){if(!V.id){let Ee=s.idsToInsert||(s.idsToInsert=[]);V.id=Ee.push(V)}pe[ee++]=214,pe[ee++]=112,an.setUint32(ee,V.id),ee+=4;return}else s.set(k,{offset:ee-r})}let j=k.constructor;if(j===Object)M(k);else if(j===Array)C(k);else if(j===Map)if(this.mapAsEmptyObject)pe[ee++]=128;else{ie=k.size,ie<16?pe[ee++]=128|ie:ie<65536?(pe[ee++]=222,pe[ee++]=ie>>8,pe[ee++]=ie&255):(pe[ee++]=223,an.setUint32(ee,ie),ee+=4);for(let[V,Ee]of k)A(V),A(Ee)}else{for(let V=0,Ee=aB.length;V<Ee;V++){let Re=Ice[V];if(k instanceof Re){let fe=aB[V];if(fe.write){fe.type&&(pe[ee++]=212,pe[ee++]=fe.type,pe[ee++]=0);let _t=fe.write.call(this,k);_t===k?Array.isArray(k)?C(k):M(k):A(_t);return}let Ge=pe,Me=an,Ce=ee;pe=null;let Rr;try{Rr=fe.pack.call(this,k,_t=>(pe=Ge,Ge=null,ee+=_t,ee>Io&&I(ee),{target:pe,targetView:an,position:ee-_t}),A)}finally{Ge&&(pe=Ge,an=Me,ee=Ce,Io=pe.length-10)}Rr&&(Rr.length+ee>Io&&I(Rr.length+ee),ee=XJe(Rr,pe,ee,fe.type));return}}if(Array.isArray(k))C(k);else{if(k.toJSON){let V=k.toJSON();if(V!==k)return A(V)}if(H==="function")return A(this.writeFunction&&this.writeFunction(k));M(k)}}}else if(H==="boolean")pe[ee++]=k?195:194;else if(H==="bigint"){if(k<9223372036854776e3&&k>=-9223372036854776e3)pe[ee++]=211,an.setBigInt64(ee,k);else if(k<18446744073709552e3&&k>0)pe[ee++]=207,an.setBigUint64(ee,k);else if(this.largeBigIntToFloat)pe[ee++]=203,an.setFloat64(ee,Number(k));else{if(this.largeBigIntToString)return A(k.toString());if(this.useBigIntExtension||this.moreTypes){let j=k<0?BigInt(-1):BigInt(0),V;if(k>>BigInt(65536)===j){let Ee=BigInt(18446744073709552e3)-BigInt(1),Re=[];for(;Re.push(k&Ee),k>>BigInt(63)!==j;)k>>=BigInt(64);V=new Uint8Array(new BigUint64Array(Re).buffer),V.reverse()}else{let Ee=k<0,Re=(Ee?~k:k).toString(16);if(Re.length%2?Re="0"+Re:parseInt(Re.charAt(0),16)>=8&&(Re="00"+Re),A4)V=Buffer.from(Re,"hex");else{V=new Uint8Array(Re.length/2);for(let fe=0;fe<V.length;fe++)V[fe]=parseInt(Re.slice(fe*2,fe*2+2),16)}if(Ee)for(let fe=0;fe<V.length;fe++)V[fe]=~V[fe]}V.length+ee>Io&&I(V.length+ee),ee=XJe(V,pe,ee,66);return}else throw new RangeError(k+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set largeBigIntToString to convert to string")}ee+=8}else if(H==="undefined")this.encodeUndefinedAsNil?pe[ee++]=192:(pe[ee++]=212,pe[ee++]=0,pe[ee++]=0);else throw new Error("Unknown type: "+H)},O=this.variableMapSize||this.coercibleKeyAsNumber||this.skipValues?k=>{let H;if(this.skipValues){H=[];for(let V in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(V))&&!this.skipValues.includes(k[V])&&H.push(V)}else H=Object.keys(k);let ie=H.length;ie<16?pe[ee++]=128|ie:ie<65536?(pe[ee++]=222,pe[ee++]=ie>>8,pe[ee++]=ie&255):(pe[ee++]=223,an.setUint32(ee,ie),ee+=4);let j;if(this.coercibleKeyAsNumber)for(let V=0;V<ie;V++){j=H[V];let Ee=Number(j);A(isNaN(Ee)?j:Ee),A(k[j])}else for(let V=0;V<ie;V++)A(j=H[V]),A(k[j])}:k=>{pe[ee++]=222;let H=ee-r;ee+=2;let ie=0;for(let j in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(j))&&(A(j),A(k[j]),ie++);if(ie>65535)throw new Error('Object is too large to serialize with fast 16-bit map size, use the "variableMapSize" option to serialize this object');pe[H+++r]=ie>>8,pe[H+r]=ie&255},x=this.useRecords===!1?O:e.progressiveRecords&&!p?k=>{let H,ie=i.transitions||(i.transitions=Object.create(null)),j=ee++-r,V;for(let Ee in k)if(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee)){if(H=ie[Ee],H)ie=H;else{let Re=Object.keys(k),fe=ie;ie=i.transitions;let Ge=0;for(let Me=0,Ce=Re.length;Me<Ce;Me++){let Rr=Re[Me];H=ie[Rr],H||(H=ie[Rr]=Object.create(null),Ge++),ie=H}j+r+1==ee?(ee--,F(ie,Re,Ge)):B(ie,Re,j,Ge),V=!0,ie=fe[Ee]}A(k[Ee])}if(!V){let Ee=ie[n1];Ee?pe[j+r]=Ee:B(ie,Object.keys(k),j,0)}}:k=>{let H,ie=i.transitions||(i.transitions=Object.create(null)),j=0;for(let Ee in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee))&&(H=ie[Ee],H||(H=ie[Ee]=Object.create(null),j++),ie=H);let V=ie[n1];V?V>=96&&p?(pe[ee++]=((V-=96)&31)+96,pe[ee++]=V>>5):pe[ee++]=V:F(ie,ie.__keys__||Object.keys(k),j);for(let Ee in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Ee))&&A(k[Ee])},R=typeof this.useRecords=="function"&&this.useRecords,M=R?k=>{R(k)?x(k):O(k)}:x,I=k=>{let H;if(k>16777216){if(k-r>QJe)throw new Error("Packed buffer would be larger than maximum buffer size");H=Math.min(QJe,Math.round(Math.max((k-r)*(k>67108864?1.25:2),4194304)/4096)*4096)}else H=(Math.max(k-r<<2,pe.length-1)>>12)+1<<12;let ie=new eB(H);return an=ie.dataView||(ie.dataView=new DataView(ie.buffer,0,H)),k=Math.min(k,pe.length),pe.copy?pe.copy(ie,0,r,k):ie.set(pe.slice(r,k)),ee-=r,r=0,Io=ie.length-10,pe=ie},F=(k,H,ie)=>{let j=i.nextId;j||(j=64),j<f&&this.shouldShareStructure&&!this.shouldShareStructure(H)?(j=i.nextOwnId,j<h||(j=f),i.nextOwnId=j+1):(j>=h&&(j=f),i.nextId=j+1);let V=H.highByte=j>=96&&p?j-96>>5:-1;k[n1]=j,k.__keys__=H,i[j-64]=H,j<f?(H.isShared=!0,i.sharedLength=j-63,n=!0,V>=0?(pe[ee++]=(j&31)+96,pe[ee++]=V):pe[ee++]=j):(V>=0?(pe[ee++]=213,pe[ee++]=114,pe[ee++]=(j&31)+96,pe[ee++]=V):(pe[ee++]=212,pe[ee++]=114,pe[ee++]=j),ie&&(_+=S*ie),g.length>=d&&(g.shift()[n1]=0),g.push(k),A(H))},B=(k,H,ie,j)=>{let V=pe,Ee=ee,Re=Io,fe=r;pe=l8,ee=0,r=0,pe||(l8=pe=new eB(8192)),Io=pe.length-10,F(k,H,j),l8=pe;let Ge=ee;if(pe=V,ee=Ee,Io=Re,r=fe,Ge>1){let Me=ee+Ge-1;Me>Io&&I(Me);let Ce=ie+r;pe.copyWithin(Ce+Ge,Ce+1,ee),pe.set(l8.slice(0,Ge),Ce),ee=Me}else pe[ie+r]=l8[0]},U=k=>{let H=mYe(k,pe,r,ee,i,I,(ie,j,V)=>{if(V)return n=!0;ee=j;let Ee=pe;return A(ie),w(),Ee!==pe?{position:ee,targetView:an,target:pe}:ee},this);if(H===0)return M(k);ee=H}}useBuffer(e){pe=e,pe.dataView||(pe.dataView=new DataView(pe.buffer,pe.byteOffset,pe.byteLength)),an=pe.dataView,ee=0}set position(e){ee=e}get position(){return ee}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};Ice=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,DataView,iB];aB=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,n)}else if(n>0&&n<4294967296){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){if(this.setAsEmptyObject)return e(0),r({});let n=Array.from(t),{target:i,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),r(n)}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),r([t.name,t.message,t.cause])}},{pack(t,e,r){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),r([t.source,t.flags])}},{pack(t,e){this.moreTypes?gce(t,16,e):Ece(A4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==hYe&&this.moreTypes?gce(t,lYe.indexOf(r.name),e):Ece(t,e)}},{pack(t,e){this.moreTypes?gce(t,17,e):Ece(A4?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function gce(t,e,r,n){let i=t.byteLength;if(i+1<256){var{target:s,position:o}=r(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=r(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=r(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,t.buffer||(t=new Uint8Array(t)),s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Ece(t,e){let r=t.byteLength;var n,i;if(r<256){var{target:n,position:i}=e(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=e(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:s}=e(r+5);n[i++]=198,s.setUint32(i,r),i+=4}n.set(t,i)}function XJe(t,e,r,n){let i=t.length;switch(i){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:i<256?(e[r++]=199,e[r++]=i):i<65536?(e[r++]=200,e[r++]=i>>8,e[r++]=i&255):(e[r++]=201,e[r++]=i>>24,e[r++]=i>>16&255,e[r++]=i>>8&255,e[r++]=i&255)}return e[r++]=n,e.set(t,r),r+=i,r}function udr(t,e){let r,n=e.length*6,i=t.length-n;for(;r=e.pop();){let s=r.offset,o=r.id;t.copyWithin(s+n,s,i),n-=6;let a=s+n;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,i=s}return t}function ZJe(t,e,r){if(Zn.length>0){an.setUint32(Zn.position+t,ee+r-Zn.position-t),Zn.stringsPosition=ee-t;let n=Zn;Zn=null,e(n[0]),e(n[1])}}function cdr(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");Ice.unshift(t.Class),aB.unshift(t)}Zlr(t)}function yYe(t,e){return t.isCompatible=r=>{let n=!r||(e.lastNamedStructuresLength||0)===r.length;return n||e._mergeStructures(r),n},t}function ldr(t,e){mYe=t,yYe=e}var gYe=new Pm({useRecords:!1}),ddr=gYe.pack,pdr=gYe.pack,fdr=Pm,{NEVER:hdr,ALWAYS:mdr,DECIMAL_ROUND:ydr,DECIMAL_FIT:gdr}=pYe,Edr=512,bdr=1024,_dr=2048,wce=3,w4=0,d8=2,rB=1,Rce=16,EYe=["num","object","string","ascii"];EYe[Rce]="date";var vdr=[!1,!0,!0,!1,!1,!0,!0,!1],bYe;try{new Function(""),bYe=!0}catch{}var u2,Sdr=typeof Buffer<"u",nB,hp;try{nB=new TextEncoder}catch{}var wdr=Sdr?function(t,e,r){return t.utf8Write(e,r,t.byteLength-r)}:nB&&nB.encodeInto?function(t,e,r){return nB.encodeInto(e,t.subarray(r)).written}:!1;ldr(_Ye,xdr);function _Ye(t,e,r,n,i,s,o,a){let u=a.typedStructs||(a.typedStructs=[]),c=e.dataView,l=(u.lastStringStart||100)+n,d=e.length-10,p=n;n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,r=0,d=e.length-10);let f,h=l,g=u.transitions||(u.transitions=Object.create(null)),_=u.nextId||u.length,S=_<15?1:_<240?2:_<61440?3:_<15728640?4:0;if(S===0)return 0;n+=S;let w=[],C,A=0;for(let x in t){let R=t[x],M=g[x];switch(M||(g[x]=M={key:x,parent:g,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),n>d&&(e=s(n),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),typeof R){case"number":let I=R;if(_<200||!M.num64){if(I>>0===I&&I<536870912&&I>-520093696){I<246&&I>=0&&(M.num8&&!(_>200&&M.num32)||I<32&&!M.num32)?(g=M.num8||Wa(M,w4,1),e[n++]=I):(g=M.num32||Wa(M,w4,4),c.setUint32(n,I,!0),n+=4);break}else if(I<4294967296&&I>=-2147483648&&(c.setFloat32(n,I,!0),vdr[e[n+3]>>>5])){let k;if((k=I*C4[(e[n+3]&127)<<1|e[n+2]>>7])>>0===k){g=M.num32||Wa(M,w4,4),n+=4;break}}}g=M.num64||Wa(M,w4,8),c.setFloat64(n,I,!0),n+=8;break;case"string":let F=R.length;if(f=h-l,(F<<2)+h>d&&(e=s((F<<2)+h),c=e.dataView,n-=r,p-=r,l-=r,h-=r,r=0,d=e.length-10),F>65280+f>>2){w.push(x,R,n-p);break}let B,U=h;if(F<64){let k,H,ie;for(k=0;k<F;k++)H=R.charCodeAt(k),H<128?e[h++]=H:H<2048?(B=!0,e[h++]=H>>6|192,e[h++]=H&63|128):(H&64512)===55296&&((ie=R.charCodeAt(k+1))&64512)===56320?(B=!0,H=65536+((H&1023)<<10)+(ie&1023),k++,e[h++]=H>>18|240,e[h++]=H>>12&63|128,e[h++]=H>>6&63|128,e[h++]=H&63|128):(B=!0,e[h++]=H>>12|224,e[h++]=H>>6&63|128,e[h++]=H&63|128)}else h+=wdr(e,R,h),B=h-U>F;if(f<160||f<246&&(M.ascii8||M.string8)){if(B)(g=M.string8)||(u.length>10&&(g=M.ascii8)?(g.__type=d8,M.ascii8=null,M.string8=g,o(null,0,!0)):g=Wa(M,d8,1));else if(f===0&&!C){C=!0,g=M.ascii0||Wa(M,wce,0);break}else!(g=M.ascii8)&&!(u.length>10&&(g=M.string8))&&(g=Wa(M,wce,1));e[n++]=f}else g=M.string16||Wa(M,d8,2),c.setUint16(n,f,!0),n+=2;break;case"object":if(R){R.constructor===Date?(g=M.date64||Wa(M,Rce,8),c.setFloat64(n,R.getTime(),!0),n+=8):w.push(x,R,A);break}else M=eYe(M,n,c,-10),M?(g=M,n=u2):w.push(x,R,A);break;case"boolean":g=M.num8||M.ascii8||Wa(M,w4,1),e[n++]=R?249:248;break;case"undefined":M=eYe(M,n,c,-9),M?(g=M,n=u2):w.push(x,R,A);break;default:w.push(x,R,A)}A++}for(let x=0,R=w.length;x<R;){let M=w[x++],I=w[x++],F=w[x++],B=g[M];B||(g[M]=B={key:M,parent:g,enumerationOffset:F-A,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null});let U;if(I){let k;f=h-l,f<65280?(g=B.object16,g?k=2:(g=B.object32)?k=4:(g=Wa(B,rB,2),k=2)):(g=B.object32||Wa(B,rB,4),k=4),U=o(I,h),typeof U=="object"?(h=U.position,c=U.targetView,e=U.target,l-=r,n-=r,p-=r,r=0):h=U,k===2?(c.setUint16(n,f,!0),n+=2):(c.setUint32(n,f,!0),n+=4)}else g=B.object16||Wa(B,rB,2),c.setInt16(n,I===null?-10:-9,!0),n+=2;A++}let O=g[n1];if(O==null){O=a.typedStructs.length;let x=[],R=g,M,I;for(;(I=R.__type)!==void 0;){let F=R.__size;R=R.__parent,M=R.key;let B=[I,F,M];R.enumerationOffset&&B.push(R.enumerationOffset),x.push(B),R=R.parent}x.reverse(),g[n1]=O,a.typedStructs[O]=x,o(null,0,!0)}switch(S){case 1:if(O>=16)return 0;e[p]=O+32;break;case 2:if(O>=256)return 0;e[p]=56,e[p+1]=O;break;case 3:if(O>=65536)return 0;e[p]=57,c.setUint16(p+1,O,!0);break;case 4:if(O>=16777216)return 0;c.setUint32(p,(O<<8)+58,!0);break}if(n<l){if(l===h)return n;e.copyWithin(n,l,h),h+=n-l,u.lastStringStart=n-p}else if(n>l)return l===h?n:(u.lastStringStart=n-p,_Ye(t,e,r,p,i,s,o,a));return h}function eYe(t,e,r,n){let i;if(i=t.ascii8||t.num8)return r.setInt8(e,n,!0),u2=e+1,i;if(i=t.string16||t.object16)return r.setInt16(e,n,!0),u2=e+2,i;if(i=t.num32)return r.setUint32(e,3758096640+n,!0),u2=e+4,i;if(i=t.num64)return r.setFloat64(e,NaN,!0),r.setInt8(e,n),u2=e+8,i;u2=e}function Wa(t,e,r){let n=EYe[e]+(r<<3),i=t[n]||(t[n]=Object.create(null));return i.__type=e,i.__size=r,i.__parent=t,i}function Adr(t){if(!(t instanceof Map))return t;let e=t.get("typed")||[];Object.isFrozen(e)&&(e=e.map(i=>i.slice(0)));let r=t.get("named"),n=Object.create(null);for(let i=0,s=e.length;i<s;i++){let o=e[i],a=n;for(let[u,c,l]of o){let d=a[l];d||(a[l]=d={key:l,parent:a,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),a=Wa(d,u,c)}a[n1]=i}return e.transitions=n,this.typedStructs=e,this.lastTypedStructuresLength=e.length,r}var Ace=Symbol.for("source");function Cdr(t,e,r,n){let i=t[e++]-32;if(i>=24)switch(i){case 24:i=t[e++];break;case 25:i=t[e++]+(t[e++]<<8);break;case 26:i=t[e++]+(t[e++]<<8)+(t[e++]<<16);break;case 27:i=t[e++]+(t[e++]<<8)+(t[e++]<<16)+(t[e++]<<24);break}let s=n.typedStructs&&n.typedStructs[i];if(!s){if(t=Uint8Array.prototype.slice.call(t,e,r),r-=e,e=0,!n.getStructures)throw new Error(`Reference to shared structure ${i} without getStructures method`);if(n._mergeStructures(n.getStructures()),!n.typedStructs)throw new Error("Could not find any shared typed structures");if(n.lastTypedStructuresLength=n.typedStructs.length,s=n.typedStructs[i],!s)throw new Error("Could not find typed structure "+i)}var o=s.construct,a=s.fullConstruct;if(!o){o=s.construct=function(){},a=s.fullConstruct=function(){},a.prototype=n.structPrototype||{};var u=o.prototype=n.structPrototype?Object.create(n.structPrototype):{};let l=[],d=0,p;for(let f=0,h=s.length;f<h;f++){let g=s[f],[_,S,w,C]=g;w==="__proto__"&&(w="__proto_");let A={key:w,offset:d};C?l.splice(f+C,0,A):l.push(A);let O;switch(S){case 0:O=()=>0;break;case 1:O=(R,M)=>{let I=R.bytes[M+A.offset];return I>=246?S4(I):I};break;case 2:O=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint16(M+A.offset,!0);return B>=65280?S4(B&255):B};break;case 4:O=(R,M)=>{let I=R.bytes,B=(I.dataView||(I.dataView=new DataView(I.buffer,I.byteOffset,I.byteLength))).getUint32(M+A.offset,!0);return B>=4294967040?S4(B&255):B};break}A.getRef=O,d+=S;let x;switch(_){case wce:p&&!p.next&&(p.next=A),p=A,A.multiGetCount=0,x=function(R){let M=R.bytes,I=R.position,F=d+I,B=O(R,I);if(typeof B!="number")return B;let U,k=A.next;for(;k&&(U=k.getRef(R,I),typeof U!="number");)U=null,k=k.next;return U==null&&(U=R.bytesEnd-F),R.srcString?R.srcString.slice(B,U):Ylr(M,B+F,U-B)};break;case d8:case rB:p&&!p.next&&(p.next=A),p=A,x=function(R){let M=R.position,I=d+M,F=O(R,M);if(typeof F!="number")return F;let B=R.bytes,U,k=A.next;for(;k&&(U=k.getRef(R,M),typeof U!="number");)U=null,k=k.next;if(U==null&&(U=R.bytesEnd-I),_===d8)return B.toString("utf8",F+I,U+I);hp=R;try{return n.unpack(B,{start:F+I,end:U+I})}finally{hp=null}};break;case w4:switch(S){case 4:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength)),F=R.position+A.offset,B=I.getInt32(F,!0);if(B<536870912){if(B>-520093696)return B;if(B>-536870912)return S4(B&255)}let U=I.getFloat32(F,!0),k=C4[(M[F+3]&127)<<1|M[F+2]>>7];return(k*U+(U>0?.5:-.5)>>0)/k};break;case 8:x=function(R){let M=R.bytes,F=(M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength))).getFloat64(R.position+A.offset,!0);if(isNaN(F)){let B=M[R.position+A.offset];if(B>=246)return S4(B)}return F};break;case 1:x=function(R){let I=R.bytes[R.position+A.offset];return I<246?I:S4(I)};break}break;case Rce:x=function(R){let M=R.bytes,I=M.dataView||(M.dataView=new DataView(M.buffer,M.byteOffset,M.byteLength));return new Date(I.getFloat64(R.position+A.offset,!0))};break}A.get=x}if(bYe){let f=[],h=[],g=0,_;for(let w of l){if(n.alwaysLazyProperty&&n.alwaysLazyProperty(w.key)){_=!0;continue}Object.defineProperty(u,w.key,{get:Tdr(w.get),enumerable:!0});let C="v"+g++;h.push(C),f.push("o["+JSON.stringify(w.key)+"]="+C+"(s)")}_&&f.push("__proto__:this");let S=new Function(...h,"var c=this;return function(s){var o=new c();"+f.join(";")+";return o;}").apply(a,l.map(w=>w.get));Object.defineProperty(u,"toJSON",{value(w){return S.call(this,this[Ace])}})}else Object.defineProperty(u,"toJSON",{value(f){let h={};for(let g=0,_=l.length;g<_;g++){let S=l[g].key;h[S]=this[S]}return h}})}var c=new o;return c[Ace]={bytes:t,position:e,srcString:"",bytesEnd:r},c}function S4(t){switch(t){case 246:return null;case 247:return;case 248:return!1;case 249:return!0}throw new Error("Unknown constant")}function Tdr(t){return function(){return t(this[Ace])}}function Odr(){hp&&(hp.bytes=Uint8Array.prototype.slice.call(hp.bytes,hp.position,hp.bytesEnd),hp.position=0,hp.bytesEnd=hp.bytes.length)}function xdr(t,e){if(e.typedStructs){let n=new Map;n.set("named",t),n.set("typed",e.typedStructs),t=n}let r=e.lastTypedStructuresLength||0;return t.isCompatible=n=>{let i=!0;return n instanceof Map?((n.get("named")||[]).length!==(e.lastNamedStructuresLength||0)&&(i=!1),(n.get("typed")||[]).length!==r&&(i=!1)):(n instanceof Array||Array.isArray(n))&&n.length!==(e.lastNamedStructuresLength||0)&&(i=!1),i||e._mergeStructures(n),i},e.lastTypedStructuresLength=e.typedStructs&&e.typedStructs.length,t}sdr(Cdr,Adr,Odr);var uB=class extends tYe.Transform{constructor(e){e||(e={}),e.writableObjectMode=!0,super(e),e.sequential=!0,this.packr=e.packr||new Pm(e)}_transform(e,r,n){this.push(this.packr.pack(e)),n()}},cB=class extends tYe.Transform{constructor(e){e||(e={}),e.objectMode=!0,super(e),e.structures=[],this.unpackr=e.unpackr||new Mm(e)}_transform(e,r,n){this.incompleteBuffer&&(e=Buffer.concat([this.incompleteBuffer,e]),this.incompleteBuffer=null);let i;try{i=this.unpackr.unpackMultiple(e)}catch(s){if(s.incomplete)this.incompleteBuffer=e.slice(s.lastPosition),i=s.values;else throw s}finally{for(let s of i||[])s===null&&(s=this.getNullValue()),this.push(s)}n&&n()}getNullValue(){return Symbol.for(null)}};function Idr(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable");if(typeof t[Symbol.iterator]=="function")return Rdr(t,e);if(typeof t.then=="function"||typeof t[Symbol.asyncIterator]=="function")return Ddr(t,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}function*Rdr(t,e){let r=new Pm(e);for(let n of t)yield r.pack(n)}async function*Ddr(t,e){let r=new Pm(e);for await(let n of t)yield r.pack(n)}function kdr(t,e={}){if(!t||typeof t!="object")throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let r=new Mm(e),n,i=s=>{let o;n&&(s=Buffer.concat([n,s]),n=void 0);try{o=r.unpackMultiple(s)}catch(a){if(a.incomplete)n=s.slice(a.lastPosition),o=a.values;else throw a}return o};if(typeof t[Symbol.iterator]=="function")return(function*(){for(let o of t)yield*i(o)})();if(typeof t[Symbol.asyncIterator]=="function")return(async function*(){for await(let o of t)yield*i(o)})()}var Mdr=kdr,Pdr=Idr,Ndr=!1,Fdr=!0,Bdr=process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED!==void 0&&process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase()==="true";if(!Bdr){let t;try{typeof require=="function"?t=jJe():t=zlr.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("node.cjs",document.baseURI).href)("msgpackr-extract"),t&&Jlr(t.extractStrings)}catch{}}Ur.ALWAYS=mdr;Ur.C1=Tce;Ur.DECIMAL_FIT=gdr;Ur.DECIMAL_ROUND=ydr;Ur.Decoder=edr;Ur.DecoderStream=cB;Ur.Encoder=fdr;Ur.EncoderStream=uB;Ur.FLOAT32_OPTIONS=pYe;Ur.NEVER=hdr;Ur.Packr=Pm;Ur.PackrStream=uB;Ur.Unpackr=Mm;Ur.UnpackrStream=cB;Ur.addExtension=cdr;Ur.clearSource=oB;Ur.decode=ndr;Ur.decodeIter=Mdr;Ur.encode=pdr;Ur.encodeIter=Pdr;Ur.mapsAsObjects=Fdr;Ur.pack=ddr;Ur.roundFloat32=idr;Ur.unpack=tdr;Ur.unpackMultiple=rdr;Ur.useRecords=Ndr});var pB=m(dB=>{"use strict";Object.defineProperty(dB,"__esModule",{value:!0});dB.version=void 0;dB.version="5.66.4"});var Mce=m(f8=>{"use strict";Object.defineProperty(f8,"__esModule",{value:!0});f8.Scripts=void 0;f8.raw2NextJobData=kce;var qdr=vYe(),Ldr=new qdr.Packr({useRecords:!1,encodeUndefinedAsNil:!0}),Ds=Ldr.pack,ud=Ru(),Nm=Hc(),jdr=pB(),$dr=UF(),Dce=class{constructor(e){this.queue=e,this.version=jdr.version;let r=this.queue.keys;this.moveToFinishedKeys=[r.wait,r.active,r.prioritized,r.events,r.stalled,r.limiter,r.delayed,r.paused,r.meta,r.pc,void 0,void 0,void 0,void 0]}execCommand(e,r,n){let i=`${r}:${this.version}`;return e[i](n)}async isJobInList(e,r){let n=await this.queue.client,i;return(0,Nm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?i=await this.execCommand(n,"isJobInList",[e,r]):i=await n.lpos(e,r),Number.isInteger(i)}addDelayedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.delayed,i.completed,i.events];return s.push(Ds(n),e.data,r),s}addDelayedJob(e,r,n,i){let s=this.addDelayedJobArgs(r,n,i);return this.execCommand(e,"addDelayedJob",s)}addPrioritizedJobArgs(e,r,n){let i=this.queue.keys,s=[i.marker,i.meta,i.id,i.prioritized,i.delayed,i.completed,i.active,i.events,i.pc];return s.push(Ds(n),e.data,r),s}addPrioritizedJob(e,r,n,i){let s=this.addPrioritizedJobArgs(r,n,i);return this.execCommand(e,"addPrioritizedJob",s)}addParentJobArgs(e,r,n){let i=this.queue.keys,s=[i.meta,i.id,i.delayed,i["waiting-children"],i.completed,i.events];return s.push(Ds(n),e.data,r),s}addParentJob(e,r,n,i){let s=this.addParentJobArgs(r,n,i);return this.execCommand(e,"addParentJob",s)}addStandardJobArgs(e,r,n){let i=this.queue.keys,s=[i.wait,i.paused,i.meta,i.id,i.completed,i.delayed,i.active,i.events,i.marker];return s.push(Ds(n),e.data,r),s}addStandardJob(e,r,n,i){let s=this.addStandardJobArgs(r,n,i);return this.execCommand(e,"addStandardJob",s)}async addJob(e,r,n,i,s={}){let o=this.queue.keys,a=r.parent,u=[o[""],typeof i<"u"?i:"",r.name,r.timestamp,r.parentKey||null,s.parentDependenciesKey||null,a,r.repeatJobKey,r.deduplicationId?`${o.de}:${r.deduplicationId}`:null],c;if(n.repeat){let d=Object.assign({},n.repeat);d.startDate&&(d.startDate=+new Date(d.startDate)),d.endDate&&(d.endDate=+new Date(d.endDate)),c=Ds(Object.assign(Object.assign({},n),{repeat:d}))}else c=Ds(n);let l;if(s.addToWaitingChildren?l=await this.addParentJob(e,r,c,u):typeof n.delay=="number"&&n.delay>0?l=await this.addDelayedJob(e,r,c,u):n.priority?l=await this.addPrioritizedJob(e,r,c,u):l=await this.addStandardJob(e,r,c,u),l<0)throw this.finishedErrors({code:l,parentKey:s.parentKey,command:"addJob"});return l}pauseArgs(e){let r="wait",n="paused";e||(r="paused",n="wait");let i=[r,n,"meta","prioritized"].map(o=>this.queue.toKey(o));i.push(this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.marker);let s=[e?"paused":"resumed"];return i.concat(s)}async pause(e){let r=await this.queue.client,n=this.pauseArgs(e);return this.execCommand(r,"pause",n)}addRepeatableJobArgs(e,r,n,i){let s=this.queue.keys,o=[s.repeat,s.delayed],a=[r,Ds(n),i,e,s[""]];return o.concat(a)}async addRepeatableJob(e,r,n,i){let s=await this.queue.client,o=this.addRepeatableJobArgs(e,r,n,i);return this.execCommand(s,"addRepeatableJob",o)}async removeDeduplicationKey(e,r){let n=await this.queue.client,s=[`${this.queue.keys.de}:${e}`],o=[r];return this.execCommand(n,"removeDeduplicationKey",s.concat(o))}async addJobScheduler(e,r,n,i,s,o,a){let u=await this.queue.client,c=this.queue.keys,l=[c.repeat,c.delayed,c.wait,c.paused,c.meta,c.prioritized,c.marker,c.id,c.events,c.pc,c.active],d=[r,Ds(s),e,n,Ds(i),Ds(o),Date.now(),c[""],a?this.queue.toKey(a):""],p=await this.execCommand(u,"addJobScheduler",l.concat(d));if(typeof p=="number"&&p<0)throw this.finishedErrors({code:p,command:"addJobScheduler"});return p}async updateRepeatableJobMillis(e,r,n,i){let s=[this.queue.keys.repeat,n,r,i];return this.execCommand(e,"updateRepeatableJobMillis",s)}async updateJobSchedulerNextMillis(e,r,n,i,s){let o=await this.queue.client,a=this.queue.keys,u=[a.repeat,a.delayed,a.wait,a.paused,a.meta,a.prioritized,a.marker,a.id,a.events,a.pc,s?this.queue.toKey(s):"",a.active],c=[r,e,n,Ds(i),Date.now(),a[""],s];return this.execCommand(o,"updateJobScheduler",u.concat(c))}removeRepeatableArgs(e,r,n){let i=this.queue.keys,s=[i.repeat,i.delayed,i.events],o=[e,this.getRepeatConcatOptions(r,n),n,i[""]];return s.concat(o)}getRepeatConcatOptions(e,r){return r&&r.split(":").length>2?r:e}async removeRepeatable(e,r,n){let i=await this.queue.client,s=this.removeRepeatableArgs(e,r,n);return this.execCommand(i,"removeRepeatable",s)}async removeJobScheduler(e){let r=await this.queue.client,n=this.queue.keys,i=[n.repeat,n.delayed,n.events],s=[e,n[""]];return this.execCommand(r,"removeJobScheduler",i.concat(s))}removeArgs(e,r){let n=[e,"repeat"].map(s=>this.queue.toKey(s)),i=[e,r?1:0,this.queue.toKey("")];return n.concat(i)}async remove(e,r){let n=await this.queue.client,i=this.removeArgs(e,r),s=await this.execCommand(n,"removeJob",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"removeJob"});return s}async removeUnprocessedChildren(e){let r=await this.queue.client,n=[this.queue.toKey(e),this.queue.keys.meta,this.queue.toKey(""),e];await this.execCommand(r,"removeUnprocessedChildren",n)}async extendLock(e,r,n,i){i=i||await this.queue.client;let s=[this.queue.toKey(e)+":lock",this.queue.keys.stalled,r,n,e];return this.execCommand(i,"extendLock",s)}async extendLocks(e,r,n){let i=await this.queue.client,s=[this.queue.keys.stalled,this.queue.toKey(""),Ds(r),Ds(e),n];return this.execCommand(i,"extendLocks",s)}async updateData(e,r){let n=await this.queue.client,i=[this.queue.toKey(e.id)],s=JSON.stringify(r),o=await this.execCommand(n,"updateData",i.concat([s]));if(o<0)throw this.finishedErrors({code:o,jobId:e.id,command:"updateData"})}async updateProgress(e,r){let n=await this.queue.client,i=[this.queue.toKey(e),this.queue.keys.events,this.queue.keys.meta],s=JSON.stringify(r),o=await this.execCommand(n,"updateProgress",i.concat([e,s]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"updateProgress"})}async addLog(e,r,n){let i=await this.queue.client,s=[this.queue.toKey(e),this.queue.toKey(e)+":logs"],o=await this.execCommand(i,"addLog",s.concat([e,r,n||""]));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"addLog"});return o}moveToFinishedArgs(e,r,n,i,s,o,a,u=!0,c){var l,d,p,f,h,g,_;let S=this.queue.keys,w=this.queue.opts,C=s==="completed"?w.removeOnComplete:w.removeOnFail,A=this.queue.toKey(`metrics:${s}`),O=this.moveToFinishedKeys;O[10]=S[s],O[11]=this.queue.toKey((l=e.id)!==null&&l!==void 0?l:""),O[12]=A,O[13]=this.queue.keys.marker;let x=this.getKeepJobs(i,C),R=[e.id,a,n,typeof r>"u"?"null":r,s,!u||this.queue.closing?0:1,S[""],Ds({token:o,name:w.name,keepJobs:x,limiter:w.limiter,lockDuration:w.lockDuration,attempts:e.opts.attempts,maxMetricsSize:!((d=w.metrics)===null||d===void 0)&&d.maxDataPoints?(p=w.metrics)===null||p===void 0?void 0:p.maxDataPoints:"",fpof:!!(!((f=e.opts)===null||f===void 0)&&f.failParentOnFailure),cpof:!!(!((h=e.opts)===null||h===void 0)&&h.continueParentOnFailure),idof:!!(!((g=e.opts)===null||g===void 0)&&g.ignoreDependencyOnFailure),rdof:!!(!((_=e.opts)===null||_===void 0)&&_.removeDependencyOnFailure)}),c?Ds((0,Nm.objectToFlatArray)(c)):void 0];return O.concat(R)}getKeepJobs(e,r){return typeof e>"u"?r||{count:e?0:-1}:typeof e=="object"?e:typeof e=="number"?{count:e}:{count:e?0:-1}}async moveToFinished(e,r){let n=await this.queue.client,i=await this.execCommand(n,"moveToFinished",r);if(i<0)throw this.finishedErrors({code:i,jobId:e,command:"moveToFinished",state:"active"});if(typeof i<"u")return kce(i)}drainArgs(e){let r=this.queue.keys,n=[r.wait,r.paused,r.delayed,r.prioritized,r.repeat],i=[r[""],e?"1":"0"];return n.concat(i)}async drain(e){let r=await this.queue.client,n=this.drainArgs(e);return this.execCommand(r,"drain",n)}removeChildDependencyArgs(e,r){let i=[this.queue.keys[""]],s=[this.queue.toKey(e),r];return i.concat(s)}async removeChildDependency(e,r){let n=await this.queue.client,i=this.removeChildDependencyArgs(e,r),s=await this.execCommand(n,"removeChildDependency",i);switch(s){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:s,jobId:e,parentKey:r,command:"removeChildDependency"})}}getRangesArgs(e,r,n,i){let s=this.queue.keys,o=e.map(c=>c==="waiting"?"wait":c),a=[s[""]],u=[r,n,i?"1":"0",...o];return a.concat(u)}async getRanges(e,r=0,n=1,i=!1){let s=await this.queue.client,o=this.getRangesArgs(e,r,n,i);return await this.execCommand(s,"getRanges",o)}getCountsArgs(e){let r=this.queue.keys,n=e.map(o=>o==="waiting"?"wait":o),i=[r[""]],s=[...n];return i.concat(s)}async getCounts(e){let r=await this.queue.client,n=this.getCountsArgs(e);return await this.execCommand(r,"getCounts",n)}getCountsPerPriorityArgs(e){let r=[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized],n=e;return r.concat(n)}async getCountsPerPriority(e){let r=await this.queue.client,n=this.getCountsPerPriorityArgs(e);return await this.execCommand(r,"getCountsPerPriority",n)}getDependencyCountsArgs(e,r){let n=[`${e}:processed`,`${e}:dependencies`,`${e}:failed`,`${e}:unsuccessful`].map(s=>this.queue.toKey(s)),i=r;return n.concat(i)}async getDependencyCounts(e,r){let n=await this.queue.client,i=this.getDependencyCountsArgs(e,r);return await this.execCommand(n,"getDependencyCounts",i)}moveToCompletedArgs(e,r,n,i,s=!1){let o=Date.now();return this.moveToFinishedArgs(e,r,"returnvalue",n,"completed",i,o,s)}moveToFailedArgs(e,r,n,i,s=!1,o){let a=Date.now();return this.moveToFinishedArgs(e,r,"failedReason",n,"failed",i,a,s,o)}async isFinished(e,r=!1){let n=await this.queue.client,i=["completed","failed",e].map(s=>this.queue.toKey(s));return this.execCommand(n,"isFinished",i.concat([e,r?"1":""]))}async getState(e){let r=await this.queue.client,n=["completed","failed","delayed","active","wait","paused","waiting-children","prioritized"].map(i=>this.queue.toKey(i));return(0,Nm.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?this.execCommand(r,"getState",n.concat([e])):this.execCommand(r,"getStateV2",n.concat([e]))}async changeDelay(e,r){let n=await this.queue.client,i=this.changeDelayArgs(e,r),s=await this.execCommand(n,"changeDelay",i);if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"changeDelay",state:"delayed"})}changeDelayArgs(e,r){let n=Date.now();return[this.queue.keys.delayed,this.queue.keys.meta,this.queue.keys.marker,this.queue.keys.events].concat([r,JSON.stringify(n),e,this.queue.toKey(e)])}async changePriority(e,r=0,n=!1){let i=await this.queue.client,s=this.changePriorityArgs(e,r,n),o=await this.execCommand(i,"changePriority",s);if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"changePriority"})}changePriorityArgs(e,r=0,n=!1){return[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.marker].concat([r,this.queue.toKey(""),e,n?1:0])}moveToDelayedArgs(e,r,n,i,s={}){let o=this.queue.keys;return[o.marker,o.active,o.prioritized,o.delayed,this.queue.toKey(e),o.events,o.meta,o.stalled].concat([this.queue.keys[""],r,e,n,i,s.skipAttempt?"1":"0",s.fieldsToUpdate?Ds((0,Nm.objectToFlatArray)(s.fieldsToUpdate)):void 0])}moveToWaitingChildrenArgs(e,r,n){let i=Date.now(),s=(0,Nm.getParentKey)(n.child);return["active","waiting-children",e,`${e}:dependencies`,`${e}:unsuccessful`,"stalled","events"].map(a=>this.queue.toKey(a)).concat([r,s??"",JSON.stringify(i),e,this.queue.toKey("")])}isMaxedArgs(){let e=this.queue.keys;return[e.meta,e.active]}async isMaxed(){let e=await this.queue.client,r=this.isMaxedArgs();return!!await this.execCommand(e,"isMaxed",r)}async moveToDelayed(e,r,n,i="0",s={}){let o=await this.queue.client,a=this.moveToDelayedArgs(e,r,i,n,s),u=await this.execCommand(o,"moveToDelayed",a);if(u<0)throw this.finishedErrors({code:u,jobId:e,command:"moveToDelayed",state:"active"})}async moveToWaitingChildren(e,r,n={}){let i=await this.queue.client,s=this.moveToWaitingChildrenArgs(e,r,n),o=await this.execCommand(i,"moveToWaitingChildren",s);switch(o){case 0:return!0;case 1:return!1;default:throw this.finishedErrors({code:o,jobId:e,command:"moveToWaitingChildren",state:"active"})}}getRateLimitTtlArgs(e){return[this.queue.keys.limiter,this.queue.keys.meta].concat([e??"0"])}async getRateLimitTtl(e){let r=await this.queue.client,n=this.getRateLimitTtlArgs(e);return this.execCommand(r,"getRateLimitTtl",n)}async cleanJobsInSet(e,r,n=0){let i=await this.queue.client;return this.execCommand(i,"cleanJobsInSet",[this.queue.toKey(e),this.queue.toKey("events"),this.queue.toKey("repeat"),this.queue.toKey(""),r,n,e])}getJobSchedulerArgs(e){return[this.queue.keys.repeat].concat([e])}async getJobScheduler(e){let r=await this.queue.client,n=this.getJobSchedulerArgs(e);return this.execCommand(r,"getJobScheduler",n)}retryJobArgs(e,r,n,i={}){let s=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.paused,this.queue.toKey(e),this.queue.keys.meta,this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.prioritized,this.queue.keys.pc,this.queue.keys.marker,this.queue.keys.stalled],o=(r?"R":"L")+"PUSH";return s.concat([this.queue.toKey(""),Date.now(),o,e,n,i.fieldsToUpdate?Ds((0,Nm.objectToFlatArray)(i.fieldsToUpdate)):void 0])}async retryJob(e,r,n="0",i={}){let s=await this.queue.client,o=this.retryJobArgs(e,r,n,i),a=await this.execCommand(s,"retryJob",o);if(a<0)throw this.finishedErrors({code:a,jobId:e,command:"retryJob",state:"active"})}moveJobsToWaitArgs(e,r,n){let i=[this.queue.toKey(""),this.queue.keys.events,this.queue.toKey(e),this.queue.toKey("wait"),this.queue.toKey("paused"),this.queue.keys.meta,this.queue.keys.active,this.queue.keys.marker],s=[r,n,e];return i.concat(s)}async retryJobs(e="failed",r=1e3,n=new Date().getTime()){let i=await this.queue.client,s=this.moveJobsToWaitArgs(e,r,n);return this.execCommand(i,"moveJobsToWait",s)}async promoteJobs(e=1e3){let r=await this.queue.client,n=this.moveJobsToWaitArgs("delayed",e,Number.MAX_VALUE);return this.execCommand(r,"moveJobsToWait",n)}async reprocessJob(e,r,n={}){let i=await this.queue.client,s=[this.queue.toKey(e.id),this.queue.keys.events,this.queue.toKey(r),this.queue.keys.wait,this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.active,this.queue.keys.marker],o=[e.id,(e.opts.lifo?"R":"L")+"PUSH",r==="failed"?"failedReason":"returnvalue",r,n.resetAttemptsMade?"1":"0",n.resetAttemptsStarted?"1":"0"],a=await this.execCommand(i,"reprocessJob",s.concat(o));if(a!==1)throw this.finishedErrors({code:a,jobId:e.id,command:"reprocessJob",state:r})}async getMetrics(e,r=0,n=-1){let i=await this.queue.client,s=[this.queue.toKey(`metrics:${e}`),this.queue.toKey(`metrics:${e}:data`)],o=[r,n];return await this.execCommand(i,"getMetrics",s.concat(o))}async moveToActive(e,r,n){let i=this.queue.opts,s=this.queue.keys,o=[s.wait,s.active,s.prioritized,s.events,s.stalled,s.limiter,s.delayed,s.paused,s.meta,s.pc,s.marker],a=[s[""],Date.now(),Ds({token:r,lockDuration:i.lockDuration,limiter:i.limiter,name:n})],u=await this.execCommand(e,"moveToActive",o.concat(a));return kce(u)}async promote(e){let r=await this.queue.client,n=[this.queue.keys.delayed,this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.active,this.queue.keys.pc,this.queue.keys.events,this.queue.keys.marker],i=[this.queue.toKey(""),e],s=await this.execCommand(r,"promote",n.concat(i));if(s<0)throw this.finishedErrors({code:s,jobId:e,command:"promote",state:"delayed"})}moveStalledJobsToWaitArgs(){let e=this.queue.opts,r=[this.queue.keys.stalled,this.queue.keys.wait,this.queue.keys.active,this.queue.keys["stalled-check"],this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.marker,this.queue.keys.events],n=[e.maxStalledCount,this.queue.toKey(""),Date.now(),e.stalledInterval];return r.concat(n)}async moveStalledJobsToWait(){let e=await this.queue.client,r=this.moveStalledJobsToWaitArgs();return this.execCommand(e,"moveStalledJobsToWait",r)}async moveJobFromActiveToWait(e,r="0"){let n=await this.queue.client,i=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.stalled,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.limiter,this.queue.keys.prioritized,this.queue.keys.marker,this.queue.keys.events],s=[e,r,this.queue.toKey(e)],o=await this.execCommand(n,"moveJobFromActiveToWait",i.concat(s));if(o<0)throw this.finishedErrors({code:o,jobId:e,command:"moveJobFromActiveToWait",state:"active"});return o}async obliterate(e){let r=await this.queue.client,n=[this.queue.keys.meta,this.queue.toKey("")],i=[e.count,e.force?"force":null],s=await this.execCommand(r,"obliterate",n.concat(i));if(s<0)switch(s){case-1:throw new Error("Cannot obliterate non-paused queue");case-2:throw new Error("Cannot obliterate queue with active jobs")}return s}async paginate(e,r){let n=await this.queue.client,i=[e],s=5,o=r.end>=0?r.end-r.start+1:1/0,a="0",u=0,c,l,d,p=[],f=[];do{let h=[r.start+p.length,r.end,a,u,s];r.fetchJobs&&h.push(1),[a,u,c,l,d]=await this.execCommand(n,"paginate",i.concat(h)),p=p.concat(c),d&&d.length&&(f=f.concat(d.map(Nm.array2obj)))}while(a!="0"&&p.length<o);if(p.length&&Array.isArray(p[0])){let h=[];for(let g=0;g<p.length;g++){let[_,S]=p[g];try{h.push({id:_,v:JSON.parse(S)})}catch(w){h.push({id:_,err:w.message})}}return{cursor:a,items:h,total:l,jobs:f}}else return{cursor:a,items:p.map(h=>({id:h})),total:l,jobs:f}}finishedErrors({code:e,jobId:r,parentKey:n,command:i,state:s}){let o;switch(e){case ud.ErrorCode.JobNotExist:o=new Error(`Missing key for job ${r}. ${i}`);break;case ud.ErrorCode.JobLockNotExist:o=new Error(`Missing lock for job ${r}. ${i}`);break;case ud.ErrorCode.JobNotInState:o=new Error(`Job ${r} is not in the ${s} state. ${i}`);break;case ud.ErrorCode.JobPendingChildren:o=new Error(`Job ${r} has pending dependencies. ${i}`);break;case ud.ErrorCode.ParentJobNotExist:o=new Error(`Missing key for parent job ${n}. ${i}`);break;case ud.ErrorCode.JobLockMismatch:o=new Error(`Lock mismatch for job ${r}. Cmd ${i} from ${s}`);break;case ud.ErrorCode.ParentJobCannotBeReplaced:o=new Error(`The parent job ${n} cannot be replaced. ${i}`);break;case ud.ErrorCode.JobBelongsToJobScheduler:o=new Error(`Job ${r} belongs to a job scheduler and cannot be removed directly. ${i}`);break;case ud.ErrorCode.JobHasFailedChildren:o=new $dr.UnrecoverableError(`Cannot complete job ${r} because it has at least one failed child. ${i}`);break;case ud.ErrorCode.SchedulerJobIdCollision:o=new Error(`Cannot create job scheduler iteration - job ID already exists. ${i}`);break;case ud.ErrorCode.SchedulerJobSlotsBusy:o=new Error(`Cannot create job scheduler iteration - current and next time slots already have jobs. ${i}`);break;default:o=new Error(`Unknown code ${e} error for ${r}. ${i}`)}return o.code=e,o}};f8.Scripts=Dce;function kce(t){if(t){let e=[null,t[1],t[2],t[3]];return t[0]&&(e[0]=(0,Nm.array2obj)(t[0])),e}return[]}});var hB=m(fB=>{"use strict";Object.defineProperty(fB,"__esModule",{value:!0});fB.createScripts=void 0;var Kdr=Mce(),Udr=t=>new Kdr.Scripts({keys:t.keys,client:t.client,get redisVersion(){return t.redisVersion},toKey:t.toKey,opts:t.opts,closing:t.closing});fB.createScripts=Udr});var T4=m(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.Job=Fm.PRIORITY_LIMIT=void 0;var SYe=(ia(),Jt(na)),Vdr=require("util"),aa=Hc(),Gdr=hB(),wYe=rue(),Hdr=Bue(),AYe=Ru(),zdr=(0,Vdr.debuglog)("bull");Fm.PRIORITY_LIMIT=2**21;var Pce=class t{constructor(e,r,n,i={},s){this.queue=e,this.name=r,this.data=n,this.opts=i,this.id=s,this.progress=0,this.returnvalue=null,this.stacktrace=null,this.delay=0,this.priority=0,this.attemptsStarted=0,this.attemptsMade=0,this.stalledCounter=0;let o=this.opts,{repeatJobKey:a}=o,u=SYe.__rest(o,["repeatJobKey"]);this.opts=Object.assign({attempts:0},u),this.delay=this.opts.delay,this.priority=this.opts.priority||0,this.repeatJobKey=a,this.timestamp=i.timestamp?i.timestamp:Date.now(),this.opts.backoff=wYe.Backoffs.normalize(i.backoff),this.parentKey=(0,aa.getParentKey)(i.parent),i.parent&&(this.parent={id:i.parent.id,queueKey:i.parent.queue},i.failParentOnFailure&&(this.parent.fpof=!0),i.removeDependencyOnFailure&&(this.parent.rdof=!0),i.ignoreDependencyOnFailure&&(this.parent.idof=!0),i.continueParentOnFailure&&(this.parent.cpof=!0)),this.debounceId=i.debounce?i.debounce.id:void 0,this.deduplicationId=i.deduplication?i.deduplication.id:this.debounceId,this.toKey=e.toKey.bind(e),this.createScripts(),this.queueQualifiedName=e.qualifiedName}static async create(e,r,n,i){let s=await e.client,o=new this(e,r,n,i,i&&i.jobId);return o.id=await o.addJob(s,{parentKey:o.parentKey,parentDependenciesKey:o.parentKey?`${o.parentKey}:dependencies`:""}),o}static async createBulk(e,r){let n=await e.client,i=r.map(a=>{var u;return new this(e,a.name,a.data,a.opts,(u=a.opts)===null||u===void 0?void 0:u.jobId)}),s=n.pipeline();for(let a of i)a.addJob(s,{parentKey:a.parentKey,parentDependenciesKey:a.parentKey?`${a.parentKey}:dependencies`:""});let o=await s.exec();for(let a=0;a<o.length;++a){let[u,c]=o[a];if(u)throw u;i[a].id=c}return i}static fromJSON(e,r,n){let i=JSON.parse(r.data||"{}"),s=t.optsFromJSON(r.opts),o=new this(e,r.name,i,s,r.id||n);return o.progress=JSON.parse(r.progress||"0"),o.delay=parseInt(r.delay),o.priority=parseInt(r.priority),o.timestamp=parseInt(r.timestamp),r.finishedOn&&(o.finishedOn=parseInt(r.finishedOn)),r.processedOn&&(o.processedOn=parseInt(r.processedOn)),r.rjk&&(o.repeatJobKey=r.rjk),r.deid&&(o.debounceId=r.deid,o.deduplicationId=r.deid),r.failedReason&&(o.failedReason=r.failedReason),o.attemptsStarted=parseInt(r.ats||"0"),o.attemptsMade=parseInt(r.attemptsMade||r.atm||"0"),o.stalledCounter=parseInt(r.stc||"0"),r.defa&&(o.deferredFailure=r.defa),o.stacktrace=Wdr(r.stacktrace),typeof r.returnvalue=="string"&&(o.returnvalue=CYe(r.returnvalue)),r.parentKey&&(o.parentKey=r.parentKey),r.parent&&(o.parent=JSON.parse(r.parent)),r.pb&&(o.processedBy=r.pb),r.nrjid&&(o.nextRepeatableJobId=r.nrjid),o}createScripts(){this.scripts=(0,Gdr.createScripts)(this.queue)}static optsFromJSON(e,r=aa.optsDecodeMap){let n=JSON.parse(e||"{}"),i=Object.entries(n),s={};for(let o of i){let[a,u]=o;r[a]?s[r[a]]=u:a==="tm"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{metadata:u}):a==="omc"?s.telemetry=Object.assign(Object.assign({},s.telemetry),{omitContext:u}):s[a]=u}return s}static async fromId(e,r){if(r){let i=await(await e.client).hgetall(e.toKey(r));return(0,aa.isEmpty)(i)?void 0:this.fromJSON(e,i,r)}}static addJobLog(e,r,n,i){return e.scripts.addLog(r,n,i)}toJSON(){let e=this,{queue:r,scripts:n}=e;return SYe.__rest(e,["queue","scripts"])}asJSON(){return(0,aa.removeUndefinedFields)({id:this.id,name:this.name,data:JSON.stringify(typeof this.data>"u"?{}:this.data),opts:t.optsAsJSON(this.opts),parent:this.parent?Object.assign({},this.parent):void 0,parentKey:this.parentKey,progress:this.progress,attemptsMade:this.attemptsMade,attemptsStarted:this.attemptsStarted,stalledCounter:this.stalledCounter,finishedOn:this.finishedOn,processedOn:this.processedOn,timestamp:this.timestamp,failedReason:JSON.stringify(this.failedReason),stacktrace:JSON.stringify(this.stacktrace),debounceId:this.debounceId,deduplicationId:this.deduplicationId,repeatJobKey:this.repeatJobKey,returnvalue:JSON.stringify(this.returnvalue),nrjid:this.nextRepeatableJobId})}static optsAsJSON(e={},r=aa.optsEncodeMap){let n=Object.entries(e),i={};for(let[s,o]of n)if(!(typeof o>"u"))if(s in r){let u=r[s];i[u]=o}else s==="telemetry"?(o.metadata!==void 0&&(i.tm=o.metadata),o.omitContext!==void 0&&(i.omc=o.omitContext)):i[s]=o;return i}asJSONSandbox(){return Object.assign(Object.assign({},this.asJSON()),{queueName:this.queueName,queueQualifiedName:this.queueQualifiedName,prefix:this.prefix})}updateData(e){return this.data=e,this.scripts.updateData(this,e)}async updateProgress(e){this.progress=e,await this.scripts.updateProgress(this.id,e),this.queue.emit("progress",this,e)}async log(e){return t.addJobLog(this.queue,this.id,e,this.opts.keepLogs)}async removeChildDependency(){return await this.scripts.removeChildDependency(this.id,this.parentKey)?(this.parent=void 0,this.parentKey=void 0,!0):!1}async clearLogs(e){let r=await this.queue.client,n=this.toKey(this.id)+":logs";e?await r.ltrim(n,-e,-1):await r.del(n)}async remove({removeChildren:e=!0}={}){await this.queue.waitUntilReady();let r=this.queue,n=this;if(await this.scripts.remove(n.id,e))r.emit("removed",n);else throw new Error(`Job ${this.id} could not be removed because it is locked by another worker`)}async removeUnprocessedChildren(){let e=this.id;await this.scripts.removeUnprocessedChildren(e)}extendLock(e,r){return this.scripts.extendLock(this.id,e,r)}async moveToCompleted(e,r,n=!0){return this.queue.trace(AYe.SpanKind.INTERNAL,"complete",this.queue.name,async(i,s)=>{var o,a;let u;!(!((a=(o=this.opts)===null||o===void 0?void 0:o.telemetry)===null||a===void 0)&&a.omitContext)&&s&&(u=s),await this.queue.waitUntilReady(),this.returnvalue=e||void 0;let c=(0,aa.tryCatch)(JSON.stringify,JSON,[e]);if(c===aa.errorObject)throw aa.errorObject.value;let l=this.scripts.moveToCompletedArgs(this,c,this.opts.removeOnComplete,r,n),d=await this.scripts.moveToFinished(this.id,l);return this.finishedOn=l[this.scripts.moveToFinishedKeys.length+1],this.attemptsMade+=1,d})}moveToWait(e){return this.scripts.moveJobFromActiveToWait(this.id,e)}async shouldRetryJob(e){if(this.attemptsMade+1<this.opts.attempts&&!this.discarded&&!(e instanceof Hdr.UnrecoverableError||e.name=="UnrecoverableError")){let r=this.queue.opts,n=await wYe.Backoffs.calculate(this.opts.backoff,this.attemptsMade+1,e,this,r.settings&&r.settings.backoffStrategy);return[n!=-1,n==-1?0:n]}else return[!1,0]}async moveToFailed(e,r,n=!1){this.failedReason=e?.message;let[i,s]=await this.shouldRetryJob(e);return this.queue.trace(AYe.SpanKind.INTERNAL,this.getSpanOperation(i,s),this.queue.name,async(o,a)=>{var u,c;let l;!(!((c=(u=this.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0)&&c.omitContext)&&a&&(l=a);let d;this.updateStacktrace(e);let p={failedReason:this.failedReason,stacktrace:JSON.stringify(this.stacktrace),tm:l},f;if(i)s?d=await this.scripts.moveToDelayed(this.id,Date.now(),s,r,{fieldsToUpdate:p}):d=await this.scripts.retryJob(this.id,this.opts.lifo,r,{fieldsToUpdate:p});else{let h=this.scripts.moveToFailedArgs(this,this.failedReason,this.opts.removeOnFail,r,n,p);d=await this.scripts.moveToFinished(this.id,h),f=h[this.scripts.moveToFinishedKeys.length+1]}return f&&typeof f=="number"&&(this.finishedOn=f),s&&typeof s=="number"&&(this.delay=s),this.attemptsMade+=1,d})}getSpanOperation(e,r){return e?r?"delay":"retry":"fail"}isCompleted(){return this.isInZSet("completed")}isFailed(){return this.isInZSet("failed")}isDelayed(){return this.isInZSet("delayed")}isWaitingChildren(){return this.isInZSet("waiting-children")}isActive(){return this.isInList("active")}async isWaiting(){return await this.isInList("wait")||await this.isInList("paused")}get queueName(){return this.queue.name}get prefix(){return this.queue.opts.prefix}getState(){return this.scripts.getState(this.id)}async changeDelay(e){await this.scripts.changeDelay(this.id,e),this.delay=e}async changePriority(e){await this.scripts.changePriority(this.id,e.priority,e.lifo),this.priority=e.priority||0}async getChildrenValues(){let r=await(await this.queue.client).hgetall(this.toKey(`${this.id}:processed`));if(r)return(0,aa.parseObjectValues)(r)}async getIgnoredChildrenFailures(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getFailedChildrenValues(){return(await this.queue.client).hgetall(this.toKey(`${this.id}:failed`))}async getDependencies(e={}){let n=(await this.queue.client).multi();if(!e.processed&&!e.unprocessed&&!e.ignored&&!e.failed){n.hgetall(this.toKey(`${this.id}:processed`)),n.smembers(this.toKey(`${this.id}:dependencies`)),n.hgetall(this.toKey(`${this.id}:failed`)),n.zrange(this.toKey(`${this.id}:unsuccessful`),0,-1);let[[i,s],[o,a],[u,c],[l,d]]=await n.exec();return{processed:(0,aa.parseObjectValues)(s),unprocessed:a,failed:d,ignored:c}}else{let i={cursor:0,count:20},s=[];if(e.processed){s.push("processed");let g=Object.assign(Object.assign({},i),e.processed);n.hscan(this.toKey(`${this.id}:processed`),g.cursor,"COUNT",g.count)}if(e.unprocessed){s.push("unprocessed");let g=Object.assign(Object.assign({},i),e.unprocessed);n.sscan(this.toKey(`${this.id}:dependencies`),g.cursor,"COUNT",g.count)}if(e.ignored){s.push("ignored");let g=Object.assign(Object.assign({},i),e.ignored);n.hscan(this.toKey(`${this.id}:failed`),g.cursor,"COUNT",g.count)}let o;if(e.failed){s.push("failed");let g=Object.assign(Object.assign({},i),e.failed);o=g.cursor+g.count,n.zrange(this.toKey(`${this.id}:unsuccessful`),g.cursor,g.count-1)}let a=await n.exec(),u,c,l,d,p,f,h;return s.forEach((g,_)=>{switch(g){case"processed":{u=a[_][1][0];let S=a[_][1][1],w={};for(let C=0;C<S.length;++C)C%2&&(w[S[C-1]]=JSON.parse(S[C]));c=w;break}case"failed":{p=a[_][1];break}case"ignored":{f=a[_][1][0];let S=a[_][1][1],w={};for(let C=0;C<S.length;++C)C%2&&(w[S[C-1]]=S[C]);h=w;break}case"unprocessed":{l=a[_][1][0],d=a[_][1][1];break}}}),Object.assign(Object.assign(Object.assign(Object.assign({},u?{processed:c,nextProcessedCursor:Number(u)}:{}),f?{ignored:h,nextIgnoredCursor:Number(f)}:{}),o?{failed:p,nextFailedCursor:o}:{}),l?{unprocessed:d,nextUnprocessedCursor:Number(l)}:{})}}async getDependenciesCount(e={}){let r=[];Object.entries(e).forEach(([o,a])=>{a&&r.push(o)});let n=r.length?r:["processed","unprocessed","ignored","failed"],i=await this.scripts.getDependencyCounts(this.id,n),s={};return i.forEach((o,a)=>{s[`${n[a]}`]=o||0}),s}async waitUntilFinished(e,r){await this.queue.waitUntilReady();let n=this.id;return new Promise(async(i,s)=>{let o;r&&(o=setTimeout(()=>u(`Job wait ${this.name} timed out before finishing, no finish notification arrived after ${r}ms (id=${n})`),r));function a(g){d(),i(g.returnvalue)}function u(g){d(),s(new Error(g.failedReason||g))}let c=`completed:${n}`,l=`failed:${n}`;e.on(c,a),e.on(l,u),this.queue.on("closing",u);let d=()=>{clearInterval(o),e.removeListener(c,a),e.removeListener(l,u),this.queue.removeListener("closing",u)};await e.waitUntilReady();let[p,f]=await this.scripts.isFinished(n,!0);p!=0&&(p==-1||p==2?u({failedReason:f}):a({returnvalue:CYe(f)}))})}async moveToDelayed(e,r){let n=Date.now(),i=e-n,s=i>0?i:0,o=await this.scripts.moveToDelayed(this.id,n,s,r,{skipAttempt:!0});return this.delay=s,o}async moveToWaitingChildren(e,r={}){return await this.scripts.moveToWaitingChildren(this.id,e,r)}async promote(){let e=this.id;await this.scripts.promote(e),this.delay=0}async retry(e="failed",r={}){await this.scripts.reprocessJob(this,e,r),this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.returnvalue=null,r.resetAttemptsMade&&(this.attemptsMade=0),r.resetAttemptsStarted&&(this.attemptsStarted=0)}discard(){this.discarded=!0}async isInZSet(e){return await(await this.queue.client).zscore(this.queue.toKey(e),this.id)!==null}async isInList(e){return this.scripts.isJobInList(this.queue.toKey(e),this.id)}addJob(e,r){let n=this.asJSON();return this.validateOptions(n),this.scripts.addJob(e,n,n.opts,this.id,r)}async removeDeduplicationKey(){return this.deduplicationId?await this.scripts.removeDeduplicationKey(this.deduplicationId,this.id)>0:!1}validateOptions(e){var r,n,i,s,o,a,u,c;let l=["removeDependencyOnFailure","failParentOnFailure","continueParentOnFailure","ignoreDependencyOnFailure"];if(this.opts.sizeLimit&&(0,aa.lengthInUtf8Bytes)(e.data)>this.opts.sizeLimit)throw new Error(`The size of job ${this.name} exceeds the limit ${this.opts.sizeLimit} bytes`);if(this.opts.delay&&this.opts.repeat&&!(!((r=this.opts.repeat)===null||r===void 0)&&r.count))throw new Error("Delay and repeat options could not be used together");let p=l.filter(f=>this.opts[f]);if(p.length>1){let f=p.join(", ");throw new Error(`The following options cannot be used together: ${f}`)}if(!((n=this.opts)===null||n===void 0)&&n.jobId){if(`${parseInt(this.opts.jobId,10)}`===((i=this.opts)===null||i===void 0?void 0:i.jobId))throw new Error("Custom Id cannot be integers");if(!((s=this.opts)===null||s===void 0)&&s.jobId.includes(":")&&((a=(o=this.opts)===null||o===void 0?void 0:o.jobId)===null||a===void 0?void 0:a.split(":").length)!==3)throw new Error("Custom Id cannot contain :")}if(this.opts.priority){if(Math.trunc(this.opts.priority)!==this.opts.priority)throw new Error("Priority should not be float");if(this.opts.priority>Fm.PRIORITY_LIMIT)throw new Error(`Priority should be between 0 and ${Fm.PRIORITY_LIMIT}`)}if(this.opts.deduplication&&!(!((u=this.opts.deduplication)===null||u===void 0)&&u.id))throw new Error("Deduplication id must be provided");if(this.opts.debounce&&!(!((c=this.opts.debounce)===null||c===void 0)&&c.id))throw new Error("Debounce id must be provided");if(typeof this.opts.backoff=="object"&&typeof this.opts.backoff.jitter=="number"&&(this.opts.backoff.jitter<0||this.opts.backoff.jitter>1))throw new Error("Jitter should be between 0 and 1")}updateStacktrace(e){this.stacktrace=this.stacktrace||[],e?.stack&&(this.stacktrace.push(e.stack),this.opts.stackTraceLimit===0?this.stacktrace=[]:this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(-this.opts.stackTraceLimit)))}};Fm.Job=Pce;function Wdr(t){if(!t)return[];let e=(0,aa.tryCatch)(JSON.parse,JSON,[t]);return e===aa.errorObject||!(e instanceof Array)?[]:e}function CYe(t){let e=(0,aa.tryCatch)(JSON.parse,JSON,[t]);if(e!==aa.errorObject)return e;zdr("corrupted returnvalue: "+t,e)}});var yB=m(mB=>{"use strict";Object.defineProperty(mB,"__esModule",{value:!0});mB.QueueKeys=void 0;var Nce=class{constructor(e="bull"){this.prefix=e}getKeys(e){let r={};return["","active","wait","waiting-children","paused","id","delayed","prioritized","stalled-check","completed","failed","stalled","repeat","limiter","meta","events","pc","marker","de"].forEach(n=>{r[n]=this.toKey(e,n)}),r}toKey(e,r){return`${this.getQueueQualifiedName(e)}:${r}`}getQueueQualifiedName(e){return`${this.prefix}:${e}`}};mB.QueueKeys=Nce});var TYe=m(gB=>{"use strict";Object.defineProperty(gB,"__esModule",{value:!0});gB.addDelayedJob=void 0;var Jdr=`--[[
  Adds a delayed job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - computes timestamp.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'delayed'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (use custom instead of one generated automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[2]
local idKey = KEYS[3]
local delayedKey = KEYS[4]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local opts = cmsgpack.unpack(ARGV[3])
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, delayedKey, deduplicationKey,
  eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
    opts, timestamp, parentKey, parentData, repeatJobKey)
addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, KEYS[1], delay)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;gB.addDelayedJob={name:"addDelayedJob",content:Jdr,keys:6}});var OYe=m(EB=>{"use strict";Object.defineProperty(EB,"__esModule",{value:!0});EB.addJobScheduler=void 0;var Ydr=`--[[
  Adds a job scheduler, i.e. a job factory that creates jobs based on a given schedule (repeat options).
    Input:
      KEYS[1]  'repeat' key
      KEYS[2]  'delayed' key
      KEYS[3]  'wait' key
      KEYS[4]  'paused' key
      KEYS[5]  'meta' key
      KEYS[6]  'prioritized' key
      KEYS[7]  'marker' key
      KEYS[8]  'id' key
      KEYS[9]  'events' key
      KEYS[10] 'pc' priority counter
      KEYS[11] 'active' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] jobs scheduler id
      ARGV[4] Json stringified template data
      ARGV[5] mspacked template opts
      ARGV[6] msgpacked delayed opts
      ARGV[7] timestamp
      ARGV[8] prefix key
      ARGV[9] producer key
      Output:
        repeatableKey  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local eventsKey = KEYS[9]
local nextMillis = ARGV[1]
local jobSchedulerId = ARGV[3]
local templateOpts = cmsgpack.unpack(ARGV[5])
local now = tonumber(ARGV[7])
local prefixKey = ARGV[8]
local jobOpts = cmsgpack.unpack(ARGV[6])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
--[[
  Function to store a job scheduler
]]
local function storeJobScheduler(schedulerId, schedulerKey, repeatKey, nextMillis, opts,
  templateData, templateOpts)
  rcall("ZADD", repeatKey, nextMillis, schedulerId)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['limit'] then
    table.insert(optionalValues, "limit")
    table.insert(optionalValues, opts['limit'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['startDate'] then
    table.insert(optionalValues, "startDate")
    table.insert(optionalValues, opts['startDate'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  if opts['offset'] then
    table.insert(optionalValues, "offset")
    table.insert(optionalValues, opts['offset'])
  else
    local offset = rcall("HGET", schedulerKey, "offset")
    if offset then
      table.insert(optionalValues, "offset")
      table.insert(optionalValues, tonumber(offset))
    end
  end
  local jsonTemplateOpts = cjson.encode(templateOpts)
  if jsonTemplateOpts and jsonTemplateOpts ~= '{}' then
    table.insert(optionalValues, "opts")
    table.insert(optionalValues, jsonTemplateOpts)
  end
  if templateData and templateData ~= '{}' then
    table.insert(optionalValues, "data")
    table.insert(optionalValues, templateData)
  end
  table.insert(optionalValues, "ic")
  table.insert(optionalValues, rcall("HGET", schedulerKey, "ic") or 1)
  rcall("DEL", schedulerKey) -- remove all attributes and then re-insert new ones
  rcall("HMSET", schedulerKey, "name", opts['name'], unpack(optionalValues))
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local schedulerKey = repeatKey .. ":" .. jobSchedulerId
local maxEvents = getOrSetMaxEvents(metaKey)
local templateData = ARGV[4]
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
if prevMillis then
    prevMillis = tonumber(prevMillis)
end
local schedulerOpts = cmsgpack.unpack(ARGV[2])
local every = schedulerOpts['every']
-- For backwards compatibility we also check the offset from the job itself.
-- could be removed in future major versions.
local jobOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
local offset = schedulerOpts['offset'] or jobOffset or 0
local newOffset = offset
local updatedEvery = false
if every then
    -- if we changed the 'every' value we need to reset millis to nil
    local millis = prevMillis
    if prevMillis then
        local prevEvery = tonumber(rcall("HGET", schedulerKey, "every"))
        if prevEvery ~= every then
            millis = nil
            updatedEvery = true
        end
    end
    local startDate = schedulerOpts['startDate']
    nextMillis, newOffset = getJobSchedulerEveryNextMillis(millis, every, now, offset, startDate)
end
local function removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, jobId, metaKey,
    eventsKey)
    if rcall("ZSCORE", delayedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", delayedKey, jobId)
        return true
    elseif rcall("ZSCORE", prioritizedKey, jobId) then
        removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
        rcall("ZREM", prioritizedKey, jobId)
        return true
    else
        local pausedOrWaitKey = waitKey
        if isQueuePaused(metaKey) then
            pausedOrWaitKey = pausedKey
        end
        if rcall("LREM", pausedOrWaitKey, 1, jobId) > 0 then
            removeJob(jobId, true, prefixKey, true --[[remove debounce key]] )
            return true
        end
    end
    return false
end
local removedPrevJob = false
if prevMillis then
    local currentJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    local currentJobKey = schedulerKey .. ":" .. prevMillis
    -- In theory it should always exist the currentJobKey if there is a prevMillis unless something has
    -- gone really wrong.
    if rcall("EXISTS", currentJobKey) == 1 then
        removedPrevJob = removeJobFromScheduler(prefixKey, delayedKey, prioritizedKey, waitKey, pausedKey, currentJobId,
            metaKey, eventsKey)
    end
end
if removedPrevJob then
    -- The jobs has been removed and we want to replace it, so lets use the same millis.
    if every and not updatedEvery then
        nextMillis = prevMillis
    end
else
    -- Special case where no job was removed, and we need to add the next iteration.
    schedulerOpts['offset'] = newOffset
end
-- Check for job ID collision with existing jobs (in any state)
local jobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
local jobKey = prefixKey .. jobId
-- If there's already a job with this ID, in a state 
-- that is not updatable (active, completed, failed) we must 
-- handle the collision
local hasCollision = false
if rcall("EXISTS", jobKey) == 1 then
    if every then
        -- For 'every' case: try next time slot to avoid collision
        local nextSlotMillis = nextMillis + every
        local nextSlotJobId = "repeat:" .. jobSchedulerId .. ":" .. nextSlotMillis
        local nextSlotJobKey = prefixKey .. nextSlotJobId
        if rcall("EXISTS", nextSlotJobKey) == 0 then
            -- Next slot is free, use it
            nextMillis = nextSlotMillis
            jobId = nextSlotJobId
        else
            -- Next slot also has a job, return error code
            return -11 -- SchedulerJobSlotsBusy
        end
    else
        hasCollision = true
    end
end
local delay = nextMillis - now
-- Fast Clamp delay to minimum of 0
if delay < 0 then
    delay = 0
end
local nextJobKey = schedulerKey .. ":" .. nextMillis
if not hasCollision or removedPrevJob then
    -- jobId already calculated above during collision check
    storeJobScheduler(jobSchedulerId, schedulerKey, repeatKey, nextMillis, schedulerOpts, templateData, templateOpts)
    rcall("INCR", KEYS[8])
    addJobFromScheduler(nextJobKey, jobId, jobOpts, waitKey, pausedKey, KEYS[11], metaKey, prioritizedKey, KEYS[10],
        delayedKey, KEYS[7], eventsKey, schedulerOpts['name'], maxEvents, now, templateData, jobSchedulerId, delay)
elseif hasCollision then
    -- For 'pattern' case: return error code
    return -10 -- SchedulerJobIdCollision
end
if ARGV[9] ~= "" then
    rcall("HSET", ARGV[9], "nrjid", jobId)
end
return {jobId .. "", delay}
`;EB.addJobScheduler={name:"addJobScheduler",content:Ydr,keys:11}});var xYe=m(bB=>{"use strict";Object.defineProperty(bB,"__esModule",{value:!0});bB.addLog=void 0;var Qdr=`--[[
  Add job log
  Input:
    KEYS[1] job id key
    KEYS[2] job logs key
    ARGV[1] id
    ARGV[2] log
    ARGV[3] keepLogs
  Output:
    -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
  local logCount = rcall("RPUSH", KEYS[2], ARGV[2])
  if ARGV[3] ~= '' then
    local keepLogs = tonumber(ARGV[3])
    rcall("LTRIM", KEYS[2], -keepLogs, -1)
    return math.min(keepLogs, logCount)
  end
  return logCount
else
  return -1
end
`;bB.addLog={name:"addLog",content:Qdr,keys:2}});var IYe=m(_B=>{"use strict";Object.defineProperty(_B,"__esModule",{value:!0});_B.addParentJob=void 0;var Xdr=`--[[
  Adds a parent job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - adds the job to the waiting-children zset
    Input:
      KEYS[1] 'meta'
      KEYS[2] 'id'
      KEYS[3] 'delayed'
      KEYS[4] 'waiting-children'
      KEYS[5] 'completed'
      KEYS[6] events stream key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local metaKey = KEYS[1]
local idKey = KEYS[2]
local completedKey = KEYS[5]
local eventsKey = KEYS[6]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local waitChildrenKey = KEYS[4]
rcall("ZADD", waitChildrenKey, timestamp, jobId)
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
      "waiting-children", "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;_B.addParentJob={name:"addParentJob",content:Xdr,keys:6}});var RYe=m(vB=>{"use strict";Object.defineProperty(vB,"__esModule",{value:!0});vB.addPrioritizedJob=void 0;var Zdr=`--[[
  Adds a priotitized job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'marker',
      KEYS[2] 'meta'
      KEYS[3] 'id'
      KEYS[4] 'prioritized'
      KEYS[5] 'delayed'
      KEYS[6] 'completed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] 'pc' priority counter
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]] 
local metaKey = KEYS[2]
local idKey = KEYS[3]
local priorityKey = KEYS[4]
local completedKey = KEYS[6]
local activeKey = KEYS[7]
local eventsKey = KEYS[8]
local priorityCounterKey = KEYS[9]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", idKey)
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, completedKey, eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[5],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
local delay, priority = storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2],
                                 opts, timestamp, parentKey, parentData,
                                 repeatJobKey)
-- Add the job to the prioritized set
local isPausedOrMaxed = isQueuePausedOrMaxed(metaKey, activeKey)
addJobWithPriority( KEYS[1], priorityKey, priority, jobId, priorityCounterKey, isPausedOrMaxed)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;vB.addPrioritizedJob={name:"addPrioritizedJob",content:Zdr,keys:9}});var DYe=m(SB=>{"use strict";Object.defineProperty(SB,"__esModule",{value:!0});SB.addRepeatableJob=void 0;var epr=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      KEYS[2] 'delayed' key
      ARGV[1] next milliseconds
      ARGV[2] msgpacked options
            [1]  name
            [2]  tz?
            [3]  pattern?
            [4]  endDate?
            [5]  every?
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      ARGV[4] custom key
      ARGV[5] prefix key
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local nextMillis = ARGV[1]
local legacyCustomKey = ARGV[3]
local customKey = ARGV[4]
local prefixKey = ARGV[5]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function storeRepeatableJob(repeatKey, customKey, nextMillis, rawOpts)
  rcall("ZADD", repeatKey, nextMillis, customKey)
  local opts = cmsgpack.unpack(rawOpts)
  local optionalValues = {}
  if opts['tz'] then
    table.insert(optionalValues, "tz")
    table.insert(optionalValues, opts['tz'])
  end
  if opts['pattern'] then
    table.insert(optionalValues, "pattern")
    table.insert(optionalValues, opts['pattern'])
  end
  if opts['endDate'] then
    table.insert(optionalValues, "endDate")
    table.insert(optionalValues, opts['endDate'])
  end
  if opts['every'] then
    table.insert(optionalValues, "every")
    table.insert(optionalValues, opts['every'])
  end
  rcall("HMSET", repeatKey .. ":" .. customKey, "name", opts['name'],
    unpack(optionalValues))
  return customKey
end
-- If we are overriding a repeatable job we must delete the delayed job for
-- the next iteration.
local prevMillis = rcall("ZSCORE", repeatKey, customKey)
if prevMillis then
  local delayedJobId =  "repeat:" .. customKey .. ":" .. prevMillis
  local nextDelayedJobId =  repeatKey .. ":" .. customKey .. ":" .. nextMillis
  if rcall("ZSCORE", delayedKey, delayedJobId)
   and rcall("EXISTS", nextDelayedJobId) ~= 1 then
    removeJob(delayedJobId, true, prefixKey, true --[[remove debounce key]])
    rcall("ZREM", delayedKey, delayedJobId)
  end
end
-- Keep backwards compatibility with old repeatable jobs (<= 3.0.0)
if rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
  return storeRepeatableJob(repeatKey, legacyCustomKey, nextMillis, ARGV[2])
end
return storeRepeatableJob(repeatKey, customKey, nextMillis, ARGV[2])
`;SB.addRepeatableJob={name:"addRepeatableJob",content:epr,keys:2}});var kYe=m(wB=>{"use strict";Object.defineProperty(wB,"__esModule",{value:!0});wB.addStandardJob=void 0;var tpr=`--[[
  Adds a job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - if delayed:
      - computes timestamp.
      - adds to delayed zset.
      - Emits a global event 'delayed' if the job is delayed.
    - if not delayed
      - Adds the jobId to the wait/paused list in one of three ways:
         - LIFO
         - FIFO
         - prioritized.
      - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'wait',
      KEYS[2] 'paused'
      KEYS[3] 'meta'
      KEYS[4] 'id'
      KEYS[5] 'completed'
      KEYS[6] 'delayed'
      KEYS[7] 'active'
      KEYS[8] events stream key
      KEYS[9] marker key
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  parent dependencies key.
            [7]  parent? {id, queueKey}
            [8]  repeat job key
            [9] deduplication key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local eventsKey = KEYS[8]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local parent = args[7]
local repeatJobKey = args[8]
local deduplicationKey = args[9]
local parentData
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to debounce a job.
]]
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents, currentDeduplicatedJobId,
    jobId, deduplicationId, prefix)
    if rcall("ZREM", delayedKey, currentDeduplicatedJobId) > 0 then
        removeJobKeys(prefix .. currentDeduplicatedJobId)
        rcall("XADD", eventsKey, "*", "event", "removed", "jobId", currentDeduplicatedJobId,
            "prev", "delayed")
        -- TODO remove debounced event in next breaking change
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
            jobId, "debounceId", deduplicationId)
        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
            jobId, "deduplicationId", deduplicationId, "deduplicatedJobId", currentDeduplicatedJobId)
        return true
    end
    return false
end
local function deduplicateJob(deduplicationOpts, jobId, delayedKey, deduplicationKey, eventsKey, maxEvents,
    prefix)
    local deduplicationId = deduplicationOpts and deduplicationOpts['id']
    if deduplicationId then
        local ttl = deduplicationOpts['ttl']
        if deduplicationOpts['replace'] then
            if ttl and ttl > 0 then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        if deduplicationOpts['extend'] then
                            rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        else
                            rcall('SET', deduplicationKey, jobId, 'KEEPTTL')
                        end
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                    return
                end
            else
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                if currentDebounceJobId then
                    local isRemoved = removeDelayedJob(delayedKey, deduplicationKey, eventsKey, maxEvents,
                        currentDebounceJobId, jobId, deduplicationId, prefix)
                    if isRemoved then
                        rcall('SET', deduplicationKey, jobId)
                        return
                    else
                        return currentDebounceJobId
                    end
                else
                    rcall('SET', deduplicationKey, jobId)
                    return
                end
            end
        else
            local deduplicationKeyExists
            if ttl and ttl > 0 then
                if deduplicationOpts['extend'] then
                    local currentDebounceJobId = rcall('GET', deduplicationKey)
                    if currentDebounceJobId then
                        rcall('SET', deduplicationKey, currentDebounceJobId, 'PX', ttl)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced",
                            "jobId", currentDebounceJobId, "debounceId", deduplicationId)
                        rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                            currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                        return currentDebounceJobId
                    else
                        rcall('SET', deduplicationKey, jobId, 'PX', ttl)
                        return
                    end
                else
                    deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'PX', ttl, 'NX')
                end
            else
                deduplicationKeyExists = not rcall('SET', deduplicationKey, jobId, 'NX')
            end
            if deduplicationKeyExists then
                local currentDebounceJobId = rcall('GET', deduplicationKey)
                -- TODO remove debounced event in next breaking change
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "debounced", "jobId",
                    currentDebounceJobId, "debounceId", deduplicationId)
                rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "deduplicated", "jobId",
                    currentDebounceJobId, "deduplicationId", deduplicationId, "deduplicatedJobId", jobId)
                return currentDebounceJobId
            end
        end
    end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to handle the case when job is duplicated.
]]
-- Includes
--[[
    This function is used to update the parent's dependencies if the job
    is already completed and about to be ignored. The parent must get its
    dependencies updated to avoid the parent job being stuck forever in 
    the waiting-children state.
]]
-- Includes
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function updateExistingJobsParent(parentKey, parent, parentData,
                                        parentDependenciesKey, completedKey,
                                        jobIdKey, jobId, timestamp)
    if parentKey ~= nil then
        if rcall("ZSCORE", completedKey, jobId) then
            local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
            updateParentDepsIfNeeded(parentKey, parent['queueKey'],
                                     parentDependenciesKey, parent['id'],
                                     jobIdKey, returnvalue, timestamp)
        else
            if parentDependenciesKey ~= nil then
                rcall("SADD", parentDependenciesKey, jobIdKey)
            end
        end
        rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
end
local function handleDuplicatedJob(jobKey, jobId, currentParentKey, currentParent,
  parentData, parentDependenciesKey, completedKey, eventsKey, maxEvents, timestamp)
  local existedParentKey = rcall("HGET", jobKey, "parentKey")
  if not existedParentKey or existedParentKey == currentParentKey then
    updateExistingJobsParent(currentParentKey, currentParent, parentData,
      parentDependenciesKey, completedKey, jobKey,
      jobId, timestamp)
  else
    if currentParentKey ~= nil and currentParentKey ~= existedParentKey
      and (rcall("EXISTS", existedParentKey) == 1) then
      return -7
    end
  end
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event",
    "duplicated", "jobId", jobId)
  return jobId .. "" -- convert to string
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
if parentKey ~= nil then
    if rcall("EXISTS", parentKey) ~= 1 then return -5 end
    parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", KEYS[4])
local metaKey = KEYS[3]
local maxEvents = getOrSetMaxEvents(metaKey)
local parentDependenciesKey = args[6]
local timestamp = args[4]
if args[2] == "" then
    jobId = jobCounter
    jobIdKey = args[1] .. jobId
else
    jobId = args[2]
    jobIdKey = args[1] .. jobId
    if rcall("EXISTS", jobIdKey) == 1 then
        return handleDuplicatedJob(jobIdKey, jobId, parentKey, parent,
            parentData, parentDependenciesKey, KEYS[5], eventsKey,
            maxEvents, timestamp)
    end
end
local deduplicationJobId = deduplicateJob(opts['de'], jobId, KEYS[6],
  deduplicationKey, eventsKey, maxEvents, args[1])
if deduplicationJobId then
  return deduplicationJobId
end
-- Store the job.
storeJob(eventsKey, jobIdKey, jobId, args[3], ARGV[2], opts, timestamp,
         parentKey, parentData, repeatJobKey)
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[1], KEYS[2])
-- LIFO or FIFO
local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
addJobInTargetList(target, KEYS[9], pushCmd, isPausedOrMaxed, jobId)
-- Emit waiting event
rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId)
-- Check if this job is a child of another job, if so add it to the parents dependencies
if parentDependenciesKey ~= nil then
    rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;wB.addStandardJob={name:"addStandardJob",content:tpr,keys:9}});var MYe=m(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0});AB.changeDelay=void 0;var rpr=`--[[
  Change job delay when it is in delayed set.
  Input:
    KEYS[1] delayed key
    KEYS[2] meta key
    KEYS[3] marker key
    KEYS[4] events stream
    ARGV[1] delay
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] job key
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in delayed set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", ARGV[4]) == 1 then
  local jobId = ARGV[3]
  local delay = tonumber(ARGV[1])
  local score, delayedTimestamp = getDelayedScore(KEYS[1], ARGV[2], delay)
  local numRemovedElements = rcall("ZREM", KEYS[1], jobId)
  if numRemovedElements < 1 then
    return -3
  end
  rcall("HSET", ARGV[4], "delay", delay)
  rcall("ZADD", KEYS[1], score, jobId)
  local maxEvents = getOrSetMaxEvents(KEYS[2])
  rcall("XADD", KEYS[4], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(KEYS[3], KEYS[1])
  return 0
else
  return -1
end`;AB.changeDelay={name:"changeDelay",content:rpr,keys:4}});var PYe=m(CB=>{"use strict";Object.defineProperty(CB,"__esModule",{value:!0});CB.changePriority=void 0;var npr=`--[[
  Change job priority
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] 'active'
    KEYS[6] 'pc' priority counter
    KEYS[7] 'marker'
    ARGV[1] priority value
    ARGV[2] prefix key
    ARGV[3] job id
    ARGV[4] lifo
    Output:
       0  - OK
      -1  - Missing job
]]
local jobId = ARGV[3]
local jobKey = ARGV[2] .. jobId
local priority = tonumber(ARGV[1])
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
local function reAddJobWithNewPriority( prioritizedKey, markerKey, targetKey,
    priorityCounter, lifo, priority, jobId, isPausedOrMaxed)
    if priority == 0 then
        local pushCmd = lifo and 'RPUSH' or 'LPUSH'
        addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
        if lifo then
            pushBackJobWithPriority(prioritizedKey, priority, jobId)
        else
            addJobWithPriority(markerKey, prioritizedKey, priority, jobId,
                priorityCounter, isPausedOrMaxed)
        end
    end
end
if rcall("EXISTS", jobKey) == 1 then
    local metaKey = KEYS[3]
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[5], KEYS[1], KEYS[2])
    local prioritizedKey = KEYS[4]
    local priorityCounterKey = KEYS[6]
    local markerKey = KEYS[7]
    -- Re-add with the new priority
    if rcall("ZREM", prioritizedKey, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    elseif rcall("LREM", target, -1, jobId) > 0 then
        reAddJobWithNewPriority( prioritizedKey, markerKey, target,
            priorityCounterKey, ARGV[4] == '1', priority, jobId, isPausedOrMaxed)
    end
    rcall("HSET", jobKey, "priority", priority)
    return 0
else
    return -1
end
`;CB.changePriority={name:"changePriority",content:npr,keys:7}});var NYe=m(TB=>{"use strict";Object.defineProperty(TB,"__esModule",{value:!0});TB.cleanJobsInSet=void 0;var ipr=`--[[
  Remove jobs from the specific set.
  Input:
    KEYS[1]  set key,
    KEYS[2]  events stream key
    KEYS[3]  repeat key
    ARGV[1]  jobKey prefix
    ARGV[2]  timestamp
    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited
    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'
]]
local rcall = redis.call
local repeatKey = KEYS[3]
local rangeStart = 0
local rangeEnd = -1
local limit = tonumber(ARGV[3])
-- If we're only deleting _n_ items, avoid retrieving all items
-- for faster performance
--
-- Start from the tail of the list, since that's where oldest elements
-- are generally added for FIFO lists
if limit > 0 then
  rangeStart = -1 - limit + 1
  rangeEnd = -1
end
-- Includes
--[[
  Function to clean job list.
  Returns jobIds and deleted count number.
]]
-- Includes
--[[
  Function to get the latest saved timestamp.
]]
local function getTimestamp(jobKey, attributes)
  if #attributes == 1 then
    return rcall("HGET", jobKey, attributes[1])
  end
  local jobTs
  for _, ts in ipairs(rcall("HMGET", jobKey, unpack(attributes))) do
    if (ts) then
      jobTs = ts
      break
    end
  end
  return jobTs
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function cleanList(listKey, jobKeyPrefix, rangeStart, rangeEnd,
  timestamp, isWaiting, jobSchedulersKey)
  local jobs = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  local deleted = {}
  local deletedCount = 0
  local jobTS
  local deletionMarker = ''
  local jobIdsLen = #jobs
  for i, job in ipairs(jobs) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = jobKeyPrefix .. job
    if (isWaiting or rcall("EXISTS", jobKey .. ":lock") == 0) and
      not isJobSchedulerJob(job, jobKey, jobSchedulersKey) then
      -- Find the right timestamp of the job to compare to maxTimestamp:
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      -- * processedOn represents when the job was last attempted, but it doesn't get populated until
      --   the job is first tried
      -- * timestamp is the original job submission time
      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs
      -- that have been active within the grace period:
      jobTS = getTimestamp(jobKey, {"finishedOn", "processedOn", "timestamp"})
      if (not jobTS or jobTS <= timestamp) then
        -- replace the entry with a deletion marker; the actual deletion will
        -- occur at the end of the script
        rcall("LSET", listKey, rangeEnd - jobIdsLen + i, deletionMarker)
        removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]])
        deletedCount = deletedCount + 1
        table.insert(deleted, job)
      end
    end
  end
  rcall("LREM", listKey, 0, deletionMarker)
  return {deleted, deletedCount}
end
--[[
  Function to clean job set.
  Returns jobIds and deleted count number.
]] 
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  We use ZRANGEBYSCORE to make the case where we're deleting a limited number
  of items in a sorted set only run a single iteration. If we simply used
  ZRANGE, we may take a long time traversing through jobs that are within the
  grace period.
]]
local function getJobsInZset(zsetKey, rangeEnd, limit)
  if limit > 0 then
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd, "LIMIT", 0, limit)
  else
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd)
  end
end
local function cleanSet(
    setKey,
    jobKeyPrefix,
    rangeEnd,
    timestamp,
    limit,
    attributes,
    isFinished,
    jobSchedulersKey)
    local jobs = getJobsInZset(setKey, rangeEnd, limit)
    local deleted = {}
    local deletedCount = 0
    local jobTS
    for i, job in ipairs(jobs) do
        if limit > 0 and deletedCount >= limit then
            break
        end
        local jobKey = jobKeyPrefix .. job
        -- Extract a Job Scheduler Id from jobId ("repeat:job-scheduler-id:millis") 
        -- and check if it is in the scheduled jobs
        if not (jobSchedulersKey and isJobSchedulerJob(job, jobKey, jobSchedulersKey)) then
            if isFinished then
                removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                deletedCount = deletedCount + 1
                table.insert(deleted, job)
            else
                -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
                jobTS = getTimestamp(jobKey, attributes)
                if (not jobTS or jobTS <= timestamp) then
                    removeJob(job, true, jobKeyPrefix, true --[[remove debounce key]] )
                    deletedCount = deletedCount + 1
                    table.insert(deleted, job)
                end
            end
        end
    end
    if (#deleted > 0) then
        for from, to in batches(#deleted, 7000) do
            rcall("ZREM", setKey, unpack(deleted, from, to))
        end
    end
    return {deleted, deletedCount}
end
local result
if ARGV[4] == "active" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], false --[[ hasFinished ]],
                      repeatKey)
elseif ARGV[4] == "delayed" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"processedOn", "timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "prioritized" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"timestamp"}, false  --[[ hasFinished ]], repeatKey)
elseif ARGV[4] == "wait" or ARGV[4] == "paused" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], true --[[ hasFinished ]],
                      repeatKey)
else
  rangeEnd = ARGV[2]
  -- No need to pass repeat key as in that moment job won't be related to a job scheduler
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"finishedOn"}, true  --[[ hasFinished ]])
end
rcall("XADD", KEYS[2], "*", "event", "cleaned", "count", result[2])
return result[1]
`;TB.cleanJobsInSet={name:"cleanJobsInSet",content:ipr,keys:3}});var FYe=m(OB=>{"use strict";Object.defineProperty(OB,"__esModule",{value:!0});OB.drain=void 0;var spr=`--[[
  Drains the queue, removes all jobs that are waiting
  or delayed, but not active, completed or failed
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'delayed'
    KEYS[4] 'prioritized'
    KEYS[5] 'jobschedulers' (repeat)
    ARGV[1]  queue key prefix
    ARGV[2]  should clean delayed jobs
]]
local rcall = redis.call
local queueBaseKey = ARGV[1]
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
-- We must not remove delayed jobs if they are associated to a job scheduler.
local scheduledJobs = {}
local jobSchedulers = rcall("ZRANGE", KEYS[5], 0, -1, "WITHSCORES")
-- For every job scheduler, get the current delayed job id.
for i = 1, #jobSchedulers, 2 do
    local jobSchedulerId = jobSchedulers[i]
    local jobSchedulerMillis = jobSchedulers[i + 1]
    local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. jobSchedulerMillis
    scheduledJobs[delayedJobId] = true
end
removeListJobs(KEYS[1], true, queueBaseKey, 0, scheduledJobs) -- wait
removeListJobs(KEYS[2], true, queueBaseKey, 0, scheduledJobs) -- paused
if ARGV[2] == "1" then
  removeZSetJobs(KEYS[3], true, queueBaseKey, 0, scheduledJobs) -- delayed
end
removeZSetJobs(KEYS[4], true, queueBaseKey, 0, scheduledJobs) -- prioritized
`;OB.drain={name:"drain",content:spr,keys:5}});var BYe=m(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});xB.extendLock=void 0;var opr=`--[[
  Extend lock and removes the job from the stalled set.
  Input:
    KEYS[1] 'lock',
    KEYS[2] 'stalled'
    ARGV[1]  token
    ARGV[2]  lock duration in milliseconds
    ARGV[3]  jobid
  Output:
    "1" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  --   if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2], "XX") then
  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then
    rcall("SREM", KEYS[2], ARGV[3])
    return 1
  end
end
return 0
`;xB.extendLock={name:"extendLock",content:opr,keys:2}});var qYe=m(IB=>{"use strict";Object.defineProperty(IB,"__esModule",{value:!0});IB.extendLocks=void 0;var apr=`--[[
  Extend locks for multiple jobs and remove them from the stalled set if successful.
  Return the list of job IDs for which the operation failed.
  KEYS[1] = stalled key
  ARGV[1] = baseKey
  ARGV[2] = tokens
  ARGV[3] = jobIds
  ARGV[4] = lockDuration (ms)
  Output:
    An array of failed job IDs. If empty, all succeeded.
]]
local rcall = redis.call
local stalledKey = KEYS[1]
local baseKey = ARGV[1]
local tokens = cmsgpack.unpack(ARGV[2])
local jobIds = cmsgpack.unpack(ARGV[3])
local lockDuration = ARGV[4]
local jobCount = #jobIds
local failedJobs = {}
for i = 1, jobCount, 1 do
    local lockKey = baseKey .. jobIds[i] .. ':lock'
    local jobId = jobIds[i]
    local token = tokens[i]
    local currentToken = rcall("GET", lockKey)
    if currentToken then
        if currentToken == token then
            local setResult = rcall("SET", lockKey, token, "PX", lockDuration)
            if setResult then
                rcall("SREM", stalledKey, jobId)
            else
                table.insert(failedJobs, jobId)
            end
        else
            table.insert(failedJobs, jobId)
        end
    else
        table.insert(failedJobs, jobId)
    end
end
return failedJobs
`;IB.extendLocks={name:"extendLocks",content:apr,keys:1}});var LYe=m(RB=>{"use strict";Object.defineProperty(RB,"__esModule",{value:!0});RB.getCounts=void 0;var upr=`--[[
  Get counts per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1...] types
]]
local rcall = redis.call;
local prefix = KEYS[1]
local results = {}
for i = 1, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        results[#results+1] = count-1
      else
        results[#results+1] = 0
      end
    else
      results[#results+1] = rcall("LLEN", stateKey)
    end
  elseif ARGV[i] == "active" then
    results[#results+1] = rcall("LLEN", stateKey)
  else
    results[#results+1] = rcall("ZCARD", stateKey)
  end
end
return results
`;RB.getCounts={name:"getCounts",content:upr,keys:1}});var jYe=m(DB=>{"use strict";Object.defineProperty(DB,"__esModule",{value:!0});DB.getCountsPerPriority=void 0;var cpr=`--[[
  Get counts per provided states
    Input:
      KEYS[1] wait key
      KEYS[2] paused key
      KEYS[3] meta key
      KEYS[4] prioritized key
      ARGV[1...] priorities
]]
local rcall = redis.call
local results = {}
local waitKey = KEYS[1]
local pausedKey = KEYS[2]
local prioritizedKey = KEYS[4]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
for i = 1, #ARGV do
  local priority = tonumber(ARGV[i])
  if priority == 0 then
    if isQueuePaused(KEYS[3]) then
      results[#results+1] = rcall("LLEN", pausedKey)
    else
      results[#results+1] = rcall("LLEN", waitKey)
    end
  else
    results[#results+1] = rcall("ZCOUNT", prioritizedKey,
      priority * 0x100000000, (priority + 1)  * 0x100000000 - 1)
  end
end
return results
`;DB.getCountsPerPriority={name:"getCountsPerPriority",content:cpr,keys:4}});var $Ye=m(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0});kB.getDependencyCounts=void 0;var lpr=`--[[
  Get counts per child states
    Input:
      KEYS[1]    processed key
      KEYS[2]    unprocessed key
      KEYS[3]    ignored key
      KEYS[4]    failed key
      ARGV[1...] types
]]
local rcall = redis.call;
local processedKey = KEYS[1]
local unprocessedKey = KEYS[2]
local ignoredKey = KEYS[3]
local failedKey = KEYS[4]
local results = {}
for i = 1, #ARGV do
  if ARGV[i] == "processed" then
    results[#results+1] = rcall("HLEN", processedKey)
  elseif ARGV[i] == "unprocessed" then
    results[#results+1] = rcall("SCARD", unprocessedKey)
  elseif ARGV[i] == "ignored" then
    results[#results+1] = rcall("HLEN", ignoredKey)
  else
    results[#results+1] = rcall("ZCARD", failedKey)
  end
end
return results
`;kB.getDependencyCounts={name:"getDependencyCounts",content:lpr,keys:4}});var KYe=m(MB=>{"use strict";Object.defineProperty(MB,"__esModule",{value:!0});MB.getJobScheduler=void 0;var dpr=`--[[
  Get job scheduler record.
  Input:
    KEYS[1] 'repeat' key
    ARGV[1] id
]]
local rcall = redis.call
local jobSchedulerKey = KEYS[1] .. ":" .. ARGV[1]
local score = rcall("ZSCORE", KEYS[1], ARGV[1])
if score then
  return {rcall("HGETALL", jobSchedulerKey), score} -- get job data
end
return {nil, nil}
`;MB.getJobScheduler={name:"getJobScheduler",content:dpr,keys:1}});var UYe=m(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0});PB.getMetrics=void 0;var ppr=`--[[
  Get metrics
  Input:
    KEYS[1] 'metrics' key
    KEYS[2] 'metrics data' key
    ARGV[1] start index
    ARGV[2] end index
]]
local rcall = redis.call;
local metricsKey = KEYS[1]
local dataKey = KEYS[2]
local metrics = rcall("HMGET", metricsKey, "count", "prevTS", "prevCount")
local data = rcall("LRANGE", dataKey, tonumber(ARGV[1]), tonumber(ARGV[2]))
local numPoints = rcall("LLEN", dataKey)
return {metrics, data, numPoints}
`;PB.getMetrics={name:"getMetrics",content:ppr,keys:2}});var VYe=m(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0});NB.getRanges=void 0;var fpr=`--[[
  Get job ids per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1]    start
      ARGV[2]    end
      ARGV[3]    asc
      ARGV[4...] types
]]
local rcall = redis.call
local prefix = KEYS[1]
local rangeStart = tonumber(ARGV[1])
local rangeEnd = tonumber(ARGV[2])
local asc = ARGV[3]
local results = {}
local function getRangeInList(listKey, asc, rangeStart, rangeEnd, results)
  if asc == "1" then
    local modifiedRangeStart
    local modifiedRangeEnd
    if rangeStart == -1 then
      modifiedRangeStart = 0
    else
      modifiedRangeStart = -(rangeStart + 1)
    end
    if rangeEnd == -1 then
      modifiedRangeEnd = 0
    else
      modifiedRangeEnd = -(rangeEnd + 1)
    end
    results[#results+1] = rcall("LRANGE", listKey,
      modifiedRangeEnd,
      modifiedRangeStart)
  else
    results[#results+1] = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  end
end
for i = 4, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
      else
        results[#results+1] = {}
      end
    else
      getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
    end
  elseif ARGV[i] == "active" then
    getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
  else
    if asc == "1" then
      results[#results+1] = rcall("ZRANGE", stateKey, rangeStart, rangeEnd)
    else
      results[#results+1] = rcall("ZREVRANGE", stateKey, rangeStart, rangeEnd)
    end
  end
end
return results
`;NB.getRanges={name:"getRanges",content:fpr,keys:1}});var GYe=m(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0});FB.getRateLimitTtl=void 0;var hpr=`--[[
  Get rate limit ttl
    Input:
      KEYS[1] 'limiter'
      KEYS[2] 'meta'
      ARGV[1] maxJobs
]]
local rcall = redis.call
-- Includes
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
local rateLimiterKey = KEYS[1]
if ARGV[1] ~= "0" then
  return getRateLimitTTL(tonumber(ARGV[1]), rateLimiterKey)
else
  local rateLimitMax = rcall("HGET", KEYS[2], "max")
  if rateLimitMax then
    return getRateLimitTTL(tonumber(rateLimitMax), rateLimiterKey)
  end
  return rcall("PTTL", rateLimiterKey)
end
`;FB.getRateLimitTtl={name:"getRateLimitTtl",content:hpr,keys:2}});var HYe=m(BB=>{"use strict";Object.defineProperty(BB,"__esModule",{value:!0});BB.getState=void 0;var mpr=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'prioritized'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local active_items = rcall("LRANGE", KEYS[4] , 0, -1)
if checkItemInList(active_items, ARGV[1]) ~= nil then
  return "active"
end
local wait_items = rcall("LRANGE", KEYS[5] , 0, -1)
if checkItemInList(wait_items, ARGV[1]) ~= nil then
  return "waiting"
end
local paused_items = rcall("LRANGE", KEYS[6] , 0, -1)
if checkItemInList(paused_items, ARGV[1]) ~= nil then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7], ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;BB.getState={name:"getState",content:mpr,keys:8}});var zYe=m(qB=>{"use strict";Object.defineProperty(qB,"__esModule",{value:!0});qB.getStateV2=void 0;var ypr=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) then
  return "prioritized"
end
if rcall("LPOS", KEYS[4] , ARGV[1]) then
  return "active"
end
if rcall("LPOS", KEYS[5] , ARGV[1]) then
  return "waiting"
end
if rcall("LPOS", KEYS[6] , ARGV[1]) then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7] , ARGV[1]) then
  return "waiting-children"
end
return "unknown"
`;qB.getStateV2={name:"getStateV2",content:ypr,keys:8}});var WYe=m(LB=>{"use strict";Object.defineProperty(LB,"__esModule",{value:!0});LB.isFinished=void 0;var gpr=`--[[
  Checks if a job is finished (.i.e. is in the completed or failed set)
  Input: 
    KEYS[1] completed key
    KEYS[2] failed key
    KEYS[3] job key
    ARGV[1] job id
    ARGV[2] return value?
  Output:
    0 - Not finished.
    1 - Completed.
    2 - Failed.
   -1 - Missing job. 
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[3]) ~= 1 then
  if ARGV[2] == "1" then
    return {-1,"Missing key for job " .. KEYS[3] .. ". isFinished"}
  end  
  return -1
end
if rcall("ZSCORE", KEYS[1], ARGV[1]) then
  if ARGV[2] == "1" then
    local returnValue = rcall("HGET", KEYS[3], "returnvalue")
    return {1,returnValue}
  end
  return 1
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) then
  if ARGV[2] == "1" then
    local failedReason = rcall("HGET", KEYS[3], "failedReason")
    return {2,failedReason}
  end
  return 2
end
if ARGV[2] == "1" then
  return {0}
end
return 0
`;LB.isFinished={name:"isFinished",content:gpr,keys:3}});var JYe=m(jB=>{"use strict";Object.defineProperty(jB,"__esModule",{value:!0});jB.isJobInList=void 0;var Epr=`--[[
  Checks if job is in a given list.
  Input:
    KEYS[1]
    ARGV[1]
  Output:
    1 if element found in the list.
]]
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local items = redis.call("LRANGE", KEYS[1] , 0, -1)
return checkItemInList(items, ARGV[1])
`;jB.isJobInList={name:"isJobInList",content:Epr,keys:1}});var YYe=m($B=>{"use strict";Object.defineProperty($B,"__esModule",{value:!0});$B.isMaxed=void 0;var bpr=`--[[
  Checks if queue is maxed.
  Input:
    KEYS[1] meta key
    KEYS[2] active key
  Output:
    1 if element found in the list.
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if queue is maxed or not.
]]
local function isQueueMaxed(queueMetaKey, activeKey)
  local maxConcurrency = rcall("HGET", queueMetaKey, "concurrency")
  if maxConcurrency then
    local activeCount = rcall("LLEN", activeKey)
    if activeCount >= tonumber(maxConcurrency) then
      return true
    end
  end
  return false
end
return isQueueMaxed(KEYS[1], KEYS[2])
`;$B.isMaxed={name:"isMaxed",content:bpr,keys:2}});var QYe=m(KB=>{"use strict";Object.defineProperty(KB,"__esModule",{value:!0});KB.moveJobFromActiveToWait=void 0;var _pr=`--[[
  Function to move job from active state to wait.
  Input:
    KEYS[1]  active key
    KEYS[2]  wait key
    KEYS[3]  stalled key
    KEYS[4]  paused key
    KEYS[5]  meta key
    KEYS[6]  limiter key
    KEYS[7]  prioritized key
    KEYS[8]  marker key
    KEYS[9]  event key
    ARGV[1] job id
    ARGV[2] lock token
    ARGV[3] job id key
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local jobId = ARGV[1]
local token = ARGV[2]
local jobKey = ARGV[3]
if rcall("EXISTS", jobKey) == 0 then
  return -1
end
local errorCode = removeLock(jobKey, KEYS[3], token, jobId)
if errorCode < 0 then
  return errorCode
end
local metaKey = KEYS[5]
local removed = rcall("LREM", KEYS[1], 1, jobId)
if removed > 0 then
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[1], KEYS[2], KEYS[4])
  local priority = tonumber(rcall("HGET", ARGV[3], "priority")) or 0
  if priority > 0 then
    pushBackJobWithPriority(KEYS[7], priority, jobId)
  else
    addJobInTargetList(target, KEYS[8], "RPUSH", isPausedOrMaxed, jobId)
  end
  local maxEvents = getOrSetMaxEvents(metaKey)
  -- Emit waiting event
  rcall("XADD", KEYS[9], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", jobId, "prev", "active")
end
local pttl = rcall("PTTL", KEYS[6])
if pttl > 0 then
  return pttl
else
  return 0
end
`;KB.moveJobFromActiveToWait={name:"moveJobFromActiveToWait",content:_pr,keys:9}});var XYe=m(UB=>{"use strict";Object.defineProperty(UB,"__esModule",{value:!0});UB.moveJobsToWait=void 0;var vpr=`--[[
  Move completed, failed or delayed jobs to wait.
  Note: Does not support jobs with priorities.
  Input:
    KEYS[1] base key
    KEYS[2] events stream
    KEYS[3] state key (failed, completed, delayed)
    KEYS[4] 'wait'
    KEYS[5] 'paused'
    KEYS[6] 'meta'
    KEYS[7] 'active'
    KEYS[8] 'marker'
    ARGV[1] count
    ARGV[2] timestamp
    ARGV[3] prev state
  Output:
    1  means the operation is not completed
    0  means the operation is completed
]]
local maxCount = tonumber(ARGV[1])
local timestamp = tonumber(ARGV[2])
local rcall = redis.call;
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local metaKey = KEYS[6]
local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[7], KEYS[4], KEYS[5])
local jobs = rcall('ZRANGEBYSCORE', KEYS[3], 0, timestamp, 'LIMIT', 0, maxCount)
if (#jobs > 0) then
    if ARGV[3] == "failed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")
        end
    elseif ARGV[3] == "completed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "returnvalue")
        end
    end
    local maxEvents = getOrSetMaxEvents(metaKey)
    for i, key in ipairs(jobs) do
        -- Emit waiting event
        rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event",
              "waiting", "jobId", key, "prev", ARGV[3]);
    end
    for from, to in batches(#jobs, 7000) do
        rcall("ZREM", KEYS[3], unpack(jobs, from, to))
        rcall("LPUSH", target, unpack(jobs, from, to))
    end
    addBaseMarkerIfNeeded(KEYS[8], isPausedOrMaxed)
end
maxCount = maxCount - #jobs
if (maxCount <= 0) then return 1 end
return 0
`;UB.moveJobsToWait={name:"moveJobsToWait",content:vpr,keys:8}});var ZYe=m(VB=>{"use strict";Object.defineProperty(VB,"__esModule",{value:!0});VB.moveStalledJobsToWait=void 0;var Spr=`--[[
  Move stalled jobs to wait.
    Input:
      KEYS[1] 'stalled' (SET)
      KEYS[2] 'wait',   (LIST)
      KEYS[3] 'active', (LIST)
      KEYS[4] 'stalled-check', (KEY)
      KEYS[5] 'meta', (KEY)
      KEYS[6] 'paused', (LIST)
      KEYS[7] 'marker'
      KEYS[8] 'event stream' (STREAM)
      ARGV[1]  Max stalled job count
      ARGV[2]  queue.toKey('')
      ARGV[3]  timestamp
      ARGV[4]  max check time
    Events:
      'stalled' with stalled job id.
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to move job to wait to be picked up by a waiting worker.
]]
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey,
  jobId, pushCmd)
  local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
  addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId", jobId, 'prev', 'active')
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
local stalledKey = KEYS[1]
local waitKey = KEYS[2]
local activeKey = KEYS[3]
local stalledCheckKey = KEYS[4]
local metaKey = KEYS[5]
local pausedKey = KEYS[6]
local markerKey = KEYS[7]
local eventStreamKey = KEYS[8]
local maxStalledJobCount = tonumber(ARGV[1])
local queueKeyPrefix = ARGV[2]
local timestamp = ARGV[3]
local maxCheckTime = ARGV[4]
if rcall("EXISTS", stalledCheckKey) == 1 then
    return {}
end
rcall("SET", stalledCheckKey, timestamp, "PX", maxCheckTime)
-- Trim events before emiting them to avoid trimming events emitted in this script
trimEvents(metaKey, eventStreamKey)
-- Move all stalled jobs to wait
local stalling = rcall('SMEMBERS', stalledKey)
local stalled = {}
if (#stalling > 0) then
    rcall('DEL', stalledKey)
    -- Remove from active list
    for i, jobId in ipairs(stalling) do
        -- Markers in waitlist DEPRECATED in v5: Remove in v6.
        if string.sub(jobId, 1, 2) == "0:" then
            -- If the jobId is a delay marker ID we just remove it.
            rcall("LREM", activeKey, 1, jobId)
        else
            local jobKey = queueKeyPrefix .. jobId
            -- Check that the lock is also missing, then we can handle this job as really stalled.
            if (rcall("EXISTS", jobKey .. ":lock") == 0) then
                --  Remove from the active queue.
                local removed = rcall("LREM", activeKey, 1, jobId)
                if (removed > 0) then
                    -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.
                    local stalledCount = rcall("HINCRBY", jobKey, "stc", 1)
                    -- Check if this is a repeatable job by looking at job options
                    local jobOpts = rcall("HGET", jobKey, "opts")
                    local isRepeatableJob = false
                    if jobOpts then
                        local opts = cjson.decode(jobOpts)
                        if opts and opts["repeat"] then
                            isRepeatableJob = true
                        end
                    end
                    -- Only fail job if it exceeds stall limit AND is not a repeatable job
                    if stalledCount > maxStalledJobCount and not isRepeatableJob then
                        local failedReason = "job stalled more than allowable limit"
                        rcall("HSET", jobKey, "defa", failedReason)
                    end
                    moveJobToWait(metaKey, activeKey, waitKey, pausedKey, markerKey, eventStreamKey, jobId,
                        "RPUSH")
                    -- Emit the stalled event
                    rcall("XADD", eventStreamKey, "*", "event", "stalled", "jobId", jobId)
                    table.insert(stalled, jobId)
                end
            end
        end
    end
end
-- Mark potentially stalled jobs
local active = rcall('LRANGE', activeKey, 0, -1)
if (#active > 0) then
    for from, to in batches(#active, 7000) do
        rcall('SADD', stalledKey, unpack(active, from, to))
    end
end
return stalled
`;VB.moveStalledJobsToWait={name:"moveStalledJobsToWait",content:Spr,keys:8}});var eQe=m(GB=>{"use strict";Object.defineProperty(GB,"__esModule",{value:!0});GB.moveToActive=void 0;var wpr=`--[[
  Move next job to be processed to active, lock it and fetch its data. The job
  may be delayed, in that case we need to move it to the delayed set instead.
  This operation guarantees that the worker owns the job during the lock
  expiration time. The worker is responsible of keeping the lock fresh
  so that no other worker picks this job again.
  Input:
    KEYS[1] wait key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] stream events key
    KEYS[5] stalled key
    -- Rate limiting
    KEYS[6] rate limiter key
    KEYS[7] delayed key
    -- Delayed jobs
    KEYS[8] paused key
    KEYS[9] meta key
    KEYS[10] pc priority counter
    -- Marker
    KEYS[11] marker key
    -- Arguments
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] opts
    opts - token - lock token
    opts - lockDuration
    opts - limiter
    opts - name - worker name
]]
local rcall = redis.call
local waitKey = KEYS[1]
local activeKey = KEYS[2]
local eventStreamKey = KEYS[4]
local rateLimiterKey = KEYS[6]
local delayedKey = KEYS[7]
local opts = cmsgpack.unpack(ARGV[3])
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(KEYS[9],
    activeKey, waitKey, KEYS[8])
-- Check if there are delayed jobs that we can move to wait.
local markerKey = KEYS[11]
promoteDelayedJobs(delayedKey, markerKey, target, KEYS[3], eventStreamKey, ARGV[1],
                   ARGV[2], KEYS[10], isPausedOrMaxed)
local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
local expireTime = getRateLimitTTL(maxJobs, rateLimiterKey)
-- Check if we are rate limited first.
if expireTime > 0 then return {0, 0, expireTime, 0} end
-- paused or maxed queue
if isPausedOrMaxed then return {0, 0, 0, 0} end
local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
-- no job ID, try non-blocking move from wait to active
local jobId = rcall("RPOPLPUSH", waitKey, activeKey)
-- Markers in waitlist DEPRECATED in v5: Will be completely removed in v6.
if jobId and string.sub(jobId, 1, 2) == "0:" then
    rcall("LREM", activeKey, 1, jobId)
    jobId = rcall("RPOPLPUSH", waitKey, activeKey)
end
if jobId then
    return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                   maxJobs, limiterDuration, markerKey, opts)
else
    jobId = moveJobFromPrioritizedToActive(KEYS[3], activeKey, KEYS[10])
    if jobId then
        return prepareJobForProcessing(ARGV[1], rateLimiterKey, eventStreamKey, jobId, ARGV[2],
                                       maxJobs, limiterDuration, markerKey, opts)
    end
end
-- Return the timestamp for the next delayed job if any.
local nextTimestamp = getNextDelayedTimestamp(delayedKey)
if nextTimestamp ~= nil then return {0, 0, 0, nextTimestamp} end
return {0, 0, 0, 0}
`;GB.moveToActive={name:"moveToActive",content:wpr,keys:11}});var tQe=m(HB=>{"use strict";Object.defineProperty(HB,"__esModule",{value:!0});HB.moveToDelayed=void 0;var Apr=`--[[
  Moves job from active to delayed set.
  Input:
    KEYS[1] marker key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] delayed key
    KEYS[5] job key
    KEYS[6] events stream
    KEYS[7] meta key
    KEYS[8] stalled key
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] the id of the job
    ARGV[4] queue token
    ARGV[5] delay value
    ARGV[6] skip attempt
    ARGV[7] optional job fields to update
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in active set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobKey = KEYS[5]
local metaKey = KEYS[7]
local token = ARGV[4] 
if rcall("EXISTS", jobKey) == 1 then
    local errorCode = removeLock(jobKey, KEYS[8], token, ARGV[3])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobKey, ARGV[7])
    local delayedKey = KEYS[4]
    local jobId = ARGV[3]
    local delay = tonumber(ARGV[5])
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if numRemovedElements < 1 then return -3 end
    local score, delayedTimestamp = getDelayedScore(delayedKey, ARGV[2], delay)
    if ARGV[6] == "0" then
        rcall("HINCRBY", jobKey, "atm", 1)
    end
    rcall("HSET", jobKey, "delay", ARGV[5])
    local maxEvents = getOrSetMaxEvents(metaKey)
    rcall("ZADD", delayedKey, score, jobId)
    rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
          "jobId", jobId, "delay", delayedTimestamp)
    -- Check if we need to push a marker job to wake up sleeping workers.
    local markerKey = KEYS[1]
    addDelayMarkerIfNeeded(markerKey, delayedKey)
    return 0
else
    return -1
end
`;HB.moveToDelayed={name:"moveToDelayed",content:Apr,keys:8}});var rQe=m(zB=>{"use strict";Object.defineProperty(zB,"__esModule",{value:!0});zB.moveToFinished=void 0;var Cpr=`--[[
  Move job from active to a finished status (completed o failed)
  A job can only be moved to completed if it was active.
  The job must be locked before it can be moved to a finished status,
  and the lock must be released in this script.
    Input:
      KEYS[1] wait key
      KEYS[2] active key
      KEYS[3] prioritized key
      KEYS[4] event stream key
      KEYS[5] stalled key
      -- Rate limiting
      KEYS[6] rate limiter key
      KEYS[7] delayed key
      KEYS[8] paused key
      KEYS[9] meta key
      KEYS[10] pc priority counter
      KEYS[11] completed/failed key
      KEYS[12] jobId key
      KEYS[13] metrics key
      KEYS[14] marker key
      ARGV[1]  jobId
      ARGV[2]  timestamp
      ARGV[3]  msg property returnvalue / failedReason
      ARGV[4]  return value / failed reason
      ARGV[5]  target (completed/failed)
      ARGV[6]  fetch next?
      ARGV[7]  keys prefix
      ARGV[8]  opts
      ARGV[9]  job fields to update
      opts - token - lock token
      opts - keepJobs
      opts - lockDuration - lock duration in milliseconds
      opts - attempts max attempts
      opts - maxMetricsSize
      opts - fpof - fail parent on fail
      opts - cpof - continue parent on fail
      opts - idof - ignore dependency on fail
      opts - rdof - remove dependency on fail
      opts - name - worker name
    Output:
      0 OK
      -1 Missing key.
      -2 Missing lock.
      -3 Job not in active set
      -4 Job has pending children
      -6 Lock is not owned by this client
      -9 Job has failed children
    Events:
      'completed/failed'
]]
local rcall = redis.call
--- Includes
--[[
  Functions to collect metrics based on a current and previous count of jobs.
  Granualarity is fixed at 1 minute.
]]
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function collectMetrics(metaKey, dataPointsList, maxDataPoints,
                                 timestamp)
    -- Increment current count
    local count = rcall("HINCRBY", metaKey, "count", 1) - 1
    -- Compute how many data points we need to add to the list, N.
    local prevTS = rcall("HGET", metaKey, "prevTS")
    if not prevTS then
        -- If prevTS is nil, set it to the current timestamp
        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)
        return
    end
    local N = math.min(math.floor(timestamp / 60000) - math.floor(prevTS / 60000), tonumber(maxDataPoints))
    if N > 0 then
        local delta = count - rcall("HGET", metaKey, "prevCount")
        -- If N > 1, add N-1 zeros to the list
        if N > 1 then
            local points = {}
            points[1] = delta
            for i = 2, N do
                points[i] = 0
            end
            for from, to in batches(#points, 7000) do
                rcall("LPUSH", dataPointsList, unpack(points, from, to))
            end
        else
            -- LPUSH delta to the list
            rcall("LPUSH", dataPointsList, delta)
        end
        -- LTRIM to keep list to its max size
        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)
        -- update prev count with current count
        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)
    end
end
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
--[[
  Function to get current rate limit ttl.
]]
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPrioritizedToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to recursively move from waitingChildren to failed.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized)
  if no pending dependencies.
]]
-- Includes
--[[
  Validate and move parent to a wait status (waiting, delayed or prioritized) if needed.
]]
-- Includes
--[[
  Move parent to a wait status (wait, prioritized or delayed)
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
local function moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentPausedKey = parentQueueKey .. ":paused"
    local parentActiveKey = parentQueueKey .. ":active"
    local parentMetaKey = parentQueueKey .. ":meta"
    local parentMarkerKey = parentQueueKey .. ":marker"
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
        local delayedTimestamp = tonumber(timestamp) + delay
        local score = delayedTimestamp * 0x1000
        local parentDelayedKey = parentQueueKey .. ":delayed"
        rcall("ZADD", parentDelayedKey, score, parentId)
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId, "delay",
            delayedTimestamp)
        addDelayMarkerIfNeeded(parentMarkerKey, parentDelayedKey)
    else
        if priority == 0 then
            local parentTarget, isParentPausedOrMaxed = getTargetQueueList(parentMetaKey, parentActiveKey,
                parentWaitKey, parentPausedKey)
            addJobInTargetList(parentTarget, parentMarkerKey, "RPUSH", isParentPausedOrMaxed, parentId)
        else
            local isPausedOrMaxed = isQueuePausedOrMaxed(parentMetaKey, parentActiveKey)
            addJobWithPriority(parentMarkerKey, parentQueueKey .. ":prioritized", priority, parentId,
                parentQueueKey .. ":pc", isPausedOrMaxed)
        end
        rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId, "prev",
            "waiting-children")
    end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then    
      rcall("ZREM", parentWaitingChildrenKey, parentId)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    end
  end
end
local function moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey,
  parentId, timestamp)
  local doNotHavePendingDependencies = rcall("SCARD", parentDependenciesKey) == 0
  if doNotHavePendingDependencies then
    moveParentToWaitIfNeeded(parentQueueKey, parentKey, parentId, timestamp)
  end
end
--[[
  Functions to remove jobs when removeOnFail option is provided.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
--[[
  Functions to remove jobs by max age.
]]
-- Includes
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix,
  shouldRemoveDebounceKey)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
--[[
  Functions to remove jobs by max count.
]]
-- Includes
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix, false --[[remove debounce key]])
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
local function removeJobsOnFail(queueKeyPrefix, failedKey, jobId, opts, timestamp)
  local removeOnFailType = type(opts["removeOnFail"])
  if removeOnFailType == "number" then
    removeJobsByMaxCount(opts["removeOnFail"],
                        failedKey, queueKeyPrefix)
  elseif removeOnFailType == "boolean" then
    if opts["removeOnFail"] then
      removeJob(jobId, false, queueKeyPrefix,
                false --[[remove debounce key]])
      rcall("ZREM", failedKey, jobId)
    end
  elseif removeOnFailType ~= "nil" then
    local maxAge = opts["removeOnFail"]["age"]
    local maxCount = opts["removeOnFail"]["count"]
    if maxAge ~= nil then
      removeJobsByMaxAge(timestamp, maxAge,
                        failedKey, queueKeyPrefix)
    end
    if maxCount ~= nil and maxCount > 0 then
      removeJobsByMaxCount(maxCount, failedKey,
                            queueKeyPrefix)
    end
  end 
end
local moveParentToFailedIfNeeded = function (parentQueueKey, parentKey, parentId, jobIdKey, timestamp)
  if rcall("EXISTS", parentKey) == 1 then
    local parentWaitingChildrenKey = parentQueueKey .. ":waiting-children"
    local parentDelayedKey = parentQueueKey .. ":delayed"
    local parentPrioritizedKey = parentQueueKey .. ":prioritized"
    local parentWaitingChildrenOrDelayedKey
    local prevState
    if rcall("ZSCORE", parentWaitingChildrenKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentWaitingChildrenKey
      prevState = "waiting-children"
    elseif rcall("ZSCORE", parentDelayedKey, parentId) then
      parentWaitingChildrenOrDelayedKey = parentDelayedKey
      prevState = "delayed"
      rcall("HSET", parentKey, "delay", 0)
    end
    if parentWaitingChildrenOrDelayedKey then
      rcall("ZREM", parentWaitingChildrenOrDelayedKey, parentId)
      local parentQueuePrefix = parentQueueKey .. ":"
      local parentFailedKey = parentQueueKey .. ":failed"
      local deferredFailure = "child " .. jobIdKey .. " failed"
      rcall("HSET", parentKey, "defa", deferredFailure)
      moveParentToWait(parentQueueKey, parentKey, parentId, timestamp)
    else
      if not rcall("ZSCORE", parentQueueKey .. ":failed", parentId) then
        local deferredFailure = "child " .. jobIdKey .. " failed"
        rcall("HSET", parentKey, "defa", deferredFailure)
      end
    end
  end
end
local moveChildFromDependenciesIfNeeded = function (rawParentData, childKey, failedReason, timestamp)
  if rawParentData then
    local parentData = cjson.decode(rawParentData)
    local parentKey = parentData['queueKey'] .. ':' .. parentData['id']
    local parentDependenciesChildrenKey = parentKey .. ":dependencies"
    if parentData['fpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentUnsuccesssfulChildrenKey = parentKey .. ":unsuccessful"
        rcall("ZADD", parentUnsuccesssfulChildrenKey, timestamp, childKey)
        moveParentToFailedIfNeeded(
          parentData['queueKey'],
          parentKey,
          parentData['id'],
          childKey,
          timestamp
        )
      end
    elseif parentData['cpof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        local parentFailedChildrenKey = parentKey .. ":failed"
        rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        moveParentToWaitIfNeeded(parentData['queueKey'], parentKey, parentData['id'], timestamp)
      end
    elseif parentData['idof'] or parentData['rdof'] then
      if rcall("SREM", parentDependenciesChildrenKey, childKey) == 1 then
        moveParentToWaitIfNoPendingDependencies(parentData['queueKey'], parentDependenciesChildrenKey,
          parentKey, parentData['id'], timestamp)
        if parentData['idof'] then
          local parentFailedChildrenKey = parentKey .. ":failed"
          rcall("HSET", parentFailedChildrenKey, childKey, failedReason)
        end
      end
    end
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
local function prepareJobForProcessing(keyPrefix, rateLimiterKey, eventStreamKey,
    jobId, processedOn, maxJobs, limiterDuration, markerKey, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  -- get a lock
  if opts['token'] ~= "0" then
    local lockKey = jobKey .. ':lock'
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  local optionalValues = {}
  if opts['name'] then
    -- Set "processedBy" field to the worker name
    table.insert(optionalValues, "pb")
    table.insert(optionalValues, opts['name'])
  end
  rcall("XADD", eventStreamKey, "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HMSET", jobKey, "processedOn", processedOn, unpack(optionalValues))
  rcall("HINCRBY", jobKey, "ats", 1)
  addBaseMarkerIfNeeded(markerKey, false)
  -- rate limit delay must be 0 in this case to prevent adding more delay
  -- when job that is moved to active needs to be processed
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
--[[
  Function to remove deduplication key if needed
  when a job is moved to completed or failed states.
]]
local function removeDeduplicationKeyIfNeededOnFinalization(prefixKey,
  deduplicationId, jobId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local pttl = rcall("PTTL", deduplicationKey)
    if pttl == 0 then
      return rcall("DEL", deduplicationKey)
    end
    if pttl == -1 then
      local currentJobId = rcall('GET', deduplicationKey)
      if currentJobId and currentJobId == jobId then
        return rcall("DEL", deduplicationKey)
      end
    end
  end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to trim events, default 10000.
]]
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = getOrSetMaxEvents(metaKey)
  if maxEvents then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNoPendingDependencies(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local jobIdKey = KEYS[12]
if rcall("EXISTS", jobIdKey) == 1 then -- Make sure job exists
    -- Make sure it does not have pending dependencies
    -- It must happen before removing lock
    if ARGV[5] == "completed" then
        if rcall("SCARD", jobIdKey .. ":dependencies") ~= 0 then
            return -4
        end
        if rcall("ZCARD", jobIdKey .. ":unsuccessful") ~= 0 then
            return -9
        end
    end
    local opts = cmsgpack.unpack(ARGV[8])
    local token = opts['token']
    local errorCode = removeLock(jobIdKey, KEYS[5], token, ARGV[1])
    if errorCode < 0 then
        return errorCode
    end
    updateJobFields(jobIdKey, ARGV[9]);
    local attempts = opts['attempts']
    local maxMetricsSize = opts['maxMetricsSize']
    local maxCount = opts['keepJobs']['count']
    local maxAge = opts['keepJobs']['age']
    local jobAttributes = rcall("HMGET", jobIdKey, "parentKey", "parent", "deid")
    local parentKey = jobAttributes[1] or ""
    local parentId = ""
    local parentQueueKey = ""
    if jobAttributes[2] then -- TODO: need to revisit this logic if it's still needed
        local jsonDecodedParent = cjson.decode(jobAttributes[2])
        parentId = jsonDecodedParent['id']
        parentQueueKey = jsonDecodedParent['queueKey']
    end
    local jobId = ARGV[1]
    local timestamp = ARGV[2]
    -- Remove from active list (if not active we shall return error)
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if (numRemovedElements < 1) then
        return -3
    end
    local eventStreamKey = KEYS[4]
    local metaKey = KEYS[9]
    -- Trim events before emiting them to avoid trimming events emitted in this script
    trimEvents(metaKey, eventStreamKey)
    local prefix = ARGV[7]
    removeDeduplicationKeyIfNeededOnFinalization(prefix, jobAttributes[3], jobId)
    -- If job has a parent we need to
    -- 1) remove this job id from parents dependencies
    -- 2) move the job Id to parent "processed" set
    -- 3) push the results into parent "results" list
    -- 4) if parent's dependencies is empty, then move parent to "wait/paused". Note it may be a different queue!.
    if parentId == "" and parentKey ~= "" then
        parentId = getJobIdFromKey(parentKey)
        parentQueueKey = getJobKeyPrefix(parentKey, ":" .. parentId)
    end
    if parentId ~= "" then
        if ARGV[5] == "completed" then
            local dependenciesSet = parentKey .. ":dependencies"
            if rcall("SREM", dependenciesSet, jobIdKey) == 1 then
                updateParentDepsIfNeeded(parentKey, parentQueueKey, dependenciesSet, parentId, jobIdKey, ARGV[4],
                    timestamp)
            end
        else
            moveChildFromDependenciesIfNeeded(jobAttributes[2], jobIdKey, ARGV[4], timestamp)
        end
    end
    local attemptsMade = rcall("HINCRBY", jobIdKey, "atm", 1)
    -- Remove job?
    if maxCount ~= 0 then
        local targetSet = KEYS[11]
        -- Add to complete/failed set
        rcall("ZADD", targetSet, timestamp, jobId)
        rcall("HSET", jobIdKey, ARGV[3], ARGV[4], "finishedOn", timestamp)
        -- "returnvalue" / "failedReason" and "finishedOn"
        if ARGV[5] == "failed" then
            rcall("HDEL", jobIdKey, "defa")
        end
        -- Remove old jobs?
        if maxAge ~= nil then
            removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
        end
        if maxCount ~= nil and maxCount > 0 then
            removeJobsByMaxCount(maxCount, targetSet, prefix)
        end
    else
        removeJobKeys(jobIdKey)
        if parentKey ~= "" then
            -- TODO: when a child is removed when finished, result or failure in parent
            -- must not be deleted, those value references should be deleted when the parent
            -- is deleted
            removeParentDependencyKey(jobIdKey, false, parentKey, jobAttributes[3])
        end
    end
    rcall("XADD", eventStreamKey, "*", "event", ARGV[5], "jobId", jobId, ARGV[3], ARGV[4], "prev", "active")
    if ARGV[5] == "failed" then
        if tonumber(attemptsMade) >= tonumber(attempts) then
            rcall("XADD", eventStreamKey, "*", "event", "retries-exhausted", "jobId", jobId, "attemptsMade",
                attemptsMade)
        end
    end
    -- Collect metrics
    if maxMetricsSize ~= "" then
        collectMetrics(KEYS[13], KEYS[13] .. ':data', maxMetricsSize, timestamp)
    end
    -- Try to get next job to avoid an extra roundtrip if the queue is not closing,
    -- and not rate limited.
    if (ARGV[6] == "1") then
        local target, isPausedOrMaxed, rateLimitMax, rateLimitDuration = getTargetQueueList(metaKey, KEYS[2],
            KEYS[1], KEYS[8])
        local markerKey = KEYS[14]
        -- Check if there are delayed jobs that can be promoted
        promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[3], eventStreamKey, prefix, timestamp, KEYS[10],
            isPausedOrMaxed)
        local maxJobs = tonumber(rateLimitMax or (opts['limiter'] and opts['limiter']['max']))
        -- Check if we are rate limited first.
        local expireTime = getRateLimitTTL(maxJobs, KEYS[6])
        if expireTime > 0 then
            return {0, 0, expireTime, 0}
        end
        -- paused or maxed queue
        if isPausedOrMaxed then
            return {0, 0, 0, 0}
        end
        local limiterDuration = (opts['limiter'] and opts['limiter']['duration']) or rateLimitDuration
        jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])
        if jobId then
            -- Markers in waitlist DEPRECATED in v5: Remove in v6.
            if string.sub(jobId, 1, 2) == "0:" then
                rcall("LREM", KEYS[2], 1, jobId)
                -- If jobId is special ID 0:delay (delay greater than 0), then there is no job to process
                -- but if ID is 0:0, then there is at least 1 prioritized job to process
                if jobId == "0:0" then
                    jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
                    return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                        limiterDuration, markerKey, opts)
                end
            else
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        else
            jobId = moveJobFromPrioritizedToActive(KEYS[3], KEYS[2], KEYS[10])
            if jobId then
                return prepareJobForProcessing(prefix, KEYS[6], eventStreamKey, jobId, timestamp, maxJobs,
                    limiterDuration, markerKey, opts)
            end
        end
        -- Return the timestamp for the next delayed job if any.
        local nextTimestamp = getNextDelayedTimestamp(KEYS[7])
        if nextTimestamp ~= nil then
            -- The result is guaranteed to be positive, since the
            -- ZRANGEBYSCORE command would have return a job otherwise.
            return {0, 0, 0, nextTimestamp}
        end
    end
    local waitLen = rcall("LLEN", KEYS[1])
    if waitLen == 0 then
        local activeLen = rcall("LLEN", KEYS[2])
        if activeLen == 0 then
            local prioritizedLen = rcall("ZCARD", KEYS[3])
            if prioritizedLen == 0 then
                rcall("XADD", eventStreamKey, "*", "event", "drained")
            end
        end
    end
    return 0
else
    return -1
end
`;zB.moveToFinished={name:"moveToFinished",content:Cpr,keys:14}});var nQe=m(WB=>{"use strict";Object.defineProperty(WB,"__esModule",{value:!0});WB.moveToWaitingChildren=void 0;var Tpr=`--[[
  Moves job from active to waiting children set.
  Input:
    KEYS[1] active key
    KEYS[2] wait-children key
    KEYS[3] job key
    KEYS[4] job dependencies key
    KEYS[5] job unsuccessful key
    KEYS[6] stalled key
    KEYS[7] events key
    ARGV[1] token
    ARGV[2] child key
    ARGV[3] timestamp
    ARGV[4] jobId
    ARGV[5] prefix
  Output:
    0 - OK
    1 - There are not pending dependencies.
   -1 - Missing job.
   -2 - Missing lock
   -3 - Job not in active set
   -9 - Job has failed children
]]
local rcall = redis.call
local activeKey = KEYS[1]
local waitingChildrenKey = KEYS[2]
local jobKey = KEYS[3]
local jobDependenciesKey = KEYS[4]
local jobUnsuccessfulKey = KEYS[5]
local stalledKey = KEYS[6]
local eventStreamKey = KEYS[7]
local token = ARGV[1]
local timestamp = ARGV[3]
local jobId = ARGV[4]
--- Includes
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
local function removeJobFromActive(activeKey, stalledKey, jobKey, jobId,
    token)
  local errorCode = removeLock(jobKey, stalledKey, token, jobId)
  if errorCode < 0 then
    return errorCode
  end
  local numRemovedElements = rcall("LREM", activeKey, -1, jobId)
  if numRemovedElements < 1 then
    return -3
  end
  return 0
end
local function moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
    jobKey, jobId, timestamp, token)
  local errorCode = removeJobFromActive(activeKey, stalledKey, jobKey, jobId, token)
  if errorCode < 0 then
    return errorCode
  end
  local score = tonumber(timestamp)
  rcall("ZADD", waitingChildrenKey, score, jobId)
  rcall("XADD", eventStreamKey, "*", "event", "waiting-children", "jobId", jobId, 'prev', 'active')
  return 0
end
if rcall("EXISTS", jobKey) == 1 then
  if rcall("ZCARD", jobUnsuccessfulKey) ~= 0 then
    return -9
  else
    if ARGV[2] ~= "" then
      if rcall("SISMEMBER", jobDependenciesKey, ARGV[2]) ~= 0 then
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    else
      if rcall("SCARD", jobDependenciesKey) ~= 0 then 
        return moveToWaitingChildren(activeKey, waitingChildrenKey, stalledKey, eventStreamKey,
          jobKey, jobId, timestamp, token)
      end
      return 1
    end    
  end
end
return -1
`;WB.moveToWaitingChildren={name:"moveToWaitingChildren",content:Tpr,keys:7}});var iQe=m(JB=>{"use strict";Object.defineProperty(JB,"__esModule",{value:!0});JB.obliterate=void 0;var Opr=`--[[
  Completely obliterates a queue and all of its contents
  This command completely destroys a queue including all of its jobs, current or past 
  leaving no trace of its existence. Since this script needs to iterate to find all the job
  keys, consider that this call may be slow for very large queues.
  The queue needs to be "paused" or it will return an error
  If the queue has currently active jobs then the script by default will return error,
  however this behaviour can be overrided using the 'force' option.
  Input:
    KEYS[1] meta
    KEYS[2] base
    ARGV[1] count
    ARGV[2] force
]]
local maxCount = tonumber(ARGV[1])
local baseKey = KEYS[2]
local rcall = redis.call
-- Includes
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local function removeJob(jobId, hard, baseKey, shouldRemoveDeduplicationKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  if shouldRemoveDeduplicationKey then
    local deduplicationId = rcall("HGET", jobKey, "deid")
    removeDeduplicationKeyIfNeededOnRemoval(baseKey, jobId, deduplicationId)
  end
  removeJobKeys(jobKey)
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey, true --[[remove debounce key]])
  end
  return max - #keys
end
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to filter out jobs to ignore from a table.
]]
local function filterOutJobsToIgnore(jobs, jobsToIgnore)
  local filteredJobs = {}
  for i = 1, #jobs do
    if not jobsToIgnore[jobs[i]] then
      table.insert(filteredJobs, jobs[i])
    end
  end
  return filteredJobs
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getListItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max, jobsToIgnore)
  local jobs = getZSetItems(keyName, max)
  if jobsToIgnore then
    jobs = filterOutJobsToIgnore(jobs, jobsToIgnore)
  end
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
local function removeLockKeys(keys)
  for i, key in ipairs(keys) do
    rcall("DEL", baseKey .. key .. ':lock')
  end
end
-- 1) Check if paused, if not return with error.
if rcall("HEXISTS", KEYS[1], "paused") ~= 1 then
  return -1 -- Error, NotPaused
end
-- 2) Check if there are active jobs, if there are and not "force" return error.
local activeKey = baseKey .. 'active'
local activeJobs = getListItems(activeKey, maxCount)
if (#activeJobs > 0) then
  if(ARGV[2] == "") then 
    return -2 -- Error, ExistActiveJobs
  end
end
removeLockKeys(activeJobs)
maxCount = removeJobs(activeJobs, true, baseKey, maxCount)
rcall("LTRIM", activeKey, #activeJobs, -1)
if(maxCount <= 0) then
  return 1
end
local delayedKey = baseKey .. 'delayed'
maxCount = removeZSetJobs(delayedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local repeatKey = baseKey .. 'repeat'
local repeatJobsIds = getZSetItems(repeatKey, maxCount)
for i, key in ipairs(repeatJobsIds) do
  local jobKey = repeatKey .. ":" .. key
  rcall("DEL", jobKey)
end
if(#repeatJobsIds > 0) then
  for from, to in batches(#repeatJobsIds, 7000) do
    rcall("ZREM", repeatKey, unpack(repeatJobsIds, from, to))
  end
end
maxCount = maxCount - #repeatJobsIds
if(maxCount <= 0) then
  return 1
end
local completedKey = baseKey .. 'completed'
maxCount = removeZSetJobs(completedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local waitKey = baseKey .. 'paused'
maxCount = removeListJobs(waitKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local prioritizedKey = baseKey .. 'prioritized'
maxCount = removeZSetJobs(prioritizedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local failedKey = baseKey .. 'failed'
maxCount = removeZSetJobs(failedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
if(maxCount > 0) then
  rcall("DEL",
    baseKey .. 'events',
    baseKey .. 'delay', 
    baseKey .. 'stalled-check',
    baseKey .. 'stalled',
    baseKey .. 'id',
    baseKey .. 'pc',
    baseKey .. 'meta',
    baseKey .. 'metrics:completed',
    baseKey .. 'metrics:completed:data',
    baseKey .. 'metrics:failed',
    baseKey .. 'metrics:failed:data')
  return 0
else
  return 1
end
`;JB.obliterate={name:"obliterate",content:Opr,keys:2}});var sQe=m(YB=>{"use strict";Object.defineProperty(YB,"__esModule",{value:!0});YB.paginate=void 0;var xpr=`--[[
    Paginate a set or hash
    Input:
      KEYS[1] key pointing to the set or hash to be paginated.
      ARGV[1]  page start offset
      ARGV[2]  page end offset (-1 for all the elements)
      ARGV[3]  cursor
      ARGV[4]  offset
      ARGV[5]  max iterations
      ARGV[6]  fetch jobs?
    Output:
      [cursor, offset, items, numItems]
]]
local rcall = redis.call
-- Includes
--[[
  Function to achieve pagination for a set or hash.
  This function simulates pagination in the most efficient way possible
  for a set using sscan or hscan.
  The main limitation is that sets are not order preserving, so the
  pagination is not stable. This means that if the set is modified
  between pages, the same element may appear in different pages.
]] -- Maximum number of elements to be returned by sscan per iteration.
local maxCount = 100
-- Finds the cursor, and returns the first elements available for the requested page.
local function findPage(key, command, pageStart, pageSize, cursor, offset,
                        maxIterations, fetchJobs)
    local items = {}
    local jobs = {}
    local iterations = 0
    repeat
        -- Iterate over the set using sscan/hscan.
        local result = rcall(command, key, cursor, "COUNT", maxCount)
        cursor = result[1]
        local members = result[2]
        local step = 1
        if command == "HSCAN" then
            step = 2
        end
        if #members == 0 then
            -- If the result is empty, we can return the result.
            return cursor, offset, items, jobs
        end
        local chunkStart = offset
        local chunkEnd = offset + #members / step
        local pageEnd = pageStart + pageSize
        if chunkEnd < pageStart then
            -- If the chunk is before the page, we can skip it.
            offset = chunkEnd
        elseif chunkStart > pageEnd then
            -- If the chunk is after the page, we can return the result.
            return cursor, offset, items, jobs
        else
            -- If the chunk is overlapping the page, we need to add the elements to the result.
            for i = 1, #members, step do
                if offset >= pageEnd then
                    return cursor, offset, items, jobs
                end
                if offset >= pageStart then
                    local index = #items + 1
                    if fetchJobs ~= nil then
                        jobs[#jobs+1] = rcall("HGETALL", members[i])
                    end
                    if step == 2 then
                        items[index] = {members[i], members[i + 1]}
                    else
                        items[index] = members[i]
                    end
                end
                offset = offset + 1
            end
        end
        iterations = iterations + 1
    until cursor == "0" or iterations >= maxIterations
    return cursor, offset, items, jobs
end
local key = KEYS[1]
local scanCommand = "SSCAN"
local countCommand = "SCARD"
local type = rcall("TYPE", key)["ok"]
if type == "none" then
    return {0, 0, {}, 0}
elseif type == "hash" then
    scanCommand = "HSCAN"
    countCommand = "HLEN"
elseif type ~= "set" then
    return
        redis.error_reply("Pagination is only supported for sets and hashes.")
end
local numItems = rcall(countCommand, key)
local startOffset = tonumber(ARGV[1])
local endOffset = tonumber(ARGV[2])
if endOffset == -1 then 
  endOffset = numItems
end
local pageSize = (endOffset - startOffset) + 1
local cursor, offset, items, jobs = findPage(key, scanCommand, startOffset,
                                       pageSize, ARGV[3], tonumber(ARGV[4]),
                                       tonumber(ARGV[5]), ARGV[6])
return {cursor, offset, items, numItems, jobs}
`;YB.paginate={name:"paginate",content:xpr,keys:1}});var oQe=m(QB=>{"use strict";Object.defineProperty(QB,"__esModule",{value:!0});QB.pause=void 0;var Ipr=`--[[
  Pauses or resumes a queue globably.
  Input:
    KEYS[1] 'wait' or 'paused''
    KEYS[2] 'paused' or 'wait'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] events stream key
    KEYS[6] 'delayed'
    KEYS|7] 'marker'
    ARGV[1] 'paused' or 'resumed'
  Event:
    publish paused or resumed event.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
local markerKey = KEYS[7]
local hasJobs = rcall("EXISTS", KEYS[1]) == 1
--TODO: check this logic to be reused when changing a delay
if hasJobs then rcall("RENAME", KEYS[1], KEYS[2]) end
if ARGV[1] == "paused" then
    rcall("HSET", KEYS[3], "paused", 1)
    rcall("DEL", markerKey)
else
    rcall("HDEL", KEYS[3], "paused")
    if hasJobs or rcall("ZCARD", KEYS[4]) > 0 then
        -- Add marker if there are waiting or priority jobs
        rcall("ZADD", markerKey, 0, "0")
    else
        addDelayMarkerIfNeeded(markerKey, KEYS[6])
    end
end
rcall("XADD", KEYS[5], "*", "event", ARGV[1]);
`;QB.pause={name:"pause",content:Ipr,keys:7}});var aQe=m(XB=>{"use strict";Object.defineProperty(XB,"__esModule",{value:!0});XB.promote=void 0;var Rpr=`--[[
  Promotes a job that is currently "delayed" to the "waiting" state
    Input:
      KEYS[1] 'delayed'
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] 'meta'
      KEYS[5] 'prioritized'
      KEYS[6] 'active'
      KEYS[7] 'pc' priority counter
      KEYS[8] 'event stream'
      KEYS[9] 'marker'
      ARGV[1]  queue.toKey('')
      ARGV[2]  jobId
    Output:
       0 - OK
      -3 - Job not in delayed zset.
    Events:
      'waiting'
]]
local rcall = redis.call
local jobId = ARGV[2]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
if rcall("ZREM", KEYS[1], jobId) == 1 then
    local jobKey = ARGV[1] .. jobId
    local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
    local metaKey = KEYS[4]
    local markerKey = KEYS[9]
    -- Remove delayed "marker" from the wait list if there is any.
    -- Since we are adding a job we do not need the marker anymore.
    -- Markers in waitlist DEPRECATED in v5: Remove in v6.
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, KEYS[6], KEYS[2], KEYS[3])
    local marker = rcall("LINDEX", target, 0)
    if marker and string.sub(marker, 1, 2) == "0:" then rcall("LPOP", target) end
    if priority == 0 then
        -- LIFO or FIFO
        addJobInTargetList(target, markerKey, "LPUSH", isPausedOrMaxed, jobId)
    else
        addJobWithPriority(markerKey, KEYS[5], priority, jobId, KEYS[7], isPausedOrMaxed)
    end
    rcall("XADD", KEYS[8], "*", "event", "waiting", "jobId", jobId, "prev",
          "delayed");
    rcall("HSET", jobKey, "delay", 0)
    return 0
else
    return -3
end
`;XB.promote={name:"promote",content:Rpr,keys:9}});var uQe=m(ZB=>{"use strict";Object.defineProperty(ZB,"__esModule",{value:!0});ZB.releaseLock=void 0;var Dpr=`--[[
  Release lock
    Input:
      KEYS[1] 'lock',
      ARGV[1]  token
      ARGV[2]  lock duration in milliseconds
    Output:
      "OK" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  return rcall("DEL", KEYS[1])
else
  return 0
end
`;ZB.releaseLock={name:"releaseLock",content:Dpr,keys:1}});var cQe=m(eq=>{"use strict";Object.defineProperty(eq,"__esModule",{value:!0});eq.removeChildDependency=void 0;var kpr=`--[[
  Break parent-child dependency by removing
  child reference from parent
  Input:
    KEYS[1] 'key' prefix,
    ARGV[1] job key
    ARGV[2] parent key
    Output:
       0  - OK
       1  - There is not relationship.
      -1  - Missing job key
      -5  - Missing parent key
]]
local rcall = redis.call
local jobKey = ARGV[1]
local parentKey = ARGV[2]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
if rcall("EXISTS", jobKey) ~= 1 then return -1 end
if rcall("EXISTS", parentKey) ~= 1 then return -5 end
if removeParentDependencyKey(jobKey, false, parentKey, KEYS[1], nil) then
  rcall("HDEL", jobKey, "parentKey", "parent")
  return 0
else
  return 1
end`;eq.removeChildDependency={name:"removeChildDependency",content:kpr,keys:1}});var lQe=m(tq=>{"use strict";Object.defineProperty(tq,"__esModule",{value:!0});tq.removeDeduplicationKey=void 0;var Mpr=`--[[
  Remove deduplication key if it matches the job id.
  Input:
    KEYS[1] deduplication key
    ARGV[1] job id
  Output:
    0 - false
    1 - true
]]
local rcall = redis.call
local deduplicationKey = KEYS[1]
local jobId = ARGV[1]
local currentJobId = rcall('GET', deduplicationKey)
if currentJobId and currentJobId == jobId then
  return rcall("DEL", deduplicationKey)
end
return 0
`;tq.removeDeduplicationKey={name:"removeDeduplicationKey",content:Mpr,keys:1}});var dQe=m(rq=>{"use strict";Object.defineProperty(rq,"__esModule",{value:!0});rq.removeJob=void 0;var Ppr=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] repeat key
      ARGV[1] jobId
      ARGV[2] remove children
      ARGV[3] queue prefix
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local jobId = ARGV[1]
local shouldRemoveChildren = ARGV[2]
local prefix = ARGV[3]
local jobKey = KEYS[1]
local repeatKey = KEYS[2]
if isJobSchedulerJob(jobId, jobKey, repeatKey) then
    return -8
end
if not isLocked(prefix, jobId, shouldRemoveChildren) then
    local options = {
        removeChildren = shouldRemoveChildren == "1",
        ignoreProcessed = false,
        ignoreLocked = false
    }
    removeJobWithChildren(prefix, jobId, nil, options)
    return 1
end
return 0
`;rq.removeJob={name:"removeJob",content:Ppr,keys:2}});var pQe=m(nq=>{"use strict";Object.defineProperty(nq,"__esModule",{value:!0});nq.removeJobScheduler=void 0;var Npr=`--[[
  Removes a job scheduler and its next scheduled job.
  Input:
    KEYS[1] job schedulers key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] job scheduler id
    ARGV[2] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
local jobSchedulerId = ARGV[1]
local prefix = ARGV[2]
local millis = rcall("ZSCORE", KEYS[1], jobSchedulerId)
if millis then
  -- Delete next programmed job.
  local delayedJobId = "repeat:" .. jobSchedulerId .. ":" .. millis
  if(rcall("ZREM", KEYS[2], delayedJobId) == 1) then
    removeJobKeys(prefix .. delayedJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", delayedJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], jobSchedulerId) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. jobSchedulerId)
  return 0
end
return 1
`;nq.removeJobScheduler={name:"removeJobScheduler",content:Npr,keys:3}});var fQe=m(iq=>{"use strict";Object.defineProperty(iq,"__esModule",{value:!0});iq.removeRepeatable=void 0;var Fpr=`--[[
  Removes a repeatable job
  Input:
    KEYS[1] repeat jobs key
    KEYS[2] delayed jobs key
    KEYS[3] events key
    ARGV[1] old repeat job id
    ARGV[2] options concat
    ARGV[3] repeat job key
    ARGV[4] prefix key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
local millis = rcall("ZSCORE", KEYS[1], ARGV[2])
-- Includes
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
-- legacy removal TODO: remove in next breaking change
if millis then
  -- Delete next programmed job.
  local repeatJobId = ARGV[1] .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed");
  end
end
if(rcall("ZREM", KEYS[1], ARGV[2]) == 1) then
  return 0
end
-- new removal
millis = rcall("ZSCORE", KEYS[1], ARGV[3])
if millis then
  -- Delete next programmed job.
  local repeatJobId = "repeat:" .. ARGV[3] .. ":" .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    removeJobKeys(ARGV[4] .. repeatJobId)
    rcall("XADD", KEYS[3], "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed")
  end
end
if(rcall("ZREM", KEYS[1], ARGV[3]) == 1) then
  rcall("DEL", KEYS[1] .. ":" .. ARGV[3])
  return 0
end
return 1
`;iq.removeRepeatable={name:"removeRepeatable",content:Fpr,keys:3}});var hQe=m(sq=>{"use strict";Object.defineProperty(sq,"__esModule",{value:!0});sq.removeUnprocessedChildren=void 0;var Bpr=`--[[
    Remove a job from all the statuses it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] jobKey
      KEYS[2] meta key
      ARGV[1] prefix
      ARGV[2] jobId
    Events:
      'removed' for every children removed
]]
-- Includes
--[[
    Remove a job from all the statuses it may be in as well as all its data,
    including its children. Active children can be ignored.
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check if the job belongs to a job scheduler and
  current delayed job matches with jobId
]]
local function isJobSchedulerJob(jobId, jobKey, jobSchedulersKey)
  local repeatJobKey = rcall("HGET", jobKey, "rjk")
  if repeatJobKey  then
    local prevMillis = rcall("ZSCORE", jobSchedulersKey, repeatJobKey)
    if prevMillis then
      local currentDelayedJobId = "repeat:" .. repeatJobKey .. ":" .. prevMillis
      return jobId == currentDelayedJobId
    end
  end
  return false
end
--[[
  Function to remove deduplication key if needed
  when a job is being removed.
]]
local function removeDeduplicationKeyIfNeededOnRemoval(prefixKey,
  jobId, deduplicationId)
  if deduplicationId then
    local deduplicationKey = prefixKey .. "de:" .. deduplicationId
    local currentJobId = rcall('GET', deduplicationKey)
    if currentJobId and currentJobId == jobId then
      return rcall("DEL", deduplicationKey)
    end
  end
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Function to remove job keys.
]]
local function removeJobKeys(jobKey)
  return rcall("DEL", jobKey, jobKey .. ':logs', jobKey .. ':dependencies',
    jobKey .. ':processed', jobKey .. ':failed', jobKey .. ':unsuccessful')
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local function _moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget, isPausedOrMaxed = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "active",
    parentPrefix .. "wait", parentPrefix .. "paused")
  addJobInTargetList(parentTarget, parentPrefix .. "marker", "RPUSH", isPausedOrMaxed, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey, debounceId)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then -- remove parent in same queue
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey, nil)
              removeJobKeys(parentKey)
              if debounceId then
                rcall("DEL", parentPrefix .. "de:" .. debounceId)
              end
            else
              _moveParentToWait(parentPrefix, parentId)
            end
          else
            _moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
      return true
    end
  else
    local parentAttributes = rcall("HMGET", jobKey, "parentKey", "deid")
    local missedParentKey = parentAttributes[1]
    if( (type(missedParentKey) == "string") and missedParentKey ~= ""
      and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey, nil)
                removeJobKeys(missedParentKey)
                if parentAttributes[2] then
                  rcall("DEL", parentPrefix .. "de:" .. parentAttributes[2])
                end
              else
                _moveParentToWait(parentPrefix, parentId)
              end
            else
              _moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
        return true
      end
    end
  end
  return false
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
local removeJobChildren
local removeJobWithChildren
removeJobChildren = function(prefix, jobKey, options)
    -- Check if this job has children
    -- If so, we are going to try to remove the children recursively in a depth-first way
    -- because if some job is locked, we must exit with an error.
    if not options.ignoreProcessed then
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if #processed > 0 then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local failed = rcall("HGETALL", jobKey .. ":failed")
        if #failed > 0 then
            for i = 1, #failed, 2 do
                local childJobId = getJobIdFromKey(failed[i])
                local childJobPrefix = getJobKeyPrefix(failed[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
        local unsuccessful = rcall("ZRANGE", jobKey .. ":unsuccessful", 0, -1)
        if #unsuccessful > 0 then
            for i = 1, #unsuccessful, 1 do
                local childJobId = getJobIdFromKey(unsuccessful[i])
                local childJobPrefix = getJobKeyPrefix(unsuccessful[i], childJobId)
                removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
            end
        end
    end
    local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
    if #dependencies > 0 then
        for i, childJobKey in ipairs(dependencies) do
            local childJobId = getJobIdFromKey(childJobKey)
            local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
            removeJobWithChildren(childJobPrefix, childJobId, jobKey, options)
        end
    end
end
removeJobWithChildren = function(prefix, jobId, parentKey, options)
    local jobKey = prefix .. jobId
    if options.ignoreLocked then
        if isLocked(prefix, jobId) then
            return
        end
    end
    -- Check if job is in the failed zset
    local failedSet = prefix .. "failed"
    if not (options.ignoreProcessed and rcall("ZSCORE", failedSet, jobId)) then
        removeParentDependencyKey(jobKey, false, parentKey, nil)
        if options.removeChildren then
            removeJobChildren(prefix, jobKey, options)
        end
        local prev = removeJobFromAnyState(prefix, jobId)
        local deduplicationId = rcall("HGET", jobKey, "deid")
        removeDeduplicationKeyIfNeededOnRemoval(prefix, jobId, deduplicationId)
        if removeJobKeys(jobKey) > 0 then
            local metaKey = prefix .. "meta"
            local maxEvents = getOrSetMaxEvents(metaKey)
            rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
                "jobId", jobId, "prev", prev)
        end
    end
end
local prefix = ARGV[1]
local jobId = ARGV[2]
local jobKey = KEYS[1]
local metaKey = KEYS[2]
local options = {
  removeChildren = "1",
  ignoreProcessed = true,
  ignoreLocked = true
}
removeJobChildren(prefix, jobKey, options) 
`;sq.removeUnprocessedChildren={name:"removeUnprocessedChildren",content:Bpr,keys:2}});var mQe=m(oq=>{"use strict";Object.defineProperty(oq,"__esModule",{value:!0});oq.reprocessJob=void 0;var qpr=`--[[
  Attempts to reprocess a job
  Input:
    KEYS[1] job key
    KEYS[2] events stream
    KEYS[3] job state
    KEYS[4] wait key
    KEYS[5] meta
    KEYS[6] paused key
    KEYS[7] active key
    KEYS[8] marker key
    ARGV[1] job.id
    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'
    ARGV[3] propVal - failedReason/returnvalue
    ARGV[4] prev state - failed/completed
    ARGV[5] reset attemptsMade - "1" or "0"
    ARGV[6] reset attemptsStarted - "1" or "0"
  Output:
     1 means the operation was a success
    -1 means the job does not exist
    -3 means the job was not found in the expected set.
]]
local rcall = redis.call;
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
local jobKey = KEYS[1]
if rcall("EXISTS", jobKey) == 1 then
  local jobId = ARGV[1]
  if (rcall("ZREM", KEYS[3], jobId) == 1) then
    local attributesToRemove = {}
    if ARGV[5] == "1" then
      table.insert(attributesToRemove, "atm")
    end
    if ARGV[6] == "1" then
      table.insert(attributesToRemove, "ats")
    end
    rcall("HDEL", jobKey, "finishedOn", "processedOn", ARGV[3], unpack(attributesToRemove))
    local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[7], KEYS[4], KEYS[6])
    addJobInTargetList(target, KEYS[8], ARGV[2], isPausedOrMaxed, jobId)
    local parentKey = rcall("HGET", jobKey, "parentKey")
    if parentKey and rcall("EXISTS", parentKey) == 1 then
      if ARGV[4] == "failed" then
        if rcall("ZREM", parentKey .. ":unsuccessful", jobKey) == 1 or
          rcall("ZREM", parentKey .. ":failed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      else
        if rcall("HDEL", parentKey .. ":processed", jobKey) == 1 then
          rcall("SADD", parentKey .. ":dependencies", jobKey)
        end
      end
    end
    local maxEvents = getOrSetMaxEvents(KEYS[5])
    -- Emit waiting event
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
      "jobId", jobId, "prev", ARGV[4]);
    return 1
  else
    return -3
  end
else
  return -1
end
`;oq.reprocessJob={name:"reprocessJob",content:qpr,keys:8}});var yQe=m(aq=>{"use strict";Object.defineProperty(aq,"__esModule",{value:!0});aq.retryJob=void 0;var Lpr=`--[[
  Retries a failed job by moving it back to the wait queue.
    Input:
      KEYS[1]  'active',
      KEYS[2]  'wait'
      KEYS[3]  'paused'
      KEYS[4]  job key
      KEYS[5]  'meta'
      KEYS[6]  events stream
      KEYS[7]  delayed key
      KEYS[8]  prioritized key
      KEYS[9]  'pc' priority counter
      KEYS[10] 'marker'
      KEYS[11] 'stalled'
      ARGV[1]  key prefix
      ARGV[2]  timestamp
      ARGV[3]  pushCmd
      ARGV[4]  jobId
      ARGV[5]  token
      ARGV[6]  optional job fields to update
    Events:
      'waiting'
    Output:
     0  - OK
     -1 - Missing key
     -2 - Missing lock
     -3 - Job not in active set
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to check if queue is paused or maxed
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePausedOrMaxed(queueMetaKey, activeKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency")
  if queueAttributes[1] then
    return true
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      return activeCount >= tonumber(queueAttributes[2])
    end
  end
  return false
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, markerKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, priorityCounterKey, isPaused)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000 - 1, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                local score = getPriorityScore(priority, priorityCounterKey)
                rcall("ZADD", prioritizedKey, score, jobId)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
        addBaseMarkerIfNeeded(markerKey, isPaused)
    end
end
local function removeLock(jobKey, stalledKey, token, jobId)
  if token ~= "0" then
    local lockKey = jobKey .. ':lock'
    local lockToken = rcall("GET", lockKey)
    if lockToken == token then
      rcall("DEL", lockKey)
      rcall("SREM", stalledKey, jobId)
    else
      if lockToken then
        -- Lock exists but token does not match
        return -6
      else
        -- Lock is missing completely
        return -2
      end
    end
  end
  return 0
end
--[[
  Function to update a bunch of fields in a job.
]]
local function updateJobFields(jobKey, msgpackedFields)
  if msgpackedFields and #msgpackedFields > 0 then
    local fieldsToUpdate = cmsgpack.unpack(msgpackedFields)
    if fieldsToUpdate then
      rcall("HMSET", jobKey, unpack(fieldsToUpdate))
    end
  end
end
local target, isPausedOrMaxed = getTargetQueueList(KEYS[5], KEYS[1], KEYS[2], KEYS[3])
local markerKey = KEYS[10]
-- Check if there are delayed jobs that we can move to wait.
-- test example: when there are delayed jobs between retries
promoteDelayedJobs(KEYS[7], markerKey, target, KEYS[8], KEYS[6], ARGV[1], ARGV[2], KEYS[9], isPausedOrMaxed)
local jobKey = KEYS[4]
if rcall("EXISTS", jobKey) == 1 then
  local errorCode = removeLock(jobKey, KEYS[11], ARGV[5], ARGV[4]) 
  if errorCode < 0 then
    return errorCode
  end
  updateJobFields(jobKey, ARGV[6])
  local numRemovedElements = rcall("LREM", KEYS[1], -1, ARGV[4])
  if (numRemovedElements < 1) then return -3 end
  local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
  --need to re-evaluate after removing job from active
  isPausedOrMaxed = isQueuePausedOrMaxed(KEYS[5], KEYS[1])
  -- Standard or priority add
  if priority == 0 then
    addJobInTargetList(target, markerKey, ARGV[3], isPausedOrMaxed, ARGV[4])
  else
    addJobWithPriority(markerKey, KEYS[8], priority, ARGV[4], KEYS[9], isPausedOrMaxed)
  end
  rcall("HINCRBY", jobKey, "atm", 1)
  local maxEvents = getOrSetMaxEvents(KEYS[5])
  -- Emit waiting event
  rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", ARGV[4], "prev", "active")
  return 0
else
  return -1
end
`;aq.retryJob={name:"retryJob",content:Lpr,keys:11}});var gQe=m(uq=>{"use strict";Object.defineProperty(uq,"__esModule",{value:!0});uq.saveStacktrace=void 0;var jpr=`--[[
  Save stacktrace and failedReason.
  Input:
    KEYS[1] job key
    ARGV[1]  stacktrace
    ARGV[2]  failedReason
  Output:
     0 - OK
    -1 - Missing key
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2])
  return 0
else
  return -1
end
`;uq.saveStacktrace={name:"saveStacktrace",content:jpr,keys:1}});var EQe=m(cq=>{"use strict";Object.defineProperty(cq,"__esModule",{value:!0});cq.updateData=void 0;var $pr=`--[[
  Update job data
  Input:
    KEYS[1] Job id key
    ARGV[1] data
  Output:
    0 - OK
   -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "data", ARGV[1])
  return 0
else
  return -1
end
`;cq.updateData={name:"updateData",content:$pr,keys:1}});var bQe=m(lq=>{"use strict";Object.defineProperty(lq,"__esModule",{value:!0});lq.updateJobScheduler=void 0;var Kpr=`--[[
  Updates a job scheduler and adds next delayed job
  Input:
    KEYS[1]  'repeat' key
    KEYS[2]  'delayed'
    KEYS[3]  'wait' key
    KEYS[4]  'paused' key
    KEYS[5]  'meta'
    KEYS[6]  'prioritized' key
    KEYS[7]  'marker',
    KEYS[8]  'id'
    KEYS[9]  events stream key
    KEYS[10] 'pc' priority counter
    KEYS[11] producer key
    KEYS[12] 'active' key
    ARGV[1] next milliseconds
    ARGV[2] jobs scheduler id
    ARGV[3] Json stringified delayed data
    ARGV[4] msgpacked delayed opts
    ARGV[5] timestamp
    ARGV[6] prefix key
    ARGV[7] producer id
    Output:
      next delayed job id  - OK
]] local rcall = redis.call
local repeatKey = KEYS[1]
local delayedKey = KEYS[2]
local waitKey = KEYS[3]
local pausedKey = KEYS[4]
local metaKey = KEYS[5]
local prioritizedKey = KEYS[6]
local nextMillis = tonumber(ARGV[1])
local jobSchedulerId = ARGV[2]
local timestamp = tonumber(ARGV[5])
local prefixKey = ARGV[6]
local producerId = ARGV[7]
local jobOpts = cmsgpack.unpack(ARGV[4])
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Adds a delayed job to the queue by doing the following:
    - Creates a new job key with the job data.
    - adds to delayed zset.
    - Emits a global event 'delayed' if the job is delayed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]]
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if nextTimestamp ~= nil then
      return nextTimestamp / 0x1000
    end
  end
end
local function addDelayMarkerIfNeeded(markerKey, delayedKey)
  local nextTimestamp = getNextDelayedTimestamp(delayedKey)
  if nextTimestamp ~= nil then
    -- Replace the score of the marker with the newest known
    -- next timestamp.
    rcall("ZADD", markerKey, nextTimestamp, "1")
  end
end
--[[
  Bake in the job id first 12 bits into the timestamp
  to guarantee correct execution order of delayed jobs
  (up to 4096 jobs per given timestamp or 4096 jobs apart per timestamp)
  WARNING: Jobs that are so far apart that they wrap around will cause FIFO to fail
]]
local function getDelayedScore(delayedKey, timestamp, delay)
  local delayedTimestamp = (delay > 0 and (tonumber(timestamp) + delay)) or tonumber(timestamp)
  local minScore = delayedTimestamp * 0x1000
  local maxScore = (delayedTimestamp + 1 ) * 0x1000 - 1
  local result = rcall("ZREVRANGEBYSCORE", delayedKey, maxScore,
    minScore, "WITHSCORES","LIMIT", 0, 1)
  if #result then
    local currentMaxScore = tonumber(result[2])
    if currentMaxScore ~= nil then
      if currentMaxScore >= maxScore then
        return maxScore, delayedTimestamp
      else
        return currentMaxScore + 1, delayedTimestamp
      end
    end
  end
  return minScore, delayedTimestamp
end
local function addDelayedJob(jobId, delayedKey, eventsKey, timestamp,
  maxEvents, markerKey, delay)
  local score, delayedTimestamp = getDelayedScore(delayedKey, timestamp, tonumber(delay))
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- mark that a delayed job is available
  addDelayMarkerIfNeeded(markerKey, delayedKey)
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Add marker if needed when a job is available.
]]
local function addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
  if not isPausedOrMaxed then
    rcall("ZADD", markerKey, 0, "0")
  end  
end
--[[
  Function to get priority score.
]]
local function getPriorityScore(priority, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  return priority * 0x100000000 + prioCounter % 0x100000000
end
local function addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounterKey,
  isPausedOrMaxed)
  local score = getPriorityScore(priority, priorityCounterKey)
  rcall("ZADD", prioritizedKey, score, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function isQueuePaused(queueMetaKey)
  return rcall("HEXISTS", queueMetaKey, "paused") == 1
end
--[[
  Function to store a job
]]
local function storeJob(eventsKey, jobIdKey, jobId, name, data, opts, timestamp,
                        parentKey, parentData, repeatJobKey)
    local jsonOpts = cjson.encode(opts)
    local delay = opts['delay'] or 0
    local priority = opts['priority'] or 0
    local debounceId = opts['de'] and opts['de']['id']
    local optionalValues = {}
    if parentKey ~= nil then
        table.insert(optionalValues, "parentKey")
        table.insert(optionalValues, parentKey)
        table.insert(optionalValues, "parent")
        table.insert(optionalValues, parentData)
    end
    if repeatJobKey then
        table.insert(optionalValues, "rjk")
        table.insert(optionalValues, repeatJobKey)
    end
    if debounceId then
        table.insert(optionalValues, "deid")
        table.insert(optionalValues, debounceId)
    end
    rcall("HMSET", jobIdKey, "name", name, "data", data, "opts", jsonOpts,
          "timestamp", timestamp, "delay", delay, "priority", priority,
          unpack(optionalValues))
    rcall("XADD", eventsKey, "*", "event", "added", "jobId", jobId, "name", name)
    return delay, priority
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, activeKey, waitKey, pausedKey)
  local queueAttributes = rcall("HMGET", queueMetaKey, "paused", "concurrency", "max", "duration")
  if queueAttributes[1] then
    return pausedKey, true, queueAttributes[3], queueAttributes[4]
  else
    if queueAttributes[2] then
      local activeCount = rcall("LLEN", activeKey)
      if activeCount >= tonumber(queueAttributes[2]) then
        return waitKey, true, queueAttributes[3], queueAttributes[4]
      else
        return waitKey, false, queueAttributes[3], queueAttributes[4]
      end
    end
  end
  return waitKey, false, queueAttributes[3], queueAttributes[4]
end
--[[
  Function to add job in target list and add marker if needed.
]]
-- Includes
local function addJobInTargetList(targetKey, markerKey, pushCmd, isPausedOrMaxed, jobId)
  rcall(pushCmd, targetKey, jobId)
  addBaseMarkerIfNeeded(markerKey, isPausedOrMaxed)
end
local function addJobFromScheduler(jobKey, jobId, opts, waitKey, pausedKey, activeKey, metaKey, 
  prioritizedKey, priorityCounter, delayedKey, markerKey, eventsKey, name, maxEvents, timestamp,
  data, jobSchedulerId, repeatDelay)
  opts['delay'] = repeatDelay
  opts['jobId'] = jobId
  local delay, priority = storeJob(eventsKey, jobKey, jobId, name, data,
    opts, timestamp, nil, nil, jobSchedulerId)
  if delay ~= 0 then
    addDelayedJob(jobId, delayedKey, eventsKey, timestamp, maxEvents, markerKey, delay)
  else
    local target, isPausedOrMaxed = getTargetQueueList(metaKey, activeKey, waitKey, pausedKey)
    -- Standard or priority add
    if priority == 0 then
      local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
      addJobInTargetList(target, markerKey, pushCmd, isPausedOrMaxed, jobId)
    else
      -- Priority add
      addJobWithPriority(markerKey, prioritizedKey, priority, jobId, priorityCounter, isPausedOrMaxed)
    end
    -- Emit waiting event
    rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents,  "*", "event", "waiting", "jobId", jobId)
  end
end
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
local function getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
    local nextMillis
    if not prevMillis then
        if startDate then
            -- Assuming startDate is passed as milliseconds from JavaScript
            nextMillis = tonumber(startDate)
            nextMillis = nextMillis > now and nextMillis or now
        else
            nextMillis = now
        end
    else
        nextMillis = prevMillis + every
        -- check if we may have missed some iterations
        if nextMillis < now then
            nextMillis = math.floor(now / every) * every + every + (offset or 0)
        end
    end
    if not offset or offset == 0 then
        local timeSlot = math.floor(nextMillis / every) * every;
        offset = nextMillis - timeSlot;
    end
    -- Return a tuple nextMillis, offset
    return math.floor(nextMillis), math.floor(offset)
end
local prevMillis = rcall("ZSCORE", repeatKey, jobSchedulerId)
-- Validate that scheduler exists.
-- If it does not exist we should not iterate anymore.
if prevMillis then
    prevMillis = tonumber(prevMillis)
    local schedulerKey = repeatKey .. ":" .. jobSchedulerId
    local schedulerAttributes = rcall("HMGET", schedulerKey, "name", "data", "every", "startDate", "offset")
    local every = tonumber(schedulerAttributes[3])
    local now = tonumber(timestamp)
    -- If every is not found in scheduler attributes, try to get it from job options
    if not every and jobOpts['repeat'] and jobOpts['repeat']['every'] then
        every = tonumber(jobOpts['repeat']['every'])
    end
    if every then
        local startDate = schedulerAttributes[4]
        local jobOptsOffset = jobOpts['repeat'] and jobOpts['repeat']['offset'] or 0
        local offset = schedulerAttributes[5] or jobOptsOffset or 0
        local newOffset
        nextMillis, newOffset = getJobSchedulerEveryNextMillis(prevMillis, every, now, offset, startDate)
        if not offset then
            rcall("HSET", schedulerKey, "offset", newOffset)
            jobOpts['repeat']['offset'] = newOffset
        end
    end
    local nextDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. nextMillis
    local nextDelayedJobKey = schedulerKey .. ":" .. nextMillis
    local currentDelayedJobId = "repeat:" .. jobSchedulerId .. ":" .. prevMillis
    if producerId == currentDelayedJobId then
        local eventsKey = KEYS[9]
        local maxEvents = getOrSetMaxEvents(metaKey)
        if rcall("EXISTS", nextDelayedJobKey) ~= 1 then
            rcall("ZADD", repeatKey, nextMillis, jobSchedulerId)
            rcall("HINCRBY", schedulerKey, "ic", 1)
            rcall("INCR", KEYS[8])
            -- TODO: remove this workaround in next breaking change,
            -- all job-schedulers must save job data
            local templateData = schedulerAttributes[2] or ARGV[3]
            if templateData and templateData ~= '{}' then
                rcall("HSET", schedulerKey, "data", templateData)
            end
            local delay = nextMillis - now
            -- Fast Clamp delay to minimum of 0
            if delay < 0 then
                delay = 0
            end
            jobOpts["delay"] = delay
            addJobFromScheduler(nextDelayedJobKey, nextDelayedJobId, jobOpts, waitKey, pausedKey, KEYS[12], metaKey,
                prioritizedKey, KEYS[10], delayedKey, KEYS[7], eventsKey, schedulerAttributes[1], maxEvents, ARGV[5],
                templateData or '{}', jobSchedulerId, delay)
            -- TODO: remove this workaround in next breaking change
            if KEYS[11] ~= "" then
                rcall("HSET", KEYS[11], "nrjid", nextDelayedJobId)
            end
            return nextDelayedJobId .. "" -- convert to string
        else
            rcall("XADD", eventsKey, "MAXLEN", "~", maxEvents, "*", "event", "duplicated", "jobId", nextDelayedJobId)
        end
    end
end
`;lq.updateJobScheduler={name:"updateJobScheduler",content:Kpr,keys:12}});var _Qe=m(dq=>{"use strict";Object.defineProperty(dq,"__esModule",{value:!0});dq.updateProgress=void 0;var Upr=`--[[
  Update job progress
  Input:
    KEYS[1] Job id key
    KEYS[2] event stream key
    KEYS[3] meta key
    ARGV[1] id
    ARGV[2] progress
  Output:
     0 - OK
    -1 - Missing job.
  Event:
    progress(jobId, progress)
]]
local rcall = redis.call
-- Includes
--[[
  Function to get max events value or set by default 10000.
]]
local function getOrSetMaxEvents(metaKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if not maxEvents then
    maxEvents = 10000
    rcall("HSET", metaKey, "opts.maxLenEvents", maxEvents)
  end
  return maxEvents
end
if rcall("EXISTS", KEYS[1]) == 1 then -- // Make sure job exists
    local maxEvents = getOrSetMaxEvents(KEYS[3])
    rcall("HSET", KEYS[1], "progress", ARGV[2])
    rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event", "progress",
          "jobId", ARGV[1], "data", ARGV[2]);
    return 0
else
    return -1
end
`;dq.updateProgress={name:"updateProgress",content:Upr,keys:3}});var vQe=m(pq=>{"use strict";Object.defineProperty(pq,"__esModule",{value:!0});pq.updateRepeatableJobMillis=void 0;var Vpr=`--[[
  Adds a repeatable job
    Input:
      KEYS[1] 'repeat' key
      ARGV[1] next milliseconds
      ARGV[2] custom key
      ARGV[3] legacy custom key TODO: remove this logic in next breaking change
      Output:
        repeatableKey  - OK
]]
local rcall = redis.call
local repeatKey = KEYS[1]
local nextMillis = ARGV[1]
local customKey = ARGV[2]
local legacyCustomKey = ARGV[3]
if rcall("ZSCORE", repeatKey, customKey) then
    rcall("ZADD", repeatKey, nextMillis, customKey)
    return customKey
elseif rcall("ZSCORE", repeatKey, legacyCustomKey) ~= false then
    rcall("ZADD", repeatKey, nextMillis, legacyCustomKey)
    return legacyCustomKey
end
return ''
`;pq.updateRepeatableJobMillis={name:"updateRepeatableJobMillis",content:Vpr,keys:1}});var SQe=m(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});var gt=(ia(),Jt(na));gt.__exportStar(TYe(),pt);gt.__exportStar(OYe(),pt);gt.__exportStar(xYe(),pt);gt.__exportStar(IYe(),pt);gt.__exportStar(RYe(),pt);gt.__exportStar(DYe(),pt);gt.__exportStar(kYe(),pt);gt.__exportStar(MYe(),pt);gt.__exportStar(PYe(),pt);gt.__exportStar(NYe(),pt);gt.__exportStar(FYe(),pt);gt.__exportStar(BYe(),pt);gt.__exportStar(qYe(),pt);gt.__exportStar(LYe(),pt);gt.__exportStar(jYe(),pt);gt.__exportStar($Ye(),pt);gt.__exportStar(KYe(),pt);gt.__exportStar(UYe(),pt);gt.__exportStar(VYe(),pt);gt.__exportStar(GYe(),pt);gt.__exportStar(HYe(),pt);gt.__exportStar(zYe(),pt);gt.__exportStar(WYe(),pt);gt.__exportStar(JYe(),pt);gt.__exportStar(YYe(),pt);gt.__exportStar(QYe(),pt);gt.__exportStar(XYe(),pt);gt.__exportStar(ZYe(),pt);gt.__exportStar(eQe(),pt);gt.__exportStar(tQe(),pt);gt.__exportStar(rQe(),pt);gt.__exportStar(nQe(),pt);gt.__exportStar(iQe(),pt);gt.__exportStar(sQe(),pt);gt.__exportStar(oQe(),pt);gt.__exportStar(aQe(),pt);gt.__exportStar(uQe(),pt);gt.__exportStar(cQe(),pt);gt.__exportStar(lQe(),pt);gt.__exportStar(dQe(),pt);gt.__exportStar(pQe(),pt);gt.__exportStar(fQe(),pt);gt.__exportStar(hQe(),pt);gt.__exportStar(mQe(),pt);gt.__exportStar(yQe(),pt);gt.__exportStar(gQe(),pt);gt.__exportStar(EQe(),pt);gt.__exportStar(bQe(),pt);gt.__exportStar(_Qe(),pt);gt.__exportStar(vQe(),pt)});var m8=m(fq=>{"use strict";Object.defineProperty(fq,"__esModule",{value:!0});fq.RedisConnection=void 0;var Gpr=(ia(),Jt(na)),Hpr=require("events"),wQe=EP(),AQe=cs(),Pu=Hc(),zpr=pB(),Wpr=SQe(),Jpr=["BullMQ: WARNING! Your redis options maxRetriesPerRequest must be null","and will be overridden by BullMQ."].join(" "),Ypr="BullMQ: Your redis options maxRetriesPerRequest must be null.",h8=class t extends Hpr.EventEmitter{constructor(e,r){if(super(),this.extraOptions=r,this.capabilities={canDoubleTimeout:!1,canBlockFor1Ms:!0},this.status="initializing",this.packageVersion=zpr.version,this.extraOptions=Object.assign({shared:!1,blocking:!0,skipVersionCheck:!1,skipWaitingForReady:!1},r),!(0,Pu.isRedisInstance)(e))this.checkBlockingOptions(Jpr,e),this.opts=Object.assign({port:6379,host:"127.0.0.1",retryStrategy:function(n){return Math.max(Math.min(Math.exp(n),2e4),1e3)}},e),this.extraOptions.blocking&&(this.opts.maxRetriesPerRequest=null);else{if(this._client=e,this._client.options.keyPrefix)throw new Error("BullMQ: ioredis does not support ioredis prefixes, use the prefix option instead.");(0,Pu.isRedisCluster)(this._client)?this.opts=this._client.options.redisOptions:this.opts=this._client.options,this.checkBlockingOptions(Ypr,this.opts,!0)}this.skipVersionCheck=r?.skipVersionCheck||!!(this.opts&&this.opts.skipVersionCheck),this.handleClientError=n=>{this.emit("error",n)},this.handleClientClose=()=>{this.emit("close")},this.handleClientReady=()=>{this.emit("ready")},this.initializing=this.init(),this.initializing.catch(n=>this.emit("error",n))}checkBlockingOptions(e,r,n=!1){if(this.extraOptions.blocking&&r&&r.maxRetriesPerRequest){if(n)throw new Error(e);console.error(e)}}static async waitUntilReady(e){if(e.status==="ready")return;if(e.status==="wait")return e.connect();if(e.status==="end")throw new Error(AQe.CONNECTION_CLOSED_ERROR_MSG);let r,n,i;try{await new Promise((s,o)=>{let a;i=u=>{a=u},r=()=>{s()},n=()=>{e.status!=="end"?o(a||new Error(AQe.CONNECTION_CLOSED_ERROR_MSG)):a?o(a):s()},(0,Pu.increaseMaxListeners)(e,3),e.once("ready",r),e.on("end",n),e.once("error",i)})}finally{e.removeListener("end",n),e.removeListener("error",i),e.removeListener("ready",r),(0,Pu.decreaseMaxListeners)(e,3)}}get client(){return this.initializing}loadCommands(e,r){let n=r||Wpr;for(let i in n){let s=`${n[i].name}:${e}`;this._client[s]||this._client.defineCommand(s,{numberOfKeys:n[i].keys,lua:n[i].content})}}async init(){if(!this._client){let e=this.opts,{url:r}=e,n=Gpr.__rest(e,["url"]);this._client=r?new wQe.default(r,n):new wQe.default(n)}if((0,Pu.increaseMaxListeners)(this._client,3),this._client.on("error",this.handleClientError),this._client.on("close",this.handleClientClose),this._client.on("ready",this.handleClientReady),this.extraOptions.skipWaitingForReady||await t.waitUntilReady(this._client),this.loadCommands(this.packageVersion),this._client.status!=="end"){if(this.version=await this.getRedisVersion(),this.skipVersionCheck!==!0&&!this.closing){if((0,Pu.isRedisVersionLowerThan)(this.version,t.minimumVersion))throw new Error(`Redis version needs to be greater or equal than ${t.minimumVersion} Current: ${this.version}`);(0,Pu.isRedisVersionLowerThan)(this.version,t.recommendedMinimumVersion)&&console.warn(`It is highly recommended to use a minimum Redis version of ${t.recommendedMinimumVersion}
             Current: ${this.version}`)}this.capabilities={canDoubleTimeout:!(0,Pu.isRedisVersionLowerThan)(this.version,"6.0.0"),canBlockFor1Ms:!(0,Pu.isRedisVersionLowerThan)(this.version,"7.0.8")},this.status="ready"}return this._client}async disconnect(e=!0){let r=await this.client;if(r.status!=="end"){let n,i;if(!e)return r.disconnect();let s=new Promise((o,a)=>{(0,Pu.increaseMaxListeners)(r,2),r.once("end",o),r.once("error",a),n=o,i=a});r.disconnect();try{await s}finally{(0,Pu.decreaseMaxListeners)(r,2),r.removeListener("end",n),r.removeListener("error",i)}}}async reconnect(){return(await this.client).connect()}async close(e=!1){if(!this.closing){let r=this.status;this.status="closing",this.closing=!0;try{r==="ready"&&await this.initializing,this.extraOptions.shared||(r=="initializing"||e?this._client.disconnect():await this._client.quit(),this._client.status="end")}catch(n){if((0,Pu.isNotConnectionError)(n))throw n}finally{this._client.off("error",this.handleClientError),this._client.off("close",this.handleClientClose),this._client.off("ready",this.handleClientReady),(0,Pu.decreaseMaxListeners)(this._client,3),this.removeAllListeners(),this.status="closed"}}}async getRedisVersion(){if(this.skipVersionCheck)return t.minimumVersion;let e=await this._client.info(),r="redis_version:",n="maxmemory_policy:",i=e.split(/\r?\n/),s;for(let o=0;o<i.length;o++){if(i[o].indexOf(n)===0){let a=i[o].substr(n.length);a!=="noeviction"&&console.warn(`IMPORTANT! Eviction policy is ${a}. It should be "noeviction"`)}i[o].indexOf(r)===0&&(s=i[o].substr(r.length))}return s}get redisVersion(){return this.version}};fq.RedisConnection=h8;h8.minimumVersion="5.0.0";h8.recommendedMinimumVersion="6.2.0"});var CQe=m(mq=>{"use strict";Object.defineProperty(mq,"__esModule",{value:!0});mq.FlowProducer=void 0;var Qpr=require("events"),Xpr=zF(),d2=Hc(),Zpr=T4(),hq=yB(),efr=m8(),Bm=Ru(),Fce=class extends Qpr.EventEmitter{constructor(e={connection:{}},r=efr.RedisConnection){super(),this.opts=e,this.opts=Object.assign({prefix:"bull"},e),this.connection=new r(e.connection,{shared:(0,d2.isRedisInstance)(e.connection),blocking:!1,skipVersionCheck:e.skipVersionCheck,skipWaitingForReady:e.skipWaitingForReady}),this.connection.on("error",n=>this.emit("error",n)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")}),this.queueKeys=new hq.QueueKeys(e.prefix),e?.telemetry&&(this.telemetry=e.telemetry)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get client(){return this.connection.client}get Job(){return Zpr.Job}waitUntilReady(){return this.client}async add(e,r){var n;if(this.closing)return;let s=(await this.connection.client).multi(),o=(n=e?.opts)===null||n===void 0?void 0:n.parent,a=(0,d2.getParentKey)(o),u=a?`${a}:dependencies`:void 0;return(0,d2.trace)(this.telemetry,Bm.SpanKind.PRODUCER,e.queueName,"addFlow",e.queueName,async c=>{c?.setAttributes({[Bm.TelemetryAttributes.FlowName]:e.name});let l=await this.addNode({multi:s,node:e,queuesOpts:r?.queuesOptions,parent:{parentOpts:o,parentDependenciesKey:u}});return await s.exec(),l})}async getFlow(e){if(this.closing)return;let r=await this.connection.client,n=Object.assign({depth:10,maxChildren:20,prefix:this.opts.prefix},e);return this.getNode(r,n)}async addBulk(e){if(this.closing)return;let n=(await this.connection.client).multi();return(0,d2.trace)(this.telemetry,Bm.SpanKind.PRODUCER,"","addBulkFlows","",async i=>{i?.setAttributes({[Bm.TelemetryAttributes.BulkCount]:e.length,[Bm.TelemetryAttributes.BulkNames]:e.map(o=>o.name).join(",")});let s=await this.addNodes(n,e);return await n.exec(),s})}async addNode({multi:e,node:r,parent:n,queuesOpts:i}){var s,o;let a=r.prefix||this.opts.prefix,u=this.queueFromNode(r,new hq.QueueKeys(a),a),c=i&&i[r.queueName],l=(s=c?.defaultJobOptions)!==null&&s!==void 0?s:{},d=((o=r.opts)===null||o===void 0?void 0:o.jobId)||(0,Xpr.v4)();return(0,d2.trace)(this.telemetry,Bm.SpanKind.PRODUCER,r.queueName,"addNode",r.queueName,async(p,f)=>{var h,g;p?.setAttributes({[Bm.TelemetryAttributes.JobName]:r.name,[Bm.TelemetryAttributes.JobId]:d});let _=r.opts,S=_?.telemetry;if(f&&_){let A=(h=_.telemetry)===null||h===void 0?void 0:h.omitContext,O=((g=_.telemetry)===null||g===void 0?void 0:g.metadata)||!A&&f;(O||A)&&(S={metadata:O,omitContext:A})}let w=new this.Job(u,r.name,r.data,Object.assign(Object.assign(Object.assign({},l),_),{parent:n?.parentOpts,telemetry:S}),d),C=(0,d2.getParentKey)(n?.parentOpts);if(r.children&&r.children.length>0){let A=d,O=new hq.QueueKeys(r.prefix||this.opts.prefix);await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,addToWaitingChildren:!0,parentKey:C});let x=`${O.toKey(r.queueName,A)}:dependencies`,R=await this.addChildren({multi:e,nodes:r.children,parent:{parentOpts:{id:A,queue:O.getQueueQualifiedName(r.queueName)},parentDependenciesKey:x},queuesOpts:i});return{job:w,children:R}}else return await w.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,parentKey:C}),{job:w}})}addNodes(e,r){return Promise.all(r.map(n=>{var i;let s=(i=n?.opts)===null||i===void 0?void 0:i.parent,o=(0,d2.getParentKey)(s),a=o?`${o}:dependencies`:void 0;return this.addNode({multi:e,node:n,parent:{parentOpts:s,parentDependenciesKey:a}})}))}async getNode(e,r){let n=this.queueFromNode(r,new hq.QueueKeys(r.prefix),r.prefix),i=await this.Job.fromId(n,r.id);if(i){let{processed:s={},unprocessed:o=[],failed:a=[],ignored:u={}}=await i.getDependencies({failed:{count:r.maxChildren},processed:{count:r.maxChildren},unprocessed:{count:r.maxChildren},ignored:{count:r.maxChildren}}),c=Object.keys(s),l=Object.keys(u),d=c.length+o.length+l.length+a.length,p=r.depth-1;if(d>0&&p){let f=await this.getChildren(e,[...c,...o,...a,...l],p,r.maxChildren);return{job:i,children:f}}else return{job:i}}}addChildren({multi:e,nodes:r,parent:n,queuesOpts:i}){return Promise.all(r.map(s=>this.addNode({multi:e,node:s,parent:n,queuesOpts:i})))}getChildren(e,r,n,i){let s=o=>{let[a,u,c]=o.split(":");return this.getNode(e,{id:c,queueName:u,prefix:a,depth:n,maxChildren:i})};return Promise.all([...r.map(s)])}queueFromNode(e,r,n){return{client:this.connection.client,name:e.queueName,keys:r.getKeys(e.queueName),toKey:i=>r.toKey(e.queueName,i),opts:{prefix:n,connection:{}},qualifiedName:r.getQueueQualifiedName(e.queueName),closing:this.closing,waitUntilReady:async()=>this.connection.client,removeListener:this.removeListener.bind(this),emit:this.emit.bind(this),on:this.on.bind(this),redisVersion:this.connection.redisVersion,trace:async()=>{}}}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}disconnect(){return this.connection.disconnect()}};mq.FlowProducer=Fce});var tZe=m(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var a1=class extends Error{},Hce=class extends a1{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},zce=class extends a1{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Wce=class extends a1{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},jm=class extends a1{},wq=class extends a1{constructor(e){super(`Invalid unit ${e}`)}},ks=class extends a1{},mp=class extends a1{constructor(){super("Zone is an abstract class")}},Ve="numeric",dd="short",Bu="long",Aq={year:Ve,month:Ve,day:Ve},rXe={year:Ve,month:dd,day:Ve},tfr={year:Ve,month:dd,day:Ve,weekday:dd},nXe={year:Ve,month:Bu,day:Ve},iXe={year:Ve,month:Bu,day:Ve,weekday:Bu},sXe={hour:Ve,minute:Ve},oXe={hour:Ve,minute:Ve,second:Ve},aXe={hour:Ve,minute:Ve,second:Ve,timeZoneName:dd},uXe={hour:Ve,minute:Ve,second:Ve,timeZoneName:Bu},cXe={hour:Ve,minute:Ve,hourCycle:"h23"},lXe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23"},dXe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:dd},pXe={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Bu},fXe={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve},hXe={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve,second:Ve},mXe={year:Ve,month:dd,day:Ve,hour:Ve,minute:Ve},yXe={year:Ve,month:dd,day:Ve,hour:Ve,minute:Ve,second:Ve},rfr={year:Ve,month:dd,day:Ve,weekday:dd,hour:Ve,minute:Ve},gXe={year:Ve,month:Bu,day:Ve,hour:Ve,minute:Ve,timeZoneName:dd},EXe={year:Ve,month:Bu,day:Ve,hour:Ve,minute:Ve,second:Ve,timeZoneName:dd},bXe={year:Ve,month:Bu,day:Ve,weekday:Bu,hour:Ve,minute:Ve,timeZoneName:Bu},_Xe={year:Ve,month:Bu,day:Ve,weekday:Bu,hour:Ve,minute:Ve,second:Ve,timeZoneName:Bu},Km=class{get type(){throw new mp}get name(){throw new mp}get ianaName(){return this.name}get isUniversal(){throw new mp}offsetName(e,r){throw new mp}formatOffset(e,r){throw new mp}offset(e){throw new mp}equals(e){throw new mp}get isValid(){throw new mp}},Bce=null,v8=class t extends Km{static get instance(){return Bce===null&&(Bce=new t),Bce}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return DXe(e,r,n)}formatOffset(e,r){return _8(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Jce=new Map;function nfr(t){let e=Jce.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Jce.set(t,e)),e}var ifr={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function sfr(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,u,c,l]=n;return[o,i,s,a,u,c,l]}function ofr(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:s,value:o}=r[i],a=ifr[s];s==="era"?n[a]=o:At(a)||(n[a]=parseInt(o,10))}return n}var qce=new Map,u1=class t extends Km{static create(e){let r=qce.get(e);return r===void 0&&qce.set(e,r=new t(e)),r}static resetCache(){qce.clear(),Jce.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return DXe(e,r,n,this.name)}formatOffset(e,r){return _8(this.offset(e),r)}offset(e){if(!this.valid)return NaN;let r=new Date(e);if(isNaN(r))return NaN;let n=nfr(this.name),[i,s,o,a,u,c,l]=n.formatToParts?ofr(n,r):sfr(n,r);a==="BC"&&(i=-Math.abs(i)+1);let p=Dq({year:i,month:s,day:o,hour:u===24?0:u,minute:c,second:l,millisecond:0}),f=+r,h=f%1e3;return f-=h>=0?h:1e3+h,(p-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},TQe={};function afr(t,e={}){let r=JSON.stringify([t,e]),n=TQe[r];return n||(n=new Intl.ListFormat(t,e),TQe[r]=n),n}var Yce=new Map;function Qce(t,e={}){let r=JSON.stringify([t,e]),n=Yce.get(r);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),Yce.set(r,n)),n}var Xce=new Map;function ufr(t,e={}){let r=JSON.stringify([t,e]),n=Xce.get(r);return n===void 0&&(n=new Intl.NumberFormat(t,e),Xce.set(r,n)),n}var Zce=new Map;function cfr(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),s=Zce.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),Zce.set(i,s)),s}var g8=null;function lfr(){return g8||(g8=new Intl.DateTimeFormat().resolvedOptions().locale,g8)}var ele=new Map;function vXe(t){let e=ele.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),ele.set(t,e)),e}var tle=new Map;function dfr(t){let e=tle.get(t);if(!e){let r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in e||(e={...SXe,...e}),tle.set(t,e)}return e}function pfr(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let r=t.indexOf("-u-");if(r===-1)return[t];{let n,i;try{n=Qce(t).resolvedOptions(),i=t}catch{let u=t.substring(0,r);n=Qce(u).resolvedOptions(),i=u}let{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function ffr(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function hfr(t){let e=[];for(let r=1;r<=12;r++){let n=Kn.utc(2009,r,1);e.push(t(n))}return e}function mfr(t){let e=[];for(let r=1;r<=7;r++){let n=Kn.utc(2016,11,13+r);e.push(t(n))}return e}function yq(t,e,r,n){let i=t.listingMode();return i==="error"?null:i==="en"?r(e):n(e)}function yfr(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||vXe(t.locale).numberingSystem==="latn"}var rle=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=ufr(e,a)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):fle(e,3);return Vi(r,this.padTo)}}},nle=class{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&u1.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=Qce(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},ile=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&IXe()&&(this.rtf=cfr(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):Bfr(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},SXe={firstDay:1,minimalDays:4,weekend:[6,7]},cn=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,i,s=!1){let o=e||Mn.defaultLocale,a=o||(s?"en-US":lfr()),u=r||Mn.defaultNumberingSystem,c=n||Mn.defaultOutputCalendar,l=ole(i)||Mn.defaultWeekSettings;return new t(a,u,c,l,o)}static resetCache(){g8=null,Yce.clear(),Xce.clear(),Zce.clear(),ele.clear(),tle.clear()}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return t.create(e,r,n,i)}constructor(e,r,n,i,s){let[o,a,u]=pfr(e);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=n||u||null,this.weekSettings=i,this.intl=ffr(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=yfr(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,ole(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return yq(this,e,PXe,()=>{let n=this.intl==="ja"||this.intl.startsWith("ja-");r&=!n;let i=r?{month:e,day:"numeric"}:{month:e},s=r?"format":"standalone";if(!this.monthsCache[s][e]){let o=n?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=hfr(o)}return this.monthsCache[s][e]})}weekdays(e,r=!1){return yq(this,e,BXe,()=>{let n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=mfr(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return yq(this,void 0,()=>qXe,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Kn.utc(2016,11,13,9),Kn.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return yq(this,e,LXe,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[Kn.utc(-40,1,1),Kn.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new rle(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new nle(e,this.intl,r)}relFormatter(e={}){return new ile(this.intl,this.isEnglish(),e)}listFormatter(e={}){return afr(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||vXe(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:RXe()?dfr(this.locale):SXe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}},Lce=null,qu=class t extends Km{static get utcInstance(){return Lce===null&&(Lce=new t(0)),Lce}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(kq(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_8(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_8(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return _8(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Cq=class extends Km{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Lm(t,e){if(At(t)||t===null)return e;if(t instanceof Km)return t;if(Sfr(t)){let r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?v8.instance:r==="utc"||r==="gmt"?qu.utcInstance:qu.parseSpecifier(r)||u1.create(t)}else return $m(t)?qu.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Cq(t)}var cle={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},OQe={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gfr=cle.hanidec.replace(/[\[|\]]/g,"").split("");function Efr(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(cle.hanidec)!==-1)e+=gfr.indexOf(t[r]);else for(let i in OQe){let[s,o]=OQe[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}var sle=new Map;function bfr(){sle.clear()}function cd({numberingSystem:t},e=""){let r=t||"latn",n=sle.get(r);n===void 0&&(n=new Map,sle.set(r,n));let i=n.get(e);return i===void 0&&(i=new RegExp(`${cle[r]}${e}`),n.set(e,i)),i}var xQe=()=>Date.now(),IQe="system",RQe=null,DQe=null,kQe=null,MQe=60,PQe,NQe=null,Mn=class{static get now(){return xQe}static set now(e){xQe=e}static set defaultZone(e){IQe=e}static get defaultZone(){return Lm(IQe,v8.instance)}static get defaultLocale(){return RQe}static set defaultLocale(e){RQe=e}static get defaultNumberingSystem(){return DQe}static set defaultNumberingSystem(e){DQe=e}static get defaultOutputCalendar(){return kQe}static set defaultOutputCalendar(e){kQe=e}static get defaultWeekSettings(){return NQe}static set defaultWeekSettings(e){NQe=ole(e)}static get twoDigitCutoffYear(){return MQe}static set twoDigitCutoffYear(e){MQe=e%100}static get throwOnInvalid(){return PQe}static set throwOnInvalid(e){PQe=e}static resetCaches(){cn.resetCache(),u1.resetCache(),Kn.resetCache(),bfr()}},Fu=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},wXe=[0,31,59,90,120,151,181,212,243,273,304,334],AXe=[0,31,60,91,121,152,182,213,244,274,305,335];function Jc(t,e){return new Fu("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function lle(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function CXe(t,e,r){return r+(w8(t)?AXe:wXe)[e-1]}function TXe(t,e){let r=w8(t)?AXe:wXe,n=r.findIndex(s=>s<e),i=e-r[n];return{month:n+1,day:i}}function dle(t,e){return(t-e+7)%7+1}function Tq(t,e=4,r=1){let{year:n,month:i,day:s}=t,o=CXe(n,i,s),a=dle(lle(n,i,s),r),u=Math.floor((o-a+14-e)/7),c;return u<1?(c=n-1,u=S8(c,e,r)):u>S8(n,e,r)?(c=n+1,u=1):c=n,{weekYear:c,weekNumber:u,weekday:a,...Mq(t)}}function FQe(t,e=4,r=1){let{weekYear:n,weekNumber:i,weekday:s}=t,o=dle(lle(n,1,e),r),a=R4(n),u=i*7+s-o-7+e,c;u<1?(c=n-1,u+=R4(c)):u>a?(c=n+1,u-=R4(n)):c=n;let{month:l,day:d}=TXe(c,u);return{year:c,month:l,day:d,...Mq(t)}}function jce(t){let{year:e,month:r,day:n}=t,i=CXe(e,r,n);return{year:e,ordinal:i,...Mq(t)}}function BQe(t){let{year:e,ordinal:r}=t,{month:n,day:i}=TXe(e,r);return{year:e,month:n,day:i,...Mq(t)}}function qQe(t,e){if(!At(t.localWeekday)||!At(t.localWeekNumber)||!At(t.localWeekYear)){if(!At(t.weekday)||!At(t.weekNumber)||!At(t.weekYear))throw new jm("Cannot mix locale-based week fields with ISO-based week fields");return At(t.localWeekday)||(t.weekday=t.localWeekday),At(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),At(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function _fr(t,e=4,r=1){let n=Rq(t.weekYear),i=Yc(t.weekNumber,1,S8(t.weekYear,e,r)),s=Yc(t.weekday,1,7);return n?i?s?!1:Jc("weekday",t.weekday):Jc("week",t.weekNumber):Jc("weekYear",t.weekYear)}function vfr(t){let e=Rq(t.year),r=Yc(t.ordinal,1,R4(t.year));return e?r?!1:Jc("ordinal",t.ordinal):Jc("year",t.year)}function OXe(t){let e=Rq(t.year),r=Yc(t.month,1,12),n=Yc(t.day,1,Oq(t.year,t.month));return e?r?n?!1:Jc("day",t.day):Jc("month",t.month):Jc("year",t.year)}function xXe(t){let{hour:e,minute:r,second:n,millisecond:i}=t,s=Yc(e,0,23)||e===24&&r===0&&n===0&&i===0,o=Yc(r,0,59),a=Yc(n,0,59),u=Yc(i,0,999);return s?o?a?u?!1:Jc("millisecond",i):Jc("second",n):Jc("minute",r):Jc("hour",e)}function At(t){return typeof t>"u"}function $m(t){return typeof t=="number"}function Rq(t){return typeof t=="number"&&t%1===0}function Sfr(t){return typeof t=="string"}function wfr(t){return Object.prototype.toString.call(t)==="[object Date]"}function IXe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function RXe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Afr(t){return Array.isArray(t)?t:[t]}function LQe(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let s=[e(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function Cfr(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function k4(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ole(t){if(t==null)return null;if(typeof t!="object")throw new ks("Week settings must be an object");if(!Yc(t.firstDay,1,7)||!Yc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Yc(e,1,7)))throw new ks("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Yc(t,e,r){return Rq(t)&&t>=e&&t<=r}function Tfr(t,e){return t-e*Math.floor(t/e)}function Vi(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function qm(t){if(!(At(t)||t===null||t===""))return parseInt(t,10)}function p2(t){if(!(At(t)||t===null||t===""))return parseFloat(t)}function ple(t){if(!(At(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function fle(t,e,r="round"){let n=10**e;switch(r){case"expand":return t>0?Math.ceil(t*n)/n:Math.floor(t*n)/n;case"trunc":return Math.trunc(t*n)/n;case"round":return Math.round(t*n)/n;case"floor":return Math.floor(t*n)/n;case"ceil":return Math.ceil(t*n)/n;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function w8(t){return t%4===0&&(t%100!==0||t%400===0)}function R4(t){return w8(t)?366:365}function Oq(t,e){let r=Tfr(e-1,12)+1,n=t+(e-r)/12;return r===2?w8(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Dq(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function jQe(t,e,r){return-dle(lle(t,1,e),r)+e-1}function S8(t,e=4,r=1){let n=jQe(t,e,r),i=jQe(t+1,e,r);return(R4(t)-n+i)/7}function ale(t){return t>99?t:t>Mn.twoDigitCutoffYear?1900+t:2e3+t}function DXe(t,e,r,n=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function kq(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function kXe(t){let e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new ks(`Invalid unit value ${t}`);return e}function xq(t,e){let r={};for(let n in t)if(k4(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=kXe(i)}return r}function _8(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Vi(r,2)}:${Vi(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Vi(r,2)}${Vi(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Mq(t){return Cfr(t,["hour","minute","second","millisecond"])}var Ofr=["January","February","March","April","May","June","July","August","September","October","November","December"],MXe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xfr=["J","F","M","A","M","J","J","A","S","O","N","D"];function PXe(t){switch(t){case"narrow":return[...xfr];case"short":return[...MXe];case"long":return[...Ofr];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var NXe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],FXe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ifr=["M","T","W","T","F","S","S"];function BXe(t){switch(t){case"narrow":return[...Ifr];case"short":return[...FXe];case"long":return[...NXe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var qXe=["AM","PM"],Rfr=["Before Christ","Anno Domini"],Dfr=["BC","AD"],kfr=["B","A"];function LXe(t){switch(t){case"narrow":return[...kfr];case"short":return[...Dfr];case"long":return[...Rfr];default:return null}}function Mfr(t){return qXe[t.hour<12?0:1]}function Pfr(t,e){return BXe(e)[t.weekday-1]}function Nfr(t,e){return PXe(e)[t.month-1]}function Ffr(t,e){return LXe(e)[t.year<0?0:1]}function Bfr(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&s){let d=t==="days";switch(e){case 1:return d?"tomorrow":`next ${i[t][0]}`;case-1:return d?"yesterday":`last ${i[t][0]}`;case 0:return d?"today":`this ${i[t][0]}`}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,c=i[t],l=n?u?c[1]:c[2]||c[1]:u?i[t][0]:t;return o?`${a} ${l} ago`:`in ${a} ${l}`}function $Qe(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var qfr={D:Aq,DD:rXe,DDD:nXe,DDDD:iXe,t:sXe,tt:oXe,ttt:aXe,tttt:uXe,T:cXe,TT:lXe,TTT:dXe,TTTT:pXe,f:fXe,ff:mXe,fff:gXe,ffff:bXe,F:hXe,FF:yXe,FFF:EXe,FFFF:_Xe},Nu=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?((n.length>0||i)&&s.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return qfr[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0,n=void 0){if(this.opts.forceSimple)return Vi(e,r);let i={...this.opts};return r>0&&(i.padTo=r),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,h)=>this.loc.extract(e,f,h),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>n?Mfr(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(f,h)=>n?Nfr(e,f):s(h?{month:f}:{month:f,day:"numeric"},"month"),c=(f,h)=>n?Pfr(e,f):s(h?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),l=f=>{let h=t.macroTokenToFormatOpts(f);return h?this.formatWithSystemDefault(e,h):f},d=f=>n?Ffr(e,f):s({era:f},"era"),p=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return l(f)}};return $Qe(t.parseFormat(r),p)}formatDurationFromString(e,r){let n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=l=>{switch(l[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(l,d)=>p=>{let f=i(p);if(f){let h=d.isNegativeDuration&&f!==d.largestUnit?n:1,g;return this.opts.signMode==="negativeLargestOnly"&&f!==d.largestUnit?g="never":this.opts.signMode==="all"?g="always":g="auto",this.num(l.get(f)*h,p.length,g)}else return p},o=t.parseFormat(r),a=o.reduce((l,{literal:d,val:p})=>d?l:l.concat(p),[]),u=e.shiftTo(...a.map(i).filter(l=>l)),c={isNegativeDuration:u<0,largestUnit:Object.keys(u.values)[0]};return $Qe(o,s(u,c))}},jXe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function M4(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function P4(...t){return e=>t.reduce(([r,n,i],s)=>{let[o,a,u]=s(e,i);return[{...r,...o},a||n,u]},[{},null,1]).slice(0,2)}function N4(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function $Xe(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=qm(e[r+i]);return[n,null,r+i]}}var KXe=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Lfr=`(?:${KXe.source}?(?:\\[(${jXe.source})\\])?)?`,hle=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,UXe=RegExp(`${hle.source}${Lfr}`),mle=RegExp(`(?:[Tt]${UXe.source})?`),jfr=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$fr=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Kfr=/(\d{4})-?(\d{3})/,Ufr=$Xe("weekYear","weekNumber","weekDay"),Vfr=$Xe("year","ordinal"),Gfr=/(\d{4})-(\d\d)-(\d\d)/,VXe=RegExp(`${hle.source} ?(?:${KXe.source}|(${jXe.source}))?`),Hfr=RegExp(`(?: ${VXe.source})?`);function D4(t,e,r){let n=t[e];return At(n)?r:qm(n)}function zfr(t,e){return[{year:D4(t,e),month:D4(t,e+1,1),day:D4(t,e+2,1)},null,e+3]}function F4(t,e){return[{hours:D4(t,e,0),minutes:D4(t,e+1,0),seconds:D4(t,e+2,0),milliseconds:ple(t[e+3])},null,e+4]}function A8(t,e){let r=!t[e]&&!t[e+1],n=kq(t[e+1],t[e+2]),i=r?null:qu.instance(n);return[{},i,e+3]}function C8(t,e){let r=t[e]?u1.create(t[e]):null;return[{},r,e+1]}var Wfr=RegExp(`^T?${hle.source}$`),Jfr=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Yfr(t){let[e,r,n,i,s,o,a,u,c]=t,l=e[0]==="-",d=u&&u[0]==="-",p=(f,h=!1)=>f!==void 0&&(h||f&&l)?-f:f;return[{years:p(p2(r)),months:p(p2(n)),weeks:p(p2(i)),days:p(p2(s)),hours:p(p2(o)),minutes:p(p2(a)),seconds:p(p2(u),u==="-0"),milliseconds:p(ple(c),d)}]}var Qfr={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function yle(t,e,r,n,i,s,o){let a={year:e.length===2?ale(qm(e)):qm(e),month:MXe.indexOf(r)+1,day:qm(n),hour:qm(i),minute:qm(s)};return o&&(a.second=qm(o)),t&&(a.weekday=t.length>3?NXe.indexOf(t)+1:FXe.indexOf(t)+1),a}var Xfr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Zfr(t){let[,e,r,n,i,s,o,a,u,c,l,d]=t,p=yle(e,i,n,r,s,o,a),f;return u?f=Qfr[u]:c?f=0:f=kq(l,d),[p,new qu(f)]}function e1r(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var t1r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,r1r=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,n1r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function KQe(t){let[,e,r,n,i,s,o,a]=t;return[yle(e,i,n,r,s,o,a),qu.utcInstance]}function i1r(t){let[,e,r,n,i,s,o,a]=t;return[yle(e,a,r,n,i,s,o),qu.utcInstance]}var s1r=M4(jfr,mle),o1r=M4($fr,mle),a1r=M4(Kfr,mle),u1r=M4(UXe),GXe=P4(zfr,F4,A8,C8),c1r=P4(Ufr,F4,A8,C8),l1r=P4(Vfr,F4,A8,C8),d1r=P4(F4,A8,C8);function p1r(t){return N4(t,[s1r,GXe],[o1r,c1r],[a1r,l1r],[u1r,d1r])}function f1r(t){return N4(e1r(t),[Xfr,Zfr])}function h1r(t){return N4(t,[t1r,KQe],[r1r,KQe],[n1r,i1r])}function m1r(t){return N4(t,[Jfr,Yfr])}var y1r=P4(F4);function g1r(t){return N4(t,[Wfr,y1r])}var E1r=M4(Gfr,Hfr),b1r=M4(VXe),_1r=P4(F4,A8,C8);function v1r(t){return N4(t,[E1r,GXe],[b1r,_1r])}var UQe="Invalid Duration",HXe={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},S1r={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...HXe},Wc=146097/400,O4=146097/4800,w1r={years:{quarters:4,months:12,weeks:Wc/7,days:Wc,hours:Wc*24,minutes:Wc*24*60,seconds:Wc*24*60*60,milliseconds:Wc*24*60*60*1e3},quarters:{months:3,weeks:Wc/28,days:Wc/4,hours:Wc*24/4,minutes:Wc*24*60/4,seconds:Wc*24*60*60/4,milliseconds:Wc*24*60*60*1e3/4},months:{weeks:O4/7,days:O4,hours:O4*24,minutes:O4*24*60,seconds:O4*24*60*60,milliseconds:O4*24*60*60*1e3},...HXe},h2=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],A1r=h2.slice(0).reverse();function o1(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ds(n)}function zXe(t,e){var r;let n=(r=e.milliseconds)!=null?r:0;for(let i of A1r.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function VQe(t,e){let r=zXe(t,e)<0?-1:1;h2.reduceRight((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]*r,o=t[i][n],a=Math.floor(s/o);e[i]+=a*r,e[n]-=a*o*r}return i},null),h2.reduce((n,i)=>{if(At(e[i]))return n;if(n){let s=e[n]%1;e[n]-=s,e[i]+=s*t[n][i]}return i},null)}function GQe(t){let e={};for(let[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}var ds=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1,n=r?w1r:S1r;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||cn.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new ks(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:xq(e,t.normalizeUnit),loc:cn.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if($m(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new ks(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=m1r(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=g1r(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new ks("need to specify a reason the Duration is invalid");let n=e instanceof Fu?e:new Fu(e,r);if(Mn.throwOnInvalid)throw new Wce(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new wq(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Nu.create(this.loc,n).formatDurationFromString(this,e):UQe}toHuman(e={}){if(!this.isValid)return UQe;let r=e.showZeros!==!1,n=h2.map(i=>{let s=this.values[i];return At(s)||s===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=fle(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Kn.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?zXe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of h2)(k4(r.values,i)||k4(this.values,i))&&(n[i]=r.get(i)+this.get(i));return o1(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=kXe(e(this.values[n],n));return o1(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...xq(e,t.normalizeUnit)};return o1(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){let o={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:n};return o1(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return VQe(this.matrix,e),o1(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=GQe(this.normalize().shiftToAll().toObject());return o1(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>t.normalizeUnit(o));let r={},n={},i=this.toObject(),s;for(let o of h2)if(e.indexOf(o)>=0){s=o;let a=0;for(let c in n)a+=this.matrix[c][o]*n[c],n[c]=0;$m(i[o])&&(a+=i[o]);let u=Math.trunc(a);r[o]=u,n[o]=(a*1e3-u*1e3)/1e3}else $m(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return VQe(this.matrix,r),o1(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return o1(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;let e=GQe(this.values);return o1(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of h2)if(!r(this.values[n],e.values[n]))return!1;return!0}},x4="Invalid Interval";function C1r(t,e){return!t||!t.isValid?y2.invalid("missing or invalid start"):!e||!e.isValid?y2.invalid("missing or invalid end"):e<t?y2.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var y2=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new ks("need to specify a reason the Interval is invalid");let n=e instanceof Fu?e:new Fu(e,r);if(Mn.throwOnInvalid)throw new zce(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=y8(e),i=y8(r),s=C1r(n,i);return s??new t({start:n,end:i})}static after(e,r){let n=ds.fromDurationLike(r),i=y8(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=ds.fromDurationLike(r),i=y8(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=Kn.fromISO(n,r),o=s.isValid}catch{o=!1}let a,u;try{a=Kn.fromISO(i,r),u=a.isValid}catch{u=!1}if(o&&u)return t.fromDateTimes(s,a);if(o){let c=ds.fromISO(i,r);if(c.isValid)return t.after(s,c)}else if(u){let c=ds.fromISO(n,r);if(c.isValid)return t.before(a,c)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;let n=this.start.startOf(e,r),i;return r!=null&&r.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(y8).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(t.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let r=ds.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(r.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(t.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,c)=>u.time-c.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?r=u.time:(r&&+r!=+u.time&&i.push(t.fromDateTimes(r,u.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:x4}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Aq,r={}){return this.isValid?Nu.create(this.s.loc.clone(r),e).formatInterval(this):x4}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:x4}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:x4}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:x4}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:x4}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):ds.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}},m2=class{static hasDST(e=Mn.defaultZone){let r=Kn.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return u1.isValidZone(e)}static normalizeZone(e){return Lm(e,Mn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||cn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||cn.create(r,n,s)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||cn.create(r,n,s)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||cn.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||cn.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return cn.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return cn.create(r,null,"gregory").eras(e)}static features(){return{relative:IXe(),localeWeek:RXe()}}};function HQe(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(ds.fromMillis(n).as("days"))}function T1r(t,e,r){let n=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{let l=HQe(u,c);return(l-l%7)/7}],["days",HQe]],i={},s=t,o,a;for(let[u,c]of n)r.indexOf(u)>=0&&(o=u,i[u]=c(t,e),a=s.plus(i),a>e?(i[u]--,t=s.plus(i),t>e&&(a=t,i[u]--,t=s.plus(i))):t=a);return[t,i,a,o]}function O1r(t,e,r,n){let[i,s,o,a]=T1r(t,e,r),u=e-i,c=r.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let l=ds.fromObject(s,n);return c.length>0?ds.fromMillis(u,n).shiftTo(...c).plus(l):l}var x1r="missing Intl.DateTimeFormat.formatToParts support";function Pr(t,e=r=>r){return{regex:t,deser:([r])=>e(Efr(r))}}var I1r="\xA0",WXe=`[ ${I1r}]`,JXe=new RegExp(WXe,"g");function R1r(t){return t.replace(/\./g,"\\.?").replace(JXe,WXe)}function zQe(t){return t.replace(/\./g,"").replace(JXe," ").toLowerCase()}function ld(t,e){return t===null?null:{regex:RegExp(t.map(R1r).join("|")),deser:([r])=>t.findIndex(n=>zQe(r)===zQe(n))+e}}function WQe(t,e){return{regex:t,deser:([,r,n])=>kq(r,n),groups:e}}function gq(t){return{regex:t,deser:([e])=>e}}function D1r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k1r(t,e){let r=cd(e),n=cd(e,"{2}"),i=cd(e,"{3}"),s=cd(e,"{4}"),o=cd(e,"{6}"),a=cd(e,"{1,2}"),u=cd(e,"{1,3}"),c=cd(e,"{1,6}"),l=cd(e,"{1,9}"),d=cd(e,"{2,4}"),p=cd(e,"{4,6}"),f=_=>({regex:RegExp(D1r(_.val)),deser:([S])=>S,literal:!0}),g=(_=>{if(t.literal)return f(_);switch(_.val){case"G":return ld(e.eras("short"),0);case"GG":return ld(e.eras("long"),0);case"y":return Pr(c);case"yy":return Pr(d,ale);case"yyyy":return Pr(s);case"yyyyy":return Pr(p);case"yyyyyy":return Pr(o);case"M":return Pr(a);case"MM":return Pr(n);case"MMM":return ld(e.months("short",!0),1);case"MMMM":return ld(e.months("long",!0),1);case"L":return Pr(a);case"LL":return Pr(n);case"LLL":return ld(e.months("short",!1),1);case"LLLL":return ld(e.months("long",!1),1);case"d":return Pr(a);case"dd":return Pr(n);case"o":return Pr(u);case"ooo":return Pr(i);case"HH":return Pr(n);case"H":return Pr(a);case"hh":return Pr(n);case"h":return Pr(a);case"mm":return Pr(n);case"m":return Pr(a);case"q":return Pr(a);case"qq":return Pr(n);case"s":return Pr(a);case"ss":return Pr(n);case"S":return Pr(u);case"SSS":return Pr(i);case"u":return gq(l);case"uu":return gq(a);case"uuu":return Pr(r);case"a":return ld(e.meridiems(),0);case"kkkk":return Pr(s);case"kk":return Pr(d,ale);case"W":return Pr(a);case"WW":return Pr(n);case"E":case"c":return Pr(r);case"EEE":return ld(e.weekdays("short",!1),1);case"EEEE":return ld(e.weekdays("long",!1),1);case"ccc":return ld(e.weekdays("short",!0),1);case"cccc":return ld(e.weekdays("long",!0),1);case"Z":case"ZZ":return WQe(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return WQe(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return gq(/[a-z_+-/]{1,256}?/i);case" ":return gq(/[^\S\n\r]/);default:return f(_)}})(t)||{invalidReason:x1r};return g.token=t,g}var M1r={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function P1r(t,e,r){let{type:n,value:i}=t;if(n==="literal"){let u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}let s=e[n],o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=M1r[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function N1r(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function F1r(t,e,r){let n=t.match(e);if(n){let i={},s=1;for(let o in r)if(k4(r,o)){let a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function B1r(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return At(t.z)||(r=u1.create(t.z)),At(t.Z)||(r||(r=new qu(t.Z)),n=t.Z),At(t.q)||(t.M=(t.q-1)*3+1),At(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),At(t.u)||(t.S=ple(t.u)),[Object.keys(t).reduce((s,o)=>{let a=e(o);return a&&(s[a]=t[o]),s},{}),r,n]}var $ce=null;function q1r(){return $ce||($ce=Kn.fromMillis(1555555555555)),$ce}function L1r(t,e){if(t.literal)return t;let r=Nu.macroTokenToFormatOpts(t.val),n=XXe(r,e);return n==null||n.includes(void 0)?t:n}function YXe(t,e){return Array.prototype.concat(...t.map(r=>L1r(r,e)))}var Iq=class{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=YXe(Nu.parseFormat(r),e),this.units=this.tokens.map(n=>k1r(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){let[n,i]=N1r(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){let[r,n]=F1r(e,this.regex,this.handlers),[i,s,o]=n?B1r(n):[null,null,void 0];if(k4(n,"a")&&k4(n,"H"))throw new jm("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function QXe(t,e,r){return new Iq(t,r).explainFromTokens(e)}function j1r(t,e,r){let{result:n,zone:i,specificOffset:s,invalidReason:o}=QXe(t,e,r);return[n,i,s,o]}function XXe(t,e){if(!t)return null;let n=Nu.create(e,t).dtFormatter(q1r()),i=n.formatToParts(),s=n.resolvedOptions();return i.map(o=>P1r(o,t,s))}var Kce="Invalid DateTime",JQe=864e13;function E8(t){return new Fu("unsupported zone",`the zone "${t.name}" is not supported`)}function Uce(t){return t.weekData===null&&(t.weekData=Tq(t.c)),t.weekData}function Vce(t){return t.localWeekData===null&&(t.localWeekData=Tq(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function f2(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Kn({...r,...e,old:r})}function ZXe(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=r.offset(n);return i===s?[n,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Eq(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function _q(t,e,r){return ZXe(Dq(t),e,r)}function YQe(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:i,day:Math.min(t.c.day,Oq(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=ds.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Dq(s),[u,c]=ZXe(a,r,t.zone);return o!==0&&(u+=o,c=t.zone.offset(u)),{ts:u,o:c}}function I4(t,e,r,n,i,s){let{setZone:o,zone:a}=r;if(t&&Object.keys(t).length!==0||e){let u=e||a,c=Kn.fromObject(t,{...r,zone:u,specificOffset:s});return o?c:c.setZone(a)}else return Kn.invalid(new Fu("unparsable",`the input "${i}" can't be parsed as ${n}`))}function bq(t,e,r=!0){return t.isValid?Nu.create(cn.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Gce(t,e,r){let n=t.c.year>9999||t.c.year<0,i="";if(n&&t.c.year>=0&&(i+="+"),i+=Vi(t.c.year,n?6:4),r==="year")return i;if(e){if(i+="-",i+=Vi(t.c.month),r==="month")return i;i+="-"}else if(i+=Vi(t.c.month),r==="month")return i;return i+=Vi(t.c.day),i}function QQe(t,e,r,n,i,s,o){let a=!r||t.c.millisecond!==0||t.c.second!==0,u="";switch(o){case"day":case"month":case"year":break;default:if(u+=Vi(t.c.hour),o==="hour")break;if(e){if(u+=":",u+=Vi(t.c.minute),o==="minute")break;a&&(u+=":",u+=Vi(t.c.second))}else{if(u+=Vi(t.c.minute),o==="minute")break;a&&(u+=Vi(t.c.second))}if(o==="second")break;a&&(!n||t.c.millisecond!==0)&&(u+=".",u+=Vi(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?u+="Z":t.o<0?(u+="-",u+=Vi(Math.trunc(-t.o/60)),u+=":",u+=Vi(Math.trunc(-t.o%60))):(u+="+",u+=Vi(Math.trunc(t.o/60)),u+=":",u+=Vi(Math.trunc(t.o%60)))),s&&(u+="["+t.zone.ianaName+"]"),u}var eZe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},$1r={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},K1r={ordinal:1,hour:0,minute:0,second:0,millisecond:0},vq=["year","month","day","hour","minute","second","millisecond"],U1r=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],V1r=["year","ordinal","hour","minute","second","millisecond"];function Sq(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new wq(t);return e}function XQe(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Sq(t)}}function G1r(t){if(b8===void 0&&(b8=Mn.now()),t.type!=="iana")return t.offset(b8);let e=t.name,r=ule.get(e);return r===void 0&&(r=t.offset(b8),ule.set(e,r)),r}function ZQe(t,e){let r=Lm(e.zone,Mn.defaultZone);if(!r.isValid)return Kn.invalid(E8(r));let n=cn.fromObject(e),i,s;if(At(t.year))i=Mn.now();else{for(let u of vq)At(t[u])&&(t[u]=eZe[u]);let o=OXe(t)||xXe(t);if(o)return Kn.invalid(o);let a=G1r(r);[i,s]=_q(t,a,r)}return new Kn({ts:i,zone:r,loc:n,o:s})}function eXe(t,e,r){let n=At(r.round)?!0:r.round,i=At(r.rounding)?"trunc":r.rounding,s=(a,u)=>(a=fle(a,n||r.calendary?0:2,r.calendary?"round":i),e.loc.clone(r).relFormatter(r).format(a,u)),o=a=>r.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(r.unit)return s(o(r.unit),r.unit);for(let a of r.units){let u=o(a);if(Math.abs(u)>=1)return s(u,a)}return s(t>e?-0:0,r.units[r.units.length-1])}function tXe(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var b8,ule=new Map,Kn=class t{constructor(e){let r=e.zone||Mn.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Fu("invalid input"):null)||(r.isValid?null:E8(r));this.ts=At(e.ts)?Mn.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,s]=[e.old.c,e.old.o];else{let a=$m(e.o)&&!e.old?e.o:r.offset(this.ts);i=Eq(this.ts,a),n=Number.isNaN(i.year)?new Fu("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=r,this.loc=e.loc||cn.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=tXe(arguments),[n,i,s,o,a,u,c]=r;return ZQe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static utc(){let[e,r]=tXe(arguments),[n,i,s,o,a,u,c]=r;return e.zone=qu.utcInstance,ZQe({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static fromJSDate(e,r={}){let n=wfr(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=Lm(r.zone,Mn.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:cn.fromObject(r)}):t.invalid(E8(i))}static fromMillis(e,r={}){if($m(e))return e<-JQe||e>JQe?t.invalid("Timestamp out of range"):new t({ts:e,zone:Lm(r.zone,Mn.defaultZone),loc:cn.fromObject(r)});throw new ks(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if($m(e))return new t({ts:e*1e3,zone:Lm(r.zone,Mn.defaultZone),loc:cn.fromObject(r)});throw new ks("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=Lm(r.zone,Mn.defaultZone);if(!n.isValid)return t.invalid(E8(n));let i=cn.fromObject(r),s=xq(e,XQe),{minDaysInFirstWeek:o,startOfWeek:a}=qQe(s,i),u=Mn.now(),c=At(r.specificOffset)?n.offset(u):r.specificOffset,l=!At(s.ordinal),d=!At(s.year),p=!At(s.month)||!At(s.day),f=d||p,h=s.weekYear||s.weekNumber;if((f||l)&&h)throw new jm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&l)throw new jm("Can't mix ordinal dates with month/day");let g=h||s.weekday&&!f,_,S,w=Eq(u,c);g?(_=U1r,S=$1r,w=Tq(w,o,a)):l?(_=V1r,S=K1r,w=jce(w)):(_=vq,S=eZe);let C=!1;for(let F of _){let B=s[F];At(B)?C?s[F]=S[F]:s[F]=w[F]:C=!0}let A=g?_fr(s,o,a):l?vfr(s):OXe(s),O=A||xXe(s);if(O)return t.invalid(O);let x=g?FQe(s,o,a):l?BQe(s):s,[R,M]=_q(x,c,n),I=new t({ts:R,zone:n,o:M,loc:i});return s.weekday&&f&&e.weekday!==I.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${I.toISO()}`):I.isValid?I:t.invalid(I.invalid)}static fromISO(e,r={}){let[n,i]=p1r(e);return I4(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=f1r(e);return I4(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=h1r(e);return I4(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(At(e)||At(r))throw new ks("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,c,l]=j1r(o,e,r);return l?t.invalid(l):I4(a,u,n,`format ${r}`,e,c)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=v1r(e);return I4(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new ks("need to specify a reason the DateTime is invalid");let n=e instanceof Fu?e:new Fu(e,r);if(Mn.throwOnInvalid)throw new Hce(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=XXe(e,cn.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return YXe(Nu.parseFormat(e),cn.fromObject(r)).map(i=>i.val).join("")}static resetCache(){b8=void 0,ule.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Uce(this).weekYear:NaN}get weekNumber(){return this.isValid?Uce(this).weekNumber:NaN}get weekday(){return this.isValid?Uce(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Vce(this).weekday:NaN}get localWeekNumber(){return this.isValid?Vce(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Vce(this).weekYear:NaN}get ordinal(){return this.isValid?jce(this.c).ordinal:NaN}get monthShort(){return this.isValid?m2.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?m2.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?m2.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?m2.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,r=6e4,n=Dq(this.c),i=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-i*r),a=this.zone.offset(n-s*r);if(o===a)return[this];let u=n-o*r,c=n-a*r,l=Eq(u,o),d=Eq(c,a);return l.hour===d.hour&&l.minute===d.minute&&l.second===d.second&&l.millisecond===d.millisecond?[f2(this,{ts:u}),f2(this,{ts:c})]:[this]}get isInLeapYear(){return w8(this.year)}get daysInMonth(){return Oq(this.year,this.month)}get daysInYear(){return this.isValid?R4(this.year):NaN}get weeksInWeekYear(){return this.isValid?S8(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?S8(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=Nu.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(qu.instance(e),r)}toLocal(){return this.setZone(Mn.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=Lm(e,Mn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let s=e.offset(this.ts),o=this.toObject();[i]=_q(o,s,e)}return f2(this,{ts:i,zone:e})}else return t.invalid(E8(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return f2(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=xq(e,XQe),{minDaysInFirstWeek:n,startOfWeek:i}=qQe(r,this.loc),s=!At(r.weekYear)||!At(r.weekNumber)||!At(r.weekday),o=!At(r.ordinal),a=!At(r.year),u=!At(r.month)||!At(r.day),c=a||u,l=r.weekYear||r.weekNumber;if((c||o)&&l)throw new jm("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new jm("Can't mix ordinal dates with month/day");let d;s?d=FQe({...Tq(this.c,n,i),...r},n,i):At(r.ordinal)?(d={...this.toObject(),...r},At(r.day)&&(d.day=Math.min(Oq(d.year,d.month),d.day))):d=BQe({...jce(this.c),...r});let[p,f]=_q(d,this.o,this.zone);return f2(this,{ts:p,o:f})}plus(e){if(!this.isValid)return this;let r=ds.fromDurationLike(e);return f2(this,YQe(this,r))}minus(e){if(!this.isValid)return this;let r=ds.fromDurationLike(e).negate();return f2(this,YQe(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;let n={},i=ds.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(r){let s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(i==="quarters"){let s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Nu.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):Kce}toLocaleString(e=Aq,r={}){return this.isValid?Nu.create(this.loc.clone(r),e).formatDateTime(this):Kce}toLocaleParts(e={}){return this.isValid?Nu.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=Sq(o);let a=e==="extended",u=Gce(this,a,o);return vq.indexOf(o)>=3&&(u+="T"),u+=QQe(this,a,r,n,i,s,o),u}toISODate({format:e="extended",precision:r="day"}={}){return this.isValid?Gce(this,e==="extended",Sq(r)):null}toISOWeekDate(){return bq(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=Sq(a),(i&&vq.indexOf(a)>=3?"T":"")+QQe(this,o==="extended",r,e,n,s,a)):null}toRFC2822(){return bq(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return bq(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Gce(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),bq(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Kce}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return ds.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=Afr(r).map(ds.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,c=O1r(a,u,s,i);return o?c.negate():c}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?y2.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;let i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(r,n)<=i&&i<=s.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),eXe(r,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?eXe(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new ks("min requires all arguments be DateTimes");return LQe(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new ks("max requires all arguments be DateTimes");return LQe(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return QXe(o,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){let{locale:n=null,numberingSystem:i=null}=r,s=cn.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new Iq(s,e)}static fromFormatParser(e,r,n={}){if(At(e)||At(r))throw new ks("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:s=null}=n,o=cn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new ks(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);let{result:a,zone:u,specificOffset:c,invalidReason:l}=r.explainFromTokens(e);return l?t.invalid(l):I4(a,u,n,`format ${r.format}`,e,c)}static get DATE_SHORT(){return Aq}static get DATE_MED(){return rXe}static get DATE_MED_WITH_WEEKDAY(){return tfr}static get DATE_FULL(){return nXe}static get DATE_HUGE(){return iXe}static get TIME_SIMPLE(){return sXe}static get TIME_WITH_SECONDS(){return oXe}static get TIME_WITH_SHORT_OFFSET(){return aXe}static get TIME_WITH_LONG_OFFSET(){return uXe}static get TIME_24_SIMPLE(){return cXe}static get TIME_24_WITH_SECONDS(){return lXe}static get TIME_24_WITH_SHORT_OFFSET(){return dXe}static get TIME_24_WITH_LONG_OFFSET(){return pXe}static get DATETIME_SHORT(){return fXe}static get DATETIME_SHORT_WITH_SECONDS(){return hXe}static get DATETIME_MED(){return mXe}static get DATETIME_MED_WITH_SECONDS(){return yXe}static get DATETIME_MED_WITH_WEEKDAY(){return rfr}static get DATETIME_FULL(){return gXe}static get DATETIME_FULL_WITH_SECONDS(){return EXe}static get DATETIME_HUGE(){return bXe}static get DATETIME_HUGE_WITH_SECONDS(){return _Xe}};function y8(t){if(Kn.isDateTime(t))return t;if(t&&t.valueOf&&$m(t.valueOf()))return Kn.fromJSDate(t);if(t&&typeof t=="object")return Kn.fromObject(t);throw new ks(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var H1r="3.7.2";Lu.DateTime=Kn;Lu.Duration=ds;Lu.FixedOffsetZone=qu;Lu.IANAZone=u1;Lu.Info=m2;Lu.Interval=y2;Lu.InvalidZone=Cq;Lu.Settings=Mn;Lu.SystemZone=v8;Lu.VERSION=H1r;Lu.Zone=Km});var nZe=m((rBr,rZe)=>{"use strict";var g2=tZe();Rt.prototype.addYear=function(){this._date=this._date.plus({years:1})};Rt.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")};Rt.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")};Rt.prototype.addHour=function(){var t=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=t&&(this._date=this._date.plus({hours:1}))};Rt.prototype.addMinute=function(){var t=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<t&&(this._date=this._date.plus({hours:1}))};Rt.prototype.addSecond=function(){var t=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<t&&(this._date=this._date.plus({hours:1}))};Rt.prototype.subtractYear=function(){this._date=this._date.minus({years:1})};Rt.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")};Rt.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")};Rt.prototype.subtractHour=function(){var t=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=t&&(this._date=this._date.minus({hours:1}))};Rt.prototype.subtractMinute=function(){var t=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};Rt.prototype.subtractSecond=function(){var t=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>t&&(this._date=this._date.minus({hours:1}))};Rt.prototype.getDate=function(){return this._date.day};Rt.prototype.getFullYear=function(){return this._date.year};Rt.prototype.getDay=function(){var t=this._date.weekday;return t==7?0:t};Rt.prototype.getMonth=function(){return this._date.month-1};Rt.prototype.getHours=function(){return this._date.hour};Rt.prototype.getMinutes=function(){return this._date.minute};Rt.prototype.getSeconds=function(){return this._date.second};Rt.prototype.getMilliseconds=function(){return this._date.millisecond};Rt.prototype.getTime=function(){return this._date.valueOf()};Rt.prototype.getUTCDate=function(){return this._getUTC().day};Rt.prototype.getUTCFullYear=function(){return this._getUTC().year};Rt.prototype.getUTCDay=function(){var t=this._getUTC().weekday;return t==7?0:t};Rt.prototype.getUTCMonth=function(){return this._getUTC().month-1};Rt.prototype.getUTCHours=function(){return this._getUTC().hour};Rt.prototype.getUTCMinutes=function(){return this._getUTC().minute};Rt.prototype.getUTCSeconds=function(){return this._getUTC().second};Rt.prototype.toISOString=function(){return this._date.toUTC().toISO()};Rt.prototype.toJSON=function(){return this._date.toJSON()};Rt.prototype.setDate=function(t){this._date=this._date.set({day:t})};Rt.prototype.setFullYear=function(t){this._date=this._date.set({year:t})};Rt.prototype.setDay=function(t){this._date=this._date.set({weekday:t})};Rt.prototype.setMonth=function(t){this._date=this._date.set({month:t+1})};Rt.prototype.setHours=function(t){this._date=this._date.set({hour:t})};Rt.prototype.setMinutes=function(t){this._date=this._date.set({minute:t})};Rt.prototype.setSeconds=function(t){this._date=this._date.set({second:t})};Rt.prototype.setMilliseconds=function(t){this._date=this._date.set({millisecond:t})};Rt.prototype._getUTC=function(){return this._date.toUTC()};Rt.prototype.toString=function(){return this.toDate().toString()};Rt.prototype.toDate=function(){return this._date.toJSDate()};Rt.prototype.isLastDayOfMonth=function(){var t=this._date.plus({days:1}).startOf("day");return this._date.month!==t.month};Rt.prototype.isLastWeekdayOfMonth=function(){var t=this._date.plus({days:7}).startOf("day");return this._date.month!==t.month};function Rt(t,e){var r={zone:e};if(t?t instanceof Rt?this._date=t._date:t instanceof Date?this._date=g2.DateTime.fromJSDate(t,r):typeof t=="number"?this._date=g2.DateTime.fromMillis(t,r):typeof t=="string"&&(this._date=g2.DateTime.fromISO(t,r),this._date.isValid||(this._date=g2.DateTime.fromRFC2822(t,r)),this._date.isValid||(this._date=g2.DateTime.fromSQL(t,r)),this._date.isValid||(this._date=g2.DateTime.fromFormat(t,"EEE, d MMM yyyy HH:mm:ss",r))):this._date=g2.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(t));e&&e!==this._date.zoneName&&(this._date=this._date.setZone(e))}rZe.exports=Rt});var oZe=m((nBr,sZe)=>{"use strict";function E2(t){return{start:t,count:1}}function iZe(t,e){t.end=e,t.step=e-t.start,t.count=2}function gle(t,e,r){e&&(e.count===2?(t.push(E2(e.start)),t.push(E2(e.end))):t.push(e)),r&&t.push(r)}function z1r(t){for(var e=[],r=void 0,n=0;n<t.length;n++){var i=t[n];typeof i!="number"?(gle(e,r,E2(i)),r=void 0):r?r.count===1?iZe(r,i):r.step===i-r.end?(r.count++,r.end=i):r.count===2?(e.push(E2(r.start)),r=E2(r.end),iZe(r,i)):(gle(e,r),r=E2(i)):r=E2(i)}return gle(e,r),e}sZe.exports=z1r});var uZe=m((iBr,aZe)=>{"use strict";var W1r=oZe();function J1r(t,e,r){var n=W1r(t);if(n.length===1){var i=n[0],s=i.step;if(s===1&&i.start===e&&i.end===r)return"*";if(s!==1&&i.start===e&&i.end===r-s+1)return"*/"+s}for(var o=[],a=0,u=n.length;a<u;++a){var c=n[a];if(c.count===1){o.push(c.start);continue}var s=c.step;if(c.step===1){o.push(c.start+"-"+c.end);continue}var l=c.start==0?c.count-1:c.count;c.step*l>c.end?o=o.concat(Array.from({length:c.end-c.start+1}).map(function(p,f){var h=c.start+f;return(h-c.start)%c.step===0?h:null}).filter(function(p){return p!=null})):c.end===r-c.step+1?o.push(c.start+"/"+c.step):o.push(c.start+"-"+c.end+"/"+c.step)}return o.join(",")}aZe.exports=J1r});var dZe=m((sBr,lZe)=>{"use strict";var b2=nZe(),Y1r=uZe(),cZe=1e4;function We(t,e){this._options=e,this._utc=e.utc||!1,this._tz=this._utc?"UTC":e.tz,this._currentDate=new b2(e.currentDate,this._tz),this._startDate=e.startDate?new b2(e.startDate,this._tz):null,this._endDate=e.endDate?new b2(e.endDate,this._tz):null,this._isIterator=e.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=e.nthDayOfWeek||0,this.fields=We._freezeFields(t)}We.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"];We.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"};We.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}];We.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31];We.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}};We.parseDefaults=["0","*","*","*","*","*"];We.standardValidCharacters=/^[,*\d/-]+$/;We.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/;We.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/;We.validCharacters={second:We.standardValidCharacters,minute:We.standardValidCharacters,hour:We.standardValidCharacters,dayOfMonth:We.dayOfMonthValidCharacters,month:We.standardValidCharacters,dayOfWeek:We.dayOfWeekValidCharacters};We._isValidConstraintChar=function(e,r){return typeof r!="string"?!1:e.chars.some(function(n){return r.indexOf(n)>-1})};We._parseField=function(e,r,n){switch(e){case"month":case"dayOfWeek":var i=We.aliases[e];r=r.replace(/[a-z]{3}/gi,function(u){if(u=u.toLowerCase(),typeof i[u]<"u")return i[u];throw new Error('Validation error, cannot resolve alias "'+u+'"')});break}if(!We.validCharacters[e].test(r))throw new Error("Invalid characters, got value: "+r);r.indexOf("*")!==-1?r=r.replace(/\*/g,n.min+"-"+n.max):r.indexOf("?")!==-1&&(r=r.replace(/\?/g,n.min+"-"+n.max));function s(u){var c=[];function l(h){if(h instanceof Array)for(var g=0,_=h.length;g<_;g++){var S=h[g];if(We._isValidConstraintChar(n,S)){c.push(S);continue}if(typeof S!="number"||Number.isNaN(S)||S<n.min||S>n.max)throw new Error("Constraint error, got value "+S+" expected range "+n.min+"-"+n.max);c.push(S)}else{if(We._isValidConstraintChar(n,h)){c.push(h);return}var w=+h;if(Number.isNaN(w)||w<n.min||w>n.max)throw new Error("Constraint error, got value "+h+" expected range "+n.min+"-"+n.max);e==="dayOfWeek"&&(w=w%7),c.push(w)}}var d=u.split(",");if(!d.every(function(h){return h.length>0}))throw new Error("Invalid list value format");if(d.length>1)for(var p=0,f=d.length;p<f;p++)l(o(d[p]));else l(o(u));return c.sort(We._sortCompareFn),c}function o(u){var c=1,l=u.split("/");if(l.length>2)throw new Error("Invalid repeat: "+u);return l.length>1?(l[0]==+l[0]&&(l=[l[0]+"-"+n.max,l[1]]),a(l[0],l[l.length-1])):a(u,c)}function a(u,c){var l=[],d=u.split("-");if(d.length>1){if(d.length<2)return+u;if(!d[0].length){if(!d[1].length)throw new Error("Invalid range: "+u);return+u}var p=+d[0],f=+d[1];if(Number.isNaN(p)||Number.isNaN(f)||p<n.min||f>n.max)throw new Error("Constraint error, got range "+p+"-"+f+" expected range "+n.min+"-"+n.max);if(p>f)throw new Error("Invalid range: "+u);var h=+c;if(Number.isNaN(h)||h<=0)throw new Error("Constraint error, cannot repeat at every "+h+" time.");e==="dayOfWeek"&&f%7===0&&l.push(0);for(var g=p,_=f;g<=_;g++){var S=l.indexOf(g)!==-1;!S&&h>0&&h%c===0?(h=1,l.push(g)):h++}return l}return Number.isNaN(+u)?u:+u}return s(r)};We._sortCompareFn=function(t,e){var r=typeof t=="number",n=typeof e=="number";return r&&n?t-e:!r&&n?1:r&&!n?-1:t.localeCompare(e)};We._handleMaxDaysInMonth=function(t){if(t.month.length===1){var e=We.daysInMonth[t.month[0]-1];if(t.dayOfMonth[0]>e)throw new Error("Invalid explicit day of month definition");return t.dayOfMonth.filter(function(r){return r==="L"?!0:r<=e}).sort(We._sortCompareFn)}};We._freezeFields=function(t){for(var e=0,r=We.map.length;e<r;++e){var n=We.map[e],i=t[n];t[n]=Object.freeze(i)}return Object.freeze(t)};We.prototype._applyTimezoneShift=function(t,e,r){if(r==="Month"||r==="Day"){var n=t.getTime();t[e+r]();var i=t.getTime();n===i&&(t.getMinutes()===0&&t.getSeconds()===0?t.addHour():t.getMinutes()===59&&t.getSeconds()===59&&t.subtractHour())}else{var s=t.getHours();t[e+r]();var o=t.getHours(),a=o-s;a===2?this.fields.hour.length!==24&&(this._dstStart=o):a===0&&t.getMinutes()===0&&t.getSeconds()===0&&this.fields.hour.length!==24&&(this._dstEnd=o)}};We.prototype._findSchedule=function(e){function r(S,w){for(var C=0,A=w.length;C<A;C++)if(w[C]>=S)return w[C]===S;return w[0]===S}function n(S,w){if(w<6){if(S.getDate()<8&&w===1)return!0;var C=S.getDate()%7?1:0,A=S.getDate()-S.getDate()%7,O=Math.floor(A/7)+C;return O===w}return!1}function i(S){return S.length>0&&S.some(function(w){return typeof w=="string"&&w.indexOf("L")>=0})}e=e||!1;var s=e?"subtract":"add",o=new b2(this._currentDate,this._tz),a=this._startDate,u=this._endDate,c=o.getTime(),l=0;function d(S){return S.some(function(w){if(!i([w]))return!1;var C=Number.parseInt(w[0])%7;if(Number.isNaN(C))throw new Error("Invalid last weekday of the month expression: "+w);return o.getDay()===C&&o.isLastWeekdayOfMonth()})}for(;l<cZe;){if(l++,e){if(a&&o.getTime()-a.getTime()<0)throw new Error("Out of the timespan range")}else if(u&&u.getTime()-o.getTime()<0)throw new Error("Out of the timespan range");var p=r(o.getDate(),this.fields.dayOfMonth);i(this.fields.dayOfMonth)&&(p=p||o.isLastDayOfMonth());var f=r(o.getDay(),this.fields.dayOfWeek);i(this.fields.dayOfWeek)&&(f=f||d(this.fields.dayOfWeek));var h=this.fields.dayOfMonth.length>=We.daysInMonth[o.getMonth()],g=this.fields.dayOfWeek.length===We.constraints[5].max-We.constraints[5].min+1,_=o.getHours();if(!p&&(!f||g)){this._applyTimezoneShift(o,s,"Day");continue}if(!h&&g&&!p){this._applyTimezoneShift(o,s,"Day");continue}if(h&&!g&&!f){this._applyTimezoneShift(o,s,"Day");continue}if(this._nthDayOfWeek>0&&!n(o,this._nthDayOfWeek)){this._applyTimezoneShift(o,s,"Day");continue}if(!r(o.getMonth()+1,this.fields.month)){this._applyTimezoneShift(o,s,"Month");continue}if(r(_,this.fields.hour)){if(this._dstEnd===_&&!e){this._dstEnd=null,this._applyTimezoneShift(o,"add","Hour");continue}}else if(this._dstStart!==_){this._dstStart=null,this._applyTimezoneShift(o,s,"Hour");continue}else if(!r(_-1,this.fields.hour)){o[s+"Hour"]();continue}if(!r(o.getMinutes(),this.fields.minute)){this._applyTimezoneShift(o,s,"Minute");continue}if(!r(o.getSeconds(),this.fields.second)){this._applyTimezoneShift(o,s,"Second");continue}if(c===o.getTime()){s==="add"||o.getMilliseconds()===0?this._applyTimezoneShift(o,s,"Second"):o.setMilliseconds(0);continue}break}if(l>=cZe)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new b2(o,this._tz),this._hasIterated=!0,o};We.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e};We.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e};We.prototype.hasNext=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};We.prototype.hasPrev=function(){var t=this._currentDate,e=this._hasIterated;try{return this._findSchedule(!0),!0}catch{return!1}finally{this._currentDate=t,this._hasIterated=e}};We.prototype.iterate=function(e,r){var n=[];if(e>=0)for(var i=0,s=e;i<s;i++)try{var o=this.next();n.push(o),r&&r(o,i)}catch{break}else for(var i=0,s=e;i>s;i--)try{var o=this.prev();n.push(o),r&&r(o,i)}catch{break}return n};We.prototype.reset=function(e){this._currentDate=new b2(e||this._options.currentDate)};We.prototype.stringify=function(e){for(var r=[],n=e?0:1,i=We.map.length;n<i;++n){var s=We.map[n],o=this.fields[s],a=We.constraints[n];s==="dayOfMonth"&&this.fields.month.length===1?a={min:1,max:We.daysInMonth[this.fields.month[0]-1]}:s==="dayOfWeek"&&(a={min:0,max:6},o=o[o.length-1]===7?o.slice(0,-1):o),r.push(Y1r(o,a.min,a.max))}return r.join(" ")};We.parse=function(e,r){var n=this;typeof r=="function"&&(r={});function i(s,o){o||(o={}),typeof o.currentDate>"u"&&(o.currentDate=new b2(void 0,n._tz)),We.predefined[s]&&(s=We.predefined[s]);var a=[],u=(s+"").trim().split(/\s+/);if(u.length>6)throw new Error("Invalid cron expression");for(var c=We.map.length-u.length,l=0,d=We.map.length;l<d;++l){var p=We.map[l],f=u[u.length>d?l:l-c];if(l<c||!f)a.push(We._parseField(p,We.parseDefaults[l],We.constraints[l]));else{var h=p==="dayOfWeek"?w(f):f;a.push(We._parseField(p,h,We.constraints[l]))}}for(var g={},l=0,d=We.map.length;l<d;l++){var _=We.map[l];g[_]=a[l]}var S=We._handleMaxDaysInMonth(g);return g.dayOfMonth=S||g.dayOfMonth,new We(g,o);function w(C){var A=C.split("#");if(A.length>1){var O=+A[A.length-1];if(/,/.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(C))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(A.length>2||Number.isNaN(O)||O<1||O>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return o.nthDayOfWeek=O,A[0]}return C}}return i(e,r)};We.fieldsToExpression=function(e,r){function n(p,f,h){if(!f)throw new Error("Validation error, Field "+p+" is missing");if(f.length===0)throw new Error("Validation error, Field "+p+" contains no values");for(var g=0,_=f.length;g<_;g++){var S=f[g];if(!We._isValidConstraintChar(h,S)&&(typeof S!="number"||Number.isNaN(S)||S<h.min||S>h.max))throw new Error("Constraint error, got value "+S+" expected range "+h.min+"-"+h.max)}}for(var i={},s=0,o=We.map.length;s<o;++s){var a=We.map[s],u=e[a];n(a,u,We.constraints[s]);for(var c=[],l=-1;++l<u.length;)c[l]=u[l];if(u=c.sort(We._sortCompareFn).filter(function(p,f,h){return!f||p!==h[f-1]}),u.length!==c.length)throw new Error("Validation error, Field "+a+" contains duplicate values");i[a]=u}var d=We._handleMaxDaysInMonth(i);return i.dayOfMonth=d||i.dayOfMonth,new We(i,r||{})};lZe.exports=We});var Ele=m((oBr,pZe)=>{"use strict";var Pq=dZe();function Um(){}Um._parseEntry=function(e){var r=e.split(" ");if(r.length===6)return{interval:Pq.parse(e)};if(r.length>6)return{interval:Pq.parse(r.slice(0,6).join(" ")),command:r.slice(6,r.length)};throw new Error("Invalid entry: "+e)};Um.parseExpression=function(e,r){return Pq.parse(e,r)};Um.fieldsToExpression=function(e,r){return Pq.fieldsToExpression(e,r)};Um.parseString=function(e){for(var r=e.split(`
`),n={variables:{},expressions:[],errors:{}},i=0,s=r.length;i<s;i++){var o=r[i],a=null,u=o.trim();if(u.length>0){if(u.match(/^#/))continue;if(a=u.match(/^(.*)=(.*)$/))n.variables[a[1]]=a[2];else{var c=null;try{c=Um._parseEntry("0 "+u),n.expressions.push(c.interval)}catch(l){n.errors[u]=l}}}}return n};Um.parseFile=function(e,r){require("fs").readFile(e,function(n,i){if(n){r(n);return}return r(null,Um.parseString(i.toString()))})};pZe.exports=Um});var Vm=m(Nq=>{"use strict";Object.defineProperty(Nq,"__esModule",{value:!0});Nq.QueueBase=void 0;var Q1r=require("events"),T8=Hc(),X1r=hB(),Z1r=m8(),ehr=T4(),thr=yB(),ble=class extends Q1r.EventEmitter{constructor(e,r={connection:{}},n=Z1r.RedisConnection,i=!1){if(super(),this.name=e,this.opts=r,this.closed=!1,this.hasBlockingConnection=!1,this.hasBlockingConnection=i,this.opts=Object.assign({prefix:"bull"},r),!e)throw new Error("Queue name must be provided");if(e.includes(":"))throw new Error("Queue name cannot contain :");this.connection=new n(r.connection,{shared:(0,T8.isRedisInstance)(r.connection),blocking:i,skipVersionCheck:r.skipVersionCheck,skipWaitingForReady:r.skipWaitingForReady}),this.connection.on("error",o=>this.emit("error",o)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")});let s=new thr.QueueKeys(r.prefix);this.qualifiedName=s.getQueueQualifiedName(e),this.keys=s.getKeys(e),this.toKey=o=>s.toKey(e,o),this.createScripts()}get client(){return this.connection.client}createScripts(){this.scripts=(0,X1r.createScripts)(this)}get redisVersion(){return this.connection.redisVersion}get Job(){return ehr.Job}emit(e,...r){try{return super.emit(e,...r)}catch(n){try{return super.emit("error",n)}catch(i){return console.error(i),!1}}}waitUntilReady(){return this.client}base64Name(){return Buffer.from(this.name).toString("base64")}clientName(e=""){let r=this.base64Name();return`${this.opts.prefix}:${r}${e}`}async close(){this.closing||(this.closing=this.connection.close()),await this.closing,this.closed=!0}disconnect(){return this.connection.disconnect()}async checkConnectionError(e,r=T8.DELAY_TIME_5){try{return await e()}catch(n){if((0,T8.isNotConnectionError)(n)&&this.emit("error",n),!this.closing&&r)await(0,T8.delay)(r);else return}}trace(e,r,n,i,s){return(0,T8.trace)(this.opts.telemetry,e,this.name,r,n,i,s)}};Nq.QueueBase=ble});var Bq=m(_2=>{"use strict";Object.defineProperty(_2,"__esModule",{value:!0});_2.defaultRepeatStrategy=_2.JobScheduler=void 0;var rhr=(ia(),Jt(na)),nhr=Ele(),Fq=T4(),ihr=Vm(),O8=Ru(),shr=Hc(),_le=class extends ihr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||_2.defaultRepeatStrategy}async upsertJobScheduler(e,r,n,i,s,{override:o,producerId:a}){let{every:u,limit:c,pattern:l,offset:d}=r;if(l&&u)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(!l&&!u)throw new Error("Either .pattern or .every options must be defined for this repeatable job");if(r.immediately&&r.startDate)throw new Error("Both .immediately and .startDate options are defined for this repeatable job");r.immediately&&r.every&&console.warn("Using option immediately with every does not affect the job's schedule. Job will run immediately anyway.");let p=r.count?r.count+1:1;if(typeof r.limit<"u"&&p>r.limit)return;let f=Date.now(),{endDate:h}=r;if(h&&f>new Date(h).getTime())return;let g=s.prevMillis||0;f=g<f?f:g;let{immediately:_}=r,S=rhr.__rest(r,["immediately"]),w,C=null;if(l&&(w=await this.repeatStrategy(f,r,n),w<f&&(w=f)),w||u)return this.trace(O8.SpanKind.PRODUCER,"add",`${this.name}.${n}`,async(A,O)=>{var x,R;let M=s.telemetry;if(O){let F=(x=s.telemetry)===null||x===void 0?void 0:x.omitContext,B=((R=s.telemetry)===null||R===void 0?void 0:R.metadata)||!F&&O;(B||F)&&(M={metadata:B,omitContext:F})}let I=this.getNextJobOpts(w,e,Object.assign(Object.assign({},s),{repeat:S,telemetry:M}),p,C);if(o){w<f&&(w=f);let[F,B]=await this.scripts.addJobScheduler(e,w,JSON.stringify(typeof i>"u"?{}:i),Fq.Job.optsAsJSON(s),{name:n,startDate:r.startDate?new Date(r.startDate).getTime():void 0,endDate:h?new Date(h).getTime():void 0,tz:r.tz,pattern:l,every:u,limit:c,offset:C},Fq.Job.optsAsJSON(I),a),U=typeof B=="string"?parseInt(B,10):B,k=new this.Job(this,n,i,Object.assign(Object.assign({},I),{delay:U}),F);return k.id=F,A?.setAttributes({[O8.TelemetryAttributes.JobSchedulerId]:e,[O8.TelemetryAttributes.JobId]:k.id}),k}else{let F=await this.scripts.updateJobSchedulerNextMillis(e,w,JSON.stringify(typeof i>"u"?{}:i),Fq.Job.optsAsJSON(I),a);if(F){let B=new this.Job(this,n,i,I,F);return B.id=F,A?.setAttributes({[O8.TelemetryAttributes.JobSchedulerId]:e,[O8.TelemetryAttributes.JobId]:B.id}),B}}})}getNextJobOpts(e,r,n,i,s){var o,a;let u=this.getSchedulerNextJobId({jobSchedulerId:r,nextMillis:e}),c=Date.now(),l=e+s-c,d=Object.assign(Object.assign({},n),{jobId:u,delay:l<0?0:l,timestamp:c,prevMillis:e,repeatJobKey:r});return d.repeat=Object.assign(Object.assign({},n.repeat),{offset:s,count:i,startDate:!((o=n.repeat)===null||o===void 0)&&o.startDate?new Date(n.repeat.startDate).getTime():void 0,endDate:!((a=n.repeat)===null||a===void 0)&&a.endDate?new Date(n.repeat.endDate).getTime():void 0}),d}async removeJobScheduler(e){return this.scripts.removeJobScheduler(e)}async getSchedulerData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return this.transformSchedulerData(r,i,n)}transformSchedulerData(e,r,n){if(r){let i={key:e,name:r.name,next:n};return r.ic&&(i.iterationCount=parseInt(r.ic)),r.limit&&(i.limit=parseInt(r.limit)),r.startDate&&(i.startDate=parseInt(r.startDate)),r.endDate&&(i.endDate=parseInt(r.endDate)),r.tz&&(i.tz=r.tz),r.pattern&&(i.pattern=r.pattern),r.every&&(i.every=parseInt(r.every)),r.offset&&(i.offset=parseInt(r.offset)),(r.data||r.opts)&&(i.template=this.getTemplateFromJSON(r.data,r.opts)),i}if(e.includes(":"))return this.keyToData(e,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getScheduler(e){let[r,n]=await this.scripts.getJobScheduler(e);return this.transformSchedulerData(e,r?(0,shr.array2obj)(r):null,n?parseInt(n):null)}getTemplateFromJSON(e,r){let n={};return e&&(n.data=JSON.parse(e)),r&&(n.opts=Fq.Job.optsFromJSON(r)),n}async getJobSchedulers(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getSchedulerData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getSchedulersCount(){let e=this.keys.repeat;return(await this.client).zcard(e)}getSchedulerNextJobId({nextMillis:e,jobSchedulerId:r}){return`repeat:${r}:${e}`}};_2.JobScheduler=_le;var ohr=(t,e)=>{let{pattern:r}=e,n=new Date(t),i=e.startDate&&new Date(e.startDate),s=i>n?i:n,o=(0,nhr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:s}));try{return e.immediately?new Date().getTime():o.next().getTime()}catch{}};_2.defaultRepeatStrategy=ohr});var vle=m((cBr,fZe)=>{var{EventEmitter:ahr}=require("events"),qq=class{constructor(){this.eventEmitter=new ahr,this.onabort=null,this.aborted=!1,this.reason=void 0}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(e,r){this.eventEmitter.removeListener(e,r)}addEventListener(e,r){this.eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[n]=="function"&&this[n](r),this.eventEmitter.emit(e,r)}throwIfAborted(){if(this.aborted)throw this.reason}static abort(e){let r=new x8;return r.abort(),r.signal}static timeout(e){let r=new x8;return setTimeout(()=>r.abort(new Error("TimeoutError")),e),r.signal}},x8=class{constructor(){this.signal=new qq}abort(e){this.signal.aborted||(this.signal.aborted=!0,e?this.signal.reason=e:this.signal.reason=new Error("AbortError"),this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}};fZe.exports={AbortController:x8,AbortSignal:qq}});var wle=m(jq=>{"use strict";Object.defineProperty(jq,"__esModule",{value:!0});jq.LockManager=void 0;var uhr=vle(),Lq=Ru(),Sle=class{constructor(e,r){this.worker=e,this.opts=r,this.trackedJobs=new Map,this.closed=!1}start(){this.closed||this.opts.lockRenewTime>0&&this.startLockExtenderTimer()}async extendLocks(e){await this.worker.trace(Lq.SpanKind.INTERNAL,"extendLocks",this.worker.name,async r=>{r?.setAttributes({[Lq.TelemetryAttributes.WorkerId]:this.opts.workerId,[Lq.TelemetryAttributes.WorkerName]:this.opts.workerName,[Lq.TelemetryAttributes.WorkerJobsToExtendLocks]:e});try{let n=e.map(o=>{var a;return((a=this.trackedJobs.get(o))===null||a===void 0?void 0:a.token)||""}),i=await this.worker.extendJobLocks(e,n,this.opts.lockDuration);if(i.length>0){this.worker.emit("lockRenewalFailed",i);for(let o of i)this.worker.emit("error",new Error(`could not renew lock for job ${o}`))}let s=e.filter(o=>!i.includes(o));s.length>0&&this.worker.emit("locksRenewed",{count:s.length,jobIds:s})}catch(n){this.worker.emit("error",n)}})}startLockExtenderTimer(){clearTimeout(this.lockRenewalTimer),this.closed||(this.lockRenewalTimer=setTimeout(async()=>{let e=Date.now(),r=[];for(let n of this.trackedJobs.keys()){let i=this.trackedJobs.get(n),{ts:s,token:o,abortController:a}=i;if(!s){this.trackedJobs.set(n,{token:o,ts:e,abortController:a});continue}s+this.opts.lockRenewTime/2<e&&(this.trackedJobs.set(n,{token:o,ts:e,abortController:a}),r.push(n))}r.length&&await this.extendLocks(r),this.startLockExtenderTimer()},this.opts.lockRenewTime/2))}async close(){this.closed||(this.closed=!0,this.lockRenewalTimer&&(clearTimeout(this.lockRenewalTimer),this.lockRenewalTimer=void 0),this.trackedJobs.clear())}trackJob(e,r,n,i=!1){let s=i?new uhr.AbortController:void 0;return!this.closed&&e&&this.trackedJobs.set(e,{token:r,ts:n,abortController:s}),s}untrackJob(e){this.trackedJobs.delete(e)}getActiveJobCount(){return this.trackedJobs.size}isRunning(){return!this.closed&&this.lockRenewalTimer!==void 0}cancelJob(e,r){let n=this.trackedJobs.get(e);return n?.abortController?(n.abortController.abort(r),!0):!1}cancelAllJobs(e){for(let r of this.trackedJobs.values())r.abortController&&r.abortController.abort(e)}getTrackedJobIds(){return Array.from(this.trackedJobs.keys())}};jq.LockManager=Sle});var mZe=m(Kq=>{"use strict";Object.defineProperty(Kq,"__esModule",{value:!0});Kq.QueueEvents=void 0;var hZe=(ia(),Jt(na)),$q=Hc(),chr=Vm(),Ale=class extends chr.QueueBase{constructor(e,r={connection:{}},n){var{connection:i,autorun:s=!0}=r,o=hZe.__rest(r,["connection","autorun"]);super(e,Object.assign(Object.assign({},o),{connection:(0,$q.isRedisInstance)(i)?i.duplicate():i}),n,!0),this.running=!1,this.blocking=!1,this.opts=Object.assign({blockingTimeout:1e4},this.opts),s&&this.run().catch(a=>this.emit("error",a))}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}async run(){if(this.running)throw new Error("Queue Events is already running.");try{this.running=!0;let e=await this.client;try{await e.client("SETNAME",this.clientName($q.QUEUE_EVENT_SUFFIX))}catch(r){if(!$q.clientCommandMessageReg.test(r.message))throw r}await this.consumeEvents(e)}catch(e){throw this.running=!1,e}}async consumeEvents(e){let r=this.opts,n=this.keys.events,i=r.lastEventId||"$";for(;!this.closing;){this.blocking=!0;let s=await this.checkConnectionError(()=>e.xread("BLOCK",r.blockingTimeout,"STREAMS",n,i));if(this.blocking=!1,s){let a=s[0][1];for(let u=0;u<a.length;u++){i=a[u][0];let c=(0,$q.array2obj)(a[u][1]);switch(c.event){case"progress":c.data=JSON.parse(c.data);break;case"completed":c.returnvalue=JSON.parse(c.returnvalue);break}let{event:l}=c,d=hZe.__rest(c,["event"]);l==="drained"?this.emit(l,i):(this.emit(l,d,i),d.jobId&&this.emit(`${l}:${d.jobId}`,d,i))}}}}async close(){return this.closing||(this.closing=(async()=>{try{(await this.client).disconnect(),await this.connection.close(this.blocking)}finally{this.closed=!0}})()),this.closing}};Kq.QueueEvents=Ale});var yZe=m(Uq=>{"use strict";Object.defineProperty(Uq,"__esModule",{value:!0});Uq.QueueEventsProducer=void 0;var lhr=(ia(),Jt(na)),dhr=Vm(),Cle=class extends dhr.QueueBase{constructor(e,r={connection:{}},n){super(e,Object.assign({blockingConnection:!1},r),n),this.opts=r}async publishEvent(e,r=1e3){let n=await this.client,i=this.keys.events,{eventName:s}=e,o=lhr.__rest(e,["eventName"]),a=["MAXLEN","~",r,"*","event",s];for(let[u,c]of Object.entries(o))a.push(u,c);await n.xadd(i,...a)}async close(){this.closing||(this.closing=this.connection.close()),await this.closing}};Uq.QueueEventsProducer=Cle});var Ole=m(Vq=>{"use strict";Object.defineProperty(Vq,"__esModule",{value:!0});Vq.QueueGetters=void 0;var phr=(ia(),Jt(na)),fhr=Vm(),gZe=Hc(),Tle=class extends fhr.QueueBase{getJob(e){return this.Job.fromId(this,e)}commandByType(e,r,n){return e.map(i=>{i=i==="waiting"?"wait":i;let s=this.toKey(i);switch(i){case"completed":case"failed":case"delayed":case"prioritized":case"repeat":case"waiting-children":return n(s,r?"zcard":"zrange");case"active":case"wait":case"paused":return n(s,r?"llen":"lrange")}})}sanitizeJobTypes(e){let r=typeof e=="string"?[e]:e;if(Array.isArray(r)&&r.length>0){let n=[...r];return n.indexOf("waiting")!==-1&&n.push("paused"),[...new Set(n)]}return["active","completed","delayed","failed","paused","prioritized","waiting","waiting-children"]}async count(){return await this.getJobCountByTypes("waiting","paused","delayed","prioritized","waiting-children")}async getRateLimitTtl(e){return this.scripts.getRateLimitTtl(e)}async getDebounceJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getDeduplicationJobId(e){return(await this.client).get(`${this.keys.de}:${e}`)}async getGlobalConcurrency(){let r=await(await this.client).hget(this.keys.meta,"concurrency");return r?Number(r):null}async getGlobalRateLimit(){let e=await this.client,[r,n]=await e.hmget(this.keys.meta,"max","duration");return r&&n?{max:Number(r),duration:Number(n)}:null}async getJobCountByTypes(...e){let r=await this.getJobCounts(...e);return Object.values(r).reduce((n,i)=>n+i,0)}async getJobCounts(...e){let r=this.sanitizeJobTypes(e),n=await this.scripts.getCounts(r),i={};return n.forEach((s,o)=>{i[r[o]]=s||0}),i}getJobState(e){return this.scripts.getState(e)}async getMeta(){let r=await(await this.client).hgetall(this.keys.meta),{concurrency:n,max:i,duration:s,paused:o,"opts.maxLenEvents":a}=r,c=phr.__rest(r,["concurrency","max","duration","paused","opts.maxLenEvents"]);return n&&(c.concurrency=Number(n)),a&&(c.maxLenEvents=Number(a)),i&&(c.max=Number(i)),s&&(c.duration=Number(s)),c.paused=o==="1",c}getCompletedCount(){return this.getJobCountByTypes("completed")}getFailedCount(){return this.getJobCountByTypes("failed")}getDelayedCount(){return this.getJobCountByTypes("delayed")}getActiveCount(){return this.getJobCountByTypes("active")}getPrioritizedCount(){return this.getJobCountByTypes("prioritized")}async getCountsPerPriority(e){let r=[...new Set(e)],n=await this.scripts.getCountsPerPriority(r),i={};return n.forEach((s,o)=>{i[`${r[o]}`]=s||0}),i}getWaitingCount(){return this.getJobCountByTypes("waiting")}getWaitingChildrenCount(){return this.getJobCountByTypes("waiting-children")}getWaiting(e=0,r=-1){return this.getJobs(["waiting"],e,r,!0)}getWaitingChildren(e=0,r=-1){return this.getJobs(["waiting-children"],e,r,!0)}getActive(e=0,r=-1){return this.getJobs(["active"],e,r,!0)}getDelayed(e=0,r=-1){return this.getJobs(["delayed"],e,r,!0)}getPrioritized(e=0,r=-1){return this.getJobs(["prioritized"],e,r,!0)}getCompleted(e=0,r=-1){return this.getJobs(["completed"],e,r,!1)}getFailed(e=0,r=-1){return this.getJobs(["failed"],e,r,!1)}async getDependencies(e,r,n,i){let s=this.toKey(r=="processed"?`${e}:processed`:`${e}:dependencies`),{items:o,total:a,jobs:u}=await this.scripts.paginate(s,{start:n,end:i,fetchJobs:!0});return{items:o,jobs:u,total:a}}async getRanges(e,r=0,n=1,i=!1){let s=[];this.commandByType(e,!1,(u,c)=>{switch(c){case"lrange":s.push("lrange");break;case"zrange":s.push("zrange");break}});let o=await this.scripts.getRanges(e,r,n,i),a=[];return o.forEach((u,c)=>{let l=u||[];i&&s[c]==="lrange"?a=a.concat(l.reverse()):a=a.concat(l)}),[...new Set(a)]}async getJobs(e,r=0,n=-1,i=!1){let s=this.sanitizeJobTypes(e),o=await this.getRanges(s,r,n,i);return Promise.all(o.map(a=>this.Job.fromId(this,a)))}async getJobLogs(e,r=0,n=-1,i=!0){let o=(await this.client).multi(),a=this.toKey(e+":logs");i?o.lrange(a,r,n):o.lrange(a,-(n+1),-(r+1)),o.llen(a);let u=await o.exec();return i||u[0][1].reverse(),{logs:u[0][1],count:u[1][1]}}async baseGetClients(e){let r=await this.client;try{let n=await r.client("LIST");return this.parseClientList(n,e)}catch(n){if(!gZe.clientCommandMessageReg.test(n.message))throw n;return[{name:"GCP does not support client list"}]}}getWorkers(){let e=`${this.clientName()}`,r=`${this.clientName()}:w:`,n=i=>i&&(i===e||i.startsWith(r));return this.baseGetClients(n)}async getWorkersCount(){return(await this.getWorkers()).length}async getQueueEvents(){let e=`${this.clientName()}${gZe.QUEUE_EVENT_SUFFIX}`;return this.baseGetClients(r=>r===e)}async getMetrics(e,r=0,n=-1){let[i,s,o]=await this.scripts.getMetrics(e,r,n);return{meta:{count:parseInt(i[0]||"0",10),prevTS:parseInt(i[1]||"0",10),prevCount:parseInt(i[2]||"0",10)},data:s.map(a=>+a||0),count:o}}parseClientList(e,r){let n=e.split(/\r?\n/),i=[];return n.forEach(s=>{let o={};s.split(" ").forEach(function(c){let l=c.indexOf("="),d=c.substring(0,l),p=c.substring(l+1);o[d]=p});let u=o.name;r(u)&&(o.name=this.name,o.rawname=u,i.push(o))}),i}async exportPrometheusMetrics(e){let r=await this.getJobCounts(),n=[];n.push("# HELP bullmq_job_count Number of jobs in the queue by state"),n.push("# TYPE bullmq_job_count gauge");let i=e?Object.keys(e).reduce((s,o)=>`${s}, ${o}="${e[o]}"`,""):"";for(let[s,o]of Object.entries(r))n.push(`bullmq_job_count{queue="${this.name}", state="${s}"${i}} ${o}`);return n.join(`
`)}};Vq.QueueGetters=Tle});var Gq=m(v2=>{"use strict";Object.defineProperty(v2,"__esModule",{value:!0});v2.getNextMillis=v2.Repeat=void 0;var hhr=(ia(),Jt(na)),mhr=Ele(),yhr=require("crypto"),ghr=Vm(),xle=class extends ghr.QueueBase{constructor(e,r,n){super(e,r,n),this.repeatStrategy=r.settings&&r.settings.repeatStrategy||v2.getNextMillis,this.repeatKeyHashAlgorithm=r.settings&&r.settings.repeatKeyHashAlgorithm||"md5"}async updateRepeatableJob(e,r,n,{override:i}){var s,o;let a=Object.assign({},n.repeat);(s=a.pattern)!==null&&s!==void 0||(a.pattern=a.cron),delete a.cron;let u=a.count?a.count+1:1;if(typeof a.limit<"u"&&u>a.limit)return;let c=Date.now(),{endDate:l}=a;if(l&&c>new Date(l).getTime())return;let d=n.prevMillis||0;c=d<c?c:d;let p=await this.repeatStrategy(c,a,e),{every:f,pattern:h}=a,g=!!((f||h)&&a.immediately),_=g&&f?c-p:void 0;if(p){!d&&n.jobId&&(a.jobId=n.jobId);let S=EZe(e,a),w=(o=n.repeat.key)!==null&&o!==void 0?o:this.hash(S),C;if(i)C=await this.scripts.addRepeatableJob(w,p,{name:e,endDate:l?new Date(l).getTime():void 0,tz:a.tz,pattern:h,every:f},S);else{let x=await this.client;C=await this.scripts.updateRepeatableJobMillis(x,w,p,S)}let{immediately:A}=a,O=hhr.__rest(a,["immediately"]);return this.createNextJob(e,p,C,Object.assign(Object.assign({},n),{repeat:Object.assign({offset:_},O)}),r,u,g)}}async createNextJob(e,r,n,i,s,o,a){let u=this.getRepeatJobKey(e,r,n,s),c=Date.now(),l=r+(i.repeat.offset?i.repeat.offset:0)-c,d=Object.assign(Object.assign({},i),{jobId:u,delay:l<0||a?0:l,timestamp:c,prevMillis:r,repeatJobKey:n});return d.repeat=Object.assign(Object.assign({},i.repeat),{count:o}),this.Job.create(this,e,s,d)}getRepeatJobKey(e,r,n,i){return n.split(":").length>2?this.getRepeatJobId({name:e,nextMillis:r,namespace:this.hash(n),jobId:i?.id}):this.getRepeatDelayedJobId({customKey:n,nextMillis:r})}async removeRepeatable(e,r,n){var i;let s=EZe(e,Object.assign(Object.assign({},r),{jobId:n})),o=(i=r.key)!==null&&i!==void 0?i:this.hash(s),a=this.getRepeatJobId({name:e,nextMillis:"",namespace:this.hash(s),jobId:n??r.jobId,key:r.key});return this.scripts.removeRepeatable(a,s,o)}async removeRepeatableByKey(e){let r=this.keyToData(e),n=this.getRepeatJobId({name:r.name,nextMillis:"",namespace:this.hash(e),jobId:r.id});return this.scripts.removeRepeatable(n,"",e)}async getRepeatableData(e,r,n){let i=await e.hgetall(this.toKey("repeat:"+r));return i?{key:r,name:i.name,endDate:parseInt(i.endDate)||null,tz:i.tz||null,pattern:i.pattern||null,every:i.every||null,next:n}:this.keyToData(r,n)}keyToData(e,r){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:r}}async getRepeatableJobs(e=0,r=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,r,"WITHSCORES"):await i.zrevrange(s,e,r,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.getRepeatableData(i,o[u],parseInt(o[u+1])));return Promise.all(a)}async getRepeatableCount(){return(await this.client).zcard(this.toKey("repeat"))}hash(e){return(0,yhr.createHash)(this.repeatKeyHashAlgorithm).update(e).digest("hex")}getRepeatDelayedJobId({nextMillis:e,customKey:r}){return`repeat:${r}:${e}`}getRepeatJobId({name:e,nextMillis:r,namespace:n,jobId:i,key:s}){return`repeat:${s??this.hash(`${e}${i||""}${n}`)}:${r}`}};v2.Repeat=xle;function EZe(t,e){let r=e.endDate?new Date(e.endDate).getTime():"",n=e.tz||"",i=e.pattern,s=i||String(e.every)||"",o=e.jobId?e.jobId:"";return`${t}:${o}:${r}:${n}:${s}`}var Ehr=(t,e)=>{let r=e.pattern;if(r&&e.every)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(e.every)return Math.floor(t/e.every)*e.every+(e.immediately?0:e.every);let n=e.startDate&&new Date(e.startDate)>new Date(t)?new Date(e.startDate):new Date(t),i=(0,mhr.parseExpression)(r,Object.assign(Object.assign({},e),{currentDate:n}));try{return e.immediately?new Date().getTime():i.next().getTime()}catch{}};v2.getNextMillis=Ehr});var bZe=m(Hq=>{"use strict";Object.defineProperty(Hq,"__esModule",{value:!0});Hq.Queue=void 0;var bhr=zF(),_hr=T4(),vhr=Ole(),Shr=Gq(),Ht=Ru(),whr=Bq(),Ahr=pB(),Ile=class extends vhr.QueueGetters{constructor(e,r,n){var i;super(e,Object.assign({},r),n),this.token=(0,bhr.v4)(),this.libName="bullmq",this.jobsOpts=(i=r?.defaultJobOptions)!==null&&i!==void 0?i:{},this.waitUntilReady().then(s=>{if(!this.closing&&!r?.skipMetasUpdate)return s.hmset(this.keys.meta,this.metaValues)}).catch(s=>{})}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}get defaultJobOptions(){return Object.assign({},this.jobsOpts)}get metaValues(){var e,r,n,i;return{"opts.maxLenEvents":(i=(n=(r=(e=this.opts)===null||e===void 0?void 0:e.streams)===null||r===void 0?void 0:r.events)===null||n===void 0?void 0:n.maxLen)!==null&&i!==void 0?i:1e4,version:`${this.libName}:${Ahr.version}`}}async getVersion(){return await(await this.client).hget(this.keys.meta,"version")}get repeat(){return new Promise(async e=>{this._repeat||(this._repeat=new Shr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._repeat.on("error",r=>this.emit.bind(this,r))),e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{this._jobScheduler||(this._jobScheduler=new whr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._jobScheduler.on("error",r=>this.emit.bind(this,r))),e(this._jobScheduler)})}async setGlobalConcurrency(e){return(await this.client).hset(this.keys.meta,"concurrency",e)}async setGlobalRateLimit(e,r){return(await this.client).hset(this.keys.meta,"max",e,"duration",r)}async removeGlobalConcurrency(){return(await this.client).hdel(this.keys.meta,"concurrency")}async removeGlobalRateLimit(){return(await this.client).hdel(this.keys.meta,"max","duration")}async add(e,r,n){return this.trace(Ht.SpanKind.PRODUCER,"add",`${this.name}.${e}`,async(i,s)=>{var o;if(s&&!(!((o=n?.telemetry)===null||o===void 0)&&o.omitContext)){let u={metadata:s};n=Object.assign(Object.assign({},n),{telemetry:u})}let a=await this.addJob(e,r,n);return i?.setAttributes({[Ht.TelemetryAttributes.JobName]:e,[Ht.TelemetryAttributes.JobId]:a.id}),a})}async addJob(e,r,n){if(n&&n.repeat){if(n.repeat.endDate&&+new Date(n.repeat.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.repeat).updateRepeatableJob(e,r,Object.assign(Object.assign({},this.jobsOpts),n),{override:!0})}else{let i=n?.jobId;if(i=="0"||i?.startsWith("0:"))throw new Error("JobId cannot be '0' or start with 0:");let s=await this.Job.create(this,e,r,Object.assign(Object.assign(Object.assign({},this.jobsOpts),n),{jobId:i}));return this.emit("waiting",s),s}}async addBulk(e){return this.trace(Ht.SpanKind.PRODUCER,"addBulk",this.name,async(r,n)=>(r&&r.setAttributes({[Ht.TelemetryAttributes.BulkNames]:e.map(i=>i.name),[Ht.TelemetryAttributes.BulkCount]:e.length}),await this.Job.createBulk(this,e.map(i=>{var s,o,a,u,c,l;let d=(s=i.opts)===null||s===void 0?void 0:s.telemetry;if(n){let p=(a=(o=i.opts)===null||o===void 0?void 0:o.telemetry)===null||a===void 0?void 0:a.omitContext,f=((c=(u=i.opts)===null||u===void 0?void 0:u.telemetry)===null||c===void 0?void 0:c.metadata)||!p&&n;(f||p)&&(d={metadata:f,omitContext:p})}return{name:i.name,data:i.data,opts:Object.assign(Object.assign(Object.assign({},this.jobsOpts),i.opts),{jobId:(l=i.opts)===null||l===void 0?void 0:l.jobId,telemetry:d})}}))))}async upsertJobScheduler(e,r,n){var i,s;if(r.endDate&&+new Date(r.endDate)<Date.now())throw new Error("End date must be greater than current timestamp");return(await this.jobScheduler).upsertJobScheduler(e,r,(i=n?.name)!==null&&i!==void 0?i:e,(s=n?.data)!==null&&s!==void 0?s:{},Object.assign(Object.assign({},this.jobsOpts),n?.opts),{override:!0})}async pause(){await this.trace(Ht.SpanKind.INTERNAL,"pause",this.name,async()=>{await this.scripts.pause(!0),this.emit("paused")})}async close(){await this.trace(Ht.SpanKind.INTERNAL,"close",this.name,async()=>{this.closing||this._repeat&&await this._repeat.close(),await super.close()})}async rateLimit(e){await this.trace(Ht.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}async resume(){await this.trace(Ht.SpanKind.INTERNAL,"resume",this.name,async()=>{await this.scripts.pause(!1),this.emit("resumed")})}async isPaused(){return await(await this.client).hexists(this.keys.meta,"paused")===1}isMaxed(){return this.scripts.isMaxed()}async getRepeatableJobs(e,r,n){return(await this.repeat).getRepeatableJobs(e,r,n)}async getJobScheduler(e){return(await this.jobScheduler).getScheduler(e)}async getJobSchedulers(e,r,n){return(await this.jobScheduler).getJobSchedulers(e,r,n)}async getJobSchedulersCount(){return(await this.jobScheduler).getSchedulersCount()}async removeRepeatable(e,r,n){return this.trace(Ht.SpanKind.INTERNAL,"removeRepeatable",`${this.name}.${e}`,async i=>(i?.setAttributes({[Ht.TelemetryAttributes.JobName]:e,[Ht.TelemetryAttributes.JobId]:n}),!await(await this.repeat).removeRepeatable(e,r,n)))}async removeJobScheduler(e){return!await(await this.jobScheduler).removeJobScheduler(e)}async removeDebounceKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeDebounceKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.JobKey]:e}),await(await this.client).del(`${this.keys.de}:${e}`)))}async removeDeduplicationKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeDeduplicationKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.DeduplicationKey]:e}),(await this.client).del(`${this.keys.de}:${e}`)))}async removeRateLimitKey(){return(await this.client).del(this.keys.limiter)}async removeRepeatableByKey(e){return this.trace(Ht.SpanKind.INTERNAL,"removeRepeatableByKey",`${this.name}`,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.JobKey]:e}),!await(await this.repeat).removeRepeatableByKey(e)))}async remove(e,{removeChildren:r=!0}={}){return this.trace(Ht.SpanKind.INTERNAL,"remove",this.name,async n=>{n?.setAttributes({[Ht.TelemetryAttributes.JobId]:e,[Ht.TelemetryAttributes.JobOptions]:JSON.stringify({removeChildren:r})});let i=await this.scripts.remove(e,r);return i===1&&this.emit("removed",e),i})}async updateJobProgress(e,r){await this.trace(Ht.SpanKind.INTERNAL,"updateJobProgress",this.name,async n=>{n?.setAttributes({[Ht.TelemetryAttributes.JobId]:e,[Ht.TelemetryAttributes.JobProgress]:JSON.stringify(r)}),await this.scripts.updateProgress(e,r),this.emit("progress",e,r)})}async addJobLog(e,r,n){return _hr.Job.addJobLog(this,e,r,n)}async drain(e=!1){await this.trace(Ht.SpanKind.INTERNAL,"drain",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueDrainDelay]:e}),await this.scripts.drain(e)})}async clean(e,r,n="completed"){return this.trace(Ht.SpanKind.INTERNAL,"clean",this.name,async i=>{let s=r||1/0,o=Math.min(1e4,s),a=Date.now()-e,u=0,c=[],l=n==="waiting"?"wait":n;for(;u<s;){let d=await this.scripts.cleanJobsInSet(l,a,o);if(this.emit("cleaned",d,l),u+=d.length,c.push(...d),d.length<o)break}return i?.setAttributes({[Ht.TelemetryAttributes.QueueGrace]:e,[Ht.TelemetryAttributes.JobType]:n,[Ht.TelemetryAttributes.QueueCleanLimit]:s,[Ht.TelemetryAttributes.JobIds]:c}),c})}async obliterate(e){await this.trace(Ht.SpanKind.INTERNAL,"obliterate",this.name,async()=>{await this.pause();let r=0;do r=await this.scripts.obliterate(Object.assign({force:!1,count:1e3},e));while(r)})}async retryJobs(e={}){await this.trace(Ht.SpanKind.PRODUCER,"retryJobs",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.retryJobs(e.state,e.count,e.timestamp);while(n)})}async promoteJobs(e={}){await this.trace(Ht.SpanKind.INTERNAL,"promoteJobs",this.name,async r=>{r?.setAttributes({[Ht.TelemetryAttributes.QueueOptions]:JSON.stringify(e)});let n=0;do n=await this.scripts.promoteJobs(e.count);while(n)})}async trimEvents(e){return this.trace(Ht.SpanKind.INTERNAL,"trimEvents",this.name,async r=>(r?.setAttributes({[Ht.TelemetryAttributes.QueueEventMaxLength]:e}),await(await this.client).xtrim(this.keys.events,"MAXLEN","~",e)))}async removeDeprecatedPriorityKey(){return(await this.client).del(this.toKey("priority"))}};Hq.Queue=Ile});var Dle=m(Rle=>{"use strict";Object.defineProperty(Rle,"__esModule",{value:!0});var ua=Ru(),Chr=(t,e)=>async function(n,i){let s,o,a;try{let u=new Promise((c,l)=>{(async()=>{try{a=(p,f)=>{l(new Error("Unexpected exit code: "+p+" signal: "+f))},s=await e.retain(t),s.on("exit",a),o=async p=>{var f,h,g,_,S;try{switch(p.cmd){case ua.ParentCommand.Completed:c(p.value);break;case ua.ParentCommand.Failed:case ua.ParentCommand.Error:{let w=new Error;Object.assign(w,p.value),l(w);break}case ua.ParentCommand.Progress:await n.updateProgress(p.value);break;case ua.ParentCommand.Log:await n.log(p.value);break;case ua.ParentCommand.MoveToDelayed:await n.moveToDelayed((f=p.value)===null||f===void 0?void 0:f.timestamp,(h=p.value)===null||h===void 0?void 0:h.token);break;case ua.ParentCommand.MoveToWait:await n.moveToWait((g=p.value)===null||g===void 0?void 0:g.token);break;case ua.ParentCommand.MoveToWaitingChildren:{let w=await n.moveToWaitingChildren((_=p.value)===null||_===void 0?void 0:_.token,(S=p.value)===null||S===void 0?void 0:S.opts);s.send({requestId:p.requestId,cmd:ua.ChildCommand.MoveToWaitingChildrenResponse,value:w})}break;case ua.ParentCommand.Update:await n.updateData(p.value);break;case ua.ParentCommand.GetChildrenValues:{let w=await n.getChildrenValues();s.send({requestId:p.requestId,cmd:ua.ChildCommand.GetChildrenValuesResponse,value:w})}break;case ua.ParentCommand.GetIgnoredChildrenFailures:{let w=await n.getIgnoredChildrenFailures();s.send({requestId:p.requestId,cmd:ua.ChildCommand.GetIgnoredChildrenFailuresResponse,value:w})}break}}catch(w){l(w)}},s.on("message",o),s.send({cmd:ua.ChildCommand.Start,job:n.asJSONSandbox(),token:i})}catch(p){l(p)}})()});return await u,u}finally{s&&(s.off("message",o),s.off("exit",a),s.exitCode===null&&s.signalCode===null&&e.release(s))}};Rle.default=Chr});var vZe=m((Wq,_Ze)=>{"use strict";Object.defineProperty(Wq,"__esModule",{value:!0});Wq.Worker=void 0;var zq=require("fs"),Thr=require("url"),I8=require("path"),Ohr=zF(),xhr=vle(),R8=Hc(),Ihr=Vm(),Rhr=Gq(),Dhr=uue(),khr=m8(),Mhr=Dle(),Phr=tue(),B4=UF(),Zt=Ru(),Nhr=Bq(),Fhr=wle(),Bhr=10,kle=class extends Ihr.QueueBase{static RateLimitError(){return new B4.RateLimitError}constructor(e,r,n,i){if(super(e,Object.assign(Object.assign({drainDelay:5,concurrency:1,lockDuration:3e4,maximumRateLimitDelay:3e4,maxStalledCount:1,stalledInterval:3e4,autorun:!0,runRetryDelay:15e3},n),{blockingConnection:!0}),i),this.abortDelayController=null,this.blockUntil=0,this.drained=!1,this.limitUntil=0,this.processorAcceptsSignal=!1,this.waiting=null,this.running=!1,this.mainLoopRunning=null,!n||!n.connection)throw new Error("Worker requires a connection");if(typeof this.opts.maxStalledCount!="number"||this.opts.maxStalledCount<0)throw new Error("maxStalledCount must be greater or equal than 0");if(typeof this.opts.maxStartedAttempts=="number"&&this.opts.maxStartedAttempts<0)throw new Error("maxStartedAttempts must be greater or equal than 0");if(typeof this.opts.stalledInterval!="number"||this.opts.stalledInterval<=0)throw new Error("stalledInterval must be greater than 0");if(typeof this.opts.drainDelay!="number"||this.opts.drainDelay<=0)throw new Error("drainDelay must be greater than 0");if(this.concurrency=this.opts.concurrency,this.opts.lockRenewTime=this.opts.lockRenewTime||this.opts.lockDuration/2,this.id=(0,Ohr.v4)(),this.createLockManager(),r){if(typeof r=="function")this.processFn=r,this.processorAcceptsSignal=r.length>=3;else{if(r instanceof Thr.URL){if(!zq.existsSync(r))throw new Error(`URL ${r} does not exist in the local file system`);r=r.href}else{let d=r+([".js",".ts",".flow",".cjs",".mjs"].includes(I8.extname(r))?"":".js");if(!zq.existsSync(d))throw new Error(`File ${d} does not exist`)}let o=I8.dirname(_Ze.filename||__filename),a=I8.join(o,"main-worker.js"),u=I8.join(o,"main.js"),c=this.opts.useWorkerThreads?a:u;try{zq.statSync(c)}catch{let d=this.opts.useWorkerThreads?"main-worker.js":"main.js";c=I8.join(process.cwd(),`dist/cjs/classes/${d}`),zq.statSync(c)}this.childPool=new Dhr.ChildPool({mainFile:c,useWorkerThreads:this.opts.useWorkerThreads,workerForkOptions:this.opts.workerForkOptions,workerThreadsOptions:this.opts.workerThreadsOptions}),this.createSandbox(r)}this.opts.autorun&&this.run().catch(o=>this.emit("error",o))}let s=this.clientName()+(this.opts.name?`:w:${this.opts.name}`:"");this.blockingConnection=new khr.RedisConnection((0,R8.isRedisInstance)(n.connection)?n.connection.duplicate({connectionName:s}):Object.assign(Object.assign({},n.connection),{connectionName:s}),{shared:!1,blocking:!0,skipVersionCheck:n.skipVersionCheck}),this.blockingConnection.on("error",o=>this.emit("error",o)),this.blockingConnection.on("ready",()=>setTimeout(()=>this.emit("ready"),0))}createLockManager(){this.lockManager=new Fhr.LockManager(this,{lockRenewTime:this.opts.lockRenewTime,lockDuration:this.opts.lockDuration,workerId:this.id,workerName:this.opts.name})}createSandbox(e){this.processFn=(0,Mhr.default)(e,this.childPool).bind(this)}async extendJobLocks(e,r,n){return this.scripts.extendLocks(e,r,n)}emit(e,...r){return super.emit(e,...r)}off(e,r){return super.off(e,r),this}on(e,r){return super.on(e,r),this}once(e,r){return super.once(e,r),this}callProcessJob(e,r,n){return this.processFn(e,r,n)}createJob(e,r){return this.Job.fromJSON(this,e,r)}async waitUntilReady(){return await super.waitUntilReady(),this.blockingConnection.client}cancelJob(e,r){return this.lockManager.cancelJob(e,r)}cancelAllJobs(e){this.lockManager.cancelAllJobs(e)}set concurrency(e){if(typeof e!="number"||e<1||!isFinite(e))throw new Error("concurrency must be a finite number greater than 0");this._concurrency=e}get concurrency(){return this._concurrency}get repeat(){return new Promise(async e=>{if(!this._repeat){let r=await this.client;this._repeat=new Rhr.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._repeat.on("error",n=>this.emit.bind(this,n))}e(this._repeat)})}get jobScheduler(){return new Promise(async e=>{if(!this._jobScheduler){let r=await this.client;this._jobScheduler=new Nhr.JobScheduler(this.name,Object.assign(Object.assign({},this.opts),{connection:r})),this._jobScheduler.on("error",n=>this.emit.bind(this,n))}e(this._jobScheduler)})}async run(){if(!this.processFn)throw new Error("No process function is defined.");if(this.running)throw new Error("Worker is already running.");try{if(this.running=!0,this.closing||this.paused)return;await this.startStalledCheckTimer(),this.opts.skipLockRenewal||this.lockManager.start();let e=await this.client,r=await this.blockingConnection.client;this.mainLoopRunning=this.mainLoop(e,r),await this.mainLoopRunning}finally{this.running=!1}}async waitForRateLimit(){var e;let r=this.limitUntil;if(r>Date.now()){(e=this.abortDelayController)===null||e===void 0||e.abort(),this.abortDelayController=new xhr.AbortController;let n=this.getRateLimitDelay(r-Date.now());await this.delay(n,this.abortDelayController),this.drained=!1,this.limitUntil=0}}async mainLoop(e,r){let n=new Phr.AsyncFifoQueue,i=0;for(;!this.closing&&!this.paused||n.numTotal()>0;){for(;!this.closing&&!this.paused&&!this.waiting&&n.numTotal()<this._concurrency&&!this.isRateLimited();){let o=`${this.id}:${i++}`,a=this.retryIfFailed(()=>this._getNextJob(e,r,o,{block:!0}),{delayInMs:this.opts.runRetryDelay,onlyEmitError:!0});if(n.add(a),this.waiting&&n.numTotal()>1||!await a&&n.numTotal()>1||this.blockUntil)break}let s;do s=await n.fetch();while(!s&&n.numQueued()>0);if(s){let o=s.token;n.add(this.processJob(s,o,()=>n.numTotal()<=this._concurrency))}else n.numQueued()===0&&await this.waitForRateLimit()}}async getNextJob(e,{block:r=!0}={}){var n,i;let s=await this._getNextJob(await this.client,await this.blockingConnection.client,e,{block:r});return this.trace(Zt.SpanKind.INTERNAL,"getNextJob",this.name,async o=>(o?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.QueueName]:this.name,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerOptions]:JSON.stringify({block:r}),[Zt.TelemetryAttributes.JobId]:s?.id}),s),(i=(n=s?.opts)===null||n===void 0?void 0:n.telemetry)===null||i===void 0?void 0:i.metadata)}async _getNextJob(e,r,n,{block:i=!0}={}){if(!this.paused&&!this.closing){if(this.drained&&i&&!this.limitUntil&&!this.waiting){this.waiting=this.waitForJob(r,this.blockUntil);try{if(this.blockUntil=await this.waiting,this.blockUntil<=0||this.blockUntil-Date.now()<1)return await this.moveToActive(e,n,this.opts.name)}finally{this.waiting=null}}else if(!this.isRateLimited())return this.moveToActive(e,n,this.opts.name)}}async rateLimit(e){await this.trace(Zt.SpanKind.INTERNAL,"rateLimit",this.name,async r=>{r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerRateLimit]:e}),await this.client.then(n=>n.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))})}get minimumBlockTimeout(){return this.blockingConnection.capabilities.canBlockFor1Ms?.001:.002}isRateLimited(){return this.limitUntil>Date.now()}async moveToActive(e,r,n){let[i,s,o,a]=await this.scripts.moveToActive(e,r,n);return this.updateDelays(o,a),this.nextJobFromJobData(i,s,r)}async waitForJob(e,r){if(this.paused)return 1/0;let n;try{if(!this.closing&&!this.isRateLimited()){let i=this.getBlockTimeout(r);if(i>0){i=this.blockingConnection.capabilities.canDoubleTimeout?i:Math.ceil(i),n=setTimeout(async()=>{e.disconnect(!this.closing)},i*1e3+1e3),this.updateDelays();let s=await e.bzpopmin(this.keys.marker,i);if(s){let[o,a,u]=s;if(a){let c=parseInt(u);return r&&c>r?r:c}}}return 0}}catch(i){(0,R8.isNotConnectionError)(i)&&this.emit("error",i),this.closing||await this.delay()}finally{clearTimeout(n)}return 1/0}getBlockTimeout(e){let r=this.opts;if(e){let n=e-Date.now();return n<=0?n:n<this.minimumBlockTimeout*1e3?this.minimumBlockTimeout:Math.min(n/1e3,Bhr)}else return Math.max(r.drainDelay,this.minimumBlockTimeout)}getRateLimitDelay(e){return Math.min(e,this.opts.maximumRateLimitDelay)}async delay(e,r){await(0,R8.delay)(e||R8.DELAY_TIME_1,r)}updateDelays(e=0,r=0){let n=Math.max(e,0);n>0?this.limitUntil=Date.now()+n:this.limitUntil=0,this.blockUntil=Math.max(r,0)||0}async nextJobFromJobData(e,r,n){if(!e)this.drained||(this.emit("drained"),this.drained=!0);else{this.drained=!1;let i=this.createJob(e,r);i.token=n;try{await this.retryIfFailed(async()=>{i.repeatJobKey&&i.repeatJobKey.split(":").length<5?await(await this.jobScheduler).upsertJobScheduler(i.repeatJobKey,i.opts.repeat,i.name,i.data,i.opts,{override:!1,producerId:i.id}):i.opts.repeat&&await(await this.repeat).updateRepeatableJob(i.name,i.data,i.opts,{override:!1})},{delayInMs:this.opts.runRetryDelay})}catch(s){let o=s instanceof Error?s.message:String(s),a=new Error(`Failed to add repeatable job for next iteration: ${o}`);this.emit("error",a);return}return i}}async processJob(e,r,n=()=>!0){var i,s;let o=(s=(i=e.opts)===null||i===void 0?void 0:i.telemetry)===null||s===void 0?void 0:s.metadata;return this.trace(Zt.SpanKind.CONSUMER,"process",this.name,async a=>{a?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.JobId]:e.id,[Zt.TelemetryAttributes.JobName]:e.name}),this.emit("active",e,"waiting");let u=Date.now(),c=this.lockManager.trackJob(e.id,r,u,this.processorAcceptsSignal);try{let l=this.getUnrecoverableErrorMessage(e);if(l)return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(new B4.UnrecoverableError(l),e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a});let d=await this.callProcessJob(e,r,c?c.signal:void 0);return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleCompleted(d,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a})}catch(l){return await this.retryIfFailed(()=>(this.lockManager.untrackJob(e.id),this.handleFailed(l,e,r,n,a)),{delayInMs:this.opts.runRetryDelay,span:a,onlyEmitError:!0})}finally{this.lockManager.untrackJob(e.id),a?.setAttributes({[Zt.TelemetryAttributes.JobFinishedTimestamp]:Date.now(),[Zt.TelemetryAttributes.JobProcessedTimestamp]:u})}},o)}getUnrecoverableErrorMessage(e){if(e.deferredFailure)return e.deferredFailure;if(this.opts.maxStartedAttempts&&this.opts.maxStartedAttempts<e.attemptsStarted)return"job started more than allowable limit"}async handleCompleted(e,r,n,i=()=>!0,s){if(!this.connection.closing){let o=await r.moveToCompleted(e,n,i()&&!(this.closing||this.paused));if(this.emit("completed",r,e,"active"),s?.addEvent("job completed",{[Zt.TelemetryAttributes.JobResult]:JSON.stringify(e)}),s?.setAttributes({[Zt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async handleFailed(e,r,n,i=()=>!0,s){if(!this.connection.closing){if(e.message===B4.RATE_LIMIT_ERROR){let a=await this.moveLimitedBackToWait(r,n);this.limitUntil=a>0?Date.now()+a:0;return}if(e instanceof B4.DelayedError||e.name=="DelayedError"||e instanceof B4.WaitingError||e.name=="WaitingError"||e instanceof B4.WaitingChildrenError||e.name=="WaitingChildrenError"){let a=await this.client;return this.moveToActive(a,n,this.opts.name)}let o=await r.moveToFailed(e,n,i()&&!(this.closing||this.paused));if(this.emit("failed",r,e,"active"),s?.addEvent("job failed",{[Zt.TelemetryAttributes.JobFailedReason]:e.message}),s?.setAttributes({[Zt.TelemetryAttributes.JobAttemptsMade]:r.attemptsMade}),Array.isArray(o)){let[a,u,c,l]=o;return this.updateDelays(c,l),this.nextJobFromJobData(a,u,n)}}}async pause(e){await this.trace(Zt.SpanKind.INTERNAL,"pause",this.name,async r=>{var n;r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerDoNotWaitActive]:e}),this.paused||(this.paused=!0,e||await this.whenCurrentJobsFinished(),(n=this.stalledCheckStopper)===null||n===void 0||n.call(this),this.emit("paused"))})}resume(){this.running||this.trace(Zt.SpanKind.INTERNAL,"resume",this.name,e=>{e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name}),this.paused=!1,this.processFn&&this.run(),this.emit("resumed")})}isPaused(){return!!this.paused}isRunning(){return this.running}async close(e=!1){return this.closing?this.closing:(this.closing=(async()=>{await this.trace(Zt.SpanKind.INTERNAL,"close",this.name,async r=>{var n,i;r?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerForceClose]:e}),this.emit("closing","closing queue"),(n=this.abortDelayController)===null||n===void 0||n.abort();let s=[()=>e||this.whenCurrentJobsFinished(!1),()=>this.lockManager.close(),()=>{var o;return(o=this.childPool)===null||o===void 0?void 0:o.clean()},()=>this.blockingConnection.close(e),()=>this.connection.close(e)];for(let o of s)try{await o()}catch(a){this.emit("error",a)}(i=this.stalledCheckStopper)===null||i===void 0||i.call(this),this.closed=!0,this.emit("closed")})})(),await this.closing)}async startStalledCheckTimer(){this.opts.skipStalledCheck||this.closing||await this.trace(Zt.SpanKind.INTERNAL,"startStalledCheckTimer",this.name,async e=>{e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name}),this.stalledChecker().catch(r=>{this.emit("error",r)})})}async stalledChecker(){for(;!(this.closing||this.paused);)await this.checkConnectionError(()=>this.moveStalledJobsToWait()),await new Promise(e=>{let r=setTimeout(e,this.opts.stalledInterval);this.stalledCheckStopper=()=>{clearTimeout(r),e()}})}async whenCurrentJobsFinished(e=!0){this.waiting?await this.blockingConnection.disconnect(e):e=!1,this.mainLoopRunning&&await this.mainLoopRunning,e&&await this.blockingConnection.reconnect()}async retryIfFailed(e,r){var n;let i=0,s=r.maxRetries||1/0;do try{return await e()}catch(o){if((n=r.span)===null||n===void 0||n.recordException(o.message),(0,R8.isNotConnectionError)(o)){if(!this.paused&&!this.closing&&this.emit("error",o),r.onlyEmitError)return;throw o}else if(r.delayInMs&&!this.closing&&!this.closed&&await this.delay(r.delayInMs,this.abortDelayController),i+1>=s)throw o}while(++i<s)}async moveStalledJobsToWait(){await this.trace(Zt.SpanKind.INTERNAL,"moveStalledJobsToWait",this.name,async e=>{let r=await this.scripts.moveStalledJobsToWait();e?.setAttributes({[Zt.TelemetryAttributes.WorkerId]:this.id,[Zt.TelemetryAttributes.WorkerName]:this.opts.name,[Zt.TelemetryAttributes.WorkerStalledJobs]:r}),r.forEach(n=>{e?.addEvent("job stalled",{[Zt.TelemetryAttributes.JobId]:n}),this.emit("stalled",n,"active")})})}moveLimitedBackToWait(e,r){return e.moveToWait(r)}};Wq.Worker=kle});var SZe=m(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Pi=(ia(),Jt(na));Pi.__exportStar(tue(),ei);Pi.__exportStar(rue(),ei);Pi.__exportStar(sue(),ei);Pi.__exportStar(uue(),ei);Pi.__exportStar(SWe(),ei);Pi.__exportStar(UF(),ei);Pi.__exportStar(CQe(),ei);Pi.__exportStar(T4(),ei);Pi.__exportStar(Bq(),ei);Pi.__exportStar(wle(),ei);Pi.__exportStar(Vm(),ei);Pi.__exportStar(mZe(),ei);Pi.__exportStar(yZe(),ei);Pi.__exportStar(Ole(),ei);Pi.__exportStar(yB(),ei);Pi.__exportStar(bZe(),ei);Pi.__exportStar(m8(),ei);Pi.__exportStar(Gq(),ei);Pi.__exportStar(Dle(),ei);Pi.__exportStar(Mce(),ei);Pi.__exportStar(vZe(),ei)});var AZe=m(wZe=>{"use strict";Object.defineProperty(wZe,"__esModule",{value:!0})});var TZe=m(CZe=>{"use strict";Object.defineProperty(CZe,"__esModule",{value:!0})});var xZe=m(OZe=>{"use strict";Object.defineProperty(OZe,"__esModule",{value:!0})});var RZe=m(IZe=>{"use strict";Object.defineProperty(IZe,"__esModule",{value:!0})});var kZe=m(DZe=>{"use strict";Object.defineProperty(DZe,"__esModule",{value:!0})});var PZe=m(MZe=>{"use strict";Object.defineProperty(MZe,"__esModule",{value:!0})});var FZe=m(NZe=>{"use strict";Object.defineProperty(NZe,"__esModule",{value:!0})});var qZe=m(BZe=>{"use strict";Object.defineProperty(BZe,"__esModule",{value:!0})});var jZe=m(LZe=>{"use strict";Object.defineProperty(LZe,"__esModule",{value:!0})});var KZe=m($Ze=>{"use strict";Object.defineProperty($Ze,"__esModule",{value:!0})});var VZe=m(UZe=>{"use strict";Object.defineProperty(UZe,"__esModule",{value:!0})});var HZe=m(GZe=>{"use strict";Object.defineProperty(GZe,"__esModule",{value:!0})});var WZe=m(zZe=>{"use strict";Object.defineProperty(zZe,"__esModule",{value:!0})});var YZe=m(JZe=>{"use strict";Object.defineProperty(JZe,"__esModule",{value:!0})});var XZe=m(QZe=>{"use strict";Object.defineProperty(QZe,"__esModule",{value:!0})});var eet=m(ZZe=>{"use strict";Object.defineProperty(ZZe,"__esModule",{value:!0})});var ret=m(tet=>{"use strict";Object.defineProperty(tet,"__esModule",{value:!0})});var iet=m(net=>{"use strict";Object.defineProperty(net,"__esModule",{value:!0})});var oet=m(set=>{"use strict";Object.defineProperty(set,"__esModule",{value:!0})});var uet=m(Jq=>{"use strict";Object.defineProperty(Jq,"__esModule",{value:!0});Jq.ClientType=void 0;var aet;(function(t){t.blocking="blocking",t.normal="normal"})(aet||(Jq.ClientType=aet={}))});var det=m(cet=>{"use strict";Object.defineProperty(cet,"__esModule",{value:!0})});var fet=m(pet=>{"use strict";Object.defineProperty(pet,"__esModule",{value:!0})});var met=m(het=>{"use strict";Object.defineProperty(het,"__esModule",{value:!0})});var get=m(yet=>{"use strict";Object.defineProperty(yet,"__esModule",{value:!0})});var bet=m(Eet=>{"use strict";Object.defineProperty(Eet,"__esModule",{value:!0})});var vet=m(_et=>{"use strict";Object.defineProperty(_et,"__esModule",{value:!0})});var Aet=m(wet=>{"use strict";Object.defineProperty(wet,"__esModule",{value:!0})});var Tet=m(Cet=>{"use strict";Object.defineProperty(Cet,"__esModule",{value:!0})});var xet=m(Oet=>{"use strict";Object.defineProperty(Oet,"__esModule",{value:!0})});var Ret=m(Iet=>{"use strict";Object.defineProperty(Iet,"__esModule",{value:!0})});var ket=m(Det=>{"use strict";Object.defineProperty(Det,"__esModule",{value:!0})});var Pet=m(Met=>{"use strict";Object.defineProperty(Met,"__esModule",{value:!0})});var Fet=m(Net=>{"use strict";Object.defineProperty(Net,"__esModule",{value:!0})});var qet=m(Bet=>{"use strict";Object.defineProperty(Bet,"__esModule",{value:!0})});var Let=m(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var Ar=(ia(),Jt(na));Ar.__exportStar(AZe(),yr);Ar.__exportStar(TZe(),yr);Ar.__exportStar(xZe(),yr);Ar.__exportStar(RZe(),yr);Ar.__exportStar(kZe(),yr);Ar.__exportStar(PZe(),yr);Ar.__exportStar(FZe(),yr);Ar.__exportStar(qZe(),yr);Ar.__exportStar(jZe(),yr);Ar.__exportStar(KZe(),yr);Ar.__exportStar(VZe(),yr);Ar.__exportStar(HZe(),yr);Ar.__exportStar(WZe(),yr);Ar.__exportStar(YZe(),yr);Ar.__exportStar(XZe(),yr);Ar.__exportStar(eet(),yr);Ar.__exportStar(ret(),yr);Ar.__exportStar(iet(),yr);Ar.__exportStar(oet(),yr);Ar.__exportStar(uet(),yr);Ar.__exportStar(det(),yr);Ar.__exportStar(fet(),yr);Ar.__exportStar(met(),yr);Ar.__exportStar(get(),yr);Ar.__exportStar(bet(),yr);Ar.__exportStar(vet(),yr);Ar.__exportStar(Aet(),yr);Ar.__exportStar(Tet(),yr);Ar.__exportStar(xet(),yr);Ar.__exportStar(Ret(),yr);Ar.__exportStar(ket(),yr);Ar.__exportStar(Pet(),yr);Ar.__exportStar(Fet(),yr);Ar.__exportStar(qet(),yr)});var $et=m(jet=>{"use strict";Object.defineProperty(jet,"__esModule",{value:!0})});var Uet=m(Ket=>{"use strict";Object.defineProperty(Ket,"__esModule",{value:!0})});var Get=m(Vet=>{"use strict";Object.defineProperty(Vet,"__esModule",{value:!0})});var zet=m(Het=>{"use strict";Object.defineProperty(Het,"__esModule",{value:!0})});var Jet=m(Wet=>{"use strict";Object.defineProperty(Wet,"__esModule",{value:!0})});var Qet=m(Yet=>{"use strict";Object.defineProperty(Yet,"__esModule",{value:!0})});var Zet=m(Xet=>{"use strict";Object.defineProperty(Xet,"__esModule",{value:!0})});var ttt=m(ett=>{"use strict";Object.defineProperty(ett,"__esModule",{value:!0})});var ntt=m(rtt=>{"use strict";Object.defineProperty(rtt,"__esModule",{value:!0})});var itt=m(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var c1=(ia(),Jt(na));c1.__exportStar($et(),pd);c1.__exportStar(Uet(),pd);c1.__exportStar(Get(),pd);c1.__exportStar(zet(),pd);c1.__exportStar(Jet(),pd);c1.__exportStar(Qet(),pd);c1.__exportStar(Zet(),pd);c1.__exportStar(ttt(),pd);c1.__exportStar(ntt(),pd)});var ott=m(stt=>{"use strict";Object.defineProperty(stt,"__esModule",{value:!0})});var att=m(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});var S2=(ia(),Jt(na));S2.__exportStar(SZe(),l1);S2.__exportStar(Ru(),l1);S2.__exportStar(Let(),l1);S2.__exportStar(itt(),l1);S2.__exportStar(Hc(),l1);S2.__exportStar(ott(),l1);S2.__exportStar(hB(),l1)});var mqr=Ct(Bde()),yqr=Ct(VGe());BI();var ltt=Ct(att()),Mle=Ct(r0());rie();bf();SP();var Yq=Ct(hy());hw();bf();om();var qhr={dbName:"Admina-Api",appName:"Admina-Api",serverApi:{version:"1",strict:!0,deprecationErrors:!0}},utt=async(t="Application")=>{if(!As.MONGO_URI)throw new on("MongoDB URI is not defined in the configuration.");if(Yq.default.connection.readyState===1){qe.info(`${t} is already connected to MongoDB.`);return}try{await Yq.default.connect(As.MONGO_URI,qhr),qe.info(`${t} connected to the database successfully.`,{uri:As.MONGO_URI,context:t})}catch(e){throw qe.error(`Error connecting ${t} to the database:`,{error:Xs.serialize(e)}),new on("Database connection failed")}},ctt=async(t="Application")=>{try{await Yq.default.disconnect(),qe.info(`\u{1F6D1} ${t} disconnected from the database successfully.`)}catch(e){if(e instanceof Error)throw new on(e.message);qe.error(`Error disconnecting ${t} from the database`,{error:Xs.serialize(e)})}};om();var Qq=Ct(require("fs/promises")),Ple=class{constructor(){this.queueName="translation-queue";this.concurrency=5;this.connectionOptions={host:"127.0.0.1",port:6379};this.init(),this.setupSignalHandlers()}async init(){try{await utt("Worker"),this.worker=new ltt.Worker(this.queueName,this.processJob.bind(this),{connection:this.connectionOptions,concurrency:this.concurrency,limiter:{max:50,duration:1e4}}),this.setupListeners(),qe.info(`Worker started on queue "${this.queueName}" with concurrency: ${this.concurrency}`)}catch(e){qe.error("Failed to start worker:",{error:Xs.serialize(e)}),process.exit(1)}}async processJob(e){let{data:r,id:n,attemptsMade:i}=e,{docId:s,user:o,targetLanguage:a,file:u}=r,c=`job:${s}`,l=Date.now();qe.info(`[Job Start] ID: ${n} | Doc: ${s} | Attempt: ${i+1}`,{user:o.email,attempt:i+1});try{let d=Mle.container.resolve("IGeminiAIService"),p=Mle.container.resolve("IDocumentService"),f=await Qq.default.readFile(u.filePath),h={fieldname:"file",originalname:u.originalname,mimetype:u.mimetype,buffer:f,size:f.length};qe.info(`[Job Progress] Doc: ${s} -> Translating`,{jobId:n});try{await Ln.hset(c,"status","translate"),await Ln.expire(c,1800)}catch{throw new on("Failed to initialize job status in Redis")}let g=await d.translateDocument(h,a);qe.info(`[Job Progress] Doc: ${s} -> Summarizing`,{jobId:n}),await Ln.hset(c,"status","summarize");let _=await d.summarizeDocument(g.translatedText,a);await Ln.hset(c,"status","saving");let S={title:_.title||"",sender:_.sender||"",receivedDate:_.receivedDate||new Date,summary:_.summary||"",actionPlan:_.actionPlan||[],actionPlans:(_.actionPlans||[]).map(C=>({id:C.id||Og(),title:C.title||"",dueDate:C.dueDate||new Date,completed:!1,location:C.location||""})),userId:o.userId.toString(),docId:s,translatedText:g.translatedText,structuredTranslatedText:g.structuredTranslatedText,targetLanguage:a,pdfBlobStorage:!1};qe.info(`[Job Progress] Doc: ${s} -> Creating Document and Saving to DB`,{jobId:n}),await p.createDocumentAndUpdatePlanLimit(S,o.plan);let w=(Date.now()-l)/1e3;qe.info(`[Job Success] ID: ${n} | Doc: ${s} | Duration: ${w}s`),await Ln.hset(c,"status","completed"),await Qq.default.unlink(u.filePath).catch(C=>qe.error("Failed to delete temp file",C))}catch(d){let p=i+1>=(e.opts.attempts||1);throw qe.error(`[Job Failed] ID: ${n} | Doc: ${s} | Attempt: ${i+1}`,{error:Xs.serialize(d),isFinalAttempt:p,code:d.code||"UNKNOWN"}),await Ln.hset(c,{status:"error",error:d.message}),e.attemptsMade+1>=(e.opts.attempts||1)&&await Qq.default.unlink(u.filePath).catch(f=>qe.error("Failed to delete temp file",f)),d}}setupListeners(){this.worker&&(this.worker.on("completed",async e=>{await Ln.del(`lock:user:${e.data.user.email}`)}),this.worker.on("failed",async(e,r)=>{qe.error(`BullMQ Event: Job ${e?.id} failed`,{error:Xs.serialize(r)}),e&&e.attemptsMade>=e.opts.attempts&&(await Ln.del(`lock:user:${e.data.user.email}`),qe.warn(`Job ${e.id} permanently failed. Lock released.`))}),this.worker.on("error",e=>{qe.error("Worker connection error:",{error:Xs.serialize(e)})}))}setupSignalHandlers(){let e=async r=>{qe.warn(`Worker received ${r}, shutting down...`);try{this.worker&&(await this.worker.close(),qe.info("BullMQ Worker closed.")),await ctt("Worker"),Ln.status==="ready"&&(await Ln.quit(),qe.info("Redis disconnected.")),await RZ.flush(),qe.info("Worker shutdown complete."),process.exit(0)}catch(n){qe.error("Error during worker shutdown",{error:Xs.serialize(n)}),process.exit(1)}};process.on("SIGTERM",()=>e("SIGTERM")),process.on("SIGINT",()=>e("SIGINT"))}};new Ple;
/**
 * @copyright 2025 Adeniyi Bella
 * @license Apache-2.0
 */
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

mongoose/lib/connectionState.js:
  (*!
   * Connection states
   *)

mongoose/lib/helpers/immediate.js:
  (*!
   * Centralize this so we can more easily work around issues with people
   * stubbing out `process.nextTick()` in tests using sinon:
   * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
   * See gh-6074
   *)

mongoose/lib/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/error/mongooseError.js:
mongoose/lib/options.js:
mongoose/lib/helpers/clone.js:
mongoose/lib/helpers/error/combinePathErrors.js:
mongoose/lib/schema/operators/exists.js:
mongoose/lib/schema/operators/type.js:
mongoose/lib/helpers/schematype/handleImmutable.js:
mongoose/lib/helpers/document/applyDefaults.js:
mongoose/lib/helpers/document/cleanModifiedSubpaths.js:
mongoose/lib/helpers/projection/isDefiningProjection.js:
mongoose/lib/helpers/projection/isExclusive.js:
mongoose/lib/helpers/projection/isPathSelectedInclusive.js:
mongoose/lib/types/subdocument.js:
mongoose/lib/helpers/schema/idGetter.js:
mongoose/lib/helpers/schema/handleTimestampOption.js:
mongoose/lib/helpers/update/applyTimestampsToChildren.js:
mongoose/lib/helpers/update/applyTimestampsToUpdate.js:
mongoose/lib/constants.js:
mongoose/lib/helpers/model/applyHooks.js:
mongoose/lib/types/map.js:
mongoose/lib/options/schemaArrayOptions.js:
mongoose/lib/options/schemaNumberOptions.js:
mongoose/lib/options/schemaBufferOptions.js:
mongoose/lib/options/schemaDateOptions.js:
mongoose/lib/plugins/saveSubdocs.js:
mongoose/lib/plugins/sharding.js:
mongoose/lib/plugins/validateBeforeSave.js:
mongoose/lib/helpers/model/discriminator.js:
mongoose/lib/options/schemaDocumentArrayOptions.js:
mongoose/lib/schema/map.js:
mongoose/lib/options/schemaObjectIdOptions.js:
mongoose/lib/options/schemaStringOptions.js:
mongoose/lib/schema/union.js:
mongoose/lib/driver.js:
mongoose/lib/helpers/query/castUpdate.js:
mongoose/lib/helpers/projection/isInclusive.js:
mongoose/lib/helpers/query/hasDollarKeys.js:
mongoose/lib/helpers/query/selectPopulatedFields.js:
mongoose/lib/helpers/populate/leanPopulateMap.js:
mongoose/lib/helpers/populate/getVirtual.js:
mongoose/lib/helpers/populate/getSchemaTypes.js:
mongoose/lib/helpers/populate/getModelsMapForPopulate.js:
mongoose/lib/helpers/parallelLimit.js:
mongoose/lib/helpers/populate/removeDeselectedForeignField.js:
  (*!
   * ignore
   *)

mongoose/lib/types/objectid.js:
  (*!
   * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
   *)

mongoose/lib/drivers/node-mongodb-native/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from abstract Collection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/cursor/changeStream.js:
mongoose/lib/error/serverSelection.js:
mongoose/lib/stateMachine.js:
mongoose/lib/helpers/common.js:
mongoose/lib/utils.js:
mongoose/lib/schema/subdocument.js:
mongoose/lib/cursor/queryCursor.js:
mquery/lib/utils.js:
mongoose/lib/cursor/aggregationCursor.js:
mongoose/lib/documentProvider.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)

mongoose/lib/error/cast.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/error/notFound.js:
mongoose/lib/error/validator.js:
mongoose/lib/error/version.js:
mongoose/lib/error/parallelSave.js:
mongoose/lib/error/overwriteModel.js:
mongoose/lib/error/missingSchema.js:
mongoose/lib/error/bulkSaveIncompleteError.js:
mongoose/lib/error/divergentArray.js:
mongoose/lib/error/parallelValidate.js:
mongoose/lib/error/invalidSchemaOption.js:
mongoose/lib/error/bulkWriteError.js:
mongoose/lib/error/eachAsyncMultiError.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * exports
   *)

mongoose/lib/error/validation.js:
mongoose/lib/error/setOptionError.js:
  (*!
   * Module requirements
   *)
  (*!
   * Module exports
   *)

mongoose/lib/error/strict.js:
mongoose/lib/error/strictPopulate.js:
mongoose/lib/error/objectExpected.js:
mongoose/lib/error/objectParameter.js:
mongoose/lib/cast.js:
mongoose/lib/error/syncIndexes.js:
mongoose/lib/helpers/cursor/eachAsync.js:
mongoose/lib/helpers/updateValidators.js:
mongoose/lib/index.js:
  (*!
   * Module dependencies.
   *)

mongoose/lib/error/index.js:
mongoose/lib/types/index.js:
mongoose/lib/schema/index.js:
mongoose/lib/drivers/node-mongodb-native/index.js:
  (*!
   * Module exports.
   *)

mpath/lib/index.js:
  (*!
   * Split a string path into components delimited by '.' or
   * '[\d+]'
   *
   * #### Example:
   *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
   *)
  (*!
   * Recursively set nested arrays
   *)
  (*!
   * Returns the value passed to it.
   *)

mongoose/lib/internal.js:
  (*!
   * Dependencies
   *)

mongoose/lib/types/buffer.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Buffer.
   *)
  (*!
   * Compile other Buffer methods marking this buffer as modified.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/mixed.js:
mongoose/lib/schema/documentArrayElement.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/helpers/document/compile.js:
  (*!
   * exports
   *)

mongoose/lib/queryHelpers.js:
  (*!
   * Module dependencies
   *)
  (*!
   * ignore
   *)

mongoose/lib/types/arraySubdocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Subdocument
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/types/array/methods/index.js:
  (*!
   * ignore
   *)
  (*!
   * Minimize _just_ empty objects along the path chain specified
   * by `parts`, ignoring all other paths. Useful in cases where
   * you want to minimize after unsetting a path.
   *
   * #### Example:
   *
   *     const obj = { foo: { bar: { baz: {} } }, a: {} };
   *     _minimizePath(obj, 'foo.bar.baz');
   *     obj; // { a: {} }
   *)
  (*!
   * If `docs` isn't all instances of the right model, depopulate `arr`
   *)

mongoose/lib/types/array/index.js:
mongoose/lib/types/documentArray/index.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/document.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Document exposes the NodeJS event emitter API, so you can use
   * `on`, `once`, etc.
   *)
  (*!
   * Converts to POJO when you use the document for querying
   *)
  (*!
   * Runs queued functions
   *)
  (*!
   * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
   *)
  (*!
   * Applies virtuals properties to `json`.
   *)
  (*!
   * Check if the given document only has primitive values
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schemaType.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/virtualType.js:
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/schema/operators/bitwise.js:
mongoose/lib/schema/operators/helpers.js:
mongoose/lib/schema/operators/geospatial.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)

mongoose/lib/schema/number.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/array.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Virtuals defined on this array itself.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/bigint.js:
mongoose/lib/schema/boolean.js:
mongoose/lib/schema/buffer.js:
mongoose/lib/schema/decimal128.js:
mongoose/lib/schema/double.js:
mongoose/lib/schema/int32.js:
mongoose/lib/schema/objectId.js:
mongoose/lib/schema/string.js:
mongoose/lib/schema/uuid.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/date.js:
  (*!
   * Module requirements.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/documentArray.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaArray.
   *)
  (*!
   * ignore
   *)
  (*!
   * Handle casting $elemMatch operators
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter.
   *)
  (*!
   * ignore
   *)
  (*!
   * Get this schema's default toObject/toJSON options, including Mongoose global
   * options.
   *)
  (*!
   * Recursively set options on implicitly created schemas
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter
   *)
  (*!
   * Reset document state in between transaction retries re: gh-13698
   *)
  (*!
   * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
   *)
  (*!
   * Get the default buffer timeout for this connection
   *)
  (*!
   * ignore
   *)
  (*!
   * Called internally by `openUri()` to create a MongoClient instance.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/drivers/node-mongodb-native/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from Connection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/validOptions.js:
  (*!
   * Valid mongoose options
   *)

mquery/lib/mquery.js:
  (*!
   * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
   *
   *     Thing.where('type').nin(array)
   *)
  (*!
   * @ignore
   *)
  (*!
   * limit, skip, batchSize, comment
   *
   * Sets these associated options.
   *
   *     query.comment('feed query');
   *)
  (*!
   * Internal helper for updateMany, updateOne
   *)
  (*!
   * Permissions
   *)
  (*!
   * Exports.
   *)

mongoose/lib/query.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * inherit mquery
   *)
  (*!
   * Overwrite mquery's `_distinct`, because Mongoose uses that name
   * to store the field to apply distinct on.
   *)
  (*!
   * ignore
   *)
  (*!
   * If `translateAliases` option is set, call `Model.translateAliases()`
   * on the following query properties: filter, projection, update, distinct.
   *)
  (*!
   * Convert sort values
   *)
  (*!
   * Export
   *)

mongoose/lib/aggregate.js:
  (*!
   * Module dependencies
   *)
  (*!
   * define methods
   *)
  (*!
   * Helpers
   *)
  (*!
   * Exports
   *)

mongoose/lib/model.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Give the constructor the ability to emit events.
   *)
  (*!
   * Populates `docs` for a single `populateOptions` instance.
   *)
  (*!
   * Applies query middleware from this model's schema to this model's
   * Query constructor.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/browserDocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from the NodeJS document
   *)
  (*!
   * ignore
   *)
  (*!
   * Browser doc exposes the event emitter API
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/mongoose.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
   * No-op if there is already a default connection.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/CacheHelpers.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.8.0 2025-09-24 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.13.0 2025-09-24 *)

media-typer/index.js:
  (*!
   * media-typer
   * Copyright(c) 2014 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

type-is/index.js:
  (*!
   * type-is
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2014-2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

gtoken/build/cjs/src/index.cjs:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)

@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
